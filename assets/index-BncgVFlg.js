(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function JE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bm={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function zA(){if($_)return Ql;$_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Ql.Fragment=e,Ql.jsx=n,Ql.jsxs=n,Ql}var K_;function BA(){return K_||(K_=1,bm.exports=zA()),bm.exports}var T=BA(),wm={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function qA(){if(Q_)return Ve;Q_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Q={};function H(L,ie,ce){this.props=L,this.context=ie,this.refs=Q,this.updater=ce||O}H.prototype.isReactComponent={},H.prototype.setState=function(L,ie){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ie,"setState")},H.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function Y(){}Y.prototype=H.prototype;function ae(L,ie,ce){this.props=L,this.context=ie,this.refs=Q,this.updater=ce||O}var ne=ae.prototype=new Y;ne.constructor=ae,M(ne,H.prototype),ne.isPureReactComponent=!0;var me=Array.isArray,ye={H:null,A:null,T:null,S:null,V:null},Re=Object.prototype.hasOwnProperty;function P(L,ie,ce,se,ve,ke){return ce=ke.ref,{$$typeof:i,type:L,key:ie,ref:ce!==void 0?ce:null,props:ke}}function S(L,ie){return P(L.type,ie,void 0,void 0,void 0,L.props)}function R(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function N(L){var ie={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ce){return ie[ce]})}var x=/\/+/g;function k(L,ie){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):ie.toString(36)}function C(){}function Ne(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(C,C):(L.status="pending",L.then(function(ie){L.status==="pending"&&(L.status="fulfilled",L.value=ie)},function(ie){L.status==="pending"&&(L.status="rejected",L.reason=ie)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Oe(L,ie,ce,se,ve){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var we=!1;if(L===null)we=!0;else switch(ke){case"bigint":case"string":case"number":we=!0;break;case"object":switch(L.$$typeof){case i:case e:we=!0;break;case E:return we=L._init,Oe(we(L._payload),ie,ce,se,ve)}}if(we)return ve=ve(L),we=se===""?"."+k(L,0):se,me(ve)?(ce="",we!=null&&(ce=we.replace(x,"$&/")+"/"),Oe(ve,ie,ce,"",function(_n){return _n})):ve!=null&&(R(ve)&&(ve=S(ve,ce+(ve.key==null||L&&L.key===ve.key?"":(""+ve.key).replace(x,"$&/")+"/")+we)),ie.push(ve)),1;we=0;var Tt=se===""?".":se+":";if(me(L))for(var st=0;st<L.length;st++)se=L[st],ke=Tt+k(se,st),we+=Oe(se,ie,ce,ke,ve);else if(st=I(L),typeof st=="function")for(L=st.call(L),st=0;!(se=L.next()).done;)se=se.value,ke=Tt+k(se,st++),we+=Oe(se,ie,ce,ke,ve);else if(ke==="object"){if(typeof L.then=="function")return Oe(Ne(L),ie,ce,se,ve);throw ie=String(L),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return we}function W(L,ie,ce){if(L==null)return L;var se=[],ve=0;return Oe(L,se,"","",function(ke){return ie.call(ce,ke,ve++)}),se}function oe(L){if(L._status===-1){var ie=L._result;ie=ie(),ie.then(function(ce){(L._status===0||L._status===-1)&&(L._status=1,L._result=ce)},function(ce){(L._status===0||L._status===-1)&&(L._status=2,L._result=ce)}),L._status===-1&&(L._status=0,L._result=ie)}if(L._status===1)return L._result.default;throw L._result}var Ee=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Pe(){}return Ve.Children={map:W,forEach:function(L,ie,ce){W(L,function(){ie.apply(this,arguments)},ce)},count:function(L){var ie=0;return W(L,function(){ie++}),ie},toArray:function(L){return W(L,function(ie){return ie})||[]},only:function(L){if(!R(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ve.Component=H,Ve.Fragment=n,Ve.Profiler=o,Ve.PureComponent=ae,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ye,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ye.H.useMemoCache(L)}},Ve.cache=function(L){return function(){return L.apply(null,arguments)}},Ve.cloneElement=function(L,ie,ce){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var se=M({},L.props),ve=L.key,ke=void 0;if(ie!=null)for(we in ie.ref!==void 0&&(ke=void 0),ie.key!==void 0&&(ve=""+ie.key),ie)!Re.call(ie,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ie.ref===void 0||(se[we]=ie[we]);var we=arguments.length-2;if(we===1)se.children=ce;else if(1<we){for(var Tt=Array(we),st=0;st<we;st++)Tt[st]=arguments[st+2];se.children=Tt}return P(L.type,ve,void 0,void 0,ke,se)},Ve.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Ve.createElement=function(L,ie,ce){var se,ve={},ke=null;if(ie!=null)for(se in ie.key!==void 0&&(ke=""+ie.key),ie)Re.call(ie,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ve[se]=ie[se]);var we=arguments.length-2;if(we===1)ve.children=ce;else if(1<we){for(var Tt=Array(we),st=0;st<we;st++)Tt[st]=arguments[st+2];ve.children=Tt}if(L&&L.defaultProps)for(se in we=L.defaultProps,we)ve[se]===void 0&&(ve[se]=we[se]);return P(L,ke,void 0,void 0,null,ve)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:m,render:L}},Ve.isValidElement=R,Ve.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:oe}},Ve.memo=function(L,ie){return{$$typeof:g,type:L,compare:ie===void 0?null:ie}},Ve.startTransition=function(L){var ie=ye.T,ce={};ye.T=ce;try{var se=L(),ve=ye.S;ve!==null&&ve(ce,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Pe,Ee)}catch(ke){Ee(ke)}finally{ye.T=ie}},Ve.unstable_useCacheRefresh=function(){return ye.H.useCacheRefresh()},Ve.use=function(L){return ye.H.use(L)},Ve.useActionState=function(L,ie,ce){return ye.H.useActionState(L,ie,ce)},Ve.useCallback=function(L,ie){return ye.H.useCallback(L,ie)},Ve.useContext=function(L){return ye.H.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L,ie){return ye.H.useDeferredValue(L,ie)},Ve.useEffect=function(L,ie,ce){var se=ye.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(L,ie)},Ve.useId=function(){return ye.H.useId()},Ve.useImperativeHandle=function(L,ie,ce){return ye.H.useImperativeHandle(L,ie,ce)},Ve.useInsertionEffect=function(L,ie){return ye.H.useInsertionEffect(L,ie)},Ve.useLayoutEffect=function(L,ie){return ye.H.useLayoutEffect(L,ie)},Ve.useMemo=function(L,ie){return ye.H.useMemo(L,ie)},Ve.useOptimistic=function(L,ie){return ye.H.useOptimistic(L,ie)},Ve.useReducer=function(L,ie,ce){return ye.H.useReducer(L,ie,ce)},Ve.useRef=function(L){return ye.H.useRef(L)},Ve.useState=function(L){return ye.H.useState(L)},Ve.useSyncExternalStore=function(L,ie,ce){return ye.H.useSyncExternalStore(L,ie,ce)},Ve.useTransition=function(){return ye.H.useTransition()},Ve.version="19.1.0",Ve}var Y_;function Sp(){return Y_||(Y_=1,wm.exports=qA()),wm.exports}var V=Sp();const ys=JE(V);var Sm={exports:{}},Yl={},Am={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function HA(){return W_||(W_=1,function(i){function e(W,oe){var Ee=W.length;W.push(oe);e:for(;0<Ee;){var Pe=Ee-1>>>1,L=W[Pe];if(0<o(L,oe))W[Pe]=oe,W[Ee]=L,Ee=Pe;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var oe=W[0],Ee=W.pop();if(Ee!==oe){W[0]=Ee;e:for(var Pe=0,L=W.length,ie=L>>>1;Pe<ie;){var ce=2*(Pe+1)-1,se=W[ce],ve=ce+1,ke=W[ve];if(0>o(se,Ee))ve<L&&0>o(ke,se)?(W[Pe]=ke,W[ve]=Ee,Pe=ve):(W[Pe]=se,W[ce]=Ee,Pe=ce);else if(ve<L&&0>o(ke,Ee))W[Pe]=ke,W[ve]=Ee,Pe=ve;else break e}}return oe}function o(W,oe){var Ee=W.sortIndex-oe.sortIndex;return Ee!==0?Ee:W.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],g=[],E=1,w=null,I=3,O=!1,M=!1,Q=!1,H=!1,Y=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function me(W){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=W)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function ye(W){if(Q=!1,me(W),!M)if(n(p)!==null)M=!0,Re||(Re=!0,k());else{var oe=n(g);oe!==null&&Oe(ye,oe.startTime-W)}}var Re=!1,P=-1,S=5,R=-1;function N(){return H?!0:!(i.unstable_now()-R<S)}function x(){if(H=!1,Re){var W=i.unstable_now();R=W;var oe=!0;try{e:{M=!1,Q&&(Q=!1,ae(P),P=-1),O=!0;var Ee=I;try{t:{for(me(W),w=n(p);w!==null&&!(w.expirationTime>W&&N());){var Pe=w.callback;if(typeof Pe=="function"){w.callback=null,I=w.priorityLevel;var L=Pe(w.expirationTime<=W);if(W=i.unstable_now(),typeof L=="function"){w.callback=L,me(W),oe=!0;break t}w===n(p)&&s(p),me(W)}else s(p);w=n(p)}if(w!==null)oe=!0;else{var ie=n(g);ie!==null&&Oe(ye,ie.startTime-W),oe=!1}}break e}finally{w=null,I=Ee,O=!1}oe=void 0}}finally{oe?k():Re=!1}}}var k;if(typeof ne=="function")k=function(){ne(x)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ne=C.port2;C.port1.onmessage=x,k=function(){Ne.postMessage(null)}}else k=function(){Y(x,0)};function Oe(W,oe){P=Y(function(){W(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(W){switch(I){case 1:case 2:case 3:var oe=3;break;default:oe=I}var Ee=I;I=oe;try{return W()}finally{I=Ee}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ee=I;I=W;try{return oe()}finally{I=Ee}},i.unstable_scheduleCallback=function(W,oe,Ee){var Pe=i.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Pe+Ee:Pe):Ee=Pe,W){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Ee+L,W={id:E++,callback:oe,priorityLevel:W,startTime:Ee,expirationTime:L,sortIndex:-1},Ee>Pe?(W.sortIndex=Ee,e(g,W),n(p)===null&&W===n(g)&&(Q?(ae(P),P=-1):Q=!0,Oe(ye,Ee-Pe))):(W.sortIndex=L,e(p,W),M||O||(M=!0,Re||(Re=!0,k()))),W},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(W){var oe=I;return function(){var Ee=I;I=oe;try{return W.apply(this,arguments)}finally{I=Ee}}}}(Rm)),Rm}var X_;function FA(){return X_||(X_=1,Am.exports=HA()),Am.exports}var Im={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function GA(){if(Z_)return sn;Z_=1;var i=Sp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:E}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,sn.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},sn.flushSync=function(p){var g=d.T,E=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=E,s.d.f()}},sn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},sn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},sn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,w=m(E,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:I,fetchPriority:O}):E==="script"&&s.d.X(p,{crossOrigin:w,integrity:I,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},sn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,w=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},sn.requestFormReset=function(p){s.d.r(p)},sn.unstable_batchedUpdates=function(p,g){return p(g)},sn.useFormState=function(p,g,E){return d.H.useFormState(p,g,E)},sn.useFormStatus=function(){return d.H.useHostTransitionStatus()},sn.version="19.1.0",sn}var J_;function eT(){if(J_)return Im.exports;J_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=GA(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function $A(){if(e0)return Yl;e0=1;var i=FA(),e=Sp(),n=eT();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=f;break}if(b===l){_=!0,l=h,a=f;break}b=b.sibling}if(!_){for(b=f.child;b;){if(b===a){_=!0,a=f,l=h;break}if(b===l){_=!0,l=f,a=h;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case H:return"Profiler";case Q:return"StrictMode";case ye:return"Suspense";case Re:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case me:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return r=t.displayName||null,r!==null?r:Ne(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return Ne(t(r))}catch{}}return null}var Oe=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Pe=[],L=-1;function ie(t){return{current:t}}function ce(t){0>L||(t.current=Pe[L],Pe[L]=null,L--)}function se(t,r){L++,Pe[L]=t.current,t.current=r}var ve=ie(null),ke=ie(null),we=ie(null),Tt=ie(null);function st(t,r){switch(se(we,r),se(ke,t),se(ve,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?E_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=E_(r),t=T_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ce(ve),se(ve,t)}function _n(){ce(ve),ce(ke),ce(we)}function ni(t){t.memoizedState!==null&&se(Tt,t);var r=ve.current,a=T_(r,t.type);r!==a&&(se(ke,t),se(ve,a))}function xn(t){ke.current===t&&(ce(ve),ce(ke)),Tt.current===t&&(ce(Tt),Hl._currentValue=Ee)}var gi=Object.prototype.hasOwnProperty,yi=i.unstable_scheduleCallback,Gi=i.unstable_cancelCallback,Ds=i.unstable_shouldYield,Os=i.unstable_requestPaint,dn=i.unstable_now,$o=i.unstable_getCurrentPriorityLevel,kr=i.unstable_ImmediatePriority,Pr=i.unstable_UserBlockingPriority,$i=i.unstable_NormalPriority,Ko=i.unstable_LowPriority,Lr=i.unstable_IdlePriority,Ms=i.log,Ia=i.unstable_setDisableYieldValue,gt=null,Je=null;function Qt(t){if(typeof Ms=="function"&&Ia(t),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(gt,t)}catch{}}var Bt=Math.clz32?Math.clz32:vi,Ca=Math.log,Qo=Math.LN2;function vi(t){return t>>>=0,t===0?32:31-(Ca(t)/Qo|0)|0}var Ki=256,_i=4194304;function En(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qi(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~f,l!==0?h=En(l):(_&=b,_!==0?h=En(_):a||(a=b&~t,a!==0&&(h=En(a))))):(b=l&~f,b!==0?h=En(b):_!==0?h=En(_):a||(a=l&~t,a!==0&&(h=En(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Yi(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Vs(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ur(){var t=Ki;return Ki<<=1,(Ki&4194048)===0&&(Ki=256),t}function jr(){var t=_i;return _i<<=1,(_i&62914560)===0&&(_i=4194304),t}function Ei(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function zn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ks(t,r,a,l,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var X=31-Bt(a),ee=1<<X;b[X]=0,D[X]=-1;var G=F[X];if(G!==null)for(F[X]=null,X=0;X<G.length;X++){var $=G[X];$!==null&&($.lane&=-536870913)}a&=~ee}l!==0&&Bn(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~r))}function Bn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Bt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function j(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Bt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function re(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function le(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function de(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:z_(t.type))}function fe(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var he=Math.random().toString(36).slice(2),Be="__reactFiber$"+he,at="__reactProps$"+he,Xe="__reactContainer$"+he,$e="__reactEvents$"+he,ii="__reactListeners$"+he,fn="__reactHandles$"+he,Ps="__reactResources$"+he,dt="__reactMarker$"+he;function pt(t){delete t[Be],delete t[at],delete t[$e],delete t[ii],delete t[fn]}function Wi(t){var r=t[Be];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Xe]||a[Be]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=A_(t);t!==null;){if(a=t[Be])return a;t=A_(t)}return r}t=a,a=t.parentNode}return null}function Ti(t){if(t=t[Be]||t[Xe]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function bi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function mn(t){var r=t[Ps];return r||(r=t[Ps]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(t){t[dt]=!0}var Yo=new Set,xa={};function ri(t,r){Xi(t,r),Xi(t+"Capture",r)}function Xi(t,r){for(xa[t]=r,t=0;t<r.length;t++)Yo.add(r[t])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},Ls={};function Hu(t){return gi.call(Ls,t)?!0:gi.call(qu,t)?!1:Bu.test(t)?Ls[t]=!0:(qu[t]=!0,!1)}function zr(t,r,a){if(Hu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function wi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Yt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Us,Fu;function Zi(t){if(Us===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Us=r&&r[1]||"",Fu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+t+Fu}var Na=!1;function Da(t,r){if(!t||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch($){var G=$}Reflect.construct(t,[],ee)}else{try{ee.call()}catch($){G=$}t.call(ee.prototype)}}else{try{throw Error()}catch($){G=$}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],b=f[1];if(_&&b){var D=_.split(`
`),F=b.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var X=`
`+D[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Zi(a):""}function Wo(t){switch(t.tag){case 26:case 27:case 5:return Zi(t.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 15:return Da(t.type,!1);case 11:return Da(t.type.render,!1);case 1:return Da(t.type,!0);case 31:return Zi("Activity");default:return""}}function Oa(t){try{var r="";do r+=Wo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ad(t){var r=Xo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,f.call(this,_)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ma(t){t._valueTracker||(t._valueTracker=Ad(t))}function Zo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Xo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function js(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rd=/[\n"\\]/g;function xt(t){return t.replace(Rd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Nn(t,r,a,l,h,f,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+pn(r)):t.value!==""+pn(r)&&(t.value=""+pn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?Br(t,_,pn(r)):a!=null?Br(t,_,pn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+pn(b):t.removeAttribute("name")}function zs(t,r,a,l,h,f,_,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+pn(a):"",r=r!=null?""+pn(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Br(t,r,a){r==="number"&&js(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ji(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+pn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function ot(t,r,a){if(r!=null&&(r=""+pn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+pn(a):""}function Bs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=pn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function qn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||qs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Jo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Gu(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Gu(t,f,r[f])}function el(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(t){return Cd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var er=null;function Hn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tr=null,nr=null;function tl(t){var r=Ti(t);if(r&&(t=r.stateNode)){var a=t[at]||null;e:switch(t=r.stateNode,r.type){case"input":if(Nn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[at]||null;if(!h)throw Error(s(90));Nn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Zo(l)}break e;case"textarea":ot(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ji(t,!!a.multiple,r,!1)}}}var Si=!1;function $u(t,r,a){if(Si)return t(r,a);Si=!0;try{var l=t(r);return l}finally{if(Si=!1,(tr!==null||nr!==null)&&(jc(),tr&&(r=tr,t=nr,nr=tr=null,tl(r),t)))for(r=0;r<t.length;r++)tl(t[r])}}function Hs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[at]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fn=!1;if(si)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Fn=!1}var Ai=null,qr=null,ir=null;function nl(){if(ir)return ir;var t,r=qr,a=r.length,l,h="value"in Ai?Ai.value:Ai.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===h[f-l];l++);return ir=h.slice(t,1<l?1-l:void 0)}function Ri(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ii(){return!0}function il(){return!1}function qt(t){function r(a,l,h,f,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ii:il,this.isPropagationStopped=il,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),r}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ka=qt(tt),Gs=E({},tt,{view:0,detail:0}),Ku=qt(Gs),Pa,La,Ci,$s=E({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Pa=t.screenX-Ci.screenX,La=t.screenY-Ci.screenY):La=Pa=0,Ci=t),Pa)},movementY:function(t){return"movementY"in t?t.movementY:La}}),Gn=qt($s),Qu=E({},$s,{dataTransfer:0}),xd=qt(Qu),Ks=E({},Gs,{relatedTarget:0}),Ua=qt(Ks),rl=E({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=qt(rl),Yu=E({},tt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),za=qt(Yu),Nd=E({},tt,{data:0}),sl=qt(Nd),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Xu[t])?!!r[t]:!1}function Ys(){return al}var Zu=E({},Gs,{key:function(t){if(t.key){var r=Qs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ri(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(t){return t.type==="keypress"?Ri(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ri(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ba=qt(Zu),Ju=E({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=qt(Ju),rr=E({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),ec=qt(rr),tc=E({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=qt(tc),ic=E({},$s,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=qt(ic),gn=E({},tt,{newState:0,oldState:0}),rc=qt(gn),sc=[9,13,27,32],xi=si&&"CompositionEvent"in window,c=null;si&&"documentMode"in document&&(c=document.documentMode);var y=si&&"TextEvent"in window&&!c,v=si&&(!xi||c&&8<c&&11>=c),A=" ",B=!1;function K(t,r){switch(t){case"keyup":return sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ke=!1;function Vt(t,r){switch(t){case"compositionend":return ue(r);case"keypress":return r.which!==32?null:(B=!0,A);case"textInput":return t=r.data,t===A&&B?null:t;default:return null}}function Qe(t,r){if(Ke)return t==="compositionend"||!xi&&K(t,r)?(t=nl(),ir=qr=Ai=null,Ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ht[t.type]:r==="textarea"}function sr(t,r,a,l){tr?nr?nr.push(l):nr=[l]:tr=l,r=Gc(r,"onChange"),0<r.length&&(a=new ka("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Wt=null,Ni=null;function ll(t){p_(t,0)}function ac(t){var r=bi(t);if(Zo(r))return t}function Pg(t,r){if(t==="change")return r}var Lg=!1;if(si){var Dd;if(si){var Od="oninput"in document;if(!Od){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Od=typeof Ug.oninput=="function"}Dd=Od}else Dd=!1;Lg=Dd&&(!document.documentMode||9<document.documentMode)}function jg(){Wt&&(Wt.detachEvent("onpropertychange",zg),Ni=Wt=null)}function zg(t){if(t.propertyName==="value"&&ac(Ni)){var r=[];sr(r,Ni,t,Hn(t)),$u(ll,r)}}function gS(t,r,a){t==="focusin"?(jg(),Wt=r,Ni=a,Wt.attachEvent("onpropertychange",zg)):t==="focusout"&&jg()}function yS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ac(Ni)}function vS(t,r){if(t==="click")return ac(r)}function _S(t,r){if(t==="input"||t==="change")return ac(r)}function ES(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Dn=typeof Object.is=="function"?Object.is:ES;function ul(t,r){if(Dn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!gi.call(r,h)||!Dn(t[h],r[h]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,r){var a=Bg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bg(a)}}function Hg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Hg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Fg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=js(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=js(t.document)}return r}function Md(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var TS=si&&"documentMode"in document&&11>=document.documentMode,Ha=null,Vd=null,cl=null,kd=!1;function Gg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kd||Ha==null||Ha!==js(l)||(l=Ha,"selectionStart"in l&&Md(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ul(cl,l)||(cl=l,l=Gc(Vd,"onSelect"),0<l.length&&(r=new ka("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ha)))}function Ws(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Fa={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},Pd={},$g={};si&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Xs(t){if(Pd[t])return Pd[t];if(!Fa[t])return t;var r=Fa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in $g)return Pd[t]=r[a];return t}var Kg=Xs("animationend"),Qg=Xs("animationiteration"),Yg=Xs("animationstart"),bS=Xs("transitionrun"),wS=Xs("transitionstart"),SS=Xs("transitioncancel"),Wg=Xs("transitionend"),Xg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function ai(t,r){Xg.set(t,r),ri(r,[t])}var Zg=new WeakMap;function $n(t,r){if(typeof t=="object"&&t!==null){var a=Zg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Oa(r)},Zg.set(t,r),r)}return{value:t,source:r,stack:Oa(r)}}var Kn=[],Ga=0,Ud=0;function oc(){for(var t=Ga,r=Ud=Ga=0;r<t;){var a=Kn[r];Kn[r++]=null;var l=Kn[r];Kn[r++]=null;var h=Kn[r];Kn[r++]=null;var f=Kn[r];if(Kn[r++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&Jg(a,h,f)}}function lc(t,r,a,l){Kn[Ga++]=t,Kn[Ga++]=r,Kn[Ga++]=a,Kn[Ga++]=l,Ud|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function jd(t,r,a,l){return lc(t,r,a,l),uc(t)}function $a(t,r){return lc(t,null,null,r),uc(t)}function Jg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-Bt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function uc(t){if(50<kl)throw kl=0,$f=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ka={};function AS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,r,a,l){return new AS(t,r,a,l)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ar(t,r){var a=t.alternate;return a===null?(a=On(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ey(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function cc(t,r,a,l,h,f){var _=0;if(l=t,typeof t=="function")zd(t)&&(_=1);else if(typeof t=="string")_=IA(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=On(31,a,r,h),t.elementType=R,t.lanes=f,t;case M:return Zs(a.children,h,f,r);case Q:_=8,h|=24;break;case H:return t=On(12,a,r,h|2),t.elementType=H,t.lanes=f,t;case ye:return t=On(13,a,r,h),t.elementType=ye,t.lanes=f,t;case Re:return t=On(19,a,r,h),t.elementType=Re,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case ne:_=10;break e;case ae:_=9;break e;case me:_=11;break e;case P:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=On(_,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Zs(t,r,a,l){return t=On(7,t,l,r),t.lanes=a,t}function Bd(t,r,a){return t=On(6,t,null,r),t.lanes=a,t}function qd(t,r,a){return r=On(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Qa=[],Ya=0,hc=null,dc=0,Qn=[],Yn=0,Js=null,or=1,lr="";function ea(t,r){Qa[Ya++]=dc,Qa[Ya++]=hc,hc=t,dc=r}function ty(t,r,a){Qn[Yn++]=or,Qn[Yn++]=lr,Qn[Yn++]=Js,Js=t;var l=or;t=lr;var h=32-Bt(l)-1;l&=~(1<<h),a+=1;var f=32-Bt(r)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,or=1<<32-Bt(r)+h|a<<h|l,lr=f+t}else or=1<<f|a<<h|l,lr=t}function Hd(t){t.return!==null&&(ea(t,1),ty(t,1,0))}function Fd(t){for(;t===hc;)hc=Qa[--Ya],Qa[Ya]=null,dc=Qa[--Ya],Qa[Ya]=null;for(;t===Js;)Js=Qn[--Yn],Qn[Yn]=null,lr=Qn[--Yn],Qn[Yn]=null,or=Qn[--Yn],Qn[Yn]=null}var yn=null,bt=null,et=!1,ta=null,Di=!1,Gd=Error(s(519));function na(t){var r=Error(s(418,""));throw fl($n(r,t)),Gd}function ny(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Be]=t,r[at]=l,a){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)He(Ll[a],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":He("invalid",r),zs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ma(r);break;case"select":He("invalid",r);break;case"textarea":He("invalid",r),Bs(r,l.value,l.defaultValue,l.children),Ma(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||__(r.textContent,a)?(l.popover!=null&&(He("beforetoggle",r),He("toggle",r)),l.onScroll!=null&&He("scroll",r),l.onScrollEnd!=null&&He("scrollend",r),l.onClick!=null&&(r.onclick=$c),r=!0):r=!1,r||na(t)}function iy(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:yn=yn.return}}function hl(t){if(t!==yn)return!1;if(!et)return iy(t),et=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||lm(t.type,t.memoizedProps)),a=!a),a&&bt&&na(t),iy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){bt=li(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}bt=null}}else r===27?(r=bt,rs(t.type)?(t=dm,dm=null,bt=t):bt=r):bt=yn?li(t.stateNode.nextSibling):null;return!0}function dl(){bt=yn=null,et=!1}function ry(){var t=ta;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),ta=null),t}function fl(t){ta===null?ta=[t]:ta.push(t)}var $d=ie(null),ia=null,ur=null;function Hr(t,r,a){se($d,r._currentValue),r._currentValue=a}function cr(t){t._currentValue=$d.current,ce($d)}function Kd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Qd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=h;for(var D=0;D<r.length;D++)if(b.context===r[D]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),Kd(f.return,a,t),l||(_=null);break e}f=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Kd(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ml(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=h.type;Dn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Tt.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}h=h.return}t!==null&&Qd(r,t,a,l),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){ia=t,ur=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return sy(ia,t)}function mc(t,r){return ia===null&&ra(t),sy(t,r)}function sy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ur===null){if(t===null)throw Error(s(308));ur=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ur=ur.next=r;return a}var RS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},IS=i.unstable_scheduleCallback,CS=i.unstable_NormalPriority,Pt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new RS,data:new Map,refCount:0}}function pl(t){t.refCount--,t.refCount===0&&IS(CS,function(){t.controller.abort()})}var gl=null,Wd=0,Wa=0,Xa=null;function xS(t,r){if(gl===null){var a=gl=[];Wd=0,Wa=Jf(),Xa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wd++,r.then(ay,ay),r}function ay(){if(--Wd===0&&gl!==null){Xa!==null&&(Xa.status="fulfilled");var t=gl;gl=null,Wa=0,Xa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function NS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var oy=W.S;W.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&xS(t,r),oy!==null&&oy(t,r)};var sa=ie(null);function Xd(){var t=sa.current;return t!==null?t:ft.pooledCache}function pc(t,r){r===null?se(sa,sa.current):se(sa,r.pool)}function ly(){var t=Xd();return t===null?null:{parent:Pt._currentValue,pool:t}}var yl=Error(s(460)),uy=Error(s(474)),gc=Error(s(542)),Zd={then:function(){}};function cy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yc(){}function hy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(yc,yc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fy(t),t;default:if(typeof r.status=="string")r.then(yc,yc);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fy(t),t}throw vl=r,yl}}var vl=null;function dy(){if(vl===null)throw Error(s(459));var t=vl;return vl=null,t}function fy(t){if(t===yl||t===gc)throw Error(s(483))}var Fr=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $r(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(it&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=uc(t),Jg(t,null,a),r}return lc(t,l,r,a),uc(t)}function _l(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,j(t,a)}}function tf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var nf=!1;function El(){if(nf){var t=Xa;if(t!==null)throw t}}function Tl(t,r,a,l){nf=!1;var h=t.updateQueue;Fr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var D=b,F=D.next;D.next=null,_===null?f=F:_.next=F,_=D;var X=t.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==_&&(b===null?X.firstBaseUpdate=F:b.next=F,X.lastBaseUpdate=D))}if(f!==null){var ee=h.baseState;_=0,X=F=D=null,b=f;do{var G=b.lane&-536870913,$=G!==b.lane;if($?(Ye&G)===G:(l&G)===G){G!==0&&G===Wa&&(nf=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ce=t,Se=b;G=r;var ct=a;switch(Se.tag){case 1:if(Ce=Se.payload,typeof Ce=="function"){ee=Ce.call(ct,ee,G);break e}ee=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Se.payload,G=typeof Ce=="function"?Ce.call(ct,ee,G):Ce,G==null)break e;ee=E({},ee,G);break e;case 2:Fr=!0}}G=b.callback,G!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[G]:$.push(G))}else $={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(F=X=$,D=ee):X=X.next=$,_|=G;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;$=b,b=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);X===null&&(D=ee),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=X,f===null&&(h.shared.lanes=0),es|=_,t.lanes=_,t.memoizedState=ee}}function my(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function py(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)my(a[t],r)}var Za=ie(null),vc=ie(0);function gy(t,r){t=yr,se(vc,t),se(Za,r),yr=t|r.baseLanes}function rf(){se(vc,yr),se(Za,Za.current)}function sf(){yr=vc.current,ce(Za),ce(vc)}var Kr=0,Le=null,lt=null,Nt=null,_c=!1,Ja=!1,aa=!1,Ec=0,bl=0,eo=null,DS=0;function Rt(){throw Error(s(321))}function af(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Dn(t[a],r[a]))return!1;return!0}function of(t,r,a,l,h,f){return Kr=f,Le=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=t===null||t.memoizedState===null?Jy:ev,aa=!1,f=a(l,h),aa=!1,Ja&&(f=vy(r,a,l,h)),yy(t),f}function yy(t){W.H=Rc;var r=lt!==null&&lt.next!==null;if(Kr=0,Nt=lt=Le=null,_c=!1,bl=0,eo=null,r)throw Error(s(300));t===null||Ft||(t=t.dependencies,t!==null&&fc(t)&&(Ft=!0))}function vy(t,r,a,l){Le=t;var h=0;do{if(Ja&&(eo=null),bl=0,Ja=!1,25<=h)throw Error(s(301));if(h+=1,Nt=lt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=US,f=r(a,l)}while(Ja);return f}function OS(){var t=W.H,r=t.useState()[0];return r=typeof r.then=="function"?wl(r):r,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(Le.flags|=1024),r}function lf(){var t=Ec!==0;return Ec=0,t}function uf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function cf(t){if(_c){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}_c=!1}Kr=0,Nt=lt=Le=null,Ja=!1,bl=Ec=0,eo=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Le.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Dt(){if(lt===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var r=Nt===null?Le.memoizedState:Nt.next;if(r!==null)Nt=r,lt=t;else{if(t===null)throw Le.alternate===null?Error(s(467)):Error(s(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Nt===null?Le.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var r=bl;return bl+=1,eo===null&&(eo=[]),t=hy(eo,t,r),r=Le,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Jy:ev),t}function Tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===ne)return rn(t)}throw Error(s(438,String(t)))}function df(t){var r=null,a=Le.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=hf(),Le.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=N;return r.index++,a}function hr(t,r){return typeof r=="function"?r(t):r}function bc(t){var r=Dt();return ff(r,lt,t)}function ff(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var b=_=null,D=null,F=r,X=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Ye&ee)===ee:(Kr&ee)===ee){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Wa&&(X=!0);else if((Kr&G)===G){F=F.next,G===Wa&&(X=!0);continue}else ee={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=ee,_=f):D=D.next=ee,Le.lanes|=G,es|=G;ee=F.action,aa&&a(f,ee),f=F.hasEagerState?F.eagerState:a(f,ee)}else G={lane:ee,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=G,_=f):D=D.next=G,Le.lanes|=ee,es|=ee;F=F.next}while(F!==null&&F!==r);if(D===null?_=f:D.next=b,!Dn(f,t.memoizedState)&&(Ft=!0,X&&(a=Xa,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=D,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function mf(t){var r=Dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);Dn(f,r.memoizedState)||(Ft=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function _y(t,r,a){var l=Le,h=Dt(),f=et;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!Dn((lt||h).memoizedState,a);_&&(h.memoizedState=a,Ft=!0),h=h.queue;var b=by.bind(null,l,h,t);if(Sl(2048,8,b,[t]),h.getSnapshot!==r||_||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,to(9,wc(),Ty.bind(null,l,h,a,r),null),ft===null)throw Error(s(349));f||(Kr&124)!==0||Ey(l,r,a)}return a}function Ey(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Le.updateQueue,r===null?(r=hf(),Le.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Ty(t,r,a,l){r.value=a,r.getSnapshot=l,wy(r)&&Sy(t)}function by(t,r,a){return a(function(){wy(r)&&Sy(t)})}function wy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Dn(t,a)}catch{return!0}}function Sy(t){var r=$a(t,2);r!==null&&Ln(r,t,2)}function pf(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),aa){Qt(!0);try{a()}finally{Qt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:t},r}function Ay(t,r,a,l){return t.baseState=a,ff(t,lt,typeof l=="function"?l:hr)}function MS(t,r,a,l,h){if(Ac(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};W.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Ry(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Ry(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=W.T,_={};W.T=_;try{var b=a(h,l),D=W.S;D!==null&&D(_,b),Iy(t,r,b)}catch(F){gf(t,r,F)}finally{W.T=f}}else try{f=a(h,l),Iy(t,r,f)}catch(F){gf(t,r,F)}}function Iy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Cy(t,r,l)},function(l){return gf(t,r,l)}):Cy(t,r,a)}function Cy(t,r,a){r.status="fulfilled",r.value=a,xy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Ry(t,a)))}function gf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,xy(r),r=r.next;while(r!==l)}t.action=null}function xy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Ny(t,r){return r}function Dy(t,r){if(et){var a=ft.formState;if(a!==null){e:{var l=Le;if(et){if(bt){t:{for(var h=bt,f=Di;h.nodeType!==8;){if(!f){h=null;break t}if(h=li(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){bt=li(h.nextSibling),l=h.data==="F!";break e}}na(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:r},a.queue=l,a=Wy.bind(null,Le,l),l.dispatch=a,l=pf(!1),f=Tf.bind(null,Le,!1,l.queue),l=Tn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=MS.bind(null,Le,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Oy(t){var r=Dt();return My(r,lt,t)}function My(t,r,a){if(r=ff(t,r,Ny)[0],t=bc(hr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wl(r)}catch(_){throw _===yl?gc:_}else l=r;r=Dt();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(Le.flags|=2048,to(9,wc(),VS.bind(null,h,a),null)),[l,f,t]}function VS(t,r){t.action=r}function Vy(t){var r=Dt(),a=lt;if(a!==null)return My(r,a,t);Dt(),r=r.memoizedState,a=Dt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function to(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Le.updateQueue,r===null&&(r=hf(),Le.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function wc(){return{destroy:void 0,resource:void 0}}function ky(){return Dt().memoizedState}function Sc(t,r,a,l){var h=Tn();l=l===void 0?null:l,Le.flags|=t,h.memoizedState=to(1|r,wc(),a,l)}function Sl(t,r,a,l){var h=Dt();l=l===void 0?null:l;var f=h.memoizedState.inst;lt!==null&&l!==null&&af(l,lt.memoizedState.deps)?h.memoizedState=to(r,f,a,l):(Le.flags|=t,h.memoizedState=to(1|r,f,a,l))}function Py(t,r){Sc(8390656,8,t,r)}function Ly(t,r){Sl(2048,8,t,r)}function Uy(t,r){return Sl(4,2,t,r)}function jy(t,r){return Sl(4,4,t,r)}function zy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function By(t,r,a){a=a!=null?a.concat([t]):null,Sl(4,4,zy.bind(null,r,t),a)}function yf(){}function qy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&af(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Hy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&af(r,l[1]))return l[0];if(l=t(),aa){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[l,r],l}function vf(t,r,a){return a===void 0||(Kr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=$v(),Le.lanes|=t,es|=t,a)}function Fy(t,r,a,l){return Dn(a,r)?a:Za.current!==null?(t=vf(t,a,l),Dn(t,r)||(Ft=!0),t):(Kr&42)===0?(Ft=!0,t.memoizedState=a):(t=$v(),Le.lanes|=t,es|=t,r)}function Gy(t,r,a,l,h){var f=oe.p;oe.p=f!==0&&8>f?f:8;var _=W.T,b={};W.T=b,Tf(t,!1,r,a);try{var D=h(),F=W.S;if(F!==null&&F(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=NS(D,l);Al(t,r,X,Pn(t))}else Al(t,r,l,Pn(t))}catch(ee){Al(t,r,{then:function(){},status:"rejected",reason:ee},Pn())}finally{oe.p=f,W.T=_}}function kS(){}function _f(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=$y(t).queue;Gy(t,h,r,Ee,a===null?kS:function(){return Ky(t),a(l)})}function $y(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:Ee},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ky(t){var r=$y(t).next.queue;Al(t,r,{},Pn())}function Ef(){return rn(Hl)}function Qy(){return Dt().memoizedState}function Yy(){return Dt().memoizedState}function PS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Pn();t=Gr(a);var l=$r(r,t,a);l!==null&&(Ln(l,r,a),_l(l,r,a)),r={cache:Yd()},t.payload=r;return}r=r.return}}function LS(t,r,a){var l=Pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(t)?Xy(r,a):(a=jd(t,r,a,l),a!==null&&(Ln(a,t,l),Zy(a,r,l)))}function Wy(t,r,a){var l=Pn();Al(t,r,a,l)}function Al(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ac(t))Xy(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var _=r.lastRenderedState,b=f(_,a);if(h.hasEagerState=!0,h.eagerState=b,Dn(b,_))return lc(t,r,h,0),ft===null&&oc(),!1}catch{}finally{}if(a=jd(t,r,h,l),a!==null)return Ln(a,t,l),Zy(a,r,l),!0}return!1}function Tf(t,r,a,l){if(l={lane:2,revertLane:Jf(),action:l,hasEagerState:!1,eagerState:null,next:null},Ac(t)){if(r)throw Error(s(479))}else r=jd(t,a,l,2),r!==null&&Ln(r,t,2)}function Ac(t){var r=t.alternate;return t===Le||r!==null&&r===Le}function Xy(t,r){Ja=_c=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Zy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,j(t,a)}}var Rc={readContext:rn,use:Tc,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},Jy={readContext:rn,use:Tc,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:rn,useEffect:Py,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Sc(4194308,4,zy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Sc(4194308,4,t,r)},useInsertionEffect:function(t,r){Sc(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(aa){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var h=a(r);if(aa){Qt(!0);try{a(r)}finally{Qt(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=LS.bind(null,Le,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=pf(t);var r=t.queue,a=Wy.bind(null,Le,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(t,r){var a=Tn();return vf(a,t,r)},useTransition:function(){var t=pf(!1);return t=Gy.bind(null,Le,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Le,h=Tn();if(et){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ft===null)throw Error(s(349));(Ye&124)!==0||Ey(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Py(by.bind(null,l,f,t),[t]),l.flags|=2048,to(9,wc(),Ty.bind(null,l,f,a,r),null),a},useId:function(){var t=Tn(),r=ft.identifierPrefix;if(et){var a=lr,l=or;a=(l&~(1<<32-Bt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Ec++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=DS++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:Ef,useFormState:Dy,useActionState:Dy,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Tf.bind(null,Le,!0,a),a.dispatch=r,[t,r]},useMemoCache:df,useCacheRefresh:function(){return Tn().memoizedState=PS.bind(null,Le)}},ev={readContext:rn,use:Tc,useCallback:qy,useContext:rn,useEffect:Ly,useImperativeHandle:By,useInsertionEffect:Uy,useLayoutEffect:jy,useMemo:Hy,useReducer:bc,useRef:ky,useState:function(){return bc(hr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Dt();return Fy(a,lt.memoizedState,t,r)},useTransition:function(){var t=bc(hr)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:Ef,useFormState:Oy,useActionState:Oy,useOptimistic:function(t,r){var a=Dt();return Ay(a,lt,t,r)},useMemoCache:df,useCacheRefresh:Yy},US={readContext:rn,use:Tc,useCallback:qy,useContext:rn,useEffect:Ly,useImperativeHandle:By,useInsertionEffect:Uy,useLayoutEffect:jy,useMemo:Hy,useReducer:mf,useRef:ky,useState:function(){return mf(hr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Dt();return lt===null?vf(a,t,r):Fy(a,lt.memoizedState,t,r)},useTransition:function(){var t=mf(hr)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:Ef,useFormState:Vy,useActionState:Vy,useOptimistic:function(t,r){var a=Dt();return lt!==null?Ay(a,lt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:Yy},no=null,Rl=0;function Ic(t){var r=Rl;return Rl+=1,no===null&&(no=[]),hy(no,t,r)}function Il(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Cc(t,r){throw r.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function tv(t){var r=t._init;return r(t._payload)}function nv(t){function r(z,U){if(t){var q=z.deletions;q===null?(z.deletions=[U],z.flags|=16):q.push(U)}}function a(z,U){if(!t)return null;for(;U!==null;)r(z,U),U=U.sibling;return null}function l(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function h(z,U){return z=ar(z,U),z.index=0,z.sibling=null,z}function f(z,U,q){return z.index=q,t?(q=z.alternate,q!==null?(q=q.index,q<U?(z.flags|=67108866,U):q):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function _(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,U,q,Z){return U===null||U.tag!==6?(U=Bd(q,z.mode,Z),U.return=z,U):(U=h(U,q),U.return=z,U)}function D(z,U,q,Z){var _e=q.type;return _e===M?X(z,U,q.props.children,Z,q.key):U!==null&&(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&tv(_e)===U.type)?(U=h(U,q.props),Il(U,q),U.return=z,U):(U=cc(q.type,q.key,q.props,null,z.mode,Z),Il(U,q),U.return=z,U)}function F(z,U,q,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=qd(q,z.mode,Z),U.return=z,U):(U=h(U,q.children||[]),U.return=z,U)}function X(z,U,q,Z,_e){return U===null||U.tag!==7?(U=Zs(q,z.mode,Z,_e),U.return=z,U):(U=h(U,q),U.return=z,U)}function ee(z,U,q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Bd(""+U,z.mode,q),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return q=cc(U.type,U.key,U.props,null,z.mode,q),Il(q,U),q.return=z,q;case O:return U=qd(U,z.mode,q),U.return=z,U;case S:var Z=U._init;return U=Z(U._payload),ee(z,U,q)}if(Oe(U)||k(U))return U=Zs(U,z.mode,q,null),U.return=z,U;if(typeof U.then=="function")return ee(z,Ic(U),q);if(U.$$typeof===ne)return ee(z,mc(z,U),q);Cc(z,U)}return null}function G(z,U,q,Z){var _e=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _e!==null?null:b(z,U,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return q.key===_e?D(z,U,q,Z):null;case O:return q.key===_e?F(z,U,q,Z):null;case S:return _e=q._init,q=_e(q._payload),G(z,U,q,Z)}if(Oe(q)||k(q))return _e!==null?null:X(z,U,q,Z,null);if(typeof q.then=="function")return G(z,U,Ic(q),Z);if(q.$$typeof===ne)return G(z,U,mc(z,q),Z);Cc(z,q)}return null}function $(z,U,q,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(q)||null,b(U,z,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return z=z.get(Z.key===null?q:Z.key)||null,D(U,z,Z,_e);case O:return z=z.get(Z.key===null?q:Z.key)||null,F(U,z,Z,_e);case S:var je=Z._init;return Z=je(Z._payload),$(z,U,q,Z,_e)}if(Oe(Z)||k(Z))return z=z.get(q)||null,X(U,z,Z,_e,null);if(typeof Z.then=="function")return $(z,U,q,Ic(Z),_e);if(Z.$$typeof===ne)return $(z,U,q,mc(U,Z),_e);Cc(U,Z)}return null}function Ce(z,U,q,Z){for(var _e=null,je=null,Te=U,Ae=U=0,$t=null;Te!==null&&Ae<q.length;Ae++){Te.index>Ae?($t=Te,Te=null):$t=Te.sibling;var Ze=G(z,Te,q[Ae],Z);if(Ze===null){Te===null&&(Te=$t);break}t&&Te&&Ze.alternate===null&&r(z,Te),U=f(Ze,U,Ae),je===null?_e=Ze:je.sibling=Ze,je=Ze,Te=$t}if(Ae===q.length)return a(z,Te),et&&ea(z,Ae),_e;if(Te===null){for(;Ae<q.length;Ae++)Te=ee(z,q[Ae],Z),Te!==null&&(U=f(Te,U,Ae),je===null?_e=Te:je.sibling=Te,je=Te);return et&&ea(z,Ae),_e}for(Te=l(Te);Ae<q.length;Ae++)$t=$(Te,z,Ae,q[Ae],Z),$t!==null&&(t&&$t.alternate!==null&&Te.delete($t.key===null?Ae:$t.key),U=f($t,U,Ae),je===null?_e=$t:je.sibling=$t,je=$t);return t&&Te.forEach(function(us){return r(z,us)}),et&&ea(z,Ae),_e}function Se(z,U,q,Z){if(q==null)throw Error(s(151));for(var _e=null,je=null,Te=U,Ae=U=0,$t=null,Ze=q.next();Te!==null&&!Ze.done;Ae++,Ze=q.next()){Te.index>Ae?($t=Te,Te=null):$t=Te.sibling;var us=G(z,Te,Ze.value,Z);if(us===null){Te===null&&(Te=$t);break}t&&Te&&us.alternate===null&&r(z,Te),U=f(us,U,Ae),je===null?_e=us:je.sibling=us,je=us,Te=$t}if(Ze.done)return a(z,Te),et&&ea(z,Ae),_e;if(Te===null){for(;!Ze.done;Ae++,Ze=q.next())Ze=ee(z,Ze.value,Z),Ze!==null&&(U=f(Ze,U,Ae),je===null?_e=Ze:je.sibling=Ze,je=Ze);return et&&ea(z,Ae),_e}for(Te=l(Te);!Ze.done;Ae++,Ze=q.next())Ze=$(Te,z,Ae,Ze.value,Z),Ze!==null&&(t&&Ze.alternate!==null&&Te.delete(Ze.key===null?Ae:Ze.key),U=f(Ze,U,Ae),je===null?_e=Ze:je.sibling=Ze,je=Ze);return t&&Te.forEach(function(jA){return r(z,jA)}),et&&ea(z,Ae),_e}function ct(z,U,q,Z){if(typeof q=="object"&&q!==null&&q.type===M&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case I:e:{for(var _e=q.key;U!==null;){if(U.key===_e){if(_e=q.type,_e===M){if(U.tag===7){a(z,U.sibling),Z=h(U,q.props.children),Z.return=z,z=Z;break e}}else if(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&tv(_e)===U.type){a(z,U.sibling),Z=h(U,q.props),Il(Z,q),Z.return=z,z=Z;break e}a(z,U);break}else r(z,U);U=U.sibling}q.type===M?(Z=Zs(q.props.children,z.mode,Z,q.key),Z.return=z,z=Z):(Z=cc(q.type,q.key,q.props,null,z.mode,Z),Il(Z,q),Z.return=z,z=Z)}return _(z);case O:e:{for(_e=q.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){a(z,U.sibling),Z=h(U,q.children||[]),Z.return=z,z=Z;break e}else{a(z,U);break}else r(z,U);U=U.sibling}Z=qd(q,z.mode,Z),Z.return=z,z=Z}return _(z);case S:return _e=q._init,q=_e(q._payload),ct(z,U,q,Z)}if(Oe(q))return Ce(z,U,q,Z);if(k(q)){if(_e=k(q),typeof _e!="function")throw Error(s(150));return q=_e.call(q),Se(z,U,q,Z)}if(typeof q.then=="function")return ct(z,U,Ic(q),Z);if(q.$$typeof===ne)return ct(z,U,mc(z,q),Z);Cc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,U!==null&&U.tag===6?(a(z,U.sibling),Z=h(U,q),Z.return=z,z=Z):(a(z,U),Z=Bd(q,z.mode,Z),Z.return=z,z=Z),_(z)):a(z,U)}return function(z,U,q,Z){try{Rl=0;var _e=ct(z,U,q,Z);return no=null,_e}catch(Te){if(Te===yl||Te===gc)throw Te;var je=On(29,Te,null,z.mode);return je.lanes=Z,je.return=z,je}finally{}}}var io=nv(!0),iv=nv(!1),Wn=ie(null),Oi=null;function Qr(t){var r=t.alternate;se(Lt,Lt.current&1),se(Wn,t),Oi===null&&(r===null||Za.current!==null||r.memoizedState!==null)&&(Oi=t)}function rv(t){if(t.tag===22){if(se(Lt,Lt.current),se(Wn,t),Oi===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Oi=t)}}else Yr()}function Yr(){se(Lt,Lt.current),se(Wn,Wn.current)}function dr(t){ce(Wn),Oi===t&&(Oi=null),ce(Lt)}var Lt=ie(0);function xc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function bf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var wf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Pn(),h=Gr(l);h.payload=r,a!=null&&(h.callback=a),r=$r(t,h,l),r!==null&&(Ln(r,t,l),_l(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Pn(),h=Gr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=$r(t,h,l),r!==null&&(Ln(r,t,l),_l(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Pn(),l=Gr(a);l.tag=2,r!=null&&(l.callback=r),r=$r(t,l,a),r!==null&&(Ln(r,t,a),_l(r,t,a))}};function sv(t,r,a,l,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):r.prototype&&r.prototype.isPureReactComponent?!ul(a,l)||!ul(h,f):!0}function av(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&wf.enqueueReplaceState(r,r.state,null)}function oa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function ov(t){Nc(t)}function lv(t){console.error(t)}function uv(t){Nc(t)}function Dc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function cv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sf(t,r,a){return a=Gr(a),a.tag=3,a.payload={element:null},a.callback=function(){Dc(t,r)},a}function hv(t){return t=Gr(t),t.tag=3,t}function dv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){cv(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){cv(r,a,l),typeof h!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function jS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ml(r,a,h,!0),a=Wn.current,a!==null){switch(a.tag){case 13:return Oi===null?Qf():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Wf(t,l,h)),!1;case 22:return a.flags|=65536,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Wf(t,l,h)),!1}throw Error(s(435,a.tag))}return Wf(t,l,h),Qf(),!1}if(et)return r=Wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Gd&&(t=Error(s(422),{cause:l}),fl($n(t,a)))):(l!==Gd&&(r=Error(s(423),{cause:l}),fl($n(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=$n(l,a),h=Sf(t.stateNode,l,h),tf(t,h),wt!==4&&(wt=2)),!1;var f=Error(s(520),{cause:l});if(f=$n(f,a),Vl===null?Vl=[f]:Vl.push(f),wt!==4&&(wt=2),r===null)return!0;l=$n(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Sf(a.stateNode,l,t),tf(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ts===null||!ts.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hv(h),dv(h,t,a,l),tf(a,h),!1}a=a.return}while(a!==null);return!1}var fv=Error(s(461)),Ft=!1;function Xt(t,r,a,l){r.child=t===null?iv(r,null,a,l):io(r,t.child,a,l)}function mv(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return ra(r),l=of(t,r,a,_,f,h),b=lf(),t!==null&&!Ft?(uf(t,r,h),fr(t,r,h)):(et&&b&&Hd(r),r.flags|=1,Xt(t,r,l,h),r.child)}function pv(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!zd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,gv(t,r,f,l,h)):(t=cc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Of(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(_,l)&&t.ref===r.ref)return fr(t,r,h)}return r.flags|=1,t=ar(f,l),t.ref=r.ref,t.return=r,r.child=t}function gv(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(ul(f,l)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=l=f,Of(t,h))(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,fr(t,r,h)}return Af(t,r,a,l,h)}function yv(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return vv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,f!==null?f.cachePool:null),f!==null?gy(r,f):rf(),rv(r);else return r.lanes=r.childLanes=536870912,vv(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(pc(r,f.cachePool),gy(r,f),Yr(),r.memoizedState=null):(t!==null&&pc(r,null),rf(),Yr());return Xt(t,r,h,a),r.child}function vv(t,r,a,l){var h=Xd();return h=h===null?null:{parent:Pt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&pc(r,null),rf(),rv(r),t!==null&&ml(t,r,l,!0),null}function Oc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Af(t,r,a,l,h){return ra(r),a=of(t,r,a,l,void 0,h),l=lf(),t!==null&&!Ft?(uf(t,r,h),fr(t,r,h)):(et&&l&&Hd(r),r.flags|=1,Xt(t,r,a,h),r.child)}function _v(t,r,a,l,h,f){return ra(r),r.updateQueue=null,a=vy(r,l,a,h),yy(t),l=lf(),t!==null&&!Ft?(uf(t,r,f),fr(t,r,f)):(et&&l&&Hd(r),r.flags|=1,Xt(t,r,a,f),r.child)}function Ev(t,r,a,l,h){if(ra(r),r.stateNode===null){var f=Ka,_=a.contextType;typeof _=="object"&&_!==null&&(f=rn(_)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Jd(r),_=a.contextType,f.context=typeof _=="object"&&_!==null?rn(_):Ka,f.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(bf(r,a,_,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&wf.enqueueReplaceState(f,f.state,null),Tl(r,l,f,h),El(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var b=r.memoizedProps,D=oa(a,b);f.props=D;var F=f.context,X=a.contextType;_=Ka,typeof X=="object"&&X!==null&&(_=rn(X));var ee=a.getDerivedStateFromProps;X=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||F!==_)&&av(r,f,l,_),Fr=!1;var G=r.memoizedState;f.state=G,Tl(r,l,f,h),El(),F=r.memoizedState,b||G!==F||Fr?(typeof ee=="function"&&(bf(r,a,ee,l),F=r.memoizedState),(D=Fr||sv(r,a,D,l,G,F,_))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),f.props=l,f.state=F,f.context=_,l=D):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,ef(t,r),_=r.memoizedProps,X=oa(a,_),f.props=X,ee=r.pendingProps,G=f.context,F=a.contextType,D=Ka,typeof F=="object"&&F!==null&&(D=rn(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==ee||G!==D)&&av(r,f,l,D),Fr=!1,G=r.memoizedState,f.state=G,Tl(r,l,f,h),El();var $=r.memoizedState;_!==ee||G!==$||Fr||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof b=="function"&&(bf(r,a,b,l),$=r.memoizedState),(X=Fr||sv(r,a,X,l,G,$,D)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,$,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,$,D)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),f.props=l,f.state=$,f.context=D,l=X):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Oc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=io(r,t.child,null,h),r.child=io(r,null,a,h)):Xt(t,r,a,h),r.memoizedState=f.state,t=r.child):t=fr(t,r,h),t}function Tv(t,r,a,l){return dl(),r.flags|=256,Xt(t,r,a,l),r.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:ly()}}function Cf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Xn),t}function bv(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(et){if(h?Qr(r):Yr(),et){var b=bt,D;if(D=b){e:{for(D=b,b=Di;D.nodeType!==8;){if(!b){b=null;break e}if(D=li(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(r.memoizedState={dehydrated:b,treeContext:Js!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},D=On(18,null,null,0),D.stateNode=b,D.return=r,r.child=D,yn=r,bt=null,D=!0):D=!1}D||na(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return hm(b)?r.lanes=32:r.lanes=536870912,null;dr(r)}return b=l.children,l=l.fallback,h?(Yr(),h=r.mode,b=Mc({mode:"hidden",children:b},h),l=Zs(l,h,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,h=r.child,h.memoizedState=If(a),h.childLanes=Cf(t,_,a),r.memoizedState=Rf,l):(Qr(r),xf(r,b))}if(D=t.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(f)r.flags&256?(Qr(r),r.flags&=-257,r=Nf(t,r,a)):r.memoizedState!==null?(Yr(),r.child=t.child,r.flags|=128,r=null):(Yr(),h=l.fallback,b=r.mode,l=Mc({mode:"visible",children:l.children},b),h=Zs(h,b,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,io(r,t.child,null,a),l=r.child,l.memoizedState=If(a),l.childLanes=Cf(t,_,a),r.memoizedState=Rf,r=h);else if(Qr(r),hm(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,fl({value:l,source:null,stack:null}),r=Nf(t,r,a)}else if(Ft||ml(t,r,a,!1),_=(a&t.childLanes)!==0,Ft||_){if(_=ft,_!==null&&(l=a&-a,l=(l&42)!==0?1:re(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,$a(t,l),Ln(_,t,l),fv;b.data==="$?"||Qf(),r=Nf(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,bt=li(b.nextSibling),yn=r,et=!0,ta=null,Di=!1,t!==null&&(Qn[Yn++]=or,Qn[Yn++]=lr,Qn[Yn++]=Js,or=t.id,lr=t.overflow,Js=r),r=xf(r,l.children),r.flags|=4096);return r}return h?(Yr(),h=l.fallback,b=r.mode,D=t.child,F=D.sibling,l=ar(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?h=ar(F,h):(h=Zs(h,b,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,b=t.child.memoizedState,b===null?b=If(a):(D=b.cachePool,D!==null?(F=Pt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=ly(),b={baseLanes:b.baseLanes|a,cachePool:D}),h.memoizedState=b,h.childLanes=Cf(t,_,a),r.memoizedState=Rf,l):(Qr(r),a=t.child,t=a.sibling,a=ar(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function xf(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=On(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nf(t,r,a){return io(r,t.child,null,a),t=xf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function wv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Kd(t.return,r,a)}function Df(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function Sv(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(Xt(t,r,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wv(t,a,r);else if(t.tag===19)wv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(Lt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&xc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Df(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&xc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Df(r,!0,a,null,f);break;case"together":Df(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function fr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),es|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ml(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=ar(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=ar(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Of(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function zS(t,r,a){switch(r.tag){case 3:st(r,r.stateNode.containerInfo),Hr(r,Pt,t.memoizedState.cache),dl();break;case 27:case 5:ni(r);break;case 4:st(r,r.stateNode.containerInfo);break;case 10:Hr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Qr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?bv(t,r,a):(Qr(r),t=fr(t,r,a),t!==null?t.sibling:null);Qr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ml(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Sv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(Lt,Lt.current),l)break;return null;case 22:case 23:return r.lanes=0,yv(t,r,a);case 24:Hr(r,Pt,t.memoizedState.cache)}return fr(t,r,a)}function Av(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ft=!0;else{if(!Of(t,a)&&(r.flags&128)===0)return Ft=!1,zS(t,r,a);Ft=(t.flags&131072)!==0}else Ft=!1,et&&(r.flags&1048576)!==0&&ty(r,dc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")zd(l)?(t=oa(l,t),r.tag=1,r=Ev(null,r,l,t,a)):(r.tag=0,r=Af(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===me){r.tag=11,r=mv(null,r,l,t,a);break e}else if(h===P){r.tag=14,r=pv(null,r,l,t,a);break e}}throw r=Ne(l)||l,Error(s(306,r,""))}}return r;case 0:return Af(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=oa(l,r.pendingProps),Ev(t,r,l,h,a);case 3:e:{if(st(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,ef(t,r),Tl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Hr(r,Pt,l),l!==f.cache&&Qd(r,[Pt],a,!0),El(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Tv(t,r,l,a);break e}else if(l!==h){h=$n(Error(s(424)),r),fl(h),r=Tv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=li(t.firstChild),yn=r,et=!0,ta=null,Di=!0,a=iv(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(dl(),l===h){r=fr(t,r,a);break e}Xt(t,r,l,a)}r=r.child}return r;case 26:return Oc(t,r),t===null?(a=x_(r.type,null,r.pendingProps,null))?r.memoizedState=a:et||(a=r.type,t=r.pendingProps,l=Kc(we.current).createElement(a),l[Be]=r,l[at]=t,Jt(l,a,t),At(l),r.stateNode=l):r.memoizedState=x_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ni(r),t===null&&et&&(l=r.stateNode=R_(r.type,r.pendingProps,we.current),yn=r,Di=!0,h=bt,rs(r.type)?(dm=h,bt=li(l.firstChild)):bt=h),Xt(t,r,r.pendingProps.children,a),Oc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&et&&((h=l=bt)&&(l=mA(l,r.type,r.pendingProps,Di),l!==null?(r.stateNode=l,yn=r,bt=li(l.firstChild),Di=!1,h=!0):h=!1),h||na(r)),ni(r),h=r.type,f=r.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,lm(h,f)?l=null:_!==null&&lm(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=of(t,r,OS,null,null,a),Hl._currentValue=h),Oc(t,r),Xt(t,r,l,a),r.child;case 6:return t===null&&et&&((t=a=bt)&&(a=pA(a,r.pendingProps,Di),a!==null?(r.stateNode=a,yn=r,bt=null,t=!0):t=!1),t||na(r)),null;case 13:return bv(t,r,a);case 4:return st(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=io(r,null,l,a):Xt(t,r,l,a),r.child;case 11:return mv(t,r,r.type,r.pendingProps,a);case 7:return Xt(t,r,r.pendingProps,a),r.child;case 8:return Xt(t,r,r.pendingProps.children,a),r.child;case 12:return Xt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Hr(r,r.type,l.value),Xt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,ra(r),h=rn(h),l=l(h),r.flags|=1,Xt(t,r,l,a),r.child;case 14:return pv(t,r,r.type,r.pendingProps,a);case 15:return gv(t,r,r.type,r.pendingProps,a);case 19:return Sv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Mc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ar(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return yv(t,r,a);case 24:return ra(r),l=rn(Pt),t===null?(h=Xd(),h===null&&(h=ft,f=Yd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Jd(r),Hr(r,Pt,h)):((t.lanes&a)!==0&&(ef(t,r),Tl(r,null,null,a),El()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Hr(r,Pt,l)):(l=f.cache,Hr(r,Pt,l),l!==h.cache&&Qd(r,[Pt],a,!0))),Xt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function mr(t){t.flags|=4}function Rv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!V_(r)){if(r=Wn.current,r!==null&&((Ye&4194048)===Ye?Oi!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||r!==Oi))throw vl=Zd,uy;t.flags|=8192}}function Vc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?jr():536870912,t.lanes|=r,oo|=r)}function Cl(t,r){if(!et)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _t(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function BS(t,r,a){var l=r.pendingProps;switch(Fd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(r),null;case 1:return _t(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),cr(Pt),_n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hl(r)?mr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ry())),_t(r),null;case 26:return a=r.memoizedState,t===null?(mr(r),a!==null?(_t(r),Rv(r,a)):(_t(r),r.flags&=-16777217)):a?a!==t.memoizedState?(mr(r),_t(r),Rv(r,a)):(_t(r),r.flags&=-16777217):(t.memoizedProps!==l&&mr(r),_t(r),r.flags&=-16777217),null;case 27:xn(r),a=we.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&mr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return _t(r),null}t=ve.current,hl(r)?ny(r):(t=R_(h,l,a),r.stateNode=t,mr(r))}return _t(r),null;case 5:if(xn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&mr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return _t(r),null}if(t=ve.current,hl(r))ny(r);else{switch(h=Kc(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Be]=r,t[at]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Jt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&mr(r)}}return _t(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&mr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=we.current,hl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Be]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||__(t.nodeValue,a)),t||na(r)}else t=Kc(t).createTextNode(l),t[Be]=r,r.stateNode=t}return _t(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=hl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Be]=r}else dl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;_t(r),h=!1}else h=ry(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(dr(r),r):(dr(r),null)}if(dr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Vc(r,r.updateQueue),_t(r),null;case 4:return _n(),t===null&&im(r.stateNode.containerInfo),_t(r),null;case 10:return cr(r.type),_t(r),null;case 19:if(ce(Lt),h=r.memoizedState,h===null)return _t(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)Cl(h,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=xc(t),f!==null){for(r.flags|=128,Cl(h,!1),t=f.updateQueue,r.updateQueue=t,Vc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)ey(a,t),a=a.sibling;return se(Lt,Lt.current&1|2),r.child}t=t.sibling}h.tail!==null&&dn()>Lc&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304)}else{if(!l)if(t=xc(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Vc(r,t),Cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!et)return _t(r),null}else 2*dn()-h.renderingStartTime>Lc&&a!==536870912&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=dn(),r.sibling=null,t=Lt.current,se(Lt,l?t&1|2:t&1),r):(_t(r),null);case 22:case 23:return dr(r),sf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(_t(r),r.subtreeFlags&6&&(r.flags|=8192)):_t(r),a=r.updateQueue,a!==null&&Vc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ce(sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),cr(Pt),_t(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function qS(t,r){switch(Fd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return cr(Pt),_n(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return xn(r),null;case 13:if(dr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));dl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ce(Lt),null;case 4:return _n(),null;case 10:return cr(r.type),null;case 22:case 23:return dr(r),sf(),t!==null&&ce(sa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return cr(Pt),null;case 25:return null;default:return null}}function Iv(t,r){switch(Fd(r),r.tag){case 3:cr(Pt),_n();break;case 26:case 27:case 5:xn(r);break;case 4:_n();break;case 13:dr(r);break;case 19:ce(Lt);break;case 10:cr(r.type);break;case 22:case 23:dr(r),sf(),t!==null&&ce(sa);break;case 24:cr(Pt)}}function xl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){ht(r,r.return,b)}}function Wr(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=r;var D=a,F=b;try{F()}catch(X){ht(h,D,X)}}}l=l.next}while(l!==f)}}catch(X){ht(r,r.return,X)}}function Cv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{py(r,a)}catch(l){ht(t,t.return,l)}}}function xv(t,r,a){a.props=oa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ht(t,r,l)}}function Nl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ht(t,r,h)}}function Mi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ht(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ht(t,r,h)}else a.current=null}function Nv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ht(t,t.return,h)}}function Mf(t,r,a){try{var l=t.stateNode;uA(l,t.type,a,r),l[at]=r}catch(h){ht(t,t.return,h)}}function Dv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&rs(t.type)||t.tag===4}function Vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&rs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$c));else if(l!==4&&(l===27&&rs(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(kf(t,r,a),t=t.sibling;t!==null;)kf(t,r,a),t=t.sibling}function kc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&rs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(kc(t,r,a),t=t.sibling;t!==null;)kc(t,r,a),t=t.sibling}function Ov(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Jt(r,l,a),r[Be]=t,r[at]=a}catch(f){ht(t,t.return,f)}}var pr=!1,It=!1,Pf=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function HS(t,r){if(t=t.containerInfo,am=Jc,t=Fg(t),Md(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,b=-1,D=-1,F=0,X=0,ee=t,G=null;t:for(;;){for(var $;ee!==a||h!==0&&ee.nodeType!==3||(b=_+h),ee!==f||l!==0&&ee.nodeType!==3||(D=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),($=ee.firstChild)!==null;)G=ee,ee=$;for(;;){if(ee===t)break t;if(G===a&&++F===h&&(b=_),G===f&&++X===l&&(D=_),($=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=$}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:t,selectionRange:a},Jc=!1,Gt=r;Gt!==null;)if(r=Gt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Gt=t;else for(;Gt!==null;){switch(r=Gt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ce=oa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ce,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){ht(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)cm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Gt=t;break}Gt=r.return}}function Vv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Xr(t,a),l&4&&xl(5,a);break;case 1:if(Xr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){ht(a,a.return,_)}else{var h=oa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ht(a,a.return,_)}}l&64&&Cv(a),l&512&&Nl(a,a.return);break;case 3:if(Xr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{py(t,r)}catch(_){ht(a,a.return,_)}}break;case 27:r===null&&l&4&&Ov(a);case 26:case 5:Xr(t,a),r===null&&l&4&&Nv(a),l&512&&Nl(a,a.return);break;case 12:Xr(t,a);break;case 13:Xr(t,a),l&4&&Lv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=ZS.bind(null,a),gA(t,a))));break;case 22:if(l=a.memoizedState!==null||pr,!l){r=r!==null&&r.memoizedState!==null||It,h=pr;var f=It;pr=l,(It=r)&&!f?Zr(t,a,(a.subtreeFlags&8772)!==0):Xr(t,a),pr=h,It=f}break;case 30:break;default:Xr(t,a)}}function kv(t){var r=t.alternate;r!==null&&(t.alternate=null,kv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&pt(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,bn=!1;function gr(t,r,a){for(a=a.child;a!==null;)Pv(t,r,a),a=a.sibling}function Pv(t,r,a){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(gt,a)}catch{}switch(a.tag){case 26:It||Mi(a,r),gr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Mi(a,r);var l=yt,h=bn;rs(a.type)&&(yt=a.stateNode,bn=!1),gr(t,r,a),jl(a.stateNode),yt=l,bn=h;break;case 5:It||Mi(a,r);case 6:if(l=yt,h=bn,yt=null,gr(t,r,a),yt=l,bn=h,yt!==null)if(bn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(f){ht(a,r,f)}else try{yt.removeChild(a.stateNode)}catch(f){ht(a,r,f)}break;case 18:yt!==null&&(bn?(t=yt,S_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Kl(t)):S_(yt,a.stateNode));break;case 4:l=yt,h=bn,yt=a.stateNode.containerInfo,bn=!0,gr(t,r,a),yt=l,bn=h;break;case 0:case 11:case 14:case 15:It||Wr(2,a,r),It||Wr(4,a,r),gr(t,r,a);break;case 1:It||(Mi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&xv(a,r,l)),gr(t,r,a);break;case 21:gr(t,r,a);break;case 22:It=(l=It)||a.memoizedState!==null,gr(t,r,a),It=l;break;default:gr(t,r,a)}}function Lv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(a){ht(r,r.return,a)}}function FS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Mv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Mv),r;default:throw Error(s(435,t.tag))}}function Lf(t,r){var a=FS(t);r.forEach(function(l){var h=JS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Mn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,_=r,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(rs(b.type)){yt=b.stateNode,bn=!1;break e}break;case 5:yt=b.stateNode,bn=!1;break e;case 3:case 4:yt=b.stateNode.containerInfo,bn=!0;break e}b=b.return}if(yt===null)throw Error(s(160));Pv(f,_,h),yt=null,bn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Uv(r,t),r=r.sibling}var oi=null;function Uv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mn(r,t),Vn(t),l&4&&(Wr(3,t,t.return),xl(3,t),Wr(5,t,t.return));break;case 1:Mn(r,t),Vn(t),l&512&&(It||a===null||Mi(a,a.return)),l&64&&pr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=oi;if(Mn(r,t),Vn(t),l&512&&(It||a===null||Mi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[dt]||f[Be]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Jt(f,l,a),f[Be]=t,At(f),l=f;break e;case"link":var _=O_("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(f=_[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}f=h.createElement(l),Jt(f,l,a),h.head.appendChild(f);break;case"meta":if(_=O_("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(f=_[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}f=h.createElement(l),Jt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Be]=t,At(f),l=f}t.stateNode=l}else M_(h,t.type,t.stateNode);else t.stateNode=D_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?M_(h,t.type,t.stateNode):D_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Mf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Mn(r,t),Vn(t),l&512&&(It||a===null||Mi(a,a.return)),a!==null&&l&4&&Mf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Mn(r,t),Vn(t),l&512&&(It||a===null||Mi(a,a.return)),t.flags&32){h=t.stateNode;try{qn(h,"")}catch($){ht(t,t.return,$)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Mf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Pf=!0);break;case 6:if(Mn(r,t),Vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch($){ht(t,t.return,$)}}break;case 3:if(Wc=null,h=oi,oi=Qc(r.containerInfo),Mn(r,t),oi=h,Vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch($){ht(t,t.return,$)}Pf&&(Pf=!1,jv(t));break;case 4:l=oi,oi=Qc(t.stateNode.containerInfo),Mn(r,t),Vn(t),oi=l;break;case 12:Mn(r,t),Vn(t);break;case 13:Mn(r,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=dn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=pr,X=It;if(pr=F||h,It=X||D,Mn(r,t),It=X,pr=F,Vn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||D||pr||It||la(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(f=D.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=D.stateNode;var ee=D.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){ht(D,D.return,$)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch($){ht(D,D.return,$)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Lf(t,a))));break;case 19:Mn(r,t),Vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 30:break;case 21:break;default:Mn(r,t),Vn(t)}}function Vn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Dv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Vf(t);kc(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(qn(_,""),a.flags&=-33);var b=Vf(t);kc(t,b,_);break;case 3:case 4:var D=a.stateNode.containerInfo,F=Vf(t);kf(t,F,D);break;default:throw Error(s(161))}}catch(X){ht(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function jv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;jv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Xr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Vv(t,r.alternate,r),r=r.sibling}function la(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Wr(4,r,r.return),la(r);break;case 1:Mi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&xv(r,r.return,a),la(r);break;case 27:jl(r.stateNode);case 26:case 5:Mi(r,r.return),la(r);break;case 22:r.memoizedState===null&&la(r);break;case 30:la(r);break;default:la(r)}t=t.sibling}}function Zr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,_=f.flags;switch(f.tag){case 0:case 11:case 15:Zr(h,f,a),xl(4,f);break;case 1:if(Zr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){ht(l,l.return,F)}if(l=f,h=l.updateQueue,h!==null){var b=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)my(D[h],b)}catch(F){ht(l,l.return,F)}}a&&_&64&&Cv(f),Nl(f,f.return);break;case 27:Ov(f);case 26:case 5:Zr(h,f,a),a&&l===null&&_&4&&Nv(f),Nl(f,f.return);break;case 12:Zr(h,f,a);break;case 13:Zr(h,f,a),a&&_&4&&Lv(h,f);break;case 22:f.memoizedState===null&&Zr(h,f,a),Nl(f,f.return);break;case 30:break;default:Zr(h,f,a)}r=r.sibling}}function Uf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&pl(a))}function jf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t))}function Vi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zv(t,r,a,l),r=r.sibling}function zv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Vi(t,r,a,l),h&2048&&xl(9,r);break;case 1:Vi(t,r,a,l);break;case 3:Vi(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t)));break;case 12:if(h&2048){Vi(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,_=f.id,b=f.onPostCommit;typeof b=="function"&&b(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ht(r,r.return,D)}}else Vi(t,r,a,l);break;case 13:Vi(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,_=r.alternate,r.memoizedState!==null?f._visibility&2?Vi(t,r,a,l):Dl(t,r):f._visibility&2?Vi(t,r,a,l):(f._visibility|=2,ro(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&Uf(_,r);break;case 24:Vi(t,r,a,l),h&2048&&jf(r.alternate,r);break;default:Vi(t,r,a,l)}}function ro(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,_=r,b=a,D=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:ro(f,_,b,D,h),xl(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?ro(f,_,b,D,h):Dl(f,_):(X._visibility|=2,ro(f,_,b,D,h)),h&&F&2048&&Uf(_.alternate,_);break;case 24:ro(f,_,b,D,h),h&&F&2048&&jf(_.alternate,_);break;default:ro(f,_,b,D,h)}r=r.sibling}}function Dl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Dl(a,l),h&2048&&Uf(l.alternate,l);break;case 24:Dl(a,l),h&2048&&jf(l.alternate,l);break;default:Dl(a,l)}r=r.sibling}}var Ol=8192;function so(t){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)Bv(t),t=t.sibling}function Bv(t){switch(t.tag){case 26:so(t),t.flags&Ol&&t.memoizedState!==null&&xA(oi,t.memoizedState,t.memoizedProps);break;case 5:so(t);break;case 3:case 4:var r=oi;oi=Qc(t.stateNode.containerInfo),so(t),oi=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ol,Ol=16777216,so(t),Ol=r):so(t));break;default:so(t)}}function qv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ml(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Fv(l,t)}qv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hv(t),t=t.sibling}function Hv(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&Wr(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Pc(t)):Ml(t);break;default:Ml(t)}}function Pc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Fv(l,t)}qv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Wr(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}t=t.sibling}}function Fv(t,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Wr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var h=l.sibling,f=l.return;if(kv(l),l===a){Gt=null;break e}if(h!==null){h.return=f,Gt=h;break e}Gt=f}}}var GS={getCacheForType:function(t){var r=rn(Pt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},$S=typeof WeakMap=="function"?WeakMap:Map,it=0,ft=null,qe=null,Ye=0,rt=0,kn=null,Jr=!1,ao=!1,zf=!1,yr=0,wt=0,es=0,ua=0,Bf=0,Xn=0,oo=0,Vl=null,wn=null,qf=!1,Hf=0,Lc=1/0,Uc=null,ts=null,Zt=0,ns=null,lo=null,uo=0,Ff=0,Gf=null,Gv=null,kl=0,$f=null;function Pn(){if((it&2)!==0&&Ye!==0)return Ye&-Ye;if(W.T!==null){var t=Wa;return t!==0?t:Jf()}return de()}function $v(){Xn===0&&(Xn=(Ye&536870912)===0||et?Ur():536870912);var t=Wn.current;return t!==null&&(t.flags|=32),Xn}function Ln(t,r,a){(t===ft&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(co(t,0),is(t,Ye,Xn,!1)),zn(t,a),((it&2)===0||t!==ft)&&(t===ft&&((it&2)===0&&(ua|=a),wt===4&&is(t,Ye,Xn,!1)),ki(t))}function Kv(t,r,a){if((it&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Yi(t,r),h=l?YS(t,r):Yf(t,r,!0),f=l;do{if(h===0){ao&&!l&&is(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!KS(a)){h=Yf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var b=t;h=Vl;var D=b.current.memoizedState.isDehydrated;if(D&&(co(b,_).flags|=256),_=Yf(b,_,!1),_!==2){if(zf&&!D){b.errorRecoveryDisabledLanes|=f,ua|=f,h=4;break e}f=wn,wn=h,f!==null&&(wn===null?wn=f:wn.push.apply(wn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){co(t,0),is(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:is(l,r,Xn,!Jr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Hf+300-dn(),10<h)){if(is(l,r,Xn,!Jr),Qi(l,0,!0)!==0)break e;l.timeoutHandle=b_(Qv.bind(null,l,a,wn,Uc,qf,r,Xn,ua,oo,Jr,f,2,-0,0),h);break e}Qv(l,a,wn,Uc,qf,r,Xn,ua,oo,Jr,f,0,-0,0)}}break}while(!0);ki(t)}function Qv(t,r,a,l,h,f,_,b,D,F,X,ee,G,$){if(t.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:CA},Bv(r),ee=NA(),ee!==null)){t.cancelPendingCommit=ee(t_.bind(null,t,r,f,a,l,h,_,b,D,X,1,G,$)),is(t,f,_,!F);return}t_(t,r,f,a,l,h,_,b,D)}function KS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Dn(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function is(t,r,a,l){r&=~Bf,r&=~ua,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-Bt(h),_=1<<f;l[f]=-1,h&=~_}a!==0&&Bn(t,a,r)}function jc(){return(it&6)===0?(Pl(0),!1):!0}function Kf(){if(qe!==null){if(rt===0)var t=qe.return;else t=qe,ur=ia=null,cf(t),no=null,Rl=0,t=qe;for(;t!==null;)Iv(t.alternate,t),t=t.return;qe=null}}function co(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,hA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Kf(),ft=t,qe=a=ar(t.current,null),Ye=r,rt=0,kn=null,Jr=!1,ao=Yi(t,r),zf=!1,oo=Xn=Bf=ua=es=wt=0,wn=Vl=null,qf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Bt(l),f=1<<h;r|=t[h],l&=~f}return yr=r,oc(),a}function Yv(t,r){Le=null,W.H=Rc,r===yl||r===gc?(r=dy(),rt=3):r===uy?(r=dy(),rt=4):rt=r===fv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,kn=r,qe===null&&(wt=1,Dc(t,$n(r,t.current)))}function Wv(){var t=W.H;return W.H=Rc,t===null?Rc:t}function Xv(){var t=W.A;return W.A=GS,t}function Qf(){wt=4,Jr||(Ye&4194048)!==Ye&&Wn.current!==null||(ao=!0),(es&134217727)===0&&(ua&134217727)===0||ft===null||is(ft,Ye,Xn,!1)}function Yf(t,r,a){var l=it;it|=2;var h=Wv(),f=Xv();(ft!==t||Ye!==r)&&(Uc=null,co(t,r)),r=!1;var _=wt;e:do try{if(rt!==0&&qe!==null){var b=qe,D=kn;switch(rt){case 8:Kf(),_=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(r=!0);var F=rt;if(rt=0,kn=null,ho(t,b,D,F),a&&ao){_=0;break e}break;default:F=rt,rt=0,kn=null,ho(t,b,D,F)}}QS(),_=wt;break}catch(X){Yv(t,X)}while(!0);return r&&t.shellSuspendCounter++,ur=ia=null,it=l,W.H=h,W.A=f,qe===null&&(ft=null,Ye=0,oc()),_}function QS(){for(;qe!==null;)Zv(qe)}function YS(t,r){var a=it;it|=2;var l=Wv(),h=Xv();ft!==t||Ye!==r?(Uc=null,Lc=dn()+500,co(t,r)):ao=Yi(t,r);e:do try{if(rt!==0&&qe!==null){r=qe;var f=kn;t:switch(rt){case 1:rt=0,kn=null,ho(t,r,f,1);break;case 2:case 9:if(cy(f)){rt=0,kn=null,Jv(r);break}r=function(){rt!==2&&rt!==9||ft!==t||(rt=7),ki(t)},f.then(r,r);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:cy(f)?(rt=0,kn=null,Jv(r)):(rt=0,kn=null,ho(t,r,f,7));break;case 5:var _=null;switch(qe.tag){case 26:_=qe.memoizedState;case 5:case 27:var b=qe;if(!_||V_(_)){rt=0,kn=null;var D=b.sibling;if(D!==null)qe=D;else{var F=b.return;F!==null?(qe=F,zc(F)):qe=null}break t}}rt=0,kn=null,ho(t,r,f,5);break;case 6:rt=0,kn=null,ho(t,r,f,6);break;case 8:Kf(),wt=6;break e;default:throw Error(s(462))}}WS();break}catch(X){Yv(t,X)}while(!0);return ur=ia=null,W.H=l,W.A=h,it=a,qe!==null?0:(ft=null,Ye=0,oc(),wt)}function WS(){for(;qe!==null&&!Ds();)Zv(qe)}function Zv(t){var r=Av(t.alternate,t,yr);t.memoizedProps=t.pendingProps,r===null?zc(t):qe=r}function Jv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=_v(a,r,r.pendingProps,r.type,void 0,Ye);break;case 11:r=_v(a,r,r.pendingProps,r.type.render,r.ref,Ye);break;case 5:cf(r);default:Iv(a,r),r=qe=ey(r,yr),r=Av(a,r,yr)}t.memoizedProps=t.pendingProps,r===null?zc(t):qe=r}function ho(t,r,a,l){ur=ia=null,cf(r),no=null,Rl=0;var h=r.return;try{if(jS(t,h,r,a,Ye)){wt=1,Dc(t,$n(a,t.current)),qe=null;return}}catch(f){if(h!==null)throw qe=h,f;wt=1,Dc(t,$n(a,t.current)),qe=null;return}r.flags&32768?(et||l===1?t=!0:ao||(Ye&536870912)!==0?t=!1:(Jr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),e_(r,t)):zc(r)}function zc(t){var r=t;do{if((r.flags&32768)!==0){e_(r,Jr);return}t=r.return;var a=BS(r.alternate,r,yr);if(a!==null){qe=a;return}if(r=r.sibling,r!==null){qe=r;return}qe=r=t}while(r!==null);wt===0&&(wt=5)}function e_(t,r){do{var a=qS(t.alternate,t);if(a!==null){a.flags&=32767,qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){qe=t;return}qe=t=a}while(t!==null);wt=6,qe=null}function t_(t,r,a,l,h,f,_,b,D){t.cancelPendingCommit=null;do Bc();while(Zt!==0);if((it&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Ud,ks(t,a,f,_,b,D),t===ft&&(qe=ft=null,Ye=0),lo=r,ns=t,uo=a,Ff=f,Gf=h,Gv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,eA($i,function(){return a_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,h=oe.p,oe.p=2,_=it,it|=4;try{HS(t,r,a)}finally{it=_,oe.p=h,W.T=l}}Zt=1,n_(),i_(),r_()}}function n_(){if(Zt===1){Zt=0;var t=ns,r=lo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var h=it;it|=4;try{Uv(r,t);var f=om,_=Fg(t.containerInfo),b=f.focusedElem,D=f.selectionRange;if(_!==b&&b&&b.ownerDocument&&Hg(b.ownerDocument.documentElement,b)){if(D!==null&&Md(b)){var F=D.start,X=D.end;if(X===void 0&&(X=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(X,b.value.length);else{var ee=b.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var $=G.getSelection(),Ce=b.textContent.length,Se=Math.min(D.start,Ce),ct=D.end===void 0?Se:Math.min(D.end,Ce);!$.extend&&Se>ct&&(_=ct,ct=Se,Se=_);var z=qg(b,Se),U=qg(b,ct);if(z&&U&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==U.node||$.focusOffset!==U.offset)){var q=ee.createRange();q.setStart(z.node,z.offset),$.removeAllRanges(),Se>ct?($.addRange(q),$.extend(U.node,U.offset)):(q.setEnd(U.node,U.offset),$.addRange(q))}}}}for(ee=[],$=b;$=$.parentNode;)$.nodeType===1&&ee.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ee.length;b++){var Z=ee[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Jc=!!am,om=am=null}finally{it=h,oe.p=l,W.T=a}}t.current=r,Zt=2}}function i_(){if(Zt===2){Zt=0;var t=ns,r=lo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var h=it;it|=4;try{Vv(t,r.alternate,r)}finally{it=h,oe.p=l,W.T=a}}Zt=3}}function r_(){if(Zt===4||Zt===3){Zt=0,Os();var t=ns,r=lo,a=uo,l=Gv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,lo=ns=null,s_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ts=null),le(a),r=r.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(gt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=W.T,h=oe.p,oe.p=2,W.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];f(b.value,{componentStack:b.stack})}}finally{W.T=r,oe.p=h}}(uo&3)!==0&&Bc(),ki(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===$f?kl++:(kl=0,$f=t):kl=0,Pl(0)}}function s_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,pl(r)))}function Bc(t){return n_(),i_(),r_(),a_()}function a_(){if(Zt!==5)return!1;var t=ns,r=Ff;Ff=0;var a=le(uo),l=W.T,h=oe.p;try{oe.p=32>a?32:a,W.T=null,a=Gf,Gf=null;var f=ns,_=uo;if(Zt=0,lo=ns=null,uo=0,(it&6)!==0)throw Error(s(331));var b=it;if(it|=4,Hv(f.current),zv(f,f.current,_,a),it=b,Pl(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(gt,f)}catch{}return!0}finally{oe.p=h,W.T=l,s_(t,r)}}function o_(t,r,a){r=$n(a,r),r=Sf(t.stateNode,r,2),t=$r(t,r,2),t!==null&&(zn(t,2),ki(t))}function ht(t,r,a){if(t.tag===3)o_(t,t,a);else for(;r!==null;){if(r.tag===3){o_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ts===null||!ts.has(l))){t=$n(a,t),a=hv(2),l=$r(r,a,2),l!==null&&(dv(a,l,r,t),zn(l,2),ki(l));break}}r=r.return}}function Wf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new $S;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(zf=!0,h.add(a),t=XS.bind(null,t,r,a),r.then(t,t))}function XS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ft===t&&(Ye&a)===a&&(wt===4||wt===3&&(Ye&62914560)===Ye&&300>dn()-Hf?(it&2)===0&&co(t,0):Bf|=a,oo===Ye&&(oo=0)),ki(t)}function l_(t,r){r===0&&(r=jr()),t=$a(t,r),t!==null&&(zn(t,r),ki(t))}function ZS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),l_(t,a)}function JS(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),l_(t,a)}function eA(t,r){return yi(t,r)}var qc=null,fo=null,Xf=!1,Hc=!1,Zf=!1,ca=0;function ki(t){t!==fo&&t.next===null&&(fo===null?qc=fo=t:fo=fo.next=t),Hc=!0,Xf||(Xf=!0,nA())}function Pl(t,r){if(!Zf&&Hc){Zf=!0;do for(var a=!1,l=qc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,b=l.pingedLanes;f=(1<<31-Bt(42|t)+1)-1,f&=h&~(_&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,d_(l,f))}else f=Ye,f=Qi(l,l===ft?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Yi(l,f)||(a=!0,d_(l,f));l=l.next}while(a);Zf=!1}}function tA(){u_()}function u_(){Hc=Xf=!1;var t=0;ca!==0&&(cA()&&(t=ca),ca=0);for(var r=dn(),a=null,l=qc;l!==null;){var h=l.next,f=c_(l,r);f===0?(l.next=null,a===null?qc=h:a.next=h,h===null&&(fo=a)):(a=l,(t!==0||(f&3)!==0)&&(Hc=!0)),l=h}Pl(t)}function c_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Bt(f),b=1<<_,D=h[_];D===-1?((b&a)===0||(b&l)!==0)&&(h[_]=Vs(b,r)):D<=r&&(t.expiredLanes|=b),f&=~b}if(r=ft,a=Ye,a=Qi(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Gi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yi(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Gi(l),le(a)){case 2:case 8:a=Pr;break;case 32:a=$i;break;case 268435456:a=Lr;break;default:a=$i}return l=h_.bind(null,t),a=yi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Gi(l),t.callbackPriority=2,t.callbackNode=null,2}function h_(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Bc()&&t.callbackNode!==a)return null;var l=Ye;return l=Qi(t,t===ft?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Kv(t,l,r),c_(t,dn()),t.callbackNode!=null&&t.callbackNode===a?h_.bind(null,t):null)}function d_(t,r){if(Bc())return null;Kv(t,r,!0)}function nA(){dA(function(){(it&6)!==0?yi(kr,tA):u_()})}function Jf(){return ca===0&&(ca=Ur()),ca}function f_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Va(""+t)}function m_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function iA(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=f_((h[at]||null).action),_=l.submitter;_&&(r=(r=_[at]||null)?f_(r.formAction):_.getAttribute("formAction"),r!==null&&(f=r,_=null));var b=new ka("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ca!==0){var D=_?m_(h,_):new FormData(h);_f(a,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(b.preventDefault(),D=_?m_(h,_):new FormData(h),_f(a,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var em=0;em<Ld.length;em++){var tm=Ld[em],rA=tm.toLowerCase(),sA=tm[0].toUpperCase()+tm.slice(1);ai(rA,"on"+sA)}ai(Kg,"onAnimationEnd"),ai(Qg,"onAnimationIteration"),ai(Yg,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(bS,"onTransitionRun"),ai(wS,"onTransitionStart"),ai(SS,"onTransitionCancel"),ai(Wg,"onTransitionEnd"),Xi("onMouseEnter",["mouseout","mouseover"]),Xi("onMouseLeave",["mouseout","mouseover"]),Xi("onPointerEnter",["pointerout","pointerover"]),Xi("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function p_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var _=l.length-1;0<=_;_--){var b=l[_],D=b.instance,F=b.currentTarget;if(b=b.listener,D!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=F;try{f(h)}catch(X){Nc(X)}h.currentTarget=null,f=D}else for(_=0;_<l.length;_++){if(b=l[_],D=b.instance,F=b.currentTarget,b=b.listener,D!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=F;try{f(h)}catch(X){Nc(X)}h.currentTarget=null,f=D}}}}function He(t,r){var a=r[$e];a===void 0&&(a=r[$e]=new Set);var l=t+"__bubble";a.has(l)||(g_(r,t,2,!1),a.add(l))}function nm(t,r,a){var l=0;r&&(l|=4),g_(a,t,l,r)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function im(t){if(!t[Fc]){t[Fc]=!0,Yo.forEach(function(a){a!=="selectionchange"&&(aA.has(a)||nm(a,!1,t),nm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Fc]||(r[Fc]=!0,nm("selectionchange",!1,r))}}function g_(t,r,a,l){switch(z_(r)){case 2:var h=MA;break;case 8:h=VA;break;default:h=ym}a=h.bind(null,r,a,t),h=void 0,!Fn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function rm(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=Wi(b),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=f=_;continue e}b=b.parentNode}}l=l.return}$u(function(){var F=f,X=Hn(a),ee=[];e:{var G=Xg.get(t);if(G!==void 0){var $=ka,Ce=t;switch(t){case"keypress":if(Ri(a)===0)break e;case"keydown":case"keyup":$=Ba;break;case"focusin":Ce="focus",$=Ua;break;case"focusout":Ce="blur",$=Ua;break;case"beforeblur":case"afterblur":$=Ua;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ec;break;case Kg:case Qg:case Yg:$=ja;break;case Wg:$=nc;break;case"scroll":case"scrollend":$=Ku;break;case"wheel":$=qa;break;case"copy":case"cut":case"paste":$=za;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ol;break;case"toggle":case"beforetoggle":$=rc}var Se=(r&4)!==0,ct=!Se&&(t==="scroll"||t==="scrollend"),z=Se?G!==null?G+"Capture":null:G;Se=[];for(var U=F,q;U!==null;){var Z=U;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||z===null||(Z=Hs(U,z),Z!=null&&Se.push(Ul(U,Z,q))),ct)break;U=U.return}0<Se.length&&(G=new $(G,Ce,null,a,X),ee.push({event:G,listeners:Se}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",G&&a!==er&&(Ce=a.relatedTarget||a.fromElement)&&(Wi(Ce)||Ce[Xe]))break e;if(($||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,$?(Ce=a.relatedTarget||a.toElement,$=F,Ce=Ce?Wi(Ce):null,Ce!==null&&(ct=u(Ce),Se=Ce.tag,Ce!==ct||Se!==5&&Se!==27&&Se!==6)&&(Ce=null)):($=null,Ce=F),$!==Ce)){if(Se=Gn,Z="onMouseLeave",z="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Se=ol,Z="onPointerLeave",z="onPointerEnter",U="pointer"),ct=$==null?G:bi($),q=Ce==null?G:bi(Ce),G=new Se(Z,U+"leave",$,a,X),G.target=ct,G.relatedTarget=q,Z=null,Wi(X)===F&&(Se=new Se(z,U+"enter",Ce,a,X),Se.target=q,Se.relatedTarget=ct,Z=Se),ct=Z,$&&Ce)t:{for(Se=$,z=Ce,U=0,q=Se;q;q=mo(q))U++;for(q=0,Z=z;Z;Z=mo(Z))q++;for(;0<U-q;)Se=mo(Se),U--;for(;0<q-U;)z=mo(z),q--;for(;U--;){if(Se===z||z!==null&&Se===z.alternate)break t;Se=mo(Se),z=mo(z)}Se=null}else Se=null;$!==null&&y_(ee,G,$,Se,!1),Ce!==null&&ct!==null&&y_(ee,ct,Ce,Se,!0)}}e:{if(G=F?bi(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var _e=Pg;else if(kt(G))if(Lg)_e=_S;else{_e=yS;var je=gS}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&el(F.elementType)&&(_e=Pg):_e=vS;if(_e&&(_e=_e(t,F))){sr(ee,_e,a,X);break e}je&&je(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Br(G,"number",G.value)}switch(je=F?bi(F):window,t){case"focusin":(kt(je)||je.contentEditable==="true")&&(Ha=je,Vd=F,cl=null);break;case"focusout":cl=Vd=Ha=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Gg(ee,a,X);break;case"selectionchange":if(TS)break;case"keydown":case"keyup":Gg(ee,a,X)}var Te;if(xi)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ke?K(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(v&&a.locale!=="ko"&&(Ke||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ke&&(Te=nl()):(Ai=X,qr="value"in Ai?Ai.value:Ai.textContent,Ke=!0)),je=Gc(F,Ae),0<je.length&&(Ae=new sl(Ae,t,null,a,X),ee.push({event:Ae,listeners:je}),Te?Ae.data=Te:(Te=ue(a),Te!==null&&(Ae.data=Te)))),(Te=y?Vt(t,a):Qe(t,a))&&(Ae=Gc(F,"onBeforeInput"),0<Ae.length&&(je=new sl("onBeforeInput","beforeinput",null,a,X),ee.push({event:je,listeners:Ae}),je.data=Te)),iA(ee,t,F,a,X)}p_(ee,r)})}function Ul(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Gc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Hs(t,a),h!=null&&l.unshift(Ul(t,h,f)),h=Hs(t,r),h!=null&&l.push(Ul(t,h,f))),t.tag===3)return l;t=t.return}return[]}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function y_(t,r,a,l,h){for(var f=r._reactName,_=[];a!==null&&a!==l;){var b=a,D=b.alternate,F=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||F===null||(D=F,h?(F=Hs(a,f),F!=null&&_.unshift(Ul(a,F,D))):h||(F=Hs(a,f),F!=null&&_.push(Ul(a,F,D)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var oA=/\r\n?/g,lA=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(oA,`
`).replace(lA,"")}function __(t,r){return r=v_(r),v_(t)===r}function $c(){}function ut(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||qn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&qn(t,""+l);break;case"className":wi(t,"class",l);break;case"tabIndex":wi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":wi(t,a,l);break;case"style":Jo(t,l,f);break;case"data":if(r!=="object"){wi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Va(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&ut(t,r,"name",h.name,h,null),ut(t,r,"formEncType",h.formEncType,h,null),ut(t,r,"formMethod",h.formMethod,h,null),ut(t,r,"formTarget",h.formTarget,h,null)):(ut(t,r,"encType",h.encType,h,null),ut(t,r,"method",h.method,h,null),ut(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Va(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=$c);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Va(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":He("beforetoggle",t),He("toggle",t),zr(t,"popover",l);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":zr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Id.get(a)||a,zr(t,a,l))}}function sm(t,r,a,l,h,f){switch(a){case"style":Jo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?qn(t,l):(typeof l=="number"||typeof l=="bigint")&&qn(t,""+l);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"onClick":l!=null&&(t.onclick=$c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[at]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):zr(t,a,l)}}}function Jt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",t),He("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(t,r,f,_,a,null)}}h&&ut(t,r,"srcSet",a.srcSet,a,null),l&&ut(t,r,"src",a.src,a,null);return;case"input":He("invalid",t);var b=f=_=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":_=X;break;case"checked":D=X;break;case"defaultChecked":F=X;break;case"value":f=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:ut(t,r,l,X,a,null)}}zs(t,f,b,D,F,_,h,!1),Ma(t);return;case"select":He("invalid",t),l=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":f=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:ut(t,r,h,b,a,null)}r=f,a=_,t.multiple=!!l,r!=null?Ji(t,!!l,r,!1):a!=null&&Ji(t,!!l,a,!0);return;case"textarea":He("invalid",t),f=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:ut(t,r,_,b,a,null)}Bs(t,l,h,f),Ma(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ut(t,r,D,l,a,null)}return;case"dialog":He("beforetoggle",t),He("toggle",t),He("cancel",t),He("close",t);break;case"iframe":case"object":He("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)He(Ll[l],t);break;case"image":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"embed":case"source":case"link":He("error",t),He("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(t,r,F,l,a,null)}return;default:if(el(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&sm(t,r,X,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ut(t,r,b,l,a,null))}function uA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,b=null,D=null,F=null,X=null;for($ in a){var ee=a[$];if(a.hasOwnProperty($)&&ee!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty($)||ut(t,r,$,null,l,ee)}}for(var G in l){var $=l[G];if(ee=a[G],l.hasOwnProperty(G)&&($!=null||ee!=null))switch(G){case"type":f=$;break;case"name":h=$;break;case"checked":F=$;break;case"defaultChecked":X=$;break;case"value":_=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==ee&&ut(t,r,G,$,l,ee)}}Nn(t,_,b,D,F,X,f,h);return;case"select":$=_=b=G=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(f)||ut(t,r,f,null,l,D)}for(h in l)if(f=l[h],D=a[h],l.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":G=f;break;case"defaultValue":b=f;break;case"multiple":_=f;default:f!==D&&ut(t,r,h,f,l,D)}r=b,a=_,l=$,G!=null?Ji(t,!!a,G,!1):!!l!=!!a&&(r!=null?Ji(t,!!a,r,!0):Ji(t,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ut(t,r,b,null,l,h)}for(_ in l)if(h=l[_],f=a[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":G=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&ut(t,r,_,h,l,f)}ot(t,G,$);return;case"option":for(var Ce in a)if(G=a[Ce],a.hasOwnProperty(Ce)&&G!=null&&!l.hasOwnProperty(Ce))switch(Ce){case"selected":t.selected=!1;break;default:ut(t,r,Ce,null,l,G)}for(D in l)if(G=l[D],$=a[D],l.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ut(t,r,D,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se)&&ut(t,r,Se,null,l,G);for(F in l)if(G=l[F],$=a[F],l.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:ut(t,r,F,G,l,$)}return;default:if(el(r)){for(var ct in a)G=a[ct],a.hasOwnProperty(ct)&&G!==void 0&&!l.hasOwnProperty(ct)&&sm(t,r,ct,void 0,l,G);for(X in l)G=l[X],$=a[X],!l.hasOwnProperty(X)||G===$||G===void 0&&$===void 0||sm(t,r,X,G,l,$);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&ut(t,r,z,null,l,G);for(ee in l)G=l[ee],$=a[ee],!l.hasOwnProperty(ee)||G===$||G==null&&$==null||ut(t,r,ee,G,l,$)}var am=null,om=null;function Kc(t){return t.nodeType===9?t:t.ownerDocument}function E_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function lm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var um=null;function cA(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var b_=typeof setTimeout=="function"?setTimeout:void 0,hA=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,dA=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(fA)}:b_;function fA(t){setTimeout(function(){throw t})}function rs(t){return t==="head"}function S_(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&jl(_.documentElement),a&2&&jl(_.body),a&4)for(a=_.head,jl(a),_=a.firstChild;_;){var b=_.nextSibling,D=_.nodeName;_[dt]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=b}}if(h===0){t.removeChild(f),Kl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Kl(r)}function cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),pt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function mA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[dt])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function pA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=li(t.nextSibling),t===null))return null;return t}function hm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function gA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function li(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var dm=null;function A_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function R_(t,r,a){switch(r=Kc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function jl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);pt(t)}var Zn=new Map,I_=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vr=oe.d;oe.d={f:yA,r:vA,D:_A,C:EA,L:TA,m:bA,X:SA,S:wA,M:AA};function yA(){var t=vr.f(),r=jc();return t||r}function vA(t){var r=Ti(t);r!==null&&r.tag===5&&r.type==="form"?Ky(r):vr.r(t)}var po=typeof document>"u"?null:document;function C_(t,r,a){var l=po;if(l&&typeof r=="string"&&r){var h=xt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),I_.has(h)||(I_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Jt(r,"link",t),At(r),l.head.appendChild(r)))}}function _A(t){vr.D(t),C_("dns-prefetch",t,null)}function EA(t,r){vr.C(t,r),C_("preconnect",t,r)}function TA(t,r,a){vr.L(t,r,a);var l=po;if(l&&t&&r){var h='link[rel="preload"][as="'+xt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+xt(a.imageSizes)+'"]')):h+='[href="'+xt(t)+'"]';var f=h;switch(r){case"style":f=go(t);break;case"script":f=yo(t)}Zn.has(f)||(t=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Zn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(zl(f))||r==="script"&&l.querySelector(Bl(f))||(r=l.createElement("link"),Jt(r,"link",t),At(r),l.head.appendChild(r)))}}function bA(t,r){vr.m(t,r);var a=po;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=yo(t)}if(!Zn.has(f)&&(t=E({rel:"modulepreload",href:t},r),Zn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(f)))return}l=a.createElement("link"),Jt(l,"link",t),At(l),a.head.appendChild(l)}}}function wA(t,r,a){vr.S(t,r,a);var l=po;if(l&&t){var h=mn(l).hoistableStyles,f=go(t);r=r||"default";var _=h.get(f);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(zl(f)))b.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Zn.get(f))&&fm(t,a);var D=_=l.createElement("link");At(D),Jt(D,"link",t),D._p=new Promise(function(F,X){D.onload=F,D.onerror=X}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Yc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(f,_)}}}function SA(t,r){vr.X(t,r);var a=po;if(a&&t){var l=mn(a).hoistableScripts,h=yo(t),f=l.get(h);f||(f=a.querySelector(Bl(h)),f||(t=E({src:t,async:!0},r),(r=Zn.get(h))&&mm(t,r),f=a.createElement("script"),At(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function AA(t,r){vr.M(t,r);var a=po;if(a&&t){var l=mn(a).hoistableScripts,h=yo(t),f=l.get(h);f||(f=a.querySelector(Bl(h)),f||(t=E({src:t,async:!0,type:"module"},r),(r=Zn.get(h))&&mm(t,r),f=a.createElement("script"),At(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function x_(t,r,a,l){var h=(h=we.current)?Qc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=go(a.href),a=mn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=go(a.href);var f=mn(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(zl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),Zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(t,a),f||RA(h,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yo(a),a=mn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function go(t){return'href="'+xt(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function N_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function RA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Jt(r,"link",a),At(r),t.head.appendChild(r))}function yo(t){return'[src="'+xt(t)+'"]'}function Bl(t){return"script[async]"+t}function D_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+xt(a.href)+'"]');if(l)return r.instance=l,At(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),At(l),Jt(l,"style",h),Yc(l,a.precedence,t),r.instance=l;case"stylesheet":h=go(a.href);var f=t.querySelector(zl(h));if(f)return r.state.loading|=4,r.instance=f,At(f),f;l=N_(a),(h=Zn.get(h))&&fm(l,h),f=(t.ownerDocument||t).createElement("link"),At(f);var _=f;return _._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Jt(f,"link",l),r.state.loading|=4,Yc(f,a.precedence,t),r.instance=f;case"script":return f=yo(a.src),(h=t.querySelector(Bl(f)))?(r.instance=h,At(h),h):(l=a,(h=Zn.get(f))&&(l=E({},a),mm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),At(h),Jt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Yc(l,a.precedence,t));return r.instance}function Yc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===r)f=b;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function fm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function mm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Wc=null;function O_(t,r,a){if(Wc===null){var l=new Map,h=Wc=new Map;h.set(a,l)}else h=Wc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[dt]||f[Be]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(r)||"";_=t+_;var b=l.get(_);b?b.push(f):l.set(_,[f])}}return l}function M_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function IA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function V_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ql=null;function CA(){}function xA(t,r,a){if(ql===null)throw Error(s(475));var l=ql;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=go(a.href),f=t.querySelector(zl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Xc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,At(f);return}f=t.ownerDocument||t,a=N_(a),(h=Zn.get(h))&&fm(a,h),f=f.createElement("link"),At(f);var _=f;_._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Jt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Xc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function NA(){if(ql===null)throw Error(s(475));var t=ql;return t.stylesheets&&t.count===0&&pm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&pm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Xc(){if(this.count--,this.count===0){if(this.stylesheets)pm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zc=null;function pm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zc=new Map,r.forEach(DA,t),Zc=null,Xc.call(t))}function DA(t,r){if(!(r.state.loading&4)){var a=Zc.get(t);if(a)var l=a.get(null);else{a=new Map,Zc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=r.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,h),a.set(_,h),this.count++,l=Xc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Hl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function OA(t,r,a,l,h,f,_,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ei(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.hiddenUpdates=Ei(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function k_(t,r,a,l,h,f,_,b,D,F,X,ee){return t=new OA(t,r,a,_,b,D,F,ee),r=1,f===!0&&(r|=24),f=On(3,null,null,r),t.current=f,f.stateNode=t,r=Yd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Jd(f),t}function P_(t){return t?(t=Ka,t):Ka}function L_(t,r,a,l,h,f){h=P_(h),l.context===null?l.context=h:l.pendingContext=h,l=Gr(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=$r(t,l,r),a!==null&&(Ln(a,t,r),_l(a,t,r))}function U_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function gm(t,r){U_(t,r),(t=t.alternate)&&U_(t,r)}function j_(t){if(t.tag===13){var r=$a(t,67108864);r!==null&&Ln(r,t,67108864),gm(t,67108864)}}var Jc=!0;function MA(t,r,a,l){var h=W.T;W.T=null;var f=oe.p;try{oe.p=2,ym(t,r,a,l)}finally{oe.p=f,W.T=h}}function VA(t,r,a,l){var h=W.T;W.T=null;var f=oe.p;try{oe.p=8,ym(t,r,a,l)}finally{oe.p=f,W.T=h}}function ym(t,r,a,l){if(Jc){var h=vm(l);if(h===null)rm(t,r,l,eh,a),B_(t,l);else if(PA(h,t,r,a,l))l.stopPropagation();else if(B_(t,l),r&4&&-1<kA.indexOf(t)){for(;h!==null;){var f=Ti(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=En(f.pendingLanes);if(_!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var D=1<<31-Bt(_);b.entanglements[1]|=D,_&=~D}ki(f),(it&6)===0&&(Lc=dn()+500,Pl(0))}}break;case 13:b=$a(f,2),b!==null&&Ln(b,f,2),jc(),gm(f,2)}if(f=vm(l),f===null&&rm(t,r,l,eh,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else rm(t,r,l,null,a)}}function vm(t){return t=Hn(t),_m(t)}var eh=null;function _m(t){if(eh=null,t=Wi(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return eh=t,null}function z_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($o()){case kr:return 2;case Pr:return 8;case $i:case Ko:return 32;case Lr:return 268435456;default:return 32}default:return 32}}var Em=!1,ss=null,as=null,os=null,Fl=new Map,Gl=new Map,ls=[],kA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B_(t,r){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function $l(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=Ti(r),r!==null&&j_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function PA(t,r,a,l,h){switch(r){case"focusin":return ss=$l(ss,t,r,a,l,h),!0;case"dragenter":return as=$l(as,t,r,a,l,h),!0;case"mouseover":return os=$l(os,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Fl.set(f,$l(Fl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Gl.set(f,$l(Gl.get(f)||null,t,r,a,l,h)),!0}return!1}function q_(t){var r=Wi(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,fe(t.priority,function(){if(a.tag===13){var l=Pn();l=re(l);var h=$a(a,l);h!==null&&Ln(h,a,l),gm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=vm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);er=l,a.target.dispatchEvent(l),er=null}else return r=Ti(a),r!==null&&j_(r),t.blockedOn=a,!1;r.shift()}return!0}function H_(t,r,a){th(t)&&a.delete(r)}function LA(){Em=!1,ss!==null&&th(ss)&&(ss=null),as!==null&&th(as)&&(as=null),os!==null&&th(os)&&(os=null),Fl.forEach(H_),Gl.forEach(H_)}function nh(t,r){t.blockedOn===r&&(t.blockedOn=null,Em||(Em=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,LA)))}var ih=null;function F_(t){ih!==t&&(ih=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var f=Ti(a);f!==null&&(t.splice(r,3),r-=3,_f(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Kl(t){function r(D){return nh(D,t)}ss!==null&&nh(ss,t),as!==null&&nh(as,t),os!==null&&nh(os,t),Fl.forEach(r),Gl.forEach(r);for(var a=0;a<ls.length;a++){var l=ls[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ls.length&&(a=ls[0],a.blockedOn===null);)q_(a),a.blockedOn===null&&ls.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],_=h[at]||null;if(typeof f=="function")_||F_(a);else if(_){var b=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[at]||null)b=_.formAction;else if(_m(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),F_(a)}}}function Tm(t){this._internalRoot=t}rh.prototype.render=Tm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Pn();L_(a,l,t,r,null,null)},rh.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;L_(t.current,2,null,t,null,null),jc(),r[Xe]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var r=de();t={blockedOn:null,target:t,priority:r};for(var a=0;a<ls.length&&r!==0&&r<ls[a].priority;a++);ls.splice(a,0,t),a===0&&q_(t)}};var G_=e.version;if(G_!=="19.1.0")throw Error(s(527,G_,"19.1.0"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var UA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{gt=sh.inject(UA),Je=sh}catch{}}return Yl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=ov,f=lv,_=uv,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=k_(t,1,!1,null,null,a,l,h,f,_,b,null),t[Xe]=r.current,im(t),new Tm(r)},Yl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=ov,_=lv,b=uv,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=k_(t,1,!0,r,a??null,l,h,f,_,b,D,F),r.context=P_(null),a=r.current,l=Pn(),l=re(l),h=Gr(l),h.callback=null,$r(a,h,l),a=l,r.current.lanes=a,zn(r,a),ki(r),t[Xe]=r.current,im(t),new rh(r)},Yl.version="19.1.0",Yl}var t0;function KA(){if(t0)return Sm.exports;t0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=$A(),Sm.exports}var QA=KA();const YA="/showswatched2/assets/react-CHdo91hT.svg",WA=()=>{};var n0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},XA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},nT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,m=d?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,E=u>>2,w=(u&3)<<4|m>>4;let I=(m&15)<<2|g>>6,O=g&63;p||(O=64,d||(I=64)),s.push(n[E],n[w],n[I],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(tT(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):XA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const w=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||w==null)throw new ZA;const I=u<<2|m>>4;if(s.push(I),g!==64){const O=m<<4&240|g>>2;if(s.push(O),w!==64){const M=g<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class ZA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JA=function(i){const e=tT(i);return nT.encodeByteArray(e,!0)},Rh=function(i){return JA(i).replace(/\./g,"")},iT=function(i){try{return nT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=()=>e1().__FIREBASE_DEFAULTS__,n1=()=>{if(typeof process>"u"||typeof n0>"u")return;const i=n0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},i1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&iT(i[1]);return e&&JSON.parse(e)},Wh=()=>{try{return WA()||t1()||n1()||i1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},rT=i=>{var e,n;return(n=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},r1=i=>{const e=rT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},sT=()=>{var i;return(i=Wh())===null||i===void 0?void 0:i.config},aT=i=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Rh(JSON.stringify(n)),Rh(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function o1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function l1(){var i;const e=(i=Wh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function c1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h1(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function d1(){return!l1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lT(){try{return typeof indexedDB=="object"}catch{return!1}}function uT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function f1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="FirebaseError";class mi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=m1,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ta.prototype.create)}}class Ta{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?p1(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new mi(o,m,s)}}function p1(i,e){return i.replace(g1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const g1=/\{\$([^}]+)}/g;function y1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function bs(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(i0(u)&&i0(d)){if(!bs(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function i0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Jl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function eu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function v1(i,e){const n=new _1(i,e);return n.subscribe.bind(n)}class _1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");E1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Cm),o.error===void 0&&(o.error=Cm),o.complete===void 0&&(o.complete=Cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function E1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=1e3,b1=2,w1=4*60*60*1e3,S1=.5;function r0(i,e=T1,n=b1){const s=e*Math.pow(n,i),o=Math.round(S1*s*(Math.random()-.5)*2);return Math.min(w1,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(i){return i&&i._delegate?i._delegate:i}class ci{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new s1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(I1(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:R1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R1(i){return i===ha?void 0:i}function I1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new A1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Fe||(Fe={}));const x1={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},N1=Fe.INFO,D1={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},O1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=D1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xh{constructor(e){this.name=e,this._logLevel=N1,this._logHandler=O1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?x1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const M1=(i,e)=>e.some(n=>i instanceof n);let s0,a0;function V1(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k1(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,Km=new WeakMap,hT=new WeakMap,xm=new WeakMap,Ap=new WeakMap;function P1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(vs(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&cT.set(n,i)}).catch(()=>{}),Ap.set(e,i),e}function L1(i){if(Km.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Km.set(i,e)}let Qm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Km.get(i);if(e==="objectStoreNames")return i.objectStoreNames||hT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function U1(i){Qm=i(Qm)}function j1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Nm(this),e,...n);return hT.set(s,e.sort?e.sort():[e]),vs(s)}:k1().includes(i)?function(...e){return i.apply(Nm(this),e),vs(cT.get(this))}:function(...e){return vs(i.apply(Nm(this),e))}}function z1(i){return typeof i=="function"?j1(i):(i instanceof IDBTransaction&&L1(i),M1(i,V1())?new Proxy(i,Qm):i)}function vs(i){if(i instanceof IDBRequest)return P1(i);if(xm.has(i))return xm.get(i);const e=z1(i);return e!==i&&(xm.set(i,e),Ap.set(e,i)),e}const Nm=i=>Ap.get(i);function dT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),m=vs(d);return s&&d.addEventListener("upgradeneeded",p=>{s(vs(d.result),p.oldVersion,p.newVersion,vs(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const B1=["get","getKey","getAll","getAllKeys","count"],q1=["put","add","delete","clear"],Dm=new Map;function o0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=q1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||B1.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Dm.set(e,u),u}U1(i=>({...i,get:(e,n,s)=>o0(e,n)||i.get(e,n,s),has:(e,n)=>!!o0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(F1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function F1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ym="@firebase/app",l0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new Xh("@firebase/app"),G1="@firebase/app-compat",$1="@firebase/analytics-compat",K1="@firebase/analytics",Q1="@firebase/app-check-compat",Y1="@firebase/app-check",W1="@firebase/auth",X1="@firebase/auth-compat",Z1="@firebase/database",J1="@firebase/data-connect",e2="@firebase/database-compat",t2="@firebase/functions",n2="@firebase/functions-compat",i2="@firebase/installations",r2="@firebase/installations-compat",s2="@firebase/messaging",a2="@firebase/messaging-compat",o2="@firebase/performance",l2="@firebase/performance-compat",u2="@firebase/remote-config",c2="@firebase/remote-config-compat",h2="@firebase/storage",d2="@firebase/storage-compat",f2="@firebase/firestore",m2="@firebase/vertexai",p2="@firebase/firestore-compat",g2="firebase",y2="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="[DEFAULT]",v2={[Ym]:"fire-core",[G1]:"fire-core-compat",[K1]:"fire-analytics",[$1]:"fire-analytics-compat",[Y1]:"fire-app-check",[Q1]:"fire-app-check-compat",[W1]:"fire-auth",[X1]:"fire-auth-compat",[Z1]:"fire-rtdb",[J1]:"fire-data-connect",[e2]:"fire-rtdb-compat",[t2]:"fire-fn",[n2]:"fire-fn-compat",[i2]:"fire-iid",[r2]:"fire-iid-compat",[s2]:"fire-fcm",[a2]:"fire-fcm-compat",[o2]:"fire-perf",[l2]:"fire-perf-compat",[u2]:"fire-rc",[c2]:"fire-rc-compat",[h2]:"fire-gcs",[d2]:"fire-gcs-compat",[f2]:"fire-fst",[p2]:"fire-fst-compat",[m2]:"fire-vertex","fire-js":"fire-js",[g2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,_2=new Map,Xm=new Map;function u0(i,e){try{i.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Bi(i){const e=i.name;if(Xm.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,i);for(const n of Ih.values())u0(n,i);for(const n of _2.values())u0(n,i);return!0}function ba(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Jn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Ta("app","Firebase",E2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=y2;function fT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw _s.create("bad-app-name",{appName:String(o)});if(n||(n=sT()),!n)throw _s.create("no-options");const u=Ih.get(o);if(u){if(bs(n,u.options)&&bs(s,u.config))return u;throw _s.create("duplicate-app",{appName:o})}const d=new C1(o);for(const p of Xm.values())d.addComponent(p);const m=new T2(n,s,d);return Ih.set(o,m),m}function Rp(i=Wm){const e=Ih.get(i);if(!e&&i===Wm&&sT())return fT();if(!e)throw _s.create("no-app",{appName:i});return e}function ei(i,e,n){var s;let o=(s=v2[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(m.join(" "));return}Bi(new ci(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="firebase-heartbeat-database",w2=1,mu="firebase-heartbeat-store";let Om=null;function mT(){return Om||(Om=dT(b2,w2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(i=>{throw _s.create("idb-open",{originalErrorMessage:i.message})})),Om}async function S2(i){try{const n=(await mT()).transaction(mu),s=await n.objectStore(mu).get(pT(i));return await n.done,s}catch(e){if(e instanceof mi)Ar.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(n.message)}}}async function c0(i,e){try{const s=(await mT()).transaction(mu,"readwrite");await s.objectStore(mu).put(e,pT(i)),await s.done}catch(n){if(n instanceof mi)Ar.warn(n.message);else{const s=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ar.warn(s.message)}}}function pT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1024,R2=30;class I2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=h0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>R2){const d=N2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ar.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h0(),{heartbeatsToSend:s,unsentEntries:o}=C2(this._heartbeatsCache.heartbeats),u=Rh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Ar.warn(n),""}}}function h0(){return new Date().toISOString().substring(0,10)}function C2(i,e=A2){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),d0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),d0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class x2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lT()?uT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function d0(i){return Rh(JSON.stringify({version:2,heartbeats:i})).length}function N2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(i){Bi(new ci("platform-logger",e=>new H1(e),"PRIVATE")),Bi(new ci("heartbeat",e=>new I2(e),"PRIVATE")),ei(Ym,l0,i),ei(Ym,l0,"esm2017"),ei("fire-js","")}D2("");var O2="firebase",M2="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei(O2,M2,"app");var f0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,gT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function R(){}R.prototype=S.prototype,P.D=S.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(N,x,k){for(var C=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)C[Ne-2]=arguments[Ne];return S.prototype[x].apply(N,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,S,R){R||(R=0);var N=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)N[x]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(x=0;16>x;++x)N[x]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=P.g[0],R=P.g[1],x=P.g[2];var k=P.g[3],C=S+(k^R&(x^k))+N[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[1]+3905402710&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[2]+606105819&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[3]+3250441966&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+N[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[5]+1200080426&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[6]+2821735955&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[7]+4249261313&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+N[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[9]+2336552879&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[10]+4294925233&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[11]+2304563134&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+N[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[13]+4254626195&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[14]+2792965006&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[15]+1236535329&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(x^k&(R^x))+N[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[6]+3225465664&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[11]+643717713&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[0]+3921069994&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+N[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[10]+38016083&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[15]+3634488961&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[4]+3889429448&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+N[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[14]+3275163606&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[3]+4107603335&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[8]+1163531501&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+N[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[2]+4243563512&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[7]+1735328473&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[12]+2368359562&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(R^x^k)+N[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[8]+2272392833&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[11]+1839030562&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[14]+4259657740&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+N[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[4]+1272893353&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[7]+4139469664&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[10]+3200236656&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+N[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[0]+3936430074&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[3]+3572445317&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[6]+76029189&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+N[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[12]+3873151461&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[15]+530742520&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[2]+3299628645&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(x^(R|~k))+N[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[7]+1126891415&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[14]+2878612391&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[5]+4237533241&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+N[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[3]+2399980690&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[10]+4293915773&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[1]+2240044497&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+N[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[15]+4264355552&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[6]+2734768916&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[13]+1309151649&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+N[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[11]+3174756917&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[2]+718787259&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+k&4294967295}s.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var R=S-this.blockSize,N=this.B,x=this.h,k=0;k<S;){if(x==0)for(;k<=R;)o(this,P,k),k+=this.blockSize;if(typeof P=="string"){for(;k<S;)if(N[x++]=P.charCodeAt(k++),x==this.blockSize){o(this,N),x=0;break}}else for(;k<S;)if(N[x++]=P[k++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=S},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var R=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=R&255,R/=256;for(this.u(P),P=Array(16),S=R=0;4>S;++S)for(var N=0;32>N;N+=8)P[R++]=this.g[S]>>>N&255;return P};function u(P,S){var R=m;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=S(P)}function d(P,S){this.h=S;for(var R=[],N=!0,x=P.length-1;0<=x;x--){var k=P[x]|0;N&&k==S||(R[x]=k,N=!1)}this.g=R}var m={};function p(P){return-128<=P&&128>P?u(P,function(S){return new d([S|0],0>S?-1:0)}):new d([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return w;if(0>P)return H(g(-P));for(var S=[],R=1,N=0;P>=R;N++)S[N]=P/R|0,R*=4294967296;return new d(S,0)}function E(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return H(E(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(S,8)),N=w,x=0;x<P.length;x+=8){var k=Math.min(8,P.length-x),C=parseInt(P.substring(x,x+k),S);8>k?(k=g(Math.pow(S,k)),N=N.j(k).add(g(C))):(N=N.j(R),N=N.add(g(C)))}return N}var w=p(0),I=p(1),O=p(16777216);i=d.prototype,i.m=function(){if(Q(this))return-H(this).m();for(var P=0,S=1,R=0;R<this.g.length;R++){var N=this.i(R);P+=(0<=N?N:4294967296+N)*S,S*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(Q(this))return"-"+H(this).toString(P);for(var S=g(Math.pow(P,6)),R=this,N="";;){var x=me(R,S).g;R=Y(R,x.j(S));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=x,M(R))return k+N;for(;6>k.length;)k="0"+k;N=k+N}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function Q(P){return P.h==-1}i.l=function(P){return P=Y(this,P),Q(P)?-1:M(P)?0:1};function H(P){for(var S=P.g.length,R=[],N=0;N<S;N++)R[N]=~P.g[N];return new d(R,~P.h).add(I)}i.abs=function(){return Q(this)?H(this):this},i.add=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0,x=0;x<=S;x++){var k=N+(this.i(x)&65535)+(P.i(x)&65535),C=(k>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);N=C>>>16,k&=65535,C&=65535,R[x]=C<<16|k}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Y(P,S){return P.add(H(S))}i.j=function(P){if(M(this)||M(P))return w;if(Q(this))return Q(P)?H(this).j(H(P)):H(H(this).j(P));if(Q(P))return H(this.j(H(P)));if(0>this.l(O)&&0>P.l(O))return g(this.m()*P.m());for(var S=this.g.length+P.g.length,R=[],N=0;N<2*S;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<P.g.length;x++){var k=this.i(N)>>>16,C=this.i(N)&65535,Ne=P.i(x)>>>16,Oe=P.i(x)&65535;R[2*N+2*x]+=C*Oe,ae(R,2*N+2*x),R[2*N+2*x+1]+=k*Oe,ae(R,2*N+2*x+1),R[2*N+2*x+1]+=C*Ne,ae(R,2*N+2*x+1),R[2*N+2*x+2]+=k*Ne,ae(R,2*N+2*x+2)}for(N=0;N<S;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=S;N<2*S;N++)R[N]=0;return new d(R,0)};function ae(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function ne(P,S){this.g=P,this.h=S}function me(P,S){if(M(S))throw Error("division by zero");if(M(P))return new ne(w,w);if(Q(P))return S=me(H(P),S),new ne(H(S.g),H(S.h));if(Q(S))return S=me(P,H(S)),new ne(H(S.g),S.h);if(30<P.g.length){if(Q(P)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,N=S;0>=N.l(P);)R=ye(R),N=ye(N);var x=Re(R,1),k=Re(N,1);for(N=Re(N,2),R=Re(R,2);!M(N);){var C=k.add(N);0>=C.l(P)&&(x=x.add(R),k=C),N=Re(N,1),R=Re(R,1)}return S=Y(P,x.j(S)),new ne(x,S)}for(x=w;0<=P.l(S);){for(R=Math.max(1,Math.floor(P.m()/S.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),k=g(R),C=k.j(S);Q(C)||0<C.l(P);)R-=N,k=g(R),C=k.j(S);M(k)&&(k=I),x=x.add(k),P=Y(P,C)}return new ne(x,P)}i.A=function(P){return me(this,P).h},i.and=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)&P.i(N);return new d(R,this.h&P.h)},i.or=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)|P.i(N);return new d(R,this.h|P.h)},i.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)^P.i(N);return new d(R,this.h^P.h)};function ye(P){for(var S=P.g.length+1,R=[],N=0;N<S;N++)R[N]=P.i(N)<<1|P.i(N-1)>>>31;return new d(R,P.h)}function Re(P,S){var R=S>>5;S%=32;for(var N=P.g.length-R,x=[],k=0;k<N;k++)x[k]=0<S?P.i(k+R)>>>S|P.i(k+R+1)<<32-S:P.i(k+R);return new d(x,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,gT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=E,Es=d}).apply(typeof f0<"u"?f0:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yT,tu,vT,mh,Zm,_T,ET,TT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in v))break e;v=v[B]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,A=!1,B={next:function(){if(!A&&v<c.length){var K=v++;return{value:y(K,c[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,v){return c.call.apply(c.bind,arguments)}function w(c,y,v){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,A),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function I(c,y,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,I.apply(null,arguments)}function O(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(A,B,K){for(var ue=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ue[Ke-2]=arguments[Ke];return y.prototype[B].apply(A,ue)}}function Q(c){const y=c.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function H(c,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(p(A)){const B=c.length||0,K=A.length||0;c.length=B+K;for(let ue=0;ue<K;ue++)c[B+ue]=A[ue]}else c.push(A)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ae(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function me(c){return me[" "](c),c}me[" "]=function(){};var ye=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Re(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function P(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function S(c){const y={};for(const v in c)y[v]=c[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,y){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)c[v]=A[v];for(let K=0;K<R.length;K++)v=R[K],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function x(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function k(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Pe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ne{constructor(){this.h=this.g=null}add(y,v){const A=Oe.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Oe=new Y(()=>new W,c=>c.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Ee=!1,Pe=new Ne,L=()=>{const c=m.Promise.resolve(void 0);oe=()=>{c.then(ie)}};var ie=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){k(v)}var y=Oe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}Ee=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function ke(c,y){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ye){e:{try{me(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ke.aa.h.call(this)}}M(ke,se);var we={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),st=0;function _n(c,y,v,A,B){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=B,this.key=++st,this.da=this.fa=!1}function ni(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xn(c){this.src=c,this.g={},this.h=0}xn.prototype.add=function(c,y,v,A,B){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ue=yi(c,y,A,B);return-1<ue?(y=c[ue],v||(y.fa=!1)):(y=new _n(y,this.src,K,!!A,B),y.fa=v,c.push(y)),y};function gi(c,y){var v=y.type;if(v in c.g){var A=c.g[v],B=Array.prototype.indexOf.call(A,y,void 0),K;(K=0<=B)&&Array.prototype.splice.call(A,B,1),K&&(ni(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function yi(c,y,v,A){for(var B=0;B<c.length;++B){var K=c[B];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==A)return B}return-1}var Gi="closure_lm_"+(1e6*Math.random()|0),Ds={};function Os(c,y,v,A,B){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Os(c,y[K],v,A,B);return null}return v=Ia(v),c&&c[Tt]?c.K(y,v,g(A)?!!A.capture:!1,B):dn(c,y,v,!1,A,B)}function dn(c,y,v,A,B,K){if(!y)throw Error("Invalid event type");var ue=g(B)?!!B.capture:!!B,Ke=Lr(c);if(Ke||(c[Gi]=Ke=new xn(c)),v=Ke.add(y,v,A,ue,K),v.proxy)return v;if(A=$o(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)ve||(B=ue),B===void 0&&(B=!1),c.addEventListener(y.toString(),A,B);else if(c.attachEvent)c.attachEvent($i(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function $o(){function c(v){return y.call(c.src,c.listener,v)}const y=Ko;return c}function kr(c,y,v,A,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)kr(c,y[K],v,A,B);else A=g(A)?!!A.capture:!!A,v=Ia(v),c&&c[Tt]?(c=c.i,y=String(y).toString(),y in c.g&&(K=c.g[y],v=yi(K,v,A,B),-1<v&&(ni(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete c.g[y],c.h--)))):c&&(c=Lr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=yi(y,v,A,B)),(v=-1<c?y[c]:null)&&Pr(v))}function Pr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Tt])gi(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent($i(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Lr(y))?(gi(v,c),v.h==0&&(v.src=null,y[Gi]=null)):ni(c)}}}function $i(c){return c in Ds?Ds[c]:Ds[c]="on"+c}function Ko(c,y){if(c.da)c=!0;else{y=new ke(y,this);var v=c.listener,A=c.ha||c.src;c.fa&&Pr(c),c=v.call(A,y)}return c}function Lr(c){return c=c[Gi],c instanceof xn?c:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ia(c){return typeof c=="function"?c:(c[Ms]||(c[Ms]=function(y){return c.handleEvent(y)}),c[Ms])}function gt(){ce.call(this),this.i=new xn(this),this.M=this,this.F=null}M(gt,ce),gt.prototype[Tt]=!0,gt.prototype.removeEventListener=function(c,y,v,A){kr(this,c,y,v,A)};function Je(c,y){var v,A=c.F;if(A)for(v=[];A;A=A.F)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new se(y,c);else if(y instanceof se)y.target=y.target||c;else{var B=y;y=new se(A,c),N(y,B)}if(B=!0,v)for(var K=v.length-1;0<=K;K--){var ue=y.g=v[K];B=Qt(ue,A,!0,y)&&B}if(ue=y.g=c,B=Qt(ue,A,!0,y)&&B,B=Qt(ue,A,!1,y)&&B,v)for(K=0;K<v.length;K++)ue=y.g=v[K],B=Qt(ue,A,!1,y)&&B}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],A=0;A<v.length;A++)ni(v[A]);delete c.g[y],c.h--}}this.F=null},gt.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},gt.prototype.L=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function Qt(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,K=0;K<y.length;++K){var ue=y[K];if(ue&&!ue.da&&ue.capture==v){var Ke=ue.listener,Vt=ue.ha||ue.src;ue.fa&&gi(c.i,ue),B=Ke.call(Vt,A)!==!1&&B}}return B&&!A.defaultPrevented}function Bt(c,y,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Ca(c){c.g=Bt(()=>{c.g=null,c.i&&(c.i=!1,Ca(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Qo extends ce{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ca(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(c){ce.call(this),this.h=c,this.g={}}M(vi,ce);var Ki=[];function _i(c){Re(c.g,function(y,v){this.g.hasOwnProperty(v)&&Pr(y)},c),c.g={}}vi.prototype.N=function(){vi.aa.N.call(this),_i(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=m.JSON.stringify,Qi=m.JSON.parse,Yi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Vs(){}Vs.prototype.h=null;function Ur(c){return c.h||(c.h=c.i())}function jr(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zn(){se.call(this,"d")}M(zn,se);function ks(){se.call(this,"c")}M(ks,se);var Bn={},j=null;function re(){return j=j||new gt}Bn.La="serverreachability";function le(c){se.call(this,Bn.La,c)}M(le,se);function de(c){const y=re();Je(y,new le(y))}Bn.STAT_EVENT="statevent";function fe(c,y){se.call(this,Bn.STAT_EVENT,c),this.stat=y}M(fe,se);function he(c){const y=re();Je(y,new fe(y,c))}Bn.Ma="timingevent";function Be(c,y){se.call(this,Bn.Ma,c),this.size=y}M(Be,se);function at(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Xe(){this.g=!0}Xe.prototype.xa=function(){this.g=!1};function $e(c,y,v,A,B,K){c.info(function(){if(c.g)if(K)for(var ue="",Ke=K.split("&"),Vt=0;Vt<Ke.length;Vt++){var Qe=Ke[Vt].split("=");if(1<Qe.length){var Ht=Qe[0];Qe=Qe[1];var kt=Ht.split("_");ue=2<=kt.length&&kt[1]=="type"?ue+(Ht+"="+Qe+"&"):ue+(Ht+"=redacted&")}}else ue=null;else ue=K;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+v+`
`+ue})}function ii(c,y,v,A,B,K,ue){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+v+`
`+K+" "+ue})}function fn(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+dt(c,v)+(A?" "+A:"")})}function Ps(c,y){c.info(function(){return"TIMEOUT: "+y})}Xe.prototype.info=function(){};function dt(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var A=v[c];if(!(2>A.length)){var B=A[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ue=1;ue<B.length;ue++)B[ue]=""}}}}return En(v)}catch{return y}}var pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ti;function bi(){}M(bi,Vs),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},Ti=new bi;function mn(c,y,v,A){this.j=c,this.i=y,this.l=v,this.R=A||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Yo={},xa={};function ri(c,y,v){c.L=1,c.v=Bs(Nn(y)),c.m=v,c.P=!0,Xi(c,null)}function Xi(c,y){c.F=Date.now(),Ls(c),c.A=Nn(c.v);var v=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),tl(v.i,"t",A),c.C=0,v=c.j.J,c.h=new At,c.g=nc(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Qo(I(c.Y,c,c.g),c.O)),y=c.U,v=c.g,A=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ki[0]=B.toString()),B=Ki);for(var K=0;K<B.length;K++){var ue=Os(v,B[K],A||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),de(),$e(c.i,c.u,c.A,c.l,c.R,c.m)}mn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Gn(c)==3?y.j():this.Y(c)},mn.prototype.Y=function(c){try{if(c==this.g)e:{const kt=Gn(this.g);var y=this.g.Ba();const sr=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Qu(this.g)))){this.J||kt!=4||y==7||(y==8||0>=sr?de(3):de(2)),zr(this);var v=this.g.Z();this.X=v;t:if(Bu(this)){var A=Qu(this.g);c="";var B=A.length,K=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),wi(this);var ue="";break t}this.h.i=new m.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(K&&y==B-1)});A.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,ii(this.i,this.u,this.A,this.l,this.R,kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Vt=this.g;if((Ke=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Ke)){var Qe=Ke;break t}}Qe=null}if(v=Qe)fn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Us(this,v);else{this.o=!1,this.s=3,he(12),Yt(this),wi(this);break e}}if(this.P){v=!0;let Wt;for(;!this.J&&this.C<ue.length;)if(Wt=qu(this,ue),Wt==xa){kt==4&&(this.s=4,he(14),v=!1),fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Yo){this.s=4,he(15),fn(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else fn(this.i,this.l,Wt,null),Us(this,Wt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ue.length!=0||this.h.h||(this.s=1,he(16),v=!1),this.o=this.o&&v,!v)fn(this.i,this.l,ue,"[Invalid Chunked Response]"),Yt(this),wi(this);else if(0<ue.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Ys(Ht),Ht.M=!0,he(11))}}else fn(this.i,this.l,ue,null),Us(this,ue);kt==4&&Yt(this),this.o&&!this.J&&(kt==4?Ju(this.j,this):(this.o=!1,Ls(this)))}else xd(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),Yt(this),wi(this)}}}catch{}finally{}};function Bu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qu(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?xa:(v=Number(y.substring(v,A)),isNaN(v)?Yo:(A+=1,A+v>y.length?xa:(y=y.slice(A,A+v),c.C=A+v,y)))}mn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ls(c){c.S=Date.now()+c.I,Hu(c,c.I)}function Hu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=at(I(c.ba,c),y)}function zr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ps(this.i,this.A),this.L!=2&&(de(),he(17)),Yt(this),this.s=2,wi(this)):Hu(this,this.S-c)};function wi(c){c.j.G==0||c.J||Ju(c.j,c)}function Yt(c){zr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,_i(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Us(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Wo(v.h,c))){if(!c.K&&Wo(v.h,c)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ba(v),ja(v);else break e;al(v),he(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=at(I(v.Za,v),6e3));if(1>=Da(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else rr(v,11)}else if((c.K||v.g==c)&&Ba(v),!ae(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Qe=B[y];if(v.T=Qe[0],Qe=Qe[1],v.G==2)if(Qe[0]=="c"){v.K=Qe[1],v.ia=Qe[2];const Ht=Qe[3];Ht!=null&&(v.la=Ht,v.j.info("VER="+v.la));const kt=Qe[4];kt!=null&&(v.Aa=kt,v.j.info("SVER="+v.Aa));const sr=Qe[5];sr!=null&&typeof sr=="number"&&0<sr&&(A=1.5*sr,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Wt=c.g;if(Wt){const Ni=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ni){var K=A.h;K.g||Ni.indexOf("spdy")==-1&&Ni.indexOf("quic")==-1&&Ni.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Oa(K,K.h),K.h=null))}if(A.D){const ll=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(A.ya=ll,ot(A.I,A.D,ll))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ue=c;if(A.qa=tc(A,A.J?A.ia:null,A.W),ue.K){pn(A.h,ue);var Ke=ue,Vt=A.L;Vt&&(Ke.I=Vt),Ke.B&&(zr(Ke),Ls(Ke)),A.g=ue}else Xu(A);0<v.i.length&&za(v)}else Qe[0]!="stop"&&Qe[0]!="close"||rr(v,7);else v.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?rr(v,7):rl(v):Qe[0]!="noop"&&v.l&&v.l.ta(Qe),v.v=0)}}de(4)}catch{}}var Fu=class{constructor(c,y){this.g=c,this.map=y}};function Zi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Na(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Da(c){return c.h?1:c.g?c.g.size:0}function Wo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Oa(c,y){c.g?c.g.add(y):c.h=y}function pn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Zi.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Xo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Q(c.i)}function Ad(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,A=0;A<v;A++)y.push(c[A]);return y}y=[],v=0;for(A in c)y[v++]=c[A];return y}function Ma(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const A in c)y[v++]=A;return y}}}function Zo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Ma(c),A=Ad(c),B=A.length,K=0;K<B;K++)y.call(void 0,A[K],v&&v[K],c)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var A=c[v].indexOf("="),B=null;if(0<=A){var K=c[v].substring(0,A);B=c[v].substring(A+1)}else K=c[v];y(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function xt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xt){this.h=c.h,zs(this,c.j),this.o=c.o,this.g=c.g,Br(this,c.s),this.l=c.l;var y=c.i,v=new er;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Ji(this,v),this.m=c.m}else c&&(y=String(c).match(js))?(this.h=!1,zs(this,y[1]||"",!0),this.o=qn(y[2]||""),this.g=qn(y[3]||"",!0),Br(this,y[4]),this.l=qn(y[5]||"",!0),Ji(this,y[6]||"",!0),this.m=qn(y[7]||"")):(this.h=!1,this.i=new er(null,this.h))}xt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(qs(y,Jo,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(qs(y,Jo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(qs(v,v.charAt(0)=="/"?Id:el,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",qs(v,Va)),c.join("")};function Nn(c){return new xt(c)}function zs(c,y,v){c.j=v?qn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Br(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Ji(c,y,v){y instanceof er?(c.i=y,$u(c.i,c.h)):(v||(y=qs(y,Cd)),c.i=new er(y,c.h))}function ot(c,y,v){c.i.set(y,v)}function Bs(c){return ot(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qs(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Gu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Gu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Jo=/[#\/\?@]/g,el=/[#\?:]/g,Id=/[#\?]/g,Cd=/[#\?@]/g,Va=/#/g;function er(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Hn(c){c.g||(c.g=new Map,c.h=0,c.i&&Rd(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=er.prototype,i.add=function(c,y){Hn(this),this.i=null,c=Si(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function tr(c,y){Hn(c),y=Si(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function nr(c,y){return Hn(c),y=Si(c,y),c.g.has(y)}i.forEach=function(c,y){Hn(this),this.g.forEach(function(v,A){v.forEach(function(B){c.call(y,B,A,this)},this)},this)},i.na=function(){Hn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const B=c[A];for(let K=0;K<B.length;K++)v.push(y[A])}return v},i.V=function(c){Hn(this);let y=[];if(typeof c=="string")nr(this,c)&&(y=y.concat(this.g.get(Si(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return Hn(this),this.i=null,c=Si(this,c),nr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function tl(c,y,v){tr(c,y),0<v.length&&(c.i=null,c.g.set(Si(c,y),Q(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const K=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var B=K;ue[A]!==""&&(B+="="+encodeURIComponent(String(ue[A]))),c.push(B)}}return this.i=c.join("&")};function Si(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function $u(c,y){y&&!c.j&&(Hn(c),c.i=null,c.g.forEach(function(v,A){var B=A.toLowerCase();A!=B&&(tr(this,A),tl(this,B,v))},c)),c.j=y}function Hs(c,y){const v=new Xe;if(m.Image){const A=new Image;A.onload=O(Fn,v,"TestLoadImage: loaded",!0,y,A),A.onerror=O(Fn,v,"TestLoadImage: error",!1,y,A),A.onabort=O(Fn,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=O(Fn,v,"TestLoadImage: timeout",!1,y,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function si(c,y){const v=new Xe,A=new AbortController,B=setTimeout(()=>{A.abort(),Fn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(K=>{clearTimeout(B),K.ok?Fn(v,"TestPingServer: ok",!0,y):Fn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Fn(v,"TestPingServer: error",!1,y)})}function Fn(c,y,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function Fs(){this.g=new Yi}function Ai(c,y,v){const A=v||"";try{Zo(c,function(B,K){let ue=B;g(B)&&(ue=En(B)),y.push(A+K+"="+encodeURIComponent(ue))})}catch(B){throw y.push(A+"type="+encodeURIComponent("_badmap")),B}}function qr(c){this.l=c.Ub||null,this.j=c.eb||!1}M(qr,Vs),qr.prototype.g=function(){return new ir(this.l,this.j)},qr.prototype.i=function(c){return function(){return c}}({});function ir(c,y){gt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ir,gt),i=ir.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Ii(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function nl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ri(this):Ii(this),this.readyState==3&&nl(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ri(this))},i.Qa=function(c){this.g&&(this.response=c,Ri(this))},i.ga=function(){this.g&&Ri(this)};function Ri(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ii(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function il(c){let y="";return Re(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function qt(c,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=il(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):ot(c,y,v))}function tt(c){gt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(tt,gt);var ka=/^https?$/i,Gs=["POST","PUT"];i=tt.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ti.g(),this.v=this.o?Ur(this.o):Ur(Ti),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){Ku(this,K);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Gs,y,void 0))||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of v)this.g.setRequestHeader(K,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$s(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Ku(this,K)}};function Ku(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Pa(c),Ci(c)}function Pa(c){c.A||(c.A=!0,Je(c,"complete"),Je(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Je(this,"complete"),Je(this,"abort"),Ci(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),tt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?La(this):this.bb())},i.bb=function(){La(this)};function La(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Gn(c)!=4||c.Z()!=2)){if(c.u&&Gn(c)==4)Bt(c.Ea,0,c);else if(Je(c,"readystatechange"),Gn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=ue===0){var B=String(c.D).match(js)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),A=!ka.test(B?B.toLowerCase():"")}v=A}if(v)Je(c,"complete"),Je(c,"success");else{c.m=6;try{var K=2<Gn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Pa(c)}}finally{Ci(c)}}}}function Ci(c,y){if(c.g){$s(c);const v=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Je(c,"ready");try{v.onreadystatechange=A}catch{}}}function $s(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Gn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Qi(y)}};function Qu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(c){const y={};c=(c.g&&2<=Gn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ae(c[A]))continue;var v=x(c[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[B]||[];y[B]=K,K.push(v)}P(y,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Ua(c){this.Aa=0,this.i=[],this.j=new Xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,c),this.cb=Ks("retryDelaySeedMs",1e4,c),this.Wa=Ks("forwardChannelMaxRetries",2,c),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Zi(c&&c.concurrentRequestLimit),this.Da=new Fs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ua.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,A){he(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=tc(this,null,this.W),za(this)};function rl(c){if(Yu(c),c.G==3){var y=c.U++,v=Nn(c.I);if(ot(v,"SID",c.K),ot(v,"RID",y),ot(v,"TYPE","terminate"),Qs(c,v),y=new mn(c,c.j,y),y.L=2,y.v=Bs(Nn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=nc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ls(y)}ec(c)}function ja(c){c.g&&(Ys(c),c.g.cancel(),c.g=null)}function Yu(c){ja(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ba(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function za(c){if(!Na(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||L(),Ee||(oe(),Ee=!0),Pe.add(y,c),c.B=0}}function Nd(c,y){return Da(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=at(I(c.Ga,c,y),ol(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new mn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=S(K),N(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Wu(this,B,y),v=Nn(this.I),ot(v,"RID",c),ot(v,"CVER",22),this.D&&ot(v,"X-HTTP-Session-Id",this.D),Qs(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(il(K)))+"&"+y:this.m&&qt(v,this.m,K)),Oa(this.h,B),this.Ua&&ot(v,"TYPE","init"),this.P?(ot(v,"$req",y),ot(v,"SID","null"),B.T=!0,ri(B,v,null)):ri(B,v,y),this.G=2}}else this.G==3&&(c?sl(this,c):this.i.length==0||Na(this.h)||sl(this))};function sl(c,y){var v;y?v=y.l:v=c.U++;const A=Nn(c.I);ot(A,"SID",c.K),ot(A,"RID",v),ot(A,"AID",c.T),Qs(c,A),c.m&&c.o&&qt(A,c.m,c.o),v=new mn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Wu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Oa(c.h,v),ri(v,A,y)}function Qs(c,y){c.H&&Re(c.H,function(v,A){ot(y,A,v)}),c.l&&Zo({},function(v,A){ot(y,A,v)})}function Wu(c,y,v){v=Math.min(c.i.length,v);var A=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let K=-1;for(;;){const ue=["count="+v];K==-1?0<v?(K=B[0].g,ue.push("ofs="+K)):K=0:ue.push("ofs="+K);let Ke=!0;for(let Vt=0;Vt<v;Vt++){let Qe=B[Vt].g;const Ht=B[Vt].map;if(Qe-=K,0>Qe)K=Math.max(0,B[Vt].g-100),Ke=!1;else try{Ai(Ht,ue,"req"+Qe+"_")}catch{A&&A(Ht)}}if(Ke){A=ue.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,A}function Xu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||L(),Ee||(oe(),Ee=!0),Pe.add(y,c),c.v=0}}function al(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=at(I(c.Fa,c),ol(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=at(I(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,he(10),ja(this),Zu(this))};function Ys(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Zu(c){c.g=new mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Nn(c.qa);ot(y,"RID","rpc"),ot(y,"SID",c.K),ot(y,"AID",c.T),ot(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&ot(y,"TO",c.ja),ot(y,"TYPE","xmlhttp"),Qs(c,y),c.m&&c.o&&qt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Bs(Nn(y)),v.m=null,v.P=!0,Xi(v,c)}i.Za=function(){this.C!=null&&(this.C=null,ja(this),al(this),he(19))};function Ba(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ju(c,y){var v=null;if(c.g==y){Ba(c),Ys(c),c.g=null;var A=2}else if(Wo(c.h,y))v=y.D,pn(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;A=re(),Je(A,new Be(A,v)),za(c)}else Xu(c);else if(B=y.s,B==3||B==0&&0<y.X||!(A==1&&Nd(c,y)||A==2&&al(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),B){case 1:rr(c,5);break;case 4:rr(c,10);break;case 3:rr(c,6);break;default:rr(c,2)}}}function ol(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function rr(c,y){if(c.j.info("Error code "+y),y==2){var v=I(c.fb,c),A=c.Xa;const B=!A;A=new xt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||zs(A,"https"),Bs(A),B?Hs(A.toString(),v):si(A.toString(),v)}else he(2);c.G=0,c.l&&c.l.sa(y),ec(c),Yu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),he(2)):(this.j.info("Failed to ping google.com"),he(1))};function ec(c){if(c.G=0,c.ka=[],c.l){const y=Xo(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ka,y),H(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function tc(c,y,v){var A=v instanceof xt?Nn(v):new xt(v);if(A.g!="")y&&(A.g=y+"."+A.g),Br(A,A.s);else{var B=m.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var K=new xt(null);A&&zs(K,A),y&&(K.g=y),B&&Br(K,B),v&&(K.l=v),A=K}return v=c.D,y=c.ya,v&&y&&ot(A,v,y),ot(A,"VER",c.la),Qs(c,A),A}function nc(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new tt(new qr({eb:v})):new tt(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}i=ic.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function qa(){}qa.prototype.g=function(c,y){return new gn(c,y)};function gn(c,y){gt.call(this),this.g=new Ua(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!ae(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ae(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new xi(this)}M(gn,gt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){rl(this.g)},gn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=En(c),c=v);y.i.push(new Fu(y.Ya++,c)),y.G==3&&za(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,gn.aa.N.call(this)};function rc(c){zn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(rc,zn);function sc(){ks.call(this),this.status=1}M(sc,ks);function xi(c){this.g=c}M(xi,ic),xi.prototype.ua=function(){Je(this.g,"a")},xi.prototype.ta=function(c){Je(this.g,new rc(c))},xi.prototype.sa=function(c){Je(this.g,new sc)},xi.prototype.ra=function(){Je(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,TT=function(){return new qa},ET=function(){return re()},_T=Bn,Zm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pt.NO_ERROR=0,pt.TIMEOUT=8,pt.HTTP_ERROR=6,mh=pt,Wi.COMPLETE="complete",vT=Wi,jr.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",gt.prototype.listen=gt.prototype.K,tu=jr,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,yT=tt}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore",p0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Xh("@firebase/firestore");function Eo(){return pa.logLevel}function ge(i,...e){if(pa.logLevel<=Fe.DEBUG){const n=e.map(Ip);pa.debug(`Firestore (${Lo}): ${i}`,...n)}}function Rr(i,...e){if(pa.logLevel<=Fe.ERROR){const n=e.map(Ip);pa.error(`Firestore (${Lo}): ${i}`,...n)}}function xo(i,...e){if(pa.logLevel<=Fe.WARN){const n=e.map(Ip);pa.warn(`Firestore (${Lo}): ${i}`,...n)}}function Ip(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(i="Unexpected state"){const e=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+i;throw Rr(e),new Error(e)}function nt(i,e){i||xe()}function Me(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class k2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class P2{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new br;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new br,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new br)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string"),new bT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new on(e)}}class L2{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class U2{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new L2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j2{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Jn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0);const s=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new g0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string"),this.R=n.token,new g0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=z2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ue(i,e){return i<e?-1:i>e?1:0}function Jm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ue(s,o);{const u=wT(),d=B2(u.encode(y0(i,n)),u.encode(y0(e,n)));return d!==0?d:Ue(s,o)}}n+=s>65535?2:1}return Ue(i.length,e.length)}function y0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function B2(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Ue(i[n],e[n]);return Ue(i.length,e.length)}function No(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-62135596800,_0=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*_0);return new jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<v0)throw new pe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-v0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new jt(0,0))}static max(){return new De(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="__name__";class Pi{constructor(e,n,s){n===void 0?n=0:n>e.length&&xe(),s===void 0?s=e.length-n:s>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Pi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=Pi.isNumericId(e),o=Pi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Pi.extractNumericId(e).compare(Pi.extractNumericId(n)):Jm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class mt extends Pi{construct(e,n,s){return new mt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new mt(n)}static emptyPath(){return new mt([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Pi{construct(e,n,s){return new tn(e,n,s)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E0}static keyField(){return new tn([E0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new pe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new pe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(mt.fromString(e))}static fromName(e){return new be(mt.fromString(e).popFirst(5))}static empty(){return new be(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function H2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new ws(o,be.empty(),e)}function F2(i){return new ws(i.readTime,i.key,pu)}class ws{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ws(De.min(),be.empty(),pu)}static max(){return new ws(De.max(),be.empty(),pu)}}function G2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==$2)throw i;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,s)=>{n(e)})}static reject(e){return new te((n,s)=>{s(e)})}static waitFor(e){return new te((n,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},p=>s(p))}),d=!0,u===o&&n()})}static or(e){let n=te.resolve(!1);for(const s of e)n=n.next(o=>o?te.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new te((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{d[g]=E,++m,m===u&&s(d)},E=>o(E))}})}static doWhile(e,n){return new te((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function Q2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Zh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=-1;function Jh(i){return i==null}function Ch(i){return i===0&&1/i==-1/0}function Y2(i){return typeof i=="number"&&Number.isInteger(i)&&!Ch(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="";function W2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=T0(e)),e=X2(i.get(n),e);return T0(e)}function X2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case AT:n+="";break;default:n+=u}}return n}function T0(i){return i+AT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function xs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function RT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??en.RED,this.left=o??en.EMPTY,this.right=u??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new en(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,s,o,u){return this}insert(e,n,s){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new w0(this.data.getIterator())}getIteratorFrom(e){return new w0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class w0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Un([])}unionWith(e){let n=new zt(tn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new IT("Invalid base64 string: "+u):u}}(e);return new nn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(i){if(nt(!!i),typeof i=="string"){let e=0;const n=Z2.exec(i);if(nt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ct(i.seconds),nanos:Ct(i.nanos)}}function Ct(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function As(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="server_timestamp",xT="__type__",NT="__previous_value__",DT="__local_write_time__";function xp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[xT])===null||n===void 0?void 0:n.stringValue)===CT}function ed(i){const e=i.mapValue.fields[NT];return xp(e)?ed(e):e}function gu(i){const e=Ss(i.mapValue.fields[DT].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n,s,o,u,d,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const xh="(default)";class yu{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="__type__",eR="__max__",lh={mapValue:{}},MT="__vector__",Nh="value";function Rs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xp(i)?4:nR(i)?9007199254740991:tR(i)?10:11:xe()}function qi(i,e){if(i===e)return!0;const n=Rs(i);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return gu(i).isEqual(gu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ss(o.timestampValue),m=Ss(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return As(o.bytesValue).isEqual(As(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Ct(o.geoPointValue.latitude)===Ct(u.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ct(o.integerValue)===Ct(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ct(o.doubleValue),m=Ct(u.doubleValue);return d===m?Ch(d)===Ch(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return No(i.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(b0(d)!==b0(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!qi(d[p],m[p])))return!1;return!0}(i,e);default:return xe()}}function vu(i,e){return(i.values||[]).find(n=>qi(n,e))!==void 0}function Do(i,e){if(i===e)return 0;const n=Rs(i),s=Rs(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Ct(u.integerValue||u.doubleValue),p=Ct(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return S0(i.timestampValue,e.timestampValue);case 4:return S0(gu(i),gu(e));case 5:return Jm(i.stringValue,e.stringValue);case 6:return function(u,d){const m=As(u),p=As(d);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=Ue(m[g],p[g]);if(E!==0)return E}return Ue(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Ue(Ct(u.latitude),Ct(d.latitude));return m!==0?m:Ue(Ct(u.longitude),Ct(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return A0(i.arrayValue,e.arrayValue);case 10:return function(u,d){var m,p,g,E;const w=u.fields||{},I=d.fields||{},O=(m=w[Nh])===null||m===void 0?void 0:m.arrayValue,M=(p=I[Nh])===null||p===void 0?void 0:p.arrayValue,Q=Ue(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return Q!==0?Q:A0(O,M)}(i.mapValue,e.mapValue);case 11:return function(u,d){if(u===lh.mapValue&&d===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=d.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const I=Jm(p[w],E[w]);if(I!==0)return I;const O=Do(m[p[w]],g[E[w]]);if(O!==0)return O}return Ue(p.length,E.length)}(i.mapValue,e.mapValue);default:throw xe()}}function S0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=Ss(i),s=Ss(e),o=Ue(n.seconds,s.seconds);return o!==0?o:Ue(n.nanos,s.nanos)}function A0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Do(n[o],s[o]);if(u)return u}return Ue(n.length,s.length)}function Oo(i){return ep(i)}function ep(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Ss(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return As(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return be.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=ep(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${ep(n.fields[d])}`;return o+"}"}(i.mapValue):xe()}function ph(i){switch(Rs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(i);return e?16+ph(e):16;case 5:return 2*i.stringValue.length;case 6:return As(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+ph(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return xs(s.fields,(u,d)=>{o+=u.length+ph(d)}),o}(i.mapValue);default:throw xe()}}function R0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function tp(i){return!!i&&"integerValue"in i}function Np(i){return!!i&&"arrayValue"in i}function I0(i){return!!i&&"nullValue"in i}function C0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gh(i){return!!i&&"mapValue"in i}function tR(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[OT])===null||n===void 0?void 0:n.stringValue)===MT}function ou(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return xs(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ou(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ou(i.arrayValue.values[n]);return e}return Object.assign({},i)}function nR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===eR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(n)}setAll(e){let n=tn.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=ou(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){xs(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new Rn(ou(this.value))}}function VT(i){const e=[];return xs(i.fields,(n,s)=>{const o=new tn([n]);if(gh(s)){const u=VT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new ln(e,0,De.min(),De.min(),De.min(),Rn.empty(),0)}static newFoundDocument(e,n,s,o){return new ln(e,1,n,De.min(),s,o,0)}static newNoDocument(e,n){return new ln(e,2,n,De.min(),De.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,De.min(),De.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function x0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=be.comparator(be.fromName(d.referenceValue),n.key):s=Do(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function N0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!qi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n="asc"){this.field=e,this.dir=n}}function iR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{}class Mt extends kT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new sR(e,n,s):n==="array-contains"?new lR(e,s):n==="in"?new uR(e,s):n==="not-in"?new cR(e,s):n==="array-contains-any"?new hR(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new aR(e,s):new oR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Do(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(Do(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends kT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new hi(e,n)}matches(e){return PT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function PT(i){return i.op==="and"}function LT(i){return rR(i)&&PT(i)}function rR(i){for(const e of i.filters)if(e instanceof hi)return!1;return!0}function np(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+Oo(i.value);if(LT(i))return i.filters.map(e=>np(e)).join(",");{const e=i.filters.map(n=>np(n)).join(",");return`${i.op}(${e})`}}function UT(i,e){return i instanceof Mt?function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&qi(s.value,o.value)}(i,e):i instanceof hi?function(s,o){return o instanceof hi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&UT(d,o.filters[m]),!0):!1}(i,e):void xe()}function jT(i){return i instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Oo(n.value)}`}(i):i instanceof hi?function(n){return n.op.toString()+" {"+n.getFilters().map(jT).join(" ,")+"}"}(i):"Filter"}class sR extends Mt{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class aR extends Mt{constructor(e,n){super(e,"in",n),this.keys=zT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oR extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=zT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>be.fromName(s.referenceValue))}class lR extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Np(n)&&vu(n.arrayValue,this.value)}}class uR extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vu(this.value.arrayValue,n)}}class cR extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vu(this.value.arrayValue,n)}}class hR extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>vu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.le=null}}function D0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new dR(i,e,n,s,o,u,d)}function Dp(i){const e=Me(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>np(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Oo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Oo(s)).join(",")),e.le=n}return e.le}function Op(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!iR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!UT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!N0(i.startAt,e.startAt)&&N0(i.endAt,e.endAt)}function ip(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function fR(i,e,n,s,o,u,d,m){return new wa(i,e,n,s,o,u,d,m)}function td(i){return new wa(i)}function O0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function BT(i){return i.collectionGroup!==null}function lu(i){const e=Me(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new zt(tn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new _u(u,s))}),n.has(tn.keyField().canonicalString())||e.he.push(new _u(tn.keyField(),s))}return e.he}function Li(i){const e=Me(i);return e.Pe||(e.Pe=mR(e,lu(i))),e.Pe}function mR(i,e){if(i.limitType==="F")return D0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new _u(o.field,u)});const n=i.endAt?new Dh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Dh(i.startAt.position,i.startAt.inclusive):null;return D0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function rp(i,e){const n=i.filters.concat([e]);return new wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function sp(i,e,n){return new wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function nd(i,e){return Op(Li(i),Li(e))&&i.limitType===e.limitType}function qT(i){return`${Dp(Li(i))}|lt:${i.limitType}`}function To(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>jT(o)).join(", ")}]`),Jh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Oo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Oo(o)).join(",")),`Target(${s})`}(Li(i))}; limitType=${i.limitType})`}function id(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):be.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of lu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(d,m,p){const g=x0(d,m,p);return d.inclusive?g<=0:g<0}(s.startAt,lu(s),o)||s.endAt&&!function(d,m,p){const g=x0(d,m,p);return d.inclusive?g>=0:g>0}(s.endAt,lu(s),o))}(i,e)}function pR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function HT(i){return(e,n)=>{let s=!1;for(const o of lu(i)){const u=gR(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function gR(i,e,n){const s=i.field.isKeyField()?be.comparator(e.key,n.key):function(u,d,m){const p=d.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Do(p,g):xe()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return RT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Et(be.comparator);function Ir(){return yR}const FT=new Et(be.comparator);function nu(...i){let e=FT;for(const n of i)e=e.insert(n.key,n);return e}function GT(i){let e=FT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function da(){return uu()}function $T(){return uu()}function uu(){return new Sa(i=>i.toString(),(i,e)=>i.isEqual(e))}const vR=new Et(be.comparator),_R=new zt(be.comparator);function Ge(...i){let e=_R;for(const n of i)e=e.add(n);return e}const ER=new zt(Ue);function TR(){return ER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function KT(i){return{integerValue:""+i}}function QT(i,e){return Y2(e)?KT(e):Mp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function bR(i,e,n){return i instanceof Eu?function(o,u){const d={fields:{[xT]:{stringValue:CT},[DT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xp(u)&&(u=ed(u)),u&&(d.fields[NT]=u),{mapValue:d}}(n,e):i instanceof Tu?WT(i,e):i instanceof bu?XT(i,e):function(o,u){const d=YT(o,u),m=M0(d)+M0(o.Ie);return tp(d)&&tp(o.Ie)?KT(m):Mp(o.serializer,m)}(i,e)}function wR(i,e,n){return i instanceof Tu?WT(i,e):i instanceof bu?XT(i,e):n}function YT(i,e){return i instanceof wu?function(s){return tp(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Eu extends rd{}class Tu extends rd{constructor(e){super(),this.elements=e}}function WT(i,e){const n=ZT(e);for(const s of i.elements)n.some(o=>qi(o,s))||n.push(s);return{arrayValue:{values:n}}}class bu extends rd{constructor(e){super(),this.elements=e}}function XT(i,e){let n=ZT(e);for(const s of i.elements)n=n.filter(o=>!qi(o,s));return{arrayValue:{values:n}}}class wu extends rd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function M0(i){return Ct(i.integerValue||i.doubleValue)}function ZT(i){return Np(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.field=e,this.transform=n}}function SR(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof Tu&&o instanceof Tu||s instanceof bu&&o instanceof bu?No(s.elements,o.elements,qi):s instanceof wu&&o instanceof wu?qi(s.Ie,o.Ie):s instanceof Eu&&o instanceof Eu}(i.transform,e.transform)}class AR{constructor(e,n){this.version=e,this.transformResults=n}}class ti{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class sd{}function eb(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Vp(i.key,ti.none()):new Cu(i.key,i.data,ti.none());{const n=i.data,s=Rn.empty();let o=new zt(tn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new Ns(i.key,s,new Un(o.toArray()),ti.none())}}function RR(i,e,n){i instanceof Cu?function(o,u,d){const m=o.value.clone(),p=k0(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Ns?function(o,u,d){if(!yh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=k0(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(tb(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function cu(i,e,n,s){return i instanceof Cu?function(u,d,m,p){if(!yh(u.precondition,d))return m;const g=u.value.clone(),E=P0(u.fieldTransforms,p,d);return g.setAll(E),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof Ns?function(u,d,m,p){if(!yh(u.precondition,d))return m;const g=P0(u.fieldTransforms,p,d),E=d.data;return E.setAll(tb(u)),E.setAll(g),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(i,e,n,s):function(u,d,m){return yh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,n)}function IR(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=YT(s.transform,o||null);u!=null&&(n===null&&(n=Rn.empty()),n.set(s.field,u))}return n||null}function V0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&No(s,o,(u,d)=>SR(u,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Cu extends sd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ns extends sd{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function tb(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function k0(i,e,n){const s=new Map;nt(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,wR(d,m,n[o]))}return s}function P0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,bR(u,d,e))}return s}class Vp extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CR extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&RR(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=$T();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=eb(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,s)=>V0(n,s))&&No(this.baseMutations,e.baseMutations,(n,s)=>V0(n,s))}}class kp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){nt(e.mutations.length===s.length);let o=function(){return vR}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new kp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,We;function OR(i){switch(i){case J.OK:return xe();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return xe()}}function nb(i){if(i===void 0)return Rr("GRPC error has no .code"),J.UNKNOWN;switch(i){case Ot.OK:return J.OK;case Ot.CANCELLED:return J.CANCELLED;case Ot.UNKNOWN:return J.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return J.INTERNAL;case Ot.UNAVAILABLE:return J.UNAVAILABLE;case Ot.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ot.NOT_FOUND:return J.NOT_FOUND;case Ot.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ot.ABORTED:return J.ABORTED;case Ot.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ot.DATA_LOSS:return J.DATA_LOSS;default:return xe()}}(We=Ot||(Ot={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new Es([4294967295,4294967295],0);function L0(i){const e=wT().encode(i),n=new gT;return n.update(e),new Uint8Array(n.digest())}function U0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Es([n,s],0),new Es([o,u],0)]}class Pp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new iu(`Invalid padding: ${n}`);if(s<0)throw new iu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new iu(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Es.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(Es.fromNumber(s)));return o.compare(MR)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=L0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ae(s,o,u);if(!this.Re(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Pp(u,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.Ee===0)return;const n=L0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ae(s,o,u);this.Ve(d)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ad(De.min(),o,new Et(Ue),Ir(),Ge())}}class xu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new xu(s,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class ib{constructor(e,n){this.targetId=e,this.ge=n}}class rb{constructor(e,n,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class j0{constructor(){this.pe=0,this.ye=z0(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ge(),n=Ge(),s=Ge();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:xe()}}),new xu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=z0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,nt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class VR{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ir(),this.$e=uh(),this.Ue=uh(),this.Ke=new Et(Ue)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(ip(u))if(s===0){const d=new be(u.path);this.ze(n,d,ln.newNoDocument(d,De.min()))}else nt(s===1);else{const d=this.et(n);if(d!==s){const m=this.tt(e),p=m?this.nt(m,e,d):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=As(s).toUint8Array()}catch(p){if(p instanceof IT)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Pp(d,o,u)}catch(p){return xo(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ke.it(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,d)=>{const m=this.Xe(d);if(m){if(u.current&&ip(m.target)){const p=new be(m.target.path);this._t(p).has(d)||this.ut(d,p)||this.ze(d,p,ln.newNoDocument(p,e))}u.ve&&(n.set(d,u.Fe()),u.Me())}});let s=Ge();this.Ue.forEach((u,d)=>{let m=!0;d.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,d)=>d.setReadTime(e));const o=new ad(e,n,this.Ke,this.Qe,s);return this.Qe=Ir(),this.$e=uh(),this.Ue=uh(),this.Ke=new Et(Ue),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new j0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new zt(Ue),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new zt(Ue),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new j0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function uh(){return new Et(be.comparator)}function z0(){return new Et(be.comparator)}const kR={asc:"ASCENDING",desc:"DESCENDING"},PR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LR={and:"AND",or:"OR"};class UR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ap(i,e){return i.useProto3Json||Jh(e)?e:{value:e}}function Oh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function jR(i,e){return Oh(i,e.toTimestamp())}function Ui(i){return nt(!!i),De.fromTimestamp(function(n){const s=Ss(n);return new jt(s.seconds,s.nanos)}(i))}function Lp(i,e){return op(i,e).canonicalString()}function op(i,e){const n=function(o){return new mt(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function ab(i){const e=mt.fromString(i);return nt(hb(e)),e}function lp(i,e){return Lp(i.databaseId,e.path)}function Mm(i,e){const n=ab(e);if(n.get(1)!==i.databaseId.projectId)throw new pe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new pe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new be(lb(n))}function ob(i,e){return Lp(i.databaseId,e)}function zR(i){const e=ab(i);return e.length===4?mt.emptyPath():lb(e)}function up(i){return new mt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function lb(i){return nt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function B0(i,e,n){return{name:lp(i,e),fields:n.value.mapValue.fields}}function BR(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(nt(E===void 0||typeof E=="string"),nn.fromBase64String(E||"")):(nt(E===void 0||E instanceof Buffer||E instanceof Uint8Array),nn.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(g){const E=g.code===void 0?J.UNKNOWN:nb(g.code);return new pe(E,g.message||"")}(d);n=new rb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mm(i,s.document.name),u=Ui(s.document.updateTime),d=s.document.createTime?Ui(s.document.createTime):De.min(),m=new Rn({mapValue:{fields:s.document.fields}}),p=ln.newFoundDocument(o,u,d,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new vh(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mm(i,s.document),u=s.readTime?Ui(s.readTime):De.min(),d=ln.newNoDocument(o,u),m=s.removedTargetIds||[];n=new vh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mm(i,s.document),u=s.removedTargetIds||[];n=new vh([],u,o,null)}else{if(!("filter"in e))return xe();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new DR(o,u),m=s.targetId;n=new ib(m,d)}}return n}function qR(i,e){let n;if(e instanceof Cu)n={update:B0(i,e.key,e.value)};else if(e instanceof Vp)n={delete:lp(i,e.key)};else if(e instanceof Ns)n={update:B0(i,e.key,e.data),updateMask:XR(e.fieldMask)};else{if(!(e instanceof CR))return xe();n={verify:lp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof Eu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Tu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof bu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wu)return{fieldPath:d.field.canonicalString(),increment:m.Ie};throw xe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:jR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe()}(i,e.precondition)),n}function HR(i,e){return i&&i.length>0?(nt(e!==void 0),i.map(n=>function(o,u){let d=o.updateTime?Ui(o.updateTime):Ui(u);return d.isEqual(De.min())&&(d=Ui(u)),new AR(d,o.transformResults||[])}(n,e))):[]}function FR(i,e){return{documents:[ob(i,e.path)]}}function GR(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ob(i,o);const u=function(g){if(g.length!==0)return cb(hi.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(g){if(g.length!==0)return g.map(E=>function(I){return{field:bo(I.field),direction:QR(I.dir)}}(E))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=ap(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function $R(i){let e=zR(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){nt(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(w){const I=ub(w);return I instanceof hi&&LT(I)?I.getFilters():[I]}(n.where));let d=[];n.orderBy&&(d=function(w){return w.map(I=>function(M){return new _u(wo(M.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let m=null;n.limit&&(m=function(w){let I;return I=typeof w=="object"?w.value:w,Jh(I)?null:I}(n.limit));let p=null;n.startAt&&(p=function(w){const I=!!w.before,O=w.values||[];return new Dh(O,I)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const I=!w.before,O=w.values||[];return new Dh(O,I)}(n.endAt)),fR(e,o,d,u,m,"F",p,g)}function KR(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ub(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=wo(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=wo(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=wo(n.unaryFilter.field);return Mt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(i):i.fieldFilter!==void 0?function(n){return Mt.create(wo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return hi.create(n.compositeFilter.filters.map(s=>ub(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(i):xe()}function QR(i){return kR[i]}function YR(i){return PR[i]}function WR(i){return LR[i]}function bo(i){return{fieldPath:i.canonicalString()}}function wo(i){return tn.fromServerFormat(i.fieldPath)}function cb(i){return i instanceof Mt?function(n){if(n.op==="=="){if(C0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(I0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(I0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:YR(n.op),value:n.value}}}(i):i instanceof hi?function(n){const s=n.getFilters().map(o=>cb(o));return s.length===1?s[0]:{compositeFilter:{op:WR(n.op),filters:s}}}(i):xe()}function XR(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,s,o,u=De.min(),d=De.min(),m=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.Tt=e}}function JR(i){const e=$R({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.Tn=new tI}addToCollectionParentIndex(e,n){return this.Tn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(ws.min())}updateCollectionGroup(e,n,s){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class tI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zt(mt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},db=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(db,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Mo(0)}static Kn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="LruGarbageCollector",nI=1048576;function F0([i,e],[n,s]){const o=Ue(i,n);return o===0?Ue(e,s):o}class iI{constructor(e){this.Hn=e,this.buffer=new zt(F0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();F0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(H0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jo(n)?ge(H0,"Ignoring IndexedDB error during garbage collection: ",n):await Uo(n)}await this.er(3e5)})}}class sI{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Zh.ae);const s=new iI(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(q0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,d,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(g=Date.now(),Eo()<=Fe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function aI(i,e){return new sI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.changes=new Sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?te.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&cu(s.mutation,o,Un.empty(),jt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ge()){const o=da();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=nu();return u.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=da();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ge()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let u=Ir();const d=uu(),m=function(){return uu()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Ns)?u=u.insert(g.key,g):E!==void 0?(d.set(g.key,E.mutation.getFieldMask()),cu(E.mutation,g,E.mutation.getFieldMask(),jt.now())):d.set(g.key,Un.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>d.set(g,E)),n.forEach((g,E)=>{var w;return m.set(g,new lI(E,(w=d.get(g))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=uu();let o=new Et((d,m)=>d-m),u=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Un.empty();E=m.applyToLocalView(g,E),s.set(p,E);const w=(o.get(m.batchId)||Ge()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,w=$T();E.forEach(I=>{if(!u.has(I)){const O=eb(n.get(I),s.get(I));O!==null&&w.set(I,O),u=u.add(I)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,w))}return te.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):te.resolve(da());let m=pu,p=u;return d.next(g=>te.forEach(g,(E,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(E)?te.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{p=p.insert(E,I)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Ge())).next(E=>({batchId:m,changes:GT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(s=>{let o=nu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=nu();return this.indexManager.getCollectionParents(e,u).next(m=>te.forEach(m,p=>{const g=function(w,I){return new wa(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((w,I)=>{d=d.insert(w,I)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((p,g)=>{const E=g.getKey();d.get(E)===null&&(d=d.insert(E,ln.newInvalidDocument(E)))});let m=nu();return d.forEach((p,g)=>{const E=u.get(p);E!==void 0&&cu(E.mutation,g,Un.empty(),jt.now()),id(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return te.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ui(o.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:JR(o.bundledQuery),readTime:Ui(o.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.overlays=new Et(be.comparator),this.Rr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const s=da();return te.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),te.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),te.resolve()}getOverlaysForCollection(e,n,s){const o=da(),u=n.length+1,d=new be(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new Et((g,E)=>g-E);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=da(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=da(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return te.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new NR(n,s));let u=this.Rr.get(n);u===void 0&&(u=Ge(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Vr=new zt(Kt.mr),this.gr=new zt(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Kt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new be(new mt([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.gr.forEachInRange([s,o],d=>{this.wr(d),u.push(d.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new be(new mt([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=Ge();return this.gr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return be.comparator(e.key,n.key)||Ue(e.Cr,n.Cr)}static pr(e,n){return Ue(e.Cr,n.Cr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new zt(Kt.mr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new xR(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Mr=this.Mr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(d)}lookupMutationBatch(e,n){return te.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Cp:this.Fr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],d=>{const m=this.Or(d.Cr);u.push(m)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zt(Ue);return n.forEach(o=>{const u=new Kt(o,0),d=new Kt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,d],m=>{s=s.add(m.Cr)})}),te.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;be.isDocumentKey(u)||(u=u.child(""));const d=new Kt(new be(u),0);let m=new zt(Ue);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},d),te.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){nt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return te.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Mr.firstAfterOrEqual(s);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.kr=e,this.docs=function(){return new Et(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return te.resolve(s?s.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let s=Ir();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():ln.newInvalidDocument(o))}),te.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Ir();const d=n.path,m=new be(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||G2(F2(E),s)<=0||(o.has(E.key)||id(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,n,s,o){xe()}qr(e,n){return te.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new pI(this)}getSize(e){return te.resolve(this.size)}}class pI extends oI{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),te.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.persistence=e,this.Qr=new Sa(n=>Dp(n),Op),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Up,this.targetCount=0,this.Kr=Mo.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),te.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Mo(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.zn(n),te.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return te.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),te.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),te.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return te.resolve(s)}containsKey(e,n){return te.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Zh(0),this.zr=!1,this.zr=!0,this.jr=new dI,this.referenceDelegate=e(this),this.Hr=new gI(this),this.indexManager=new eI,this.remoteDocumentCache=function(o){return new mI(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new ZR(n),this.Yr=new cI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new fI(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){ge("MemoryPersistence","Starting transaction:",e);const o=new yI(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return te.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class yI extends K2{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.ti=new Up,this.ni=null}static ri(e){return new jp(e)}get ii(){if(this.ni)return this.ni;throw xe()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),te.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),te.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.ii,s=>{const o=be.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,De.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return te.or([()=>te.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Mh{constructor(e,n){this.persistence=e,this.oi=new Sa(s=>W2(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=aI(this,n)}static ri(e,n){return new Mh(e,n)}Zr(){}Xr(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return te.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?te.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,d=>this.ar(e,d,n).next(m=>{m||(s++,u.removeEntry(d,De.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}ar(e,n,s){return te.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Ge(),o=Ge();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return d1()?8:Q2(hn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new vI;return this._s(e,n,d).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,d,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(Eo()<=Fe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),te.resolve()):(Eo()<=Fe.DEBUG&&ge("QueryEngine","Query:",To(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(Eo()<=Fe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(n))):te.resolve())}rs(e,n){if(O0(n))return te.resolve(null);let s=Li(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=sp(n,null,"F"),s=Li(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=Ge(...u);return this.ns.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,d,p.readTime)?this.rs(e,sp(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return O0(n)||o.isEqual(De.min())?te.resolve(null):this.ns.getDocuments(e,s).next(u=>{const d=this.cs(n,u);return this.ls(n,d,s,o)?te.resolve(null):(Eo()<=Fe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(n)),this.hs(e,d,n,H2(o,pu)).next(m=>m))})}cs(e,n){let s=new zt(HT(e));return n.forEach((o,u)=>{id(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return Eo()<=Fe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",To(n)),this.ns.getDocumentsMatchingQuery(e,n,ws.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",EI=3e8;class TI{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new Et(Ue),this.Is=new Sa(u=>Dp(u),Op),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function bI(i,e,n,s){return new TI(i,e,n,s)}async function mb(i,e){const n=Me(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let p=Ge();for(const g of o){d.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:d,addedBatchIds:m}))})})}function wI(i,e){const n=Me(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const w=g.batch,I=w.keys();let O=te.resolve();return I.forEach(M=>{O=O.next(()=>E.getEntry(p,M)).next(Q=>{const H=g.docVersions.get(M);nt(H!==null),Q.version.compareTo(H)<0&&(w.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),E.addEntry(Q)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Ge();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function pb(i){const e=Me(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function SI(i,e){const n=Me(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((E,w)=>{const I=o.get(w);if(!I)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,w).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,w)));let O=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?O=O.withResumeToken(nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),o=o.insert(w,O),function(Q,H,Y){return Q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=EI?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(I,O,E)&&m.push(n.Hr.updateTargetData(u,O))});let p=Ir(),g=Ge();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(AI(u,d,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(De.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(w=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return te.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function AI(i,e,n){let s=Ge(),o=Ge();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let d=Ir();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):ge(Bp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:d,fs:o}})}function RI(i,e){const n=Me(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Cp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function II(i,e){const n=Me(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,te.resolve(o)):n.Hr.allocateTargetId(s).next(d=>(o=new gs(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function cp(i,e,n){const s=Me(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!jo(d))throw d;ge(Bp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function G0(i,e,n){const s=Me(i);let o=De.min(),u=Ge();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,g,E){const w=Me(p),I=w.Is.get(E);return I!==void 0?te.resolve(w.Ts.get(I)):w.Hr.getTargetData(g,E)}(s,d,Li(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(d,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(d,e,n?o:De.min(),n?u:Ge())).next(m=>(CI(s,pR(e),m),{documents:m,gs:u})))}function CI(i,e,n){let s=i.Es.get(e)||De.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class $0{constructor(){this.activeTargetIds=TR()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xI{constructor(){this.ho=new $0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new $0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="ConnectivityMonitor";class Q0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(K0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(K0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function hp(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",DI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OI{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===xh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const d=hp(),m=this.bo(e,n.toUriEncodedString());ge(Vm,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(ge(Vm,`Received RPC '${e}' ${d}: `,g),g),g=>{throw xo(Vm,`RPC '${e}' ${d} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,d){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=DI[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class VI extends OI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=hp();return new Promise((d,m)=>{const p=new yT;p.setWithCredentials(!0),p.listenOnce(vT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case mh.NO_ERROR:const E=p.getResponseJson();ge(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case mh.TIMEOUT:ge(an,`RPC '${e}' ${u} timed out`),m(new pe(J.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const w=p.getStatus();if(ge(an,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I==null?void 0:I.error;if(O&&O.status&&O.message){const M=function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN}(O.status);m(new pe(M,O.message))}else m(new pe(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new pe(J.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{ge(an,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);ge(an,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=hp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=TT(),m=ET(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ge(an,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=d.createWebChannel(E,p);let I=!1,O=!1;const M=new MI({Fo:H=>{O?ge(an,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(I||(ge(an,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),ge(an,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Mo:()=>w.close()}),Q=(H,Y,ae)=>{H.listen(Y,ne=>{try{ae(ne)}catch(me){setTimeout(()=>{throw me},0)}})};return Q(w,tu.EventType.OPEN,()=>{O||(ge(an,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),Q(w,tu.EventType.CLOSE,()=>{O||(O=!0,ge(an,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),Q(w,tu.EventType.ERROR,H=>{O||(O=!0,xo(an,`RPC '${e}' stream ${o} transport errored:`,H),M.Uo(new pe(J.UNAVAILABLE,"The operation could not be completed")))}),Q(w,tu.EventType.MESSAGE,H=>{var Y;if(!O){const ae=H.data[0];nt(!!ae);const ne=ae,me=(ne==null?void 0:ne.error)||((Y=ne[0])===null||Y===void 0?void 0:Y.error);if(me){ge(an,`RPC '${e}' stream ${o} received error:`,me);const ye=me.status;let Re=function(R){const N=Ot[R];if(N!==void 0)return nb(N)}(ye),P=me.message;Re===void 0&&(Re=J.INTERNAL,P="Unknown error status: "+ye+" with message "+me.message),O=!0,M.Uo(new pe(Re,P)),w.close()}else ge(an,`RPC '${e}' stream ${o} received:`,ae),M.Ko(ae)}}),Q(m,_T.STAT_EVENT,H=>{H.stat===Zm.PROXY?ge(an,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Zm.NOPROXY&&ge(an,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i){return new UR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="PersistentStream";class yb{constructor(e,n,s,o,u,d,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new gb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new pe(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(Y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ge(Y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kI extends yb{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=BR(this.serializer,e),s=function(u){if(!("targetChange"in u))return De.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Ui(d.readTime):De.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=up(this.serializer),n.addTarget=function(u,d){let m;const p=d.target;if(m=ip(p)?{documents:FR(u,p)}:{query:GR(u,p).ht},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=sb(u,d.resumeToken);const g=ap(u,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(De.min())>0){m.readTime=Oh(u,d.snapshotVersion.toTimestamp());const g=ap(u,d.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=KR(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=up(this.serializer),n.removeTarget=e,this.I_(n)}}class PI extends yb{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=HR(e.writeResults,e.commitTime),s=Ui(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=up(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>qR(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{}class UI extends LI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new pe(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.So(e,op(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(J.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Co(e,op(n,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(J.UNKNOWN,d.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class jI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Rr(n),this.N_=!1):ge("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="RemoteStore";class zI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(d=>{s.enqueueAndForget(async()=>{Aa(this)&&(ge(ga,"Restarting streams for network reachability change."),await async function(p){const g=Me(p);g.W_.add(4),await Nu(g),g.j_.set("Unknown"),g.W_.delete(4),await ld(g)}(this))})}),this.j_=new jI(s,o)}}async function ld(i){if(Aa(i))for(const e of i.G_)await e(!0)}async function Nu(i){for(const e of i.G_)await e(!1)}function vb(i,e){const n=Me(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Gp(n)?Fp(n):zo(n).c_()&&Hp(n,e))}function qp(i,e){const n=Me(i),s=zo(n);n.K_.delete(e),s.c_()&&_b(n,e),n.K_.size===0&&(s.c_()?s.P_():Aa(n)&&n.j_.set("Unknown"))}function Hp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(i).y_(e)}function _b(i,e){i.H_.Ne(e),zo(i).w_(e)}function Fp(i){i.H_=new VR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),zo(i).start(),i.j_.B_()}function Gp(i){return Aa(i)&&!zo(i).u_()&&i.K_.size>0}function Aa(i){return Me(i).W_.size===0}function Eb(i){i.H_=void 0}async function BI(i){i.j_.set("Online")}async function qI(i){i.K_.forEach((e,n)=>{Hp(i,e)})}async function HI(i,e){Eb(i),Gp(i)?(i.j_.q_(e),Fp(i)):i.j_.set("Unknown")}async function FI(i,e,n){if(i.j_.set("Online"),e instanceof rb&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){ge(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(i,s)}else if(e instanceof vh?i.H_.We(e):e instanceof ib?i.H_.Ze(e):i.H_.je(e),!n.isEqual(De.min()))try{const s=await pb(i.localStore);n.compareTo(s)>=0&&await function(u,d){const m=u.H_.ot(d);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.K_.get(g);E&&u.K_.set(g,E.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,g)=>{const E=u.K_.get(p);if(!E)return;u.K_.set(p,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),_b(u,p);const w=new gs(E.target,p,g,E.sequenceNumber);Hp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){ge(ga,"Failed to raise snapshot:",s),await Vh(i,s)}}async function Vh(i,e,n){if(!jo(e))throw e;i.W_.add(1),await Nu(i),i.j_.set("Offline"),n||(n=()=>pb(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ge(ga,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await ld(i)})}function Tb(i,e){return e().catch(n=>Vh(i,n,e))}async function ud(i){const e=Me(i),n=Is(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:Cp;for(;GI(e);)try{const o=await RI(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,$I(e,o)}catch(o){await Vh(e,o)}bb(e)&&wb(e)}function GI(i){return Aa(i)&&i.U_.length<10}function $I(i,e){i.U_.push(e);const n=Is(i);n.c_()&&n.S_&&n.b_(e.mutations)}function bb(i){return Aa(i)&&!Is(i).u_()&&i.U_.length>0}function wb(i){Is(i).start()}async function KI(i){Is(i).C_()}async function QI(i){const e=Is(i);for(const n of i.U_)e.b_(n.mutations)}async function YI(i,e,n){const s=i.U_.shift(),o=kp.from(s,e,n);await Tb(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await ud(i)}async function WI(i,e){e&&Is(i).S_&&await async function(s,o){if(function(d){return OR(d)&&d!==J.ABORTED}(o.code)){const u=s.U_.shift();Is(s).h_(),await Tb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ud(s)}}(i,e),bb(i)&&wb(i)}async function W0(i,e){const n=Me(i);n.asyncQueue.verifyOperationInProgress(),ge(ga,"RemoteStore received new credentials");const s=Aa(n);n.W_.add(3),await Nu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await ld(n)}async function XI(i,e){const n=Me(i);e?(n.W_.delete(2),await ld(n)):e||(n.W_.add(2),await Nu(n),n.j_.set("Unknown"))}function zo(i){return i.J_||(i.J_=function(n,s,o){const u=Me(n);return u.M_(),new kI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:BI.bind(null,i),No:qI.bind(null,i),Lo:HI.bind(null,i),p_:FI.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Gp(i)?Fp(i):i.j_.set("Unknown")):(await i.J_.stop(),Eb(i))})),i.J_}function Is(i){return i.Y_||(i.Y_=function(n,s,o){const u=Me(n);return u.M_(),new PI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:KI.bind(null,i),Lo:WI.bind(null,i),D_:QI.bind(null,i),v_:YI.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await ud(i)):(await i.Y_.stop(),i.U_.length>0&&(ge(ga,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new $p(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(i,e){if(Rr("AsyncQueue",`${e}: ${i}`),jo(i))return new pe(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=nu(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.Z_=new Et(be.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):xe():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Vo{constructor(e,n,s,o,u,d,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Vo(e,n,Ao.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class JI{constructor(){this.queries=Z0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=Z0(),u.forEach((d,m)=>{for(const p of m.ta)p.onError(s)})})(this,new pe(J.ABORTED,"Firestore shutting down"))}}function Z0(){return new Sa(i=>qT(i),nd)}async function Qp(i,e){const n=Me(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new ZI,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Kp(d,`Initialization of query '${To(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Wp(n)}async function Yp(i,e){const n=Me(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.ta.indexOf(e);d>=0&&(u.ta.splice(d,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function eC(i,e){const n=Me(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.ta)m.oa(o)&&(s=!0);d.ea=o}}s&&Wp(n)}function tC(i,e,n){const s=Me(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Wp(i){i.ia.forEach(e=>{e.next()})}var dp,J0;(J0=dp||(dp={}))._a="default",J0.Cache="cache";class Xp{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.key=e}}class Ab{constructor(e){this.key=e}}class nC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ge(),this.mutatedKeys=Ge(),this.ya=HT(e),this.wa=new Ao(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new X0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,w)=>{const I=o.get(E),O=id(this.query,w)?w:null,M=!!I&&this.mutatedKeys.has(I.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let H=!1;I&&O?I.data.isEqual(O.data)?M!==Q&&(s.track({type:3,doc:O}),H=!0):this.va(I,O)||(s.track({type:2,doc:O}),H=!0,(p&&this.ya(O,p)>0||g&&this.ya(O,g)<0)&&(m=!0)):!I&&O?(s.track({type:0,doc:O}),H=!0):I&&!O&&(s.track({type:1,doc:I}),H=!0,(p||g)&&(m=!0)),H&&(O?(d=d.add(O),u=Q?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:d,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const d=e.Da.X_();d.sort((E,w)=>function(O,M){const Q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return Q(O)-Q(M)}(E.type,w.type)||this.ya(E.doc,w.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,d.length!==0||g?{snapshot:new Vo(this.query,e.wa,u,d,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new X0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ge(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new Ab(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new Sb(s))}),n}Oa(e){this.fa=e.gs,this.pa=Ge();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Vo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Zp="SyncEngine";class iC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class rC{constructor(e){this.key=e,this.Ba=!1}}class sC{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.La={},this.ka=new Sa(m=>qT(m),nd),this.qa=new Map,this.Qa=new Set,this.$a=new Et(be.comparator),this.Ua=new Map,this.Ka=new Up,this.Wa={},this.Ga=new Map,this.za=Mo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function aC(i,e,n=!0){const s=Db(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Rb(s,e,n,!0),o}async function oC(i,e){const n=Db(i);await Rb(n,e,!0,!1)}async function Rb(i,e,n,s){const o=await II(i.localStore,Li(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await lC(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&vb(i.remoteStore,o),m}async function lC(i,e,n,s,o){i.Ha=(w,I,O)=>async function(Q,H,Y,ae){let ne=H.view.ba(Y);ne.ls&&(ne=await G0(Q.localStore,H.query,!1).then(({documents:P})=>H.view.ba(P,ne)));const me=ae&&ae.targetChanges.get(H.targetId),ye=ae&&ae.targetMismatches.get(H.targetId)!=null,Re=H.view.applyChanges(ne,Q.isPrimaryClient,me,ye);return tE(Q,H.targetId,Re.Ma),Re.snapshot}(i,w,I,O);const u=await G0(i.localStore,e,!0),d=new nC(e,u.gs),m=d.ba(u.documents),p=xu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=d.applyChanges(m,i.isPrimaryClient,p);tE(i,n,g.Ma);const E=new iC(e,n,d);return i.ka.set(e,E),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function uC(i,e,n){const s=Me(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(d=>!nd(d,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await cp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&qp(s.remoteStore,o.targetId),fp(s,o.targetId)}).catch(Uo)):(fp(s,o.targetId),await cp(s.localStore,o.targetId,!0))}async function cC(i,e){const n=Me(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function hC(i,e,n){const s=vC(i);try{const o=await function(d,m){const p=Me(d),g=jt.now(),E=m.reduce((O,M)=>O.add(M.key),Ge());let w,I;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let M=Ir(),Q=Ge();return p.ds.getEntries(O,E).next(H=>{M=H,M.forEach((Y,ae)=>{ae.isValidDocument()||(Q=Q.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,M)).next(H=>{w=H;const Y=[];for(const ae of m){const ne=IR(ae,w.get(ae.key).overlayedDocument);ne!=null&&Y.push(new Ns(ae.key,ne,VT(ne.value.mapValue),ti.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,Y,m)}).next(H=>{I=H;const Y=H.applyToLocalDocumentSet(w,Q);return p.documentOverlayCache.saveOverlays(O,H.batchId,Y)})}).then(()=>({batchId:I.batchId,changes:GT(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let g=d.Wa[d.currentUser.toKey()];g||(g=new Et(Ue)),g=g.insert(m,p),d.Wa[d.currentUser.toKey()]=g}(s,o.batchId,n),await Du(s,o.changes),await ud(s.remoteStore)}catch(o){const u=Kp(o,"Failed to persist write");n.reject(u)}}async function Ib(i,e){const n=Me(i);try{const s=await SI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Ua.get(u);d&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Ba=!0:o.modifiedDocuments.size>0?nt(d.Ba):o.removedDocuments.size>0&&(nt(d.Ba),d.Ba=!1))}),await Du(n,s,e)}catch(s){await Uo(s)}}function eE(i,e,n){const s=Me(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,d)=>{const m=d.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=Me(d);p.onlineState=m;let g=!1;p.queries.forEach((E,w)=>{for(const I of w.ta)I.sa(m)&&(g=!0)}),g&&Wp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function dC(i,e,n){const s=Me(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let d=new Et(be.comparator);d=d.insert(u,ln.newNoDocument(u,De.min()));const m=Ge().add(u),p=new ad(De.min(),new Map,new Et(Ue),d,m);await Ib(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),Jp(s)}else await cp(s.localStore,e,!1).then(()=>fp(s,e,n)).catch(Uo)}async function fC(i,e){const n=Me(i),s=e.batch.batchId;try{const o=await wI(n.localStore,e);xb(n,s,null),Cb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Du(n,o)}catch(o){await Uo(o)}}async function mC(i,e,n){const s=Me(i);try{const o=await function(d,m){const p=Me(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(w=>(nt(w!==null),E=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);xb(s,e,n),Cb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Du(s,o)}catch(o){await Uo(o)}}function Cb(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function xb(i,e,n){const s=Me(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function fp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Nb(i,s)})}function Nb(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(qp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Jp(i))}function tE(i,e,n){for(const s of n)s instanceof Sb?(i.Ka.addReference(s.key,e),pC(i,s)):s instanceof Ab?(ge(Zp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Nb(i,s.key)):xe()}function pC(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(ge(Zp,"New document in limbo: "+n),i.Qa.add(s),Jp(i))}function Jp(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new be(mt.fromString(e)),s=i.za.next();i.Ua.set(s,new rC(n)),i.$a=i.$a.insert(n,s),vb(i.remoteStore,new gs(Li(td(n.path)),s,"TargetPurposeLimboResolution",Zh.ae))}}async function Du(i,e,n){const s=Me(i),o=[],u=[],d=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{d.push(s.Ha(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=zp.Yi(p.targetId,g);u.push(w)}}))}),await Promise.all(d),s.La.p_(o),await async function(p,g){const E=Me(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>te.forEach(g,I=>te.forEach(I.Hi,O=>E.persistence.referenceDelegate.addReference(w,I.targetId,O)).next(()=>te.forEach(I.Ji,O=>E.persistence.referenceDelegate.removeReference(w,I.targetId,O)))))}catch(w){if(!jo(w))throw w;ge(Bp,"Failed to update sequence numbers: "+w)}for(const w of g){const I=w.targetId;if(!w.fromCache){const O=E.Ts.get(I),M=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(M);E.Ts=E.Ts.insert(I,Q)}}}(s.localStore,u))}async function gC(i,e){const n=Me(i);if(!n.currentUser.isEqual(e)){ge(Zp,"User change. New user:",e.toKey());const s=await mb(n.localStore,e);n.currentUser=e,function(u,d){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new pe(J.CANCELLED,d))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Du(n,s.Rs)}}function yC(i,e){const n=Me(i),s=n.Ua.get(e);if(s&&s.Ba)return Ge().add(s.key);{let o=Ge();const u=n.qa.get(e);if(!u)return o;for(const d of u){const m=n.ka.get(d);o=o.unionWith(m.view.Sa)}return o}}function Db(i){const e=Me(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ib.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dC.bind(null,e),e.La.p_=eC.bind(null,e.eventManager),e.La.Ja=tC.bind(null,e.eventManager),e}function vC(i){const e=Me(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mC.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return bI(this.persistence,new _I,e.initialUser,this.serializer)}Xa(e){return new fb(jp.ri,this.serializer)}Za(e){return new xI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class _C extends kh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){nt(this.persistence.referenceDelegate instanceof Mh);const s=this.persistence.referenceDelegate.garbageCollector;return new rI(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new fb(s=>Mh.ri(s,n),this.serializer)}}class mp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>eE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gC.bind(null,this.syncEngine),await XI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JI}()}createDatastore(e){const n=od(e.databaseInfo.databaseId),s=function(u){return new VI(u)}(e.databaseInfo);return function(u,d,m,p){return new UI(u,d,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,m){return new zI(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>eE(this.syncEngine,n,0),function(){return Q0.D()?new Q0:new NI}())}createSyncEngine(e,n){return function(o,u,d,m,p,g,E){const w=new sC(o,u,d,m,p,g);return E&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Me(o);ge(ga,"RemoteStore shutting down."),u.W_.add(5),await Nu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mp.provider={build:()=>new mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class EC{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=ST.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{ge(Cs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ge(Cs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Pm(i,e){i.asyncQueue.verifyOperationInProgress(),ge(Cs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await mb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function nE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await TC(i);ge(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>W0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>W0(e.remoteStore,o)),i._onlineComponents=e}async function TC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ge(Cs,"Using user provided OfflineComponentProvider");try{await Pm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await Pm(i,new kh)}}else ge(Cs,"Using default OfflineComponentProvider"),await Pm(i,new _C(void 0));return i._offlineComponents}async function Ob(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ge(Cs,"Using user provided OnlineComponentProvider"),await nE(i,i._uninitializedComponentsProvider._online)):(ge(Cs,"Using default OnlineComponentProvider"),await nE(i,new mp))),i._onlineComponents}function bC(i){return Ob(i).then(e=>e.syncEngine)}async function Ph(i){const e=await Ob(i),n=e.eventManager;return n.onListen=aC.bind(null,e.syncEngine),n.onUnlisten=uC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cC.bind(null,e.syncEngine),n}function wC(i,e,n={}){const s=new br;return i.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const E=new eg({next:I=>{E.su(),d.enqueueAndForget(()=>Yp(u,w));const O=I.docs.has(m);!O&&I.fromCache?g.reject(new pe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&p&&p.source==="server"?g.reject(new pe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Xp(td(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Qp(u,w)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}function SC(i,e,n={}){const s=new br;return i.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const E=new eg({next:I=>{E.su(),d.enqueueAndForget(()=>Yp(u,w)),I.fromCache&&p.source==="server"?g.reject(new pe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Xp(m,E,{includeMetadataChanges:!0,Ta:!0});return Qp(u,w)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(i,e,n){if(!n)throw new pe(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function AC(i,e,n,s){if(e===!0&&s===!0)throw new pe(J.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function rE(i){if(!be.isDocumentKey(i))throw new pe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function sE(i){if(be.isDocumentKey(i))throw new pe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function cd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":xe()}function vn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cd(i);throw new pe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firestore.googleapis.com",aE=!0;class oE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vb,this.ssl=aE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:aE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=db;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nI)throw new pe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new V2;switch(s.type){case"firstParty":return new U2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=iE.get(n);s&&(ge("ComponentProvider","Removing Datastore"),iE.delete(n),s.terminate())}(this),Promise.resolve()}}function RC(i,e,n,s={}){var o;const u=(i=vn(i,Ou))._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==Vb&&u.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!bs(p,d)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=on.MOCK_USER;else{g=a1(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new pe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(w)}i._authCredentials=new k2(new bT(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Dr(this.firestore,e,this._query)}}class cn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Ts extends Dr{constructor(e,n,s){super(e,n,td(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new be(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function un(i,e,...n){if(i=St(i),tg("collection","path",e),i instanceof Ou){const s=mt.fromString(e,...n);return sE(s),new Ts(i,null,s)}{if(!(i instanceof cn||i instanceof Ts))throw new pe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(mt.fromString(e,...n));return sE(s),new Ts(i.firestore,null,s)}}function Lm(i,e){if(i=vn(i,Ou),tg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dr(i,null,function(s){return new wa(mt.emptyPath(),s)}(e))}function Ut(i,e,...n){if(i=St(i),arguments.length===1&&(e=ST.newId()),tg("doc","path",e),i instanceof Ou){const s=mt.fromString(e,...n);return rE(s),new cn(i,null,new be(s))}{if(!(i instanceof cn||i instanceof Ts))throw new pe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(mt.fromString(e,...n));return rE(s),new cn(i.firestore,i instanceof Ts?i.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="AsyncQueue";class uE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new gb(this,"async_queue_retry"),this.Su=()=>{const s=km();s&&ge(lE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new br;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!jo(e))throw e;ge(lE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw Rr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&xe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function cE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class Cr extends Ou{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new uE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uE(e),this._firestoreClient=void 0,await e}}}function IC(i,e){const n=typeof i=="object"?i:Rp(),s=typeof i=="string"?i:xh,o=ba(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=r1("firestore");u&&RC(o,...u)}return o}function hd(i){if(i._terminated)throw new pe(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||CC(i),i._firestoreClient}function CC(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,E){return new J2(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Mb(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new EC(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ko(nn.fromBase64String(e))}catch(n){throw new pe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ko(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=/^__.*__$/;class NC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class kb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class rg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Lh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Pb(this.Lu)&&xC.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class DC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||od(e)}ju(e,n,s,o=!1){return new rg({Lu:e,methodName:n,zu:s,path:tn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(i){const e=i._freezeSettings(),n=od(i._databaseId);return new DC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Lb(i,e,n,s,o,u={}){const d=i.ju(u.merge||u.mergeFields?2:0,e,n,o);og("Data must be an object, but it was:",d,s);const m=Ub(s,d);let p,g;if(u.merge)p=new Un(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const I=pp(e,w,n);if(!d.contains(I))throw new pe(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);zb(E,I)||E.push(I)}p=new Un(E),g=d.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=d.fieldTransforms;return new NC(new Rn(m),p,g)}class md extends Mu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class sg extends Mu{_toFieldTransform(e){return new JT(e.path,new Eu)}isEqual(e){return e instanceof sg}}class ag extends Mu{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new wu(e.serializer,QT(e.serializer,this.Ju));return new JT(e.path,n)}isEqual(e){return e instanceof ag&&this.Ju===e.Ju}}function OC(i,e,n,s){const o=i.ju(1,e,n);og("Data must be an object, but it was:",o,s);const u=[],d=Rn.empty();xs(s,(p,g)=>{const E=lg(e,p,n);g=St(g);const w=o.Uu(E);if(g instanceof md)u.push(E);else{const I=Vu(g,w);I!=null&&(u.push(E),d.set(E,I))}});const m=new Un(u);return new kb(d,m,o.fieldTransforms)}function MC(i,e,n,s,o,u){const d=i.ju(1,e,n),m=[pp(e,s,n)],p=[o];if(u.length%2!=0)throw new pe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(pp(e,u[I])),p.push(u[I+1]);const g=[],E=Rn.empty();for(let I=m.length-1;I>=0;--I)if(!zb(g,m[I])){const O=m[I];let M=p[I];M=St(M);const Q=d.Uu(O);if(M instanceof md)g.push(O);else{const H=Vu(M,Q);H!=null&&(g.push(O),E.set(O,H))}}const w=new Un(g);return new kb(E,w,d.fieldTransforms)}function VC(i,e,n,s=!1){return Vu(n,i.ju(s?4:3,e))}function Vu(i,e){if(jb(i=St(i)))return og("Unsupported field value:",e,i),Ub(i,e);if(i instanceof Mu)return function(s,o){if(!Pb(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let p=Vu(m,o.Ku(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return QT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=jt.fromDate(s);return{timestampValue:Oh(o.serializer,u)}}if(s instanceof jt){const u=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(o.serializer,u)}}if(s instanceof ng)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ko)return{bytesValue:sb(o.serializer,s._byteString)};if(s instanceof cn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Wu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ig)return function(d,m){return{mapValue:{fields:{[OT]:{stringValue:MT},[Nh]:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return Mp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${cd(s)}`)}(i,e)}function Ub(i,e){const n={};return RT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(i,(s,o)=>{const u=Vu(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function jb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof jt||i instanceof ng||i instanceof ko||i instanceof cn||i instanceof Mu||i instanceof ig)}function og(i,e,n){if(!jb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=cd(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function pp(i,e,n){if((e=St(e))instanceof dd)return e._internalPath;if(typeof e=="string")return lg(i,e);throw Lh("Field path arguments must be of type string or ",i,!1,void 0,n)}const kC=new RegExp("[~\\*/\\[\\]]");function lg(i,e,n){if(e.search(kC)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new dd(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Lh(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new pe(J.INVALID_ARGUMENT,m+i+p)}function zb(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PC extends Bb{data(){return super.data()}}function pd(i,e){return typeof e=="string"?lg(i,e):e instanceof dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new pe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class Hb extends ug{}function ru(i,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),function(u){const d=u.filter(p=>p instanceof cg).length,m=u.filter(p=>p instanceof gd).length;if(d>1||d>0&&m>0)throw new pe(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class gd extends Hb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new gd(e,n,s)}_apply(e){const n=this._parse(e);return Gb(e._query,n),new Dr(e.firestore,e.converter,rp(e._query,n))}_parse(e){const n=fd(e.firestore);return function(u,d,m,p,g,E,w){let I;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new pe(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){dE(w,E);const M=[];for(const Q of w)M.push(hE(p,u,Q));I={arrayValue:{values:M}}}else I=hE(p,u,w)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||dE(w,E),I=VC(m,d,w,E==="in"||E==="not-in");return Mt.create(g,E,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hh(i,e,n){const s=e,o=pd("where",i);return gd._create(o,s,n)}class cg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:hi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)Gb(d,p),d=rp(d,p)}(e._query,n),new Dr(e.firestore,e.converter,rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends Hb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=function(o,u,d){if(o.startAt!==null)throw new pe(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(u,d)}(e._query,this._field,this._direction);return new Dr(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new wa(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Fb(i,e="asc"){const n=e,s=pd("orderBy",i);return hg._create(s,n)}function hE(i,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new pe(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(e)&&n.indexOf("/")!==-1)throw new pe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(mt.fromString(n));if(!be.isDocumentKey(s))throw new pe(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return R0(i,new be(s))}if(n instanceof cn)return R0(i,n._key);throw new pe(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(n)}.`)}function dE(i,e){if(!Array.isArray(i)||i.length===0)throw new pe(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gb(i,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new pe(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LC{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return xs(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Nh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>Ct(d.doubleValue));return new ig(u)}convertGeoPoint(e){return new ng(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ed(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=mt.fromString(e);nt(hb(s));const o=new yu(s.get(1),s.get(3)),u=new be(s.popFirst(5));return o.isEqual(n)||Rr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kb extends Bb{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(pd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class _h extends Kb{data(e={}){return super.data(e)}}class Qb{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new su(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new _h(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),E=d.indexOf(m.doc.key)),{type:UC(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function UC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(i){i=vn(i,cn);const e=vn(i.firestore,Cr);return wC(hd(e),i._key).then(n=>Yb(e,i,n))}class dg extends LC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function An(i){i=vn(i,Dr);const e=vn(i.firestore,Cr),n=hd(e),s=new dg(e);return qb(i._query),SC(n,i._query).then(o=>new Qb(e,s,i,o))}function Um(i,e,n){i=vn(i,cn);const s=vn(i.firestore,Cr),o=$b(i.converter,e,n);return yd(s,[Lb(fd(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ti.none())])}function ma(i,e,n,...s){i=vn(i,cn);const o=vn(i.firestore,Cr),u=fd(o);let d;return d=typeof(e=St(e))=="string"||e instanceof dd?MC(u,"updateDoc",i._key,e,n,s):OC(u,"updateDoc",i._key,e),yd(o,[d.toMutation(i._key,ti.exists(!0))])}function hu(i){return yd(vn(i.firestore,Cr),[new Vp(i._key,ti.none())])}function Uh(i,e){const n=vn(i.firestore,Cr),s=Ut(i),o=$b(i.converter,e);return yd(n,[Lb(fd(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ti.exists(!1))]).then(()=>s)}function jC(i,...e){var n,s,o;i=St(i);let u={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||cE(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(cE(e[d])){const w=e[d];e[d]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[d+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[d+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,E;if(i instanceof cn)g=vn(i.firestore,Cr),E=td(i._key.path),p={next:w=>{e[d]&&e[d](Yb(g,i,w))},error:e[d+1],complete:e[d+2]};else{const w=vn(i,Dr);g=vn(w.firestore,Cr),E=w._query;const I=new dg(g);p={next:O=>{e[d]&&e[d](new Qb(g,I,w,O))},error:e[d+1],complete:e[d+2]},qb(i._query)}return function(I,O,M,Q){const H=new eg(Q),Y=new Xp(O,H,M);return I.asyncQueue.enqueueAndForget(async()=>Qp(await Ph(I),Y)),()=>{H.su(),I.asyncQueue.enqueueAndForget(async()=>Yp(await Ph(I),Y))}}(hd(g),E,m,p)}function yd(i,e){return function(s,o){const u=new br;return s.asyncQueue.enqueueAndForget(async()=>hC(await bC(s),o,u)),u.promise}(hd(i),e)}function Yb(i,e,n){const s=n.docs.get(e._key),o=new dg(i);return new Kb(i,o,e._key,s,new su(n.hasPendingWrites,n.fromCache),e.converter)}function gp(){return new sg("serverTimestamp")}function vo(i){return new ag("increment",i)}(function(e,n=!0){(function(o){Lo=o})(Po),Bi(new ci("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Cr(new P2(s.getProvider("auth-internal")),new j2(d,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(g.options.projectId,E)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ei(m0,p0,e),ei(m0,p0,"esm2017")})();const Wb="@firebase/installations",fg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=1e4,Zb=`w:${fg}`,Jb="FIS_v2",zC="https://firebaseinstallations.googleapis.com/v1",BC=60*60*1e3,qC="installations",HC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ya=new Ta(qC,HC,FC);function ew(i){return i instanceof mi&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw({projectId:i}){return`${zC}/projects/${i}/installations`}function nw(i){return{token:i.token,requestStatus:2,expiresIn:$C(i.expiresIn),creationTime:Date.now()}}async function iw(i,e){const s=(await e.json()).error;return ya.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function rw({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function GC(i,{refreshToken:e}){const n=rw(i);return n.append("Authorization",KC(e)),n}async function sw(i){const e=await i();return e.status>=500&&e.status<600?i():e}function $C(i){return Number(i.replace("s","000"))}function KC(i){return`${Jb} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=tw(i),o=rw(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={fid:n,authVersion:Jb,appId:i.appId,sdkVersion:Zb},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await sw(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:nw(g.authToken)}}else throw await iw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^[cdef][\w-]{21}$/,yp="";function XC(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=ZC(i);return WC.test(n)?n:yp}catch{return yp}}function ZC(i){return YC(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=new Map;function lw(i,e){const n=vd(i);uw(n,e),JC(n,e)}function uw(i,e){const n=ow.get(i);if(n)for(const s of n)s(e)}function JC(i,e){const n=ex();n&&n.postMessage({key:i,fid:e}),tx()}let fa=null;function ex(){return!fa&&"BroadcastChannel"in self&&(fa=new BroadcastChannel("[Firebase] FID Change"),fa.onmessage=i=>{uw(i.data.key,i.data.fid)}),fa}function tx(){ow.size===0&&fa&&(fa.close(),fa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="firebase-installations-database",ix=1,va="firebase-installations-store";let jm=null;function mg(){return jm||(jm=dT(nx,ix,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(va)}}})),jm}async function jh(i,e){const n=vd(i),o=(await mg()).transaction(va,"readwrite"),u=o.objectStore(va),d=await u.get(n);return await u.put(e,n),await o.done,(!d||d.fid!==e.fid)&&lw(i,e.fid),e}async function cw(i){const e=vd(i),s=(await mg()).transaction(va,"readwrite");await s.objectStore(va).delete(e),await s.done}async function _d(i,e){const n=vd(i),o=(await mg()).transaction(va,"readwrite"),u=o.objectStore(va),d=await u.get(n),m=e(d);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!d||d.fid!==m.fid)&&lw(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pg(i){let e;const n=await _d(i.appConfig,s=>{const o=rx(s),u=sx(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===yp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function rx(i){const e=i||{fid:XC(),registrationStatus:0};return hw(e)}function sx(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ya.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=ax(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ox(i)}:{installationEntry:e}}async function ax(i,e){try{const n=await QC(i,e);return jh(i.appConfig,n)}catch(n){throw ew(n)&&n.customData.serverCode===409?await cw(i.appConfig):await jh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ox(i){let e=await fE(i.appConfig);for(;e.registrationStatus===1;)await aw(100),e=await fE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await pg(i);return s||n}return e}function fE(i){return _d(i,e=>{if(!e)throw ya.create("installation-not-found");return hw(e)})}function hw(i){return lx(i)?{fid:i.fid,registrationStatus:0}:i}function lx(i){return i.registrationStatus===1&&i.registrationTime+Xb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux({appConfig:i,heartbeatServiceProvider:e},n){const s=cx(i,n),o=GC(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={installation:{sdkVersion:Zb,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await sw(()=>fetch(s,m));if(p.ok){const g=await p.json();return nw(g)}else throw await iw("Generate Auth Token",p)}function cx(i,{fid:e}){return`${tw(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(i,e=!1){let n;const s=await _d(i.appConfig,u=>{if(!dw(u))throw ya.create("not-registered");const d=u.authToken;if(!e&&fx(d))return u;if(d.requestStatus===1)return n=hx(i,e),u;{if(!navigator.onLine)throw ya.create("app-offline");const m=px(u);return n=dx(i,m),m}});return n?await n:s.authToken}async function hx(i,e){let n=await mE(i.appConfig);for(;n.authToken.requestStatus===1;)await aw(100),n=await mE(i.appConfig);const s=n.authToken;return s.requestStatus===0?gg(i,e):s}function mE(i){return _d(i,e=>{if(!dw(e))throw ya.create("not-registered");const n=e.authToken;return gx(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function dx(i,e){try{const n=await ux(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await jh(i.appConfig,s),n}catch(n){if(ew(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await cw(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jh(i.appConfig,s)}throw n}}function dw(i){return i!==void 0&&i.registrationStatus===2}function fx(i){return i.requestStatus===2&&!mx(i)}function mx(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+BC}function px(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function gx(i){return i.requestStatus===1&&i.requestTime+Xb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(i){const e=i,{installationEntry:n,registrationPromise:s}=await pg(e);return s?s.catch(console.error):gg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(i,e=!1){const n=i;return await _x(n),(await gg(n,e)).token}async function _x(i){const{registrationPromise:e}=await pg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(i){if(!i||!i.options)throw zm("App Configuration");if(!i.name)throw zm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw zm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function zm(i){return ya.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="installations",Tx="installations-internal",bx=i=>{const e=i.getProvider("app").getImmediate(),n=Ex(e),s=ba(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},wx=i=>{const e=i.getProvider("app").getImmediate(),n=ba(e,fw).getImmediate();return{getId:()=>yx(n),getToken:o=>vx(n,o)}};function Sx(){Bi(new ci(fw,bx,"PUBLIC")),Bi(new ci(Tx,wx,"PRIVATE"))}Sx();ei(Wb,fg);ei(Wb,fg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="analytics",Ax="firebase_id",Rx="origin",Ix=60*1e3,Cx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jn=new Ta("analytics","Analytics",xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(i){if(!i.startsWith(yg)){const e=jn.create("invalid-gtag-resource",{gtagURL:i});return In.warn(e.message),""}return i}function mw(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function Dx(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function Ox(i,e){const n=Dx("firebase-js-sdk-policy",{createScriptURL:Nx}),s=document.createElement("script"),o=`${yg}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function Mx(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function Vx(i,e,n,s,o,u){const d=s[o];try{if(d)await e[d];else{const p=(await mw(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){In.error(m)}i("config",o,u)}async function kx(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await mw(n);for(const p of d){const g=m.find(w=>w.measurementId===p),E=g&&e[g.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){In.error(u)}}function Px(i,e,n,s){async function o(u,...d){try{if(u==="event"){const[m,p]=d;await kx(i,e,n,m,p)}else if(u==="config"){const[m,p]=d;await Vx(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=d;i("consent",m,p)}else if(u==="get"){const[m,p,g]=d;i("get",m,p,g)}else if(u==="set"){const[m]=d;i("set",m)}else i(u,...d)}catch(m){In.error(m)}}return o}function Lx(i,e,n,s,o){let u=function(...d){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=Px(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function Ux(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=30,zx=1e3;class Bx{constructor(e={},n=zx){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const pw=new Bx;function qx(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function Hx(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:qx(s)},u=Cx.replace("{app-id}",n),d=await fetch(u,o);if(d.status!==200&&d.status!==304){let m="";try{const p=await d.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw jn.create("config-fetch-failed",{httpStatus:d.status,responseMessage:m})}return d.json()}async function Fx(i,e=pw,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw jn.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw jn.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new Kx;return setTimeout(async()=>{m.abort()},Ix),gw({appId:s,apiKey:o,measurementId:u},d,m,e)}async function gw(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=pw){var u;const{appId:d,measurementId:m}=i;try{await Gx(s,e)}catch(p){if(m)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:d,measurementId:m};throw p}try{const p=await Hx(i);return o.deleteThrottleMetadata(d),p}catch(p){const g=p;if(!$x(g)){if(o.deleteThrottleMetadata(d),m)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:d,measurementId:m};throw p}const E=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?r0(n,o.intervalMillis,jx):r0(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(d,w),In.debug(`Calling attemptFetch again in ${E} millis`),gw(i,w,s,o)}}function Gx(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $x(i){if(!(i instanceof mi)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class Kx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Qx(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,d=Object.assign(Object.assign({},s),{send_to:u});i("event",n,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(){if(lT())try{await uT()}catch(i){return In.warn(jn.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return In.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Wx(i,e,n,s,o,u,d){var m;const p=Fx(i);p.then(O=>{n[O.measurementId]=O.appId,i.options.measurementId&&O.measurementId!==i.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>In.error(O)),e.push(p);const g=Yx().then(O=>{if(O)return s.getId()}),[E,w]=await Promise.all([p,g]);Ux(u)||Ox(u,E.measurementId),o("js",new Date);const I=(m=d==null?void 0:d.config)!==null&&m!==void 0?m:{};return I[Rx]="firebase",I.update=!0,w!=null&&(I[Ax]=w),o("config",E.measurementId,I),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.app=e}_delete(){return delete du[this.app.options.appId],Promise.resolve()}}let du={},pE=[];const gE={};let Bm="dataLayer",Zx="gtag",yE,yw,vE=!1;function Jx(){const i=[];if(oT()&&i.push("This is a browser extension environment."),f1()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=jn.create("invalid-analytics-context",{errorInfo:e});In.warn(n.message)}}function eN(i,e,n){Jx();const s=i.options.appId;if(!s)throw jn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jn.create("no-api-key");if(du[s]!=null)throw jn.create("already-exists",{id:s});if(!vE){Mx(Bm);const{wrappedGtag:u,gtagCore:d}=Lx(du,pE,gE,Bm,Zx);yw=u,yE=d,vE=!0}return du[s]=Wx(i,pE,gE,e,yE,Bm,n),new Xx(i)}function tN(i=Rp()){i=St(i);const e=ba(i,zh);return e.isInitialized()?e.getImmediate():nN(i)}function nN(i,e={}){const n=ba(i,zh);if(n.isInitialized()){const o=n.getImmediate();if(bs(e,n.getOptions()))return o;throw jn.create("already-initialized")}return n.initialize({options:e})}function iN(i,e,n,s){i=St(i),Qx(yw,du[i.app.options.appId],e,n,s).catch(o=>In.error(o))}const _E="@firebase/analytics",EE="0.10.12";function rN(){Bi(new ci(zh,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return eN(s,o,n)},"PUBLIC")),Bi(new ci("analytics-internal",i,"PRIVATE")),ei(_E,EE),ei(_E,EE,"esm2017");function i(e){try{const n=e.getProvider(zh).getImmediate();return{logEvent:(s,o,u)=>iN(n,s,o,u)}}catch(n){throw jn.create("interop-component-reg-failed",{reason:n})}}}rN();const sN={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},vg=fT(sN),ze=IC(vg);tN(vg);var Wl={},TE;function aN(){if(TE)return Wl;TE=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.parse=d,Wl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function d(I,O){const M=new u,Q=I.length;if(Q<2)return M;const H=(O==null?void 0:O.decode)||E;let Y=0;do{const ae=I.indexOf("=",Y);if(ae===-1)break;const ne=I.indexOf(";",Y),me=ne===-1?Q:ne;if(ae>me){Y=I.lastIndexOf(";",ae-1)+1;continue}const ye=m(I,Y,ae),Re=p(I,ae,ye),P=I.slice(ye,Re);if(M[P]===void 0){let S=m(I,ae+1,me),R=p(I,me,S);const N=H(I.slice(S,R));M[P]=N}Y=me+1}while(Y<Q);return M}function m(I,O,M){do{const Q=I.charCodeAt(O);if(Q!==32&&Q!==9)return O}while(++O<M);return M}function p(I,O,M){for(;O>M;){const Q=I.charCodeAt(--O);if(Q!==32&&Q!==9)return O+1}return M}function g(I,O,M){const Q=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(I))throw new TypeError(`argument name is invalid: ${I}`);const H=Q(O);if(!e.test(H))throw new TypeError(`argument val is invalid: ${O}`);let Y=I+"="+H;if(!M)return Y;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);Y+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);Y+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);Y+="; Path="+M.path}if(M.expires){if(!w(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);Y+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(Y+="; HttpOnly"),M.secure&&(Y+="; Secure"),M.partitioned&&(Y+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return Y}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function w(I){return o.call(I)==="[object Date]"}return Wl}aN();var bE="popstate";function oN(i={}){function e(s,o){let{pathname:u,search:d,hash:m}=s.location;return vp("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Su(o)}return uN(e,n,null,i)}function vt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function di(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lN(){return Math.random().toString(36).substring(2,10)}function wE(i,e){return{usr:i.state,key:i.key,idx:e}}function vp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:n,key:e&&e.key||s||lN()}}function Su({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Bo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function uN(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,d=o.history,m="POP",p=null,g=E();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function E(){return(d.state||{idx:null}).idx}function w(){m="POP";let H=E(),Y=H==null?null:H-g;g=H,p&&p({action:m,location:Q.location,delta:Y})}function I(H,Y){m="PUSH";let ae=vp(Q.location,H,Y);g=E()+1;let ne=wE(ae,g),me=Q.createHref(ae);try{d.pushState(ne,"",me)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;o.location.assign(me)}u&&p&&p({action:m,location:Q.location,delta:1})}function O(H,Y){m="REPLACE";let ae=vp(Q.location,H,Y);g=E();let ne=wE(ae,g),me=Q.createHref(ae);d.replaceState(ne,"",me),u&&p&&p({action:m,location:Q.location,delta:0})}function M(H){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,ae=typeof H=="string"?H:Su(H);return ae=ae.replace(/ $/,"%20"),vt(Y,`No window.location.(origin|href) available to create URL for href: ${ae}`),new URL(ae,Y)}let Q={get action(){return m},get location(){return i(o,d)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(bE,w),p=H,()=>{o.removeEventListener(bE,w),p=null}},createHref(H){return e(o,H)},createURL:M,encodeLocation(H){let Y=M(H);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:I,replace:O,go(H){return d.go(H)}};return Q}function vw(i,e,n="/"){return cN(i,e,n,!1)}function cN(i,e,n,s){let o=typeof e=="string"?Bo(e):e,u=xr(o.pathname||"/",n);if(u==null)return null;let d=_w(i);hN(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=bN(u);m=EN(d[p],g,s)}return m}function _w(i,e=[],n=[],s=""){let o=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(vt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=wr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(vt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),_w(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:vN(g,u.index),routesMeta:E})};return i.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,d);else for(let p of Ew(u.path))o(u,d,p)}),e}function Ew(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let d=Ew(s.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function hN(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:_N(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var dN=/^:[\w-]+$/,fN=3,mN=2,pN=1,gN=10,yN=-2,SE=i=>i==="*";function vN(i,e){let n=i.split("/"),s=n.length;return n.some(SE)&&(s+=yN),e&&(s+=mN),n.filter(o=>!SE(o)).reduce((o,u)=>o+(dN.test(u)?fN:u===""?pN:gN),s)}function _N(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function EN(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",d=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),I=p.route;if(!w&&g&&n&&!s[s.length-1].route.index&&(w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:wr([u,w.pathname]),pathnameBase:RN(wr([u,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(u=wr([u,w.pathnameBase]))}return d}function Bh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=TN(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:w},I)=>{if(E==="*"){let M=m[I]||"";d=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const O=m[I];return w&&!O?g[E]=void 0:g[E]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:i}}function TN(i,e=!1,n=!0){di(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function bN(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return di(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function xr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function wN(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Bo(i):i;return{pathname:n?n.startsWith("/")?n:SN(n,e):e,search:IN(s),hash:CN(o)}}function SN(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function qm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AN(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _g(i){let e=AN(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Eg(i,e,n,s=!1){let o;typeof i=="string"?o=Bo(i):(o={...i},vt(!o.pathname||!o.pathname.includes("?"),qm("?","pathname","search",o)),vt(!o.pathname||!o.pathname.includes("#"),qm("#","pathname","hash",o)),vt(!o.search||!o.search.includes("#"),qm("#","search","hash",o)));let u=i===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=n;else{let w=e.length-1;if(!s&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}m=w>=0?e[w]:"/"}let p=wN(o,m),g=d&&d!=="/"&&d.endsWith("/"),E=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var wr=i=>i.join("/").replace(/\/\/+/g,"/"),RN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),IN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,CN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function xN(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Tw=["POST","PUT","PATCH","DELETE"];new Set(Tw);var NN=["GET",...Tw];new Set(NN);var qo=V.createContext(null);qo.displayName="DataRouter";var Ed=V.createContext(null);Ed.displayName="DataRouterState";var bw=V.createContext({isTransitioning:!1});bw.displayName="ViewTransition";var DN=V.createContext(new Map);DN.displayName="Fetchers";var ON=V.createContext(null);ON.displayName="Await";var pi=V.createContext(null);pi.displayName="Navigation";var ku=V.createContext(null);ku.displayName="Location";var Hi=V.createContext({outlet:null,matches:[],isDataRoute:!1});Hi.displayName="Route";var Tg=V.createContext(null);Tg.displayName="RouteError";function MN(i,{relative:e}={}){vt(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=V.useContext(pi),{hash:o,pathname:u,search:d}=Pu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:wr([n,u])),s.createHref({pathname:m,search:d,hash:o})}function Ho(){return V.useContext(ku)!=null}function Fi(){return vt(Ho(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(ku).location}var ww="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sw(i){V.useContext(pi).static||V.useLayoutEffect(i)}function Fo(){let{isDataRoute:i}=V.useContext(Hi);return i?$N():VN()}function VN(){vt(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let i=V.useContext(qo),{basename:e,navigator:n}=V.useContext(pi),{matches:s}=V.useContext(Hi),{pathname:o}=Fi(),u=JSON.stringify(_g(s)),d=V.useRef(!1);return Sw(()=>{d.current=!0}),V.useCallback((p,g={})=>{if(di(d.current,ww),!d.current)return;if(typeof p=="number"){n.go(p);return}let E=Eg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:wr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}V.createContext(null);function Pu(i,{relative:e}={}){let{matches:n}=V.useContext(Hi),{pathname:s}=Fi(),o=JSON.stringify(_g(n));return V.useMemo(()=>Eg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function kN(i,e){return Aw(i,e)}function Aw(i,e,n,s){var ae;vt(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=V.useContext(pi),{matches:d}=V.useContext(Hi),m=d[d.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",w=m&&m.route;{let ne=w&&w.path||"";Rw(g,!w||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let I=Fi(),O;if(e){let ne=typeof e=="string"?Bo(e):e;vt(E==="/"||((ae=ne.pathname)==null?void 0:ae.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),O=ne}else O=I;let M=O.pathname||"/",Q=M;if(E!=="/"){let ne=E.replace(/^\//,"").split("/");Q="/"+M.replace(/^\//,"").split("/").slice(ne.length).join("/")}let H=!u&&n&&n.matches&&n.matches.length>0?n.matches:vw(i,{pathname:Q});di(w||H!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),di(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=zN(H&&H.map(ne=>Object.assign({},ne,{params:Object.assign({},p,ne.params),pathname:wr([E,o.encodeLocation?o.encodeLocation(ne.pathname).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?E:wr([E,o.encodeLocation?o.encodeLocation(ne.pathnameBase).pathname:ne.pathnameBase])})),d,n,s);return e&&Y?V.createElement(ku.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},Y):Y}function PN(){let i=GN(),e=xN(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:u},"ErrorBoundary")," or"," ",V.createElement("code",{style:u},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:o},n):null,d)}var LN=V.createElement(PN,null),UN=class extends V.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?V.createElement(Hi.Provider,{value:this.props.routeContext},V.createElement(Tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jN({routeContext:i,match:e,children:n}){let s=V.useContext(qo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Hi.Provider,{value:i},n)}function zN(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);vt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:w}=n,I=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||I){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let w,I=!1,O=null,M=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,O=g.route.errorElement||LN,d&&(m<0&&E===0?(Rw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,M=null):m===E&&(I=!0,M=g.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,E+1)),H=()=>{let Y;return w?Y=O:I?Y=M:g.route.Component?Y=V.createElement(g.route.Component,null):g.route.element?Y=g.route.element:Y=p,V.createElement(jN,{match:g,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:Y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?V.createElement(UN,{location:n.location,revalidation:n.revalidation,component:O,error:w,children:H(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):H()},null)}function bg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BN(i){let e=V.useContext(qo);return vt(e,bg(i)),e}function qN(i){let e=V.useContext(Ed);return vt(e,bg(i)),e}function HN(i){let e=V.useContext(Hi);return vt(e,bg(i)),e}function wg(i){let e=HN(i),n=e.matches[e.matches.length-1];return vt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function FN(){return wg("useRouteId")}function GN(){var s;let i=V.useContext(Tg),e=qN("useRouteError"),n=wg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function $N(){let{router:i}=BN("useNavigate"),e=wg("useNavigate"),n=V.useRef(!1);return Sw(()=>{n.current=!0}),V.useCallback(async(o,u={})=>{di(n.current,ww),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var AE={};function Rw(i,e,n){!e&&!AE[i]&&(AE[i]=!0,di(!1,n))}V.memo(KN);function KN({routes:i,future:e,state:n}){return Aw(i,void 0,n,e)}function _r({to:i,replace:e,state:n,relative:s}){vt(Ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(pi);di(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=V.useContext(Hi),{pathname:d}=Fi(),m=Fo(),p=Eg(i,_g(u),d,s==="path"),g=JSON.stringify(p);return V.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function hs(i){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QN({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){vt(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=i.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=Bo(n));let{pathname:p="/",search:g="",hash:E="",state:w=null,key:I="default"}=n,O=V.useMemo(()=>{let M=xr(p,d);return M==null?null:{location:{pathname:M,search:g,hash:E,state:w,key:I},navigationType:s}},[d,p,g,E,w,I,s]);return di(O!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:V.createElement(pi.Provider,{value:m},V.createElement(ku.Provider,{children:e,value:O}))}function YN({children:i,location:e}){return kN(_p(i),e)}function _p(i,e=[]){let n=[];return V.Children.forEach(i,(s,o)=>{if(!V.isValidElement(s))return;let u=[...e,o];if(s.type===V.Fragment){n.push.apply(n,_p(s.props.children,u));return}vt(s.type===hs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=_p(s.props.children,u)),n.push(d)}),n}var Eh="get",Th="application/x-www-form-urlencoded";function Td(i){return i!=null&&typeof i.tagName=="string"}function WN(i){return Td(i)&&i.tagName.toLowerCase()==="button"}function XN(i){return Td(i)&&i.tagName.toLowerCase()==="form"}function ZN(i){return Td(i)&&i.tagName.toLowerCase()==="input"}function JN(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function eD(i,e){return i.button===0&&(!e||e==="_self")&&!JN(i)}var dh=null;function tD(){if(dh===null)try{new FormData(document.createElement("form"),0),dh=!1}catch{dh=!0}return dh}var nD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hm(i){return i!=null&&!nD.has(i)?(di(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Th}"`),null):i}function iD(i,e){let n,s,o,u,d;if(XN(i)){let m=i.getAttribute("action");s=m?xr(m,e):null,n=i.getAttribute("method")||Eh,o=Hm(i.getAttribute("enctype"))||Th,u=new FormData(i)}else if(WN(i)||ZN(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?xr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Eh,o=Hm(i.getAttribute("formenctype"))||Hm(m.getAttribute("enctype"))||Th,u=new FormData(m,i),!tD()){let{name:g,type:E,value:w}=i;if(E==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,w)}}else{if(Td(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Eh,s=null,o=Th,d=i}return u&&o==="text/plain"&&(d=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:d}}function Sg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function rD(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function aD(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await rD(u,n);return d.links?d.links():[]}return[]}));return cD(s.flat(1).filter(sD).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function RE(i,e,n,s,o,u){let d=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var w;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function oD(i,e,{includeHydrateFallback:n}={}){return lD(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function lD(i){return[...new Set(i)]}function uD(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function cD(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(uD(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var hD=new Set([100,101,204,205]);function dD(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&xr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Iw(){let i=V.useContext(qo);return Sg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function fD(){let i=V.useContext(Ed);return Sg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ag=V.createContext(void 0);Ag.displayName="FrameworkContext";function Cw(){let i=V.useContext(Ag);return Sg(i,"You must render this element inside a <HydratedRouter> element"),i}function mD(i,e){let n=V.useContext(Ag),[s,o]=V.useState(!1),[u,d]=V.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:w}=e,I=V.useRef(null);V.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let Q=Y=>{Y.forEach(ae=>{d(ae.isIntersecting)})},H=new IntersectionObserver(Q,{threshold:.5});return I.current&&H.observe(I.current),()=>{H.disconnect()}}},[i]),V.useEffect(()=>{if(s){let Q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let O=()=>{o(!0)},M=()=>{o(!1),d(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:Xl(m,O),onBlur:Xl(p,M),onMouseEnter:Xl(g,O),onMouseLeave:Xl(E,M),onTouchStart:Xl(w,O)}]:[!1,I,{}]}function Xl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function pD({page:i,...e}){let{router:n}=Iw(),s=V.useMemo(()=>vw(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?V.createElement(yD,{page:i,matches:s,...e}):null}function gD(i){let{manifest:e,routeModules:n}=Cw(),[s,o]=V.useState([]);return V.useEffect(()=>{let u=!1;return aD(i,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[i,e,n]),s}function yD({page:i,matches:e,...n}){let s=Fi(),{manifest:o,routeModules:u}=Cw(),{basename:d}=Iw(),{loaderData:m,matches:p}=fD(),g=V.useMemo(()=>RE(i,e,p,o,s,"data"),[i,e,p,o,s]),E=V.useMemo(()=>RE(i,e,p,o,s,"assets"),[i,e,p,o,s]),w=V.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let M=new Set,Q=!1;if(e.forEach(Y=>{var ne;let ae=o.routes[Y.route.id];!ae||!ae.hasLoader||(!g.some(me=>me.route.id===Y.route.id)&&Y.route.id in m&&((ne=u[Y.route.id])!=null&&ne.shouldRevalidate)||ae.hasClientLoader?Q=!0:M.add(Y.route.id))}),M.size===0)return[];let H=dD(i,d);return Q&&M.size>0&&H.searchParams.set("_routes",e.filter(Y=>M.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[H.pathname+H.search]},[d,m,s,o,g,e,i,u]),I=V.useMemo(()=>oD(E,o),[E,o]),O=gD(E);return V.createElement(V.Fragment,null,w.map(M=>V.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),I.map(M=>V.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),O.map(({key:M,link:Q})=>V.createElement("link",{key:M,...Q})))}function vD(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var xw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xw&&(window.__reactRouterVersion="7.5.2")}catch{}function _D({basename:i,children:e,window:n}){let s=V.useRef();s.current==null&&(s.current=oN({window:n,v5Compat:!0}));let o=s.current,[u,d]=V.useState({action:o.action,location:o.location}),m=V.useCallback(p=>{V.startTransition(()=>d(p))},[d]);return V.useLayoutEffect(()=>o.listen(m),[o,m]),V.createElement(QN,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Nw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rg=V.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:d,state:m,target:p,to:g,preventScrollReset:E,viewTransition:w,...I},O){let{basename:M}=V.useContext(pi),Q=typeof g=="string"&&Nw.test(g),H,Y=!1;if(typeof g=="string"&&Q&&(H=g,xw))try{let R=new URL(window.location.href),N=g.startsWith("//")?new URL(R.protocol+g):new URL(g),x=xr(N.pathname,M);N.origin===R.origin&&x!=null?g=x+N.search+N.hash:Y=!0}catch{di(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=MN(g,{relative:o}),[ne,me,ye]=mD(s,I),Re=wD(g,{replace:d,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:w});function P(R){e&&e(R),R.defaultPrevented||Re(R)}let S=V.createElement("a",{...I,...ye,href:H||ae,onClick:Y||u?e:P,ref:vD(O,me),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return ne&&!Q?V.createElement(V.Fragment,null,S,V.createElement(pD,{page:ae})):S});Rg.displayName="Link";var ED=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:d,viewTransition:m,children:p,...g},E){let w=Pu(d,{relative:g.relative}),I=Fi(),O=V.useContext(Ed),{navigator:M,basename:Q}=V.useContext(pi),H=O!=null&&CD(w)&&m===!0,Y=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,ae=I.pathname,ne=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),ne=ne?ne.toLowerCase():null,Y=Y.toLowerCase()),ne&&Q&&(ne=xr(ne,Q)||ne);const me=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let ye=ae===Y||!o&&ae.startsWith(Y)&&ae.charAt(me)==="/",Re=ne!=null&&(ne===Y||!o&&ne.startsWith(Y)&&ne.charAt(Y.length)==="/"),P={isActive:ye,isPending:Re,isTransitioning:H},S=ye?e:void 0,R;typeof s=="function"?R=s(P):R=[s,ye?"active":null,Re?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(P):u;return V.createElement(Rg,{...g,"aria-current":S,className:R,ref:E,style:N,to:d,viewTransition:m},typeof p=="function"?p(P):p)});ED.displayName="NavLink";var TD=V.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:d=Eh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:w,...I},O)=>{let M=RD(),Q=ID(m,{relative:g}),H=d.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&Nw.test(m),ae=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let me=ne.nativeEvent.submitter,ye=(me==null?void 0:me.getAttribute("formmethod"))||d;M(me||ne.currentTarget,{fetcherKey:e,method:ye,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:w})};return V.createElement("form",{ref:O,method:H,action:Q,onSubmit:s?p:ae,...I,"data-discover":!Y&&i==="render"?"true":void 0})});TD.displayName="Form";function bD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dw(i){let e=V.useContext(qo);return vt(e,bD(i)),e}function wD(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:d}={}){let m=Fo(),p=Fi(),g=Pu(i,{relative:u});return V.useCallback(E=>{if(eD(E,e)){E.preventDefault();let w=n!==void 0?n:Su(p)===Su(g);m(i,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:d})}},[p,m,g,n,s,e,i,o,u,d])}var SD=0,AD=()=>`__${String(++SD)}__`;function RD(){let{router:i}=Dw("useSubmit"),{basename:e}=V.useContext(pi),n=FN();return V.useCallback(async(s,o={})=>{let{action:u,method:d,encType:m,formData:p,body:g}=iD(s,e);if(o.navigate===!1){let E=o.fetcherKey||AD();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function ID(i,{relative:e}={}){let{basename:n}=V.useContext(pi),s=V.useContext(Hi);vt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Pu(i||".",{relative:e})},d=Fi();if(i==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:wr([n,u.pathname])),Su(u)}function CD(i,e={}){let n=V.useContext(bw);vt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Dw("useViewTransitionState"),o=Pu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=xr(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=xr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Bh(o.pathname,d)!=null||Bh(o.pathname,u)!=null}new TextEncoder;[...hD];var xD=eT();const IE=JE(xD);function Ig(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Ow(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ND=Ow,Mw=new Ta("auth","Firebase",Ow());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Xh("@firebase/auth");function DD(i,...e){qh.logLevel<=Fe.WARN&&qh.warn(`Auth (${Po}): ${i}`,...e)}function bh(i,...e){qh.logLevel<=Fe.ERROR&&qh.error(`Auth (${Po}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(i,...e){throw Cg(i,...e)}function ji(i,...e){return Cg(i,...e)}function Vw(i,e,n){const s=Object.assign(Object.assign({},ND()),{[e]:n});return new Ta("auth","Firebase",s).create(e,{appName:i.name})}function Sr(i){return Vw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Mw.create(i,...e)}function Ie(i,e,...n){if(!i)throw Cg(e,...n)}function Er(i){const e="INTERNAL ASSERTION FAILED: "+i;throw bh(e),new Error(e)}function Nr(i,e){i||Er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function OD(){return CE()==="http:"||CE()==="https:"}function CE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OD()||oT()||"connection"in navigator)?navigator.onLine:!0}function VD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nr(n>e,"Short delay should be less than long delay!"),this.isMobile=o1()||c1()}get(){return MD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i,e){Nr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LD=new Lu(3e4,6e4);function Or(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Mr(i,e,n,s,o={}){return Pw(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=Iu(Object.assign({key:i.config.apiKey},d)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return u1()||(g.referrerPolicy="no-referrer"),kw.fetch()(await Lw(i,i.config.apiHost,n,m),g)})}async function Pw(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},kD),e);try{const o=new jD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw fh(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw fh(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw fh(i,"user-disabled",d);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Vw(i,E,g);fi(i,E)}}catch(o){if(o instanceof mi)throw o;fi(i,"network-request-failed",{message:String(o)})}}async function Uu(i,e,n,s,o={}){const u=await Mr(i,e,n,s,o);return"mfaPendingCredential"in u&&fi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Lw(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?xg(i.config,o):`${i.config.apiScheme}://${o}`;return PD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function UD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ji(this.auth,"network-request-failed")),LD.get())})}}function fh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ji(i,e,s);return o.customData._tokenResponse=n,o}function xE(i){return i!==void 0&&i.enterprise!==void 0}class zD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return UD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BD(i,e){return Mr(i,"GET","/v2/recaptchaConfig",Or(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(i,e){return Mr(i,"POST","/v1/accounts:delete",e)}async function Hh(i,e){return Mr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HD(i,e=!1){const n=St(i),s=await n.getIdToken(e),o=Ng(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:fu(Fm(o.auth_time)),issuedAtTime:fu(Fm(o.iat)),expirationTime:fu(Fm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Fm(i){return Number(i)*1e3}function Ng(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const o=iT(n);return o?JSON.parse(o):(bh("Failed to decode base64 JWT payload"),null)}catch(o){return bh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NE(i){const e=Ng(i);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof mi&&FD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function FD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Au(i,Hh(n,{idToken:s}));Ie(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Uw(u.providerUserInfo):[],m=KD(i.providerData,d),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Tp(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,w)}async function $D(i){const e=St(i);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Uw(i){return i.map(e=>{var{providerId:n}=e,s=Ig(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(i,e){const n=await Pw(i,{},async()=>{const s=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await Lw(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",kw.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YD(i,e){return Mr(i,"POST","/v2/accounts:revokeToken",Or(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await QD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Ro;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(i,e){Ie(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Tp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Au(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HD(this,e)}reload(){return $D(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jn(this.auth.app))return Promise.reject(Sr(this.auth));const e=await this.getIdToken();return await Au(this,qD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,m,p,g,E;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,I=(o=n.email)!==null&&o!==void 0?o:void 0,O=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(d=n.photoURL)!==null&&d!==void 0?d:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,H=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(g=n.createdAt)!==null&&g!==void 0?g:void 0,ae=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:me,isAnonymous:ye,providerData:Re,stsTokenManager:P}=n;Ie(ne&&P,e,"internal-error");const S=Ro.fromJSON(this.name,P);Ie(typeof ne=="string",e,"internal-error"),cs(w,e.name),cs(I,e.name),Ie(typeof me=="boolean",e,"internal-error"),Ie(typeof ye=="boolean",e,"internal-error"),cs(O,e.name),cs(M,e.name),cs(Q,e.name),cs(H,e.name),cs(Y,e.name),cs(ae,e.name);const R=new ui({uid:ne,auth:e,email:I,emailVerified:me,displayName:w,isAnonymous:ye,photoURL:M,phoneNumber:O,tenantId:Q,stsTokenManager:S,createdAt:Y,lastLoginAt:ae});return Re&&Array.isArray(Re)&&(R.providerData=Re.map(N=>Object.assign({},N))),H&&(R._redirectEventId=H),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ro;o.updateFromServerResponse(n);const u=new ui({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Fh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Uw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ro;m.updateFromIdToken(s);const p=new ui({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;function Tr(i){Nr(i instanceof Function,"Expected a class definition");let e=DE.get(i);return e?(Nr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,DE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jw.type="NONE";const OE=jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(i,e,n){return`firebase:${i}:${e}:${n}`}class Io{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=wh(this.userKey,o.apiKey,u),this.fullPersistenceKey=wh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?ui._fromGetAccountInfoResponse(this.auth,n,e):null}return ui._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Io(Tr(OE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Tr(OE);const d=wh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(d);if(E){let w;if(typeof E=="string"){const I=await Hh(e,{idToken:E}).catch(()=>{});if(!I)break;w=await ui._fromGetAccountInfoResponse(e,I,E)}else w=ui._fromJSON(e,E);g!==u&&(m=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Io(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new Io(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gw(e))return"Blackberry";if($w(e))return"Webos";if(Bw(e))return"Safari";if((e.includes("chrome/")||qw(e))&&!e.includes("edge/"))return"Chrome";if(Fw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zw(i=hn()){return/firefox\//i.test(i)}function Bw(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qw(i=hn()){return/crios\//i.test(i)}function Hw(i=hn()){return/iemobile/i.test(i)}function Fw(i=hn()){return/android/i.test(i)}function Gw(i=hn()){return/blackberry/i.test(i)}function $w(i=hn()){return/webos/i.test(i)}function Dg(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function WD(i=hn()){var e;return Dg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XD(){return h1()&&document.documentMode===10}function Kw(i=hn()){return Dg(i)||Fw(i)||$w(i)||Gw(i)||/windows phone/i.test(i)||Hw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(i,e=[]){let n;switch(i){case"Browser":n=ME(hn());break;case"Worker":n=`${ME(hn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(i,e={}){return Mr(i,"GET","/v2/passwordPolicy",Or(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=6;class tO{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:eO,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new ZD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),s=await ui._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Jn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jn(this.app))return Promise.reject(Sr(this));const n=e?St(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jn(this.app)?Promise.reject(Sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jn(this.app)?Promise.reject(Sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JD(this),n=new tO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ta("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await YD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Tr(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Jn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&DD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ra(i){return St(i)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=v1(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iO(i){bd=i}function Yw(i){return bd.loadJS(i)}function rO(){return bd.recaptchaEnterpriseScript}function sO(){return bd.gapiScript}function aO(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class oO{constructor(){this.enterprise=new lO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const uO="recaptcha-enterprise",Ww="NO_RECAPTCHA";class cO{constructor(e){this.type=uO,this.auth=Ra(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{BD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new zD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;xE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(Ww)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oO().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&xE(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=rO();p.length!==0&&(p+=m),Yw(p).then(()=>{o(m,u,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function kE(i,e,n,s=!1,o=!1){const u=new cO(i);let d;if(o)d=Ww;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function bp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await kE(i,e,n,n==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await kE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(i,e){const n=ba(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(bs(u,e??{}))return o;fi(o,"already-initialized")}return n.initialize({options:e})}function dO(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Tr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function fO(i,e,n){const s=Ra(i);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Xw(e),{host:d,port:m}=mO(e),p=m===null?"":`:${m}`,g={url:`${u}//${d}${p}/`},E=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(bs(g,s.config.emulator)&&bs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,pO()}function Xw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function mO(i){const e=Xw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:PE(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:PE(d)}}}function PE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function pO(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,n){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}}async function gO(i,e){return Mr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(i,e){return Uu(i,"POST","/v1/accounts:signInWithPassword",Or(i,e))}async function vO(i,e){return Mr(i,"POST","/v1/accounts:sendOobCode",Or(i,e))}async function _O(i,e){return vO(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Or(i,e))}async function TO(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Or(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Og{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ru(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ru(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,n,"signInWithPassword",yO);case"emailLink":return EO(e,{email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,s,"signUpPassword",gO);case"emailLink":return TO(e,{idToken:n,email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(i,e){return Uu(i,"POST","/v1/accounts:signInWithIdp",Or(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="http://localhost";class _a extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Ig(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new _a(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Co(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Co(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Co(e,n)}buildRequest(){const e={requestUri:bO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SO(i){const e=Jl(eu(i)).link,n=e?Jl(eu(e)).deep_link_id:null,s=Jl(eu(i)).deep_link_id;return(s?Jl(eu(s)).link:null)||s||n||e||i}class Mg{constructor(e){var n,s,o,u,d,m;const p=Jl(eu(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,w=wO((o=p.mode)!==null&&o!==void 0?o:null);Ie(g&&E&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=p.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=SO(e);try{return new Mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,n){return Ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Mg.parseLink(n);return Ie(s,"argument-error"),Ru._fromEmailAndCode(e,s.code,s.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends Zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends ju{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fs.credential(n,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ju{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends ju{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ps.credential(n,s)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(i,e){return Uu(i,"POST","/v1/accounts:signUp",Or(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ui._fromIdTokenResponse(e,s,o),d=LE(s);return new Ea({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=LE(s);return new Ea({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function LE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends mi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Gh(e,n,s,o)}}function Jw(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(i,u,e,s):u})}async function RO(i,e,n=!1){const s=await Au(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ea._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(i,e,n=!1){const{auth:s}=i;if(Jn(s.app))return Promise.reject(Sr(s));const o="reauthenticate";try{const u=await Au(i,Jw(s,o,e,i),n);Ie(u.idToken,s,"internal-error");const d=Ng(u.idToken);Ie(d,s,"internal-error");const{sub:m}=d;return Ie(i.uid===m,s,"user-mismatch"),Ea._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&fi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(i,e,n=!1){if(Jn(i.app))return Promise.reject(Sr(i));const s="signIn",o=await Jw(i,s,e),u=await Ea._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function CO(i,e){return eS(Ra(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i){const e=Ra(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xO(i,e,n){if(Jn(i.app))return Promise.reject(Sr(i));const s=Ra(i),d=await bp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&tS(i),p}),m=await Ea._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function NO(i,e,n){return Jn(i.app)?Promise.reject(Sr(i)):CO(St(i),Go.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&tS(i),s})}async function nS(i,e){const n=St(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await _O(n.auth,o);u!==i.email&&await i.reload()}function DO(i,e,n,s){return St(i).onIdTokenChanged(e,n,s)}function OO(i,e,n){return St(i).beforeAuthStateChanged(e,n)}function MO(i,e,n,s){return St(i).onAuthStateChanged(e,n,s)}function VO(i){return St(i).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=1e3,PO=10;class rS extends iS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);XD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,PO):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},kO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rS.type="LOCAL";const LO=rS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends iS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sS.type="SESSION";const aS=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new wd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async g=>g(n.origin,u)),p=await UO(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const g=Vg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function zO(i){zi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function BO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function HO(){return oS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebaseLocalStorageDb",FO=1,Kh="firebaseLocalStorage",uS="fbase_key";class zu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sd(i,e){return i.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function GO(){const i=indexedDB.deleteDatabase(lS);return new zu(i).toPromise()}function wp(){const i=indexedDB.open(lS,FO);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Kh,{keyPath:uS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Kh)?e(s):(s.close(),await GO(),e(await wp()))})})}async function UE(i,e,n){const s=Sd(i,!0).put({[uS]:e,value:n});return new zu(s).toPromise()}async function $O(i,e){const n=Sd(i,!1).get(e),s=await new zu(n).toPromise();return s===void 0?null:s.value}function jE(i,e){const n=Sd(i,!0).delete(e);return new zu(n).toPromise()}const KO=800,QO=3;class cS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>QO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(HO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await BO(),!this.activeServiceWorker)return;this.sender=new jO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wp();return await UE(e,$h,"1"),await jE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>UE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>$O(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Sd(o,!1).getAll();return new zu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cS.type="LOCAL";const YO=cS;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(i,e){return e?Tr(e):(Ie(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XO(i){return eS(i.auth,new kg(i),i.bypassAuthState)}function ZO(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),IO(n,new kg(i),i.bypassAuthState)}async function JO(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),RO(n,new kg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XO;case"linkViaPopup":case"linkViaRedirect":return JO;case"reauthViaPopup":case"reauthViaRedirect":return ZO;default:fi(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new Lu(2e3,1e4);class So extends hS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e4.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="pendingRedirect",Sh=new Map;class n4 extends hS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const s=await i4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i4(i,e){const n=a4(e),s=s4(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function r4(i,e){Sh.set(i._key(),e)}function s4(i){return Tr(i._redirectPersistence)}function a4(i){return wh(t4,i.config.apiKey,i.name)}async function o4(i,e,n=!1){if(Jn(i.app))return Promise.reject(Sr(i));const s=Ra(i),o=WO(s,e),d=await new n4(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=10*60*1e3;class u4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!dS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ji(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l4&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(e))}saveEventToCache(e){this.cachedEventUids.add(zE(e)),this.lastProcessedEventTime=Date.now()}}function zE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function dS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function c4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h4(i,e={}){return Mr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f4=/^https?/;async function m4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await h4(i);for(const n of e)try{if(p4(n))return}catch{}fi(i,"unauthorized-domain")}function p4(i){const e=Ep(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!f4.test(n))return!1;if(d4.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new Lu(3e4,6e4);function BE(){const i=zi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function y4(i){return new Promise((e,n)=>{var s,o,u;function d(){BE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BE(),n(ji(i,"network-request-failed"))},timeout:g4.get()})}if(!((o=(s=zi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=zi().gapi)===null||u===void 0)&&u.load)d();else{const m=aO("iframefcb");return zi()[m]=()=>{gapi.load?d():n(ji(i,"network-request-failed"))},Yw(`${sO()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function v4(i){return Ah=Ah||y4(i),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new Lu(5e3,15e3),E4="__/auth/iframe",T4="emulator/auth/iframe",b4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S4(i){const e=i.config;Ie(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?xg(e,T4):`https://${i.config.authDomain}/${E4}`,s={apiKey:e.apiKey,appName:i.name,v:Po},o=w4.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Iu(s).slice(1)}`}async function A4(i){const e=await v4(i),n=zi().gapi;return Ie(n,i,"internal-error"),e.open({where:document.body,url:S4(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b4,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=ji(i,"network-request-failed"),m=zi().setTimeout(()=>{u(d)},_4.get());function p(){zi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I4=500,C4=600,x4="_blank",N4="http://localhost";class qE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D4(i,e,n,s=I4,o=C4){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},R4),{width:s.toString(),height:o.toString(),top:u,left:d}),g=hn().toLowerCase();n&&(m=qw(g)?x4:n),zw(g)&&(e=e||N4,p.scrollbars="yes");const E=Object.entries(p).reduce((I,[O,M])=>`${I}${O}=${M},`,"");if(WD(g)&&m!=="_self")return O4(e||"",m),new qE(null);const w=window.open(e||"",m,E);Ie(w,i,"popup-blocked");try{w.focus()}catch{}return new qE(w)}function O4(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="__/auth/handler",V4="emulator/auth/handler",k4=encodeURIComponent("fac");async function HE(i,e,n,s,o,u){Ie(i.config.authDomain,i,"auth-domain-config-required"),Ie(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Po,eventId:o};if(e instanceof Zw){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",y1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))d[E]=w}if(e instanceof ju){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(d.scopes=E.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),g=p?`#${k4}=${encodeURIComponent(p)}`:"";return`${P4(i)}?${Iu(m).slice(1)}${g}`}function P4({config:i}){return i.emulator?xg(i,V4):`https://${i.authDomain}/${M4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class L4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aS,this._completeRedirectFn=o4,this._overrideRedirectResult=r4}async _openPopup(e,n,s,o){var u;Nr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await HE(e,n,s,Ep(),o);return D4(e,d,Vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await HE(e,n,s,Ep(),o);return zO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Nr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await A4(e),s=new u4(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gm,{type:Gm},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Gm];d!==void 0&&n(!!d),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Kw()||Bw()||Dg()}}const U4=L4;var FE="@firebase/auth",GE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function B4(i){Bi(new ci("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Ie(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qw(i)},g=new nO(s,o,u,p);return dO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Bi(new ci("auth-internal",e=>{const n=Ra(e.getProvider("auth").getImmediate());return(s=>new j4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(FE,GE,z4(i)),ei(FE,GE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=5*60,H4=aT("authIdTokenMaxAge")||q4;let $E=null;const F4=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>H4)return;const o=n==null?void 0:n.token;$E!==o&&($E=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function G4(i=Rp()){const e=ba(i,"auth");if(e.isInitialized())return e.getImmediate();const n=hO(i,{popupRedirectResolver:U4,persistence:[YO,LO,aS]}),s=aT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=F4(u.toString());OO(n,d,()=>d(n.currentUser)),DO(n,m=>d(m))}}const o=rT("auth");return o&&fO(n,`http://${o}`),n}function $4(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}iO({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ji("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",$4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});B4("Browser");const fS=V.createContext();function Vr(){return V.useContext(fS)}function K4({children:i}){const[e,n]=V.useState(null),[s,o]=V.useState(!0),u=G4(vg);V.useEffect(()=>MO(u,I=>{n(I),o(!1)}),[u]);const E={currentUser:e,loading:s,signup:(w,I)=>xO(u,w,I),login:(w,I)=>NO(u,w,I),logout:async()=>{await VO(u),n(null)},resendVerificationEmail:async()=>{e&&await nS(e)},emailVerified:(e==null?void 0:e.emailVerified)||!1};return T.jsx(fS.Provider,{value:E,children:!s&&i})}function Q4(){const i=V.useRef(),e=V.useRef(),{login:n}=Vr(),[s,o]=V.useState(""),[u,d]=V.useState(!1),m=Fo(),p=Fi();async function g(E){E.preventDefault(),o(""),d(!0);try{await n(i.current.value,e.current.value),p.state&&p.state.fromShared?m("/dashboard",{replace:!0}):m("/dashboard")}catch(w){o(w.message||"Failed to log in")}d(!1)}return T.jsx("div",{className:"auth-bg",children:T.jsxs("div",{className:"auth-container",children:[T.jsx("div",{className:"auth-logo-row",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),T.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),T.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&T.jsx("div",{className:"auth-error",children:s}),T.jsxs("form",{className:"auth-form",onSubmit:g,children:[T.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),T.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),T.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),T.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),T.jsx("div",{className:"auth-link-row",children:T.jsxs("span",{style:{color:"#fff"},children:["Don't have an account? ",T.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function Y4(){const i=V.useRef(),e=V.useRef(),n=V.useRef(),{signup:s}=Vr(),[o,u]=V.useState(""),[d,m]=V.useState(!1),p=Fo();async function g(E){if(E.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{const w=await s(i.current.value,e.current.value);await nS(w.user),m(!1),p("/verify-email")}catch(w){u(w.message||"Failed to create an account")}m(!1)}return T.jsx("div",{className:"auth-bg",children:T.jsxs("div",{className:"auth-container",children:[T.jsx("div",{className:"auth-logo-row",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),T.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),T.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&T.jsx("div",{className:"auth-error",children:o}),T.jsxs("form",{className:"auth-form",onSubmit:g,children:[T.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),T.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),T.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),T.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),T.jsx("button",{disabled:d,type:"submit",className:"auth-btn",children:"Sign Up"})]}),T.jsx("div",{className:"auth-link-row",children:T.jsxs("span",{style:{color:"#fff"},children:["Already have an account? ",T.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function KE({children:i}){const{currentUser:e}=Vr();return e?i:T.jsx(_r,{to:"/login"})}function W4({show:i}){const[e,n]=V.useState(!1),[s,o]=V.useState([]),[u,d]=V.useState(null),[m,p]=V.useState([]),[g,E]=V.useState(!1),[w,I]=V.useState(""),O=async()=>{if(!e&&i.tmdbId){E(!0),I("");try{const Q=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,Y=await(await fetch(Q)).json();o(Y.seasons||[]),Y.seasons&&Y.seasons.length>0&&d(Y.seasons[0].season_number)}catch{I("Failed to load seasons.")}E(!1)}n(M=>!M)};return V.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){E(!0),I("");try{const H=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,ae=await(await fetch(H)).json();p(ae.episodes||[])}catch{I("Failed to load episodes.")}E(!1)}})()},[i.tmdbId,u]),T.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[T.jsx("button",{onClick:O,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":"▶ Show Episodes"}),e&&T.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?T.jsx("div",{children:"Loading..."}):w?T.jsx("div",{style:{color:"red"},children:w}):T.jsxs(T.Fragment,{children:[s.length>0&&T.jsxs("div",{style:{marginBottom:10},children:[T.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),T.jsx("select",{id:"season-select",value:u||"",onChange:M=>d(Number(M.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(M=>T.jsx("option",{value:M.season_number,children:M.name||`Season ${M.season_number}`},M.id||M.season_number))})]}),m.length>0?T.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(M=>T.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[T.jsxs("strong",{children:["Ep ",M.episode_number,":"]})," ",M.name," ",M.air_date?T.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",M.air_date,")"]}):""]},M.id||M.episode_number))}):T.jsx("div",{children:"No episodes found."})]})})]})}function X4({users:i,onSelectUser:e}){return T.jsxs("table",{className:"admin-user-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Email"}),T.jsx("th",{children:"Display Name"}),T.jsx("th",{children:"Status"}),T.jsx("th",{children:"Roles"}),T.jsx("th",{children:"Stats"}),T.jsx("th",{children:"Actions"})]})}),T.jsx("tbody",{children:i.map(n=>{var s,o;return T.jsxs("tr",{children:[T.jsx("td",{children:n.email}),T.jsx("td",{children:n.displayName}),T.jsx("td",{children:n.disabled?"Inactive":"Active"}),T.jsx("td",{children:n.roles?n.roles.join(", "):""}),T.jsxs("td",{children:["Diary: ",((s=n.stats)==null?void 0:s.diaryCount)||0,T.jsx("br",{}),"Comments: ",((o=n.stats)==null?void 0:o.commentCount)||0]}),T.jsx("td",{children:T.jsx("button",{onClick:()=>e(n),children:"Manage"})})]},n.uid)})})]})}function Z4({user:i,onClose:e,onDisable:n,onEnable:s,onDelete:o,onSendMessage:u,diaryEntries:d,comments:m,onDeleteDiary:p,onDeleteComment:g}){var E,w;return i?T.jsx("div",{className:"admin-modal-bg",children:T.jsxs("div",{className:"admin-modal",style:{maxWidth:1200,width:"90vw",minWidth:320,padding:"2.2rem 2.5rem",borderRadius:18,background:"#fff",boxShadow:"0 4px 32px #205a7a22",margin:"0 auto"},children:[T.jsx("button",{className:"close-btn",onClick:e,style:{position:"absolute",top:18,right:24,fontSize:28,color:"#205a7a",background:"none",border:"none",cursor:"pointer"},children:"×"}),T.jsxs("h2",{style:{color:"#205a7a",fontWeight:900,fontSize:"2rem",marginBottom:12},children:["User: ",T.jsx("span",{style:{color:"#25609c"},children:i.displayName||i.email})]}),T.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,flexWrap:"wrap"},children:[T.jsxs("div",{children:["Status: ",T.jsx("b",{style:{color:i.disabled?"#d32f2f":"#35b36b"},children:i.disabled?"Inactive":"Active"})]}),T.jsxs("div",{children:["Roles: ",T.jsx("span",{style:{color:"#25609c"},children:i.roles?i.roles.join(", "):"-"})]}),T.jsxs("div",{children:["Email: ",T.jsx("span",{style:{color:"#333"},children:i.email})]}),T.jsxs("div",{children:["Stats: ",T.jsxs("span",{style:{color:"#25609c"},children:["Diary ",((E=i.stats)==null?void 0:E.diaryCount)||0,", Comments ",((w=i.stats)==null?void 0:w.commentCount)||0]})]})]}),T.jsxs("div",{style:{margin:"1.2em 0",display:"flex",gap:12,flexWrap:"wrap"},children:[i.disabled?T.jsx("button",{onClick:()=>s(i.uid),style:{background:"#35b36b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Enable"}):T.jsx("button",{onClick:()=>n(i.uid),style:{background:"#ffe066",color:"#205a7a",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Disable"}),T.jsx("button",{onClick:()=>o(i.uid),style:{background:"#ff6b6b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Delete"}),T.jsx("button",{onClick:()=>u(i.uid),style:{background:"#25609c",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Message"})]}),T.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:24,marginBottom:12,fontSize:"1.2rem"},children:"Diary Entries"}),T.jsx("div",{style:{maxHeight:180,overflowY:"auto",marginBottom:18,background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:d.length===0?T.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No diary entries."}):T.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:d.map(I=>T.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[T.jsx("span",{style:{fontWeight:600,color:"#205a7a"},children:I.title}),T.jsx("button",{onClick:()=>p(I.docId),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.docId))})}),T.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:18,marginBottom:10,fontSize:"1.2rem"},children:"Comments"}),T.jsx("div",{style:{maxHeight:140,overflowY:"auto",background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:m.length===0?T.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No comments."}):T.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:m.map(I=>T.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[T.jsxs("span",{style:{color:"#333",fontWeight:500,maxWidth:290,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[I.text,I.entryTitle&&T.jsxs("span",{style:{color:"#25609c",fontWeight:400,marginLeft:10,fontSize:13},children:["[on: ",I.entryTitle,"]"]})]}),T.jsx("button",{onClick:()=>g(I.id),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.id))})})]})}):null}function J4({onSend:i,onClose:e}){const[n,s]=V.useState("");return T.jsx("div",{className:"admin-modal-bg",children:T.jsxs("div",{className:"admin-modal",children:[T.jsx("button",{className:"close-btn",onClick:e,children:"×"}),T.jsx("h2",{children:"Send Message to All Users"}),T.jsx("textarea",{value:n,onChange:o=>s(o.target.value),rows:6,style:{width:"100%"}}),T.jsx("button",{onClick:()=>i(n),style:{marginTop:12},children:"Send"})]})})}function eM(){async function i(){try{const e=await An(un(ze,"users"));console.log("User docs:",e.docs.map(n=>n.data()))}catch(e){console.error("Direct test error:",e)}}return T.jsx("button",{onClick:i,style:{marginBottom:12},children:"Test Firestore Read"})}async function tM(i){const n=(await An(un(ze,"users"))).docs.map(s=>Uh(un(ze,`users/${s.id}/notifications`),{...i,read:!1,createdAt:gp()}));await Promise.all(n)}function nM(){const[i,e]=V.useState(""),[n,s]=V.useState(""),[o,u]=V.useState("info"),[d,m]=V.useState(!1),[p,g]=V.useState(""),[E,w]=V.useState("");async function I(O){O.preventDefault(),m(!0),w(""),g("");try{await tM({title:i,message:n,type:o}),g("Notification sent to all users!"),e(""),s("")}catch{w("Failed to send notification.")}m(!1)}return T.jsxs("form",{className:"admin-notification-form",onSubmit:I,style:{marginBottom:"2rem"},children:[T.jsx("h3",{children:"Send Notification to All Users"}),T.jsx("input",{value:i,onChange:O=>e(O.target.value),placeholder:"Title",required:!0}),T.jsx("textarea",{value:n,onChange:O=>s(O.target.value),placeholder:"Message",required:!0}),T.jsxs("select",{value:o,onChange:O=>u(O.target.value),children:[T.jsx("option",{value:"info",children:"Info"}),T.jsx("option",{value:"warning",children:"Warning"}),T.jsx("option",{value:"error",children:"Error"})]}),T.jsx("button",{type:"submit",disabled:d,children:d?"Sending...":"Send Notification"}),p&&T.jsx("div",{style:{color:"green",marginTop:8},children:p}),E&&T.jsx("div",{style:{color:"red",marginTop:8},children:E})]})}function iM(){const{currentUser:i}=Vr(),[e,n]=V.useState([]),[s,o]=V.useState(null),[u,d]=V.useState([]),[m,p]=V.useState([]),[g,E]=V.useState(!0),[w,I]=V.useState(""),[O,M]=V.useState(!1);V.useEffect(()=>{async function S(){E(!0),I("");try{console.log("Fetching users...");const R=await An(un(ze,"users"));console.log("Fetched users:",R.size),console.log("Fetching diary...");const N=await An(un(ze,"diary"));console.log("Fetched diary:",N.size),console.log("Fetching comments...");const x=await An(Lm(ze,"comments"));console.log("Fetched comments:",x.size);const k={},C={};N.docs.forEach(Ne=>{const Oe=Ne.data().uid;k[Oe]=(k[Oe]||0)+1}),x.docs.forEach(Ne=>{const Oe=Ne.data().authorUid;C[Oe]=(C[Oe]||0)+1}),n(R.docs.map(Ne=>({uid:Ne.id,...Ne.data(),stats:{diaryCount:k[Ne.id]||0,commentCount:C[Ne.id]||0}})))}catch(R){console.error("AdminDashboard Firestore error:",R),I("Failed to load users.")}E(!1)}S()},[]);async function Q(S){console.log("Fetching diary entries for user...");const R=await An(un(ze,"diary"));console.log("Fetched diary entries:",R.size);const N=R.docs.filter(C=>C.data().uid===S.uid).map(C=>({docId:C.id,...C.data()}));d(N),console.log("Fetching comments for user...");const x=await An(Lm(ze,"comments"));console.log("Fetched comments:",x.size);const k=x.docs.filter(C=>C.data().authorUid===S.uid).map(C=>{const Oe=C.ref.path.split("/")[1],W=R.docs.find(Pe=>String(Pe.data().id)===Oe),oe=W&&(W.data().title||W.data().desc)||"",Ee={id:C.id,entryId:Oe,entryTitle:oe,...C.data()};return console.log("AdminDashboard userComment:",Ee),Ee});p(k),o(S)}async function H(S){await ma(Ut(ze,"users",S),{disabled:!0}),n(e.map(R=>R.uid===S?{...R,disabled:!0}:R)),o(R=>R&&R.uid===S?{...R,disabled:!0}:R)}async function Y(S){await ma(Ut(ze,"users",S),{disabled:!1}),n(e.map(R=>R.uid===S?{...R,disabled:!1}:R)),o(R=>R&&R.uid===S?{...R,disabled:!1}:R)}async function ae(S){await hu(Ut(ze,"users",S)),n(e.filter(R=>R.uid!==S)),o(null)}async function ne(S){if(!S||typeof S!="string"){I("Cannot delete diary entry: invalid id.");return}await hu(Ut(ze,"diary",S)),d(u.filter(R=>R.docId!==S)),await ye()}async function me(S){const R=m.find(x=>x.id===S);if(!R)return;const N=R.entryId||R.entry_id||R.diaryId||R.parentEntryId;if(!N){I("Cannot delete: missing entryId for comment.");return}await hu(Ut(ze,`discussions/${N}/comments`,S)),p(m.filter(x=>x.id!==S)),await ye()}async function ye(){console.log("Refreshing user stats...");const S=await An(un(ze,"diary"));console.log("Fetched diary:",S.size);const R=await An(Lm(ze,"comments"));console.log("Fetched comments:",R.size);const N={},x={};S.docs.forEach(k=>{const C=k.data().uid;N[C]=(N[C]||0)+1}),R.docs.forEach(k=>{const C=k.data().authorUid;x[C]=(x[C]||0)+1}),n(k=>k.map(C=>({...C,stats:{diaryCount:N[C.uid]||0,commentCount:x[C.uid]||0}})))}async function Re(S){await An(un(ze,"users")).then(R=>{R.forEach(N=>{ma(Ut(ze,"users",N.id),{lastAdminMessage:S})})}),M(!1),alert("Message sent to all users!")}function P(S){M(!0)}return T.jsxs("div",{className:"admin-dashboard-container",children:[T.jsx("h2",{className:"admin-dashboard-title",children:"Admin Dashboard"}),T.jsx(nM,{}),T.jsx(eM,{}),T.jsx("div",{className:"admin-dashboard-actions",children:T.jsx("button",{className:"admin-dashboard-message-btn",onClick:()=>M(!0),children:"Message All Users"})}),w&&T.jsx("div",{className:"admin-dashboard-error",children:w}),g?T.jsx("div",{className:"admin-dashboard-loading",children:"Loading users..."}):T.jsx(X4,{users:e,onSelectUser:Q}),s&&T.jsx(Z4,{user:s,diaryEntries:u,comments:m,onClose:()=>o(null),onDelete:ae,onDisable:H,onEnable:Y,onSendMessage:P,onDeleteDiary:ne,onDeleteComment:me}),O&&T.jsx(J4,{onSend:Re,onClose:()=>M(!1)})]})}const rM=[{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],sM=[{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],aM="https://image.tmdb.org/t/p/w500";function oM(){const{currentUser:i}=Vr(),[e,n]=V.useState([]),[s,o]=V.useState(!0),[u,d]=V.useState("");return V.useEffect(()=>{async function m(){o(!0),d("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{d("Could not load trending movies.")}o(!1)}m()},[]),i?T.jsx(_r,{to:"/dashboard"}):T.jsx("div",{className:"sw-bg",children:T.jsxs("div",{className:"sw-container",children:[T.jsxs("div",{className:"sw-header-box sw-header-custom",children:[T.jsx("div",{className:"sw-logo-row",children:T.jsx("div",{className:"sw-header-logo-bg",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),T.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),T.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover What’s Next."}),T.jsx(Rg,{to:"/login",children:T.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),T.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:rM.map((m,p)=>T.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[T.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),T.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),T.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),T.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:sM.map((m,p)=>T.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[T.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),T.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),T.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),T.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?T.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?T.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?T.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>T.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[T.jsx("img",{src:m.poster_path?`${aM}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),T.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),T.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function lM({entryId:i}){console.log("entryId:",i);const{currentUser:e}=Vr(),[n,s]=V.useState([]),[o,u]=V.useState(!0),[d,m]=V.useState(""),[p,g]=V.useState(null),[E,w]=V.useState(""),[I,O]=V.useState({}),[M,Q]=V.useState(!0),H=V.useRef(null);async function Y(S){if(!S)return"Anonymous";try{const R=await au(Ut(ze,"users",S.uid));if(R&&R.exists())return R.data().displayName||S.displayName||(S.email?S.email.split("@")[0]:S.uid)}catch{}return S.displayName||(S.email?S.email.split("@")[0]:S.uid)}V.useEffect(()=>{const S=ru(un(ze,`discussions/${i}/comments`),Fb("timestamp","asc")),R=jC(S,N=>{const x=N.docs.map(k=>({id:k.id,...k.data(),votes:k.data().votes||{}}));if(console.log("Fetched comments:",x),s(x),e){const k={};x.forEach(C=>{C.votes&&C.votes[e.uid]&&(k[C.id]=C.votes[e.uid])}),O(k)}u(!1)});return()=>R()},[i,e]);const ae=async S=>{if(S.preventDefault(),!d.trim())return;const R=await Y(e);await Uh(un(ze,`discussions/${i}/comments`),{text:d,author:R,authorUid:e?e.uid:null,timestamp:gp(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),H.current&&H.current.focus()},ne=async S=>{if(!E.trim())return;const R=await Y(e);await Uh(un(ze,`discussions/${i}/comments`),{text:E,author:R,authorUid:e?e.uid:null,timestamp:gp(),parentId:S,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),w("")},me=async(S,R)=>{if(!e)return;const N=Ut(ze,`discussions/${i}/comments`,S),x=n.find(Ne=>Ne.id===S);if(!x)return;const k=x.votes?x.votes[e.uid]:void 0;let C={};R==="up"?C={upvotes:vo(k==="up"?0:1),...k==="down"?{downvotes:vo(-1)}:{},[`votes.${e.uid}`]:"up"}:R==="down"&&(C={downvotes:vo(k==="down"?0:1),...k==="up"?{upvotes:vo(-1)}:{},[`votes.${e.uid}`]:"down"}),O(Ne=>({...Ne,[S]:R})),await ma(N,C)},ye=async S=>{if(!e)return;const R=n.find(x=>x.id===S);if(!R||R.authorUid!==e.uid)return;const N=async x=>{const k=n.filter(Ne=>Ne.parentId===x);for(const Ne of k)Ne.authorUid===e.uid&&await N(Ne.id);const C=n.find(Ne=>Ne.id===x);C&&C.authorUid===e.uid&&await hu(Ut(ze,`discussions/${i}/comments`,x))};await N(S)};function Re({commentId:S,level:R,childrenCount:N,render:x,showCount:k=1}){const[C,Ne]=V.useState(!1),Oe=x(S,R+1);return!Oe||Oe.length===0?null:C?T.jsxs("div",{children:[Oe,N>k&&T.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ne(!1),children:"Hide Replies"})]}):T.jsxs("div",{children:[Oe.slice(0,k),N>k&&T.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ne(!0),children:["View ",N-k+1," more repl",N-k+1===1?"y":"ies"]})]})}const P=(S=null,R=0)=>n.filter(x=>x.parentId===S).map(x=>{var C,Ne,Oe,W;const k=n.filter(oe=>oe.parentId===x.id);return T.jsxs("div",{className:`discussion-comment${R>0?" discussion-reply":""}`,style:{marginLeft:R*18},children:[T.jsxs("div",{className:"discussion-header",children:[T.jsx("span",{className:"discussion-author",children:x.author}),T.jsx("span",{className:"discussion-date",children:((W=(Ne=(C=x.timestamp)==null?void 0:C.toDate)==null?void 0:(Oe=Ne.call(C)).toLocaleString)==null?void 0:W.call(Oe))||""})]}),T.jsx("div",{className:"discussion-body",children:x.text}),T.jsxs("div",{className:"discussion-actions",children:[T.jsxs("button",{className:`discussion-vote${I[x.id]==="up"?" voted":""}`,onClick:()=>me(x.id,"up"),title:"Thumbs up",disabled:I[x.id]==="up",children:["👍 ",x.upvotes||0]}),T.jsxs("button",{className:`discussion-vote${I[x.id]==="down"?" voted":""}`,onClick:()=>me(x.id,"down"),title:"Thumbs down",disabled:I[x.id]==="down",children:["👎 ",x.downvotes||0]}),T.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(x.id),children:"Reply"}),x.authorUid===(e==null?void 0:e.uid)&&T.jsx("button",{className:"discussion-delete-btn",onClick:()=>ye(x.id),title:"Delete",children:"🗑️"})]}),p===x.id&&T.jsxs("div",{className:"discussion-reply-form",children:[T.jsx("input",{type:"text",value:E,onChange:oe=>w(oe.target.value),placeholder:"Write a reply...",autoFocus:!0}),T.jsx("button",{onClick:()=>ne(x.id),children:"Send"}),T.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),T.jsx(Re,{commentId:x.id,level:R,childrenCount:k.length,render:P,showCount:1})]},x.id)});return T.jsxs("div",{className:"discussion-section",children:[T.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Q(S=>!S),style:{marginBottom:M?0:10},children:M?"Show Discussion":"Hide Discussion"}),!M&&T.jsxs(T.Fragment,{children:[T.jsx("h4",{children:"Discussion"}),T.jsxs("form",{onSubmit:ae,className:"discussion-form",children:[T.jsx("input",{type:"text",ref:H,value:d,onChange:S=>m(S.target.value),placeholder:"Add a comment..."}),T.jsx("button",{type:"submit",children:"Send"})]}),T.jsx("div",{className:"discussion-comments",children:o?T.jsx("div",{children:"Loading..."}):P()})]})]})}var mS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},QE=ys.createContext&&ys.createContext(mS),uM=["attr","size","title"];function cM(i,e){if(i==null)return{};var n=hM(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function hM(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Qh(){return Qh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Qh.apply(this,arguments)}function YE(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Yh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(n),!0).forEach(function(s){dM(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function dM(i,e,n){return e=fM(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function fM(i){var e=mM(i,"string");return typeof e=="symbol"?e:e+""}function mM(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function pS(i){return i&&i.map((e,n)=>ys.createElement(e.tag,Yh({key:n},e.attr),pS(e.child)))}function Cn(i){return e=>ys.createElement(pM,Qh({attr:Yh({},i.attr)},e),pS(i.child))}function pM(i){var e=n=>{var{attr:s,size:o,title:u}=i,d=cM(i,uM),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),ys.createElement("svg",Qh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,d,{className:p,style:Yh(Yh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&ys.createElement("title",null,u),i.children)};return QE!==void 0?ys.createElement(QE.Consumer,null,n=>e(n)):e(mS)}function gM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"},child:[]}]})(i)}function yM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(i)}function vM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function WE(i){return Cn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function _M(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(i)}function XE(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function EM(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(i)}function TM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(i)}function bM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(i)}function wM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(i)}function ZE(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(i)}function SM(i){return Cn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function AM(i){return Cn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"},child:[]}]})(i)}function RM(i){return Cn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(i)}function IM(){return T.jsxs("div",{style:{textAlign:"center",margin:"2rem 0"},children:[T.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block"},children:T.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/stacked-blue-5c3c7c3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c.svg",alt:"TMDb Logo",style:{height:48,marginBottom:8}})}),T.jsxs("div",{style:{fontSize:"0.95rem",color:"#888"},children:["This product uses the"," ",T.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb API"})," ","but is not endorsed or certified by TMDb."]})]})}function CM({notification:i,onDismiss:e}){const{title:n,message:s,type:o="info"}=i;let u=T.jsx(TM,{color:"#25609c",size:22});return o==="warning"&&(u=T.jsx(EM,{color:"#f59e42",size:22})),o==="error"&&(u=T.jsx(ZE,{color:"#dc2626",size:22})),T.jsxs("div",{className:`notification-banner notification-${o}`,children:[T.jsx("span",{className:"notification-icon",children:u}),T.jsxs("div",{className:"notification-content",children:[T.jsx("strong",{children:n}),T.jsx("div",{children:s})]}),T.jsx("button",{className:"notification-dismiss",onClick:e,title:"Dismiss notification",children:T.jsx(ZE,{size:20})})]})}const _o="ca9a91468bb700f84faf986252bc3fe6",Zl="https://api.themoviedb.org/3",$m="US";function xM(){const{currentUser:i,logout:e}=Vr(),n=Fo(),[s,o]=V.useState("movie"),[u,d]=V.useState(""),[m,p]=V.useState([]),[g,E]=V.useState(!1),[w,I]=V.useState(""),[O,M]=V.useState([]),[Q,H]=V.useState({}),Y=V.useRef(null),ae=V.useRef(""),[ne,me]=V.useState(null),[ye,Re]=V.useState(""),P=V.useRef({}),[S,R]=V.useState(!1),[N,x]=V.useState(null),[k,C]=V.useState(!1),[Ne,Oe]=V.useState(""),[W,oe]=V.useState(!1),[Ee,Pe]=V.useState(""),[L,ie]=V.useState(!1),[ce,se]=V.useState(""),[ve,ke]=V.useState("movie"),[we,Tt]=V.useState([]),[st,_n]=V.useState(!0),[ni,xn]=V.useState(""),[gi,yi]=V.useState(1),[Gi,Ds]=V.useState(!1);V.useEffect(()=>{async function j(){if(!i)return;const re=await au(Ut(ze,"users",i.uid));if(re.exists()){const le=re.data();Ds(Array.isArray(le.roles)&&le.roles.includes("admin"))}}j()},[i]),V.useEffect(()=>{Tt([]),yi(1),_n(!0),xn("")},[ve]),V.useEffect(()=>{let j=!0;async function re(le=1){_n(!0),xn("");try{const de=await fetch(`https://api.themoviedb.org/3/trending/${ve}/week?api_key=${_o}&page=${le}`);if(!de.ok)throw new Error("Failed to fetch trending");const fe=await de.json();j&&Tt(le===1?fe.results:he=>{const Be=new Set(he.map(at=>at.id));return[...he,...fe.results.filter(at=>!Be.has(at.id))]})}catch{j&&xn("Could not load trending.")}j&&_n(!1)}return re(gi),()=>{j=!1}},[ve,gi]),V.useEffect(()=>{we.filter(re=>!O.some(le=>le.id===re.id&&le.media_type===ve)).length<12&&we.length<100&&yi(re=>re+1)},[we,O,ve]),V.useEffect(()=>{if(!i)return;async function j(){const re=ru(un(ze,"diary"),hh("uid","==",i.uid));let de=(await An(re)).docs.map(fe=>({...fe.data(),docId:fe.id}));de=de.sort((fe,he)=>new Date(he.createdAt)-new Date(fe.createdAt)),M(de);for(const fe of de)Os(fe)}j()},[i]),V.useEffect(()=>{if(!i){Oe(""),Pe("");return}let j=!1;async function re(){const le=await au(Ut(ze,"users",i.uid));let de="";le.exists()?de=le.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):de=i.displayName||(i.email?i.email.split("@")[0]:i.uid),j||(Oe(de),Pe(de))}return re(),()=>{j=!0}},[i&&i.uid]);async function Os(j){var le;if(Q[j.id])return;const re=Ut(ze,"tmdbProvidersCache",`${j.media_type}_${j.id}`);try{const de=await au(re),fe=Date.now();if(de.exists()){const $e=de.data();if($e.providers&&($e.providers.flatrate=Array.isArray($e.providers.flatrate)?$e.providers.flatrate:[],$e.providers.rent=Array.isArray($e.providers.rent)?$e.providers.rent:[],$e.providers.buy=Array.isArray($e.providers.buy)?$e.providers.buy:[]),$e.timestamp&&fe-$e.timestamp<24*60*60*1e3){H(ii=>({...ii,[j.id]:$e.providers}));return}}let he="";j.media_type==="movie"?he=`${Zl}/movie/${j.id}/watch/providers?api_key=${_o}`:he=`${Zl}/tv/${j.id}/watch/providers?api_key=${_o}`;const Be=await fetch(he);if(Be.status===404){H($e=>({...$e,[j.id]:{}})),await Um(re,{providers:{},timestamp:fe});return}const Xe=((le=(await Be.json()).results)==null?void 0:le[$m])||{};Xe.flatrate=Array.isArray(Xe.flatrate)?Xe.flatrate:[],Xe.rent=Array.isArray(Xe.rent)?Xe.rent:[],Xe.buy=Array.isArray(Xe.buy)?Xe.buy:[],H($e=>({...$e,[j.id]:Xe})),await Um(re,{providers:Xe,timestamp:fe})}catch{H(fe=>({...fe,[j.id]:{}}))}}async function dn(j,re){if(!j.trim()){p([]),I(""),E(!1);return}E(!0),I(""),p([]);try{const de=`${Zl}${re==="movie"?"/search/movie":"/search/tv"}?api_key=${_o}&query=${encodeURIComponent(j)}`,he=await(await fetch(de)).json();he.results?p(he.results):(p([]),I("No results found."))}catch{I("Failed to fetch results.")}E(!1)}V.useEffect(()=>{if(!(u.trim()===""||u===ae.current))return Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{dn(u,s)},400),()=>clearTimeout(Y.current)},[u,s]);async function $o(j){j.preventDefault(),ae.current=u,await dn(u,s)}async function kr(j){if(!i||O.some(he=>he.id===j.id&&he.media_type===(j.media_type||s)))return;const re={uid:i.uid,id:j.id,title:j.title||j.name,date:(j.release_date||j.first_air_date||"").slice(0,10),poster:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",desc:j.overview||"No description.",watched:!1,archived:!1,media_type:j.media_type||s,createdAt:new Date().toISOString()};await Uh(un(ze,"diary"),re);const le=ru(un(ze,"diary"),hh("uid","==",i.uid));let fe=(await An(le)).docs.map(he=>({...he.data(),docId:he.id}));fe=fe.sort((he,Be)=>new Date(Be.createdAt)-new Date(he.createdAt)),M(fe),Os(re),p([]),d("")}async function Pr(j){M(re=>re.filter(le=>le.docId!==j)),me(null);try{await hu(Ut(ze,"diary",j));const re=ru(un(ze,"diary"),hh("uid","==",i.uid));let de=(await An(re)).docs.map(fe=>({...fe.data(),docId:fe.id}));de=de.sort((fe,he)=>new Date(he.createdAt)-new Date(fe.createdAt)),M(de)}catch{window.alert("Failed to remove entry. Please try again.")}}async function $i(j,re){const le=!re,de=le;M(fe=>fe.map(he=>he.docId===j?{...he,watched:le,archived:de}:he)),me(fe=>fe&&fe.docId===j?{...fe,watched:le,archived:de}:fe);try{await ma(Ut(ze,"diary",j),{watched:le,archived:de})}catch{M(he=>he.map(Be=>Be.docId===j?{...Be,watched:re,archived:re}:Be)),me(he=>he&&he.docId===j?{...he,watched:re,archived:re}:he),window.alert("Failed to update watched status. Please try again.")}}async function Ko(j,re){M(le=>le.map(de=>de.docId===j?{...de,archived:!re}:de)),me(le=>le&&le.docId===j?{...le,archived:!re}:le);try{await ma(Ut(ze,"diary",j),{archived:!re})}catch{M(de=>de.map(fe=>fe.docId===j?{...fe,archived:re}:fe)),me(de=>de&&de.docId===j?{...de,archived:re}:de),window.alert("Failed to update archive status. Please try again.")}}function Lr(j){const re=window.location.origin.includes("localhost")?"http://localhost:5173/showswatched2":"https://showswatched.github.io/showswatched2",le=j.docId||j.id||j.tmdbId,de=`${re}/#entry-${le}`,fe=j.title||"Diary Entry",he=`Check out this diary entry: ${fe}`;navigator.share?navigator.share({title:fe,text:he,url:de}).catch(()=>{navigator.clipboard.writeText(de),window.alert("Share link copied to clipboard!")}):navigator.clipboard?(navigator.clipboard.writeText(de),window.alert("Share link copied to clipboard!")):window.prompt("Copy this link to share:",de)}async function Ms(){if(!Ee.trim()){se("Display name cannot be empty.");return}ie(!0),se("");try{await Um(Ut(ze,"users",i.uid),{displayName:Ee.trim()},{merge:!0}),Oe(Ee.trim()),oe(!1);const j=await au(Ut(ze,"users",i.uid));if(j.exists()){const re=j.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);Oe(re),Pe(re)}}catch{se("Failed to update display name.")}ie(!1)}function Ia(){Pe(Ne),oe(!0),se("")}function gt(){oe(!1),se("")}async function Je(j){var re,le,de,fe,he,Be;if(!j)return"";try{if(j.media_type==="movie"){const Xe=await(await fetch(`${Zl}/movie/${j.id}/release_dates?api_key=${_o}`)).json(),$e=((re=Xe.results)==null?void 0:re.find(fn=>fn.iso_3166_1===$m))||((le=Xe.results)==null?void 0:le[0]);return((fe=(de=$e==null?void 0:$e.release_dates)==null?void 0:de.find(fn=>fn.certification))==null?void 0:fe.certification)||""}else if(j.media_type==="tv"){const Xe=await(await fetch(`${Zl}/tv/${j.id}/content_ratings?api_key=${_o}`)).json(),$e=((he=Xe.results)==null?void 0:he.find(ii=>ii.iso_3166_1===$m))||((Be=Xe.results)==null?void 0:Be[0]);return($e==null?void 0:$e.rating)||""}}catch{return""}return""}function Qt(j){me(j),Re(""),Je(j).then(re=>Re(re||""))}function Bt({entry:j,providersMap:re,onClose:le,onShare:de,onToggleWatched:fe,onRemove:he,onArchiveToggle:Be,diary:at,contentRating:Xe}){if(!j)return null;const $e=re[j.id]||{},ii=$e.flatrate||[],fn=$e.rent||[],Ps=$e.buy||[],dt=j;return IE.createPortal(T.jsx("div",{className:"dashboard-modal-overlay",onClick:le,children:T.jsxs("div",{className:"dashboard-modal-content",onClick:pt=>pt.stopPropagation(),children:[T.jsx("button",{className:"dashboard-modal-close",onClick:le,"aria-label":"Close modal",type:"button",children:"×"}),T.jsxs("div",{className:"dashboard-modal-body",children:[T.jsx("img",{className:"dashboard-diary-poster",src:dt.poster_path?`https://image.tmdb.org/t/p/w300${dt.poster_path}`:dt.poster||"https://placehold.co/120x170?text=No+Image",alt:dt.title,style:{marginBottom:"1rem"}}),T.jsx("div",{className:"dashboard-diary-movie-title",children:dt.title}),T.jsxs("div",{className:"dashboard-diary-date",children:[dt.release_date?dt.release_date.slice(0,4):dt.date||"",Xe&&T.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:Xe})]}),T.jsx("div",{className:"dashboard-diary-desc",children:dt.overview||dt.desc||""}),T.jsxs("div",{className:"dashboard-diary-providers-modal",children:[T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:ii.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):ii.map(pt=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${pt.logo_path}`,alt:pt.provider_name,title:pt.provider_name,className:"dashboard-provider-icon-sm"},pt.provider_id))})]}),T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:fn.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):fn.map(pt=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${pt.logo_path}`,alt:pt.provider_name,title:pt.provider_name,className:"dashboard-provider-icon-sm"},pt.provider_id))})]}),T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:Ps.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):Ps.map(pt=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${pt.logo_path}`,alt:pt.provider_name,title:pt.provider_name,className:"dashboard-provider-icon-sm"},pt.provider_id))})]})]}),j.media_type==="tv"&&(j.tmdbId||j.id)&&T.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:T.jsx(W4,{show:{...j,tmdbId:j.tmdbId||j.id}})}),T.jsxs("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:[T.jsx("button",{className:"dashboard-diary-share",onClick:()=>de(dt),title:"Share this diary entry with friends via link or social media",children:"SHARE"}),T.jsx("button",{className:dt.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>fe(dt.docId,dt.watched),title:dt.watched?"Mark as not watched":"Mark as watched",children:dt.watched?"WATCHED":"UNWATCHED"}),T.jsx("button",{className:"dashboard-diary-archive",style:{background:j.archived?"#b2b2b2":"#25609c",color:j.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>Be(j.docId,j.archived),title:j.archived?"Move this entry back to active diary":"Archive this entry (hide from main diary)",children:j.archived?"Unarchive":"Archive"}),T.jsx("button",{className:"dashboard-diary-remove",onClick:()=>he(dt.docId),title:"Remove this diary entry permanently",children:"REMOVE"})]}),T.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[T.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),T.jsx(lM,{entryId:dt.id})]})]})]})}),document.getElementById("modal-root"))}const Ca=ys.memo(Bt);function Qo(){const j={};return O.filter(re=>re.media_type===s).forEach(re=>{const le=Q[re.id];le&&[...le.flatrate||[],...le.rent||[],...le.buy||[]].forEach(de=>{j[de.provider_id]=de})}),Object.values(j)}const vi=N?O.filter(j=>{if(j.media_type!==s||j.archived)return!1;const re=Q[j.id];return re?[...re.flatrate||[],...re.rent||[],...re.buy||[]].some(le=>le.provider_id===N.provider_id):!1}):O.filter(j=>j.media_type===s&&!j.archived);function Ki({open:j,onClose:re,providers:le,onSelect:de}){return j?IE.createPortal(T.jsx("div",{className:"dashboard-modal-overlay",onClick:re,children:T.jsxs("div",{className:"dashboard-modal-content",onClick:fe=>fe.stopPropagation(),style:{maxWidth:440,padding:24},children:[T.jsx("button",{className:"dashboard-modal-close",onClick:re,"aria-label":"Close modal",type:"button",children:"×"}),T.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"Click to View Streaming Providers"}),T.jsx("div",{style:{margin:"0 0 12px 0",color:"#8fc7ff",fontSize:"1.02rem",textAlign:"center",fontWeight:500},children:"View all providers. Click on a provider icon below to filter your diary and see which shows can be watched for that provider."}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:le.map(fe=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${fe.logo_path}`,alt:fe.provider_name,title:fe.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:N&&N.provider_id===fe.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>{de(fe),x(fe)}},fe.provider_id))}),N&&T.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>x(null),children:"Show All Entries"}),T.jsx("div",{style:{marginTop:24},children:vi.length===0?T.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):T.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:vi.map(fe=>T.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0003",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center",cursor:"pointer"},onClick:()=>{Qt(fe),re()},children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:fe.poster,alt:fe.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:fe.title})]},fe.docId))})})]})}),document.getElementById("modal-root")):null}const _i=O.filter(j=>!j.archived&&j.media_type===s),En=O.filter(j=>j.archived&&j.media_type===s);function Qi(j){ke(j)}function Yi(j){kr({id:j.id,title:j.title||j.name,poster_path:j.poster_path,release_date:j.release_date||j.first_air_date,overview:j.overview,media_type:ve}),Tt(re=>re.filter(le=>le.id!==j.id))}function Vs(){const[j,re]=V.useState(!1);V.useEffect(()=>{function de(){re(window.scrollY>300)}return window.addEventListener("scroll",de),()=>window.removeEventListener("scroll",de)},[]);const le=()=>{window.scrollTo({top:0,behavior:"smooth"})};return j?T.jsx("button",{onClick:le,style:{position:"fixed",right:18,bottom:28,zIndex:9999,background:"rgba(37,96,156,0.93)",color:"#fff",border:"none",borderRadius:"50%",width:54,height:54,boxShadow:"0 3px 12px #0005",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,cursor:"pointer",touchAction:"manipulation"},"aria-label":"Back to top",className:"back-to-top-btn",children:T.jsx("span",{style:{fontSize:45,marginTop:-2},children:"↑"})}):null}const[Ur,jr]=V.useState([]),[Ei,zn]=V.useState(!0);V.useEffect(()=>{let j=!1;async function re(){if(!i)return;zn(!0);const le=ru(un(ze,`users/${i.uid}/notifications`),hh("read","==",!1),Fb("createdAt","desc")),fe=(await An(le)).docs.map(he=>({id:he.id,...he.data()}));j||(jr(fe),zn(!1))}return re(),()=>{j=!0}},[i,ze]);async function ks(j){i&&(await ma(Ut(ze,`users/${i.uid}/notifications`,j),{read:!0}),jr(Ur.filter(re=>re.id!==j)))}function Bn(){const[j,re]=V.useState(!1),[le,de]=V.useState(window.innerWidth<=700);V.useEffect(()=>{function he(){de(window.innerWidth<=700)}return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]);const fe=[{icon:T.jsx(wM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Search for a Show or Movie",text:"Use the search bar at the top to find movies or TV shows. Results come from TMDb."},{icon:T.jsx(bM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Add to Your Diary",text:"Click on a result to add it to your diary. Track what you’ve watched or want to watch."},{icon:T.jsx(yM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Mark as Watched/Unwatched",text:"Toggle the watched status for each diary entry to keep your list up to date."},{icon:T.jsx(XE,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Edit or Remove Entries",text:"Click a diary entry to view details, edit notes, or remove it from your diary."},{icon:T.jsx(AM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"View Streaming Providers",text:"See where you can stream each show or movie (US region by default)."},{icon:T.jsx(_M,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Join Discussions",text:"Add comments or replies to discuss shows with others. Upvote or downvote comments."},{icon:T.jsx(RM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Manage Your Profile",text:"Update your display name and view your activity stats at the top of the dashboard."},{icon:T.jsx(gM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Archive Entries",text:"Archive shows/movies you’ve finished or want to hide from your main list. Toggle “Show Archived” to view them."}];return T.jsxs("div",{children:[T.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginBottom:16},children:T.jsx("button",{onClick:()=>re(he=>!he),style:{background:"#8fc7ff",color:"#222",border:"none",borderRadius:9,padding:"0.39rem 1.2rem",fontWeight:800,fontSize:"1.08rem",cursor:"pointer",zIndex:2,boxShadow:"0 2px 8px #0002",transition:"background 0.2s",margin:"0 auto",minWidth:180},"aria-expanded":j,"aria-controls":"instructions-panel",children:j?"Hide Instructions":"Show Instructions"})}),j&&T.jsxs("div",{style:{background:"linear-gradient(135deg, #222a38 60%, #253a54 100%)",color:"#fff",borderRadius:18,marginBottom:32,boxShadow:"0 4px 24px #0004",padding:le?"1.2rem 0.5rem 1.5rem 0.5rem":"2.1rem 2.5rem 2.5rem 2.5rem",maxWidth:le?"100vw":900,width:le?"100vw":"100%",left:le?"50%":void 0,transform:le?"translateX(-50%)":void 0,position:le?"relative":void 0,boxSizing:"border-box",marginLeft:le?"calc(-50vw + 50%)":"auto",marginRight:le?"calc(-50vw + 50%)":"auto",transition:"all 0.2s",border:"1.5px solid #334e7e",overflowX:"hidden"},children:[T.jsx("div",{id:"instructions-panel",style:{marginTop:0,fontSize:"1.11rem",lineHeight:1.75,display:"grid",gridTemplateColumns:le?"1fr":"1fr 1fr",gap:le?"18px 0":"24px 36px",maxWidth:le?"98vw":900,margin:"0 auto",paddingBottom:8,boxSizing:"border-box",overflowX:"hidden"},children:fe.map((he,Be)=>T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:0,marginBottom:0,background:"rgba(20,30,50,0.18)",borderRadius:10,padding:"12px 14px",boxShadow:"0 1px 8px #0002",minHeight:72,boxSizing:"border-box",overflowX:"hidden"},children:[T.jsx("div",{style:{marginTop:2},children:he.icon}),T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:800,fontSize:"1.09rem",color:"#b0e0ff",marginBottom:3},children:he.title}),T.jsx("div",{style:{fontSize:"1.01rem",color:"#e5f4ff"},children:he.text})]})]},Be))}),T.jsx("hr",{style:{border:"none",borderTop:"1.5px solid #334e7e",margin:"32px 0 16px 0"}}),T.jsxs("div",{style:{marginTop:0,color:"#8fc7ff",fontSize:"1.08rem",textAlign:"center"},children:["Need more help? ",T.jsx("a",{href:"#",style:{color:"#fff",textDecoration:"underline",fontWeight:700},children:"Contact support"})," or ",T.jsx("a",{href:"#",style:{color:"#fff",textDecoration:"underline",fontWeight:700},children:"check the FAQ"}),"."]})]})]})}return V.useEffect(()=>{const j=sessionStorage.getItem("pendingEntryId");if(j&&O.length>0){const re=O.find(le=>{var de;return((de=le.docId||le.id||le.tmdbId)==null?void 0:de.toString())===j});if(re){me(re),sessionStorage.removeItem("pendingEntryId");const le=P.current[re.docId||re.id||re.tmdbId];le&&le.scrollIntoView&&le.scrollIntoView({behavior:"smooth",block:"center"})}}},[O]),T.jsxs(T.Fragment,{children:[Ur.map(j=>T.jsx(CM,{notification:j,onDismiss:()=>ks(j.id)},j.id)),T.jsx("div",{className:"dashboard-bg",children:T.jsxs("div",{className:"dashboard-content-wrapper",children:[T.jsx(Bn,{}),T.jsx("div",{className:"dashboard-banner",children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[T.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),W?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:Ee,onChange:j=>Pe(j.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:L,autoFocus:!0}),T.jsx("button",{onClick:Ms,disabled:L,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:T.jsx(vM,{})}),T.jsx("button",{onClick:gt,disabled:L,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:T.jsx(SM,{})})]}):T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:Ne}),T.jsx("button",{onClick:Ia,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:T.jsx(XE,{})})]})]}),ce&&T.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:ce}),T.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[T.jsx("button",{className:"dashboard-signout",onClick:async()=>{try{await e(),window.localStorage.clear(),window.sessionStorage.clear(),n("/"),window.location.reload()}catch{alert("Failed to sign out")}},style:{background:"#2a1b1b",color:"#ffb3b3",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},children:"Sign Out"}),Gi&&T.jsx("button",{className:"dashboard-admin-btn",style:{background:"#25609c",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},onClick:()=>n("/admin"),children:"Admin Dashboard"})]})]})}),T.jsxs("div",{className:"dashboard-search-section",children:[T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),T.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),T.jsxs("div",{className:"dashboard-search-toggle-row",children:[T.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),T.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),T.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:$o,children:[T.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows…*",value:u,onChange:j=>d(j.target.value)}),T.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),T.jsxs("div",{className:"dashboard-search-results",children:[w&&T.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:w}),!w&&m.length>0&&T.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(j=>T.jsxs("div",{className:"dashboard-trending-card",children:[T.jsx("img",{src:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:j.title||j.name,className:"dashboard-trending-poster"}),T.jsx("div",{className:"dashboard-trending-movie-title",children:j.title||j.name}),T.jsx("div",{className:"dashboard-trending-year",children:(j.release_date||j.first_air_date||"").slice(0,4)}),T.jsx("div",{className:"dashboard-trending-desc",children:j.overview?j.overview.slice(0,90)+(j.overview.length>90?"…":""):"No description."}),T.jsx("button",{className:"dashboard-trending-add",onClick:()=>kr(j),children:O.some(re=>re.id===j.id)?"IN DIARY":"ADD TO DIARY"})]},j.id))})]})]}),T.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"1.5rem 0"},children:T.jsx("ins",{className:"adsbygoogle",style:{display:"block",width:"100%",maxWidth:728,minHeight:90},"data-ad-client":"ca-pub-5502818698237515","data-ad-slot":"1749671682","data-ad-format":"auto"})}),T.jsxs("div",{className:"dashboard-diary-section",children:[T.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),T.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[T.jsx("button",{className:`dashboard-toggle${k?"":" active"}`,onClick:()=>C(!1),children:"My Diary"}),T.jsx("button",{className:`dashboard-toggle${k?" active":""}`,onClick:()=>C(!0),children:"Archived"})]}),T.jsx("div",{className:"dashboard-diary-providers-row",children:T.jsx("button",{className:"dashboard-providers-btn",onClick:()=>R(!0),title:"View all providers. Click on a provider icon to see which shows can be watched for that provider.",children:"Click to View Streaming Providers"})}),k?En.length===0?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No archived entries."}):T.jsx("div",{className:"dashboard-diary-cards-row",children:En.map(j=>(P.current[j.docId]||(P.current[j.docId]=V.createRef()),T.jsxs("section",{ref:re=>P.current[j.docId]=re,className:"dashboard-diary-card collapsed",children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:T.jsx("img",{src:j.poster,alt:j.title,className:"dashboard-diary-poster collapsed"})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:j.title}),T.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Qt(j),children:["Show More ",T.jsx(WE,{})]})]},j.docId)))}):_i.length===0?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):T.jsx("div",{className:"dashboard-diary-cards-row",children:_i.map(j=>(P.current[j.docId]||(P.current[j.docId]=V.createRef()),T.jsxs("section",{ref:re=>P.current[j.docId]=re,className:"dashboard-diary-card collapsed",children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:T.jsx("img",{src:j.poster,alt:j.title,className:"dashboard-diary-poster collapsed"})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:j.title}),T.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Qt(j),children:["Show More ",T.jsx(WE,{})]})]},j.docId)))})]}),T.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),T.jsxs("div",{className:"dashboard-trending-section",children:[T.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",ve==="movie"?"Movies":"TV Shows"]}),T.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[T.jsx("button",{className:ve==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Qi("movie"),children:"Movies"}),T.jsx("button",{className:ve==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Qi("tv"),children:"TV Shows"})]}),T.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:st?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading…"}):ni?T.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:ni}):we.filter(j=>!O.some(re=>re.id===j.id&&re.media_type===ve)).slice(0,10).map(j=>T.jsxs("div",{className:"dashboard-trending-card",children:[T.jsx("img",{src:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:j.title||j.name,className:"dashboard-trending-poster"}),T.jsx("div",{className:"dashboard-trending-movie-title",children:j.title||j.name}),T.jsx("div",{className:"dashboard-trending-year",children:(j.release_date||j.first_air_date||"").slice(0,4)}),T.jsx("div",{className:"dashboard-trending-desc",children:j.overview?j.overview.slice(0,90)+(j.overview.length>90?"…":""):"No description."}),T.jsx("button",{className:"dashboard-trending-add",onClick:()=>Yi(j),children:"ADD TO DIARY"})]},j.id))})]})]})}),ne&&T.jsx(Ca,{entry:ne,providersMap:Q,onClose:()=>me(null),onShare:Lr,onToggleWatched:$i,onRemove:Pr,onArchiveToggle:Ko,diary:O,contentRating:ye}),T.jsx(Ki,{open:S,onClose:()=>{R(!1),x(null)},providers:Qo(),onSelect:j=>x(j)}),T.jsx(Vs,{}),T.jsx(IM,{})]})}function NM(){const{currentUser:i,resendVerificationEmail:e,logout:n}=Vr(),[s,o]=V.useState(!1),[u,d]=V.useState(""),[m,p]=V.useState(!1),[g,E]=V.useState(!1),w=Fo(),I=async()=>{d("");try{await e(),o(!0)}catch{d("Failed to resend verification email.")}},O=async()=>{await n(),w("/login")},M=async()=>{p(!0),d("");try{await i.reload(),E(!0),i.emailVerified&&window.location.reload()}catch{d("Could not refresh status.")}p(!1)};return T.jsxs("div",{className:"verify-email-page",children:[T.jsxs("div",{className:"verify-branding",children:[T.jsx("img",{src:YA,alt:"Site Logo",className:"verify-logo"}),T.jsx("h2",{children:"Welcome to ShowsWatched!"})]}),T.jsxs("div",{className:"verify-card",children:[T.jsx("h3",{children:"Verify Your Email"}),T.jsxs("p",{children:["We have sent a verification link to ",T.jsx("b",{children:i==null?void 0:i.email}),".",T.jsx("br",{}),"Please check your inbox and click the link to verify your email address."]}),s&&T.jsx("p",{style:{color:"green"},children:"Verification email sent!"}),u&&T.jsx("p",{style:{color:"red"},children:u}),T.jsx("button",{onClick:I,disabled:m,children:"Resend Verification Email"}),T.jsx("button",{onClick:M,disabled:m,style:{marginLeft:"1rem"},children:m?"Checking...":"Refresh Status"}),T.jsx("button",{onClick:O,style:{marginLeft:"1rem",background:"#eee",color:"#333"},children:"Log Out"}),g&&!i.emailVerified&&T.jsx("p",{style:{color:"orange",marginTop:"1rem"},children:"Still not verified. Please try again after clicking the link in your email."})]})]})}function DM(){const{currentUser:i,emailVerified:e,loading:n}=Vr(),s=Fi();return V.useEffect(()=>{if(window.location.hash.startsWith("#entry-")){const o=window.location.hash.replace("#entry-","");o&&sessionStorage.setItem("pendingEntryId",o)}},[s]),n?null:T.jsxs(YN,{children:[T.jsx(hs,{path:"/login",element:T.jsx(Q4,{})}),T.jsx(hs,{path:"/signup",element:T.jsx(Y4,{})}),T.jsx(hs,{path:"/verify-email",element:T.jsx(NM,{})}),T.jsx(hs,{path:"/admin",element:T.jsx(KE,{children:i&&!e?T.jsx(_r,{to:"/verify-email",replace:!0}):T.jsx(iM,{})})}),T.jsx(hs,{path:"/dashboard",element:T.jsx(KE,{children:i&&!e?T.jsx(_r,{to:"/verify-email",replace:!0}):T.jsx(xM,{})})}),T.jsx(hs,{path:"/",element:!n&&!i&&sessionStorage.getItem("pendingEntryId")?T.jsx(_r,{to:"/login",replace:!0,state:{fromShared:!0}}):i?e?T.jsx(_r,{to:"/dashboard",replace:!0}):T.jsx(_r,{to:"/verify-email",replace:!0}):T.jsx(oM,{})}),T.jsx(hs,{path:"*",element:i&&!e?T.jsx(_r,{to:"/verify-email",replace:!0}):T.jsx(_r,{to:"/",replace:!0})})]})}QA.createRoot(document.getElementById("root")).render(T.jsx(V.StrictMode,{children:T.jsx(_D,{basename:"/showswatched2",children:T.jsx(K4,{children:T.jsx(DM,{})})})}));
