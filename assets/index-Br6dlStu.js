(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function eT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bm={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function qA(){if(K_)return Wl;K_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Wl.Fragment=e,Wl.jsx=n,Wl.jsxs=n,Wl}var Q_;function HA(){return Q_||(Q_=1,bm.exports=qA()),bm.exports}var _=HA(),wm={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function FA(){if(Y_)return ke;Y_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function I(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Q={};function U(L,ie,ce){this.props=L,this.context=ie,this.refs=Q,this.updater=ce||O}U.prototype.isReactComponent={},U.prototype.setState=function(L,ie){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ie,"setState")},U.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function G(){}G.prototype=U.prototype;function re(L,ie,ce){this.props=L,this.context=ie,this.refs=Q,this.updater=ce||O}var Z=re.prototype=new G;Z.constructor=re,M(Z,U.prototype),Z.isPureReactComponent=!0;var he=Array.isArray,ue={H:null,A:null,T:null,S:null,V:null},we=Object.prototype.hasOwnProperty;function V(L,ie,ce,se,pe,Pe){return ce=Pe.ref,{$$typeof:i,type:L,key:ie,ref:ce!==void 0?ce:null,props:Pe}}function S(L,ie){return V(L.type,ie,void 0,void 0,void 0,L.props)}function A(L){return typeof L=="object"&&L!==null&&L.$$typeof===i}function N(L){var ie={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ce){return ie[ce]})}var x=/\/+/g;function P(L,ie){return typeof L=="object"&&L!==null&&L.key!=null?N(""+L.key):ie.toString(36)}function C(){}function Ne(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(C,C):(L.status="pending",L.then(function(ie){L.status==="pending"&&(L.status="fulfilled",L.value=ie)},function(ie){L.status==="pending"&&(L.status="rejected",L.reason=ie)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Oe(L,ie,ce,se,pe){var Pe=typeof L;(Pe==="undefined"||Pe==="boolean")&&(L=null);var Se=!1;if(L===null)Se=!0;else switch(Pe){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(L.$$typeof){case i:case e:Se=!0;break;case T:return Se=L._init,Oe(Se(L._payload),ie,ce,se,pe)}}if(Se)return pe=pe(L),Se=se===""?"."+P(L,0):se,he(pe)?(ce="",Se!=null&&(ce=Se.replace(x,"$&/")+"/"),Oe(pe,ie,ce,"",function(vn){return vn})):pe!=null&&(A(pe)&&(pe=S(pe,ce+(pe.key==null||L&&L.key===pe.key?"":(""+pe.key).replace(x,"$&/")+"/")+Se)),ie.push(pe)),1;Se=0;var Et=se===""?".":se+":";if(he(L))for(var rt=0;rt<L.length;rt++)se=L[rt],Pe=Et+P(se,rt),Se+=Oe(se,ie,ce,Pe,pe);else if(rt=I(L),typeof rt=="function")for(L=rt.call(L),rt=0;!(se=L.next()).done;)se=se.value,Pe=Et+P(se,rt++),Se+=Oe(se,ie,ce,Pe,pe);else if(Pe==="object"){if(typeof L.then=="function")return Oe(Ne(L),ie,ce,se,pe);throw ie=String(L),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Se}function W(L,ie,ce){if(L==null)return L;var se=[],pe=0;return Oe(L,se,"","",function(Pe){return ie.call(ce,Pe,pe++)}),se}function oe(L){if(L._status===-1){var ie=L._result;ie=ie(),ie.then(function(ce){(L._status===0||L._status===-1)&&(L._status=1,L._result=ce)},function(ce){(L._status===0||L._status===-1)&&(L._status=2,L._result=ce)}),L._status===-1&&(L._status=0,L._result=ie)}if(L._status===1)return L._result.default;throw L._result}var ye=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Le(){}return ke.Children={map:W,forEach:function(L,ie,ce){W(L,function(){ie.apply(this,arguments)},ce)},count:function(L){var ie=0;return W(L,function(){ie++}),ie},toArray:function(L){return W(L,function(ie){return ie})||[]},only:function(L){if(!A(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ke.Component=U,ke.Fragment=n,ke.Profiler=o,ke.PureComponent=re,ke.StrictMode=s,ke.Suspense=p,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,ke.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ue.H.useMemoCache(L)}},ke.cache=function(L){return function(){return L.apply(null,arguments)}},ke.cloneElement=function(L,ie,ce){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var se=M({},L.props),pe=L.key,Pe=void 0;if(ie!=null)for(Se in ie.ref!==void 0&&(Pe=void 0),ie.key!==void 0&&(pe=""+ie.key),ie)!we.call(ie,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ie.ref===void 0||(se[Se]=ie[Se]);var Se=arguments.length-2;if(Se===1)se.children=ce;else if(1<Se){for(var Et=Array(Se),rt=0;rt<Se;rt++)Et[rt]=arguments[rt+2];se.children=Et}return V(L.type,pe,void 0,void 0,Pe,se)},ke.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},ke.createElement=function(L,ie,ce){var se,pe={},Pe=null;if(ie!=null)for(se in ie.key!==void 0&&(Pe=""+ie.key),ie)we.call(ie,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(pe[se]=ie[se]);var Se=arguments.length-2;if(Se===1)pe.children=ce;else if(1<Se){for(var Et=Array(Se),rt=0;rt<Se;rt++)Et[rt]=arguments[rt+2];pe.children=Et}if(L&&L.defaultProps)for(se in Se=L.defaultProps,Se)pe[se]===void 0&&(pe[se]=Se[se]);return V(L,Pe,void 0,void 0,null,pe)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(L){return{$$typeof:m,render:L}},ke.isValidElement=A,ke.lazy=function(L){return{$$typeof:T,_payload:{_status:-1,_result:L},_init:oe}},ke.memo=function(L,ie){return{$$typeof:g,type:L,compare:ie===void 0?null:ie}},ke.startTransition=function(L){var ie=ue.T,ce={};ue.T=ce;try{var se=L(),pe=ue.S;pe!==null&&pe(ce,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Le,ye)}catch(Pe){ye(Pe)}finally{ue.T=ie}},ke.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},ke.use=function(L){return ue.H.use(L)},ke.useActionState=function(L,ie,ce){return ue.H.useActionState(L,ie,ce)},ke.useCallback=function(L,ie){return ue.H.useCallback(L,ie)},ke.useContext=function(L){return ue.H.useContext(L)},ke.useDebugValue=function(){},ke.useDeferredValue=function(L,ie){return ue.H.useDeferredValue(L,ie)},ke.useEffect=function(L,ie,ce){var se=ue.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(L,ie)},ke.useId=function(){return ue.H.useId()},ke.useImperativeHandle=function(L,ie,ce){return ue.H.useImperativeHandle(L,ie,ce)},ke.useInsertionEffect=function(L,ie){return ue.H.useInsertionEffect(L,ie)},ke.useLayoutEffect=function(L,ie){return ue.H.useLayoutEffect(L,ie)},ke.useMemo=function(L,ie){return ue.H.useMemo(L,ie)},ke.useOptimistic=function(L,ie){return ue.H.useOptimistic(L,ie)},ke.useReducer=function(L,ie,ce){return ue.H.useReducer(L,ie,ce)},ke.useRef=function(L){return ue.H.useRef(L)},ke.useState=function(L){return ue.H.useState(L)},ke.useSyncExternalStore=function(L,ie,ce){return ue.H.useSyncExternalStore(L,ie,ce)},ke.useTransition=function(){return ue.H.useTransition()},ke.version="19.1.0",ke}var W_;function Ap(){return W_||(W_=1,wm.exports=FA()),wm.exports}var k=Ap();const ma=eT(k);var Sm={exports:{}},Xl={},Am={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function GA(){return X_||(X_=1,function(i){function e(W,oe){var ye=W.length;W.push(oe);e:for(;0<ye;){var Le=ye-1>>>1,L=W[Le];if(0<o(L,oe))W[Le]=oe,W[ye]=L,ye=Le;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var oe=W[0],ye=W.pop();if(ye!==oe){W[0]=ye;e:for(var Le=0,L=W.length,ie=L>>>1;Le<ie;){var ce=2*(Le+1)-1,se=W[ce],pe=ce+1,Pe=W[pe];if(0>o(se,ye))pe<L&&0>o(Pe,se)?(W[Le]=Pe,W[pe]=ye,Le=pe):(W[Le]=se,W[ce]=ye,Le=ce);else if(pe<L&&0>o(Pe,ye))W[Le]=Pe,W[pe]=ye,Le=pe;else break e}}return oe}function o(W,oe){var ye=W.sortIndex-oe.sortIndex;return ye!==0?ye:W.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],g=[],T=1,w=null,I=3,O=!1,M=!1,Q=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function he(W){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=W)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function ue(W){if(Q=!1,he(W),!M)if(n(p)!==null)M=!0,we||(we=!0,P());else{var oe=n(g);oe!==null&&Oe(ue,oe.startTime-W)}}var we=!1,V=-1,S=5,A=-1;function N(){return U?!0:!(i.unstable_now()-A<S)}function x(){if(U=!1,we){var W=i.unstable_now();A=W;var oe=!0;try{e:{M=!1,Q&&(Q=!1,re(V),V=-1),O=!0;var ye=I;try{t:{for(he(W),w=n(p);w!==null&&!(w.expirationTime>W&&N());){var Le=w.callback;if(typeof Le=="function"){w.callback=null,I=w.priorityLevel;var L=Le(w.expirationTime<=W);if(W=i.unstable_now(),typeof L=="function"){w.callback=L,he(W),oe=!0;break t}w===n(p)&&s(p),he(W)}else s(p);w=n(p)}if(w!==null)oe=!0;else{var ie=n(g);ie!==null&&Oe(ue,ie.startTime-W),oe=!1}}break e}finally{w=null,I=ye,O=!1}oe=void 0}}finally{oe?P():we=!1}}}var P;if(typeof Z=="function")P=function(){Z(x)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ne=C.port2;C.port1.onmessage=x,P=function(){Ne.postMessage(null)}}else P=function(){G(x,0)};function Oe(W,oe){V=G(function(){W(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(W){switch(I){case 1:case 2:case 3:var oe=3;break;default:oe=I}var ye=I;I=oe;try{return W()}finally{I=ye}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ye=I;I=W;try{return oe()}finally{I=ye}},i.unstable_scheduleCallback=function(W,oe,ye){var Le=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Le+ye:Le):ye=Le,W){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ye+L,W={id:T++,callback:oe,priorityLevel:W,startTime:ye,expirationTime:L,sortIndex:-1},ye>Le?(W.sortIndex=ye,e(g,W),n(p)===null&&W===n(g)&&(Q?(re(V),V=-1):Q=!0,Oe(ue,ye-Le))):(W.sortIndex=L,e(p,W),M||O||(M=!0,we||(we=!0,P()))),W},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(W){var oe=I;return function(){var ye=I;I=oe;try{return W.apply(this,arguments)}finally{I=ye}}}}(Rm)),Rm}var Z_;function $A(){return Z_||(Z_=1,Am.exports=GA()),Am.exports}var Im={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function KA(){if(J_)return sn;J_=1;var i=Ap();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,sn.createPortal=function(p,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,T)},sn.flushSync=function(p){var g=d.T,T=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=T,s.d.f()}},sn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},sn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},sn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var T=g.as,w=m(T,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:I,fetchPriority:O}):T==="script"&&s.d.X(p,{crossOrigin:w,integrity:I,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},sn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,w=m(T,g.crossOrigin);s.d.L(p,T,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(p,g){if(typeof p=="string")if(g){var T=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},sn.requestFormReset=function(p){s.d.r(p)},sn.unstable_batchedUpdates=function(p,g){return p(g)},sn.useFormState=function(p,g,T){return d.H.useFormState(p,g,T)},sn.useFormStatus=function(){return d.H.useHostTransitionStatus()},sn.version="19.1.0",sn}var e0;function tT(){if(e0)return Im.exports;e0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=KA(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function QA(){if(t0)return Xl;t0=1;var i=$A(),e=Ap(),n=tT();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,b=h.child;b;){if(b===a){E=!0,a=h,l=f;break}if(b===l){E=!0,l=h,a=f;break}b=b.sibling}if(!E){for(b=f.child;b;){if(b===a){E=!0,a=f,l=h;break}if(b===l){E=!0,l=f,a=h;break}b=b.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),re=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case U:return"Profiler";case Q:return"StrictMode";case ue:return"Suspense";case we:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case Z:return(t.displayName||"Context")+".Provider";case re:return(t._context.displayName||"Context")+".Consumer";case he:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:Ne(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return Ne(t(r))}catch{}}return null}var Oe=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Le=[],L=-1;function ie(t){return{current:t}}function ce(t){0>L||(t.current=Le[L],Le[L]=null,L--)}function se(t,r){L++,Le[L]=t.current,t.current=r}var pe=ie(null),Pe=ie(null),Se=ie(null),Et=ie(null);function rt(t,r){switch(se(Se,r),se(Pe,t),se(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?T_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=T_(r),t=b_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ce(pe),se(pe,t)}function vn(){ce(pe),ce(Pe),ce(Se)}function ei(t){t.memoizedState!==null&&se(Et,t);var r=pe.current,a=b_(r,t.type);r!==a&&(se(Pe,t),se(pe,a))}function In(t){Pe.current===t&&(ce(pe),ce(Pe)),Et.current===t&&(ce(Et),Gl._currentValue=ye)}var gi=Object.prototype.hasOwnProperty,yi=i.unstable_scheduleCallback,Ki=i.unstable_cancelCallback,Os=i.unstable_shouldYield,Ms=i.unstable_requestPaint,hn=i.unstable_now,Ko=i.unstable_getCurrentPriorityLevel,Qi=i.unstable_ImmediatePriority,Vr=i.unstable_UserBlockingPriority,Yi=i.unstable_NormalPriority,Qo=i.unstable_LowPriority,Pr=i.unstable_IdlePriority,ks=i.log,xa=i.unstable_setDisableYieldValue,mt=null,Ze=null;function Kt(t){if(typeof ks=="function"&&xa(t),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(mt,t)}catch{}}var zt=Math.clz32?Math.clz32:vi,Vs=Math.log,Yo=Math.LN2;function vi(t){return t>>>=0,t===0?32:31-(Vs(t)/Yo|0)|0}var _i=256,Ei=4194304;function Cn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Lr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~f,l!==0?h=Cn(l):(E&=b,E!==0?h=Cn(E):a||(a=b&~t,a!==0&&(h=Cn(a))))):(b=l&~f,b!==0?h=Cn(b):E!==0?h=Cn(E):a||(a=l&~t,a!==0&&(h=Cn(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Ti(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function jr(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Na(){var t=_i;return _i<<=1,(_i&4194048)===0&&(_i=256),t}function Ur(){var t=Ei;return Ei<<=1,(Ei&62914560)===0&&(Ei=4194304),t}function ti(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function ni(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function zr(t,r,a,l,h,f){var E=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=E&~a;0<a;){var X=31-zt(a),te=1<<X;b[X]=0,D[X]=-1;var $=F[X];if($!==null)for(F[X]=null,X=0;X<$.length;X++){var K=$[X];K!==null&&(K.lane&=-536870913)}a&=~te}l!==0&&Un(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(E&~r))}function Un(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-zt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function B(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-zt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function ae(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function me(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function _e(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:B_(t.type))}function Ee(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var ve=Math.random().toString(36).slice(2),Ge="__reactFiber$"+ve,We="__reactProps$"+ve,Tt="__reactContainer$"+ve,nn="__reactEvents$"+ve,Wi="__reactListeners$"+ve,ut="__reactHandles$"+ve,Wo="__reactResources$"+ve,ct="__reactMarker$"+ve;function bi(t){delete t[Ge],delete t[We],delete t[nn],delete t[Wi],delete t[ut]}function Xi(t){var r=t[Ge];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Tt]||a[Ge]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=R_(t);t!==null;){if(a=t[Ge])return a;t=R_(t)}return r}t=a,a=t.parentNode}return null}function wi(t){if(t=t[Ge]||t[Tt]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Si(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function dn(t){var r=t[Wo];return r||(r=t[Wo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(t){t[ct]=!0}var Xo=new Set,Da={};function ii(t,r){Zi(t,r),Zi(t+"Capture",r)}function Zi(t,r){for(Da[t]=r,t=0;t<r.length;t++)Xo.add(r[t])}var qu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hu={},Ps={};function Fu(t){return gi.call(Ps,t)?!0:gi.call(Hu,t)?!1:qu.test(t)?Ps[t]=!0:(Hu[t]=!0,!1)}function Br(t,r,a){if(Fu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Ai(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Qt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Ls,Gu;function Ji(t){if(Ls===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ls=r&&r[1]||"",Gu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ls+t+Gu}var Oa=!1;function Ma(t,r){if(!t||Oa)return"";Oa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var $=K}Reflect.construct(t,[],te)}else{try{te.call()}catch(K){$=K}t.call(te.prototype)}}else{try{throw Error()}catch(K){$=K}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&$&&typeof K.stack=="string")return[K.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],b=f[1];if(E&&b){var D=E.split(`
`),F=b.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var X=`
`+D[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{Oa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ji(a):""}function Zo(t){switch(t.tag){case 26:case 27:case 5:return Ji(t.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 15:return Ma(t.type,!1);case 11:return Ma(t.type.render,!1);case 1:return Ma(t.type,!0);case 31:return Ji("Activity");default:return""}}function ka(t){try{var r="";do r+=Zo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ad(t){var r=Jo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Va(t){t._valueTracker||(t._valueTracker=Ad(t))}function el(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Jo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function js(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rd=/[\n"\\]/g;function xt(t){return t.replace(Rd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function xn(t,r,a,l,h,f,E,b){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),r!=null?E==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+fn(r)):t.value!==""+fn(r)&&(t.value=""+fn(r)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),r!=null?qr(t,E,fn(r)):a!=null?qr(t,E,fn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+fn(b):t.removeAttribute("name")}function Us(t,r,a,l,h,f,E,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+fn(a):"",r=r!=null?""+fn(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function qr(t,r,a){r==="number"&&js(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function er(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+fn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function st(t,r,a){if(r!=null&&(r=""+fn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+fn(a):""}function zs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=fn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function zn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Bs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $u(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Bs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function tl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&$u(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&$u(t,f,r[f])}function nl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(t){return Cd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var tr=null;function Bn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nr=null,ir=null;function il(t){var r=wi(t);if(r&&(t=r.stateNode)){var a=t[We]||null;e:switch(t=r.stateNode,r.type){case"input":if(xn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[We]||null;if(!h)throw Error(s(90));xn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&el(l)}break e;case"textarea":st(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&er(t,!!a.multiple,r,!1)}}}var Ri=!1;function Ku(t,r,a){if(Ri)return t(r,a);Ri=!0;try{var l=t(r);return l}finally{if(Ri=!1,(nr!==null||ir!==null)&&(zc(),nr&&(r=nr,t=ir,ir=nr=null,il(r),t)))for(r=0;r<t.length;r++)il(t[r])}}function qs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[We]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(ri)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{qn=!1}var Ii=null,Hr=null,rr=null;function rl(){if(rr)return rr;var t,r=Hr,a=r.length,l,h="value"in Ii?Ii.value:Ii.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var E=a-t;for(l=1;l<=E&&r[a-l]===h[f-l];l++);return rr=h.slice(t,1<l?1-l:void 0)}function Ci(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function xi(){return!0}function sl(){return!1}function Bt(t){function r(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?xi:sl,this.isPropagationStopped=sl,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),r}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Bt(et),Fs=T({},et,{view:0,detail:0}),Qu=Bt(Fs),ja,Ua,Ni,Gs=T({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ni&&(Ni&&t.type==="mousemove"?(ja=t.screenX-Ni.screenX,Ua=t.screenY-Ni.screenY):Ua=ja=0,Ni=t),ja)},movementY:function(t){return"movementY"in t?t.movementY:Ua}}),Hn=Bt(Gs),Yu=T({},Gs,{dataTransfer:0}),xd=Bt(Yu),$s=T({},Fs,{relatedTarget:0}),za=Bt($s),al=T({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=Bt(al),Wu=T({},et,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qa=Bt(Wu),Nd=T({},et,{data:0}),ol=Bt(Nd),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Zu[t])?!!r[t]:!1}function Qs(){return ll}var Ju=T({},Fs,{key:function(t){if(t.key){var r=Ks[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ci(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(t){return t.type==="keypress"?Ci(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ci(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ha=Bt(Ju),ec=T({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=Bt(ec),sr=T({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),tc=Bt(sr),nc=T({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),ic=Bt(nc),rc=T({},Gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Fa=Bt(rc),mn=T({},et,{newState:0,oldState:0}),sc=Bt(mn),ac=[9,13,27,32],Di=ri&&"CompositionEvent"in window,c=null;ri&&"documentMode"in document&&(c=document.documentMode);var y=ri&&"TextEvent"in window&&!c,v=ri&&(!Di||c&&8<c&&11>=c),R=" ",q=!1;function Y(t,r){switch(t){case"keyup":return ac.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $e=!1;function kt(t,r){switch(t){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(q=!0,R);case"textInput":return t=r.data,t===R&&q?null:t;default:return null}}function Ke(t,r){if($e)return t==="compositionend"||!Di&&Y(t,r)?(t=rl(),rr=Hr=Ii=null,$e=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!qt[t.type]:r==="textarea"}function ar(t,r,a,l){nr?ir?ir.push(l):ir=[l]:nr=l,r=$c(r,"onChange"),0<r.length&&(a=new La("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Yt=null,Oi=null;function cl(t){g_(t,0)}function oc(t){var r=Si(t);if(el(r))return t}function Lg(t,r){if(t==="change")return r}var jg=!1;if(ri){var Dd;if(ri){var Od="oninput"in document;if(!Od){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Od=typeof Ug.oninput=="function"}Dd=Od}else Dd=!1;jg=Dd&&(!document.documentMode||9<document.documentMode)}function zg(){Yt&&(Yt.detachEvent("onpropertychange",Bg),Oi=Yt=null)}function Bg(t){if(t.propertyName==="value"&&oc(Oi)){var r=[];ar(r,Oi,t,Bn(t)),Ku(cl,r)}}function vS(t,r,a){t==="focusin"?(zg(),Yt=r,Oi=a,Yt.attachEvent("onpropertychange",Bg)):t==="focusout"&&zg()}function _S(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oc(Oi)}function ES(t,r){if(t==="click")return oc(r)}function TS(t,r){if(t==="input"||t==="change")return oc(r)}function bS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:bS;function hl(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!gi.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hg(t,r){var a=qg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qg(a)}}function Fg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Fg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Gg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=js(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=js(t.document)}return r}function Md(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var wS=ri&&"documentMode"in document&&11>=document.documentMode,Ga=null,kd=null,dl=null,Vd=!1;function $g(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vd||Ga==null||Ga!==js(l)||(l=Ga,"selectionStart"in l&&Md(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),dl&&hl(dl,l)||(dl=l,l=$c(kd,"onSelect"),0<l.length&&(r=new La("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ga)))}function Ys(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var $a={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Pd={},Kg={};ri&&(Kg=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Ws(t){if(Pd[t])return Pd[t];if(!$a[t])return t;var r=$a[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Kg)return Pd[t]=r[a];return t}var Qg=Ws("animationend"),Yg=Ws("animationiteration"),Wg=Ws("animationstart"),SS=Ws("transitionrun"),AS=Ws("transitionstart"),RS=Ws("transitioncancel"),Xg=Ws("transitionend"),Zg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function si(t,r){Zg.set(t,r),ii(r,[t])}var Jg=new WeakMap;function Fn(t,r){if(typeof t=="object"&&t!==null){var a=Jg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ka(r)},Jg.set(t,r),r)}return{value:t,source:r,stack:ka(r)}}var Gn=[],Ka=0,jd=0;function lc(){for(var t=Ka,r=jd=Ka=0;r<t;){var a=Gn[r];Gn[r++]=null;var l=Gn[r];Gn[r++]=null;var h=Gn[r];Gn[r++]=null;var f=Gn[r];if(Gn[r++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&ey(a,h,f)}}function uc(t,r,a,l){Gn[Ka++]=t,Gn[Ka++]=r,Gn[Ka++]=a,Gn[Ka++]=l,jd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ud(t,r,a,l){return uc(t,r,a,l),cc(t)}function Qa(t,r){return uc(t,null,null,r),cc(t)}function ey(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-zt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function cc(t){if(50<Ll)throw Ll=0,$f=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ya={};function IS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new IS(t,r,a,l)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function or(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ty(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function hc(t,r,a,l,h,f){var E=0;if(l=t,typeof t=="function")zd(t)&&(E=1);else if(typeof t=="string")E=xA(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Dn(31,a,r,h),t.elementType=A,t.lanes=f,t;case M:return Xs(a.children,h,f,r);case Q:E=8,h|=24;break;case U:return t=Dn(12,a,r,h|2),t.elementType=U,t.lanes=f,t;case ue:return t=Dn(13,a,r,h),t.elementType=ue,t.lanes=f,t;case we:return t=Dn(19,a,r,h),t.elementType=we,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G:case Z:E=10;break e;case re:E=9;break e;case he:E=11;break e;case V:E=14;break e;case S:E=16,l=null;break e}E=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Dn(E,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Xs(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function Bd(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function qd(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Wa=[],Xa=0,dc=null,fc=0,$n=[],Kn=0,Zs=null,lr=1,ur="";function Js(t,r){Wa[Xa++]=fc,Wa[Xa++]=dc,dc=t,fc=r}function ny(t,r,a){$n[Kn++]=lr,$n[Kn++]=ur,$n[Kn++]=Zs,Zs=t;var l=lr;t=ur;var h=32-zt(l)-1;l&=~(1<<h),a+=1;var f=32-zt(r)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,lr=1<<32-zt(r)+h|a<<h|l,ur=f+t}else lr=1<<f|a<<h|l,ur=t}function Hd(t){t.return!==null&&(Js(t,1),ny(t,1,0))}function Fd(t){for(;t===dc;)dc=Wa[--Xa],Wa[Xa]=null,fc=Wa[--Xa],Wa[Xa]=null;for(;t===Zs;)Zs=$n[--Kn],$n[Kn]=null,ur=$n[--Kn],$n[Kn]=null,lr=$n[--Kn],$n[Kn]=null}var pn=null,bt=null,Je=!1,ea=null,Mi=!1,Gd=Error(s(519));function ta(t){var r=Error(s(418,""));throw pl(Fn(r,t)),Gd}function iy(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[Ge]=t,r[We]=l,a){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(a=0;a<Ul.length;a++)qe(Ul[a],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":qe("invalid",r),Us(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Va(r);break;case"select":qe("invalid",r);break;case"textarea":qe("invalid",r),zs(r,l.value,l.defaultValue,l.children),Va(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||E_(r.textContent,a)?(l.popover!=null&&(qe("beforetoggle",r),qe("toggle",r)),l.onScroll!=null&&qe("scroll",r),l.onScrollEnd!=null&&qe("scrollend",r),l.onClick!=null&&(r.onclick=Kc),r=!0):r=!1,r||ta(t)}function ry(t){for(pn=t.return;pn;)switch(pn.tag){case 5:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:pn=pn.return}}function fl(t){if(t!==pn)return!1;if(!Je)return ry(t),Je=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||lm(t.type,t.memoizedProps)),a=!a),a&&bt&&ta(t),ry(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){bt=oi(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}bt=null}}else r===27?(r=bt,ss(t.type)?(t=dm,dm=null,bt=t):bt=r):bt=pn?oi(t.stateNode.nextSibling):null;return!0}function ml(){bt=pn=null,Je=!1}function sy(){var t=ea;return t!==null&&(Tn===null?Tn=t:Tn.push.apply(Tn,t),ea=null),t}function pl(t){ea===null?ea=[t]:ea.push(t)}var $d=ie(null),na=null,cr=null;function Fr(t,r,a){se($d,r._currentValue),r._currentValue=a}function hr(t){t._currentValue=$d.current,ce($d)}function Kd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Qd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=h;for(var D=0;D<r.length;D++)if(b.context===r[D]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),Kd(f.return,a,t),l||(E=null);break e}f=b.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(s(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),Kd(E,a,t),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===t){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function gl(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var b=h.type;Nn(h.pendingProps.value,E.value)||(t!==null?t.push(b):t=[b])}}else if(h===Et.current){if(E=h.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Gl):t=[Gl])}h=h.return}t!==null&&Qd(r,t,a,l),r.flags|=262144}function mc(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ia(t){na=t,cr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return ay(na,t)}function pc(t,r){return na===null&&ia(t),ay(t,r)}function ay(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},cr===null){if(t===null)throw Error(s(308));cr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else cr=cr.next=r;return a}var CS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},xS=i.unstable_scheduleCallback,NS=i.unstable_NormalPriority,Pt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new CS,data:new Map,refCount:0}}function yl(t){t.refCount--,t.refCount===0&&xS(NS,function(){t.controller.abort()})}var vl=null,Wd=0,Za=0,Ja=null;function DS(t,r){if(vl===null){var a=vl=[];Wd=0,Za=Jf(),Ja={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wd++,r.then(oy,oy),r}function oy(){if(--Wd===0&&vl!==null){Ja!==null&&(Ja.status="fulfilled");var t=vl;vl=null,Za=0,Ja=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function OS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var ly=W.S;W.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&DS(t,r),ly!==null&&ly(t,r)};var ra=ie(null);function Xd(){var t=ra.current;return t!==null?t:dt.pooledCache}function gc(t,r){r===null?se(ra,ra.current):se(ra,r.pool)}function uy(){var t=Xd();return t===null?null:{parent:Pt._currentValue,pool:t}}var _l=Error(s(460)),cy=Error(s(474)),yc=Error(s(542)),Zd={then:function(){}};function hy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function vc(){}function dy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(vc,vc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,my(t),t;default:if(typeof r.status=="string")r.then(vc,vc);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,my(t),t}throw El=r,_l}}var El=null;function fy(){if(El===null)throw Error(s(459));var t=El;return El=null,t}function my(t){if(t===_l||t===yc)throw Error(s(483))}var Gr=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $r(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Kr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(nt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=cc(t),ey(t,null,a),r}return uc(t,l,r,a),cc(t)}function Tl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,B(t,a)}}function tf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var nf=!1;function bl(){if(nf){var t=Ja;if(t!==null)throw t}}function wl(t,r,a,l){nf=!1;var h=t.updateQueue;Gr=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var D=b,F=D.next;D.next=null,E===null?f=F:E.next=F,E=D;var X=t.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==E&&(b===null?X.firstBaseUpdate=F:b.next=F,X.lastBaseUpdate=D))}if(f!==null){var te=h.baseState;E=0,X=F=D=null,b=f;do{var $=b.lane&-536870913,K=$!==b.lane;if(K?(Qe&$)===$:(l&$)===$){$!==0&&$===Za&&(nf=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ce=t,Ae=b;$=r;var lt=a;switch(Ae.tag){case 1:if(Ce=Ae.payload,typeof Ce=="function"){te=Ce.call(lt,te,$);break e}te=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ae.payload,$=typeof Ce=="function"?Ce.call(lt,te,$):Ce,$==null)break e;te=T({},te,$);break e;case 2:Gr=!0}}$=b.callback,$!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[$]:K.push($))}else K={lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(F=X=K,D=te):X=X.next=K,E|=$;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;K=b,b=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);X===null&&(D=te),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=X,f===null&&(h.shared.lanes=0),ts|=E,t.lanes=E,t.memoizedState=te}}function py(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function gy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)py(a[t],r)}var eo=ie(null),_c=ie(0);function yy(t,r){t=vr,se(_c,t),se(eo,r),vr=t|r.baseLanes}function rf(){se(_c,vr),se(eo,eo.current)}function sf(){vr=_c.current,ce(eo),ce(_c)}var Qr=0,je=null,at=null,Nt=null,Ec=!1,to=!1,sa=!1,Tc=0,Sl=0,no=null,MS=0;function Rt(){throw Error(s(321))}function af(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nn(t[a],r[a]))return!1;return!0}function of(t,r,a,l,h,f){return Qr=f,je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=t===null||t.memoizedState===null?ev:tv,sa=!1,f=a(l,h),sa=!1,to&&(f=_y(r,a,l,h)),vy(t),f}function vy(t){W.H=Ic;var r=at!==null&&at.next!==null;if(Qr=0,Nt=at=je=null,Ec=!1,Sl=0,no=null,r)throw Error(s(300));t===null||Ht||(t=t.dependencies,t!==null&&mc(t)&&(Ht=!0))}function _y(t,r,a,l){je=t;var h=0;do{if(to&&(no=null),Sl=0,to=!1,25<=h)throw Error(s(301));if(h+=1,Nt=at=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=zS,f=r(a,l)}while(to);return f}function kS(){var t=W.H,r=t.useState()[0];return r=typeof r.then=="function"?Al(r):r,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(je.flags|=1024),r}function lf(){var t=Tc!==0;return Tc=0,t}function uf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function cf(t){if(Ec){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Ec=!1}Qr=0,Nt=at=je=null,to=!1,Sl=Tc=0,no=null}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?je.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Dt(){if(at===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var r=Nt===null?je.memoizedState:Nt.next;if(r!==null)Nt=r,at=t;else{if(t===null)throw je.alternate===null?Error(s(467)):Error(s(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Nt===null?je.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Al(t){var r=Sl;return Sl+=1,no===null&&(no=[]),t=dy(no,t,r),r=je,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?ev:tv),t}function bc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Al(t);if(t.$$typeof===Z)return rn(t)}throw Error(s(438,String(t)))}function df(t){var r=null,a=je.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=hf(),je.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=N;return r.index++,a}function dr(t,r){return typeof r=="function"?r(t):r}function wc(t){var r=Dt();return ff(r,at,t)}function ff(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var b=E=null,D=null,F=r,X=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Qe&te)===te:(Qr&te)===te){var $=F.revertLane;if($===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===Za&&(X=!0);else if((Qr&$)===$){F=F.next,$===Za&&(X=!0);continue}else te={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=te,E=f):D=D.next=te,je.lanes|=$,ts|=$;te=F.action,sa&&a(f,te),f=F.hasEagerState?F.eagerState:a(f,te)}else $={lane:te,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=$,E=f):D=D.next=$,je.lanes|=te,ts|=te;F=F.next}while(F!==null&&F!==r);if(D===null?E=f:D.next=b,!Nn(f,t.memoizedState)&&(Ht=!0,X&&(a=Ja,a!==null)))throw a;t.memoizedState=f,t.baseState=E,t.baseQueue=D,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function mf(t){var r=Dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=t(f,E.action),E=E.next;while(E!==h);Nn(f,r.memoizedState)||(Ht=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Ey(t,r,a){var l=je,h=Dt(),f=Je;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!Nn((at||h).memoizedState,a);E&&(h.memoizedState=a,Ht=!0),h=h.queue;var b=wy.bind(null,l,h,t);if(Rl(2048,8,b,[t]),h.getSnapshot!==r||E||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,io(9,Sc(),by.bind(null,l,h,a,r),null),dt===null)throw Error(s(349));f||(Qr&124)!==0||Ty(l,r,a)}return a}function Ty(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=je.updateQueue,r===null?(r=hf(),je.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function by(t,r,a,l){r.value=a,r.getSnapshot=l,Sy(r)&&Ay(t)}function wy(t,r,a){return a(function(){Sy(r)&&Ay(t)})}function Sy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nn(t,a)}catch{return!0}}function Ay(t){var r=Qa(t,2);r!==null&&Pn(r,t,2)}function pf(t){var r=_n();if(typeof t=="function"){var a=t;if(t=a(),sa){Kt(!0);try{a()}finally{Kt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:t},r}function Ry(t,r,a,l){return t.baseState=a,ff(t,at,typeof l=="function"?l:dr)}function VS(t,r,a,l,h){if(Rc(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};W.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Iy(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Iy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=W.T,E={};W.T=E;try{var b=a(h,l),D=W.S;D!==null&&D(E,b),Cy(t,r,b)}catch(F){gf(t,r,F)}finally{W.T=f}}else try{f=a(h,l),Cy(t,r,f)}catch(F){gf(t,r,F)}}function Cy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){xy(t,r,l)},function(l){return gf(t,r,l)}):xy(t,r,a)}function xy(t,r,a){r.status="fulfilled",r.value=a,Ny(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Iy(t,a)))}function gf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Ny(r),r=r.next;while(r!==l)}t.action=null}function Ny(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Dy(t,r){return r}function Oy(t,r){if(Je){var a=dt.formState;if(a!==null){e:{var l=je;if(Je){if(bt){t:{for(var h=bt,f=Mi;h.nodeType!==8;){if(!f){h=null;break t}if(h=oi(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){bt=oi(h.nextSibling),l=h.data==="F!";break e}}ta(l)}l=!1}l&&(r=a[0])}}return a=_n(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dy,lastRenderedState:r},a.queue=l,a=Xy.bind(null,je,l),l.dispatch=a,l=pf(!1),f=Tf.bind(null,je,!1,l.queue),l=_n(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=VS.bind(null,je,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function My(t){var r=Dt();return ky(r,at,t)}function ky(t,r,a){if(r=ff(t,r,Dy)[0],t=wc(dr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Al(r)}catch(E){throw E===_l?yc:E}else l=r;r=Dt();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(je.flags|=2048,io(9,Sc(),PS.bind(null,h,a),null)),[l,f,t]}function PS(t,r){t.action=r}function Vy(t){var r=Dt(),a=at;if(a!==null)return ky(r,a,t);Dt(),r=r.memoizedState,a=Dt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function io(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=je.updateQueue,r===null&&(r=hf(),je.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function Sc(){return{destroy:void 0,resource:void 0}}function Py(){return Dt().memoizedState}function Ac(t,r,a,l){var h=_n();l=l===void 0?null:l,je.flags|=t,h.memoizedState=io(1|r,Sc(),a,l)}function Rl(t,r,a,l){var h=Dt();l=l===void 0?null:l;var f=h.memoizedState.inst;at!==null&&l!==null&&af(l,at.memoizedState.deps)?h.memoizedState=io(r,f,a,l):(je.flags|=t,h.memoizedState=io(1|r,f,a,l))}function Ly(t,r){Ac(8390656,8,t,r)}function jy(t,r){Rl(2048,8,t,r)}function Uy(t,r){return Rl(4,2,t,r)}function zy(t,r){return Rl(4,4,t,r)}function By(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function qy(t,r,a){a=a!=null?a.concat([t]):null,Rl(4,4,By.bind(null,r,t),a)}function yf(){}function Hy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&af(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Fy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&af(r,l[1]))return l[0];if(l=t(),sa){Kt(!0);try{t()}finally{Kt(!1)}}return a.memoizedState=[l,r],l}function vf(t,r,a){return a===void 0||(Qr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Kv(),je.lanes|=t,ts|=t,a)}function Gy(t,r,a,l){return Nn(a,r)?a:eo.current!==null?(t=vf(t,a,l),Nn(t,r)||(Ht=!0),t):(Qr&42)===0?(Ht=!0,t.memoizedState=a):(t=Kv(),je.lanes|=t,ts|=t,r)}function $y(t,r,a,l,h){var f=oe.p;oe.p=f!==0&&8>f?f:8;var E=W.T,b={};W.T=b,Tf(t,!1,r,a);try{var D=h(),F=W.S;if(F!==null&&F(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=OS(D,l);Il(t,r,X,Vn(t))}else Il(t,r,l,Vn(t))}catch(te){Il(t,r,{then:function(){},status:"rejected",reason:te},Vn())}finally{oe.p=f,W.T=E}}function LS(){}function _f(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Ky(t).queue;$y(t,h,r,ye,a===null?LS:function(){return Qy(t),a(l)})}function Ky(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:ye},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Qy(t){var r=Ky(t).next.queue;Il(t,r,{},Vn())}function Ef(){return rn(Gl)}function Yy(){return Dt().memoizedState}function Wy(){return Dt().memoizedState}function jS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Vn();t=$r(a);var l=Kr(r,t,a);l!==null&&(Pn(l,r,a),Tl(l,r,a)),r={cache:Yd()},t.payload=r;return}r=r.return}}function US(t,r,a){var l=Vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Rc(t)?Zy(r,a):(a=Ud(t,r,a,l),a!==null&&(Pn(a,t,l),Jy(a,r,l)))}function Xy(t,r,a){var l=Vn();Il(t,r,a,l)}function Il(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rc(t))Zy(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var E=r.lastRenderedState,b=f(E,a);if(h.hasEagerState=!0,h.eagerState=b,Nn(b,E))return uc(t,r,h,0),dt===null&&lc(),!1}catch{}finally{}if(a=Ud(t,r,h,l),a!==null)return Pn(a,t,l),Jy(a,r,l),!0}return!1}function Tf(t,r,a,l){if(l={lane:2,revertLane:Jf(),action:l,hasEagerState:!1,eagerState:null,next:null},Rc(t)){if(r)throw Error(s(479))}else r=Ud(t,a,l,2),r!==null&&Pn(r,t,2)}function Rc(t){var r=t.alternate;return t===je||r!==null&&r===je}function Zy(t,r){to=Ec=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Jy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,B(t,a)}}var Ic={readContext:rn,use:bc,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},ev={readContext:rn,use:bc,useCallback:function(t,r){return _n().memoizedState=[t,r===void 0?null:r],t},useContext:rn,useEffect:Ly,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Ac(4194308,4,By.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Ac(4194308,4,t,r)},useInsertionEffect:function(t,r){Ac(4,2,t,r)},useMemo:function(t,r){var a=_n();r=r===void 0?null:r;var l=t();if(sa){Kt(!0);try{t()}finally{Kt(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=_n();if(a!==void 0){var h=a(r);if(sa){Kt(!0);try{a(r)}finally{Kt(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=US.bind(null,je,t),[l.memoizedState,t]},useRef:function(t){var r=_n();return t={current:t},r.memoizedState=t},useState:function(t){t=pf(t);var r=t.queue,a=Xy.bind(null,je,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(t,r){var a=_n();return vf(a,t,r)},useTransition:function(){var t=pf(!1);return t=$y.bind(null,je,t.queue,!0,!1),_n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=je,h=_n();if(Je){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),dt===null)throw Error(s(349));(Qe&124)!==0||Ty(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Ly(wy.bind(null,l,f,t),[t]),l.flags|=2048,io(9,Sc(),by.bind(null,l,f,a,r),null),a},useId:function(){var t=_n(),r=dt.identifierPrefix;if(Je){var a=ur,l=lr;a=(l&~(1<<32-zt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Tc++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=MS++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:Ef,useFormState:Oy,useActionState:Oy,useOptimistic:function(t){var r=_n();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Tf.bind(null,je,!0,a),a.dispatch=r,[t,r]},useMemoCache:df,useCacheRefresh:function(){return _n().memoizedState=jS.bind(null,je)}},tv={readContext:rn,use:bc,useCallback:Hy,useContext:rn,useEffect:jy,useImperativeHandle:qy,useInsertionEffect:Uy,useLayoutEffect:zy,useMemo:Fy,useReducer:wc,useRef:Py,useState:function(){return wc(dr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Dt();return Gy(a,at.memoizedState,t,r)},useTransition:function(){var t=wc(dr)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:Al(t),r]},useSyncExternalStore:Ey,useId:Yy,useHostTransitionStatus:Ef,useFormState:My,useActionState:My,useOptimistic:function(t,r){var a=Dt();return Ry(a,at,t,r)},useMemoCache:df,useCacheRefresh:Wy},zS={readContext:rn,use:bc,useCallback:Hy,useContext:rn,useEffect:jy,useImperativeHandle:qy,useInsertionEffect:Uy,useLayoutEffect:zy,useMemo:Fy,useReducer:mf,useRef:Py,useState:function(){return mf(dr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Dt();return at===null?vf(a,t,r):Gy(a,at.memoizedState,t,r)},useTransition:function(){var t=mf(dr)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:Al(t),r]},useSyncExternalStore:Ey,useId:Yy,useHostTransitionStatus:Ef,useFormState:Vy,useActionState:Vy,useOptimistic:function(t,r){var a=Dt();return at!==null?Ry(a,at,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:Wy},ro=null,Cl=0;function Cc(t){var r=Cl;return Cl+=1,ro===null&&(ro=[]),dy(ro,t,r)}function xl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function xc(t,r){throw r.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function nv(t){var r=t._init;return r(t._payload)}function iv(t){function r(z,j){if(t){var H=z.deletions;H===null?(z.deletions=[j],z.flags|=16):H.push(j)}}function a(z,j){if(!t)return null;for(;j!==null;)r(z,j),j=j.sibling;return null}function l(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function h(z,j){return z=or(z,j),z.index=0,z.sibling=null,z}function f(z,j,H){return z.index=H,t?(H=z.alternate,H!==null?(H=H.index,H<j?(z.flags|=67108866,j):H):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function E(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,j,H,J){return j===null||j.tag!==6?(j=Bd(H,z.mode,J),j.return=z,j):(j=h(j,H),j.return=z,j)}function D(z,j,H,J){var ge=H.type;return ge===M?X(z,j,H.props.children,J,H.key):j!==null&&(j.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===S&&nv(ge)===j.type)?(j=h(j,H.props),xl(j,H),j.return=z,j):(j=hc(H.type,H.key,H.props,null,z.mode,J),xl(j,H),j.return=z,j)}function F(z,j,H,J){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=qd(H,z.mode,J),j.return=z,j):(j=h(j,H.children||[]),j.return=z,j)}function X(z,j,H,J,ge){return j===null||j.tag!==7?(j=Xs(H,z.mode,J,ge),j.return=z,j):(j=h(j,H),j.return=z,j)}function te(z,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Bd(""+j,z.mode,H),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return H=hc(j.type,j.key,j.props,null,z.mode,H),xl(H,j),H.return=z,H;case O:return j=qd(j,z.mode,H),j.return=z,j;case S:var J=j._init;return j=J(j._payload),te(z,j,H)}if(Oe(j)||P(j))return j=Xs(j,z.mode,H,null),j.return=z,j;if(typeof j.then=="function")return te(z,Cc(j),H);if(j.$$typeof===Z)return te(z,pc(z,j),H);xc(z,j)}return null}function $(z,j,H,J){var ge=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:b(z,j,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return H.key===ge?D(z,j,H,J):null;case O:return H.key===ge?F(z,j,H,J):null;case S:return ge=H._init,H=ge(H._payload),$(z,j,H,J)}if(Oe(H)||P(H))return ge!==null?null:X(z,j,H,J,null);if(typeof H.then=="function")return $(z,j,Cc(H),J);if(H.$$typeof===Z)return $(z,j,pc(z,H),J);xc(z,H)}return null}function K(z,j,H,J,ge){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(H)||null,b(j,z,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case I:return z=z.get(J.key===null?H:J.key)||null,D(j,z,J,ge);case O:return z=z.get(J.key===null?H:J.key)||null,F(j,z,J,ge);case S:var ze=J._init;return J=ze(J._payload),K(z,j,H,J,ge)}if(Oe(J)||P(J))return z=z.get(H)||null,X(j,z,J,ge,null);if(typeof J.then=="function")return K(z,j,H,Cc(J),ge);if(J.$$typeof===Z)return K(z,j,H,pc(j,J),ge);xc(j,J)}return null}function Ce(z,j,H,J){for(var ge=null,ze=null,Te=j,Re=j=0,Gt=null;Te!==null&&Re<H.length;Re++){Te.index>Re?(Gt=Te,Te=null):Gt=Te.sibling;var Xe=$(z,Te,H[Re],J);if(Xe===null){Te===null&&(Te=Gt);break}t&&Te&&Xe.alternate===null&&r(z,Te),j=f(Xe,j,Re),ze===null?ge=Xe:ze.sibling=Xe,ze=Xe,Te=Gt}if(Re===H.length)return a(z,Te),Je&&Js(z,Re),ge;if(Te===null){for(;Re<H.length;Re++)Te=te(z,H[Re],J),Te!==null&&(j=f(Te,j,Re),ze===null?ge=Te:ze.sibling=Te,ze=Te);return Je&&Js(z,Re),ge}for(Te=l(Te);Re<H.length;Re++)Gt=K(Te,z,Re,H[Re],J),Gt!==null&&(t&&Gt.alternate!==null&&Te.delete(Gt.key===null?Re:Gt.key),j=f(Gt,j,Re),ze===null?ge=Gt:ze.sibling=Gt,ze=Gt);return t&&Te.forEach(function(cs){return r(z,cs)}),Je&&Js(z,Re),ge}function Ae(z,j,H,J){if(H==null)throw Error(s(151));for(var ge=null,ze=null,Te=j,Re=j=0,Gt=null,Xe=H.next();Te!==null&&!Xe.done;Re++,Xe=H.next()){Te.index>Re?(Gt=Te,Te=null):Gt=Te.sibling;var cs=$(z,Te,Xe.value,J);if(cs===null){Te===null&&(Te=Gt);break}t&&Te&&cs.alternate===null&&r(z,Te),j=f(cs,j,Re),ze===null?ge=cs:ze.sibling=cs,ze=cs,Te=Gt}if(Xe.done)return a(z,Te),Je&&Js(z,Re),ge;if(Te===null){for(;!Xe.done;Re++,Xe=H.next())Xe=te(z,Xe.value,J),Xe!==null&&(j=f(Xe,j,Re),ze===null?ge=Xe:ze.sibling=Xe,ze=Xe);return Je&&Js(z,Re),ge}for(Te=l(Te);!Xe.done;Re++,Xe=H.next())Xe=K(Te,z,Re,Xe.value,J),Xe!==null&&(t&&Xe.alternate!==null&&Te.delete(Xe.key===null?Re:Xe.key),j=f(Xe,j,Re),ze===null?ge=Xe:ze.sibling=Xe,ze=Xe);return t&&Te.forEach(function(BA){return r(z,BA)}),Je&&Js(z,Re),ge}function lt(z,j,H,J){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case I:e:{for(var ge=H.key;j!==null;){if(j.key===ge){if(ge=H.type,ge===M){if(j.tag===7){a(z,j.sibling),J=h(j,H.props.children),J.return=z,z=J;break e}}else if(j.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===S&&nv(ge)===j.type){a(z,j.sibling),J=h(j,H.props),xl(J,H),J.return=z,z=J;break e}a(z,j);break}else r(z,j);j=j.sibling}H.type===M?(J=Xs(H.props.children,z.mode,J,H.key),J.return=z,z=J):(J=hc(H.type,H.key,H.props,null,z.mode,J),xl(J,H),J.return=z,z=J)}return E(z);case O:e:{for(ge=H.key;j!==null;){if(j.key===ge)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){a(z,j.sibling),J=h(j,H.children||[]),J.return=z,z=J;break e}else{a(z,j);break}else r(z,j);j=j.sibling}J=qd(H,z.mode,J),J.return=z,z=J}return E(z);case S:return ge=H._init,H=ge(H._payload),lt(z,j,H,J)}if(Oe(H))return Ce(z,j,H,J);if(P(H)){if(ge=P(H),typeof ge!="function")throw Error(s(150));return H=ge.call(H),Ae(z,j,H,J)}if(typeof H.then=="function")return lt(z,j,Cc(H),J);if(H.$$typeof===Z)return lt(z,j,pc(z,H),J);xc(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(a(z,j.sibling),J=h(j,H),J.return=z,z=J):(a(z,j),J=Bd(H,z.mode,J),J.return=z,z=J),E(z)):a(z,j)}return function(z,j,H,J){try{Cl=0;var ge=lt(z,j,H,J);return ro=null,ge}catch(Te){if(Te===_l||Te===yc)throw Te;var ze=Dn(29,Te,null,z.mode);return ze.lanes=J,ze.return=z,ze}finally{}}}var so=iv(!0),rv=iv(!1),Qn=ie(null),ki=null;function Yr(t){var r=t.alternate;se(Lt,Lt.current&1),se(Qn,t),ki===null&&(r===null||eo.current!==null||r.memoizedState!==null)&&(ki=t)}function sv(t){if(t.tag===22){if(se(Lt,Lt.current),se(Qn,t),ki===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(ki=t)}}else Wr()}function Wr(){se(Lt,Lt.current),se(Qn,Qn.current)}function fr(t){ce(Qn),ki===t&&(ki=null),ce(Lt)}var Lt=ie(0);function Nc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function bf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var wf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Vn(),h=$r(l);h.payload=r,a!=null&&(h.callback=a),r=Kr(t,h,l),r!==null&&(Pn(r,t,l),Tl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Vn(),h=$r(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Kr(t,h,l),r!==null&&(Pn(r,t,l),Tl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Vn(),l=$r(a);l.tag=2,r!=null&&(l.callback=r),r=Kr(t,l,a),r!==null&&(Pn(r,t,a),Tl(r,t,a))}};function av(t,r,a,l,h,f,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,E):r.prototype&&r.prototype.isPureReactComponent?!hl(a,l)||!hl(h,f):!0}function ov(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&wf.enqueueReplaceState(r,r.state,null)}function aa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Dc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function lv(t){Dc(t)}function uv(t){console.error(t)}function cv(t){Dc(t)}function Oc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function hv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sf(t,r,a){return a=$r(a),a.tag=3,a.payload={element:null},a.callback=function(){Oc(t,r)},a}function dv(t){return t=$r(t),t.tag=3,t}function fv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){hv(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){hv(r,a,l),typeof h!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function BS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&gl(r,a,h,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return ki===null?Qf():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Wf(t,l,h)),!1;case 22:return a.flags|=65536,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Wf(t,l,h)),!1}throw Error(s(435,a.tag))}return Wf(t,l,h),Qf(),!1}if(Je)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Gd&&(t=Error(s(422),{cause:l}),pl(Fn(t,a)))):(l!==Gd&&(r=Error(s(423),{cause:l}),pl(Fn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Fn(l,a),h=Sf(t.stateNode,l,h),tf(t,h),wt!==4&&(wt=2)),!1;var f=Error(s(520),{cause:l});if(f=Fn(f,a),Pl===null?Pl=[f]:Pl.push(f),wt!==4&&(wt=2),r===null)return!0;l=Fn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Sf(a.stateNode,l,t),tf(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ns===null||!ns.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=dv(h),fv(h,t,a,l),tf(a,h),!1}a=a.return}while(a!==null);return!1}var mv=Error(s(461)),Ht=!1;function Wt(t,r,a,l){r.child=t===null?rv(r,null,a,l):so(r,t.child,a,l)}function pv(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return ia(r),l=of(t,r,a,E,f,h),b=lf(),t!==null&&!Ht?(uf(t,r,h),mr(t,r,h)):(Je&&b&&Hd(r),r.flags|=1,Wt(t,r,l,h),r.child)}function gv(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!zd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,yv(t,r,f,l,h)):(t=hc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Of(t,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:hl,a(E,l)&&t.ref===r.ref)return mr(t,r,h)}return r.flags|=1,t=or(f,l),t.ref=r.ref,t.return=r,r.child=t}function yv(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(hl(f,l)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=l=f,Of(t,h))(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,mr(t,r,h)}return Af(t,r,a,l,h)}function vv(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return _v(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&gc(r,f!==null?f.cachePool:null),f!==null?yy(r,f):rf(),sv(r);else return r.lanes=r.childLanes=536870912,_v(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(gc(r,f.cachePool),yy(r,f),Wr(),r.memoizedState=null):(t!==null&&gc(r,null),rf(),Wr());return Wt(t,r,h,a),r.child}function _v(t,r,a,l){var h=Xd();return h=h===null?null:{parent:Pt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&gc(r,null),rf(),sv(r),t!==null&&gl(t,r,l,!0),null}function Mc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Af(t,r,a,l,h){return ia(r),a=of(t,r,a,l,void 0,h),l=lf(),t!==null&&!Ht?(uf(t,r,h),mr(t,r,h)):(Je&&l&&Hd(r),r.flags|=1,Wt(t,r,a,h),r.child)}function Ev(t,r,a,l,h,f){return ia(r),r.updateQueue=null,a=_y(r,l,a,h),vy(t),l=lf(),t!==null&&!Ht?(uf(t,r,f),mr(t,r,f)):(Je&&l&&Hd(r),r.flags|=1,Wt(t,r,a,f),r.child)}function Tv(t,r,a,l,h){if(ia(r),r.stateNode===null){var f=Ya,E=a.contextType;typeof E=="object"&&E!==null&&(f=rn(E)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Jd(r),E=a.contextType,f.context=typeof E=="object"&&E!==null?rn(E):Ya,f.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(bf(r,a,E,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&wf.enqueueReplaceState(f,f.state,null),wl(r,l,f,h),bl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var b=r.memoizedProps,D=aa(a,b);f.props=D;var F=f.context,X=a.contextType;E=Ya,typeof X=="object"&&X!==null&&(E=rn(X));var te=a.getDerivedStateFromProps;X=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||F!==E)&&ov(r,f,l,E),Gr=!1;var $=r.memoizedState;f.state=$,wl(r,l,f,h),bl(),F=r.memoizedState,b||$!==F||Gr?(typeof te=="function"&&(bf(r,a,te,l),F=r.memoizedState),(D=Gr||av(r,a,D,l,$,F,E))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),f.props=l,f.state=F,f.context=E,l=D):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,ef(t,r),E=r.memoizedProps,X=aa(a,E),f.props=X,te=r.pendingProps,$=f.context,F=a.contextType,D=Ya,typeof F=="object"&&F!==null&&(D=rn(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==te||$!==D)&&ov(r,f,l,D),Gr=!1,$=r.memoizedState,f.state=$,wl(r,l,f,h),bl();var K=r.memoizedState;E!==te||$!==K||Gr||t!==null&&t.dependencies!==null&&mc(t.dependencies)?(typeof b=="function"&&(bf(r,a,b,l),K=r.memoizedState),(X=Gr||av(r,a,X,l,$,K,D)||t!==null&&t.dependencies!==null&&mc(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,K,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,K,D)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),f.props=l,f.state=K,f.context=D,l=X):(typeof f.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Mc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=so(r,t.child,null,h),r.child=so(r,null,a,h)):Wt(t,r,a,h),r.memoizedState=f.state,t=r.child):t=mr(t,r,h),t}function bv(t,r,a,l){return ml(),r.flags|=256,Wt(t,r,a,l),r.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:uy()}}function Cf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Yn),t}function wv(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,E;if((E=f)||(E=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),E&&(h=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,t===null){if(Je){if(h?Yr(r):Wr(),Je){var b=bt,D;if(D=b){e:{for(D=b,b=Mi;D.nodeType!==8;){if(!b){b=null;break e}if(D=oi(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(r.memoizedState={dehydrated:b,treeContext:Zs!==null?{id:lr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},D=Dn(18,null,null,0),D.stateNode=b,D.return=r,r.child=D,pn=r,bt=null,D=!0):D=!1}D||ta(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return hm(b)?r.lanes=32:r.lanes=536870912,null;fr(r)}return b=l.children,l=l.fallback,h?(Wr(),h=r.mode,b=kc({mode:"hidden",children:b},h),l=Xs(l,h,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,h=r.child,h.memoizedState=If(a),h.childLanes=Cf(t,E,a),r.memoizedState=Rf,l):(Yr(r),xf(r,b))}if(D=t.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(f)r.flags&256?(Yr(r),r.flags&=-257,r=Nf(t,r,a)):r.memoizedState!==null?(Wr(),r.child=t.child,r.flags|=128,r=null):(Wr(),h=l.fallback,b=r.mode,l=kc({mode:"visible",children:l.children},b),h=Xs(h,b,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,so(r,t.child,null,a),l=r.child,l.memoizedState=If(a),l.childLanes=Cf(t,E,a),r.memoizedState=Rf,r=h);else if(Yr(r),hm(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(s(419)),l.stack="",l.digest=E,pl({value:l,source:null,stack:null}),r=Nf(t,r,a)}else if(Ht||gl(t,r,a,!1),E=(a&t.childLanes)!==0,Ht||E){if(E=dt,E!==null&&(l=a&-a,l=(l&42)!==0?1:ae(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,Qa(t,l),Pn(E,t,l),mv;b.data==="$?"||Qf(),r=Nf(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,bt=oi(b.nextSibling),pn=r,Je=!0,ea=null,Mi=!1,t!==null&&($n[Kn++]=lr,$n[Kn++]=ur,$n[Kn++]=Zs,lr=t.id,ur=t.overflow,Zs=r),r=xf(r,l.children),r.flags|=4096);return r}return h?(Wr(),h=l.fallback,b=r.mode,D=t.child,F=D.sibling,l=or(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?h=or(F,h):(h=Xs(h,b,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,b=t.child.memoizedState,b===null?b=If(a):(D=b.cachePool,D!==null?(F=Pt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=uy(),b={baseLanes:b.baseLanes|a,cachePool:D}),h.memoizedState=b,h.childLanes=Cf(t,E,a),r.memoizedState=Rf,l):(Yr(r),a=t.child,t=a.sibling,a=or(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(E=r.deletions,E===null?(r.deletions=[t],r.flags|=16):E.push(t)),r.child=a,r.memoizedState=null,a)}function xf(t,r){return r=kc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function kc(t,r){return t=Dn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nf(t,r,a){return so(r,t.child,null,a),t=xf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Sv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Kd(t.return,r,a)}function Df(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function Av(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(Wt(t,r,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sv(t,a,r);else if(t.tag===19)Sv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(Lt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Nc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Df(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Nc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Df(r,!0,a,null,f);break;case"together":Df(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function mr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ts|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(gl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=or(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=or(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Of(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&mc(t)))}function qS(t,r,a){switch(r.tag){case 3:rt(r,r.stateNode.containerInfo),Fr(r,Pt,t.memoizedState.cache),ml();break;case 27:case 5:ei(r);break;case 4:rt(r,r.stateNode.containerInfo);break;case 10:Fr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Yr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?wv(t,r,a):(Yr(r),t=mr(t,r,a),t!==null?t.sibling:null);Yr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(gl(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Av(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(Lt,Lt.current),l)break;return null;case 22:case 23:return r.lanes=0,vv(t,r,a);case 24:Fr(r,Pt,t.memoizedState.cache)}return mr(t,r,a)}function Rv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ht=!0;else{if(!Of(t,a)&&(r.flags&128)===0)return Ht=!1,qS(t,r,a);Ht=(t.flags&131072)!==0}else Ht=!1,Je&&(r.flags&1048576)!==0&&ny(r,fc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")zd(l)?(t=aa(l,t),r.tag=1,r=Tv(null,r,l,t,a)):(r.tag=0,r=Af(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===he){r.tag=11,r=pv(null,r,l,t,a);break e}else if(h===V){r.tag=14,r=gv(null,r,l,t,a);break e}}throw r=Ne(l)||l,Error(s(306,r,""))}}return r;case 0:return Af(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=aa(l,r.pendingProps),Tv(t,r,l,h,a);case 3:e:{if(rt(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,ef(t,r),wl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,Fr(r,Pt,l),l!==f.cache&&Qd(r,[Pt],a,!0),bl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=bv(t,r,l,a);break e}else if(l!==h){h=Fn(Error(s(424)),r),pl(h),r=bv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=oi(t.firstChild),pn=r,Je=!0,ea=null,Mi=!0,a=rv(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ml(),l===h){r=mr(t,r,a);break e}Wt(t,r,l,a)}r=r.child}return r;case 26:return Mc(t,r),t===null?(a=N_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Je||(a=r.type,t=r.pendingProps,l=Qc(Se.current).createElement(a),l[Ge]=r,l[We]=t,Zt(l,a,t),At(l),r.stateNode=l):r.memoizedState=N_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ei(r),t===null&&Je&&(l=r.stateNode=I_(r.type,r.pendingProps,Se.current),pn=r,Mi=!0,h=bt,ss(r.type)?(dm=h,bt=oi(l.firstChild)):bt=h),Wt(t,r,r.pendingProps.children,a),Mc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Je&&((h=l=bt)&&(l=gA(l,r.type,r.pendingProps,Mi),l!==null?(r.stateNode=l,pn=r,bt=oi(l.firstChild),Mi=!1,h=!0):h=!1),h||ta(r)),ei(r),h=r.type,f=r.pendingProps,E=t!==null?t.memoizedProps:null,l=f.children,lm(h,f)?l=null:E!==null&&lm(h,E)&&(r.flags|=32),r.memoizedState!==null&&(h=of(t,r,kS,null,null,a),Gl._currentValue=h),Mc(t,r),Wt(t,r,l,a),r.child;case 6:return t===null&&Je&&((t=a=bt)&&(a=yA(a,r.pendingProps,Mi),a!==null?(r.stateNode=a,pn=r,bt=null,t=!0):t=!1),t||ta(r)),null;case 13:return wv(t,r,a);case 4:return rt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=so(r,null,l,a):Wt(t,r,l,a),r.child;case 11:return pv(t,r,r.type,r.pendingProps,a);case 7:return Wt(t,r,r.pendingProps,a),r.child;case 8:return Wt(t,r,r.pendingProps.children,a),r.child;case 12:return Wt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Fr(r,r.type,l.value),Wt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,ia(r),h=rn(h),l=l(h),r.flags|=1,Wt(t,r,l,a),r.child;case 14:return gv(t,r,r.type,r.pendingProps,a);case 15:return yv(t,r,r.type,r.pendingProps,a);case 19:return Av(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=kc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=or(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return vv(t,r,a);case 24:return ia(r),l=rn(Pt),t===null?(h=Xd(),h===null&&(h=dt,f=Yd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Jd(r),Fr(r,Pt,h)):((t.lanes&a)!==0&&(ef(t,r),wl(r,null,null,a),bl()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Fr(r,Pt,l)):(l=f.cache,Fr(r,Pt,l),l!==h.cache&&Qd(r,[Pt],a,!0))),Wt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function pr(t){t.flags|=4}function Iv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!V_(r)){if(r=Qn.current,r!==null&&((Qe&4194048)===Qe?ki!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||r!==ki))throw El=Zd,cy;t.flags|=8192}}function Vc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ur():536870912,t.lanes|=r,uo|=r)}function Nl(t,r){if(!Je)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function yt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function HS(t,r,a){var l=r.pendingProps;switch(Fd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(r),null;case 1:return yt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),hr(Pt),vn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(fl(r)?pr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,sy())),yt(r),null;case 26:return a=r.memoizedState,t===null?(pr(r),a!==null?(yt(r),Iv(r,a)):(yt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(pr(r),yt(r),Iv(r,a)):(yt(r),r.flags&=-16777217):(t.memoizedProps!==l&&pr(r),yt(r),r.flags&=-16777217),null;case 27:In(r),a=Se.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&pr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return yt(r),null}t=pe.current,fl(r)?iy(r):(t=I_(h,l,a),r.stateNode=t,pr(r))}return yt(r),null;case 5:if(In(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&pr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return yt(r),null}if(t=pe.current,fl(r))iy(r);else{switch(h=Qc(Se.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Ge]=r,t[We]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&pr(r)}}return yt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&pr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Se.current,fl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=pn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Ge]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||E_(t.nodeValue,a)),t||ta(r)}else t=Qc(t).createTextNode(l),t[Ge]=r,r.stateNode=t}return yt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=fl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ge]=r}else ml(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;yt(r),h=!1}else h=sy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(fr(r),r):(fr(r),null)}if(fr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Vc(r,r.updateQueue),yt(r),null;case 4:return vn(),t===null&&im(r.stateNode.containerInfo),yt(r),null;case 10:return hr(r.type),yt(r),null;case 19:if(ce(Lt),h=r.memoizedState,h===null)return yt(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)Nl(h,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=Nc(t),f!==null){for(r.flags|=128,Nl(h,!1),t=f.updateQueue,r.updateQueue=t,Vc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)ty(a,t),a=a.sibling;return se(Lt,Lt.current&1|2),r.child}t=t.sibling}h.tail!==null&&hn()>jc&&(r.flags|=128,l=!0,Nl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Nc(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Vc(r,t),Nl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Je)return yt(r),null}else 2*hn()-h.renderingStartTime>jc&&a!==536870912&&(r.flags|=128,l=!0,Nl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=hn(),r.sibling=null,t=Lt.current,se(Lt,l?t&1|2:t&1),r):(yt(r),null);case 22:case 23:return fr(r),sf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(yt(r),r.subtreeFlags&6&&(r.flags|=8192)):yt(r),a=r.updateQueue,a!==null&&Vc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ce(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),hr(Pt),yt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function FS(t,r){switch(Fd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return hr(Pt),vn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return In(r),null;case 13:if(fr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ml()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ce(Lt),null;case 4:return vn(),null;case 10:return hr(r.type),null;case 22:case 23:return fr(r),sf(),t!==null&&ce(ra),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return hr(Pt),null;case 25:return null;default:return null}}function Cv(t,r){switch(Fd(r),r.tag){case 3:hr(Pt),vn();break;case 26:case 27:case 5:In(r);break;case 4:vn();break;case 13:fr(r);break;case 19:ce(Lt);break;case 10:hr(r.type);break;case 22:case 23:fr(r),sf(),t!==null&&ce(ra);break;case 24:hr(Pt)}}function Dl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(b){ht(r,r.return,b)}}function Xr(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,h=r;var D=a,F=b;try{F()}catch(X){ht(h,D,X)}}}l=l.next}while(l!==f)}}catch(X){ht(r,r.return,X)}}function xv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{gy(r,a)}catch(l){ht(t,t.return,l)}}}function Nv(t,r,a){a.props=aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ht(t,r,l)}}function Ol(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ht(t,r,h)}}function Vi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ht(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ht(t,r,h)}else a.current=null}function Dv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ht(t,t.return,h)}}function Mf(t,r,a){try{var l=t.stateNode;hA(l,t.type,a,r),l[We]=r}catch(h){ht(t,t.return,h)}}function Ov(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ss(t.type)||t.tag===4}function kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ov(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ss(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Kc));else if(l!==4&&(l===27&&ss(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Vf(t,r,a),t=t.sibling;t!==null;)Vf(t,r,a),t=t.sibling}function Pc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ss(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Pc(t,r,a),t=t.sibling;t!==null;)Pc(t,r,a),t=t.sibling}function Mv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Zt(r,l,a),r[Ge]=t,r[We]=a}catch(f){ht(t,t.return,f)}}var gr=!1,It=!1,Pf=!1,kv=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function GS(t,r){if(t=t.containerInfo,am=eh,t=Gg(t),Md(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,b=-1,D=-1,F=0,X=0,te=t,$=null;t:for(;;){for(var K;te!==a||h!==0&&te.nodeType!==3||(b=E+h),te!==f||l!==0&&te.nodeType!==3||(D=E+l),te.nodeType===3&&(E+=te.nodeValue.length),(K=te.firstChild)!==null;)$=te,te=K;for(;;){if(te===t)break t;if($===a&&++F===h&&(b=E),$===f&&++X===l&&(D=E),(K=te.nextSibling)!==null)break;te=$,$=te.parentNode}te=K}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:t,selectionRange:a},eh=!1,Ft=r;Ft!==null;)if(r=Ft,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ft=t;else for(;Ft!==null;){switch(r=Ft,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var Ce=aa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ce,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){ht(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)cm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Ft=t;break}Ft=r.return}}function Vv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Zr(t,a),l&4&&Dl(5,a);break;case 1:if(Zr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(E){ht(a,a.return,E)}else{var h=aa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(E){ht(a,a.return,E)}}l&64&&xv(a),l&512&&Ol(a,a.return);break;case 3:if(Zr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{gy(t,r)}catch(E){ht(a,a.return,E)}}break;case 27:r===null&&l&4&&Mv(a);case 26:case 5:Zr(t,a),r===null&&l&4&&Dv(a),l&512&&Ol(a,a.return);break;case 12:Zr(t,a);break;case 13:Zr(t,a),l&4&&jv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=eA.bind(null,a),vA(t,a))));break;case 22:if(l=a.memoizedState!==null||gr,!l){r=r!==null&&r.memoizedState!==null||It,h=gr;var f=It;gr=l,(It=r)&&!f?Jr(t,a,(a.subtreeFlags&8772)!==0):Zr(t,a),gr=h,It=f}break;case 30:break;default:Zr(t,a)}}function Pv(t){var r=t.alternate;r!==null&&(t.alternate=null,Pv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&bi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,En=!1;function yr(t,r,a){for(a=a.child;a!==null;)Lv(t,r,a),a=a.sibling}function Lv(t,r,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:It||Vi(a,r),yr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Vi(a,r);var l=pt,h=En;ss(a.type)&&(pt=a.stateNode,En=!1),yr(t,r,a),Bl(a.stateNode),pt=l,En=h;break;case 5:It||Vi(a,r);case 6:if(l=pt,h=En,pt=null,yr(t,r,a),pt=l,En=h,pt!==null)if(En)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(f){ht(a,r,f)}else try{pt.removeChild(a.stateNode)}catch(f){ht(a,r,f)}break;case 18:pt!==null&&(En?(t=pt,A_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Yl(t)):A_(pt,a.stateNode));break;case 4:l=pt,h=En,pt=a.stateNode.containerInfo,En=!0,yr(t,r,a),pt=l,En=h;break;case 0:case 11:case 14:case 15:It||Xr(2,a,r),It||Xr(4,a,r),yr(t,r,a);break;case 1:It||(Vi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Nv(a,r,l)),yr(t,r,a);break;case 21:yr(t,r,a);break;case 22:It=(l=It)||a.memoizedState!==null,yr(t,r,a),It=l;break;default:yr(t,r,a)}}function jv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yl(t)}catch(a){ht(r,r.return,a)}}function $S(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new kv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new kv),r;default:throw Error(s(435,t.tag))}}function Lf(t,r){var a=$S(t);r.forEach(function(l){var h=tA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function On(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,E=r,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(ss(b.type)){pt=b.stateNode,En=!1;break e}break;case 5:pt=b.stateNode,En=!1;break e;case 3:case 4:pt=b.stateNode.containerInfo,En=!0;break e}b=b.return}if(pt===null)throw Error(s(160));Lv(f,E,h),pt=null,En=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Uv(r,t),r=r.sibling}var ai=null;function Uv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Mn(t),l&4&&(Xr(3,t,t.return),Dl(3,t),Xr(5,t,t.return));break;case 1:On(r,t),Mn(t),l&512&&(It||a===null||Vi(a,a.return)),l&64&&gr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ai;if(On(r,t),Mn(t),l&512&&(It||a===null||Vi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ct]||f[Ge]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Zt(f,l,a),f[Ge]=t,At(f),l=f;break e;case"link":var E=M_("link","href",h).get(l+(a.href||""));if(E){for(var b=0;b<E.length;b++)if(f=E[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(b,1);break t}}f=h.createElement(l),Zt(f,l,a),h.head.appendChild(f);break;case"meta":if(E=M_("meta","content",h).get(l+(a.content||""))){for(b=0;b<E.length;b++)if(f=E[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(b,1);break t}}f=h.createElement(l),Zt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Ge]=t,At(f),l=f}t.stateNode=l}else k_(h,t.type,t.stateNode);else t.stateNode=O_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?k_(h,t.type,t.stateNode):O_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Mf(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(r,t),Mn(t),l&512&&(It||a===null||Vi(a,a.return)),a!==null&&l&4&&Mf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(r,t),Mn(t),l&512&&(It||a===null||Vi(a,a.return)),t.flags&32){h=t.stateNode;try{zn(h,"")}catch(K){ht(t,t.return,K)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Mf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Pf=!0);break;case 6:if(On(r,t),Mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(K){ht(t,t.return,K)}}break;case 3:if(Xc=null,h=ai,ai=Yc(r.containerInfo),On(r,t),ai=h,Mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Yl(r.containerInfo)}catch(K){ht(t,t.return,K)}Pf&&(Pf=!1,zv(t));break;case 4:l=ai,ai=Yc(t.stateNode.containerInfo),On(r,t),Mn(t),ai=l;break;case 12:On(r,t),Mn(t);break;case 13:On(r,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=hn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=gr,X=It;if(gr=F||h,It=X||D,On(r,t),It=X,gr=F,Mn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||D||gr||It||oa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(f=D.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=D.stateNode;var te=D.memoizedProps.style,$=te!=null&&te.hasOwnProperty("display")?te.display:null;b.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(K){ht(D,D.return,K)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(K){ht(D,D.return,K)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Lf(t,a))));break;case 19:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 30:break;case 21:break;default:On(r,t),Mn(t)}}function Mn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Ov(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=kf(t);Pc(t,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(zn(E,""),a.flags&=-33);var b=kf(t);Pc(t,b,E);break;case 3:case 4:var D=a.stateNode.containerInfo,F=kf(t);Vf(t,F,D);break;default:throw Error(s(161))}}catch(X){ht(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function zv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;zv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Zr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Vv(t,r.alternate,r),r=r.sibling}function oa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Xr(4,r,r.return),oa(r);break;case 1:Vi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Nv(r,r.return,a),oa(r);break;case 27:Bl(r.stateNode);case 26:case 5:Vi(r,r.return),oa(r);break;case 22:r.memoizedState===null&&oa(r);break;case 30:oa(r);break;default:oa(r)}t=t.sibling}}function Jr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,E=f.flags;switch(f.tag){case 0:case 11:case 15:Jr(h,f,a),Dl(4,f);break;case 1:if(Jr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){ht(l,l.return,F)}if(l=f,h=l.updateQueue,h!==null){var b=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)py(D[h],b)}catch(F){ht(l,l.return,F)}}a&&E&64&&xv(f),Ol(f,f.return);break;case 27:Mv(f);case 26:case 5:Jr(h,f,a),a&&l===null&&E&4&&Dv(f),Ol(f,f.return);break;case 12:Jr(h,f,a);break;case 13:Jr(h,f,a),a&&E&4&&jv(h,f);break;case 22:f.memoizedState===null&&Jr(h,f,a),Ol(f,f.return);break;case 30:break;default:Jr(h,f,a)}r=r.sibling}}function jf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&yl(a))}function Uf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yl(t))}function Pi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Bv(t,r,a,l),r=r.sibling}function Bv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Pi(t,r,a,l),h&2048&&Dl(9,r);break;case 1:Pi(t,r,a,l);break;case 3:Pi(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&yl(t)));break;case 12:if(h&2048){Pi(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,E=f.id,b=f.onPostCommit;typeof b=="function"&&b(E,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ht(r,r.return,D)}}else Pi(t,r,a,l);break;case 13:Pi(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,E=r.alternate,r.memoizedState!==null?f._visibility&2?Pi(t,r,a,l):Ml(t,r):f._visibility&2?Pi(t,r,a,l):(f._visibility|=2,ao(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&jf(E,r);break;case 24:Pi(t,r,a,l),h&2048&&Uf(r.alternate,r);break;default:Pi(t,r,a,l)}}function ao(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,E=r,b=a,D=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:ao(f,E,b,D,h),Dl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?ao(f,E,b,D,h):Ml(f,E):(X._visibility|=2,ao(f,E,b,D,h)),h&&F&2048&&jf(E.alternate,E);break;case 24:ao(f,E,b,D,h),h&&F&2048&&Uf(E.alternate,E);break;default:ao(f,E,b,D,h)}r=r.sibling}}function Ml(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Ml(a,l),h&2048&&jf(l.alternate,l);break;case 24:Ml(a,l),h&2048&&Uf(l.alternate,l);break;default:Ml(a,l)}r=r.sibling}}var kl=8192;function oo(t){if(t.subtreeFlags&kl)for(t=t.child;t!==null;)qv(t),t=t.sibling}function qv(t){switch(t.tag){case 26:oo(t),t.flags&kl&&t.memoizedState!==null&&DA(ai,t.memoizedState,t.memoizedProps);break;case 5:oo(t);break;case 3:case 4:var r=ai;ai=Yc(t.stateNode.containerInfo),oo(t),ai=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,oo(t),kl=r):oo(t));break;default:oo(t)}}function Hv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Vl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,Gv(l,t)}Hv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fv(t),t=t.sibling}function Fv(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&Xr(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Lc(t)):Vl(t);break;default:Vl(t)}}function Lc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,Gv(l,t)}Hv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Xr(8,r,r.return),Lc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Lc(r));break;default:Lc(r)}t=t.sibling}}function Gv(t,r){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Xr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:yl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var h=l.sibling,f=l.return;if(Pv(l),l===a){Ft=null;break e}if(h!==null){h.return=f,Ft=h;break e}Ft=f}}}var KS={getCacheForType:function(t){var r=rn(Pt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},QS=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,Be=null,Qe=0,it=0,kn=null,es=!1,lo=!1,zf=!1,vr=0,wt=0,ts=0,la=0,Bf=0,Yn=0,uo=0,Pl=null,Tn=null,qf=!1,Hf=0,jc=1/0,Uc=null,ns=null,Xt=0,is=null,co=null,ho=0,Ff=0,Gf=null,$v=null,Ll=0,$f=null;function Vn(){if((nt&2)!==0&&Qe!==0)return Qe&-Qe;if(W.T!==null){var t=Za;return t!==0?t:Jf()}return _e()}function Kv(){Yn===0&&(Yn=(Qe&536870912)===0||Je?Na():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),Yn}function Pn(t,r,a){(t===dt&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(fo(t,0),rs(t,Qe,Yn,!1)),ni(t,a),((nt&2)===0||t!==dt)&&(t===dt&&((nt&2)===0&&(la|=a),wt===4&&rs(t,Qe,Yn,!1)),Li(t))}function Qv(t,r,a){if((nt&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Ti(t,r),h=l?XS(t,r):Yf(t,r,!0),f=l;do{if(h===0){lo&&!l&&rs(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!YS(a)){h=Yf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var b=t;h=Pl;var D=b.current.memoizedState.isDehydrated;if(D&&(fo(b,E).flags|=256),E=Yf(b,E,!1),E!==2){if(zf&&!D){b.errorRecoveryDisabledLanes|=f,la|=f,h=4;break e}f=Tn,Tn=h,f!==null&&(Tn===null?Tn=f:Tn.push.apply(Tn,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){fo(t,0),rs(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:rs(l,r,Yn,!es);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Hf+300-hn(),10<h)){if(rs(l,r,Yn,!es),Lr(l,0,!0)!==0)break e;l.timeoutHandle=w_(Yv.bind(null,l,a,Tn,Uc,qf,r,Yn,la,uo,es,f,2,-0,0),h);break e}Yv(l,a,Tn,Uc,qf,r,Yn,la,uo,es,f,0,-0,0)}}break}while(!0);Li(t)}function Yv(t,r,a,l,h,f,E,b,D,F,X,te,$,K){if(t.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Fl={stylesheets:null,count:0,unsuspend:NA},qv(r),te=OA(),te!==null)){t.cancelPendingCommit=te(n_.bind(null,t,r,f,a,l,h,E,b,D,X,1,$,K)),rs(t,f,E,!F);return}n_(t,r,f,a,l,h,E,b,D)}function YS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Nn(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function rs(t,r,a,l){r&=~Bf,r&=~la,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-zt(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&Un(t,a,r)}function zc(){return(nt&6)===0?(jl(0),!1):!0}function Kf(){if(Be!==null){if(it===0)var t=Be.return;else t=Be,cr=na=null,cf(t),ro=null,Cl=0,t=Be;for(;t!==null;)Cv(t.alternate,t),t=t.return;Be=null}}function fo(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,fA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Kf(),dt=t,Be=a=or(t.current,null),Qe=r,it=0,kn=null,es=!1,lo=Ti(t,r),zf=!1,uo=Yn=Bf=la=ts=wt=0,Tn=Pl=null,qf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-zt(l),f=1<<h;r|=t[h],l&=~f}return vr=r,lc(),a}function Wv(t,r){je=null,W.H=Ic,r===_l||r===yc?(r=fy(),it=3):r===cy?(r=fy(),it=4):it=r===mv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,kn=r,Be===null&&(wt=1,Oc(t,Fn(r,t.current)))}function Xv(){var t=W.H;return W.H=Ic,t===null?Ic:t}function Zv(){var t=W.A;return W.A=KS,t}function Qf(){wt=4,es||(Qe&4194048)!==Qe&&Qn.current!==null||(lo=!0),(ts&134217727)===0&&(la&134217727)===0||dt===null||rs(dt,Qe,Yn,!1)}function Yf(t,r,a){var l=nt;nt|=2;var h=Xv(),f=Zv();(dt!==t||Qe!==r)&&(Uc=null,fo(t,r)),r=!1;var E=wt;e:do try{if(it!==0&&Be!==null){var b=Be,D=kn;switch(it){case 8:Kf(),E=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var F=it;if(it=0,kn=null,mo(t,b,D,F),a&&lo){E=0;break e}break;default:F=it,it=0,kn=null,mo(t,b,D,F)}}WS(),E=wt;break}catch(X){Wv(t,X)}while(!0);return r&&t.shellSuspendCounter++,cr=na=null,nt=l,W.H=h,W.A=f,Be===null&&(dt=null,Qe=0,lc()),E}function WS(){for(;Be!==null;)Jv(Be)}function XS(t,r){var a=nt;nt|=2;var l=Xv(),h=Zv();dt!==t||Qe!==r?(Uc=null,jc=hn()+500,fo(t,r)):lo=Ti(t,r);e:do try{if(it!==0&&Be!==null){r=Be;var f=kn;t:switch(it){case 1:it=0,kn=null,mo(t,r,f,1);break;case 2:case 9:if(hy(f)){it=0,kn=null,e_(r);break}r=function(){it!==2&&it!==9||dt!==t||(it=7),Li(t)},f.then(r,r);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:hy(f)?(it=0,kn=null,e_(r)):(it=0,kn=null,mo(t,r,f,7));break;case 5:var E=null;switch(Be.tag){case 26:E=Be.memoizedState;case 5:case 27:var b=Be;if(!E||V_(E)){it=0,kn=null;var D=b.sibling;if(D!==null)Be=D;else{var F=b.return;F!==null?(Be=F,Bc(F)):Be=null}break t}}it=0,kn=null,mo(t,r,f,5);break;case 6:it=0,kn=null,mo(t,r,f,6);break;case 8:Kf(),wt=6;break e;default:throw Error(s(462))}}ZS();break}catch(X){Wv(t,X)}while(!0);return cr=na=null,W.H=l,W.A=h,nt=a,Be!==null?0:(dt=null,Qe=0,lc(),wt)}function ZS(){for(;Be!==null&&!Os();)Jv(Be)}function Jv(t){var r=Rv(t.alternate,t,vr);t.memoizedProps=t.pendingProps,r===null?Bc(t):Be=r}function e_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Ev(a,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=Ev(a,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:cf(r);default:Cv(a,r),r=Be=ty(r,vr),r=Rv(a,r,vr)}t.memoizedProps=t.pendingProps,r===null?Bc(t):Be=r}function mo(t,r,a,l){cr=na=null,cf(r),ro=null,Cl=0;var h=r.return;try{if(BS(t,h,r,a,Qe)){wt=1,Oc(t,Fn(a,t.current)),Be=null;return}}catch(f){if(h!==null)throw Be=h,f;wt=1,Oc(t,Fn(a,t.current)),Be=null;return}r.flags&32768?(Je||l===1?t=!0:lo||(Qe&536870912)!==0?t=!1:(es=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),t_(r,t)):Bc(r)}function Bc(t){var r=t;do{if((r.flags&32768)!==0){t_(r,es);return}t=r.return;var a=HS(r.alternate,r,vr);if(a!==null){Be=a;return}if(r=r.sibling,r!==null){Be=r;return}Be=r=t}while(r!==null);wt===0&&(wt=5)}function t_(t,r){do{var a=FS(t.alternate,t);if(a!==null){a.flags&=32767,Be=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Be=t;return}Be=t=a}while(t!==null);wt=6,Be=null}function n_(t,r,a,l,h,f,E,b,D){t.cancelPendingCommit=null;do qc();while(Xt!==0);if((nt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=jd,zr(t,a,f,E,b,D),t===dt&&(Be=dt=null,Qe=0),co=r,is=t,ho=a,Ff=f,Gf=h,$v=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,nA(Yi,function(){return o_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,h=oe.p,oe.p=2,E=nt,nt|=4;try{GS(t,r,a)}finally{nt=E,oe.p=h,W.T=l}}Xt=1,i_(),r_(),s_()}}function i_(){if(Xt===1){Xt=0;var t=is,r=co,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var h=nt;nt|=4;try{Uv(r,t);var f=om,E=Gg(t.containerInfo),b=f.focusedElem,D=f.selectionRange;if(E!==b&&b&&b.ownerDocument&&Fg(b.ownerDocument.documentElement,b)){if(D!==null&&Md(b)){var F=D.start,X=D.end;if(X===void 0&&(X=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(X,b.value.length);else{var te=b.ownerDocument||document,$=te&&te.defaultView||window;if($.getSelection){var K=$.getSelection(),Ce=b.textContent.length,Ae=Math.min(D.start,Ce),lt=D.end===void 0?Ae:Math.min(D.end,Ce);!K.extend&&Ae>lt&&(E=lt,lt=Ae,Ae=E);var z=Hg(b,Ae),j=Hg(b,lt);if(z&&j&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==j.node||K.focusOffset!==j.offset)){var H=te.createRange();H.setStart(z.node,z.offset),K.removeAllRanges(),Ae>lt?(K.addRange(H),K.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),K.addRange(H))}}}}for(te=[],K=b;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<te.length;b++){var J=te[b];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}eh=!!am,om=am=null}finally{nt=h,oe.p=l,W.T=a}}t.current=r,Xt=2}}function r_(){if(Xt===2){Xt=0;var t=is,r=co,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var h=nt;nt|=4;try{Vv(t,r.alternate,r)}finally{nt=h,oe.p=l,W.T=a}}Xt=3}}function s_(){if(Xt===4||Xt===3){Xt=0,Ms();var t=is,r=co,a=ho,l=$v;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,co=is=null,a_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ns=null),me(a),r=r.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(mt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=W.T,h=oe.p,oe.p=2,W.T=null;try{for(var f=t.onRecoverableError,E=0;E<l.length;E++){var b=l[E];f(b.value,{componentStack:b.stack})}}finally{W.T=r,oe.p=h}}(ho&3)!==0&&qc(),Li(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===$f?Ll++:(Ll=0,$f=t):Ll=0,jl(0)}}function a_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,yl(r)))}function qc(t){return i_(),r_(),s_(),o_()}function o_(){if(Xt!==5)return!1;var t=is,r=Ff;Ff=0;var a=me(ho),l=W.T,h=oe.p;try{oe.p=32>a?32:a,W.T=null,a=Gf,Gf=null;var f=is,E=ho;if(Xt=0,co=is=null,ho=0,(nt&6)!==0)throw Error(s(331));var b=nt;if(nt|=4,Fv(f.current),Bv(f,f.current,E,a),nt=b,jl(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(mt,f)}catch{}return!0}finally{oe.p=h,W.T=l,a_(t,r)}}function l_(t,r,a){r=Fn(a,r),r=Sf(t.stateNode,r,2),t=Kr(t,r,2),t!==null&&(ni(t,2),Li(t))}function ht(t,r,a){if(t.tag===3)l_(t,t,a);else for(;r!==null;){if(r.tag===3){l_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ns===null||!ns.has(l))){t=Fn(a,t),a=dv(2),l=Kr(r,a,2),l!==null&&(fv(a,l,r,t),ni(l,2),Li(l));break}}r=r.return}}function Wf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new QS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(zf=!0,h.add(a),t=JS.bind(null,t,r,a),r.then(t,t))}function JS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,dt===t&&(Qe&a)===a&&(wt===4||wt===3&&(Qe&62914560)===Qe&&300>hn()-Hf?(nt&2)===0&&fo(t,0):Bf|=a,uo===Qe&&(uo=0)),Li(t)}function u_(t,r){r===0&&(r=Ur()),t=Qa(t,r),t!==null&&(ni(t,r),Li(t))}function eA(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),u_(t,a)}function tA(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),u_(t,a)}function nA(t,r){return yi(t,r)}var Hc=null,po=null,Xf=!1,Fc=!1,Zf=!1,ua=0;function Li(t){t!==po&&t.next===null&&(po===null?Hc=po=t:po=po.next=t),Fc=!0,Xf||(Xf=!0,rA())}function jl(t,r){if(!Zf&&Fc){Zf=!0;do for(var a=!1,l=Hc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,b=l.pingedLanes;f=(1<<31-zt(42|t)+1)-1,f&=h&~(E&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,f_(l,f))}else f=Qe,f=Lr(l,l===dt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ti(l,f)||(a=!0,f_(l,f));l=l.next}while(a);Zf=!1}}function iA(){c_()}function c_(){Fc=Xf=!1;var t=0;ua!==0&&(dA()&&(t=ua),ua=0);for(var r=hn(),a=null,l=Hc;l!==null;){var h=l.next,f=h_(l,r);f===0?(l.next=null,a===null?Hc=h:a.next=h,h===null&&(po=a)):(a=l,(t!==0||(f&3)!==0)&&(Fc=!0)),l=h}jl(t)}function h_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var E=31-zt(f),b=1<<E,D=h[E];D===-1?((b&a)===0||(b&l)!==0)&&(h[E]=jr(b,r)):D<=r&&(t.expiredLanes|=b),f&=~b}if(r=dt,a=Qe,a=Lr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(it===2||it===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ki(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ti(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Ki(l),me(a)){case 2:case 8:a=Vr;break;case 32:a=Yi;break;case 268435456:a=Pr;break;default:a=Yi}return l=d_.bind(null,t),a=yi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Ki(l),t.callbackPriority=2,t.callbackNode=null,2}function d_(t,r){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qc()&&t.callbackNode!==a)return null;var l=Qe;return l=Lr(t,t===dt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Qv(t,l,r),h_(t,hn()),t.callbackNode!=null&&t.callbackNode===a?d_.bind(null,t):null)}function f_(t,r){if(qc())return null;Qv(t,r,!0)}function rA(){mA(function(){(nt&6)!==0?yi(Qi,iA):c_()})}function Jf(){return ua===0&&(ua=Na()),ua}function m_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Pa(""+t)}function p_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function sA(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=m_((h[We]||null).action),E=l.submitter;E&&(r=(r=E[We]||null)?m_(r.formAction):E.getAttribute("formAction"),r!==null&&(f=r,E=null));var b=new La("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ua!==0){var D=E?p_(h,E):new FormData(h);_f(a,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(b.preventDefault(),D=E?p_(h,E):new FormData(h),_f(a,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var em=0;em<Ld.length;em++){var tm=Ld[em],aA=tm.toLowerCase(),oA=tm[0].toUpperCase()+tm.slice(1);si(aA,"on"+oA)}si(Qg,"onAnimationEnd"),si(Yg,"onAnimationIteration"),si(Wg,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(SS,"onTransitionRun"),si(AS,"onTransitionStart"),si(RS,"onTransitionCancel"),si(Xg,"onTransitionEnd"),Zi("onMouseEnter",["mouseout","mouseover"]),Zi("onMouseLeave",["mouseout","mouseover"]),Zi("onPointerEnter",["pointerout","pointerover"]),Zi("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function g_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var E=l.length-1;0<=E;E--){var b=l[E],D=b.instance,F=b.currentTarget;if(b=b.listener,D!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=F;try{f(h)}catch(X){Dc(X)}h.currentTarget=null,f=D}else for(E=0;E<l.length;E++){if(b=l[E],D=b.instance,F=b.currentTarget,b=b.listener,D!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=F;try{f(h)}catch(X){Dc(X)}h.currentTarget=null,f=D}}}}function qe(t,r){var a=r[nn];a===void 0&&(a=r[nn]=new Set);var l=t+"__bubble";a.has(l)||(y_(r,t,2,!1),a.add(l))}function nm(t,r,a){var l=0;r&&(l|=4),y_(a,t,l,r)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function im(t){if(!t[Gc]){t[Gc]=!0,Xo.forEach(function(a){a!=="selectionchange"&&(lA.has(a)||nm(a,!1,t),nm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Gc]||(r[Gc]=!0,nm("selectionchange",!1,r))}}function y_(t,r,a,l){switch(B_(r)){case 2:var h=VA;break;case 8:h=PA;break;default:h=ym}a=h.bind(null,r,a,t),h=void 0,!qn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function rm(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===h)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;b!==null;){if(E=Xi(b),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=f=E;continue e}b=b.parentNode}}l=l.return}Ku(function(){var F=f,X=Bn(a),te=[];e:{var $=Zg.get(t);if($!==void 0){var K=La,Ce=t;switch(t){case"keypress":if(Ci(a)===0)break e;case"keydown":case"keyup":K=Ha;break;case"focusin":Ce="focus",K=za;break;case"focusout":Ce="blur",K=za;break;case"beforeblur":case"afterblur":K=za;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=tc;break;case Qg:case Yg:case Wg:K=Ba;break;case Xg:K=ic;break;case"scroll":case"scrollend":K=Qu;break;case"wheel":K=Fa;break;case"copy":case"cut":case"paste":K=qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ul;break;case"toggle":case"beforetoggle":K=sc}var Ae=(r&4)!==0,lt=!Ae&&(t==="scroll"||t==="scrollend"),z=Ae?$!==null?$+"Capture":null:$;Ae=[];for(var j=F,H;j!==null;){var J=j;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||z===null||(J=qs(j,z),J!=null&&Ae.push(zl(j,J,H))),lt)break;j=j.return}0<Ae.length&&($=new K($,Ce,null,a,X),te.push({event:$,listeners:Ae}))}}if((r&7)===0){e:{if($=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",$&&a!==tr&&(Ce=a.relatedTarget||a.fromElement)&&(Xi(Ce)||Ce[Tt]))break e;if((K||$)&&($=X.window===X?X:($=X.ownerDocument)?$.defaultView||$.parentWindow:window,K?(Ce=a.relatedTarget||a.toElement,K=F,Ce=Ce?Xi(Ce):null,Ce!==null&&(lt=u(Ce),Ae=Ce.tag,Ce!==lt||Ae!==5&&Ae!==27&&Ae!==6)&&(Ce=null)):(K=null,Ce=F),K!==Ce)){if(Ae=Hn,J="onMouseLeave",z="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=ul,J="onPointerLeave",z="onPointerEnter",j="pointer"),lt=K==null?$:Si(K),H=Ce==null?$:Si(Ce),$=new Ae(J,j+"leave",K,a,X),$.target=lt,$.relatedTarget=H,J=null,Xi(X)===F&&(Ae=new Ae(z,j+"enter",Ce,a,X),Ae.target=H,Ae.relatedTarget=lt,J=Ae),lt=J,K&&Ce)t:{for(Ae=K,z=Ce,j=0,H=Ae;H;H=go(H))j++;for(H=0,J=z;J;J=go(J))H++;for(;0<j-H;)Ae=go(Ae),j--;for(;0<H-j;)z=go(z),H--;for(;j--;){if(Ae===z||z!==null&&Ae===z.alternate)break t;Ae=go(Ae),z=go(z)}Ae=null}else Ae=null;K!==null&&v_(te,$,K,Ae,!1),Ce!==null&&lt!==null&&v_(te,lt,Ce,Ae,!0)}}e:{if($=F?Si(F):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var ge=Lg;else if(Vt($))if(jg)ge=TS;else{ge=_S;var ze=vS}else K=$.nodeName,!K||K.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?F&&nl(F.elementType)&&(ge=Lg):ge=ES;if(ge&&(ge=ge(t,F))){ar(te,ge,a,X);break e}ze&&ze(t,$,F),t==="focusout"&&F&&$.type==="number"&&F.memoizedProps.value!=null&&qr($,"number",$.value)}switch(ze=F?Si(F):window,t){case"focusin":(Vt(ze)||ze.contentEditable==="true")&&(Ga=ze,kd=F,dl=null);break;case"focusout":dl=kd=Ga=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,$g(te,a,X);break;case"selectionchange":if(wS)break;case"keydown":case"keyup":$g(te,a,X)}var Te;if(Di)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else $e?Y(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(v&&a.locale!=="ko"&&($e||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&$e&&(Te=rl()):(Ii=X,Hr="value"in Ii?Ii.value:Ii.textContent,$e=!0)),ze=$c(F,Re),0<ze.length&&(Re=new ol(Re,t,null,a,X),te.push({event:Re,listeners:ze}),Te?Re.data=Te:(Te=le(a),Te!==null&&(Re.data=Te)))),(Te=y?kt(t,a):Ke(t,a))&&(Re=$c(F,"onBeforeInput"),0<Re.length&&(ze=new ol("onBeforeInput","beforeinput",null,a,X),te.push({event:ze,listeners:Re}),ze.data=Te)),sA(te,t,F,a,X)}g_(te,r)})}function zl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function $c(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=qs(t,a),h!=null&&l.unshift(zl(t,h,f)),h=qs(t,r),h!=null&&l.push(zl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function v_(t,r,a,l,h){for(var f=r._reactName,E=[];a!==null&&a!==l;){var b=a,D=b.alternate,F=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||F===null||(D=F,h?(F=qs(a,f),F!=null&&E.unshift(zl(a,F,D))):h||(F=qs(a,f),F!=null&&E.push(zl(a,F,D)))),a=a.return}E.length!==0&&t.push({event:r,listeners:E})}var uA=/\r\n?/g,cA=/\u0000|\uFFFD/g;function __(t){return(typeof t=="string"?t:""+t).replace(uA,`
`).replace(cA,"")}function E_(t,r){return r=__(r),__(t)===r}function Kc(){}function ot(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&zn(t,""+l);break;case"className":Ai(t,"class",l);break;case"tabIndex":Ai(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(t,a,l);break;case"style":tl(t,l,f);break;case"data":if(r!=="object"){Ai(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&ot(t,r,"name",h.name,h,null),ot(t,r,"formEncType",h.formEncType,h,null),ot(t,r,"formMethod",h.formMethod,h,null),ot(t,r,"formTarget",h.formTarget,h,null)):(ot(t,r,"encType",h.encType,h,null),ot(t,r,"method",h.method,h,null),ot(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Kc);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":qe("beforetoggle",t),qe("toggle",t),Br(t,"popover",l);break;case"xlinkActuate":Qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Br(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Id.get(a)||a,Br(t,a,l))}}function sm(t,r,a,l,h,f){switch(a){case"style":tl(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&qe("scroll",t);break;case"onScrollEnd":l!=null&&qe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Da.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[We]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Br(t,a,l)}}}function Zt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",t),qe("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(t,r,f,E,a,null)}}h&&ot(t,r,"srcSet",a.srcSet,a,null),l&&ot(t,r,"src",a.src,a,null);return;case"input":qe("invalid",t);var b=f=E=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":E=X;break;case"checked":D=X;break;case"defaultChecked":F=X;break;case"value":f=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:ot(t,r,l,X,a,null)}}Us(t,f,b,D,F,E,h,!1),Va(t);return;case"select":qe("invalid",t),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":f=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:ot(t,r,h,b,a,null)}r=f,a=E,t.multiple=!!l,r!=null?er(t,!!l,r,!1):a!=null&&er(t,!!l,a,!0);return;case"textarea":qe("invalid",t),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(b=a[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":h=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:ot(t,r,E,b,a,null)}zs(t,l,h,f),Va(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ot(t,r,D,l,a,null)}return;case"dialog":qe("beforetoggle",t),qe("toggle",t),qe("cancel",t),qe("close",t);break;case"iframe":case"object":qe("load",t);break;case"video":case"audio":for(l=0;l<Ul.length;l++)qe(Ul[l],t);break;case"image":qe("error",t),qe("load",t);break;case"details":qe("toggle",t);break;case"embed":case"source":case"link":qe("error",t),qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(t,r,F,l,a,null)}return;default:if(nl(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&sm(t,r,X,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ot(t,r,b,l,a,null))}function hA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,b=null,D=null,F=null,X=null;for(K in a){var te=a[K];if(a.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=te;default:l.hasOwnProperty(K)||ot(t,r,K,null,l,te)}}for(var $ in l){var K=l[$];if(te=a[$],l.hasOwnProperty($)&&(K!=null||te!=null))switch($){case"type":f=K;break;case"name":h=K;break;case"checked":F=K;break;case"defaultChecked":X=K;break;case"value":E=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==te&&ot(t,r,$,K,l,te)}}xn(t,E,b,D,F,X,f,h);return;case"select":K=E=b=$=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":K=D;default:l.hasOwnProperty(f)||ot(t,r,f,null,l,D)}for(h in l)if(f=l[h],D=a[h],l.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":$=f;break;case"defaultValue":b=f;break;case"multiple":E=f;default:f!==D&&ot(t,r,h,f,l,D)}r=b,a=E,l=K,$!=null?er(t,!!a,$,!1):!!l!=!!a&&(r!=null?er(t,!!a,r,!0):er(t,!!a,a?[]:"",!1));return;case"textarea":K=$=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ot(t,r,b,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":$=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&ot(t,r,E,h,l,f)}st(t,$,K);return;case"option":for(var Ce in a)if($=a[Ce],a.hasOwnProperty(Ce)&&$!=null&&!l.hasOwnProperty(Ce))switch(Ce){case"selected":t.selected=!1;break;default:ot(t,r,Ce,null,l,$)}for(D in l)if($=l[D],K=a[D],l.hasOwnProperty(D)&&$!==K&&($!=null||K!=null))switch(D){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ot(t,r,D,$,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)$=a[Ae],a.hasOwnProperty(Ae)&&$!=null&&!l.hasOwnProperty(Ae)&&ot(t,r,Ae,null,l,$);for(F in l)if($=l[F],K=a[F],l.hasOwnProperty(F)&&$!==K&&($!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:ot(t,r,F,$,l,K)}return;default:if(nl(r)){for(var lt in a)$=a[lt],a.hasOwnProperty(lt)&&$!==void 0&&!l.hasOwnProperty(lt)&&sm(t,r,lt,void 0,l,$);for(X in l)$=l[X],K=a[X],!l.hasOwnProperty(X)||$===K||$===void 0&&K===void 0||sm(t,r,X,$,l,K);return}}for(var z in a)$=a[z],a.hasOwnProperty(z)&&$!=null&&!l.hasOwnProperty(z)&&ot(t,r,z,null,l,$);for(te in l)$=l[te],K=a[te],!l.hasOwnProperty(te)||$===K||$==null&&K==null||ot(t,r,te,$,l,K)}var am=null,om=null;function Qc(t){return t.nodeType===9?t:t.ownerDocument}function T_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function lm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var um=null;function dA(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var w_=typeof setTimeout=="function"?setTimeout:void 0,fA=typeof clearTimeout=="function"?clearTimeout:void 0,S_=typeof Promise=="function"?Promise:void 0,mA=typeof queueMicrotask=="function"?queueMicrotask:typeof S_<"u"?function(t){return S_.resolve(null).then(t).catch(pA)}:w_;function pA(t){setTimeout(function(){throw t})}function ss(t){return t==="head"}function A_(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=t.ownerDocument;if(a&1&&Bl(E.documentElement),a&2&&Bl(E.body),a&4)for(a=E.head,Bl(a),E=a.firstChild;E;){var b=E.nextSibling,D=E.nodeName;E[ct]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=b}}if(h===0){t.removeChild(f),Yl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Yl(r)}function cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),bi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function gA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ct])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=oi(t.nextSibling),t===null)break}return null}function yA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=oi(t.nextSibling),t===null))return null;return t}function hm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function vA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function oi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var dm=null;function R_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function I_(t,r,a){switch(r=Qc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Bl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);bi(t)}var Wn=new Map,C_=new Set;function Yc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _r=oe.d;oe.d={f:_A,r:EA,D:TA,C:bA,L:wA,m:SA,X:RA,S:AA,M:IA};function _A(){var t=_r.f(),r=zc();return t||r}function EA(t){var r=wi(t);r!==null&&r.tag===5&&r.type==="form"?Qy(r):_r.r(t)}var yo=typeof document>"u"?null:document;function x_(t,r,a){var l=yo;if(l&&typeof r=="string"&&r){var h=xt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),C_.has(h)||(C_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Zt(r,"link",t),At(r),l.head.appendChild(r)))}}function TA(t){_r.D(t),x_("dns-prefetch",t,null)}function bA(t,r){_r.C(t,r),x_("preconnect",t,r)}function wA(t,r,a){_r.L(t,r,a);var l=yo;if(l&&t&&r){var h='link[rel="preload"][as="'+xt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+xt(a.imageSizes)+'"]')):h+='[href="'+xt(t)+'"]';var f=h;switch(r){case"style":f=vo(t);break;case"script":f=_o(t)}Wn.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Wn.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(ql(f))||r==="script"&&l.querySelector(Hl(f))||(r=l.createElement("link"),Zt(r,"link",t),At(r),l.head.appendChild(r)))}}function SA(t,r){_r.m(t,r);var a=yo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=_o(t)}if(!Wn.has(f)&&(t=T({rel:"modulepreload",href:t},r),Wn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Hl(f)))return}l=a.createElement("link"),Zt(l,"link",t),At(l),a.head.appendChild(l)}}}function AA(t,r,a){_r.S(t,r,a);var l=yo;if(l&&t){var h=dn(l).hoistableStyles,f=vo(t);r=r||"default";var E=h.get(f);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(ql(f)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Wn.get(f))&&fm(t,a);var D=E=l.createElement("link");At(D),Zt(D,"link",t),D._p=new Promise(function(F,X){D.onload=F,D.onerror=X}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Wc(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:b},h.set(f,E)}}}function RA(t,r){_r.X(t,r);var a=yo;if(a&&t){var l=dn(a).hoistableScripts,h=_o(t),f=l.get(h);f||(f=a.querySelector(Hl(h)),f||(t=T({src:t,async:!0},r),(r=Wn.get(h))&&mm(t,r),f=a.createElement("script"),At(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function IA(t,r){_r.M(t,r);var a=yo;if(a&&t){var l=dn(a).hoistableScripts,h=_o(t),f=l.get(h);f||(f=a.querySelector(Hl(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=Wn.get(h))&&mm(t,r),f=a.createElement("script"),At(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function N_(t,r,a,l){var h=(h=Se.current)?Yc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=vo(a.href),a=dn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=vo(a.href);var f=dn(h).hoistableStyles,E=f.get(t);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,E),(f=h.querySelector(ql(t)))&&!f._p&&(E.instance=f,E.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),f||CA(h,t,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=_o(a),a=dn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function vo(t){return'href="'+xt(t)+'"'}function ql(t){return'link[rel="stylesheet"]['+t+"]"}function D_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function CA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zt(r,"link",a),At(r),t.head.appendChild(r))}function _o(t){return'[src="'+xt(t)+'"]'}function Hl(t){return"script[async]"+t}function O_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+xt(a.href)+'"]');if(l)return r.instance=l,At(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),At(l),Zt(l,"style",h),Wc(l,a.precedence,t),r.instance=l;case"stylesheet":h=vo(a.href);var f=t.querySelector(ql(h));if(f)return r.state.loading|=4,r.instance=f,At(f),f;l=D_(a),(h=Wn.get(h))&&fm(l,h),f=(t.ownerDocument||t).createElement("link"),At(f);var E=f;return E._p=new Promise(function(b,D){E.onload=b,E.onerror=D}),Zt(f,"link",l),r.state.loading|=4,Wc(f,a.precedence,t),r.instance=f;case"script":return f=_o(a.src),(h=t.querySelector(Hl(f)))?(r.instance=h,At(h),h):(l=a,(h=Wn.get(f))&&(l=T({},a),mm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),At(h),Zt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Wc(l,a.precedence,t));return r.instance}function Wc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===r)f=b;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function fm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function mm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Xc=null;function M_(t,r,a){if(Xc===null){var l=new Map,h=Xc=new Map;h.set(a,l)}else h=Xc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[ct]||f[Ge]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(r)||"";E=t+E;var b=l.get(E);b?b.push(f):l.set(E,[f])}}return l}function k_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function xA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function V_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Fl=null;function NA(){}function DA(t,r,a){if(Fl===null)throw Error(s(475));var l=Fl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=vo(a.href),f=t.querySelector(ql(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Zc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,At(f);return}f=t.ownerDocument||t,a=D_(a),(h=Wn.get(h))&&fm(a,h),f=f.createElement("link"),At(f);var E=f;E._p=new Promise(function(b,D){E.onload=b,E.onerror=D}),Zt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Zc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function OA(){if(Fl===null)throw Error(s(475));var t=Fl;return t.stylesheets&&t.count===0&&pm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&pm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Zc(){if(this.count--,this.count===0){if(this.stylesheets)pm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Jc=null;function pm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Jc=new Map,r.forEach(MA,t),Jc=null,Zc.call(t))}function MA(t,r){if(!(r.state.loading&4)){var a=Jc.get(t);if(a)var l=a.get(null);else{a=new Map,Jc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=r.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=Zc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Gl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function kA(t,r,a,l,h,f,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.hiddenUpdates=ti(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function P_(t,r,a,l,h,f,E,b,D,F,X,te){return t=new kA(t,r,a,E,b,D,F,te),r=1,f===!0&&(r|=24),f=Dn(3,null,null,r),t.current=f,f.stateNode=t,r=Yd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Jd(f),t}function L_(t){return t?(t=Ya,t):Ya}function j_(t,r,a,l,h,f){h=L_(h),l.context===null?l.context=h:l.pendingContext=h,l=$r(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Kr(t,l,r),a!==null&&(Pn(a,t,r),Tl(a,t,r))}function U_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function gm(t,r){U_(t,r),(t=t.alternate)&&U_(t,r)}function z_(t){if(t.tag===13){var r=Qa(t,67108864);r!==null&&Pn(r,t,67108864),gm(t,67108864)}}var eh=!0;function VA(t,r,a,l){var h=W.T;W.T=null;var f=oe.p;try{oe.p=2,ym(t,r,a,l)}finally{oe.p=f,W.T=h}}function PA(t,r,a,l){var h=W.T;W.T=null;var f=oe.p;try{oe.p=8,ym(t,r,a,l)}finally{oe.p=f,W.T=h}}function ym(t,r,a,l){if(eh){var h=vm(l);if(h===null)rm(t,r,l,th,a),q_(t,l);else if(jA(h,t,r,a,l))l.stopPropagation();else if(q_(t,l),r&4&&-1<LA.indexOf(t)){for(;h!==null;){var f=wi(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Cn(f.pendingLanes);if(E!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var D=1<<31-zt(E);b.entanglements[1]|=D,E&=~D}Li(f),(nt&6)===0&&(jc=hn()+500,jl(0))}}break;case 13:b=Qa(f,2),b!==null&&Pn(b,f,2),zc(),gm(f,2)}if(f=vm(l),f===null&&rm(t,r,l,th,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else rm(t,r,l,null,a)}}function vm(t){return t=Bn(t),_m(t)}var th=null;function _m(t){if(th=null,t=Xi(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return th=t,null}function B_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ko()){case Qi:return 2;case Vr:return 8;case Yi:case Qo:return 32;case Pr:return 268435456;default:return 32}default:return 32}}var Em=!1,as=null,os=null,ls=null,$l=new Map,Kl=new Map,us=[],LA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q_(t,r){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":$l.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(r.pointerId)}}function Ql(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=wi(r),r!==null&&z_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function jA(t,r,a,l,h){switch(r){case"focusin":return as=Ql(as,t,r,a,l,h),!0;case"dragenter":return os=Ql(os,t,r,a,l,h),!0;case"mouseover":return ls=Ql(ls,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return $l.set(f,Ql($l.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Kl.set(f,Ql(Kl.get(f)||null,t,r,a,l,h)),!0}return!1}function H_(t){var r=Xi(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Ee(t.priority,function(){if(a.tag===13){var l=Vn();l=ae(l);var h=Qa(a,l);h!==null&&Pn(h,a,l),gm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=vm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);tr=l,a.target.dispatchEvent(l),tr=null}else return r=wi(a),r!==null&&z_(r),t.blockedOn=a,!1;r.shift()}return!0}function F_(t,r,a){nh(t)&&a.delete(r)}function UA(){Em=!1,as!==null&&nh(as)&&(as=null),os!==null&&nh(os)&&(os=null),ls!==null&&nh(ls)&&(ls=null),$l.forEach(F_),Kl.forEach(F_)}function ih(t,r){t.blockedOn===r&&(t.blockedOn=null,Em||(Em=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,UA)))}var rh=null;function G_(t){rh!==t&&(rh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){rh===t&&(rh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var f=wi(a);f!==null&&(t.splice(r,3),r-=3,_f(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Yl(t){function r(D){return ih(D,t)}as!==null&&ih(as,t),os!==null&&ih(os,t),ls!==null&&ih(ls,t),$l.forEach(r),Kl.forEach(r);for(var a=0;a<us.length;a++){var l=us[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<us.length&&(a=us[0],a.blockedOn===null);)H_(a),a.blockedOn===null&&us.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[We]||null;if(typeof f=="function")E||G_(a);else if(E){var b=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[We]||null)b=E.formAction;else if(_m(h)!==null)continue}else b=E.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),G_(a)}}}function Tm(t){this._internalRoot=t}sh.prototype.render=Tm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Vn();j_(a,l,t,r,null,null)},sh.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;j_(t.current,2,null,t,null,null),zc(),r[Tt]=null}};function sh(t){this._internalRoot=t}sh.prototype.unstable_scheduleHydration=function(t){if(t){var r=_e();t={blockedOn:null,target:t,priority:r};for(var a=0;a<us.length&&r!==0&&r<us[a].priority;a++);us.splice(a,0,t),a===0&&H_(t)}};var $_=e.version;if($_!=="19.1.0")throw Error(s(527,$_,"19.1.0"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var zA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{mt=ah.inject(zA),Ze=ah}catch{}}return Xl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=lv,f=uv,E=cv,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=P_(t,1,!1,null,null,a,l,h,f,E,b,null),t[Tt]=r.current,im(t),new Tm(r)},Xl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=lv,E=uv,b=cv,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=P_(t,1,!0,r,a??null,l,h,f,E,b,D,F),r.context=L_(null),a=r.current,l=Vn(),l=ae(l),h=$r(l),h.callback=null,Kr(a,h,l),a=l,r.current.lanes=a,ni(r,a),Li(r),t[Tt]=r.current,im(t),new sh(r)},Xl.version="19.1.0",Xl}var n0;function YA(){if(n0)return Sm.exports;n0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=QA(),Sm.exports}var WA=YA();const XA="/showswatched2/assets/react-CHdo91hT.svg",ZA=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},JA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},iT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,m=d?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,T=u>>2,w=(u&3)<<4|m>>4;let I=(m&15)<<2|g>>6,O=g&63;p||(O=64,d||(I=64)),s.push(n[T],n[w],n[I],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(nT(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):JA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const w=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||w==null)throw new e1;const I=u<<2|m>>4;if(s.push(I),g!==64){const O=m<<4&240|g>>2;if(s.push(O),w!==64){const M=g<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class e1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t1=function(i){const e=nT(i);return iT.encodeByteArray(e,!0)},Ih=function(i){return t1(i).replace(/\./g,"")},rT=function(i){try{return iT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=()=>n1().__FIREBASE_DEFAULTS__,r1=()=>{if(typeof process>"u"||typeof i0>"u")return;const i=i0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},s1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&rT(i[1]);return e&&JSON.parse(e)},Wh=()=>{try{return ZA()||i1()||r1()||s1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},sT=i=>{var e,n;return(n=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},a1=i=>{const e=sT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},aT=()=>{var i;return(i=Wh())===null||i===void 0?void 0:i.config},oT=i=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ih(JSON.stringify(n)),Ih(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function c1(){var i;const e=(i=Wh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function h1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function d1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f1(){const i=cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function m1(){return!c1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uT(){try{return typeof indexedDB=="object"}catch{return!1}}function cT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function p1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="FirebaseError";class fi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=g1,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ba.prototype.create)}}class ba{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?y1(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new fi(o,m,s)}}function y1(i,e){return i.replace(v1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const v1=/\{\$([^}]+)}/g;function _1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ws(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(r0(u)&&r0(d)){if(!ws(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function r0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function tu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function nu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function E1(i,e){const n=new T1(i,e);return n.subscribe.bind(n)}class T1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");b1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Cm),o.error===void 0&&(o.error=Cm),o.complete===void 0&&(o.complete=Cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1e3,S1=2,A1=4*60*60*1e3,R1=.5;function s0(i,e=w1,n=S1){const s=e*Math.pow(n,i),o=Math.round(R1*s*(Math.random()-.5)*2);return Math.min(A1,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(i){return i&&i._delegate?i._delegate:i}class ui{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new o1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(x1(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:C1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C1(i){return i===ca?void 0:i}function x1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new I1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(He||(He={}));const D1={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},O1=He.INFO,M1={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},k1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=M1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xh{constructor(e){this.name=e,this._logLevel=O1,this._logHandler=k1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const V1=(i,e)=>e.some(n=>i instanceof n);let a0,o0;function P1(){return a0||(a0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L1(){return o0||(o0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hT=new WeakMap,$m=new WeakMap,dT=new WeakMap,xm=new WeakMap,Rp=new WeakMap;function j1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(_s(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&hT.set(n,i)}).catch(()=>{}),Rp.set(e,i),e}function U1(i){if($m.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});$m.set(i,e)}let Km={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return $m.get(i);if(e==="objectStoreNames")return i.objectStoreNames||dT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function z1(i){Km=i(Km)}function B1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Nm(this),e,...n);return dT.set(s,e.sort?e.sort():[e]),_s(s)}:L1().includes(i)?function(...e){return i.apply(Nm(this),e),_s(hT.get(this))}:function(...e){return _s(i.apply(Nm(this),e))}}function q1(i){return typeof i=="function"?B1(i):(i instanceof IDBTransaction&&U1(i),V1(i,P1())?new Proxy(i,Km):i)}function _s(i){if(i instanceof IDBRequest)return j1(i);if(xm.has(i))return xm.get(i);const e=q1(i);return e!==i&&(xm.set(i,e),Rp.set(e,i)),e}const Nm=i=>Rp.get(i);function fT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),m=_s(d);return s&&d.addEventListener("upgradeneeded",p=>{s(_s(d.result),p.oldVersion,p.newVersion,_s(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const H1=["get","getKey","getAll","getAllKeys","count"],F1=["put","add","delete","clear"],Dm=new Map;function l0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=F1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||H1.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Dm.set(e,u),u}z1(i=>({...i,get:(e,n,s)=>l0(e,n)||i.get(e,n,s),has:(e,n)=>!!l0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function $1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qm="@firebase/app",u0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Xh("@firebase/app"),K1="@firebase/app-compat",Q1="@firebase/analytics-compat",Y1="@firebase/analytics",W1="@firebase/app-check-compat",X1="@firebase/app-check",Z1="@firebase/auth",J1="@firebase/auth-compat",e2="@firebase/database",t2="@firebase/data-connect",n2="@firebase/database-compat",i2="@firebase/functions",r2="@firebase/functions-compat",s2="@firebase/installations",a2="@firebase/installations-compat",o2="@firebase/messaging",l2="@firebase/messaging-compat",u2="@firebase/performance",c2="@firebase/performance-compat",h2="@firebase/remote-config",d2="@firebase/remote-config-compat",f2="@firebase/storage",m2="@firebase/storage-compat",p2="@firebase/firestore",g2="@firebase/vertexai",y2="@firebase/firestore-compat",v2="firebase",_2="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="[DEFAULT]",E2={[Qm]:"fire-core",[K1]:"fire-core-compat",[Y1]:"fire-analytics",[Q1]:"fire-analytics-compat",[X1]:"fire-app-check",[W1]:"fire-app-check-compat",[Z1]:"fire-auth",[J1]:"fire-auth-compat",[e2]:"fire-rtdb",[t2]:"fire-data-connect",[n2]:"fire-rtdb-compat",[i2]:"fire-fn",[r2]:"fire-fn-compat",[s2]:"fire-iid",[a2]:"fire-iid-compat",[o2]:"fire-fcm",[l2]:"fire-fcm-compat",[u2]:"fire-perf",[c2]:"fire-perf-compat",[h2]:"fire-rc",[d2]:"fire-rc-compat",[f2]:"fire-gcs",[m2]:"fire-gcs-compat",[p2]:"fire-fst",[y2]:"fire-fst-compat",[g2]:"fire-vertex","fire-js":"fire-js",[v2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new Map,T2=new Map,Wm=new Map;function c0(i,e){try{i.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Hi(i){const e=i.name;if(Wm.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,i);for(const n of Ch.values())c0(n,i);for(const n of T2.values())c0(n,i);return!0}function wa(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Xn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new ba("app","Firebase",b2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=_2;function mT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ym,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Es.create("bad-app-name",{appName:String(o)});if(n||(n=aT()),!n)throw Es.create("no-options");const u=Ch.get(o);if(u){if(ws(n,u.options)&&ws(s,u.config))return u;throw Es.create("duplicate-app",{appName:o})}const d=new N1(o);for(const p of Wm.values())d.addComponent(p);const m=new w2(n,s,d);return Ch.set(o,m),m}function Ip(i=Ym){const e=Ch.get(i);if(!e&&i===Ym&&aT())return mT();if(!e)throw Es.create("no-app",{appName:i});return e}function Zn(i,e,n){var s;let o=(s=E2[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(m.join(" "));return}Hi(new ui(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="firebase-heartbeat-database",A2=1,pu="firebase-heartbeat-store";let Om=null;function pT(){return Om||(Om=fT(S2,A2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(pu)}catch(n){console.warn(n)}}}}).catch(i=>{throw Es.create("idb-open",{originalErrorMessage:i.message})})),Om}async function R2(i){try{const n=(await pT()).transaction(pu),s=await n.objectStore(pu).get(gT(i));return await n.done,s}catch(e){if(e instanceof fi)Rr.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function h0(i,e){try{const s=(await pT()).transaction(pu,"readwrite");await s.objectStore(pu).put(e,gT(i)),await s.done}catch(n){if(n instanceof fi)Rr.warn(n.message);else{const s=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(s.message)}}}function gT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=1024,C2=30;class x2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new D2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=d0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>C2){const d=O2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Rr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d0(),{heartbeatsToSend:s,unsentEntries:o}=N2(this._heartbeatsCache.heartbeats),u=Ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Rr.warn(n),""}}}function d0(){return new Date().toISOString().substring(0,10)}function N2(i,e=I2){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),f0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class D2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uT()?cT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return h0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return h0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function f0(i){return Ih(JSON.stringify({version:2,heartbeats:i})).length}function O2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(i){Hi(new ui("platform-logger",e=>new G1(e),"PRIVATE")),Hi(new ui("heartbeat",e=>new x2(e),"PRIVATE")),Zn(Qm,u0,i),Zn(Qm,u0,"esm2017"),Zn("fire-js","")}M2("");var k2="firebase",V2="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(k2,V2,"app");var m0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,yT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,S){function A(){}A.prototype=S.prototype,V.D=S.prototype,V.prototype=new A,V.prototype.constructor=V,V.C=function(N,x,P){for(var C=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)C[Ne-2]=arguments[Ne];return S.prototype[x].apply(N,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,S,A){A||(A=0);var N=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)N[x]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(x=0;16>x;++x)N[x]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=V.g[0],A=V.g[1],x=V.g[2];var P=V.g[3],C=S+(P^A&(x^P))+N[0]+3614090360&4294967295;S=A+(C<<7&4294967295|C>>>25),C=P+(x^S&(A^x))+N[1]+3905402710&4294967295,P=S+(C<<12&4294967295|C>>>20),C=x+(A^P&(S^A))+N[2]+606105819&4294967295,x=P+(C<<17&4294967295|C>>>15),C=A+(S^x&(P^S))+N[3]+3250441966&4294967295,A=x+(C<<22&4294967295|C>>>10),C=S+(P^A&(x^P))+N[4]+4118548399&4294967295,S=A+(C<<7&4294967295|C>>>25),C=P+(x^S&(A^x))+N[5]+1200080426&4294967295,P=S+(C<<12&4294967295|C>>>20),C=x+(A^P&(S^A))+N[6]+2821735955&4294967295,x=P+(C<<17&4294967295|C>>>15),C=A+(S^x&(P^S))+N[7]+4249261313&4294967295,A=x+(C<<22&4294967295|C>>>10),C=S+(P^A&(x^P))+N[8]+1770035416&4294967295,S=A+(C<<7&4294967295|C>>>25),C=P+(x^S&(A^x))+N[9]+2336552879&4294967295,P=S+(C<<12&4294967295|C>>>20),C=x+(A^P&(S^A))+N[10]+4294925233&4294967295,x=P+(C<<17&4294967295|C>>>15),C=A+(S^x&(P^S))+N[11]+2304563134&4294967295,A=x+(C<<22&4294967295|C>>>10),C=S+(P^A&(x^P))+N[12]+1804603682&4294967295,S=A+(C<<7&4294967295|C>>>25),C=P+(x^S&(A^x))+N[13]+4254626195&4294967295,P=S+(C<<12&4294967295|C>>>20),C=x+(A^P&(S^A))+N[14]+2792965006&4294967295,x=P+(C<<17&4294967295|C>>>15),C=A+(S^x&(P^S))+N[15]+1236535329&4294967295,A=x+(C<<22&4294967295|C>>>10),C=S+(x^P&(A^x))+N[1]+4129170786&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^x&(S^A))+N[6]+3225465664&4294967295,P=S+(C<<9&4294967295|C>>>23),C=x+(S^A&(P^S))+N[11]+643717713&4294967295,x=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(x^P))+N[0]+3921069994&4294967295,A=x+(C<<20&4294967295|C>>>12),C=S+(x^P&(A^x))+N[5]+3593408605&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^x&(S^A))+N[10]+38016083&4294967295,P=S+(C<<9&4294967295|C>>>23),C=x+(S^A&(P^S))+N[15]+3634488961&4294967295,x=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(x^P))+N[4]+3889429448&4294967295,A=x+(C<<20&4294967295|C>>>12),C=S+(x^P&(A^x))+N[9]+568446438&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^x&(S^A))+N[14]+3275163606&4294967295,P=S+(C<<9&4294967295|C>>>23),C=x+(S^A&(P^S))+N[3]+4107603335&4294967295,x=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(x^P))+N[8]+1163531501&4294967295,A=x+(C<<20&4294967295|C>>>12),C=S+(x^P&(A^x))+N[13]+2850285829&4294967295,S=A+(C<<5&4294967295|C>>>27),C=P+(A^x&(S^A))+N[2]+4243563512&4294967295,P=S+(C<<9&4294967295|C>>>23),C=x+(S^A&(P^S))+N[7]+1735328473&4294967295,x=P+(C<<14&4294967295|C>>>18),C=A+(P^S&(x^P))+N[12]+2368359562&4294967295,A=x+(C<<20&4294967295|C>>>12),C=S+(A^x^P)+N[5]+4294588738&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^x)+N[8]+2272392833&4294967295,P=S+(C<<11&4294967295|C>>>21),C=x+(P^S^A)+N[11]+1839030562&4294967295,x=P+(C<<16&4294967295|C>>>16),C=A+(x^P^S)+N[14]+4259657740&4294967295,A=x+(C<<23&4294967295|C>>>9),C=S+(A^x^P)+N[1]+2763975236&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^x)+N[4]+1272893353&4294967295,P=S+(C<<11&4294967295|C>>>21),C=x+(P^S^A)+N[7]+4139469664&4294967295,x=P+(C<<16&4294967295|C>>>16),C=A+(x^P^S)+N[10]+3200236656&4294967295,A=x+(C<<23&4294967295|C>>>9),C=S+(A^x^P)+N[13]+681279174&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^x)+N[0]+3936430074&4294967295,P=S+(C<<11&4294967295|C>>>21),C=x+(P^S^A)+N[3]+3572445317&4294967295,x=P+(C<<16&4294967295|C>>>16),C=A+(x^P^S)+N[6]+76029189&4294967295,A=x+(C<<23&4294967295|C>>>9),C=S+(A^x^P)+N[9]+3654602809&4294967295,S=A+(C<<4&4294967295|C>>>28),C=P+(S^A^x)+N[12]+3873151461&4294967295,P=S+(C<<11&4294967295|C>>>21),C=x+(P^S^A)+N[15]+530742520&4294967295,x=P+(C<<16&4294967295|C>>>16),C=A+(x^P^S)+N[2]+3299628645&4294967295,A=x+(C<<23&4294967295|C>>>9),C=S+(x^(A|~P))+N[0]+4096336452&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~x))+N[7]+1126891415&4294967295,P=S+(C<<10&4294967295|C>>>22),C=x+(S^(P|~A))+N[14]+2878612391&4294967295,x=P+(C<<15&4294967295|C>>>17),C=A+(P^(x|~S))+N[5]+4237533241&4294967295,A=x+(C<<21&4294967295|C>>>11),C=S+(x^(A|~P))+N[12]+1700485571&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~x))+N[3]+2399980690&4294967295,P=S+(C<<10&4294967295|C>>>22),C=x+(S^(P|~A))+N[10]+4293915773&4294967295,x=P+(C<<15&4294967295|C>>>17),C=A+(P^(x|~S))+N[1]+2240044497&4294967295,A=x+(C<<21&4294967295|C>>>11),C=S+(x^(A|~P))+N[8]+1873313359&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~x))+N[15]+4264355552&4294967295,P=S+(C<<10&4294967295|C>>>22),C=x+(S^(P|~A))+N[6]+2734768916&4294967295,x=P+(C<<15&4294967295|C>>>17),C=A+(P^(x|~S))+N[13]+1309151649&4294967295,A=x+(C<<21&4294967295|C>>>11),C=S+(x^(A|~P))+N[4]+4149444226&4294967295,S=A+(C<<6&4294967295|C>>>26),C=P+(A^(S|~x))+N[11]+3174756917&4294967295,P=S+(C<<10&4294967295|C>>>22),C=x+(S^(P|~A))+N[2]+718787259&4294967295,x=P+(C<<15&4294967295|C>>>17),C=A+(P^(x|~S))+N[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+x&4294967295,V.g[3]=V.g[3]+P&4294967295}s.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var A=S-this.blockSize,N=this.B,x=this.h,P=0;P<S;){if(x==0)for(;P<=A;)o(this,V,P),P+=this.blockSize;if(typeof V=="string"){for(;P<S;)if(N[x++]=V.charCodeAt(P++),x==this.blockSize){o(this,N),x=0;break}}else for(;P<S;)if(N[x++]=V[P++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=S},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var A=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=A&255,A/=256;for(this.u(V),V=Array(16),S=A=0;4>S;++S)for(var N=0;32>N;N+=8)V[A++]=this.g[S]>>>N&255;return V};function u(V,S){var A=m;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=S(V)}function d(V,S){this.h=S;for(var A=[],N=!0,x=V.length-1;0<=x;x--){var P=V[x]|0;N&&P==S||(A[x]=P,N=!1)}this.g=A}var m={};function p(V){return-128<=V&&128>V?u(V,function(S){return new d([S|0],0>S?-1:0)}):new d([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return w;if(0>V)return U(g(-V));for(var S=[],A=1,N=0;V>=A;N++)S[N]=V/A|0,A*=4294967296;return new d(S,0)}function T(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return U(T(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=g(Math.pow(S,8)),N=w,x=0;x<V.length;x+=8){var P=Math.min(8,V.length-x),C=parseInt(V.substring(x,x+P),S);8>P?(P=g(Math.pow(S,P)),N=N.j(P).add(g(C))):(N=N.j(A),N=N.add(g(C)))}return N}var w=p(0),I=p(1),O=p(16777216);i=d.prototype,i.m=function(){if(Q(this))return-U(this).m();for(var V=0,S=1,A=0;A<this.g.length;A++){var N=this.i(A);V+=(0<=N?N:4294967296+N)*S,S*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(M(this))return"0";if(Q(this))return"-"+U(this).toString(V);for(var S=g(Math.pow(V,6)),A=this,N="";;){var x=he(A,S).g;A=G(A,x.j(S));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(V);if(A=x,M(A))return P+N;for(;6>P.length;)P="0"+P;N=P+N}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function M(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function Q(V){return V.h==-1}i.l=function(V){return V=G(this,V),Q(V)?-1:M(V)?0:1};function U(V){for(var S=V.g.length,A=[],N=0;N<S;N++)A[N]=~V.g[N];return new d(A,~V.h).add(I)}i.abs=function(){return Q(this)?U(this):this},i.add=function(V){for(var S=Math.max(this.g.length,V.g.length),A=[],N=0,x=0;x<=S;x++){var P=N+(this.i(x)&65535)+(V.i(x)&65535),C=(P>>>16)+(this.i(x)>>>16)+(V.i(x)>>>16);N=C>>>16,P&=65535,C&=65535,A[x]=C<<16|P}return new d(A,A[A.length-1]&-2147483648?-1:0)};function G(V,S){return V.add(U(S))}i.j=function(V){if(M(this)||M(V))return w;if(Q(this))return Q(V)?U(this).j(U(V)):U(U(this).j(V));if(Q(V))return U(this.j(U(V)));if(0>this.l(O)&&0>V.l(O))return g(this.m()*V.m());for(var S=this.g.length+V.g.length,A=[],N=0;N<2*S;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<V.g.length;x++){var P=this.i(N)>>>16,C=this.i(N)&65535,Ne=V.i(x)>>>16,Oe=V.i(x)&65535;A[2*N+2*x]+=C*Oe,re(A,2*N+2*x),A[2*N+2*x+1]+=P*Oe,re(A,2*N+2*x+1),A[2*N+2*x+1]+=C*Ne,re(A,2*N+2*x+1),A[2*N+2*x+2]+=P*Ne,re(A,2*N+2*x+2)}for(N=0;N<S;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=S;N<2*S;N++)A[N]=0;return new d(A,0)};function re(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function Z(V,S){this.g=V,this.h=S}function he(V,S){if(M(S))throw Error("division by zero");if(M(V))return new Z(w,w);if(Q(V))return S=he(U(V),S),new Z(U(S.g),U(S.h));if(Q(S))return S=he(V,U(S)),new Z(U(S.g),S.h);if(30<V.g.length){if(Q(V)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var A=I,N=S;0>=N.l(V);)A=ue(A),N=ue(N);var x=we(A,1),P=we(N,1);for(N=we(N,2),A=we(A,2);!M(N);){var C=P.add(N);0>=C.l(V)&&(x=x.add(A),P=C),N=we(N,1),A=we(A,1)}return S=G(V,x.j(S)),new Z(x,S)}for(x=w;0<=V.l(S);){for(A=Math.max(1,Math.floor(V.m()/S.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),P=g(A),C=P.j(S);Q(C)||0<C.l(V);)A-=N,P=g(A),C=P.j(S);M(P)&&(P=I),x=x.add(P),V=G(V,C)}return new Z(x,V)}i.A=function(V){return he(this,V).h},i.and=function(V){for(var S=Math.max(this.g.length,V.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)&V.i(N);return new d(A,this.h&V.h)},i.or=function(V){for(var S=Math.max(this.g.length,V.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)|V.i(N);return new d(A,this.h|V.h)},i.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),A=[],N=0;N<S;N++)A[N]=this.i(N)^V.i(N);return new d(A,this.h^V.h)};function ue(V){for(var S=V.g.length+1,A=[],N=0;N<S;N++)A[N]=V.i(N)<<1|V.i(N-1)>>>31;return new d(A,V.h)}function we(V,S){var A=S>>5;S%=32;for(var N=V.g.length-A,x=[],P=0;P<N;P++)x[P]=0<S?V.i(P+A)>>>S|V.i(P+A+1)<<32-S:V.i(P+A);return new d(x,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,yT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=T,Ts=d}).apply(typeof m0<"u"?m0:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,iu,_T,ph,Xm,ET,TT,bT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var R=0;R<c.length-1;R++){var q=c[R];if(!(q in v))break e;v=v[q]}c=c[c.length-1],R=v[c],y=y(R),y!=R&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,R=!1,q={next:function(){if(!R&&v<c.length){var Y=v++;return{value:y(Y,c[Y]),done:!1}}return R=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function T(c,y,v){return c.call.apply(c.bind,arguments)}function w(c,y,v){if(!c)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,R),c.apply(y,q)}}return function(){return c.apply(y,arguments)}}function I(c,y,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,I.apply(null,arguments)}function O(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(R,q,Y){for(var le=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)le[$e-2]=arguments[$e];return y.prototype[q].apply(R,le)}}function Q(c){const y=c.length;if(0<y){const v=Array(y);for(let R=0;R<y;R++)v[R]=c[R];return v}return[]}function U(c,y){for(let v=1;v<arguments.length;v++){const R=arguments[v];if(p(R)){const q=c.length||0,Y=R.length||0;c.length=q+Y;for(let le=0;le<Y;le++)c[q+le]=R[le]}else c.push(R)}}class G{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function re(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var ue=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function we(c,y,v){for(const R in c)y.call(v,c[R],R,c)}function V(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function S(c){const y={};for(const v in c)y[v]=c[v];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,y){let v,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(v in R)c[v]=R[v];for(let Y=0;Y<A.length;Y++)v=A[Y],Object.prototype.hasOwnProperty.call(R,v)&&(c[v]=R[v])}}function x(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function P(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Le;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ne{constructor(){this.h=this.g=null}add(y,v){const R=Oe.get();R.set(y,v),this.h?this.h.next=R:this.g=R,this.h=R}}var Oe=new G(()=>new W,c=>c.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ye=!1,Le=new Ne,L=()=>{const c=m.Promise.resolve(void 0);oe=()=>{c.then(ie)}};var ie=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){P(v)}var y=Oe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ye=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function Pe(c,y){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ue){e:{try{he(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Se[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}M(Pe,se);var Se={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),rt=0;function vn(c,y,v,R,q){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!R,this.ha=q,this.key=++rt,this.da=this.fa=!1}function ei(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function In(c){this.src=c,this.g={},this.h=0}In.prototype.add=function(c,y,v,R,q){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var le=yi(c,y,R,q);return-1<le?(y=c[le],v||(y.fa=!1)):(y=new vn(y,this.src,Y,!!R,q),y.fa=v,c.push(y)),y};function gi(c,y){var v=y.type;if(v in c.g){var R=c.g[v],q=Array.prototype.indexOf.call(R,y,void 0),Y;(Y=0<=q)&&Array.prototype.splice.call(R,q,1),Y&&(ei(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function yi(c,y,v,R){for(var q=0;q<c.length;++q){var Y=c[q];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==R)return q}return-1}var Ki="closure_lm_"+(1e6*Math.random()|0),Os={};function Ms(c,y,v,R,q){if(Array.isArray(y)){for(var Y=0;Y<y.length;Y++)Ms(c,y[Y],v,R,q);return null}return v=xa(v),c&&c[Et]?c.K(y,v,g(R)?!!R.capture:!1,q):hn(c,y,v,!1,R,q)}function hn(c,y,v,R,q,Y){if(!y)throw Error("Invalid event type");var le=g(q)?!!q.capture:!!q,$e=Pr(c);if($e||(c[Ki]=$e=new In(c)),v=$e.add(y,v,R,le,Y),v.proxy)return v;if(R=Ko(),v.proxy=R,R.src=c,R.listener=v,c.addEventListener)pe||(q=le),q===void 0&&(q=!1),c.addEventListener(y.toString(),R,q);else if(c.attachEvent)c.attachEvent(Yi(y.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ko(){function c(v){return y.call(c.src,c.listener,v)}const y=Qo;return c}function Qi(c,y,v,R,q){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Qi(c,y[Y],v,R,q);else R=g(R)?!!R.capture:!!R,v=xa(v),c&&c[Et]?(c=c.i,y=String(y).toString(),y in c.g&&(Y=c.g[y],v=yi(Y,v,R,q),-1<v&&(ei(Y[v]),Array.prototype.splice.call(Y,v,1),Y.length==0&&(delete c.g[y],c.h--)))):c&&(c=Pr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=yi(y,v,R,q)),(v=-1<c?y[c]:null)&&Vr(v))}function Vr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Et])gi(y.i,c);else{var v=c.type,R=c.proxy;y.removeEventListener?y.removeEventListener(v,R,c.capture):y.detachEvent?y.detachEvent(Yi(v),R):y.addListener&&y.removeListener&&y.removeListener(R),(v=Pr(y))?(gi(v,c),v.h==0&&(v.src=null,y[Ki]=null)):ei(c)}}}function Yi(c){return c in Os?Os[c]:Os[c]="on"+c}function Qo(c,y){if(c.da)c=!0;else{y=new Pe(y,this);var v=c.listener,R=c.ha||c.src;c.fa&&Vr(c),c=v.call(R,y)}return c}function Pr(c){return c=c[Ki],c instanceof In?c:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function xa(c){return typeof c=="function"?c:(c[ks]||(c[ks]=function(y){return c.handleEvent(y)}),c[ks])}function mt(){ce.call(this),this.i=new In(this),this.M=this,this.F=null}M(mt,ce),mt.prototype[Et]=!0,mt.prototype.removeEventListener=function(c,y,v,R){Qi(this,c,y,v,R)};function Ze(c,y){var v,R=c.F;if(R)for(v=[];R;R=R.F)v.push(R);if(c=c.M,R=y.type||y,typeof y=="string")y=new se(y,c);else if(y instanceof se)y.target=y.target||c;else{var q=y;y=new se(R,c),N(y,q)}if(q=!0,v)for(var Y=v.length-1;0<=Y;Y--){var le=y.g=v[Y];q=Kt(le,R,!0,y)&&q}if(le=y.g=c,q=Kt(le,R,!0,y)&&q,q=Kt(le,R,!1,y)&&q,v)for(Y=0;Y<v.length;Y++)le=y.g=v[Y],q=Kt(le,R,!1,y)&&q}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],R=0;R<v.length;R++)ei(v[R]);delete c.g[y],c.h--}}this.F=null},mt.prototype.K=function(c,y,v,R){return this.i.add(String(c),y,!1,v,R)},mt.prototype.L=function(c,y,v,R){return this.i.add(String(c),y,!0,v,R)};function Kt(c,y,v,R){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Y=0;Y<y.length;++Y){var le=y[Y];if(le&&!le.da&&le.capture==v){var $e=le.listener,kt=le.ha||le.src;le.fa&&gi(c.i,le),q=$e.call(kt,R)!==!1&&q}}return q&&!R.defaultPrevented}function zt(c,y,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Vs(c){c.g=zt(()=>{c.g=null,c.i&&(c.i=!1,Vs(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Yo extends ce{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Vs(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(c){ce.call(this),this.h=c,this.g={}}M(vi,ce);var _i=[];function Ei(c){we(c.g,function(y,v){this.g.hasOwnProperty(v)&&Vr(y)},c),c.g={}}vi.prototype.N=function(){vi.aa.N.call(this),Ei(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cn=m.JSON.stringify,Lr=m.JSON.parse,Ti=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function jr(){}jr.prototype.h=null;function Na(c){return c.h||(c.h=c.i())}function Ur(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ni(){se.call(this,"d")}M(ni,se);function zr(){se.call(this,"c")}M(zr,se);var Un={},B=null;function ae(){return B=B||new mt}Un.La="serverreachability";function me(c){se.call(this,Un.La,c)}M(me,se);function _e(c){const y=ae();Ze(y,new me(y))}Un.STAT_EVENT="statevent";function Ee(c,y){se.call(this,Un.STAT_EVENT,c),this.stat=y}M(Ee,se);function ve(c){const y=ae();Ze(y,new Ee(y,c))}Un.Ma="timingevent";function Ge(c,y){se.call(this,Un.Ma,c),this.size=y}M(Ge,se);function We(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Tt(){this.g=!0}Tt.prototype.xa=function(){this.g=!1};function nn(c,y,v,R,q,Y){c.info(function(){if(c.g)if(Y)for(var le="",$e=Y.split("&"),kt=0;kt<$e.length;kt++){var Ke=$e[kt].split("=");if(1<Ke.length){var qt=Ke[0];Ke=Ke[1];var Vt=qt.split("_");le=2<=Vt.length&&Vt[1]=="type"?le+(qt+"="+Ke+"&"):le+(qt+"=redacted&")}}else le=null;else le=Y;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+y+`
`+v+`
`+le})}function Wi(c,y,v,R,q,Y,le){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+y+`
`+v+`
`+Y+" "+le})}function ut(c,y,v,R){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+ct(c,v)+(R?" "+R:"")})}function Wo(c,y){c.info(function(){return"TIMEOUT: "+y})}Tt.prototype.info=function(){};function ct(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var R=v[c];if(!(2>R.length)){var q=R[1];if(Array.isArray(q)&&!(1>q.length)){var Y=q[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var le=1;le<q.length;le++)q[le]=""}}}}return Cn(v)}catch{return y}}var bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wi;function Si(){}M(Si,jr),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},wi=new Si;function dn(c,y,v,R){this.j=c,this.i=y,this.l=v,this.R=R||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Xo={},Da={};function ii(c,y,v){c.L=1,c.v=zs(xn(y)),c.m=v,c.P=!0,Zi(c,null)}function Zi(c,y){c.F=Date.now(),Ps(c),c.A=xn(c.v);var v=c.A,R=c.R;Array.isArray(R)||(R=[String(R)]),il(v.i,"t",R),c.C=0,v=c.j.J,c.h=new At,c.g=ic(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Yo(I(c.Y,c,c.g),c.O)),y=c.U,v=c.g,R=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(_i[0]=q.toString()),q=_i);for(var Y=0;Y<q.length;Y++){var le=Ms(v,q[Y],R||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),_e(),nn(c.i,c.u,c.A,c.l,c.R,c.m)}dn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Hn(c)==3?y.j():this.Y(c)},dn.prototype.Y=function(c){try{if(c==this.g)e:{const Vt=Hn(this.g);var y=this.g.Ba();const ar=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||Yu(this.g)))){this.J||Vt!=4||y==7||(y==8||0>=ar?_e(3):_e(2)),Br(this);var v=this.g.Z();this.X=v;t:if(qu(this)){var R=Yu(this.g);c="";var q=R.length,Y=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),Ai(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,c+=this.h.i.decode(R[y],{stream:!(Y&&y==q-1)});R.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,Wi(this.i,this.u,this.A,this.l,this.R,Vt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,kt=this.g;if(($e=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re($e)){var Ke=$e;break t}}Ke=null}if(v=Ke)ut(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ls(this,v);else{this.o=!1,this.s=3,ve(12),Qt(this),Ai(this);break e}}if(this.P){v=!0;let Yt;for(;!this.J&&this.C<le.length;)if(Yt=Hu(this,le),Yt==Da){Vt==4&&(this.s=4,ve(14),v=!1),ut(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Xo){this.s=4,ve(15),ut(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else ut(this.i,this.l,Yt,null),Ls(this,Yt);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||le.length!=0||this.h.h||(this.s=1,ve(16),v=!1),this.o=this.o&&v,!v)ut(this.i,this.l,le,"[Invalid Chunked Response]"),Qt(this),Ai(this);else if(0<le.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Qs(qt),qt.M=!0,ve(11))}}else ut(this.i,this.l,le,null),Ls(this,le);Vt==4&&Qt(this),this.o&&!this.J&&(Vt==4?ec(this.j,this):(this.o=!1,Ps(this)))}else xd(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,ve(12)):(this.s=0,ve(13)),Qt(this),Ai(this)}}}catch{}finally{}};function qu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Hu(c,y){var v=c.C,R=y.indexOf(`
`,v);return R==-1?Da:(v=Number(y.substring(v,R)),isNaN(v)?Xo:(R+=1,R+v>y.length?Da:(y=y.slice(R,R+v),c.C=R+v,y)))}dn.prototype.cancel=function(){this.J=!0,Qt(this)};function Ps(c){c.S=Date.now()+c.I,Fu(c,c.I)}function Fu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=We(I(c.ba,c),y)}function Br(c){c.B&&(m.clearTimeout(c.B),c.B=null)}dn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Wo(this.i,this.A),this.L!=2&&(_e(),ve(17)),Qt(this),this.s=2,Ai(this)):Fu(this,this.S-c)};function Ai(c){c.j.G==0||c.J||ec(c.j,c)}function Qt(c){Br(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Ei(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ls(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Zo(v.h,c))){if(!c.K&&Zo(v.h,c)&&v.G==3){try{var R=v.Da.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ha(v),Ba(v);else break e;ll(v),ve(18)}}else v.za=q[1],0<v.za-v.T&&37500>q[2]&&v.F&&v.v==0&&!v.C&&(v.C=We(I(v.Za,v),6e3));if(1>=Ma(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else sr(v,11)}else if((c.K||v.g==c)&&Ha(v),!re(y))for(q=v.Da.g.parse(y),y=0;y<q.length;y++){let Ke=q[y];if(v.T=Ke[0],Ke=Ke[1],v.G==2)if(Ke[0]=="c"){v.K=Ke[1],v.ia=Ke[2];const qt=Ke[3];qt!=null&&(v.la=qt,v.j.info("VER="+v.la));const Vt=Ke[4];Vt!=null&&(v.Aa=Vt,v.j.info("SVER="+v.Aa));const ar=Ke[5];ar!=null&&typeof ar=="number"&&0<ar&&(R=1.5*ar,v.L=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const Yt=c.g;if(Yt){const Oi=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oi){var Y=R.h;Y.g||Oi.indexOf("spdy")==-1&&Oi.indexOf("quic")==-1&&Oi.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ka(Y,Y.h),Y.h=null))}if(R.D){const cl=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(R.ya=cl,st(R.I,R.D,cl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),R=v;var le=c;if(R.qa=nc(R,R.J?R.ia:null,R.W),le.K){fn(R.h,le);var $e=le,kt=R.L;kt&&($e.I=kt),$e.B&&(Br($e),Ps($e)),R.g=le}else Zu(R);0<v.i.length&&qa(v)}else Ke[0]!="stop"&&Ke[0]!="close"||sr(v,7);else v.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?sr(v,7):al(v):Ke[0]!="noop"&&v.l&&v.l.ta(Ke),v.v=0)}}_e(4)}catch{}}var Gu=class{constructor(c,y){this.g=c,this.map=y}};function Ji(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ma(c){return c.h?1:c.g?c.g.size:0}function Zo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function ka(c,y){c.g?c.g.add(y):c.h=y}function fn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ji.prototype.cancel=function(){if(this.i=Jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Jo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Q(c.i)}function Ad(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,R=0;R<v;R++)y.push(c[R]);return y}y=[],v=0;for(R in c)y[v++]=c[R];return y}function Va(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const R in c)y[v++]=R;return y}}}function el(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Va(c),R=Ad(c),q=R.length,Y=0;Y<q;Y++)y.call(void 0,R[Y],v&&v[Y],c)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var R=c[v].indexOf("="),q=null;if(0<=R){var Y=c[v].substring(0,R);q=c[v].substring(R+1)}else Y=c[v];y(Y,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function xt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xt){this.h=c.h,Us(this,c.j),this.o=c.o,this.g=c.g,qr(this,c.s),this.l=c.l;var y=c.i,v=new tr;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),er(this,v),this.m=c.m}else c&&(y=String(c).match(js))?(this.h=!1,Us(this,y[1]||"",!0),this.o=zn(y[2]||""),this.g=zn(y[3]||"",!0),qr(this,y[4]),this.l=zn(y[5]||"",!0),er(this,y[6]||"",!0),this.m=zn(y[7]||"")):(this.h=!1,this.i=new tr(null,this.h))}xt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Bs(y,tl,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Bs(y,tl,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Bs(v,v.charAt(0)=="/"?Id:nl,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Bs(v,Pa)),c.join("")};function xn(c){return new xt(c)}function Us(c,y,v){c.j=v?zn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function qr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function er(c,y,v){y instanceof tr?(c.i=y,Ku(c.i,c.h)):(v||(y=Bs(y,Cd)),c.i=new tr(y,c.h))}function st(c,y,v){c.i.set(y,v)}function zs(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Bs(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,$u),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function $u(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tl=/[#\/\?@]/g,nl=/[#\?:]/g,Id=/[#\?]/g,Cd=/[#\?@]/g,Pa=/#/g;function tr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Bn(c){c.g||(c.g=new Map,c.h=0,c.i&&Rd(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=tr.prototype,i.add=function(c,y){Bn(this),this.i=null,c=Ri(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function nr(c,y){Bn(c),y=Ri(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ir(c,y){return Bn(c),y=Ri(c,y),c.g.has(y)}i.forEach=function(c,y){Bn(this),this.g.forEach(function(v,R){v.forEach(function(q){c.call(y,q,R,this)},this)},this)},i.na=function(){Bn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let R=0;R<y.length;R++){const q=c[R];for(let Y=0;Y<q.length;Y++)v.push(y[R])}return v},i.V=function(c){Bn(this);let y=[];if(typeof c=="string")ir(this,c)&&(y=y.concat(this.g.get(Ri(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return Bn(this),this.i=null,c=Ri(this,c),ir(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function il(c,y,v){nr(c,y),0<v.length&&(c.i=null,c.g.set(Ri(c,y),Q(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var R=y[v];const Y=encodeURIComponent(String(R)),le=this.V(R);for(R=0;R<le.length;R++){var q=Y;le[R]!==""&&(q+="="+encodeURIComponent(String(le[R]))),c.push(q)}}return this.i=c.join("&")};function Ri(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Ku(c,y){y&&!c.j&&(Bn(c),c.i=null,c.g.forEach(function(v,R){var q=R.toLowerCase();R!=q&&(nr(this,R),il(this,q,v))},c)),c.j=y}function qs(c,y){const v=new Tt;if(m.Image){const R=new Image;R.onload=O(qn,v,"TestLoadImage: loaded",!0,y,R),R.onerror=O(qn,v,"TestLoadImage: error",!1,y,R),R.onabort=O(qn,v,"TestLoadImage: abort",!1,y,R),R.ontimeout=O(qn,v,"TestLoadImage: timeout",!1,y,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else y(!1)}function ri(c,y){const v=new Tt,R=new AbortController,q=setTimeout(()=>{R.abort(),qn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:R.signal}).then(Y=>{clearTimeout(q),Y.ok?qn(v,"TestPingServer: ok",!0,y):qn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),qn(v,"TestPingServer: error",!1,y)})}function qn(c,y,v,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(v)}catch{}}function Hs(){this.g=new Ti}function Ii(c,y,v){const R=v||"";try{el(c,function(q,Y){let le=q;g(q)&&(le=Cn(q)),y.push(R+Y+"="+encodeURIComponent(le))})}catch(q){throw y.push(R+"type="+encodeURIComponent("_badmap")),q}}function Hr(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Hr,jr),Hr.prototype.g=function(){return new rr(this.l,this.j)},Hr.prototype.i=function(c){return function(){return c}}({});function rr(c,y){mt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(rr,mt),i=rr.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,xi(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ci(this):xi(this),this.readyState==3&&rl(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ci(this))},i.Qa=function(c){this.g&&(this.response=c,Ci(this))},i.ga=function(){this.g&&Ci(this)};function Ci(c){c.readyState=4,c.l=null,c.j=null,c.v=null,xi(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function xi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sl(c){let y="";return we(c,function(v,R){y+=R,y+=":",y+=v,y+=`\r
`}),y}function Bt(c,y,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=sl(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):st(c,y,v))}function et(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(et,mt);var La=/^https?$/i,Fs=["POST","PUT"];i=et.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wi.g(),this.v=this.o?Na(this.o):Na(wi),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Y){Qu(this,Y);return}if(c=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)v.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Y of R.keys())v.set(Y,R.get(Y));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Fs,y,void 0))||R||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,le]of v)this.g.setRequestHeader(Y,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gs(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Qu(this,Y)}};function Qu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,ja(c),Ni(c)}function ja(c){c.A||(c.A=!0,Ze(c,"complete"),Ze(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ze(this,"complete"),Ze(this,"abort"),Ni(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ni(this,!0)),et.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ua(this):this.bb())},i.bb=function(){Ua(this)};function Ua(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)zt(c.Ea,0,c);else if(Ze(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var R;if(R=le===0){var q=String(c.D).match(js)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),R=!La.test(q?q.toLowerCase():"")}v=R}if(v)Ze(c,"complete"),Ze(c,"success");else{c.m=6;try{var Y=2<Hn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",ja(c)}}finally{Ni(c)}}}}function Ni(c,y){if(c.g){Gs(c);const v=c.g,R=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ze(c,"ready");try{v.onreadystatechange=R}catch{}}}function Gs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Lr(y)}};function Yu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(c){const y={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(re(c[R]))continue;var v=x(c[R]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[q]||[];y[q]=Y,Y.push(v)}V(y,function(R){return R.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function za(c){this.Aa=0,this.i=[],this.j=new Tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$s("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$s("baseRetryDelayMs",5e3,c),this.cb=$s("retryDelaySeedMs",1e4,c),this.Wa=$s("forwardChannelMaxRetries",2,c),this.wa=$s("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ji(c&&c.concurrentRequestLimit),this.Da=new Hs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=za.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,R){ve(0),this.W=c,this.H=y||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.I=nc(this,null,this.W),qa(this)};function al(c){if(Wu(c),c.G==3){var y=c.U++,v=xn(c.I);if(st(v,"SID",c.K),st(v,"RID",y),st(v,"TYPE","terminate"),Ks(c,v),y=new dn(c,c.j,y),y.L=2,y.v=zs(xn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=ic(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ps(y)}tc(c)}function Ba(c){c.g&&(Qs(c),c.g.cancel(),c.g=null)}function Wu(c){Ba(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ha(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function qa(c){if(!Oa(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||L(),ye||(oe(),ye=!0),Le.add(y,c),c.B=0}}function Nd(c,y){return Ma(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=We(I(c.Ga,c,y),ul(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new dn(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=S(Y),N(Y,this.S)):Y=this.S),this.m!==null||this.O||(q.H=Y,Y=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Xu(this,q,y),v=xn(this.I),st(v,"RID",c),st(v,"CVER",22),this.D&&st(v,"X-HTTP-Session-Id",this.D),Ks(this,v),Y&&(this.O?y="headers="+encodeURIComponent(String(sl(Y)))+"&"+y:this.m&&Bt(v,this.m,Y)),ka(this.h,q),this.Ua&&st(v,"TYPE","init"),this.P?(st(v,"$req",y),st(v,"SID","null"),q.T=!0,ii(q,v,null)):ii(q,v,y),this.G=2}}else this.G==3&&(c?ol(this,c):this.i.length==0||Oa(this.h)||ol(this))};function ol(c,y){var v;y?v=y.l:v=c.U++;const R=xn(c.I);st(R,"SID",c.K),st(R,"RID",v),st(R,"AID",c.T),Ks(c,R),c.m&&c.o&&Bt(R,c.m,c.o),v=new dn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Xu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ka(c.h,v),ii(v,R,y)}function Ks(c,y){c.H&&we(c.H,function(v,R){st(y,R,v)}),c.l&&el({},function(v,R){st(y,R,v)})}function Xu(c,y,v){v=Math.min(c.i.length,v);var R=c.l?I(c.l.Na,c.l,c):null;e:{var q=c.i;let Y=-1;for(;;){const le=["count="+v];Y==-1?0<v?(Y=q[0].g,le.push("ofs="+Y)):Y=0:le.push("ofs="+Y);let $e=!0;for(let kt=0;kt<v;kt++){let Ke=q[kt].g;const qt=q[kt].map;if(Ke-=Y,0>Ke)Y=Math.max(0,q[kt].g-100),$e=!1;else try{Ii(qt,le,"req"+Ke+"_")}catch{R&&R(qt)}}if($e){R=le.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,R}function Zu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||L(),ye||(oe(),ye=!0),Le.add(y,c),c.v=0}}function ll(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=We(I(c.Fa,c),ul(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=We(I(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ve(10),Ba(this),Ju(this))};function Qs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Ju(c){c.g=new dn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=xn(c.qa);st(y,"RID","rpc"),st(y,"SID",c.K),st(y,"AID",c.T),st(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(y,"TO",c.ja),st(y,"TYPE","xmlhttp"),Ks(c,y),c.m&&c.o&&Bt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=zs(xn(y)),v.m=null,v.P=!0,Zi(v,c)}i.Za=function(){this.C!=null&&(this.C=null,Ba(this),ll(this),ve(19))};function Ha(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function ec(c,y){var v=null;if(c.g==y){Ha(c),Qs(c),c.g=null;var R=2}else if(Zo(c.h,y))v=y.D,fn(c.h,y),R=1;else return;if(c.G!=0){if(y.o)if(R==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var q=c.B;R=ae(),Ze(R,new Ge(R,v)),qa(c)}else Zu(c);else if(q=y.s,q==3||q==0&&0<y.X||!(R==1&&Nd(c,y)||R==2&&ll(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),q){case 1:sr(c,5);break;case 4:sr(c,10);break;case 3:sr(c,6);break;default:sr(c,2)}}}function ul(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function sr(c,y){if(c.j.info("Error code "+y),y==2){var v=I(c.fb,c),R=c.Xa;const q=!R;R=new xt(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Us(R,"https"),zs(R),q?qs(R.toString(),v):ri(R.toString(),v)}else ve(2);c.G=0,c.l&&c.l.sa(y),tc(c),Wu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function tc(c){if(c.G=0,c.ka=[],c.l){const y=Jo(c.h);(y.length!=0||c.i.length!=0)&&(U(c.ka,y),U(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function nc(c,y,v){var R=v instanceof xt?xn(v):new xt(v);if(R.g!="")y&&(R.g=y+"."+R.g),qr(R,R.s);else{var q=m.location;R=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Y=new xt(null);R&&Us(Y,R),y&&(Y.g=y),q&&qr(Y,q),v&&(Y.l=v),R=Y}return v=c.D,y=c.ya,v&&y&&st(R,v,y),st(R,"VER",c.la),Ks(c,R),R}function ic(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new et(new Hr({eb:v})):new et(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}i=rc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Fa(){}Fa.prototype.g=function(c,y){return new mn(c,y)};function mn(c,y){mt.call(this),this.g=new za(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!re(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!re(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Di(this)}M(mn,mt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){al(this.g)},mn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Cn(c),c=v);y.i.push(new Gu(y.Ya++,c)),y.G==3&&qa(y)},mn.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,mn.aa.N.call(this)};function sc(c){ni.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(sc,ni);function ac(){zr.call(this),this.status=1}M(ac,zr);function Di(c){this.g=c}M(Di,rc),Di.prototype.ua=function(){Ze(this.g,"a")},Di.prototype.ta=function(c){Ze(this.g,new sc(c))},Di.prototype.sa=function(c){Ze(this.g,new ac)},Di.prototype.ra=function(){Ze(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,bT=function(){return new Fa},TT=function(){return ae()},ET=Un,Xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bi.NO_ERROR=0,bi.TIMEOUT=8,bi.HTTP_ERROR=6,ph=bi,Xi.COMPLETE="complete",_T=Xi,Ur.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",mt.prototype.listen=mt.prototype.K,iu=Ur,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,vT=et}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const p0="@firebase/firestore",g0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Xh("@firebase/firestore");function bo(){return ga.logLevel}function fe(i,...e){if(ga.logLevel<=He.DEBUG){const n=e.map(Cp);ga.debug(`Firestore (${Uo}): ${i}`,...n)}}function Ir(i,...e){if(ga.logLevel<=He.ERROR){const n=e.map(Cp);ga.error(`Firestore (${Uo}): ${i}`,...n)}}function Do(i,...e){if(ga.logLevel<=He.WARN){const n=e.map(Cp);ga.warn(`Firestore (${Uo}): ${i}`,...n)}}function Cp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(i="Unexpected state"){const e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+i;throw Ir(e),new Error(e)}function tt(i,e){i||xe()}function Me(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class L2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j2{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new wr,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new wr)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tt(typeof s.accessToken=="string"),new wT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new on(e)}}class U2{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class z2{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new U2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B2{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Xn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){tt(this.o===void 0);const s=u=>{u.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new y0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string"),this.R=n.token,new y0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=q2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ue(i,e){return i<e?-1:i>e?1:0}function Zm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ue(s,o);{const u=ST(),d=H2(u.encode(v0(i,n)),u.encode(v0(e,n)));return d!==0?d:Ue(s,o)}}n+=s>65535?2:1}return Ue(i.length,e.length)}function v0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function H2(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Ue(i[n],e[n]);return Ue(i.length,e.length)}function Oo(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=-62135596800,E0=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*E0);return new jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_0)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new jt(0,0))}static max(){return new De(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="__name__";class ji{constructor(e,n,s){n===void 0?n=0:n>e.length&&xe(),s===void 0?s=e.length-n:s>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=ji.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=ji.isNumericId(e),o=ji.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ji.extractNumericId(e).compare(ji.extractNumericId(n)):Zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class ft extends ji{construct(e,n,s){return new ft(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const F2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends ji{construct(e,n,s){return new en(e,n,s)}static isValidIdentifier(e){return F2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T0}static keyField(){return new en([T0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ft.fromString(e))}static fromName(e){return new be(ft.fromString(e).popFirst(5))}static empty(){return new be(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=-1;function G2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new Ss(o,be.empty(),e)}function $2(i){return new Ss(i.readTime,i.key,gu)}class Ss{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ss(De.min(),be.empty(),gu)}static max(){return new Ss(De.max(),be.empty(),gu)}}function K2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(i){if(i.code!==ee.FAILED_PRECONDITION||i.message!==Q2)throw i;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,s)=>{n(e)})}static reject(e){return new ne((n,s)=>{s(e)})}static waitFor(e){return new ne((n,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},p=>s(p))}),d=!0,u===o&&n()})}static or(e){let n=ne.resolve(!1);for(const s of e)n=n.next(o=>o?ne.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ne((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(T=>{d[g]=T,++m,m===u&&s(d)},T=>o(T))}})}static doWhile(e,n){return new ne((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function W2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Zh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=-1;function Jh(i){return i==null}function xh(i){return i===0&&1/i==-1/0}function X2(i){return typeof i=="number"&&Number.isInteger(i)&&!xh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="";function Z2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=b0(e)),e=J2(i.get(n),e);return b0(e)}function J2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case RT:n+="";break;default:n+=u}}return n}function b0(i){return i+RT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ns(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function IT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Jt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new S0(this.data.getIterator())}getIteratorFrom(e){return new S0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class S0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new Ut(en.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new CT("Invalid base64 string: "+u):u}}(e);return new tn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const eR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(i){if(tt(!!i),typeof i=="string"){let e=0;const n=eR.exec(i);if(tt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ct(i.seconds),nanos:Ct(i.nanos)}}function Ct(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Rs(i){return typeof i=="string"?tn.fromBase64String(i):tn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="server_timestamp",NT="__type__",DT="__previous_value__",OT="__local_write_time__";function Np(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[NT])===null||n===void 0?void 0:n.stringValue)===xT}function ed(i){const e=i.mapValue.fields[DT];return Np(e)?ed(e):e}function yu(i){const e=As(i.mapValue.fields[OT].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,s,o,u,d,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const Nh="(default)";class vu{constructor(e,n){this.projectId=e,this.database=n||Nh}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===Nh}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__type__",nR="__max__",uh={mapValue:{}},kT="__vector__",Dh="value";function Is(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Np(i)?4:rR(i)?9007199254740991:iR(i)?10:11:xe()}function Fi(i,e){if(i===e)return!0;const n=Is(i);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return yu(i).isEqual(yu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=As(o.timestampValue),m=As(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return Rs(o.bytesValue).isEqual(Rs(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Ct(o.geoPointValue.latitude)===Ct(u.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ct(o.integerValue)===Ct(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Ct(o.doubleValue),m=Ct(u.doubleValue);return d===m?xh(d)===xh(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return Oo(i.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(w0(d)!==w0(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Fi(d[p],m[p])))return!1;return!0}(i,e);default:return xe()}}function _u(i,e){return(i.values||[]).find(n=>Fi(n,e))!==void 0}function Mo(i,e){if(i===e)return 0;const n=Is(i),s=Is(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=Ct(u.integerValue||u.doubleValue),p=Ct(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return A0(i.timestampValue,e.timestampValue);case 4:return A0(yu(i),yu(e));case 5:return Zm(i.stringValue,e.stringValue);case 6:return function(u,d){const m=Rs(u),p=Rs(d);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const T=Ue(m[g],p[g]);if(T!==0)return T}return Ue(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Ue(Ct(u.latitude),Ct(d.latitude));return m!==0?m:Ue(Ct(u.longitude),Ct(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return R0(i.arrayValue,e.arrayValue);case 10:return function(u,d){var m,p,g,T;const w=u.fields||{},I=d.fields||{},O=(m=w[Dh])===null||m===void 0?void 0:m.arrayValue,M=(p=I[Dh])===null||p===void 0?void 0:p.arrayValue,Q=Ue(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((T=M==null?void 0:M.values)===null||T===void 0?void 0:T.length)||0);return Q!==0?Q:R0(O,M)}(i.mapValue,e.mapValue);case 11:return function(u,d){if(u===uh.mapValue&&d===uh.mapValue)return 0;if(u===uh.mapValue)return 1;if(d===uh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=d.fields||{},T=Object.keys(g);p.sort(),T.sort();for(let w=0;w<p.length&&w<T.length;++w){const I=Zm(p[w],T[w]);if(I!==0)return I;const O=Mo(m[p[w]],g[T[w]]);if(O!==0)return O}return Ue(p.length,T.length)}(i.mapValue,e.mapValue);default:throw xe()}}function A0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=As(i),s=As(e),o=Ue(n.seconds,s.seconds);return o!==0?o:Ue(n.nanos,s.nanos)}function R0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Mo(n[o],s[o]);if(u)return u}return Ue(n.length,s.length)}function ko(i){return Jm(i)}function Jm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=As(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Rs(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return be.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Jm(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${Jm(n.fields[d])}`;return o+"}"}(i.mapValue):xe()}function gh(i){switch(Is(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(i);return e?16+gh(e):16;case 5:return 2*i.stringValue.length;case 6:return Rs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+gh(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return Ns(s.fields,(u,d)=>{o+=u.length+gh(d)}),o}(i.mapValue);default:throw xe()}}function I0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ep(i){return!!i&&"integerValue"in i}function Dp(i){return!!i&&"arrayValue"in i}function C0(i){return!!i&&"nullValue"in i}function x0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function yh(i){return!!i&&"mapValue"in i}function iR(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[MT])===null||n===void 0?void 0:n.stringValue)===kT}function lu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ns(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=lu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(i.arrayValue.values[n]);return e}return Object.assign({},i)}function rR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===nR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=en.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=lu(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];yh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ns(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new Sn(lu(this.value))}}function VT(i){const e=[];return Ns(i.fields,(n,s)=>{const o=new en([n]);if(yh(s)){const u=VT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new ln(e,0,De.min(),De.min(),De.min(),Sn.empty(),0)}static newFoundDocument(e,n,s,o){return new ln(e,1,n,De.min(),s,o,0)}static newNoDocument(e,n){return new ln(e,2,n,De.min(),De.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,De.min(),De.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.position=e,this.inclusive=n}}function N0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=be.comparator(be.fromName(d.referenceValue),n.key):s=Mo(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function D0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Fi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function sR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{}class Mt extends PT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new oR(e,n,s):n==="array-contains"?new cR(e,s):n==="in"?new hR(e,s):n==="not-in"?new dR(e,s):n==="array-contains-any"?new fR(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new lR(e,s):new uR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mo(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Mo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends PT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ci(e,n)}matches(e){return LT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function LT(i){return i.op==="and"}function jT(i){return aR(i)&&LT(i)}function aR(i){for(const e of i.filters)if(e instanceof ci)return!1;return!0}function tp(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+ko(i.value);if(jT(i))return i.filters.map(e=>tp(e)).join(",");{const e=i.filters.map(n=>tp(n)).join(",");return`${i.op}(${e})`}}function UT(i,e){return i instanceof Mt?function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&Fi(s.value,o.value)}(i,e):i instanceof ci?function(s,o){return o instanceof ci&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&UT(d,o.filters[m]),!0):!1}(i,e):void xe()}function zT(i){return i instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${ko(n.value)}`}(i):i instanceof ci?function(n){return n.op.toString()+" {"+n.getFilters().map(zT).join(" ,")+"}"}(i):"Filter"}class oR extends Mt{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class lR extends Mt{constructor(e,n){super(e,"in",n),this.keys=BT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uR extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=BT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>be.fromName(s.referenceValue))}class cR extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dp(n)&&_u(n.arrayValue,this.value)}}class hR extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_u(this.value.arrayValue,n)}}class dR extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_u(this.value.arrayValue,n)}}class fR extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>_u(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.le=null}}function O0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new mR(i,e,n,s,o,u,d)}function Op(i){const e=Me(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>tp(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>ko(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>ko(s)).join(",")),e.le=n}return e.le}function Mp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!sR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!UT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!D0(i.startAt,e.startAt)&&D0(i.endAt,e.endAt)}function np(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function pR(i,e,n,s,o,u,d,m){return new Sa(i,e,n,s,o,u,d,m)}function td(i){return new Sa(i)}function M0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function qT(i){return i.collectionGroup!==null}function uu(i){const e=Me(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Ut(en.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new Eu(u,s))}),n.has(en.keyField().canonicalString())||e.he.push(new Eu(en.keyField(),s))}return e.he}function Ui(i){const e=Me(i);return e.Pe||(e.Pe=gR(e,uu(i))),e.Pe}function gR(i,e){if(i.limitType==="F")return O0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Eu(o.field,u)});const n=i.endAt?new Oh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Oh(i.startAt.position,i.startAt.inclusive):null;return O0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ip(i,e){const n=i.filters.concat([e]);return new Sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function rp(i,e,n){return new Sa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function nd(i,e){return Mp(Ui(i),Ui(e))&&i.limitType===e.limitType}function HT(i){return`${Op(Ui(i))}|lt:${i.limitType}`}function wo(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>zT(o)).join(", ")}]`),Jh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>ko(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>ko(o)).join(",")),`Target(${s})`}(Ui(i))}; limitType=${i.limitType})`}function id(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):be.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of uu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(d,m,p){const g=N0(d,m,p);return d.inclusive?g<=0:g<0}(s.startAt,uu(s),o)||s.endAt&&!function(d,m,p){const g=N0(d,m,p);return d.inclusive?g>=0:g>0}(s.endAt,uu(s),o))}(i,e)}function yR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function FT(i){return(e,n)=>{let s=!1;for(const o of uu(i)){const u=vR(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function vR(i,e,n){const s=i.field.isKeyField()?be.comparator(e.key,n.key):function(u,d,m){const p=d.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Mo(p,g):xe()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=new _t(be.comparator);function Cr(){return _R}const GT=new _t(be.comparator);function ru(...i){let e=GT;for(const n of i)e=e.insert(n.key,n);return e}function $T(i){let e=GT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ha(){return cu()}function KT(){return cu()}function cu(){return new Aa(i=>i.toString(),(i,e)=>i.isEqual(e))}const ER=new _t(be.comparator),TR=new Ut(be.comparator);function Fe(...i){let e=TR;for(const n of i)e=e.add(n);return e}const bR=new Ut(Ue);function wR(){return bR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function QT(i){return{integerValue:""+i}}function YT(i,e){return X2(e)?QT(e):kp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function SR(i,e,n){return i instanceof Tu?function(o,u){const d={fields:{[NT]:{stringValue:xT},[OT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Np(u)&&(u=ed(u)),u&&(d.fields[DT]=u),{mapValue:d}}(n,e):i instanceof bu?XT(i,e):i instanceof wu?ZT(i,e):function(o,u){const d=WT(o,u),m=k0(d)+k0(o.Ie);return ep(d)&&ep(o.Ie)?QT(m):kp(o.serializer,m)}(i,e)}function AR(i,e,n){return i instanceof bu?XT(i,e):i instanceof wu?ZT(i,e):n}function WT(i,e){return i instanceof Su?function(s){return ep(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Tu extends rd{}class bu extends rd{constructor(e){super(),this.elements=e}}function XT(i,e){const n=JT(e);for(const s of i.elements)n.some(o=>Fi(o,s))||n.push(s);return{arrayValue:{values:n}}}class wu extends rd{constructor(e){super(),this.elements=e}}function ZT(i,e){let n=JT(e);for(const s of i.elements)n=n.filter(o=>!Fi(o,s));return{arrayValue:{values:n}}}class Su extends rd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function k0(i){return Ct(i.integerValue||i.doubleValue)}function JT(i){return Dp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.field=e,this.transform=n}}function RR(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof bu&&o instanceof bu||s instanceof wu&&o instanceof wu?Oo(s.elements,o.elements,Fi):s instanceof Su&&o instanceof Su?Fi(s.Ie,o.Ie):s instanceof Tu&&o instanceof Tu}(i.transform,e.transform)}class IR{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class sd{}function tb(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Vp(i.key,Jn.none()):new xu(i.key,i.data,Jn.none());{const n=i.data,s=Sn.empty();let o=new Ut(en.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new Ds(i.key,s,new Ln(o.toArray()),Jn.none())}}function CR(i,e,n){i instanceof xu?function(o,u,d){const m=o.value.clone(),p=P0(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Ds?function(o,u,d){if(!vh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=P0(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(nb(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function hu(i,e,n,s){return i instanceof xu?function(u,d,m,p){if(!vh(u.precondition,d))return m;const g=u.value.clone(),T=L0(u.fieldTransforms,p,d);return g.setAll(T),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof Ds?function(u,d,m,p){if(!vh(u.precondition,d))return m;const g=L0(u.fieldTransforms,p,d),T=d.data;return T.setAll(nb(u)),T.setAll(g),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(i,e,n,s):function(u,d,m){return vh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,n)}function xR(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=WT(s.transform,o||null);u!=null&&(n===null&&(n=Sn.empty()),n.set(s.field,u))}return n||null}function V0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Oo(s,o,(u,d)=>RR(u,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class xu extends sd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ds extends sd{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nb(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function P0(i,e,n){const s=new Map;tt(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,AR(d,m,n[o]))}return s}function L0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,SR(u,d,e))}return s}class Vp extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NR extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&CR(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=hu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=hu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=KT();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=tb(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,s)=>V0(n,s))&&Oo(this.baseMutations,e.baseMutations,(n,s)=>V0(n,s))}}class Pp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){tt(e.mutations.length===s.length);let o=function(){return ER}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Pp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ye;function kR(i){switch(i){case ee.OK:return xe();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return xe()}}function ib(i){if(i===void 0)return Ir("GRPC error has no .code"),ee.UNKNOWN;switch(i){case Ot.OK:return ee.OK;case Ot.CANCELLED:return ee.CANCELLED;case Ot.UNKNOWN:return ee.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ee.INTERNAL;case Ot.UNAVAILABLE:return ee.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ee.NOT_FOUND;case Ot.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ot.ABORTED:return ee.ABORTED;case Ot.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ot.DATA_LOSS:return ee.DATA_LOSS;default:return xe()}}(Ye=Ot||(Ot={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Ts([4294967295,4294967295],0);function j0(i){const e=ST().encode(i),n=new yT;return n.update(e),new Uint8Array(n.digest())}function U0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ts([n,s],0),new Ts([o,u],0)]}class Lp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new su(`Invalid padding: ${n}`);if(s<0)throw new su(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new su(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Ts.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(Ts.fromNumber(s)));return o.compare(VR)===1&&(o=new Ts([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=j0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ae(s,o,u);if(!this.Re(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Lp(u,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.Ee===0)return;const n=j0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ae(s,o,u);this.Ve(d)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ad(De.min(),o,new _t(Ue),Cr(),Fe())}}class Nu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Nu(s,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class rb{constructor(e,n){this.targetId=e,this.ge=n}}class sb{constructor(e,n,s=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class z0{constructor(){this.pe=0,this.ye=B0(),this.we=tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Fe(),n=Fe(),s=Fe();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:xe()}}),new Nu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=B0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,tt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class PR{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Cr(),this.$e=ch(),this.Ue=ch(),this.Ke=new _t(Ue)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(np(u))if(s===0){const d=new be(u.path);this.ze(n,d,ln.newNoDocument(d,De.min()))}else tt(s===1);else{const d=this.et(n);if(d!==s){const m=this.tt(e),p=m?this.nt(m,e,d):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=Rs(s).toUint8Array()}catch(p){if(p instanceof CT)return Do("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Lp(d,o,u)}catch(p){return Do(p instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ke.it(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,d)=>{const m=this.Xe(d);if(m){if(u.current&&np(m.target)){const p=new be(m.target.path);this._t(p).has(d)||this.ut(d,p)||this.ze(d,p,ln.newNoDocument(p,e))}u.ve&&(n.set(d,u.Fe()),u.Me())}});let s=Fe();this.Ue.forEach((u,d)=>{let m=!0;d.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,d)=>d.setReadTime(e));const o=new ad(e,n,this.Ke,this.Qe,s);return this.Qe=Cr(),this.$e=ch(),this.Ue=ch(),this.Ke=new _t(Ue),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new z0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Ut(Ue),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ut(Ue),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new z0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function ch(){return new _t(be.comparator)}function B0(){return new _t(be.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},jR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class zR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sp(i,e){return i.useProto3Json||Jh(e)?e:{value:e}}function Mh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ab(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function BR(i,e){return Mh(i,e.toTimestamp())}function zi(i){return tt(!!i),De.fromTimestamp(function(n){const s=As(n);return new jt(s.seconds,s.nanos)}(i))}function jp(i,e){return ap(i,e).canonicalString()}function ap(i,e){const n=function(o){return new ft(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function ob(i){const e=ft.fromString(i);return tt(db(e)),e}function op(i,e){return jp(i.databaseId,e.path)}function Mm(i,e){const n=ob(e);if(n.get(1)!==i.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new be(ub(n))}function lb(i,e){return jp(i.databaseId,e)}function qR(i){const e=ob(i);return e.length===4?ft.emptyPath():ub(e)}function lp(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ub(i){return tt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function q0(i,e,n){return{name:op(i,e),fields:n.value.mapValue.fields}}function HR(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,T){return g.useProto3Json?(tt(T===void 0||typeof T=="string"),tn.fromBase64String(T||"")):(tt(T===void 0||T instanceof Buffer||T instanceof Uint8Array),tn.fromUint8Array(T||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(g){const T=g.code===void 0?ee.UNKNOWN:ib(g.code);return new de(T,g.message||"")}(d);n=new sb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mm(i,s.document.name),u=zi(s.document.updateTime),d=s.document.createTime?zi(s.document.createTime):De.min(),m=new Sn({mapValue:{fields:s.document.fields}}),p=ln.newFoundDocument(o,u,d,m),g=s.targetIds||[],T=s.removedTargetIds||[];n=new _h(g,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mm(i,s.document),u=s.readTime?zi(s.readTime):De.min(),d=ln.newNoDocument(o,u),m=s.removedTargetIds||[];n=new _h([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mm(i,s.document),u=s.removedTargetIds||[];n=new _h([],u,o,null)}else{if(!("filter"in e))return xe();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new MR(o,u),m=s.targetId;n=new rb(m,d)}}return n}function FR(i,e){let n;if(e instanceof xu)n={update:q0(i,e.key,e.value)};else if(e instanceof Vp)n={delete:op(i,e.key)};else if(e instanceof Ds)n={update:q0(i,e.key,e.data),updateMask:JR(e.fieldMask)};else{if(!(e instanceof NR))return xe();n={verify:op(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof Tu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof bu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof wu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Su)return{fieldPath:d.field.canonicalString(),increment:m.Ie};throw xe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:BR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe()}(i,e.precondition)),n}function GR(i,e){return i&&i.length>0?(tt(e!==void 0),i.map(n=>function(o,u){let d=o.updateTime?zi(o.updateTime):zi(u);return d.isEqual(De.min())&&(d=zi(u)),new IR(d,o.transformResults||[])}(n,e))):[]}function $R(i,e){return{documents:[lb(i,e.path)]}}function KR(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=lb(i,o);const u=function(g){if(g.length!==0)return hb(ci.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(g){if(g.length!==0)return g.map(T=>function(I){return{field:So(I.field),direction:WR(I.dir)}}(T))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=sp(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function QR(i){let e=qR(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){tt(s===1);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=function(w){const I=cb(w);return I instanceof ci&&jT(I)?I.getFilters():[I]}(n.where));let d=[];n.orderBy&&(d=function(w){return w.map(I=>function(M){return new Eu(Ao(M.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let m=null;n.limit&&(m=function(w){let I;return I=typeof w=="object"?w.value:w,Jh(I)?null:I}(n.limit));let p=null;n.startAt&&(p=function(w){const I=!!w.before,O=w.values||[];return new Oh(O,I)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const I=!w.before,O=w.values||[];return new Oh(O,I)}(n.endAt)),pR(e,o,d,u,m,"F",p,g)}function YR(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cb(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ao(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ao(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ao(n.unaryFilter.field);return Mt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(i):i.fieldFilter!==void 0?function(n){return Mt.create(Ao(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return ci.create(n.compositeFilter.filters.map(s=>cb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(i):xe()}function WR(i){return LR[i]}function XR(i){return jR[i]}function ZR(i){return UR[i]}function So(i){return{fieldPath:i.canonicalString()}}function Ao(i){return en.fromServerFormat(i.fieldPath)}function hb(i){return i instanceof Mt?function(n){if(n.op==="=="){if(x0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(C0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(C0(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:XR(n.op),value:n.value}}}(i):i instanceof ci?function(n){const s=n.getFilters().map(o=>hb(o));return s.length===1?s[0]:{compositeFilter:{op:ZR(n.op),filters:s}}}(i):xe()}function JR(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function db(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,s,o,u=De.min(),d=De.min(),m=tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.Tt=e}}function tI(i){const e=QR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.Tn=new iI}addToCollectionParentIndex(e,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ss.min())}updateCollectionGroup(e,n,s){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class iI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Ut(ft.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ut(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fb=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(fb,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Vo(0)}static Kn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="LruGarbageCollector",rI=1048576;function G0([i,e],[n,s]){const o=Ue(i,n);return o===0?Ue(e,s):o}class sI{constructor(e){this.Hn=e,this.buffer=new Ut(G0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();G0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){fe(F0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bo(n)?fe(F0,"Ignoring IndexedDB error during garbage collection: ",n):await zo(n)}await this.er(3e5)})}}class oI{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Zh.ae);const s=new sI(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(H0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,d,m,p,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(g=Date.now(),bo()<=He.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-T}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function lI(i,e){return new oI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.changes=new Aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ne.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&hu(s.mutation,o,Ln.empty(),jt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Fe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Fe()){const o=ha();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=ru();return u.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=ha();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Fe()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let u=Cr();const d=cu(),m=function(){return cu()}();return n.forEach((p,g)=>{const T=s.get(g.key);o.has(g.key)&&(T===void 0||T.mutation instanceof Ds)?u=u.insert(g.key,g):T!==void 0?(d.set(g.key,T.mutation.getFieldMask()),hu(T.mutation,g,T.mutation.getFieldMask(),jt.now())):d.set(g.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,T)=>d.set(g,T)),n.forEach((g,T)=>{var w;return m.set(g,new cI(T,(w=d.get(g))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=cu();let o=new _t((d,m)=>d-m),u=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let T=s.get(p)||Ln.empty();T=m.applyToLocalView(g,T),s.set(p,T);const w=(o.get(m.batchId)||Fe()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,T=p.value,w=KT();T.forEach(I=>{if(!u.has(I)){const O=tb(n.get(I),s.get(I));O!==null&&w.set(I,O),u=u.add(I)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,w))}return ne.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ne.resolve(ha());let m=gu,p=u;return d.next(g=>ne.forEach(g,(T,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(T)?ne.resolve():this.remoteDocumentCache.getEntry(e,T).next(I=>{p=p.insert(T,I)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Fe())).next(T=>({batchId:m,changes:$T(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(s=>{let o=ru();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=ru();return this.indexManager.getCollectionParents(e,u).next(m=>ne.forEach(m,p=>{const g=function(w,I){return new Sa(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(T=>{T.forEach((w,I)=>{d=d.insert(w,I)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((p,g)=>{const T=g.getKey();d.get(T)===null&&(d=d.insert(T,ln.newInvalidDocument(T)))});let m=ru();return d.forEach((p,g)=>{const T=u.get(p);T!==void 0&&hu(T.mutation,g,Ln.empty(),jt.now()),id(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:zi(o.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:tI(o.bundledQuery),readTime:zi(o.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.overlays=new _t(be.comparator),this.Rr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ha();return ne.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),ne.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ne.resolve()}getOverlaysForCollection(e,n,s){const o=ha(),u=n.length+1,d=new be(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new _t((g,T)=>g-T);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let T=u.get(g.largestBatchId);T===null&&(T=ha(),u=u.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const m=ha(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,T)=>m.set(g,T)),!(m.size()>=o)););return ne.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new OR(n,s));let u=this.Rr.get(n);u===void 0&&(u=Fe(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Vr=new Ut($t.mr),this.gr=new Ut($t.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new $t(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new $t(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new be(new ft([])),s=new $t(n,e),o=new $t(n,e+1),u=[];return this.gr.forEachInRange([s,o],d=>{this.wr(d),u.push(d.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new be(new ft([])),s=new $t(n,e),o=new $t(n,e+1);let u=Fe();return this.gr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new $t(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return be.comparator(e.key,n.key)||Ue(e.Cr,n.Cr)}static pr(e,n){return Ue(e.Cr,n.Cr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ut($t.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new DR(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Mr=this.Mr.add(new $t(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(d)}lookupMutationBatch(e,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?xp:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new $t(n,0),o=new $t(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],d=>{const m=this.Or(d.Cr);u.push(m)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ut(Ue);return n.forEach(o=>{const u=new $t(o,0),d=new $t(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,d],m=>{s=s.add(m.Cr)})}),ne.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;be.isDocumentKey(u)||(u=u.child(""));const d=new $t(new be(u),0);let m=new Ut(Ue);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},d),ne.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){tt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ne.forEach(n.mutations,o=>{const u=new $t(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new $t(n,0),o=this.Mr.firstAfterOrEqual(s);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.kr=e,this.docs=function(){return new _t(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ne.resolve(s?s.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let s=Cr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():ln.newInvalidDocument(o))}),ne.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Cr();const d=n.path,m=new be(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:T}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||K2($2(T),s)<=0||(o.has(T.key)||id(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,s,o){xe()}qr(e,n){return ne.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new yI(this)}getSize(e){return ne.resolve(this.size)}}class yI extends uI{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ne.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.persistence=e,this.Qr=new Aa(n=>Op(n),Mp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Up,this.targetCount=0,this.Kr=Vo.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),ne.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.zn(n),ne.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return ne.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),ne.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return ne.resolve(s)}containsKey(e,n){return ne.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Zh(0),this.zr=!1,this.zr=!0,this.jr=new mI,this.referenceDelegate=e(this),this.Hr=new vI(this),this.indexManager=new nI,this.remoteDocumentCache=function(o){return new gI(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new eI(n),this.Yr=new dI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new pI(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const o=new _I(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return ne.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class _I extends Y2{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.ti=new Up,this.ni=null}static ri(e){return new zp(e)}get ii(){if(this.ni)return this.ni;throw xe()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),ne.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,s=>{const o=be.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,De.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.oi=new Aa(s=>Z2(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=lI(this,n)}static ri(e,n){return new kh(e,n)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return ne.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ne.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,d=>this.ar(e,d,n).next(m=>{m||(s++,u.removeEntry(d,De.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gh(e.data.value)),n}ar(e,n,s){return ne.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Fe(),o=Fe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Bp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return m1()?8:W2(cn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new EI;return this._s(e,n,d).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,d,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(bo()<=He.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",wo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(bo()<=He.DEBUG&&fe("QueryEngine","Query:",wo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(bo()<=He.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",wo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(n))):ne.resolve())}rs(e,n){if(M0(n))return ne.resolve(null);let s=Ui(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=rp(n,null,"F"),s=Ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=Fe(...u);return this.ns.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,d,p.readTime)?this.rs(e,rp(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return M0(n)||o.isEqual(De.min())?ne.resolve(null):this.ns.getDocuments(e,s).next(u=>{const d=this.cs(n,u);return this.ls(n,d,s,o)?ne.resolve(null):(bo()<=He.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wo(n)),this.hs(e,d,n,G2(o,gu)).next(m=>m))})}cs(e,n){let s=new Ut(FT(e));return n.forEach((o,u)=>{id(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return bo()<=He.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",wo(n)),this.ns.getDocumentsMatchingQuery(e,n,Ss.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="LocalStore",bI=3e8;class wI{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new _t(Ue),this.Is=new Aa(u=>Op(u),Mp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function SI(i,e,n,s){return new wI(i,e,n,s)}async function pb(i,e){const n=Me(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let p=Fe();for(const g of o){d.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}for(const g of u){m.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:d,addedBatchIds:m}))})})}function AI(i,e){const n=Me(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,T){const w=g.batch,I=w.keys();let O=ne.resolve();return I.forEach(M=>{O=O.next(()=>T.getEntry(p,M)).next(Q=>{const U=g.docVersions.get(M);tt(U!==null),Q.version.compareTo(U)<0&&(w.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),T.addEntry(Q)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Fe();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function gb(i){const e=Me(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function RI(i,e){const n=Me(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((T,w)=>{const I=o.get(w);if(!I)return;m.push(n.Hr.removeMatchingKeys(u,T.removedDocuments,w).next(()=>n.Hr.addMatchingKeys(u,T.addedDocuments,w)));let O=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?O=O.withResumeToken(tn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,s)),o=o.insert(w,O),function(Q,U,G){return Q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=bI?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(I,O,T)&&m.push(n.Hr.updateTargetData(u,O))});let p=Cr(),g=Fe();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(II(u,d,e.documentUpdates).next(T=>{p=T.Vs,g=T.fs})),!s.isEqual(De.min())){const T=n.Hr.getLastRemoteSnapshotVersion(u).next(w=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(T)}return ne.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function II(i,e,n){let s=Fe(),o=Fe();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let d=Cr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):fe(qp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:d,fs:o}})}function CI(i,e){const n=Me(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=xp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function xI(i,e){const n=Me(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,ne.resolve(o)):n.Hr.allocateTargetId(s).next(d=>(o=new ys(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function up(i,e,n){const s=Me(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Bo(d))throw d;fe(qp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function $0(i,e,n){const s=Me(i);let o=De.min(),u=Fe();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,g,T){const w=Me(p),I=w.Is.get(T);return I!==void 0?ne.resolve(w.Ts.get(I)):w.Hr.getTargetData(g,T)}(s,d,Ui(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(d,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(d,e,n?o:De.min(),n?u:Fe())).next(m=>(NI(s,yR(e),m),{documents:m,gs:u})))}function NI(i,e,n){let s=i.Es.get(e)||De.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class K0{constructor(){this.activeTargetIds=wR()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DI{constructor(){this.ho=new K0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new K0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="ConnectivityMonitor";class Y0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){fe(Q0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){fe(Q0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function cp(){return hh===null?hh=function(){return 268435456+Math.round(2147483648*Math.random())}():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",MI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kI{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Nh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const d=cp(),m=this.bo(e,n.toUriEncodedString());fe(km,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(fe(km,`Received RPC '${e}' ${d}: `,g),g),g=>{throw Do(km,`RPC '${e}' ${d} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,d){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=MI[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class PI extends kI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=cp();return new Promise((d,m)=>{const p=new vT;p.setWithCredentials(!0),p.listenOnce(_T.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ph.NO_ERROR:const T=p.getResponseJson();fe(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case ph.TIMEOUT:fe(an,`RPC '${e}' ${u} timed out`),m(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const w=p.getStatus();if(fe(an,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I==null?void 0:I.error;if(O&&O.status&&O.message){const M=function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(G)>=0?G:ee.UNKNOWN}(O.status);m(new de(M,O.message))}else m(new de(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new de(ee.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{fe(an,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);fe(an,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=cp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=bT(),m=TT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=u.join("");fe(an,`Creating RPC '${e}' stream ${o}: ${T}`,p);const w=d.createWebChannel(T,p);let I=!1,O=!1;const M=new VI({Fo:U=>{O?fe(an,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(I||(fe(an,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),fe(an,`RPC '${e}' stream ${o} sending:`,U),w.send(U))},Mo:()=>w.close()}),Q=(U,G,re)=>{U.listen(G,Z=>{try{re(Z)}catch(he){setTimeout(()=>{throw he},0)}})};return Q(w,iu.EventType.OPEN,()=>{O||(fe(an,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),Q(w,iu.EventType.CLOSE,()=>{O||(O=!0,fe(an,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),Q(w,iu.EventType.ERROR,U=>{O||(O=!0,Do(an,`RPC '${e}' stream ${o} transport errored:`,U),M.Uo(new de(ee.UNAVAILABLE,"The operation could not be completed")))}),Q(w,iu.EventType.MESSAGE,U=>{var G;if(!O){const re=U.data[0];tt(!!re);const Z=re,he=(Z==null?void 0:Z.error)||((G=Z[0])===null||G===void 0?void 0:G.error);if(he){fe(an,`RPC '${e}' stream ${o} received error:`,he);const ue=he.status;let we=function(A){const N=Ot[A];if(N!==void 0)return ib(N)}(ue),V=he.message;we===void 0&&(we=ee.INTERNAL,V="Unknown error status: "+ue+" with message "+he.message),O=!0,M.Uo(new de(we,V)),w.close()}else fe(an,`RPC '${e}' stream ${o} received:`,re),M.Ko(re)}}),Q(m,ET.STAT_EVENT,U=>{U.stat===Xm.PROXY?fe(an,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Xm.NOPROXY&&fe(an,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i){return new zR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="PersistentStream";class vb{constructor(e,n,s,o,u,d,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Ir(n.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new de(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return fe(W0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(fe(W0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LI extends vb{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=HR(this.serializer,e),s=function(u){if(!("targetChange"in u))return De.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?zi(d.readTime):De.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=lp(this.serializer),n.addTarget=function(u,d){let m;const p=d.target;if(m=np(p)?{documents:$R(u,p)}:{query:KR(u,p).ht},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=ab(u,d.resumeToken);const g=sp(u,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(De.min())>0){m.readTime=Mh(u,d.snapshotVersion.toTimestamp());const g=sp(u,d.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=YR(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=lp(this.serializer),n.removeTarget=e,this.I_(n)}}class jI extends vb{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=GR(e.writeResults,e.commitTime),s=zi(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=lp(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>FR(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{}class zI extends UI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.So(e,ap(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ee.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Co(e,ap(n,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new de(ee.UNKNOWN,d.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class BI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ir(n),this.N_=!1):fe("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class qI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(d=>{s.enqueueAndForget(async()=>{Ra(this)&&(fe(ya,"Restarting streams for network reachability change."),await async function(p){const g=Me(p);g.W_.add(4),await Du(g),g.j_.set("Unknown"),g.W_.delete(4),await ld(g)}(this))})}),this.j_=new BI(s,o)}}async function ld(i){if(Ra(i))for(const e of i.G_)await e(!0)}async function Du(i){for(const e of i.G_)await e(!1)}function _b(i,e){const n=Me(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),$p(n)?Gp(n):qo(n).c_()&&Fp(n,e))}function Hp(i,e){const n=Me(i),s=qo(n);n.K_.delete(e),s.c_()&&Eb(n,e),n.K_.size===0&&(s.c_()?s.P_():Ra(n)&&n.j_.set("Unknown"))}function Fp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(i).y_(e)}function Eb(i,e){i.H_.Ne(e),qo(i).w_(e)}function Gp(i){i.H_=new PR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),qo(i).start(),i.j_.B_()}function $p(i){return Ra(i)&&!qo(i).u_()&&i.K_.size>0}function Ra(i){return Me(i).W_.size===0}function Tb(i){i.H_=void 0}async function HI(i){i.j_.set("Online")}async function FI(i){i.K_.forEach((e,n)=>{Fp(i,e)})}async function GI(i,e){Tb(i),$p(i)?(i.j_.q_(e),Gp(i)):i.j_.set("Unknown")}async function $I(i,e,n){if(i.j_.set("Online"),e instanceof sb&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){fe(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(i,s)}else if(e instanceof _h?i.H_.We(e):e instanceof rb?i.H_.Ze(e):i.H_.je(e),!n.isEqual(De.min()))try{const s=await gb(i.localStore);n.compareTo(s)>=0&&await function(u,d){const m=u.H_.ot(d);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.K_.get(g);T&&u.K_.set(g,T.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,g)=>{const T=u.K_.get(p);if(!T)return;u.K_.set(p,T.withResumeToken(tn.EMPTY_BYTE_STRING,T.snapshotVersion)),Eb(u,p);const w=new ys(T.target,p,g,T.sequenceNumber);Fp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){fe(ya,"Failed to raise snapshot:",s),await Vh(i,s)}}async function Vh(i,e,n){if(!Bo(e))throw e;i.W_.add(1),await Du(i),i.j_.set("Offline"),n||(n=()=>gb(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{fe(ya,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await ld(i)})}function bb(i,e){return e().catch(n=>Vh(i,n,e))}async function ud(i){const e=Me(i),n=Cs(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:xp;for(;KI(e);)try{const o=await CI(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,QI(e,o)}catch(o){await Vh(e,o)}wb(e)&&Sb(e)}function KI(i){return Ra(i)&&i.U_.length<10}function QI(i,e){i.U_.push(e);const n=Cs(i);n.c_()&&n.S_&&n.b_(e.mutations)}function wb(i){return Ra(i)&&!Cs(i).u_()&&i.U_.length>0}function Sb(i){Cs(i).start()}async function YI(i){Cs(i).C_()}async function WI(i){const e=Cs(i);for(const n of i.U_)e.b_(n.mutations)}async function XI(i,e,n){const s=i.U_.shift(),o=Pp.from(s,e,n);await bb(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await ud(i)}async function ZI(i,e){e&&Cs(i).S_&&await async function(s,o){if(function(d){return kR(d)&&d!==ee.ABORTED}(o.code)){const u=s.U_.shift();Cs(s).h_(),await bb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ud(s)}}(i,e),wb(i)&&Sb(i)}async function X0(i,e){const n=Me(i);n.asyncQueue.verifyOperationInProgress(),fe(ya,"RemoteStore received new credentials");const s=Ra(n);n.W_.add(3),await Du(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await ld(n)}async function JI(i,e){const n=Me(i);e?(n.W_.delete(2),await ld(n)):e||(n.W_.add(2),await Du(n),n.j_.set("Unknown"))}function qo(i){return i.J_||(i.J_=function(n,s,o){const u=Me(n);return u.M_(),new LI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:HI.bind(null,i),No:FI.bind(null,i),Lo:GI.bind(null,i),p_:$I.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),$p(i)?Gp(i):i.j_.set("Unknown")):(await i.J_.stop(),Tb(i))})),i.J_}function Cs(i){return i.Y_||(i.Y_=function(n,s,o){const u=Me(n);return u.M_(),new jI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:YI.bind(null,i),Lo:ZI.bind(null,i),D_:WI.bind(null,i),v_:XI.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await ud(i)):(await i.Y_.stop(),i.U_.length>0&&(fe(ya,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new Kp(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(i,e){if(Ir("AsyncQueue",`${e}: ${i}`),Bo(i))return new de(ee.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=ru(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.Z_=new _t(be.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):xe():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Po{constructor(e,n,s,o,u,d,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Po(e,n,Io.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class tC{constructor(){this.queries=J0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=J0(),u.forEach((d,m)=>{for(const p of m.ta)p.onError(s)})})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function J0(){return new Aa(i=>HT(i),nd)}async function Yp(i,e){const n=Me(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new eC,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Qp(d,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Xp(n)}async function Wp(i,e){const n=Me(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.ta.indexOf(e);d>=0&&(u.ta.splice(d,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function nC(i,e){const n=Me(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.ta)m.oa(o)&&(s=!0);d.ea=o}}s&&Xp(n)}function iC(i,e,n){const s=Me(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Xp(i){i.ia.forEach(e=>{e.next()})}var hp,eE;(eE=hp||(hp={}))._a="default",eE.Cache="cache";class Zp{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Po(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.key=e}}class Rb{constructor(e){this.key=e}}class rC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Fe(),this.mutatedKeys=Fe(),this.ya=FT(e),this.wa=new Io(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new Z0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,w)=>{const I=o.get(T),O=id(this.query,w)?w:null,M=!!I&&this.mutatedKeys.has(I.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let U=!1;I&&O?I.data.isEqual(O.data)?M!==Q&&(s.track({type:3,doc:O}),U=!0):this.va(I,O)||(s.track({type:2,doc:O}),U=!0,(p&&this.ya(O,p)>0||g&&this.ya(O,g)<0)&&(m=!0)):!I&&O?(s.track({type:0,doc:O}),U=!0):I&&!O&&(s.track({type:1,doc:I}),U=!0,(p||g)&&(m=!0)),U&&(O?(d=d.add(O),u=Q?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{wa:d,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const d=e.Da.X_();d.sort((T,w)=>function(O,M){const Q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return Q(O)-Q(M)}(T.type,w.type)||this.ya(T.doc,w.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,d.length!==0||g?{snapshot:new Po(this.query,e.wa,u,d,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Z0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Fe(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new Rb(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new Ab(s))}),n}Oa(e){this.fa=e.gs,this.pa=Fe();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Po.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Jp="SyncEngine";class sC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class aC{constructor(e){this.key=e,this.Ba=!1}}class oC{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.La={},this.ka=new Aa(m=>HT(m),nd),this.qa=new Map,this.Qa=new Set,this.$a=new _t(be.comparator),this.Ua=new Map,this.Ka=new Up,this.Wa={},this.Ga=new Map,this.za=Vo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function lC(i,e,n=!0){const s=Ob(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Ib(s,e,n,!0),o}async function uC(i,e){const n=Ob(i);await Ib(n,e,!0,!1)}async function Ib(i,e,n,s){const o=await xI(i.localStore,Ui(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await cC(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&_b(i.remoteStore,o),m}async function cC(i,e,n,s,o){i.Ha=(w,I,O)=>async function(Q,U,G,re){let Z=U.view.ba(G);Z.ls&&(Z=await $0(Q.localStore,U.query,!1).then(({documents:V})=>U.view.ba(V,Z)));const he=re&&re.targetChanges.get(U.targetId),ue=re&&re.targetMismatches.get(U.targetId)!=null,we=U.view.applyChanges(Z,Q.isPrimaryClient,he,ue);return nE(Q,U.targetId,we.Ma),we.snapshot}(i,w,I,O);const u=await $0(i.localStore,e,!0),d=new rC(e,u.gs),m=d.ba(u.documents),p=Nu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=d.applyChanges(m,i.isPrimaryClient,p);nE(i,n,g.Ma);const T=new sC(e,n,d);return i.ka.set(e,T),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function hC(i,e,n){const s=Me(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(d=>!nd(d,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await up(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Hp(s.remoteStore,o.targetId),dp(s,o.targetId)}).catch(zo)):(dp(s,o.targetId),await up(s.localStore,o.targetId,!0))}async function dC(i,e){const n=Me(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Hp(n.remoteStore,s.targetId))}async function fC(i,e,n){const s=EC(i);try{const o=await function(d,m){const p=Me(d),g=jt.now(),T=m.reduce((O,M)=>O.add(M.key),Fe());let w,I;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let M=Cr(),Q=Fe();return p.ds.getEntries(O,T).next(U=>{M=U,M.forEach((G,re)=>{re.isValidDocument()||(Q=Q.add(G))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,M)).next(U=>{w=U;const G=[];for(const re of m){const Z=xR(re,w.get(re.key).overlayedDocument);Z!=null&&G.push(new Ds(re.key,Z,VT(Z.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,G,m)}).next(U=>{I=U;const G=U.applyToLocalDocumentSet(w,Q);return p.documentOverlayCache.saveOverlays(O,U.batchId,G)})}).then(()=>({batchId:I.batchId,changes:$T(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let g=d.Wa[d.currentUser.toKey()];g||(g=new _t(Ue)),g=g.insert(m,p),d.Wa[d.currentUser.toKey()]=g}(s,o.batchId,n),await Ou(s,o.changes),await ud(s.remoteStore)}catch(o){const u=Qp(o,"Failed to persist write");n.reject(u)}}async function Cb(i,e){const n=Me(i);try{const s=await RI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Ua.get(u);d&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Ba=!0:o.modifiedDocuments.size>0?tt(d.Ba):o.removedDocuments.size>0&&(tt(d.Ba),d.Ba=!1))}),await Ou(n,s,e)}catch(s){await zo(s)}}function tE(i,e,n){const s=Me(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,d)=>{const m=d.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=Me(d);p.onlineState=m;let g=!1;p.queries.forEach((T,w)=>{for(const I of w.ta)I.sa(m)&&(g=!0)}),g&&Xp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mC(i,e,n){const s=Me(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let d=new _t(be.comparator);d=d.insert(u,ln.newNoDocument(u,De.min()));const m=Fe().add(u),p=new ad(De.min(),new Map,new _t(Ue),d,m);await Cb(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),eg(s)}else await up(s.localStore,e,!1).then(()=>dp(s,e,n)).catch(zo)}async function pC(i,e){const n=Me(i),s=e.batch.batchId;try{const o=await AI(n.localStore,e);Nb(n,s,null),xb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ou(n,o)}catch(o){await zo(o)}}async function gC(i,e,n){const s=Me(i);try{const o=await function(d,m){const p=Me(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let T;return p.mutationQueue.lookupMutationBatch(g,m).next(w=>(tt(w!==null),T=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,T,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T)).next(()=>p.localDocuments.getDocuments(g,T))})}(s.localStore,e);Nb(s,e,n),xb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ou(s,o)}catch(o){await zo(o)}}function xb(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Nb(i,e,n){const s=Me(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function dp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Db(i,s)})}function Db(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(Hp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),eg(i))}function nE(i,e,n){for(const s of n)s instanceof Ab?(i.Ka.addReference(s.key,e),yC(i,s)):s instanceof Rb?(fe(Jp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Db(i,s.key)):xe()}function yC(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(fe(Jp,"New document in limbo: "+n),i.Qa.add(s),eg(i))}function eg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new be(ft.fromString(e)),s=i.za.next();i.Ua.set(s,new aC(n)),i.$a=i.$a.insert(n,s),_b(i.remoteStore,new ys(Ui(td(n.path)),s,"TargetPurposeLimboResolution",Zh.ae))}}async function Ou(i,e,n){const s=Me(i),o=[],u=[],d=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{d.push(s.Ha(p,e,n).then(g=>{var T;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=Bp.Yi(p.targetId,g);u.push(w)}}))}),await Promise.all(d),s.La.p_(o),await async function(p,g){const T=Me(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ne.forEach(g,I=>ne.forEach(I.Hi,O=>T.persistence.referenceDelegate.addReference(w,I.targetId,O)).next(()=>ne.forEach(I.Ji,O=>T.persistence.referenceDelegate.removeReference(w,I.targetId,O)))))}catch(w){if(!Bo(w))throw w;fe(qp,"Failed to update sequence numbers: "+w)}for(const w of g){const I=w.targetId;if(!w.fromCache){const O=T.Ts.get(I),M=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(M);T.Ts=T.Ts.insert(I,Q)}}}(s.localStore,u))}async function vC(i,e){const n=Me(i);if(!n.currentUser.isEqual(e)){fe(Jp,"User change. New user:",e.toKey());const s=await pb(n.localStore,e);n.currentUser=e,function(u,d){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new de(ee.CANCELLED,d))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ou(n,s.Rs)}}function _C(i,e){const n=Me(i),s=n.Ua.get(e);if(s&&s.Ba)return Fe().add(s.key);{let o=Fe();const u=n.qa.get(e);if(!u)return o;for(const d of u){const m=n.ka.get(d);o=o.unionWith(m.view.Sa)}return o}}function Ob(i){const e=Me(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_C.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mC.bind(null,e),e.La.p_=nC.bind(null,e.eventManager),e.La.Ja=iC.bind(null,e.eventManager),e}function EC(i){const e=Me(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gC.bind(null,e),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return SI(this.persistence,new TI,e.initialUser,this.serializer)}Xa(e){return new mb(zp.ri,this.serializer)}Za(e){return new DI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class TC extends Ph{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){tt(this.persistence.referenceDelegate instanceof kh);const s=this.persistence.referenceDelegate.garbageCollector;return new aI(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new mb(s=>kh.ri(s,n),this.serializer)}}class fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>tE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vC.bind(null,this.syncEngine),await JI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tC}()}createDatastore(e){const n=od(e.databaseInfo.databaseId),s=function(u){return new PI(u)}(e.databaseInfo);return function(u,d,m,p){return new zI(u,d,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,m){return new qI(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>tE(this.syncEngine,n,0),function(){return Y0.D()?new Y0:new OI}())}createSyncEngine(e,n){return function(o,u,d,m,p,g,T){const w=new oC(o,u,d,m,p,g);return T&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Me(o);fe(ya,"RemoteStore shutting down."),u.W_.add(5),await Du(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class bC{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=AT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{fe(xs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(fe(xs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Pm(i,e){i.asyncQueue.verifyOperationInProgress(),fe(xs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await pb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function iE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await wC(i);fe(xs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>X0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>X0(e.remoteStore,o)),i._onlineComponents=e}async function wC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){fe(xs,"Using user provided OfflineComponentProvider");try{await Pm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Do("Error using user provided cache. Falling back to memory cache: "+n),await Pm(i,new Ph)}}else fe(xs,"Using default OfflineComponentProvider"),await Pm(i,new TC(void 0));return i._offlineComponents}async function Mb(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(fe(xs,"Using user provided OnlineComponentProvider"),await iE(i,i._uninitializedComponentsProvider._online)):(fe(xs,"Using default OnlineComponentProvider"),await iE(i,new fp))),i._onlineComponents}function SC(i){return Mb(i).then(e=>e.syncEngine)}async function Lh(i){const e=await Mb(i),n=e.eventManager;return n.onListen=lC.bind(null,e.syncEngine),n.onUnlisten=hC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dC.bind(null,e.syncEngine),n}function AC(i,e,n={}){const s=new wr;return i.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const T=new tg({next:I=>{T.su(),d.enqueueAndForget(()=>Wp(u,w));const O=I.docs.has(m);!O&&I.fromCache?g.reject(new de(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&p&&p.source==="server"?g.reject(new de(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Zp(td(m.path),T,{includeMetadataChanges:!0,Ta:!0});return Yp(u,w)}(await Lh(i),i.asyncQueue,e,n,s)),s.promise}function RC(i,e,n={}){const s=new wr;return i.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const T=new tg({next:I=>{T.su(),d.enqueueAndForget(()=>Wp(u,w)),I.fromCache&&p.source==="server"?g.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Zp(m,T,{includeMetadataChanges:!0,Ta:!0});return Yp(u,w)}(await Lh(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(i,e,n){if(!n)throw new de(ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function IC(i,e,n,s){if(e===!0&&s===!0)throw new de(ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function sE(i){if(!be.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function aE(i){if(be.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function cd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":xe()}function yn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cd(i);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firestore.googleapis.com",oE=!0;class lE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vb,this.ssl=oE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:oE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rI)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mu{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new P2;switch(s.type){case"firstParty":return new z2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=rE.get(n);s&&(fe("ComponentProvider","Removing Datastore"),rE.delete(n),s.terminate())}(this),Promise.resolve()}}function CC(i,e,n,s={}){var o;const u=(i=yn(i,Mu))._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==Vb&&u.host!==m&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!ws(p,d)&&(i._setSettings(p),s.mockUserToken)){let g,T;if(typeof s.mockUserToken=="string")g=s.mockUserToken,T=on.MOCK_USER;else{g=l1(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new on(w)}i._authCredentials=new L2(new wT(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class un{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class bs extends Or{constructor(e,n,s){super(e,n,td(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new be(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function gn(i,e,...n){if(i=St(i),ng("collection","path",e),i instanceof Mu){const s=ft.fromString(e,...n);return aE(s),new bs(i,null,s)}{if(!(i instanceof un||i instanceof bs))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return aE(s),new bs(i.firestore,null,s)}}function Lm(i,e){if(i=yn(i,Mu),ng("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Or(i,null,function(s){return new Sa(ft.emptyPath(),s)}(e))}function vt(i,e,...n){if(i=St(i),arguments.length===1&&(e=AT.newId()),ng("doc","path",e),i instanceof Mu){const s=ft.fromString(e,...n);return sE(s),new un(i,null,new be(s))}{if(!(i instanceof un||i instanceof bs))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return sE(s),new un(i.firestore,i instanceof bs?i.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="AsyncQueue";class cE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yb(this,"async_queue_retry"),this.Su=()=>{const s=Vm();s&&fe(uE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new wr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Bo(e))throw e;fe(uE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw Ir("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=Kp.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&xe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function hE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class xr extends Mu{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new cE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cE(e),this._firestoreClient=void 0,await e}}}function xC(i,e){const n=typeof i=="object"?i:Ip(),s=typeof i=="string"?i:Nh,o=wa(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=a1("firestore");u&&CC(o,...u)}return o}function hd(i){if(i._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||NC(i),i._firestoreClient}function NC(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,T){return new tR(m,p,g,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,kb(T.experimentalLongPollingOptions),T.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new bC(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(tn.fromBase64String(e))}catch(n){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lo(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=/^__.*__$/;class OC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class Pb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Lb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class sg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return jh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Lb(this.Lu)&&DC.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class MC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||od(e)}ju(e,n,s,o=!1){return new sg({Lu:e,methodName:n,zu:s,path:en.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(i){const e=i._freezeSettings(),n=od(i._databaseId);return new MC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function jb(i,e,n,s,o,u={}){const d=i.ju(u.merge||u.mergeFields?2:0,e,n,o);lg("Data must be an object, but it was:",d,s);const m=Ub(s,d);let p,g;if(u.merge)p=new Ln(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const w of u.mergeFields){const I=mp(e,w,n);if(!d.contains(I))throw new de(ee.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Bb(T,I)||T.push(I)}p=new Ln(T),g=d.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=d.fieldTransforms;return new OC(new Sn(m),p,g)}class md extends ku{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class ag extends ku{_toFieldTransform(e){return new eb(e.path,new Tu)}isEqual(e){return e instanceof ag}}class og extends ku{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new Su(e.serializer,YT(e.serializer,this.Ju));return new eb(e.path,n)}isEqual(e){return e instanceof og&&this.Ju===e.Ju}}function kC(i,e,n,s){const o=i.ju(1,e,n);lg("Data must be an object, but it was:",o,s);const u=[],d=Sn.empty();Ns(s,(p,g)=>{const T=ug(e,p,n);g=St(g);const w=o.Uu(T);if(g instanceof md)u.push(T);else{const I=Vu(g,w);I!=null&&(u.push(T),d.set(T,I))}});const m=new Ln(u);return new Pb(d,m,o.fieldTransforms)}function VC(i,e,n,s,o,u){const d=i.ju(1,e,n),m=[mp(e,s,n)],p=[o];if(u.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(mp(e,u[I])),p.push(u[I+1]);const g=[],T=Sn.empty();for(let I=m.length-1;I>=0;--I)if(!Bb(g,m[I])){const O=m[I];let M=p[I];M=St(M);const Q=d.Uu(O);if(M instanceof md)g.push(O);else{const U=Vu(M,Q);U!=null&&(g.push(O),T.set(O,U))}}const w=new Ln(g);return new Pb(T,w,d.fieldTransforms)}function PC(i,e,n,s=!1){return Vu(n,i.ju(s?4:3,e))}function Vu(i,e){if(zb(i=St(i)))return lg("Unsupported field value:",e,i),Ub(i,e);if(i instanceof ku)return function(s,o){if(!Lb(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let p=Vu(m,o.Ku(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return YT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=jt.fromDate(s);return{timestampValue:Mh(o.serializer,u)}}if(s instanceof jt){const u=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Mh(o.serializer,u)}}if(s instanceof ig)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Lo)return{bytesValue:ab(o.serializer,s._byteString)};if(s instanceof un){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Wu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:jp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof rg)return function(d,m){return{mapValue:{fields:{[MT]:{stringValue:kT},[Dh]:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return kp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${cd(s)}`)}(i,e)}function Ub(i,e){const n={};return IT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(i,(s,o)=>{const u=Vu(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function zb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof jt||i instanceof ig||i instanceof Lo||i instanceof un||i instanceof ku||i instanceof rg)}function lg(i,e,n){if(!zb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=cd(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function mp(i,e,n){if((e=St(e))instanceof dd)return e._internalPath;if(typeof e=="string")return ug(i,e);throw jh("Field path arguments must be of type string or ",i,!1,void 0,n)}const LC=new RegExp("[~\\*/\\[\\]]");function ug(i,e,n){if(e.search(LC)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new dd(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function jh(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new de(ee.INVALID_ARGUMENT,m+i+p)}function Bb(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jC extends qb{data(){return super.data()}}function pd(i,e){return typeof e=="string"?ug(i,e):e instanceof dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class Fb extends cg{}function au(i,e,...n){let s=[];e instanceof cg&&s.push(e),s=s.concat(n),function(u){const d=u.filter(p=>p instanceof hg).length,m=u.filter(p=>p instanceof gd).length;if(d>1||d>0&&m>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class gd extends Fb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new gd(e,n,s)}_apply(e){const n=this._parse(e);return $b(e._query,n),new Or(e.firestore,e.converter,ip(e._query,n))}_parse(e){const n=fd(e.firestore);return function(u,d,m,p,g,T,w){let I;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){fE(w,T);const M=[];for(const Q of w)M.push(dE(p,u,Q));I={arrayValue:{values:M}}}else I=dE(p,u,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||fE(w,T),I=PC(m,d,w,T==="in"||T==="not-in");return Mt.create(g,T,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dh(i,e,n){const s=e,o=pd("where",i);return gd._create(o,s,n)}class hg extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ci.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)$b(d,p),d=ip(d,p)}(e._query,n),new Or(e.firestore,e.converter,ip(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends Fb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=function(o,u,d){if(o.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eu(u,d)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new Sa(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Gb(i,e="asc"){const n=e,s=pd("orderBy",i);return dg._create(s,n)}function dE(i,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qT(e)&&n.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ft.fromString(n));if(!be.isDocumentKey(s))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return I0(i,new be(s))}if(n instanceof un)return I0(i,n._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(n)}.`)}function fE(i,e){if(!Array.isArray(i)||i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $b(i,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UC{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ns(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Dh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>Ct(d.doubleValue));return new rg(u)}convertGeoPoint(e){return new ig(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ed(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const n=As(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ft.fromString(e);tt(db(s));const o=new vu(s.get(1),s.get(3)),u=new be(s.popFirst(5));return o.isEqual(n)||Ir(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qb extends qb{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(pd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Eh extends Qb{data(e={}){return super.data(e)}}class Yb{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ou(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Eh(this._firestore,this._userDataWriter,s.key,s,new ou(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new Eh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ou(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Eh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ou(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,T=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:zC(m.type),doc:p,oldIndex:g,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(i){i=yn(i,un);const e=yn(i.firestore,xr);return AC(hd(e),i._key).then(n=>Wb(e,i,n))}class fg extends UC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function wn(i){i=yn(i,Or);const e=yn(i.firestore,xr),n=hd(e),s=new fg(e);return Hb(i._query),RC(n,i._query).then(o=>new Yb(e,s,i,o))}function da(i,e,n){i=yn(i,un);const s=yn(i.firestore,xr),o=Kb(i.converter,e,n);return yd(s,[jb(fd(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Jn.none())])}function pa(i,e,n,...s){i=yn(i,un);const o=yn(i.firestore,xr),u=fd(o);let d;return d=typeof(e=St(e))=="string"||e instanceof dd?VC(u,"updateDoc",i._key,e,n,s):kC(u,"updateDoc",i._key,e),yd(o,[d.toMutation(i._key,Jn.exists(!0))])}function du(i){return yd(yn(i.firestore,xr),[new Vp(i._key,Jn.none())])}function pp(i,e){const n=yn(i.firestore,xr),s=vt(i),o=Kb(i.converter,e);return yd(n,[jb(fd(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then(()=>s)}function BC(i,...e){var n,s,o;i=St(i);let u={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||hE(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(hE(e[d])){const w=e[d];e[d]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[d+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[d+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,T;if(i instanceof un)g=yn(i.firestore,xr),T=td(i._key.path),p={next:w=>{e[d]&&e[d](Wb(g,i,w))},error:e[d+1],complete:e[d+2]};else{const w=yn(i,Or);g=yn(w.firestore,xr),T=w._query;const I=new fg(g);p={next:O=>{e[d]&&e[d](new Yb(g,I,w,O))},error:e[d+1],complete:e[d+2]},Hb(i._query)}return function(I,O,M,Q){const U=new tg(Q),G=new Zp(O,U,M);return I.asyncQueue.enqueueAndForget(async()=>Yp(await Lh(I),G)),()=>{U.su(),I.asyncQueue.enqueueAndForget(async()=>Wp(await Lh(I),G))}}(hd(g),T,m,p)}function yd(i,e){return function(s,o){const u=new wr;return s.asyncQueue.enqueueAndForget(async()=>fC(await SC(s),o,u)),u.promise}(hd(i),e)}function Wb(i,e,n){const s=n.docs.get(e._key),o=new fg(i);return new Qb(i,o,e._key,s,new ou(n.hasPendingWrites,n.fromCache),e.converter)}function gp(){return new ag("serverTimestamp")}function Eo(i){return new og("increment",i)}(function(e,n=!0){(function(o){Uo=o})(jo),Hi(new ui("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new xr(new j2(s.getProvider("auth-internal")),new B2(d,s.getProvider("app-check-internal")),function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(g.options.projectId,T)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Zn(p0,g0,e),Zn(p0,g0,"esm2017")})();const Xb="@firebase/installations",mg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=1e4,Jb=`w:${mg}`,ew="FIS_v2",qC="https://firebaseinstallations.googleapis.com/v1",HC=60*60*1e3,FC="installations",GC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},va=new ba(FC,GC,$C);function tw(i){return i instanceof fi&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw({projectId:i}){return`${qC}/projects/${i}/installations`}function iw(i){return{token:i.token,requestStatus:2,expiresIn:QC(i.expiresIn),creationTime:Date.now()}}async function rw(i,e){const s=(await e.json()).error;return va.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function sw({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function KC(i,{refreshToken:e}){const n=sw(i);return n.append("Authorization",YC(e)),n}async function aw(i){const e=await i();return e.status>=500&&e.status<600?i():e}function QC(i){return Number(i.replace("s","000"))}function YC(i){return`${ew} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=nw(i),o=sw(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={fid:n,authVersion:ew,appId:i.appId,sdkVersion:Jb},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await aw(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:iw(g.authToken)}}else throw await rw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=/^[cdef][\w-]{21}$/,yp="";function JC(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=ex(i);return ZC.test(n)?n:yp}catch{return yp}}function ex(i){return XC(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;function uw(i,e){const n=vd(i);cw(n,e),tx(n,e)}function cw(i,e){const n=lw.get(i);if(n)for(const s of n)s(e)}function tx(i,e){const n=nx();n&&n.postMessage({key:i,fid:e}),ix()}let fa=null;function nx(){return!fa&&"BroadcastChannel"in self&&(fa=new BroadcastChannel("[Firebase] FID Change"),fa.onmessage=i=>{cw(i.data.key,i.data.fid)}),fa}function ix(){lw.size===0&&fa&&(fa.close(),fa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="firebase-installations-database",sx=1,_a="firebase-installations-store";let jm=null;function pg(){return jm||(jm=fT(rx,sx,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(_a)}}})),jm}async function Uh(i,e){const n=vd(i),o=(await pg()).transaction(_a,"readwrite"),u=o.objectStore(_a),d=await u.get(n);return await u.put(e,n),await o.done,(!d||d.fid!==e.fid)&&uw(i,e.fid),e}async function hw(i){const e=vd(i),s=(await pg()).transaction(_a,"readwrite");await s.objectStore(_a).delete(e),await s.done}async function _d(i,e){const n=vd(i),o=(await pg()).transaction(_a,"readwrite"),u=o.objectStore(_a),d=await u.get(n),m=e(d);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!d||d.fid!==m.fid)&&uw(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(i){let e;const n=await _d(i.appConfig,s=>{const o=ax(s),u=ox(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===yp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ax(i){const e=i||{fid:JC(),registrationStatus:0};return dw(e)}function ox(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(va.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=lx(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ux(i)}:{installationEntry:e}}async function lx(i,e){try{const n=await WC(i,e);return Uh(i.appConfig,n)}catch(n){throw tw(n)&&n.customData.serverCode===409?await hw(i.appConfig):await Uh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ux(i){let e=await mE(i.appConfig);for(;e.registrationStatus===1;)await ow(100),e=await mE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await gg(i);return s||n}return e}function mE(i){return _d(i,e=>{if(!e)throw va.create("installation-not-found");return dw(e)})}function dw(i){return cx(i)?{fid:i.fid,registrationStatus:0}:i}function cx(i){return i.registrationStatus===1&&i.registrationTime+Zb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx({appConfig:i,heartbeatServiceProvider:e},n){const s=dx(i,n),o=KC(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={installation:{sdkVersion:Jb,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await aw(()=>fetch(s,m));if(p.ok){const g=await p.json();return iw(g)}else throw await rw("Generate Auth Token",p)}function dx(i,{fid:e}){return`${nw(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(i,e=!1){let n;const s=await _d(i.appConfig,u=>{if(!fw(u))throw va.create("not-registered");const d=u.authToken;if(!e&&px(d))return u;if(d.requestStatus===1)return n=fx(i,e),u;{if(!navigator.onLine)throw va.create("app-offline");const m=yx(u);return n=mx(i,m),m}});return n?await n:s.authToken}async function fx(i,e){let n=await pE(i.appConfig);for(;n.authToken.requestStatus===1;)await ow(100),n=await pE(i.appConfig);const s=n.authToken;return s.requestStatus===0?yg(i,e):s}function pE(i){return _d(i,e=>{if(!fw(e))throw va.create("not-registered");const n=e.authToken;return vx(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mx(i,e){try{const n=await hx(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await Uh(i.appConfig,s),n}catch(n){if(tw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await hw(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Uh(i.appConfig,s)}throw n}}function fw(i){return i!==void 0&&i.registrationStatus===2}function px(i){return i.requestStatus===2&&!gx(i)}function gx(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+HC}function yx(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function vx(i){return i.requestStatus===1&&i.requestTime+Zb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(i){const e=i,{installationEntry:n,registrationPromise:s}=await gg(e);return s?s.catch(console.error):yg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ex(i,e=!1){const n=i;return await Tx(n),(await yg(n,e)).token}async function Tx(i){const{registrationPromise:e}=await gg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(i){if(!i||!i.options)throw Um("App Configuration");if(!i.name)throw Um("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Um(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Um(i){return va.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="installations",wx="installations-internal",Sx=i=>{const e=i.getProvider("app").getImmediate(),n=bx(e),s=wa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Ax=i=>{const e=i.getProvider("app").getImmediate(),n=wa(e,mw).getImmediate();return{getId:()=>_x(n),getToken:o=>Ex(n,o)}};function Rx(){Hi(new ui(mw,Sx,"PUBLIC")),Hi(new ui(wx,Ax,"PRIVATE"))}Rx();Zn(Xb,mg);Zn(Xb,mg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="analytics",Ix="firebase_id",Cx="origin",xx=60*1e3,Nx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new Xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jn=new ba("analytics","Analytics",Dx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(i){if(!i.startsWith(vg)){const e=jn.create("invalid-gtag-resource",{gtagURL:i});return An.warn(e.message),""}return i}function pw(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function Mx(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function kx(i,e){const n=Mx("firebase-js-sdk-policy",{createScriptURL:Ox}),s=document.createElement("script"),o=`${vg}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function Vx(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function Px(i,e,n,s,o,u){const d=s[o];try{if(d)await e[d];else{const p=(await pw(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){An.error(m)}i("config",o,u)}async function Lx(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await pw(n);for(const p of d){const g=m.find(w=>w.measurementId===p),T=g&&e[g.appId];if(T)u.push(T);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){An.error(u)}}function jx(i,e,n,s){async function o(u,...d){try{if(u==="event"){const[m,p]=d;await Lx(i,e,n,m,p)}else if(u==="config"){const[m,p]=d;await Px(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=d;i("consent",m,p)}else if(u==="get"){const[m,p,g]=d;i("get",m,p,g)}else if(u==="set"){const[m]=d;i("set",m)}else i(u,...d)}catch(m){An.error(m)}}return o}function Ux(i,e,n,s,o){let u=function(...d){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=jx(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function zx(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(vg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx=30,qx=1e3;class Hx{constructor(e={},n=qx){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const gw=new Hx;function Fx(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function Gx(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:Fx(s)},u=Nx.replace("{app-id}",n),d=await fetch(u,o);if(d.status!==200&&d.status!==304){let m="";try{const p=await d.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw jn.create("config-fetch-failed",{httpStatus:d.status,responseMessage:m})}return d.json()}async function $x(i,e=gw,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw jn.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw jn.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new Yx;return setTimeout(async()=>{m.abort()},xx),yw({appId:s,apiKey:o,measurementId:u},d,m,e)}async function yw(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=gw){var u;const{appId:d,measurementId:m}=i;try{await Kx(s,e)}catch(p){if(m)return An.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:d,measurementId:m};throw p}try{const p=await Gx(i);return o.deleteThrottleMetadata(d),p}catch(p){const g=p;if(!Qx(g)){if(o.deleteThrottleMetadata(d),m)return An.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:d,measurementId:m};throw p}const T=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?s0(n,o.intervalMillis,Bx):s0(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+T,backoffCount:n+1};return o.setThrottleMetadata(d,w),An.debug(`Calling attemptFetch again in ${T} millis`),yw(i,w,s,o)}}function Kx(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Qx(i){if(!(i instanceof fi)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class Yx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Wx(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,d=Object.assign(Object.assign({},s),{send_to:u});i("event",n,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(){if(uT())try{await cT()}catch(i){return An.warn(jn.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return An.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Zx(i,e,n,s,o,u,d){var m;const p=$x(i);p.then(O=>{n[O.measurementId]=O.appId,i.options.measurementId&&O.measurementId!==i.options.measurementId&&An.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>An.error(O)),e.push(p);const g=Xx().then(O=>{if(O)return s.getId()}),[T,w]=await Promise.all([p,g]);zx(u)||kx(u,T.measurementId),o("js",new Date);const I=(m=d==null?void 0:d.config)!==null&&m!==void 0?m:{};return I[Cx]="firebase",I.update=!0,w!=null&&(I[Ix]=w),o("config",T.measurementId,I),T.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.app=e}_delete(){return delete fu[this.app.options.appId],Promise.resolve()}}let fu={},gE=[];const yE={};let zm="dataLayer",eN="gtag",vE,vw,_E=!1;function tN(){const i=[];if(lT()&&i.push("This is a browser extension environment."),p1()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=jn.create("invalid-analytics-context",{errorInfo:e});An.warn(n.message)}}function nN(i,e,n){tN();const s=i.options.appId;if(!s)throw jn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)An.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jn.create("no-api-key");if(fu[s]!=null)throw jn.create("already-exists",{id:s});if(!_E){Vx(zm);const{wrappedGtag:u,gtagCore:d}=Ux(fu,gE,yE,zm,eN);vw=u,vE=d,_E=!0}return fu[s]=Zx(i,gE,yE,e,vE,zm,n),new Jx(i)}function iN(i=Ip()){i=St(i);const e=wa(i,zh);return e.isInitialized()?e.getImmediate():rN(i)}function rN(i,e={}){const n=wa(i,zh);if(n.isInitialized()){const o=n.getImmediate();if(ws(e,n.getOptions()))return o;throw jn.create("already-initialized")}return n.initialize({options:e})}function sN(i,e,n,s){i=St(i),Wx(vw,fu[i.app.options.appId],e,n,s).catch(o=>An.error(o))}const EE="@firebase/analytics",TE="0.10.12";function aN(){Hi(new ui(zh,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return nN(s,o,n)},"PUBLIC")),Hi(new ui("analytics-internal",i,"PRIVATE")),Zn(EE,TE),Zn(EE,TE,"esm2017");function i(e){try{const n=e.getProvider(zh).getImmediate();return{logEvent:(s,o,u)=>sN(n,s,o,u)}}catch(n){throw jn.create("interop-component-reg-failed",{reason:n})}}}aN();const oN={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},_g=mT(oN),Ve=xC(_g);iN(_g);var Zl={},bE;function lN(){if(bE)return Zl;bE=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.parse=d,Zl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function d(I,O){const M=new u,Q=I.length;if(Q<2)return M;const U=(O==null?void 0:O.decode)||T;let G=0;do{const re=I.indexOf("=",G);if(re===-1)break;const Z=I.indexOf(";",G),he=Z===-1?Q:Z;if(re>he){G=I.lastIndexOf(";",re-1)+1;continue}const ue=m(I,G,re),we=p(I,re,ue),V=I.slice(ue,we);if(M[V]===void 0){let S=m(I,re+1,he),A=p(I,he,S);const N=U(I.slice(S,A));M[V]=N}G=he+1}while(G<Q);return M}function m(I,O,M){do{const Q=I.charCodeAt(O);if(Q!==32&&Q!==9)return O}while(++O<M);return M}function p(I,O,M){for(;O>M;){const Q=I.charCodeAt(--O);if(Q!==32&&Q!==9)return O+1}return M}function g(I,O,M){const Q=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(I))throw new TypeError(`argument name is invalid: ${I}`);const U=Q(O);if(!e.test(U))throw new TypeError(`argument val is invalid: ${O}`);let G=I+"="+U;if(!M)return G;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);G+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);G+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);G+="; Path="+M.path}if(M.expires){if(!w(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);G+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(G+="; HttpOnly"),M.secure&&(G+="; Secure"),M.partitioned&&(G+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":G+="; Priority=Low";break;case"medium":G+="; Priority=Medium";break;case"high":G+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":G+="; SameSite=Strict";break;case"lax":G+="; SameSite=Lax";break;case"none":G+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return G}function T(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function w(I){return o.call(I)==="[object Date]"}return Zl}lN();var wE="popstate";function uN(i={}){function e(s,o){let{pathname:u,search:d,hash:m}=s.location;return vp("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Au(o)}return hN(e,n,null,i)}function gt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function hi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cN(){return Math.random().toString(36).substring(2,10)}function SE(i,e){return{usr:i.state,key:i.key,idx:e}}function vp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ho(e):e,state:n,key:e&&e.key||s||cN()}}function Au({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ho(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function hN(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,d=o.history,m="POP",p=null,g=T();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function T(){return(d.state||{idx:null}).idx}function w(){m="POP";let U=T(),G=U==null?null:U-g;g=U,p&&p({action:m,location:Q.location,delta:G})}function I(U,G){m="PUSH";let re=vp(Q.location,U,G);g=T()+1;let Z=SE(re,g),he=Q.createHref(re);try{d.pushState(Z,"",he)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;o.location.assign(he)}u&&p&&p({action:m,location:Q.location,delta:1})}function O(U,G){m="REPLACE";let re=vp(Q.location,U,G);g=T();let Z=SE(re,g),he=Q.createHref(re);d.replaceState(Z,"",he),u&&p&&p({action:m,location:Q.location,delta:0})}function M(U){let G=o.location.origin!=="null"?o.location.origin:o.location.href,re=typeof U=="string"?U:Au(U);return re=re.replace(/ $/,"%20"),gt(G,`No window.location.(origin|href) available to create URL for href: ${re}`),new URL(re,G)}let Q={get action(){return m},get location(){return i(o,d)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(wE,w),p=U,()=>{o.removeEventListener(wE,w),p=null}},createHref(U){return e(o,U)},createURL:M,encodeLocation(U){let G=M(U);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:I,replace:O,go(U){return d.go(U)}};return Q}function _w(i,e,n="/"){return dN(i,e,n,!1)}function dN(i,e,n,s){let o=typeof e=="string"?Ho(e):e,u=Nr(o.pathname||"/",n);if(u==null)return null;let d=Ew(i);fN(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=SN(u);m=bN(d[p],g,s)}return m}function Ew(i,e=[],n=[],s=""){let o=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=Sr([s,p.relativePath]),T=n.concat(p);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Ew(u.children,e,T,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:EN(g,u.index),routesMeta:T})};return i.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,d);else for(let p of Tw(u.path))o(u,d,p)}),e}function Tw(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let d=Tw(s.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function fN(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:TN(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var mN=/^:[\w-]+$/,pN=3,gN=2,yN=1,vN=10,_N=-2,AE=i=>i==="*";function EN(i,e){let n=i.split("/"),s=n.length;return n.some(AE)&&(s+=_N),e&&(s+=gN),n.filter(o=>!AE(o)).reduce((o,u)=>o+(mN.test(u)?pN:u===""?yN:vN),s)}function TN(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function bN(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",d=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,T=u==="/"?e:e.slice(u.length)||"/",w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},T),I=p.route;if(!w&&g&&n&&!s[s.length-1].route.index&&(w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},T)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:Sr([u,w.pathname]),pathnameBase:CN(Sr([u,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(u=Sr([u,w.pathnameBase]))}return d}function Bh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=wN(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:T,isOptional:w},I)=>{if(T==="*"){let M=m[I]||"";d=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const O=m[I];return w&&!O?g[T]=void 0:g[T]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:i}}function wN(i,e=!1,n=!0){hi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function SN(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Nr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function AN(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Ho(i):i;return{pathname:n?n.startsWith("/")?n:RN(n,e):e,search:xN(s),hash:NN(o)}}function RN(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Bm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IN(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eg(i){let e=IN(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Tg(i,e,n,s=!1){let o;typeof i=="string"?o=Ho(i):(o={...i},gt(!o.pathname||!o.pathname.includes("?"),Bm("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Bm("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Bm("#","search","hash",o)));let u=i===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=n;else{let w=e.length-1;if(!s&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}m=w>=0?e[w]:"/"}let p=AN(o,m),g=d&&d!=="/"&&d.endsWith("/"),T=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||T)&&(p.pathname+="/"),p}var Sr=i=>i.join("/").replace(/\/\/+/g,"/"),CN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),xN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,NN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function DN(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var bw=["POST","PUT","PATCH","DELETE"];new Set(bw);var ON=["GET",...bw];new Set(ON);var Fo=k.createContext(null);Fo.displayName="DataRouter";var Ed=k.createContext(null);Ed.displayName="DataRouterState";var ww=k.createContext({isTransitioning:!1});ww.displayName="ViewTransition";var MN=k.createContext(new Map);MN.displayName="Fetchers";var kN=k.createContext(null);kN.displayName="Await";var mi=k.createContext(null);mi.displayName="Navigation";var Pu=k.createContext(null);Pu.displayName="Location";var pi=k.createContext({outlet:null,matches:[],isDataRoute:!1});pi.displayName="Route";var bg=k.createContext(null);bg.displayName="RouteError";function VN(i,{relative:e}={}){gt(Go(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=k.useContext(mi),{hash:o,pathname:u,search:d}=Lu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Sr([n,u])),s.createHref({pathname:m,search:d,hash:o})}function Go(){return k.useContext(Pu)!=null}function Gi(){return gt(Go(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Pu).location}var Sw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Aw(i){k.useContext(mi).static||k.useLayoutEffect(i)}function Ia(){let{isDataRoute:i}=k.useContext(pi);return i?YN():PN()}function PN(){gt(Go(),"useNavigate() may be used only in the context of a <Router> component.");let i=k.useContext(Fo),{basename:e,navigator:n}=k.useContext(mi),{matches:s}=k.useContext(pi),{pathname:o}=Gi(),u=JSON.stringify(Eg(s)),d=k.useRef(!1);return Aw(()=>{d.current=!0}),k.useCallback((p,g={})=>{if(hi(d.current,Sw),!d.current)return;if(typeof p=="number"){n.go(p);return}let T=Tg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Sr([e,T.pathname])),(g.replace?n.replace:n.push)(T,g.state,g)},[e,n,u,o,i])}k.createContext(null);function LN(){let{matches:i}=k.useContext(pi),e=i[i.length-1];return e?e.params:{}}function Lu(i,{relative:e}={}){let{matches:n}=k.useContext(pi),{pathname:s}=Gi(),o=JSON.stringify(Eg(n));return k.useMemo(()=>Tg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function jN(i,e){return Rw(i,e)}function Rw(i,e,n,s){var re;gt(Go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=k.useContext(mi),{matches:d}=k.useContext(pi),m=d[d.length-1],p=m?m.params:{},g=m?m.pathname:"/",T=m?m.pathnameBase:"/",w=m&&m.route;{let Z=w&&w.path||"";Iw(g,!w||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let I=Gi(),O;if(e){let Z=typeof e=="string"?Ho(e):e;gt(T==="/"||((re=Z.pathname)==null?void 0:re.startsWith(T)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),O=Z}else O=I;let M=O.pathname||"/",Q=M;if(T!=="/"){let Z=T.replace(/^\//,"").split("/");Q="/"+M.replace(/^\//,"").split("/").slice(Z.length).join("/")}let U=!u&&n&&n.matches&&n.matches.length>0?n.matches:_w(i,{pathname:Q});hi(w||U!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),hi(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=HN(U&&U.map(Z=>Object.assign({},Z,{params:Object.assign({},p,Z.params),pathname:Sr([T,o.encodeLocation?o.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?T:Sr([T,o.encodeLocation?o.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),d,n,s);return e&&G?k.createElement(Pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},G):G}function UN(){let i=QN(),e=DN(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:o},n):null,d)}var zN=k.createElement(UN,null),BN=class extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?k.createElement(pi.Provider,{value:this.props.routeContext},k.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qN({routeContext:i,match:e,children:n}){let s=k.useContext(Fo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(pi.Provider,{value:i},n)}function HN(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);gt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:T,errors:w}=n,I=g.route.loader&&!T.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||I){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,T)=>{let w,I=!1,O=null,M=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,O=g.route.errorElement||zN,d&&(m<0&&T===0?(Iw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,M=null):m===T&&(I=!0,M=g.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,T+1)),U=()=>{let G;return w?G=O:I?G=M:g.route.Component?G=k.createElement(g.route.Component,null):g.route.element?G=g.route.element:G=p,k.createElement(qN,{match:g,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:G})};return n&&(g.route.ErrorBoundary||g.route.errorElement||T===0)?k.createElement(BN,{location:n.location,revalidation:n.revalidation,component:O,error:w,children:U(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):U()},null)}function wg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FN(i){let e=k.useContext(Fo);return gt(e,wg(i)),e}function GN(i){let e=k.useContext(Ed);return gt(e,wg(i)),e}function $N(i){let e=k.useContext(pi);return gt(e,wg(i)),e}function Sg(i){let e=$N(i),n=e.matches[e.matches.length-1];return gt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function KN(){return Sg("useRouteId")}function QN(){var s;let i=k.useContext(bg),e=GN("useRouteError"),n=Sg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function YN(){let{router:i}=FN("useNavigate"),e=Sg("useNavigate"),n=k.useRef(!1);return Aw(()=>{n.current=!0}),k.useCallback(async(o,u={})=>{hi(n.current,Sw),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var RE={};function Iw(i,e,n){!e&&!RE[i]&&(RE[i]=!0,hi(!1,n))}k.memo(WN);function WN({routes:i,future:e,state:n}){return Rw(i,void 0,n,e)}function ds({to:i,replace:e,state:n,relative:s}){gt(Go(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=k.useContext(mi);hi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=k.useContext(pi),{pathname:d}=Gi(),m=Ia(),p=Tg(i,Eg(u),d,s==="path"),g=JSON.stringify(p);return k.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function Er(i){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function XN({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){gt(!Go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=i.replace(/^\/*/,"/"),m=k.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=Ho(n));let{pathname:p="/",search:g="",hash:T="",state:w=null,key:I="default"}=n,O=k.useMemo(()=>{let M=Nr(p,d);return M==null?null:{location:{pathname:M,search:g,hash:T,state:w,key:I},navigationType:s}},[d,p,g,T,w,I,s]);return hi(O!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${T}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:k.createElement(mi.Provider,{value:m},k.createElement(Pu.Provider,{children:e,value:O}))}function ZN({children:i,location:e}){return jN(_p(i),e)}function _p(i,e=[]){let n=[];return k.Children.forEach(i,(s,o)=>{if(!k.isValidElement(s))return;let u=[...e,o];if(s.type===k.Fragment){n.push.apply(n,_p(s.props.children,u));return}gt(s.type===Er,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=_p(s.props.children,u)),n.push(d)}),n}var Th="get",bh="application/x-www-form-urlencoded";function Td(i){return i!=null&&typeof i.tagName=="string"}function JN(i){return Td(i)&&i.tagName.toLowerCase()==="button"}function eD(i){return Td(i)&&i.tagName.toLowerCase()==="form"}function tD(i){return Td(i)&&i.tagName.toLowerCase()==="input"}function nD(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function iD(i,e){return i.button===0&&(!e||e==="_self")&&!nD(i)}var fh=null;function rD(){if(fh===null)try{new FormData(document.createElement("form"),0),fh=!1}catch{fh=!0}return fh}var sD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qm(i){return i!=null&&!sD.has(i)?(hi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bh}"`),null):i}function aD(i,e){let n,s,o,u,d;if(eD(i)){let m=i.getAttribute("action");s=m?Nr(m,e):null,n=i.getAttribute("method")||Th,o=qm(i.getAttribute("enctype"))||bh,u=new FormData(i)}else if(JN(i)||tD(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Nr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Th,o=qm(i.getAttribute("formenctype"))||qm(m.getAttribute("enctype"))||bh,u=new FormData(m,i),!rD()){let{name:g,type:T,value:w}=i;if(T==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,w)}}else{if(Td(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Th,s=null,o=bh,d=i}return u&&o==="text/plain"&&(d=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:d}}function Ag(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function oD(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function uD(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await oD(u,n);return d.links?d.links():[]}return[]}));return fD(s.flat(1).filter(lD).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function IE(i,e,n,s,o,u){let d=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var T;return n[g].pathname!==p.pathname||((T=n[g].route.path)==null?void 0:T.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var w;let T=s.routes[p.route.id];if(!T||!T.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function cD(i,e,{includeHydrateFallback:n}={}){return hD(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function hD(i){return[...new Set(i)]}function dD(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function fD(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(dD(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var mD=new Set([100,101,204,205]);function pD(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&Nr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Cw(){let i=k.useContext(Fo);return Ag(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function gD(){let i=k.useContext(Ed);return Ag(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Rg=k.createContext(void 0);Rg.displayName="FrameworkContext";function xw(){let i=k.useContext(Rg);return Ag(i,"You must render this element inside a <HydratedRouter> element"),i}function yD(i,e){let n=k.useContext(Rg),[s,o]=k.useState(!1),[u,d]=k.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:T,onTouchStart:w}=e,I=k.useRef(null);k.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let Q=G=>{G.forEach(re=>{d(re.isIntersecting)})},U=new IntersectionObserver(Q,{threshold:.5});return I.current&&U.observe(I.current),()=>{U.disconnect()}}},[i]),k.useEffect(()=>{if(s){let Q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let O=()=>{o(!0)},M=()=>{o(!1),d(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:Jl(m,O),onBlur:Jl(p,M),onMouseEnter:Jl(g,O),onMouseLeave:Jl(T,M),onTouchStart:Jl(w,O)}]:[!1,I,{}]}function Jl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function vD({page:i,...e}){let{router:n}=Cw(),s=k.useMemo(()=>_w(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?k.createElement(ED,{page:i,matches:s,...e}):null}function _D(i){let{manifest:e,routeModules:n}=xw(),[s,o]=k.useState([]);return k.useEffect(()=>{let u=!1;return uD(i,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[i,e,n]),s}function ED({page:i,matches:e,...n}){let s=Gi(),{manifest:o,routeModules:u}=xw(),{basename:d}=Cw(),{loaderData:m,matches:p}=gD(),g=k.useMemo(()=>IE(i,e,p,o,s,"data"),[i,e,p,o,s]),T=k.useMemo(()=>IE(i,e,p,o,s,"assets"),[i,e,p,o,s]),w=k.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let M=new Set,Q=!1;if(e.forEach(G=>{var Z;let re=o.routes[G.route.id];!re||!re.hasLoader||(!g.some(he=>he.route.id===G.route.id)&&G.route.id in m&&((Z=u[G.route.id])!=null&&Z.shouldRevalidate)||re.hasClientLoader?Q=!0:M.add(G.route.id))}),M.size===0)return[];let U=pD(i,d);return Q&&M.size>0&&U.searchParams.set("_routes",e.filter(G=>M.has(G.route.id)).map(G=>G.route.id).join(",")),[U.pathname+U.search]},[d,m,s,o,g,e,i,u]),I=k.useMemo(()=>cD(T,o),[T,o]),O=_D(T);return k.createElement(k.Fragment,null,w.map(M=>k.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),I.map(M=>k.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),O.map(({key:M,link:Q})=>k.createElement("link",{key:M,...Q})))}function TD(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Nw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nw&&(window.__reactRouterVersion="7.5.2")}catch{}function bD({basename:i,children:e,window:n}){let s=k.useRef();s.current==null&&(s.current=uN({window:n,v5Compat:!0}));let o=s.current,[u,d]=k.useState({action:o.action,location:o.location}),m=k.useCallback(p=>{k.startTransition(()=>d(p))},[d]);return k.useLayoutEffect(()=>o.listen(m),[o,m]),k.createElement(XN,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Dw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ig=k.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:d,state:m,target:p,to:g,preventScrollReset:T,viewTransition:w,...I},O){let{basename:M}=k.useContext(mi),Q=typeof g=="string"&&Dw.test(g),U,G=!1;if(typeof g=="string"&&Q&&(U=g,Nw))try{let A=new URL(window.location.href),N=g.startsWith("//")?new URL(A.protocol+g):new URL(g),x=Nr(N.pathname,M);N.origin===A.origin&&x!=null?g=x+N.search+N.hash:G=!0}catch{hi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let re=VN(g,{relative:o}),[Z,he,ue]=yD(s,I),we=RD(g,{replace:d,state:m,target:p,preventScrollReset:T,relative:o,viewTransition:w});function V(A){e&&e(A),A.defaultPrevented||we(A)}let S=k.createElement("a",{...I,...ue,href:U||re,onClick:G||u?e:V,ref:TD(O,he),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return Z&&!Q?k.createElement(k.Fragment,null,S,k.createElement(vD,{page:re})):S});Ig.displayName="Link";var wD=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:d,viewTransition:m,children:p,...g},T){let w=Lu(d,{relative:g.relative}),I=Gi(),O=k.useContext(Ed),{navigator:M,basename:Q}=k.useContext(mi),U=O!=null&&DD(w)&&m===!0,G=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,re=I.pathname,Z=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(re=re.toLowerCase(),Z=Z?Z.toLowerCase():null,G=G.toLowerCase()),Z&&Q&&(Z=Nr(Z,Q)||Z);const he=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ue=re===G||!o&&re.startsWith(G)&&re.charAt(he)==="/",we=Z!=null&&(Z===G||!o&&Z.startsWith(G)&&Z.charAt(G.length)==="/"),V={isActive:ue,isPending:we,isTransitioning:U},S=ue?e:void 0,A;typeof s=="function"?A=s(V):A=[s,ue?"active":null,we?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(V):u;return k.createElement(Ig,{...g,"aria-current":S,className:A,ref:T,style:N,to:d,viewTransition:m},typeof p=="function"?p(V):p)});wD.displayName="NavLink";var SD=k.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:d=Th,action:m,onSubmit:p,relative:g,preventScrollReset:T,viewTransition:w,...I},O)=>{let M=xD(),Q=ND(m,{relative:g}),U=d.toLowerCase()==="get"?"get":"post",G=typeof m=="string"&&Dw.test(m),re=Z=>{if(p&&p(Z),Z.defaultPrevented)return;Z.preventDefault();let he=Z.nativeEvent.submitter,ue=(he==null?void 0:he.getAttribute("formmethod"))||d;M(he||Z.currentTarget,{fetcherKey:e,method:ue,navigate:n,replace:o,state:u,relative:g,preventScrollReset:T,viewTransition:w})};return k.createElement("form",{ref:O,method:U,action:Q,onSubmit:s?p:re,...I,"data-discover":!G&&i==="render"?"true":void 0})});SD.displayName="Form";function AD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ow(i){let e=k.useContext(Fo);return gt(e,AD(i)),e}function RD(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:d}={}){let m=Ia(),p=Gi(),g=Lu(i,{relative:u});return k.useCallback(T=>{if(iD(T,e)){T.preventDefault();let w=n!==void 0?n:Au(p)===Au(g);m(i,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:d})}},[p,m,g,n,s,e,i,o,u,d])}var ID=0,CD=()=>`__${String(++ID)}__`;function xD(){let{router:i}=Ow("useSubmit"),{basename:e}=k.useContext(mi),n=KN();return k.useCallback(async(s,o={})=>{let{action:u,method:d,encType:m,formData:p,body:g}=aD(s,e);if(o.navigate===!1){let T=o.fetcherKey||CD();await i.fetch(T,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function ND(i,{relative:e}={}){let{basename:n}=k.useContext(mi),s=k.useContext(pi);gt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Lu(i||".",{relative:e})},d=Gi();if(i==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(T=>T==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let T=m.toString();u.search=T?`?${T}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Sr([n,u.pathname])),Au(u)}function DD(i,e={}){let n=k.useContext(ww);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ow("useViewTransitionState"),o=Lu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Nr(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=Nr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Bh(o.pathname,d)!=null||Bh(o.pathname,u)!=null}new TextEncoder;[...mD];var OD=tT();const Ep=eT(OD);function Cg(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Mw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MD=Mw,kw=new ba("auth","Firebase",Mw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Xh("@firebase/auth");function kD(i,...e){qh.logLevel<=He.WARN&&qh.warn(`Auth (${jo}): ${i}`,...e)}function wh(i,...e){qh.logLevel<=He.ERROR&&qh.error(`Auth (${jo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(i,...e){throw xg(i,...e)}function Bi(i,...e){return xg(i,...e)}function Vw(i,e,n){const s=Object.assign(Object.assign({},MD()),{[e]:n});return new ba("auth","Firebase",s).create(e,{appName:i.name})}function Ar(i){return Vw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return kw.create(i,...e)}function Ie(i,e,...n){if(!i)throw xg(e,...n)}function Tr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw wh(e),new Error(e)}function Dr(i,e){i||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function VD(){return CE()==="http:"||CE()==="https:"}function CE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VD()||lT()||"connection"in navigator)?navigator.onLine:!0}function LD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dr(n>e,"Short delay should be less than long delay!"),this.isMobile=u1()||d1()}get(){return PD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(i,e){Dr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zD=new ju(3e4,6e4);function Mr(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function kr(i,e,n,s,o={}){return Lw(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=Cu(Object.assign({key:i.config.apiKey},d)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return h1()||(g.referrerPolicy="no-referrer"),Pw.fetch()(await jw(i,i.config.apiHost,n,m),g)})}async function Lw(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},jD),e);try{const o=new qD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw mh(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw mh(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw mh(i,"user-disabled",d);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Vw(i,T,g);di(i,T)}}catch(o){if(o instanceof fi)throw o;di(i,"network-request-failed",{message:String(o)})}}async function Uu(i,e,n,s,o={}){const u=await kr(i,e,n,s,o);return"mfaPendingCredential"in u&&di(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function jw(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Ng(i.config,o):`${i.config.apiScheme}://${o}`;return UD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function BD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Bi(this.auth,"network-request-failed")),zD.get())})}}function mh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Bi(i,e,s);return o.customData._tokenResponse=n,o}function xE(i){return i!==void 0&&i.enterprise!==void 0}class HD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FD(i,e){return kr(i,"GET","/v2/recaptchaConfig",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(i,e){return kr(i,"POST","/v1/accounts:delete",e)}async function Hh(i,e){return kr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $D(i,e=!1){const n=St(i),s=await n.getIdToken(e),o=Dg(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:mu(Hm(o.auth_time)),issuedAtTime:mu(Hm(o.iat)),expirationTime:mu(Hm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Hm(i){return Number(i)*1e3}function Dg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{const o=rT(n);return o?JSON.parse(o):(wh("Failed to decode base64 JWT payload"),null)}catch(o){return wh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NE(i){const e=Dg(i);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fi&&KD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function KD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Ru(i,Hh(n,{idToken:s}));Ie(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Uw(u.providerUserInfo):[],m=WD(i.providerData,d),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),T=p?g:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new bp(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(i,w)}async function YD(i){const e=St(i);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Uw(i){return i.map(e=>{var{providerId:n}=e,s=Cg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(i,e){const n=await Lw(i,{},async()=>{const s=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await jw(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Pw.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZD(i,e){return kr(i,"POST","/v2/accounts:revokeToken",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await XD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Co;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Co,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(i,e){Ie(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Cg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new bp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Ru(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $D(this,e)}reload(){return YD(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await Ru(this,GD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,m,p,g,T;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,I=(o=n.email)!==null&&o!==void 0?o:void 0,O=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(d=n.photoURL)!==null&&d!==void 0?d:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,U=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,G=(g=n.createdAt)!==null&&g!==void 0?g:void 0,re=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:Z,emailVerified:he,isAnonymous:ue,providerData:we,stsTokenManager:V}=n;Ie(Z&&V,e,"internal-error");const S=Co.fromJSON(this.name,V);Ie(typeof Z=="string",e,"internal-error"),hs(w,e.name),hs(I,e.name),Ie(typeof he=="boolean",e,"internal-error"),Ie(typeof ue=="boolean",e,"internal-error"),hs(O,e.name),hs(M,e.name),hs(Q,e.name),hs(U,e.name),hs(G,e.name),hs(re,e.name);const A=new li({uid:Z,auth:e,email:I,emailVerified:he,displayName:w,isAnonymous:ue,photoURL:M,phoneNumber:O,tenantId:Q,stsTokenManager:S,createdAt:G,lastLoginAt:re});return we&&Array.isArray(we)&&(A.providerData=we.map(N=>Object.assign({},N))),U&&(A._redirectEventId=U),A}static async _fromIdTokenResponse(e,n,s=!1){const o=new Co;o.updateFromServerResponse(n);const u=new li({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Fh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Uw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Co;m.updateFromIdToken(s);const p=new li({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;function br(i){Dr(i instanceof Function,"Expected a class definition");let e=DE.get(i);return e?(Dr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,DE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zw.type="NONE";const OE=zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(i,e,n){return`firebase:${i}:${e}:${n}`}class xo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Sh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Sh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?li._fromGetAccountInfoResponse(this.auth,n,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new xo(br(OE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||br(OE);const d=Sh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const T=await g._get(d);if(T){let w;if(typeof T=="string"){const I=await Hh(e,{idToken:T}).catch(()=>{});if(!I)break;w=await li._fromGetAccountInfoResponse(e,I,T)}else w=li._fromJSON(e,T);g!==u&&(m=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new xo(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new xo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($w(e))return"Blackberry";if(Kw(e))return"Webos";if(qw(e))return"Safari";if((e.includes("chrome/")||Hw(e))&&!e.includes("edge/"))return"Chrome";if(Gw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Bw(i=cn()){return/firefox\//i.test(i)}function qw(i=cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hw(i=cn()){return/crios\//i.test(i)}function Fw(i=cn()){return/iemobile/i.test(i)}function Gw(i=cn()){return/android/i.test(i)}function $w(i=cn()){return/blackberry/i.test(i)}function Kw(i=cn()){return/webos/i.test(i)}function Og(i=cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function JD(i=cn()){var e;return Og(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e4(){return f1()&&document.documentMode===10}function Qw(i=cn()){return Og(i)||Gw(i)||Kw(i)||$w(i)||/windows phone/i.test(i)||Fw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(i,e=[]){let n;switch(i){case"Browser":n=ME(cn());break;case"Worker":n=`${ME(cn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(i,e={}){return kr(i,"GET","/v2/passwordPolicy",Mr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=6;class r4{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:i4,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new t4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),s=await li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Ar(this));const n=e?St(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n4(this),n=new r4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ba("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await ZD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&br(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ca(i){return St(i)}class kE{constructor(e){this.auth=e,this.observer=null,this.addObserver=E1(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a4(i){bd=i}function Ww(i){return bd.loadJS(i)}function o4(){return bd.recaptchaEnterpriseScript}function l4(){return bd.gapiScript}function u4(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class c4{constructor(){this.enterprise=new h4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class h4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const d4="recaptcha-enterprise",Xw="NO_RECAPTCHA";class f4{constructor(e){this.type=d4,this.auth=Ca(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{FD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new HD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;xE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(Xw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new c4().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&xE(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=o4();p.length!==0&&(p+=m),Ww(p).then(()=>{o(m,u,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function VE(i,e,n,s=!1,o=!1){const u=new f4(i);let d;if(o)d=Xw;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function wp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await VE(i,e,n,n==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await VE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(i,e){const n=wa(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ws(u,e??{}))return o;di(o,"already-initialized")}return n.initialize({options:e})}function p4(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(br);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function g4(i,e,n){const s=Ca(i);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Zw(e),{host:d,port:m}=y4(e),p=m===null?"":`:${m}`,g={url:`${u}//${d}${p}/`},T=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(ws(g,s.config.emulator)&&ws(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,v4()}function Zw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function y4(i){const e=Zw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:PE(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:PE(d)}}}function PE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function v4(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function _4(i,e){return kr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(i,e){return Uu(i,"POST","/v1/accounts:signInWithPassword",Mr(i,e))}async function T4(i,e){return kr(i,"POST","/v1/accounts:sendOobCode",Mr(i,e))}async function b4(i,e){return T4(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Mr(i,e))}async function S4(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Mg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Iu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Iu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",E4);case"emailLink":return w4(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,s,"signUpPassword",_4);case"emailLink":return S4(e,{idToken:n,email:this._email,oobCode:this._password});default:di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(i,e){return Uu(i,"POST","/v1/accounts:signInWithIdp",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="http://localhost";class Ea extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Cg(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new Ea(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,No(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:A4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function I4(i){const e=tu(nu(i)).link,n=e?tu(nu(e)).deep_link_id:null,s=tu(nu(i)).deep_link_id;return(s?tu(nu(s)).link:null)||s||n||e||i}class kg{constructor(e){var n,s,o,u,d,m;const p=tu(nu(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,T=(s=p.oobCode)!==null&&s!==void 0?s:null,w=R4((o=p.mode)!==null&&o!==void 0?o:null);Ie(g&&T&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=T,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=p.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=I4(e);try{return new kg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,n){return Iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=kg.parseLink(n);return Ie(s,"argument-error"),Iu._fromEmailAndCode(e,s.code,s.tenantId)}}$o.PROVIDER_ID="password";$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Jw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends zu{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ea._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ms.credential(n,s)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends zu{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.GITHUB_SIGN_IN_METHOD="github.com";ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends zu{constructor(){super("twitter.com")}static credential(e,n){return Ea._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return gs.credential(n,s)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(i,e){return Uu(i,"POST","/v1/accounts:signUp",Mr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await li._fromIdTokenResponse(e,s,o),d=LE(s);return new Ta({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=LE(s);return new Ta({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function LE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends fi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Gh(e,n,s,o)}}function eS(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(i,u,e,s):u})}async function x4(i,e,n=!1){const s=await Ru(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ta._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(i,e,n=!1){const{auth:s}=i;if(Xn(s.app))return Promise.reject(Ar(s));const o="reauthenticate";try{const u=await Ru(i,eS(s,o,e,i),n);Ie(u.idToken,s,"internal-error");const d=Dg(u.idToken);Ie(d,s,"internal-error");const{sub:m}=d;return Ie(i.uid===m,s,"user-mismatch"),Ta._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&di(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i,e,n=!1){if(Xn(i.app))return Promise.reject(Ar(i));const s="signIn",o=await eS(i,s,e),u=await Ta._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function D4(i,e){return tS(Ca(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(i){const e=Ca(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function O4(i,e,n){if(Xn(i.app))return Promise.reject(Ar(i));const s=Ca(i),d=await wp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",C4).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&nS(i),p}),m=await Ta._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function M4(i,e,n){return Xn(i.app)?Promise.reject(Ar(i)):D4(St(i),$o.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&nS(i),s})}async function iS(i,e){const n=St(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await b4(n.auth,o);u!==i.email&&await i.reload()}function k4(i,e,n,s){return St(i).onIdTokenChanged(e,n,s)}function V4(i,e,n){return St(i).beforeAuthStateChanged(e,n)}function P4(i,e,n,s){return St(i).onAuthStateChanged(e,n,s)}function L4(i){return St(i).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=1e3,U4=10;class sS extends rS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);e4()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,U4):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sS.type="LOCAL";const z4=sS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS extends rS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aS.type="SESSION";const oS=aS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new wd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async g=>g(n.origin,u)),p=await B4(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const g=Vg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function H4(i){qi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function F4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function G4(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function $4(){return lS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebaseLocalStorageDb",K4=1,Kh="firebaseLocalStorage",cS="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sd(i,e){return i.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function Q4(){const i=indexedDB.deleteDatabase(uS);return new Bu(i).toPromise()}function Sp(){const i=indexedDB.open(uS,K4);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Kh,{keyPath:cS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Kh)?e(s):(s.close(),await Q4(),e(await Sp()))})})}async function jE(i,e,n){const s=Sd(i,!0).put({[cS]:e,value:n});return new Bu(s).toPromise()}async function Y4(i,e){const n=Sd(i,!1).get(e),s=await new Bu(n).toPromise();return s===void 0?null:s.value}function UE(i,e){const n=Sd(i,!0).delete(e);return new Bu(n).toPromise()}const W4=800,X4=3;class hS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>X4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance($4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await F4(),!this.activeServiceWorker)return;this.sender=new q4(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||G4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sp();return await jE(e,$h,"1"),await UE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>jE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>Y4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>UE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Sd(o,!1).getAll();return new Bu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hS.type="LOCAL";const Z4=hS;new ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(i,e){return e?br(e):(Ie(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eO(i){return tS(i.auth,new Pg(i),i.bypassAuthState)}function tO(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),N4(n,new Pg(i),i.bypassAuthState)}async function nO(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),x4(n,new Pg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eO;case"linkViaPopup":case"linkViaRedirect":return nO;case"reauthViaPopup":case"reauthViaRedirect":return tO;default:di(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=new ju(2e3,1e4);class Ro extends dS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iO.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="pendingRedirect",Ah=new Map;class sO extends dS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ah.get(this.auth._key());if(!e){try{const s=await aO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ah.set(this.auth._key(),e)}return this.bypassAuthState||Ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aO(i,e){const n=uO(e),s=lO(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function oO(i,e){Ah.set(i._key(),e)}function lO(i){return br(i._redirectPersistence)}function uO(i){return Sh(rO,i.config.apiKey,i.name)}async function cO(i,e,n=!1){if(Xn(i.app))return Promise.reject(Ar(i));const s=Ca(i),o=J4(s,e),d=await new sO(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=10*60*1e3;class dO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!fS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Bi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hO&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(e))}saveEventToCache(e){this.cachedEventUids.add(zE(e)),this.lastProcessedEventTime=Date.now()}}function zE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function fS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fO(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(i,e={}){return kr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gO=/^https?/;async function yO(i){if(i.config.emulator)return;const{authorizedDomains:e}=await mO(i);for(const n of e)try{if(vO(n))return}catch{}di(i,"unauthorized-domain")}function vO(i){const e=Tp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!gO.test(n))return!1;if(pO.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new ju(3e4,6e4);function BE(){const i=qi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function EO(i){return new Promise((e,n)=>{var s,o,u;function d(){BE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BE(),n(Bi(i,"network-request-failed"))},timeout:_O.get()})}if(!((o=(s=qi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=qi().gapi)===null||u===void 0)&&u.load)d();else{const m=u4("iframefcb");return qi()[m]=()=>{gapi.load?d():n(Bi(i,"network-request-failed"))},Ww(`${l4()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function TO(i){return Rh=Rh||EO(i),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=new ju(5e3,15e3),wO="__/auth/iframe",SO="emulator/auth/iframe",AO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IO(i){const e=i.config;Ie(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ng(e,SO):`https://${i.config.authDomain}/${wO}`,s={apiKey:e.apiKey,appName:i.name,v:jo},o=RO.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Cu(s).slice(1)}`}async function CO(i){const e=await TO(i),n=qi().gapi;return Ie(n,i,"internal-error"),e.open({where:document.body,url:IO(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AO,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=Bi(i,"network-request-failed"),m=qi().setTimeout(()=>{u(d)},bO.get());function p(){qi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NO=500,DO=600,OO="_blank",MO="http://localhost";class qE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kO(i,e,n,s=NO,o=DO){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},xO),{width:s.toString(),height:o.toString(),top:u,left:d}),g=cn().toLowerCase();n&&(m=Hw(g)?OO:n),Bw(g)&&(e=e||MO,p.scrollbars="yes");const T=Object.entries(p).reduce((I,[O,M])=>`${I}${O}=${M},`,"");if(JD(g)&&m!=="_self")return VO(e||"",m),new qE(null);const w=window.open(e||"",m,T);Ie(w,i,"popup-blocked");try{w.focus()}catch{}return new qE(w)}function VO(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO="__/auth/handler",LO="emulator/auth/handler",jO=encodeURIComponent("fac");async function HE(i,e,n,s,o,u){Ie(i.config.authDomain,i,"auth-domain-config-required"),Ie(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:jo,eventId:o};if(e instanceof Jw){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",_1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,w]of Object.entries({}))d[T]=w}if(e instanceof zu){const T=e.getScopes().filter(w=>w!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await i._getAppCheckToken(),g=p?`#${jO}=${encodeURIComponent(p)}`:"";return`${UO(i)}?${Cu(m).slice(1)}${g}`}function UO({config:i}){return i.emulator?Ng(i,LO):`https://${i.authDomain}/${PO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="webStorageSupport";class zO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oS,this._completeRedirectFn=cO,this._overrideRedirectResult=oO}async _openPopup(e,n,s,o){var u;Dr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await HE(e,n,s,Tp(),o);return kO(e,d,Vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await HE(e,n,s,Tp(),o);return H4(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Dr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await CO(e),s=new dO(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fm,{type:Fm},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Fm];d!==void 0&&n(!!d),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qw()||qw()||Og()}}const BO=zO;var FE="@firebase/auth",GE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FO(i){Hi(new ui("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Ie(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yw(i)},g=new s4(s,o,u,p);return p4(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Hi(new ui("auth-internal",e=>{const n=Ca(e.getProvider("auth").getImmediate());return(s=>new qO(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(FE,GE,HO(i)),Zn(FE,GE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=5*60,$O=oT("authIdTokenMaxAge")||GO;let $E=null;const KO=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>$O)return;const o=n==null?void 0:n.token;$E!==o&&($E=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function QO(i=Ip()){const e=wa(i,"auth");if(e.isInitialized())return e.getImmediate();const n=m4(i,{popupRedirectResolver:BO,persistence:[Z4,z4,oS]}),s=oT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=KO(u.toString());V4(n,d,()=>d(n.currentUser)),k4(n,m=>d(m))}}const o=sT("auth");return o&&g4(n,`http://${o}`),n}function YO(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}a4({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Bi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",YO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FO("Browser");const mS=k.createContext();function $i(){return k.useContext(mS)}function WO({children:i}){const[e,n]=k.useState(null),[s,o]=k.useState(!0),u=QO(_g);k.useEffect(()=>P4(u,I=>{n(I),o(!1)}),[u]);const T={currentUser:e,loading:s,signup:(w,I)=>O4(u,w,I),login:(w,I)=>M4(u,w,I),logout:async()=>{await L4(u),n(null)},resendVerificationEmail:async()=>{e&&await iS(e)},emailVerified:(e==null?void 0:e.emailVerified)||!1};return _.jsx(mS.Provider,{value:T,children:!s&&i})}function XO(){const i=k.useRef(),e=k.useRef(),{login:n}=$i(),[s,o]=k.useState(""),[u,d]=k.useState(!1),m=Ia(),p=Gi();async function g(T){T.preventDefault(),o(""),d(!0);try{await n(i.current.value,e.current.value);const I=new URLSearchParams(p.search).get("redirect");I?m(I,{replace:!0}):m("/dashboard")}catch(w){o(w.message||"Failed to log in")}d(!1)}return _.jsx("div",{className:"auth-bg",children:_.jsxs("div",{className:"auth-container",children:[_.jsx("div",{className:"auth-logo-row",children:_.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),_.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),_.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&_.jsx("div",{className:"auth-error",children:s}),_.jsxs("form",{className:"auth-form",onSubmit:g,children:[_.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),_.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),_.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),_.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),_.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),_.jsx("div",{className:"auth-link-row",children:_.jsxs("span",{style:{color:"#fff"},children:["Don't have an account? ",_.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function ZO(){const i=k.useRef(),e=k.useRef(),n=k.useRef(),{signup:s}=$i(),[o,u]=k.useState(""),[d,m]=k.useState(!1),p=Ia();async function g(T){if(T.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{const w=await s(i.current.value,e.current.value);await iS(w.user),m(!1),p("/verify-email")}catch(w){u(w.message||"Failed to create an account")}m(!1)}return _.jsx("div",{className:"auth-bg",children:_.jsxs("div",{className:"auth-container",children:[_.jsx("div",{className:"auth-logo-row",children:_.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),_.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),_.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&_.jsx("div",{className:"auth-error",children:o}),_.jsxs("form",{className:"auth-form",onSubmit:g,children:[_.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),_.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),_.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),_.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),_.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),_.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),_.jsx("button",{disabled:d,type:"submit",className:"auth-btn",children:"Sign Up"})]}),_.jsx("div",{className:"auth-link-row",children:_.jsxs("span",{style:{color:"#fff"},children:["Already have an account? ",_.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function JO({children:i}){const{currentUser:e}=$i();return e?i:_.jsx(ds,{to:"/login"})}function eM({show:i}){const[e,n]=k.useState(!1),[s,o]=k.useState([]),[u,d]=k.useState(null),[m,p]=k.useState([]),[g,T]=k.useState(!1),[w,I]=k.useState(""),O=async()=>{if(!e&&i.tmdbId){T(!0),I("");try{const Q=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,G=await(await fetch(Q)).json();o(G.seasons||[]),G.seasons&&G.seasons.length>0&&d(G.seasons[0].season_number)}catch{I("Failed to load seasons.")}T(!1)}n(M=>!M)};return k.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){T(!0),I("");try{const U=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,re=await(await fetch(U)).json();p(re.episodes||[])}catch{I("Failed to load episodes.")}T(!1)}})()},[i.tmdbId,u]),_.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[_.jsx("button",{onClick:O,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":"▶ Show Episodes"}),e&&_.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?_.jsx("div",{children:"Loading..."}):w?_.jsx("div",{style:{color:"red"},children:w}):_.jsxs(_.Fragment,{children:[s.length>0&&_.jsxs("div",{style:{marginBottom:10},children:[_.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),_.jsx("select",{id:"season-select",value:u||"",onChange:M=>d(Number(M.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(M=>_.jsx("option",{value:M.season_number,children:M.name||`Season ${M.season_number}`},M.id||M.season_number))})]}),m.length>0?_.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(M=>_.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[_.jsxs("strong",{children:["Ep ",M.episode_number,":"]})," ",M.name," ",M.air_date?_.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",M.air_date,")"]}):""]},M.id||M.episode_number))}):_.jsx("div",{children:"No episodes found."})]})})]})}function tM({users:i,onSelectUser:e}){return _.jsxs("table",{className:"admin-user-table",children:[_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:"Email"}),_.jsx("th",{children:"Display Name"}),_.jsx("th",{children:"Status"}),_.jsx("th",{children:"Roles"}),_.jsx("th",{children:"Stats"}),_.jsx("th",{children:"Actions"})]})}),_.jsx("tbody",{children:i.map(n=>{var s,o;return _.jsxs("tr",{children:[_.jsx("td",{children:n.email}),_.jsx("td",{children:n.displayName}),_.jsx("td",{children:n.disabled?"Inactive":"Active"}),_.jsx("td",{children:n.roles?n.roles.join(", "):""}),_.jsxs("td",{children:["Diary: ",((s=n.stats)==null?void 0:s.diaryCount)||0,_.jsx("br",{}),"Comments: ",((o=n.stats)==null?void 0:o.commentCount)||0]}),_.jsx("td",{children:_.jsx("button",{onClick:()=>e(n),children:"Manage"})})]},n.uid)})})]})}function nM({user:i,onClose:e,onDisable:n,onEnable:s,onDelete:o,onSendMessage:u,diaryEntries:d,comments:m,onDeleteDiary:p,onDeleteComment:g}){var T,w;return i?_.jsx("div",{className:"admin-modal-bg",children:_.jsxs("div",{className:"admin-modal",style:{maxWidth:1200,width:"90vw",minWidth:320,padding:"2.2rem 2.5rem",borderRadius:18,background:"#fff",boxShadow:"0 4px 32px #205a7a22",margin:"0 auto"},children:[_.jsx("button",{className:"close-btn",onClick:e,style:{position:"absolute",top:18,right:24,fontSize:28,color:"#205a7a",background:"none",border:"none",cursor:"pointer"},children:"×"}),_.jsxs("h2",{style:{color:"#205a7a",fontWeight:900,fontSize:"2rem",marginBottom:12},children:["User: ",_.jsx("span",{style:{color:"#25609c"},children:i.displayName||i.email})]}),_.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,flexWrap:"wrap"},children:[_.jsxs("div",{children:["Status: ",_.jsx("b",{style:{color:i.disabled?"#d32f2f":"#35b36b"},children:i.disabled?"Inactive":"Active"})]}),_.jsxs("div",{children:["Roles: ",_.jsx("span",{style:{color:"#25609c"},children:i.roles?i.roles.join(", "):"-"})]}),_.jsxs("div",{children:["Email: ",_.jsx("span",{style:{color:"#333"},children:i.email})]}),_.jsxs("div",{children:["Stats: ",_.jsxs("span",{style:{color:"#25609c"},children:["Diary ",((T=i.stats)==null?void 0:T.diaryCount)||0,", Comments ",((w=i.stats)==null?void 0:w.commentCount)||0]})]})]}),_.jsxs("div",{style:{margin:"1.2em 0",display:"flex",gap:12,flexWrap:"wrap"},children:[i.disabled?_.jsx("button",{onClick:()=>s(i.uid),style:{background:"#35b36b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Enable"}):_.jsx("button",{onClick:()=>n(i.uid),style:{background:"#ffe066",color:"#205a7a",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Disable"}),_.jsx("button",{onClick:()=>o(i.uid),style:{background:"#ff6b6b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Delete"}),_.jsx("button",{onClick:()=>u(i.uid),style:{background:"#25609c",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Message"})]}),_.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:24,marginBottom:12,fontSize:"1.2rem"},children:"Diary Entries"}),_.jsx("div",{style:{maxHeight:180,overflowY:"auto",marginBottom:18,background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:d.length===0?_.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No diary entries."}):_.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:d.map(I=>_.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[_.jsx("span",{style:{fontWeight:600,color:"#205a7a"},children:I.title}),_.jsx("button",{onClick:()=>p(I.docId),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.docId))})}),_.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:18,marginBottom:10,fontSize:"1.2rem"},children:"Comments"}),_.jsx("div",{style:{maxHeight:140,overflowY:"auto",background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:m.length===0?_.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No comments."}):_.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:m.map(I=>_.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[_.jsxs("span",{style:{color:"#333",fontWeight:500,maxWidth:290,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[I.text,I.entryTitle&&_.jsxs("span",{style:{color:"#25609c",fontWeight:400,marginLeft:10,fontSize:13},children:["[on: ",I.entryTitle,"]"]})]}),_.jsx("button",{onClick:()=>g(I.id),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.id))})})]})}):null}function iM({onSend:i,onClose:e}){const[n,s]=k.useState("");return _.jsx("div",{className:"admin-modal-bg",children:_.jsxs("div",{className:"admin-modal",children:[_.jsx("button",{className:"close-btn",onClick:e,children:"×"}),_.jsx("h2",{children:"Send Message to All Users"}),_.jsx("textarea",{value:n,onChange:o=>s(o.target.value),rows:6,style:{width:"100%"}}),_.jsx("button",{onClick:()=>i(n),style:{marginTop:12},children:"Send"})]})})}function rM(){async function i(){try{const e=await wn(gn(Ve,"users"));console.log("User docs:",e.docs.map(n=>n.data()))}catch(e){console.error("Direct test error:",e)}}return _.jsx("button",{onClick:i,style:{marginBottom:12},children:"Test Firestore Read"})}async function sM(i){const n=(await wn(gn(Ve,"users"))).docs.map(s=>pp(gn(Ve,`users/${s.id}/notifications`),{...i,read:!1,createdAt:gp()}));await Promise.all(n)}function aM(){const[i,e]=k.useState(""),[n,s]=k.useState(""),[o,u]=k.useState("info"),[d,m]=k.useState(!1),[p,g]=k.useState(""),[T,w]=k.useState("");async function I(O){O.preventDefault(),m(!0),w(""),g("");try{await sM({title:i,message:n,type:o}),g("Notification sent to all users!"),e(""),s("")}catch{w("Failed to send notification.")}m(!1)}return _.jsxs("form",{className:"admin-notification-form",onSubmit:I,style:{marginBottom:"2rem"},children:[_.jsx("h3",{children:"Send Notification to All Users"}),_.jsx("input",{value:i,onChange:O=>e(O.target.value),placeholder:"Title",required:!0}),_.jsx("textarea",{value:n,onChange:O=>s(O.target.value),placeholder:"Message",required:!0}),_.jsxs("select",{value:o,onChange:O=>u(O.target.value),children:[_.jsx("option",{value:"info",children:"Info"}),_.jsx("option",{value:"warning",children:"Warning"}),_.jsx("option",{value:"error",children:"Error"})]}),_.jsx("button",{type:"submit",disabled:d,children:d?"Sending...":"Send Notification"}),p&&_.jsx("div",{style:{color:"green",marginTop:8},children:p}),T&&_.jsx("div",{style:{color:"red",marginTop:8},children:T})]})}function oM(){const{currentUser:i}=$i(),[e,n]=k.useState([]),[s,o]=k.useState(null),[u,d]=k.useState([]),[m,p]=k.useState([]),[g,T]=k.useState(!0),[w,I]=k.useState(""),[O,M]=k.useState(!1);k.useEffect(()=>{async function S(){T(!0),I("");try{console.log("Fetching users...");const A=await wn(gn(Ve,"users"));console.log("Fetched users:",A.size),console.log("Fetching diary...");const N=await wn(gn(Ve,"diary"));console.log("Fetched diary:",N.size),console.log("Fetching comments...");const x=await wn(Lm(Ve,"comments"));console.log("Fetched comments:",x.size);const P={},C={};N.docs.forEach(Ne=>{const Oe=Ne.data().uid;P[Oe]=(P[Oe]||0)+1}),x.docs.forEach(Ne=>{const Oe=Ne.data().authorUid;C[Oe]=(C[Oe]||0)+1}),n(A.docs.map(Ne=>({uid:Ne.id,...Ne.data(),stats:{diaryCount:P[Ne.id]||0,commentCount:C[Ne.id]||0}})))}catch(A){console.error("AdminDashboard Firestore error:",A),I("Failed to load users.")}T(!1)}S()},[]);async function Q(S){console.log("Fetching diary entries for user...");const A=await wn(gn(Ve,"diary"));console.log("Fetched diary entries:",A.size);const N=A.docs.filter(C=>C.data().uid===S.uid).map(C=>({docId:C.id,...C.data()}));d(N),console.log("Fetching comments for user...");const x=await wn(Lm(Ve,"comments"));console.log("Fetched comments:",x.size);const P=x.docs.filter(C=>C.data().authorUid===S.uid).map(C=>{const Oe=C.ref.path.split("/")[1],W=A.docs.find(Le=>String(Le.data().id)===Oe),oe=W&&(W.data().title||W.data().desc)||"",ye={id:C.id,entryId:Oe,entryTitle:oe,...C.data()};return console.log("AdminDashboard userComment:",ye),ye});p(P),o(S)}async function U(S){await pa(vt(Ve,"users",S),{disabled:!0}),n(e.map(A=>A.uid===S?{...A,disabled:!0}:A)),o(A=>A&&A.uid===S?{...A,disabled:!0}:A)}async function G(S){await pa(vt(Ve,"users",S),{disabled:!1}),n(e.map(A=>A.uid===S?{...A,disabled:!1}:A)),o(A=>A&&A.uid===S?{...A,disabled:!1}:A)}async function re(S){await du(vt(Ve,"users",S)),n(e.filter(A=>A.uid!==S)),o(null)}async function Z(S){if(!S||typeof S!="string"){I("Cannot delete diary entry: invalid id.");return}await du(vt(Ve,"diary",S)),d(u.filter(A=>A.docId!==S)),await ue()}async function he(S){const A=m.find(x=>x.id===S);if(!A)return;const N=A.entryId||A.entry_id||A.diaryId||A.parentEntryId;if(!N){I("Cannot delete: missing entryId for comment.");return}await du(vt(Ve,`discussions/${N}/comments`,S)),p(m.filter(x=>x.id!==S)),await ue()}async function ue(){console.log("Refreshing user stats...");const S=await wn(gn(Ve,"diary"));console.log("Fetched diary:",S.size);const A=await wn(Lm(Ve,"comments"));console.log("Fetched comments:",A.size);const N={},x={};S.docs.forEach(P=>{const C=P.data().uid;N[C]=(N[C]||0)+1}),A.docs.forEach(P=>{const C=P.data().authorUid;x[C]=(x[C]||0)+1}),n(P=>P.map(C=>({...C,stats:{diaryCount:N[C.uid]||0,commentCount:x[C.uid]||0}})))}async function we(S){await wn(gn(Ve,"users")).then(A=>{A.forEach(N=>{pa(vt(Ve,"users",N.id),{lastAdminMessage:S})})}),M(!1),alert("Message sent to all users!")}function V(S){M(!0)}return _.jsxs("div",{className:"admin-dashboard-container",children:[_.jsx("h2",{className:"admin-dashboard-title",children:"Admin Dashboard"}),_.jsx(aM,{}),_.jsx(rM,{}),_.jsx("div",{className:"admin-dashboard-actions",children:_.jsx("button",{className:"admin-dashboard-message-btn",onClick:()=>M(!0),children:"Message All Users"})}),w&&_.jsx("div",{className:"admin-dashboard-error",children:w}),g?_.jsx("div",{className:"admin-dashboard-loading",children:"Loading users..."}):_.jsx(tM,{users:e,onSelectUser:Q}),s&&_.jsx(nM,{user:s,diaryEntries:u,comments:m,onClose:()=>o(null),onDelete:re,onDisable:U,onEnable:G,onSendMessage:V,onDeleteDiary:Z,onDeleteComment:he}),O&&_.jsx(iM,{onSend:we,onClose:()=>M(!1)})]})}const lM=[{icon:_.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:_.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:_.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:_.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:_.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:_.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:_.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:_.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],uM=[{icon:_.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:_.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:_.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],cM="https://image.tmdb.org/t/p/w500";function hM(){const{currentUser:i}=$i(),[e,n]=k.useState([]),[s,o]=k.useState(!0),[u,d]=k.useState("");return k.useEffect(()=>{async function m(){o(!0),d("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{d("Could not load trending movies.")}o(!1)}m()},[]),i?_.jsx(ds,{to:"/dashboard"}):_.jsx("div",{className:"sw-bg",children:_.jsxs("div",{className:"sw-container",children:[_.jsxs("div",{className:"sw-header-box sw-header-custom",children:[_.jsx("div",{className:"sw-logo-row",children:_.jsx("div",{className:"sw-header-logo-bg",children:_.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),_.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),_.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover What’s Next."}),_.jsx(Ig,{to:"/login",children:_.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),_.jsxs("div",{className:"sw-section",children:[_.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),_.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:lM.map((m,p)=>_.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[_.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),_.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),_.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),_.jsxs("div",{className:"sw-section",children:[_.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),_.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:uM.map((m,p)=>_.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[_.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),_.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),_.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),_.jsxs("div",{className:"sw-section",children:[_.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),_.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?_.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?_.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?_.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>_.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[_.jsx("img",{src:m.poster_path?`${cM}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),_.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),_.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function dM({entryId:i}){console.log("entryId:",i);const{currentUser:e}=$i(),[n,s]=k.useState([]),[o,u]=k.useState(!0),[d,m]=k.useState(""),[p,g]=k.useState(null),[T,w]=k.useState(""),[I,O]=k.useState({}),[M,Q]=k.useState(!0),U=k.useRef(null);async function G(S){if(!S)return"Anonymous";try{const A=await vs(vt(Ve,"users",S.uid));if(A&&A.exists())return A.data().displayName||S.displayName||(S.email?S.email.split("@")[0]:S.uid)}catch{}return S.displayName||(S.email?S.email.split("@")[0]:S.uid)}k.useEffect(()=>{const S=au(gn(Ve,`discussions/${i}/comments`),Gb("timestamp","asc")),A=BC(S,N=>{const x=N.docs.map(P=>({id:P.id,...P.data(),votes:P.data().votes||{}}));if(console.log("Fetched comments:",x),s(x),e){const P={};x.forEach(C=>{C.votes&&C.votes[e.uid]&&(P[C.id]=C.votes[e.uid])}),O(P)}u(!1)});return()=>A()},[i,e]);const re=async S=>{if(S.preventDefault(),!d.trim())return;const A=await G(e);await pp(gn(Ve,`discussions/${i}/comments`),{text:d,author:A,authorUid:e?e.uid:null,timestamp:gp(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),U.current&&U.current.focus()},Z=async S=>{if(!T.trim())return;const A=await G(e);await pp(gn(Ve,`discussions/${i}/comments`),{text:T,author:A,authorUid:e?e.uid:null,timestamp:gp(),parentId:S,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),w("")},he=async(S,A)=>{if(!e)return;const N=vt(Ve,`discussions/${i}/comments`,S),x=n.find(Ne=>Ne.id===S);if(!x)return;const P=x.votes?x.votes[e.uid]:void 0;let C={};A==="up"?C={upvotes:Eo(P==="up"?0:1),...P==="down"?{downvotes:Eo(-1)}:{},[`votes.${e.uid}`]:"up"}:A==="down"&&(C={downvotes:Eo(P==="down"?0:1),...P==="up"?{upvotes:Eo(-1)}:{},[`votes.${e.uid}`]:"down"}),O(Ne=>({...Ne,[S]:A})),await pa(N,C)},ue=async S=>{if(!e)return;const A=n.find(x=>x.id===S);if(!A||A.authorUid!==e.uid)return;const N=async x=>{const P=n.filter(Ne=>Ne.parentId===x);for(const Ne of P)Ne.authorUid===e.uid&&await N(Ne.id);const C=n.find(Ne=>Ne.id===x);C&&C.authorUid===e.uid&&await du(vt(Ve,`discussions/${i}/comments`,x))};await N(S)};function we({commentId:S,level:A,childrenCount:N,render:x,showCount:P=1}){const[C,Ne]=k.useState(!1),Oe=x(S,A+1);return!Oe||Oe.length===0?null:C?_.jsxs("div",{children:[Oe,N>P&&_.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ne(!1),children:"Hide Replies"})]}):_.jsxs("div",{children:[Oe.slice(0,P),N>P&&_.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ne(!0),children:["View ",N-P+1," more repl",N-P+1===1?"y":"ies"]})]})}const V=(S=null,A=0)=>n.filter(x=>x.parentId===S).map(x=>{var C,Ne,Oe,W;const P=n.filter(oe=>oe.parentId===x.id);return _.jsxs("div",{className:`discussion-comment${A>0?" discussion-reply":""}`,style:{marginLeft:A*18},children:[_.jsxs("div",{className:"discussion-header",children:[_.jsx("span",{className:"discussion-author",children:x.author}),_.jsx("span",{className:"discussion-date",children:((W=(Ne=(C=x.timestamp)==null?void 0:C.toDate)==null?void 0:(Oe=Ne.call(C)).toLocaleString)==null?void 0:W.call(Oe))||""})]}),_.jsx("div",{className:"discussion-body",children:x.text}),_.jsxs("div",{className:"discussion-actions",children:[_.jsxs("button",{className:`discussion-vote${I[x.id]==="up"?" voted":""}`,onClick:()=>he(x.id,"up"),title:"Thumbs up",disabled:I[x.id]==="up",children:["👍 ",x.upvotes||0]}),_.jsxs("button",{className:`discussion-vote${I[x.id]==="down"?" voted":""}`,onClick:()=>he(x.id,"down"),title:"Thumbs down",disabled:I[x.id]==="down",children:["👎 ",x.downvotes||0]}),_.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(x.id),children:"Reply"}),x.authorUid===(e==null?void 0:e.uid)&&_.jsx("button",{className:"discussion-delete-btn",onClick:()=>ue(x.id),title:"Delete",children:"🗑️"})]}),p===x.id&&_.jsxs("div",{className:"discussion-reply-form",children:[_.jsx("input",{type:"text",value:T,onChange:oe=>w(oe.target.value),placeholder:"Write a reply...",autoFocus:!0}),_.jsx("button",{onClick:()=>Z(x.id),children:"Send"}),_.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),_.jsx(we,{commentId:x.id,level:A,childrenCount:P.length,render:V,showCount:1})]},x.id)});return _.jsxs("div",{className:"discussion-section",children:[_.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Q(S=>!S),style:{marginBottom:M?0:10},children:M?"Show Discussion":"Hide Discussion"}),!M&&_.jsxs(_.Fragment,{children:[_.jsx("h4",{children:"Discussion"}),_.jsxs("form",{onSubmit:re,className:"discussion-form",children:[_.jsx("input",{type:"text",ref:U,value:d,onChange:S=>m(S.target.value),placeholder:"Add a comment..."}),_.jsx("button",{type:"submit",children:"Send"})]}),_.jsx("div",{className:"discussion-comments",children:o?_.jsx("div",{children:"Loading..."}):V()})]})]})}var pS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KE=ma.createContext&&ma.createContext(pS),fM=["attr","size","title"];function mM(i,e){if(i==null)return{};var n=pM(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function pM(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Qh(){return Qh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Qh.apply(this,arguments)}function QE(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Yh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QE(Object(n),!0).forEach(function(s){gM(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function gM(i,e,n){return e=yM(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function yM(i){var e=vM(i,"string");return typeof e=="symbol"?e:e+""}function vM(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function gS(i){return i&&i.map((e,n)=>ma.createElement(e.tag,Yh({key:n},e.attr),gS(e.child)))}function Rn(i){return e=>ma.createElement(_M,Qh({attr:Yh({},i.attr)},e),gS(i.child))}function _M(i){var e=n=>{var{attr:s,size:o,title:u}=i,d=mM(i,fM),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),ma.createElement("svg",Qh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,d,{className:p,style:Yh(Yh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&ma.createElement("title",null,u),i.children)};return KE!==void 0?ma.createElement(KE.Consumer,null,n=>e(n)):e(pS)}function EM(i){return Rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"},child:[]}]})(i)}function TM(i){return Rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(i)}function bM(i){return Rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function YE(i){return Rn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function wM(i){return Rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(i)}function WE(i){return Rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function SM(i){return Rn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(i)}function AM(i){return Rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(i)}function RM(i){return Rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(i)}function IM(i){return Rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(i)}function XE(i){return Rn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(i)}function CM(i){return Rn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function xM(i){return Rn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"},child:[]}]})(i)}function NM(i){return Rn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(i)}function DM(){return _.jsxs("div",{style:{textAlign:"center",margin:"2rem 0"},children:[_.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block"},children:_.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/stacked-blue-5c3c7c3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c.svg",alt:"TMDb Logo",style:{height:48,marginBottom:8}})}),_.jsxs("div",{style:{fontSize:"0.95rem",color:"#888"},children:["This product uses the"," ",_.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb API"})," ","but is not endorsed or certified by TMDb."]})]})}function OM({notification:i,onDismiss:e}){const{title:n,message:s,type:o="info"}=i;let u=_.jsx(AM,{color:"#25609c",size:22});return o==="warning"&&(u=_.jsx(SM,{color:"#f59e42",size:22})),o==="error"&&(u=_.jsx(XE,{color:"#dc2626",size:22})),_.jsxs("div",{className:`notification-banner notification-${o}`,children:[_.jsx("span",{className:"notification-icon",children:u}),_.jsxs("div",{className:"notification-content",children:[_.jsx("strong",{children:n}),_.jsx("div",{children:s})]}),_.jsx("button",{className:"notification-dismiss",onClick:e,title:"Dismiss notification",children:_.jsx(XE,{size:20})})]})}const To="ca9a91468bb700f84faf986252bc3fe6",eu="https://api.themoviedb.org/3",Gm="US";function yS({entry:i,providersMap:e,onClose:n,onShare:s,onToggleWatched:o,onRemove:u,onArchiveToggle:d,diary:m,contentRating:p,readOnly:g=!1,onAddToDiary:T,sharedHeader:w}){if(!i)return null;const I=e[i.id]||{},O=I.flatrate||[],M=I.rent||[],Q=I.buy||[],U=i;return Ep.createPortal(_.jsx("div",{className:"dashboard-modal-overlay",onClick:n,children:_.jsxs("div",{className:"dashboard-modal-content",onClick:G=>G.stopPropagation(),style:{background:"#23242a"},children:[_.jsx("button",{className:"dashboard-modal-close",onClick:n,"aria-label":"Close modal",type:"button",children:"×"}),_.jsxs("div",{className:"dashboard-modal-body",children:[w,_.jsx("img",{className:"dashboard-diary-poster",src:U.poster_path?`https://image.tmdb.org/t/p/w300${U.poster_path}`:U.poster||"https://placehold.co/120x170?text=No+Image",alt:U.title,style:{marginBottom:"1rem"}}),_.jsx("div",{className:"dashboard-diary-movie-title",children:U.title}),_.jsxs("div",{className:"dashboard-diary-date",children:[U.release_date?U.release_date.slice(0,4):U.date||"",p&&_.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:p})]}),_.jsx("div",{className:"dashboard-diary-desc",children:U.overview||U.desc||""}),_.jsxs("div",{className:"dashboard-diary-providers-modal",children:[_.jsxs("div",{className:"dashboard-diary-providers-group",children:[_.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),_.jsx("div",{className:"dashboard-diary-providers-icons",children:O.length===0?_.jsx("span",{style:{color:"#888"},children:"N/A"}):O.map(G=>_.jsx("img",{src:`https://image.tmdb.org/t/p/w45${G.logo_path}`,alt:G.provider_name,title:G.provider_name,className:"dashboard-provider-icon-sm"},G.provider_id))})]}),_.jsxs("div",{className:"dashboard-diary-providers-group",children:[_.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),_.jsx("div",{className:"dashboard-diary-providers-icons",children:M.length===0?_.jsx("span",{style:{color:"#888"},children:"N/A"}):M.map(G=>_.jsx("img",{src:`https://image.tmdb.org/t/p/w45${G.logo_path}`,alt:G.provider_name,title:G.provider_name,className:"dashboard-provider-icon-sm"},G.provider_id))})]}),_.jsxs("div",{className:"dashboard-diary-providers-group",children:[_.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),_.jsx("div",{className:"dashboard-diary-providers-icons",children:Q.length===0?_.jsx("span",{style:{color:"#888"},children:"N/A"}):Q.map(G=>_.jsx("img",{src:`https://image.tmdb.org/t/p/w45${G.logo_path}`,alt:G.provider_name,title:G.provider_name,className:"dashboard-provider-icon-sm"},G.provider_id))})]})]}),i.media_type==="tv"&&(i.tmdbId||i.id)&&_.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:_.jsx(eM,{show:{...i,tmdbId:i.tmdbId||i.id}})}),!g&&_.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[_.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),_.jsx(dM,{entryId:U.id})]}),_.jsx("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:g?_.jsx("button",{className:"dashboard-diary-add",style:{background:"#25609c",color:"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:T,children:"ADD TO MY DIARY"}):_.jsxs(_.Fragment,{children:[_.jsx("button",{className:"dashboard-diary-share",onClick:()=>s(U),title:"Share this diary entry with friends via link or social media",children:"SHARE"}),_.jsx("button",{className:U.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>o(U.docId,U.watched),title:U.watched?"Mark as not watched":"Mark as watched",children:U.watched?"WATCHED":"UNWATCHED"}),_.jsx("button",{className:"dashboard-diary-archive",style:{background:i.archived?"#b2b2b2":"#25609c",color:i.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>d(i.docId,i.archived),title:i.archived?"Move this entry back to active diary":"Archive this entry (hide from main diary)",children:i.archived?"Unarchive":"Archive"}),_.jsx("button",{className:"dashboard-diary-remove",onClick:()=>u(U.docId),title:"Remove this diary entry permanently",children:"REMOVE"})]})})]})]})}),document.getElementById("modal-root"))}function MM(){const{currentUser:i,logout:e}=$i(),n=Ia(),[s,o]=k.useState("movie"),[u,d]=k.useState(""),[m,p]=k.useState([]),[g,T]=k.useState(!1),[w,I]=k.useState(""),[O,M]=k.useState([]),[Q,U]=k.useState({}),G=k.useRef(null),re=k.useRef(""),[Z,he]=k.useState(null),[ue,we]=k.useState(""),V=k.useRef({}),[S,A]=k.useState(!1),[N,x]=k.useState(null),[P,C]=k.useState(!1),[Ne,Oe]=k.useState(""),[W,oe]=k.useState(!1),[ye,Le]=k.useState(""),[L,ie]=k.useState(!1),[ce,se]=k.useState(""),[pe,Pe]=k.useState("movie"),[Se,Et]=k.useState([]),[rt,vn]=k.useState(!0),[ei,In]=k.useState(""),[gi,yi]=k.useState(1),[Ki,Os]=k.useState(!1);k.useEffect(()=>{async function B(){if(!i)return;const ae=await vs(vt(Ve,"users",i.uid));if(ae.exists()){const me=ae.data();Os(Array.isArray(me.roles)&&me.roles.includes("admin"))}}B()},[i]),k.useEffect(()=>{Et([]),yi(1),vn(!0),In("")},[pe]),k.useEffect(()=>{let B=!0;async function ae(me=1){vn(!0),In("");try{const _e=await fetch(`https://api.themoviedb.org/3/trending/${pe}/week?api_key=${To}&page=${me}`);if(!_e.ok)throw new Error("Failed to fetch trending");const Ee=await _e.json();B&&Et(me===1?Ee.results:ve=>{const Ge=new Set(ve.map(We=>We.id));return[...ve,...Ee.results.filter(We=>!Ge.has(We.id))]})}catch{B&&In("Could not load trending.")}B&&vn(!1)}return ae(gi),()=>{B=!1}},[pe,gi]),k.useEffect(()=>{Se.filter(ae=>!O.some(me=>me.id===ae.id&&me.media_type===pe)).length<12&&Se.length<100&&yi(ae=>ae+1)},[Se,O,pe]),k.useEffect(()=>{if(!i)return;async function B(){const ae=au(gn(Ve,"diary"),dh("uid","==",i.uid));let _e=(await wn(ae)).docs.map(Ee=>({...Ee.data(),docId:Ee.id}));_e=_e.sort((Ee,ve)=>new Date(ve.createdAt)-new Date(Ee.createdAt)),M(_e);for(const Ee of _e)Ms(Ee)}B()},[i]),k.useEffect(()=>{if(!i){Oe(""),Le("");return}let B=!1;async function ae(){const me=await vs(vt(Ve,"users",i.uid));let _e="";me.exists()?_e=me.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):_e=i.displayName||(i.email?i.email.split("@")[0]:i.uid),B||(Oe(_e),Le(_e))}return ae(),()=>{B=!0}},[i&&i.uid]);async function Ms(B){var me,_e,Ee,ve;if(Q[B.id])return;const ae=vt(Ve,"tmdbProvidersCache",`${B.media_type}_${B.id}`);try{const Ge=await vs(ae),We=Date.now();if(Ge.exists()){const ct=Ge.data();if(ct.providers&&(ct.providers.flatrate=Array.isArray(ct.providers.flatrate)?ct.providers.flatrate:[],ct.providers.rent=Array.isArray(ct.providers.rent)?ct.providers.rent:[],ct.providers.buy=Array.isArray(ct.providers.buy)?ct.providers.buy:[]),ct.timestamp&&We-ct.timestamp<24*60*60*1e3){U(bi=>({...bi,[B.id]:ct.providers}));return}}let Tt="";B.media_type==="movie"?Tt=`${eu}/movie/${B.id}/watch/providers?api_key=${To}`:Tt=`${eu}/tv/${B.id}/watch/providers?api_key=${To}`;const nn=await fetch(Tt);if(nn.status===404){U(ct=>({...ct,[B.id]:{}})),await da(ae,{providers:{},timestamp:We});return}const Wi=await nn.json(),ut=((me=Wi.results)==null?void 0:me[Gm])||((_e=Wi.results)==null?void 0:_e[0]),Wo=(ve=(Ee=ut==null?void 0:ut.release_dates)==null?void 0:Ee.find(ct=>ct.certification))==null?void 0:ve.certification;ut.flatrate=Array.isArray(ut.flatrate)?ut.flatrate:[],ut.rent=Array.isArray(ut.rent)?ut.rent:[],ut.buy=Array.isArray(ut.buy)?ut.buy:[],U(ct=>({...ct,[B.id]:ut})),await da(ae,{providers:ut,timestamp:We})}catch{U(We=>({...We,[B.id]:{}}))}}async function hn(B,ae){if(!B.trim()){p([]),I(""),T(!1);return}T(!0),I(""),p([]);try{const _e=`${eu}${ae==="movie"?"/search/movie":"/search/tv"}?api_key=${To}&query=${encodeURIComponent(B)}`,ve=await(await fetch(_e)).json();ve.results?p(ve.results):(p([]),I("No results found."))}catch{I("Failed to fetch results.")}T(!1)}k.useEffect(()=>{if(!(u.trim()===""||u===re.current))return G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{hn(u,s)},400),()=>clearTimeout(G.current)},[u,s]);async function Ko(B){B.preventDefault(),re.current=u,await hn(u,s)}async function Qi(B){if(!i)return;if(O.some(ve=>ve.id===B.id&&ve.media_type===(B.media_type||s))){alert("This entry is already in your diary!");return}const ae={uid:i.uid,id:B.id,title:B.title||B.name,date:(B.release_date||B.first_air_date||"").slice(0,10),poster:B.poster_path?`https://image.tmdb.org/t/p/w200${B.poster_path}`:"https://placehold.co/120x170?text=No+Image",desc:B.overview||"No description.",watched:!1,archived:!1,media_type:B.media_type||s,createdAt:new Date().toISOString()};await da(vt(Ve,"diary",`${i.uid}_${ae.id}`),ae);const me=au(gn(Ve,"diary"),dh("uid","==",i.uid));let Ee=(await wn(me)).docs.map(ve=>({...ve.data(),docId:ve.id}));Ee=Ee.sort((ve,Ge)=>new Date(Ge.createdAt)-new Date(ve.createdAt)),M(Ee),Ms(ae),p([]),d("")}async function Vr(B){M(ae=>ae.filter(me=>me.docId!==B)),he(null);try{await du(vt(Ve,"diary",B));const ae=au(gn(Ve,"diary"),dh("uid","==",i.uid));let _e=(await wn(ae)).docs.map(Ee=>({...Ee.data(),docId:Ee.id}));_e=_e.sort((Ee,ve)=>new Date(ve.createdAt)-new Date(Ee.createdAt)),M(_e)}catch{window.alert("Failed to remove entry. Please try again.")}}async function Yi(B,ae){const me=!ae,_e=me;M(Ee=>Ee.map(ve=>ve.docId===B?{...ve,watched:me,archived:_e}:ve)),he(Ee=>Ee&&Ee.docId===B?{...Ee,watched:me,archived:_e}:Ee);try{await pa(vt(Ve,"diary",B),{watched:me,archived:_e})}catch{M(ve=>ve.map(Ge=>Ge.docId===B?{...Ge,watched:ae,archived:ae}:Ge)),he(ve=>ve&&ve.docId===B?{...ve,watched:ae,archived:ae}:ve),window.alert("Failed to update watched status. Please try again.")}}async function Qo(B,ae){M(me=>me.map(_e=>_e.docId===B?{..._e,archived:!ae}:_e)),he(me=>me&&me.docId===B?{...me,archived:!ae}:me);try{await pa(vt(Ve,"diary",B),{archived:!ae})}catch{M(_e=>_e.map(Ee=>Ee.docId===B?{...Ee,archived:ae}:Ee)),he(_e=>_e&&_e.docId===B?{..._e,archived:ae}:_e),window.alert("Failed to update archive status. Please try again.")}}function Pr(B){const me=`${window.location.origin}/showswatched2/share/diary/${B.docId}`,_e={title:B.title,text:B.desc||"",url:me};navigator.share?navigator.share(_e).catch(()=>{navigator.clipboard.writeText(me),alert("Share link copied to clipboard!")}):(navigator.clipboard.writeText(me),alert("Share link copied to clipboard!"))}async function ks(){if(!ye.trim()){se("Display name cannot be empty.");return}ie(!0),se("");try{await da(vt(Ve,"users",i.uid),{displayName:ye.trim()},{merge:!0}),Oe(ye.trim()),oe(!1);const B=await vs(vt(Ve,"users",i.uid));if(B.exists()){const ae=B.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);Oe(ae),Le(ae)}}catch{se("Failed to update display name.")}ie(!1)}function xa(){Le(Ne),oe(!0),se("")}function mt(){oe(!1),se("")}async function Ze(B){var ae,me,_e,Ee,ve,Ge;if(!B)return"";try{if(B.media_type==="movie"){const Tt=await(await fetch(`${eu}/movie/${B.id}/release_dates?api_key=${To}`)).json(),nn=((ae=Tt.results)==null?void 0:ae.find(ut=>ut.iso_3166_1===Gm))||((me=Tt.results)==null?void 0:me[0]);return((Ee=(_e=nn==null?void 0:nn.release_dates)==null?void 0:_e.find(ut=>ut.certification))==null?void 0:Ee.certification)||""}else if(B.media_type==="tv"){const Tt=await(await fetch(`${eu}/tv/${B.id}/content_ratings?api_key=${To}`)).json(),nn=((ve=Tt.results)==null?void 0:ve.find(Wi=>Wi.iso_3166_1===Gm))||((Ge=Tt.results)==null?void 0:Ge[0]);return(nn==null?void 0:nn.rating)||""}}catch{return""}return""}function Kt(B){he(B),we(""),Ze(B).then(ae=>we(ae||""))}function zt(){const B={};return O.filter(ae=>ae.media_type===s).forEach(ae=>{const me=Q[ae.id];me&&[...me.flatrate||[],...me.rent||[],...me.buy||[]].forEach(_e=>{B[_e.provider_id]=_e})}),Object.values(B)}const Vs=N?O.filter(B=>{if(B.media_type!==s||B.archived)return!1;const ae=Q[B.id];return ae?[...ae.flatrate||[],...ae.rent||[],...ae.buy||[]].some(me=>me.provider_id===N.provider_id):!1}):O.filter(B=>B.media_type===s&&!B.archived);function Yo({open:B,onClose:ae,providers:me,onSelect:_e}){return B?Ep.createPortal(_.jsx("div",{className:"dashboard-modal-overlay",onClick:ae,children:_.jsxs("div",{className:"dashboard-modal-content",onClick:Ee=>Ee.stopPropagation(),style:{maxWidth:440,padding:24},children:[_.jsx("button",{className:"dashboard-modal-close",onClick:ae,"aria-label":"Close modal",type:"button",children:"×"}),_.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"Click to View Streaming Providers"}),_.jsx("div",{style:{margin:"0 0 12px 0",color:"#8fc7ff",fontSize:"1.02rem",textAlign:"center",fontWeight:500},children:"View all providers. Click on a provider icon below to filter your diary and see which shows can be watched for that provider."}),_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:me.map(Ee=>_.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Ee.logo_path}`,alt:Ee.provider_name,title:Ee.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:N&&N.provider_id===Ee.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>{_e(Ee),x(Ee)}},Ee.provider_id))}),N&&_.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>x(null),children:"Show All Entries"}),_.jsx("div",{style:{marginTop:24},children:Vs.length===0?_.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):_.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:Vs.map(Ee=>_.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0002",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center",cursor:"pointer"},onClick:()=>{Kt(Ee),ae()},children:[_.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:_.jsx("img",{src:Ee.poster,alt:Ee.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),_.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:Ee.title})]},Ee.docId))})})]})}),document.getElementById("modal-root")):null}const vi=O.filter(B=>!B.archived&&B.media_type===s),_i=O.filter(B=>B.archived&&B.media_type===s);function Ei(B){Pe(B)}function Cn(B){Qi({id:B.id,title:B.title||B.name,poster_path:B.poster_path,release_date:B.release_date||B.first_air_date,overview:B.overview,media_type:pe}),Et(ae=>ae.filter(me=>me.id!==B.id))}function Lr(){const[B,ae]=k.useState(!1);k.useEffect(()=>{function _e(){ae(window.scrollY>300)}return window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)},[]);const me=()=>{window.scrollTo({top:0,behavior:"smooth"})};return B?_.jsx("button",{onClick:me,style:{position:"fixed",right:18,bottom:28,zIndex:9999,background:"rgba(37,96,156,0.93)",color:"#fff",border:"none",borderRadius:"50%",width:54,height:54,boxShadow:"0 3px 12px #0005",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,cursor:"pointer",touchAction:"manipulation"},"aria-label":"Back to top",className:"back-to-top-btn",children:_.jsx("span",{style:{fontSize:45,marginTop:-2},children:"↑"})}):null}const[Ti,jr]=k.useState([]),[Na,Ur]=k.useState(!0);k.useEffect(()=>{let B=!1;async function ae(){if(!i)return;Ur(!0);const me=au(gn(Ve,`users/${i.uid}/notifications`),dh("read","==",!1),Gb("createdAt","desc")),Ee=(await wn(me)).docs.map(ve=>({id:ve.id,...ve.data()}));B||(jr(Ee),Ur(!1))}return ae(),()=>{B=!0}},[i,Ve]);async function ti(B){i&&(await pa(vt(Ve,`users/${i.uid}/notifications`,B),{read:!0}),jr(Ti.filter(ae=>ae.id!==B)))}const[ni,zr]=k.useState(!1);function Un({open:B,onClose:ae}){return B?Ep.createPortal(_.jsx("div",{className:"dashboard-modal-overlay",onClick:ae,children:_.jsxs("div",{className:"dashboard-modal-content dashboard-instructions-modal",onClick:me=>me.stopPropagation(),style:{maxWidth:780,padding:36,background:"#23242a",color:"#e8f0fe",borderRadius:18,boxShadow:"0 4px 32px #205a7a22"},children:[_.jsx("button",{className:"dashboard-modal-close",onClick:ae,"aria-label":"Close modal",type:"button",children:"×"}),_.jsx("h2",{style:{color:"#8fc7ff",textAlign:"center",marginBottom:24,fontWeight:700,fontSize:"2rem"},children:"How to Use This Dashboard"}),_.jsxs("div",{className:"dashboard-instructions-grid",children:[_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(IM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"Search for a Show or Movie"}),_.jsx("div",{className:"dashboard-instruction-desc",children:"Use the search bar at the top to find movies or TV shows. Results come from TMDb."})]}),_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(RM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"Add to Your Diary"}),_.jsx("div",{className:"dashboard-instruction-desc",children:"Click on a result to add it to your diary. Track what you’ve watched or want to watch."})]}),_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(TM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"Mark as Watched/Unwatched"}),_.jsx("div",{className:"dashboard-instruction-desc",children:"Toggle the watched status for each diary entry to keep your list up to date."})]}),_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(WE,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"Edit or Remove Entries"}),_.jsx("div",{className:"dashboard-instruction-desc",children:"Click a diary entry to view details, edit notes, or remove it from your diary."})]}),_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(xM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"View Streaming Providers"}),_.jsx("div",{className:"dashboard-instruction-desc",children:"See where you can stream each show or movie (US region by default)."})]}),_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(wM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"Join Discussions"}),_.jsx("div",{className:"dashboard-instruction-desc",children:"Add comments or replies to discuss shows with others. Upvote or downvote comments."})]}),_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(NM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"Manage Your Profile"}),_.jsx("div",{className:"dashboard-instruction-title",children:"Update your display name and view your activity stats at the top of the dashboard."})]}),_.jsxs("div",{className:"dashboard-instruction-card",children:[_.jsx(EM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),_.jsx("div",{className:"dashboard-instruction-title",children:"Archive Entries"}),_.jsx("div",{className:"dashboard-instruction-desc",children:'Archive shows/movies you’ve finished or want to hide from your main list. Toggle "Show Archived" to view them.'})]})]}),_.jsx("hr",{style:{border:"none",borderTop:"1px solid #355a7a",margin:"30px 0 18px 0"}}),_.jsxs("div",{style:{textAlign:"center",color:"#b8c6e4",fontSize:"1.08rem"},children:["Need more help? ",_.jsx("a",{href:"#",style:{color:"#8fc7ff",fontWeight:600,textDecoration:"underline"},children:"Contact support"})," or ",_.jsx("a",{href:"#",style:{color:"#8fc7ff",fontWeight:600,textDecoration:"underline"},children:"check the FAQ"})]}),_.jsx("style",{children:`
            .dashboard-instructions-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 28px 32px;
              margin-bottom: 0;
            }
            .dashboard-instruction-card {
              background: rgba(37,96,156,0.13);
              border-radius: 14px;
              padding: 22px 18px 18px 18px;
              box-shadow: 0 2px 12px #0002;
              display: flex;
              flex-direction: column;
              align-items: flex-start;
              min-height: 120px;
              transition: box-shadow 0.18s;
            }
            .dashboard-instruction-title {
              font-weight: 700;
              font-size: 1.14rem;
              margin-bottom: 6px;
              color: #e8f0fe;
            }
            .dashboard-instruction-desc {
              font-size: 1.07rem;
              color: #b8c6e4;
              font-weight: 400;
            }
            @media (max-width: 800px) {
              .dashboard-instructions-grid {
                grid-template-columns: 1fr;
                gap: 18px 0;
              }
            }
          `})]})}),document.getElementById("modal-root")):null}return _.jsxs("div",{style:{background:"#23242a",minHeight:"100vh",width:"100vw"},children:[Ti.map(B=>_.jsx(OM,{notification:B,onDismiss:()=>ti(B.id)},B.id)),_.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:20,marginBottom:8},children:_.jsx("button",{className:"dashboard-toggle",style:{fontSize:"1.07rem",padding:"0.6rem 1.5rem",fontWeight:700,background:"#25609c",color:"#fff",border:"none",borderRadius:7,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",letterSpacing:1},onClick:()=>zr(!0),children:"Show Instructions"})}),_.jsx(Un,{open:ni,onClose:()=>zr(!1)}),_.jsxs("div",{className:"dashboard-bg",children:[_.jsx("style",{children:`
            .dashboard-trending-movie-title {
              display: -webkit-box;
              -webkit-line-clamp: 2;
              -webkit-box-orient: vertical;
              overflow: hidden;
              min-height: 2.7em;
              max-height: 2.7em;
              line-height: 1.35em;
              font-size: 1.07rem;
              font-weight: 600;
              color: #fff;
              margin: 0.7em 0 0.2em 0;
              text-align: center;
            }
            .dashboard-trending-desc {
              display: -webkit-box;
              -webkit-line-clamp: 5;
              -webkit-box-orient: vertical;
              overflow: hidden;
              min-height: 6.75em;
              max-height: 6.75em;
              line-height: 1.35em;
              font-size: 0.98rem;
              color: #c7d0e0;
              margin-bottom: 1em;
              text-align: center;
            }
          `}),_.jsxs("div",{className:"dashboard-content-wrapper",children:[_.jsx("div",{className:"dashboard-banner",children:_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[_.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),W?_.jsxs(_.Fragment,{children:[_.jsx("input",{type:"text",value:ye,onChange:B=>Le(B.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:L,autoFocus:!0}),_.jsx("button",{onClick:ks,disabled:L,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:_.jsx(bM,{})}),_.jsx("button",{onClick:mt,disabled:L,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:_.jsx(CM,{})})]}):_.jsxs(_.Fragment,{children:[_.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:Ne}),_.jsx("button",{onClick:xa,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:_.jsx(WE,{})})]})]}),ce&&_.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:ce}),_.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[_.jsx("button",{className:"dashboard-signout",onClick:async()=>{try{await e(),window.localStorage.clear(),window.sessionStorage.clear(),n("/"),window.location.reload()}catch{alert("Failed to sign out")}},style:{background:"#2a1b1b",color:"#ffb3b3",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},children:"Sign Out"}),Ki&&_.jsx("button",{className:"dashboard-admin-btn",style:{background:"#25609c",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},onClick:()=>n("/admin"),children:"Admin Dashboard"})]})]})}),_.jsxs("div",{className:"dashboard-search-section",children:[_.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),_.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),_.jsx("div",{style:{height:"1.1rem"}}),_.jsxs("div",{className:"dashboard-search-toggle-row",children:[_.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),_.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),_.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:Ko,children:[_.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows…*",value:u,onChange:B=>d(B.target.value)}),_.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),_.jsxs("div",{className:"dashboard-search-results",children:[w&&_.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:w}),!w&&m.length>0&&_.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(B=>_.jsxs("div",{className:"dashboard-trending-card",children:[_.jsx("img",{src:B.poster_path?`https://image.tmdb.org/t/p/w200${B.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:B.title||B.name,className:"dashboard-trending-poster"}),_.jsx("div",{className:"dashboard-trending-movie-title",children:B.title||B.name}),_.jsx("div",{className:"dashboard-trending-year",children:(B.release_date||B.first_air_date||"").slice(0,4)}),_.jsx("div",{className:"dashboard-trending-desc",children:B.overview?B.overview.slice(0,90)+(B.overview.length>90?"…":""):"No description."}),_.jsx("button",{className:"dashboard-trending-add",onClick:()=>Qi(B),children:O.some(ae=>ae.id===B.id)?"IN DIARY":"ADD TO DIARY"})]},B.id))})]})]}),_.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"1.5rem 0"},children:_.jsx("ins",{className:"adsbygoogle",style:{display:"block",width:"100%",maxWidth:728,minHeight:90},"data-ad-client":"ca-pub-5502818698237515","data-ad-slot":"1749671682","data-ad-format":"auto"})}),_.jsxs("div",{className:"dashboard-diary-section",children:[_.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),_.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[_.jsx("button",{className:`dashboard-toggle${P?"":" active"}`,onClick:()=>C(!1),children:"My Diary"}),_.jsx("button",{className:`dashboard-toggle${P?" active":""}`,onClick:()=>C(!0),children:"Archived"})]}),_.jsx("div",{className:"dashboard-diary-providers-row",children:_.jsx("button",{className:"dashboard-providers-btn",onClick:()=>A(!0),title:"View all providers. Click on a provider icon to see which shows can be watched for that provider.",children:"Click to View Streaming Providers"})}),P?_i.length===0?_.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No archived entries."}):_.jsx("div",{className:"dashboard-diary-cards-row",children:_i.map(B=>(V.current[B.docId]||(V.current[B.docId]=k.createRef()),_.jsxs("section",{ref:ae=>V.current[B.docId]=ae,className:"dashboard-diary-card collapsed",children:[_.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:_.jsx("img",{src:B.poster,alt:B.title,className:"dashboard-diary-poster collapsed"})}),_.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:B.title}),_.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Kt(B),children:["Show More ",_.jsx(YE,{})]})]},B.docId)))}):vi.length===0?_.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):_.jsx("div",{className:"dashboard-diary-cards-row",children:vi.map(B=>(V.current[B.docId]||(V.current[B.docId]=k.createRef()),_.jsxs("section",{ref:ae=>V.current[B.docId]=ae,className:"dashboard-diary-card collapsed",children:[_.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:_.jsx("img",{src:B.poster,alt:B.title,className:"dashboard-diary-poster collapsed"})}),_.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:B.title}),_.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Kt(B),children:["Show More ",_.jsx(YE,{})]})]},B.docId)))})]}),_.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),_.jsxs("div",{className:"dashboard-trending-section",children:[_.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",pe==="movie"?"Movies":"TV Shows"]}),_.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[_.jsx("button",{className:pe==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Ei("movie"),children:"Movies"}),_.jsx("button",{className:pe==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Ei("tv"),children:"TV Shows"})]}),_.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:rt?_.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading…"}):ei?_.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:ei}):Se.filter(B=>!O.some(ae=>ae.id===B.id&&ae.media_type===pe)).slice(0,10).map(B=>_.jsxs("div",{className:"dashboard-trending-card",children:[_.jsx("img",{src:B.poster_path?`https://image.tmdb.org/t/p/w200${B.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:B.title||B.name,className:"dashboard-trending-poster"}),_.jsx("div",{className:"dashboard-trending-movie-title",children:B.title||B.name}),_.jsx("div",{className:"dashboard-trending-year",children:(B.release_date||B.first_air_date||"").slice(0,4)}),_.jsx("div",{className:"dashboard-trending-desc",children:B.overview?B.overview.slice(0,90)+(B.overview.length>90?"…":""):"No description."}),_.jsx("button",{className:"dashboard-trending-add",onClick:()=>Cn(B),children:"ADD TO DIARY"})]},B.id))})]})]})]}),Z&&_.jsx(yS,{entry:Z,providersMap:Q,onClose:()=>he(null),onShare:Pr,onToggleWatched:Yi,onRemove:Vr,onArchiveToggle:Qo,diary:O,contentRating:ue,readOnly:!1,onAddToDiary:Qi}),_.jsx(Yo,{open:S,onClose:()=>{A(!1),x(null)},providers:zt(),onSelect:B=>x(B)}),_.jsx(Lr,{}),_.jsx(DM,{})]})}function kM(){const{currentUser:i,resendVerificationEmail:e,logout:n}=$i(),[s,o]=k.useState(!1),[u,d]=k.useState(""),[m,p]=k.useState(!1),[g,T]=k.useState(!1),w=Ia(),I=async()=>{d("");try{await e(),o(!0)}catch{d("Failed to resend verification email.")}},O=async()=>{await n(),w("/login")},M=async()=>{p(!0),d("");try{await i.reload(),T(!0),i.emailVerified&&window.location.reload()}catch{d("Could not refresh status.")}p(!1)};return _.jsxs("div",{className:"verify-email-page",children:[_.jsxs("div",{className:"verify-branding",children:[_.jsx("img",{src:XA,alt:"Site Logo",className:"verify-logo"}),_.jsx("h2",{children:"Welcome to ShowsWatched!"})]}),_.jsxs("div",{className:"verify-card",children:[_.jsx("h3",{children:"Verify Your Email"}),_.jsxs("p",{children:["We have sent a verification link to ",_.jsx("b",{children:i==null?void 0:i.email}),".",_.jsx("br",{}),"Please check your inbox and click the link to verify your email address."]}),s&&_.jsx("p",{style:{color:"green"},children:"Verification email sent!"}),u&&_.jsx("p",{style:{color:"red"},children:u}),_.jsx("button",{onClick:I,disabled:m,children:"Resend Verification Email"}),_.jsx("button",{onClick:M,disabled:m,style:{marginLeft:"1rem"},children:m?"Checking...":"Refresh Status"}),_.jsx("button",{onClick:O,style:{marginLeft:"1rem",background:"#eee",color:"#333"},children:"Log Out"}),g&&!i.emailVerified&&_.jsx("p",{style:{color:"orange",marginTop:"1rem"},children:"Still not verified. Please try again after clicking the link in your email."})]})]})}const ZE="ca9a91468bb700f84faf986252bc3fe6",JE="https://api.themoviedb.org/3",VM="US";function PM(){const{entryId:i}=LN(),e=Ia(),n=Gi(),{currentUser:s}=$i(),[o,u]=k.useState(null),[d,m]=k.useState(!0),[p,g]=k.useState(""),[T,w]=k.useState({});k.useEffect(()=>{async function Q(){var U;m(!0),g("");try{const G=vt(Ve,"diary",i),re=await vs(G);if(re.exists()){const Z={...re.data(),docId:re.id};if(u(Z),Z.id&&Z.media_type){const he=vt(Ve,"tmdbProvidersCache",`${Z.media_type}_${Z.id}`);let ue={},we=Date.now(),V=!1;try{const S=await vs(he);if(S.exists()){const A=S.data();A.providers&&(A.providers.flatrate=Array.isArray(A.providers.flatrate)?A.providers.flatrate:[],A.providers.rent=Array.isArray(A.providers.rent)?A.providers.rent:[],A.providers.buy=Array.isArray(A.providers.buy)?A.providers.buy:[]),A.timestamp&&we-A.timestamp<24*60*60*1e3&&(ue=A.providers||{},V=!0)}}catch{}if(!V){let S="";Z.media_type==="movie"?S=`${JE}/movie/${Z.id}/watch/providers?api_key=${ZE}`:S=`${JE}/tv/${Z.id}/watch/providers?api_key=${ZE}`;try{const A=await fetch(S);A.status===404?(ue={},await da(he,{providers:{},timestamp:we})):(ue=((U=(await A.json()).results)==null?void 0:U[VM])||{},ue.flatrate=Array.isArray(ue.flatrate)?ue.flatrate:[],ue.rent=Array.isArray(ue.rent)?ue.rent:[],ue.buy=Array.isArray(ue.buy)?ue.buy:[],await da(he,{providers:ue,timestamp:we}))}catch{}}w({[Z.id]:ue})}}else g("Diary entry not found.")}catch{g("Failed to fetch diary entry.")}m(!1)}Q()},[i]);const I=()=>{e("/")},O=async()=>{if(!s){e("/login?redirect="+encodeURIComponent(n.pathname));return}try{const{uid:Q}=s,U=vt(Ve,"diary",`${Q}_${o.id}`);if((await vs(U)).exists()){alert("This entry is already in your diary!");return}const re={...o,uid:Q,createdAt:new Date,watched:!1,archived:!1};delete re.docId,await da(U,re),alert("Added to your diary!"),e("/dashboard")}catch{alert("Failed to add to diary.")}};if(d)return _.jsx("div",{style:{color:"#fff",padding:"2rem"},children:"Loading shared diary entry..."});if(p)return _.jsx("div",{style:{color:"#ff6b6b",padding:"2rem"},children:p});if(!o)return null;const M=_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:24},children:[_.jsx("h1",{style:{fontFamily:"monoton,Orbitron, Arial, sans-serif",fontWeight:800,fontSize:"1.5rem",margin:0,letterSpacing:2,color:"#7ecfff"},children:"ShowsWatched.com"}),_.jsx("div",{style:{marginTop:8,fontSize:"1.1rem",color:"#b2d7ff",textAlign:"center",maxWidth:520},children:_.jsxs("ol",{style:{margin:"0.7rem 0 0 1.2rem",padding:0,color:"#fff",fontSize:".8rem",textAlign:"left"},children:[_.jsx("li",{children:'If you are not logged in, click "Login" and sign in with your account.'}),_.jsxs("li",{children:["Click the ",_.jsx("b",{children:'"Add to My Diary"'})," button below the entry details."]})]})})]});return _.jsx("div",{style:{maxWidth:700,margin:"2rem auto",background:"#181920",borderRadius:16,boxShadow:"0 2px 16px #0003",padding:"2rem",color:"#fff"},children:_.jsx(yS,{entry:o,providersMap:T,onClose:I,onShare:()=>{},onToggleWatched:()=>{},onRemove:()=>{},onArchiveToggle:()=>{},diary:[],contentRating:"",readOnly:!0,onAddToDiary:O,sharedHeader:M})})}function LM(){const{currentUser:i,emailVerified:e}=$i();return _.jsxs(ZN,{children:[_.jsx(Er,{path:"/login",element:_.jsx(XO,{})}),_.jsx(Er,{path:"/signup",element:_.jsx(ZO,{})}),_.jsx(Er,{path:"/verify-email",element:_.jsx(kM,{})}),_.jsx(Er,{path:"/admin",element:_.jsx(JO,{children:i&&!e?_.jsx(ds,{to:"/verify-email",replace:!0}):_.jsx(oM,{})})}),_.jsx(Er,{path:"/dashboard",element:i&&!e?_.jsx(ds,{to:"/verify-email",replace:!0}):_.jsx(MM,{})}),_.jsx(Er,{path:"/share/diary/:entryId",element:_.jsx(PM,{})}),_.jsx(Er,{path:"/",element:i?e?_.jsx(ds,{to:"/dashboard",replace:!0}):_.jsx(ds,{to:"/verify-email",replace:!0}):_.jsx(hM,{})}),_.jsx(Er,{path:"*",element:i&&!e?_.jsx(ds,{to:"/verify-email",replace:!0}):_.jsx(ds,{to:"/",replace:!0})})]})}WA.createRoot(document.getElementById("root")).render(_.jsx(k.StrictMode,{children:_.jsx(bD,{basename:"/showswatched2",children:_.jsx(WO,{children:_.jsx(LM,{})})})}));
