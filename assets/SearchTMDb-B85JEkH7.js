import{an as Ut,ao as jo,r as u,ac as It,ab as Po,_ as m,c as tt,b as ot,u as rt,e as Oe,j as r,s as Q,f as pe,h as y,i as at,W as ko,v as ho,E as Mt,q as me,ap as Oo,P as xo,a1 as Nt,am as Ro,G as Wt,H as Et,D as _o,m as mo,n as bo,o as vo,Y as _t,aq as xt,$ as Ze,a0 as To,B as O,ar as Gt,A as qt,as as $t,a2 as Kt,a as xe,at as Yt,d as ut,a4 as Tt,g as Do,a5 as Lo,au as Xt}from"./index-D6zfUZPM.js";import{b as zo,C as Dt,a as Ao,s as Jt,c as Qt}from"./tmdb-BEfqiDns.js";import{u as Mo,a as Lt,r as yo}from"./createSvgIcon-BiptPAxs.js";import{D as Bo}from"./Discussion-BQNA3lkv.js";import{l as No,S as zt}from"./logo-jV6IYJtX.js";import{T as A}from"./Typography-CDEwC3Sn.js";import{B as ae}from"./Button-CfJaqulS.js";import{P as Co,A as Wo,f as pt,i as et,o as Zt,b as At,a as wt,T as Eo}from"./Delete-LWAT4-uP.js";import{u as Fo}from"./usePreviousProps-DMnl1WJZ.js";import{C as St,G as eo}from"./Grid-B-oyCY_7.js";import"./Menu-B3Z5FY19.js";function Vo(e,t=0,n=1){return jo(e,t,n)}function Ho(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(s=>s+s)),n?`rgb${n.length===4?"a":""}(${n.map((s,c)=>c<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function Io(e){if(e.type)return e;if(e.charAt(0)==="#")return Io(Ho(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Ut(9,e));let s=e.substring(t+1,e.length-1),c;if(n==="color"){if(s=s.split(" "),c=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(Ut(10,c))}else s=s.split(",");return s=s.map(C=>parseFloat(C)),{type:n,values:s,colorSpace:c}}function Uo(e){const{type:t,colorSpace:n}=e;let{values:s}=e;return t.indexOf("rgb")!==-1?s=s.map((c,C)=>C<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.indexOf("color")!==-1?s=`${n} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function jt(e,t){return e=Io(e),t=Vo(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Uo(e)}function Go(e){return u.Children.toArray(e).filter(t=>u.isValidElement(t))}function to(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function qo(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:s,matchFrom:c="any",stringify:C,trim:x=!1}=e;return(p,{inputValue:S,getOptionLabel:_})=>{let j=x?S.trim():S;n&&(j=j.toLowerCase()),t&&(j=to(j));const I=j?p.filter(V=>{let $=(C||_)(V);return n&&($=$.toLowerCase()),t&&($=to($)),c==="start"?$.indexOf(j)===0:$.indexOf(j)>-1}):p;return typeof s=="number"?I.slice(0,s):I}}function Pt(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const Ko=qo(),Yo=5,Xo=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},Jo=[];function Qo(e){const{unstable_isActiveElementInListbox:t=Xo,unstable_classNamePrefix:n="Mui",autoComplete:s=!1,autoHighlight:c=!1,autoSelect:C=!1,blurOnSelect:x=!1,clearOnBlur:p=!e.freeSolo,clearOnEscape:S=!1,componentName:_="useAutocomplete",defaultValue:j=e.multiple?Jo:null,disableClearable:I=!1,disableCloseOnSelect:V=!1,disabled:$,disabledItemsFocusable:M=!1,disableListWrap:W=!1,filterOptions:H=Ko,filterSelectedOptions:ne=!1,freeSolo:le=!1,getOptionDisabled:X,getOptionKey:U,getOptionLabel:be=i=>{var a;return(a=i.label)!=null?a:i},groupBy:fe,handleHomeEndKeys:E=!e.freeSolo,id:B,includeInputInList:ie=!1,inputValue:ve,isOptionEqualToValue:Ie=(i,a)=>i===a,multiple:k=!1,onChange:$e,onClose:ce,onHighlightChange:Be,onInputChange:Z,onOpen:Re,open:Ge,openOnFocus:G=!1,options:qe,readOnly:Pe=!1,selectOnFocus:Ne=!e.freeSolo,value:Ke}=e,de=Mo(B);let ee=be;ee=i=>{const a=be(i);return typeof a!="string"?String(a):a};const ze=u.useRef(!1),_e=u.useRef(!0),q=u.useRef(null),ue=u.useRef(null),[We,nt]=u.useState(null),[te,Ae]=u.useState(-1),it=c?0:-1,oe=u.useRef(it),[f,Ye]=Lt({controlled:Ke,default:j,name:_}),[T,we]=Lt({controlled:ve,default:"",name:_,state:"inputValue"}),[Te,Ee]=u.useState(!1),Me=u.useCallback((i,a)=>{if(!(k?f.length<a.length:a!==null)&&!p)return;let h;if(k)h="";else if(a==null)h="";else{const P=ee(a);h=typeof P=="string"?P:""}T!==h&&(we(h),Z&&Z(i,h,"reset"))},[ee,T,k,Z,we,p,f]),[ge,st]=Lt({controlled:Ge,default:!1,name:_,state:"open"}),[Fe,lt]=u.useState(!0),ct=!k&&f!=null&&T===ee(f),se=ge&&!Pe,z=se?H(qe.filter(i=>!(ne&&(k?f:[f]).some(a=>a!==null&&Ie(i,a)))),{inputValue:ct&&Fe?"":T,getOptionLabel:ee}):[],ye=Fo({filteredOptions:z,value:f,inputValue:T});u.useEffect(()=>{const i=f!==ye.value;Te&&!i||le&&!i||Me(null,f)},[f,Me,Te,ye.value,le]);const Xe=ge&&z.length>0&&!Pe,Ve=It(i=>{i===-1?q.current.focus():We.querySelector(`[data-tag-index="${i}"]`).focus()});u.useEffect(()=>{k&&te>f.length-1&&(Ae(-1),Ve(-1))},[f,k,te,Ve]);function He(i,a){if(!ue.current||i<0||i>=z.length)return-1;let d=i;for(;;){const h=ue.current.querySelector(`[data-option-index="${d}"]`),P=M?!1:!h||h.disabled||h.getAttribute("aria-disabled")==="true";if(h&&h.hasAttribute("tabindex")&&!P)return d;if(a==="next"?d=(d+1)%z.length:d=(d-1+z.length)%z.length,d===i)return-1}}const Se=It(({event:i,index:a,reason:d="auto"})=>{if(oe.current=a,a===-1?q.current.removeAttribute("aria-activedescendant"):q.current.setAttribute("aria-activedescendant",`${de}-option-${a}`),Be&&Be(i,a===-1?null:z[a],d),!ue.current)return;const h=ue.current.querySelector(`[role="option"].${n}-focused`);h&&(h.classList.remove(`${n}-focused`),h.classList.remove(`${n}-focusVisible`));let P=ue.current;if(ue.current.getAttribute("role")!=="listbox"&&(P=ue.current.parentElement.querySelector('[role="listbox"]')),!P)return;if(a===-1){P.scrollTop=0;return}const Y=ue.current.querySelector(`[data-option-index="${a}"]`);if(Y&&(Y.classList.add(`${n}-focused`),d==="keyboard"&&Y.classList.add(`${n}-focusVisible`),P.scrollHeight>P.clientHeight&&d!=="mouse"&&d!=="touch")){const J=Y,Le=P.clientHeight+P.scrollTop,Ht=J.offsetTop+J.offsetHeight;Ht>Le?P.scrollTop=Ht-P.clientHeight:J.offsetTop-J.offsetHeight*(fe?1.3:0)<P.scrollTop&&(P.scrollTop=J.offsetTop-J.offsetHeight*(fe?1.3:0))}}),Ce=It(({event:i,diff:a,direction:d="next",reason:h="auto"})=>{if(!se)return;const Y=He((()=>{const J=z.length-1;if(a==="reset")return it;if(a==="start")return 0;if(a==="end")return J;const Le=oe.current+a;return Le<0?Le===-1&&ie?-1:W&&oe.current!==-1||Math.abs(a)>1?0:J:Le>J?Le===J+1&&ie?-1:W||Math.abs(a)>1?J:0:Le})(),d);if(Se({index:Y,reason:h,event:i}),s&&a!=="reset")if(Y===-1)q.current.value=T;else{const J=ee(z[Y]);q.current.value=J,J.toLowerCase().indexOf(T.toLowerCase())===0&&T.length>0&&q.current.setSelectionRange(T.length,J.length)}}),De=()=>{const i=(a,d)=>{const h=a?ee(a):"",P=d?ee(d):"";return h===P};if(oe.current!==-1&&ye.filteredOptions&&ye.filteredOptions.length!==z.length&&ye.inputValue===T&&(k?f.length===ye.value.length&&ye.value.every((a,d)=>ee(f[d])===ee(a)):i(ye.value,f))){const a=ye.filteredOptions[oe.current];if(a)return Pt(z,d=>ee(d)===ee(a))}return-1},Je=u.useCallback(()=>{if(!se)return;const i=De();if(i!==-1){oe.current=i;return}const a=k?f[0]:f;if(z.length===0||a==null){Ce({diff:"reset"});return}if(ue.current){if(a!=null){const d=z[oe.current];if(k&&d&&Pt(f,P=>Ie(d,P))!==-1)return;const h=Pt(z,P=>Ie(P,a));h===-1?Ce({diff:"reset"}):Se({index:h});return}if(oe.current>=z.length-1){Se({index:z.length-1});return}Se({index:oe.current})}},[z.length,k?!1:f,ne,Ce,Se,se,T,k]),yt=It(i=>{Po(ue,i),i&&Je()});u.useEffect(()=>{Je()},[Je]);const he=i=>{ge||(st(!0),lt(!0),Re&&Re(i))},ke=(i,a)=>{ge&&(st(!1),ce&&ce(i,a))},je=(i,a,d,h)=>{if(k){if(f.length===a.length&&f.every((P,Y)=>P===a[Y]))return}else if(f===a)return;$e&&$e(i,a,d,h),Ye(a)},Ue=u.useRef(!1),o=(i,a,d="selectOption",h="options")=>{let P=d,Y=a;if(k){Y=Array.isArray(f)?f.slice():[];const J=Pt(Y,Le=>Ie(a,Le));J===-1?Y.push(a):h!=="freeSolo"&&(Y.splice(J,1),P="removeOption")}Me(i,Y),je(i,Y,P,{option:a}),!V&&(!i||!i.ctrlKey&&!i.metaKey)&&ke(i,P),(x===!0||x==="touch"&&Ue.current||x==="mouse"&&!Ue.current)&&q.current.blur()};function l(i,a){if(i===-1)return-1;let d=i;for(;;){if(a==="next"&&d===f.length||a==="previous"&&d===-1)return-1;const h=We.querySelector(`[data-tag-index="${d}"]`);if(!h||!h.hasAttribute("tabindex")||h.disabled||h.getAttribute("aria-disabled")==="true")d+=a==="next"?1:-1;else return d}}const g=(i,a)=>{if(!k)return;T===""&&ke(i,"toggleInput");let d=te;te===-1?T===""&&a==="previous"&&(d=f.length-1):(d+=a==="next"?1:-1,d<0&&(d=0),d===f.length&&(d=-1)),d=l(d,a),Ae(d),Ve(d)},b=i=>{ze.current=!0,we(""),Z&&Z(i,"","clear"),je(i,k?[]:null,"clear")},v=i=>a=>{if(i.onKeyDown&&i.onKeyDown(a),!a.defaultMuiPrevented&&(te!==-1&&["ArrowLeft","ArrowRight"].indexOf(a.key)===-1&&(Ae(-1),Ve(-1)),a.which!==229))switch(a.key){case"Home":se&&E&&(a.preventDefault(),Ce({diff:"start",direction:"next",reason:"keyboard",event:a}));break;case"End":se&&E&&(a.preventDefault(),Ce({diff:"end",direction:"previous",reason:"keyboard",event:a}));break;case"PageUp":a.preventDefault(),Ce({diff:-5,direction:"previous",reason:"keyboard",event:a}),he(a);break;case"PageDown":a.preventDefault(),Ce({diff:Yo,direction:"next",reason:"keyboard",event:a}),he(a);break;case"ArrowDown":a.preventDefault(),Ce({diff:1,direction:"next",reason:"keyboard",event:a}),he(a);break;case"ArrowUp":a.preventDefault(),Ce({diff:-1,direction:"previous",reason:"keyboard",event:a}),he(a);break;case"ArrowLeft":g(a,"previous");break;case"ArrowRight":g(a,"next");break;case"Enter":if(oe.current!==-1&&se){const d=z[oe.current],h=X?X(d):!1;if(a.preventDefault(),h)return;o(a,d,"selectOption"),s&&q.current.setSelectionRange(q.current.value.length,q.current.value.length)}else le&&T!==""&&ct===!1&&(k&&a.preventDefault(),o(a,T,"createOption","freeSolo"));break;case"Escape":se?(a.preventDefault(),a.stopPropagation(),ke(a,"escape")):S&&(T!==""||k&&f.length>0)&&(a.preventDefault(),a.stopPropagation(),b(a));break;case"Backspace":if(k&&!Pe&&T===""&&f.length>0){const d=te===-1?f.length-1:te,h=f.slice();h.splice(d,1),je(a,h,"removeOption",{option:f[d]})}break;case"Delete":if(k&&!Pe&&T===""&&f.length>0&&te!==-1){const d=te,h=f.slice();h.splice(d,1),je(a,h,"removeOption",{option:f[d]})}break}},N=i=>{Ee(!0),G&&!ze.current&&he(i)},K=i=>{if(t(ue)){q.current.focus();return}Ee(!1),_e.current=!0,ze.current=!1,C&&oe.current!==-1&&se?o(i,z[oe.current],"blur"):C&&le&&T!==""?o(i,T,"blur","freeSolo"):p&&Me(i,f),ke(i,"blur")},D=i=>{const a=i.target.value;T!==a&&(we(a),lt(!1),Z&&Z(i,a,"input")),a===""?!I&&!k&&je(i,null,"clear"):he(i)},L=i=>{const a=Number(i.currentTarget.getAttribute("data-option-index"));oe.current!==a&&Se({event:i,index:a,reason:"mouse"})},re=i=>{Se({event:i,index:Number(i.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ue.current=!0},Vt=i=>{const a=Number(i.currentTarget.getAttribute("data-option-index"));o(i,z[a],"selectOption"),Ue.current=!1},kt=i=>a=>{const d=f.slice();d.splice(i,1),je(a,d,"removeOption",{option:f[i]})},Ot=i=>{ge?ke(i,"toggleInput"):he(i)},Rt=i=>{i.currentTarget.contains(i.target)&&i.target.getAttribute("id")!==de&&i.preventDefault()},Ct=i=>{i.currentTarget.contains(i.target)&&(q.current.focus(),Ne&&_e.current&&q.current.selectionEnd-q.current.selectionStart===0&&q.current.select(),_e.current=!1)},ht=i=>{!$&&(T===""||!ge)&&Ot(i)};let Qe=le&&T.length>0;Qe=Qe||(k?f.length>0:f!==null);let dt=z;return fe&&(dt=z.reduce((i,a,d)=>{const h=fe(a);return i.length>0&&i[i.length-1].group===h?i[i.length-1].options.push(a):i.push({key:d,index:d,group:h,options:[a]}),i},[])),$&&Te&&K(),{getRootProps:(i={})=>m({"aria-owns":Xe?`${de}-listbox`:null},i,{onKeyDown:v(i),onMouseDown:Rt,onClick:Ct}),getInputLabelProps:()=>({id:`${de}-label`,htmlFor:de}),getInputProps:()=>({id:de,value:T,onBlur:K,onFocus:N,onChange:D,onMouseDown:ht,"aria-activedescendant":se?"":null,"aria-autocomplete":s?"both":"list","aria-controls":Xe?`${de}-listbox`:void 0,"aria-expanded":Xe,autoComplete:"off",ref:q,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:$}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:b}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ot}),getTagProps:({index:i})=>m({key:i,"data-tag-index":i,tabIndex:-1},!Pe&&{onDelete:kt(i)}),getListboxProps:()=>({role:"listbox",id:`${de}-listbox`,"aria-labelledby":`${de}-label`,ref:yt,onMouseDown:i=>{i.preventDefault()}}),getOptionProps:({index:i,option:a})=>{var d;const h=(k?f:[f]).some(Y=>Y!=null&&Ie(a,Y)),P=X?X(a):!1;return{key:(d=U==null?void 0:U(a))!=null?d:ee(a),tabIndex:-1,role:"option",id:`${de}-option-${i}`,onMouseMove:L,onClick:Vt,onTouchStart:re,"data-option-index":i,"aria-disabled":P,"aria-selected":h}},id:de,inputValue:T,value:f,dirty:Qe,expanded:se&&We,popupOpen:se,focused:Te||te!==-1,anchorEl:We,setAnchorEl:nt,focusedTag:te,groupedOptions:dt}}function Zo(e){return tt("MuiListSubheader",e)}ot("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const er=["className","color","component","disableGutters","disableSticky","inset"],tr=e=>{const{classes:t,color:n,disableGutters:s,inset:c,disableSticky:C}=e,x={root:["root",n!=="default"&&`color${y(n)}`,!s&&"gutters",c&&"inset",!C&&"sticky"]};return at(x,Zo,t)},or=Q("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${y(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>m({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),$o=u.forwardRef(function(t,n){const s=rt({props:t,name:"MuiListSubheader"}),{className:c,color:C="default",component:x="li",disableGutters:p=!1,disableSticky:S=!1,inset:_=!1}=s,j=Oe(s,er),I=m({},s,{color:C,component:x,disableGutters:p,disableSticky:S,inset:_}),V=tr(I);return r.jsx(or,m({as:x,className:pe(V.root,c),ref:n,ownerState:I},j))});$o.muiSkipListHighlight=!0;const rr=ko(r.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function ar(e){return tt("MuiChip",e)}const R=ot("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),nr=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],ir=e=>{const{classes:t,disabled:n,size:s,color:c,iconColor:C,onDelete:x,clickable:p,variant:S}=e,_={root:["root",S,n&&"disabled",`size${y(s)}`,`color${y(c)}`,p&&"clickable",p&&`clickableColor${y(c)}`,x&&"deletable",x&&`deletableColor${y(c)}`,`${S}${y(c)}`],label:["label",`label${y(s)}`],avatar:["avatar",`avatar${y(s)}`,`avatarColor${y(c)}`],icon:["icon",`icon${y(s)}`,`iconColor${y(C)}`],deleteIcon:["deleteIcon",`deleteIcon${y(s)}`,`deleteIconColor${y(c)}`,`deleteIcon${y(S)}Color${y(c)}`]};return at(_,ar,t)},sr=Q("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:s,iconColor:c,clickable:C,onDelete:x,size:p,variant:S}=n;return[{[`& .${R.avatar}`]:t.avatar},{[`& .${R.avatar}`]:t[`avatar${y(p)}`]},{[`& .${R.avatar}`]:t[`avatarColor${y(s)}`]},{[`& .${R.icon}`]:t.icon},{[`& .${R.icon}`]:t[`icon${y(p)}`]},{[`& .${R.icon}`]:t[`iconColor${y(c)}`]},{[`& .${R.deleteIcon}`]:t.deleteIcon},{[`& .${R.deleteIcon}`]:t[`deleteIcon${y(p)}`]},{[`& .${R.deleteIcon}`]:t[`deleteIconColor${y(s)}`]},{[`& .${R.deleteIcon}`]:t[`deleteIcon${y(S)}Color${y(s)}`]},t.root,t[`size${y(p)}`],t[`color${y(s)}`],C&&t.clickable,C&&s!=="default"&&t[`clickableColor${y(s)})`],x&&t.deletable,x&&s!=="default"&&t[`deletableColor${y(s)}`],t[S],t[`${S}${y(s)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return m({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${R.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${R.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${R.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${R.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${R.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${R.icon}`]:m({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&m({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${R.deleteIcon}`]:m({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:me.alpha(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:me.alpha(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:me.alpha(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${R.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:me.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${R.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>m({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:me.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${R.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:me.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${R.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>m({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${R.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${R.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${R.avatar}`]:{marginLeft:4},[`& .${R.avatarSmall}`]:{marginLeft:2},[`& .${R.icon}`]:{marginLeft:4},[`& .${R.iconSmall}`]:{marginLeft:2},[`& .${R.deleteIcon}`]:{marginRight:5},[`& .${R.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:me.alpha(e.palette[t.color].main,.7)}`,[`&.${R.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:me.alpha(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${R.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:me.alpha(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${R.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:me.alpha(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),lr=Q("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:s}=n;return[t.label,t[`label${y(s)}`]]}})(({ownerState:e})=>m({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function oo(e){return e.key==="Backspace"||e.key==="Delete"}const cr=u.forwardRef(function(t,n){const s=rt({props:t,name:"MuiChip"}),{avatar:c,className:C,clickable:x,color:p="default",component:S,deleteIcon:_,disabled:j=!1,icon:I,label:V,onClick:$,onDelete:M,onKeyDown:W,onKeyUp:H,size:ne="medium",variant:le="filled",tabIndex:X,skipFocusWhenDisabled:U=!1}=s,be=Oe(s,nr),fe=u.useRef(null),E=ho(fe,n),B=G=>{G.stopPropagation(),M&&M(G)},ie=G=>{G.currentTarget===G.target&&oo(G)&&G.preventDefault(),W&&W(G)},ve=G=>{G.currentTarget===G.target&&(M&&oo(G)?M(G):G.key==="Escape"&&fe.current&&fe.current.blur()),H&&H(G)},Ie=x!==!1&&$?!0:x,k=Ie||M?Mt:S||"div",$e=m({},s,{component:k,disabled:j,size:ne,color:p,iconColor:u.isValidElement(I)&&I.props.color||p,onDelete:!!M,clickable:Ie,variant:le}),ce=ir($e),Be=k===Mt?m({component:S||"div",focusVisibleClassName:ce.focusVisible},M&&{disableRipple:!0}):{};let Z=null;M&&(Z=_&&u.isValidElement(_)?u.cloneElement(_,{className:pe(_.props.className,ce.deleteIcon),onClick:B}):r.jsx(rr,{className:pe(ce.deleteIcon),onClick:B}));let Re=null;c&&u.isValidElement(c)&&(Re=u.cloneElement(c,{className:pe(ce.avatar,c.props.className)}));let Ge=null;return I&&u.isValidElement(I)&&(Ge=u.cloneElement(I,{className:pe(ce.icon,I.props.className)})),r.jsxs(sr,m({as:k,className:pe(ce.root,C),disabled:Ie&&j?!0:void 0,onClick:$,onKeyDown:ie,onKeyUp:ve,ref:E,tabIndex:U&&j?-1:X,ownerState:$e},Be,be,{children:[Re||Ge,r.jsx(lr,{className:pe(ce.label),ownerState:$e,children:V}),Z]}))});function dr(e){return tt("MuiAutocomplete",e)}const w=ot("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var ro,ao;const ur=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],pr=["ref"],fr=["key"],gr=["key"],hr=e=>{const{classes:t,disablePortal:n,expanded:s,focused:c,fullWidth:C,hasClearIcon:x,hasPopupIcon:p,inputFocused:S,popupOpen:_,size:j}=e,I={root:["root",s&&"expanded",c&&"focused",C&&"fullWidth",x&&"hasClearIcon",p&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",S&&"inputFocused"],tag:["tag",`tagSize${y(j)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",_&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return at(I,dr,t)},xr=Q("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:s,hasClearIcon:c,hasPopupIcon:C,inputFocused:x,size:p}=n;return[{[`& .${w.tag}`]:t.tag},{[`& .${w.tag}`]:t[`tagSize${y(p)}`]},{[`& .${w.inputRoot}`]:t.inputRoot},{[`& .${w.input}`]:t.input},{[`& .${w.input}`]:x&&t.inputFocused},t.root,s&&t.fullWidth,C&&t.hasPopupIcon,c&&t.hasClearIcon]}})({[`&.${w.focused} .${w.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${w.clearIndicator}`]:{visibility:"visible"}},[`& .${w.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${w.inputRoot}`]:{[`.${w.hasPopupIcon}&, .${w.hasClearIcon}&`]:{paddingRight:30},[`.${w.hasPopupIcon}.${w.hasClearIcon}&`]:{paddingRight:56},[`& .${w.input}`]:{width:0,minWidth:30}},[`& .${At.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${At.root}.${et.sizeSmall}`]:{[`& .${At.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Zt.root}`]:{padding:9,[`.${w.hasPopupIcon}&, .${w.hasClearIcon}&`]:{paddingRight:39},[`.${w.hasPopupIcon}.${w.hasClearIcon}&`]:{paddingRight:65},[`& .${w.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${w.endAdornment}`]:{right:9}},[`& .${Zt.root}.${et.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${w.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${pt.root}`]:{paddingTop:19,paddingLeft:8,[`.${w.hasPopupIcon}&, .${w.hasClearIcon}&`]:{paddingRight:39},[`.${w.hasPopupIcon}.${w.hasClearIcon}&`]:{paddingRight:65},[`& .${pt.input}`]:{padding:"7px 4px"},[`& .${w.endAdornment}`]:{right:9}},[`& .${pt.root}.${et.sizeSmall}`]:{paddingBottom:1,[`& .${pt.input}`]:{padding:"2.5px 4px"}},[`& .${et.hiddenLabel}`]:{paddingTop:8},[`& .${pt.root}.${et.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${w.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${pt.root}.${et.hiddenLabel}.${et.sizeSmall}`]:{[`& .${w.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${w.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${w.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${w.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${w.inputRoot}`]:{flexWrap:"wrap"}}}]}),mr=Q("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),br=Q(Nt,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),vr=Q(Nt,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>m({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),yr=Q(Co,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${w.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(({theme:e})=>({zIndex:(e.vars||e).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]})),Cr=Q(xo,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>m({},e.typography.body1,{overflow:"auto"})),Ir=Q("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),$r=Q("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),wr=Q("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${w.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${w.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${w.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:me.alpha(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${w.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:me.alpha(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${w.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:me.alpha(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),Sr=Q($o,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),jr=Q("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${w.option}`]:{paddingLeft:24}}),Pr=u.forwardRef(function(t,n){var s,c,C,x;const p=rt({props:t,name:"MuiAutocomplete"}),{autoComplete:S=!1,autoHighlight:_=!1,autoSelect:j=!1,blurOnSelect:I=!1,ChipProps:V,className:$,clearIcon:M=ro||(ro=r.jsx(Oo,{fontSize:"small"})),clearOnBlur:W=!p.freeSolo,clearOnEscape:H=!1,clearText:ne="Clear",closeText:le="Close",componentsProps:X={},defaultValue:U=p.multiple?[]:null,disableClearable:be=!1,disableCloseOnSelect:fe=!1,disabled:E=!1,disabledItemsFocusable:B=!1,disableListWrap:ie=!1,disablePortal:ve=!1,filterSelectedOptions:Ie=!1,forcePopupIcon:k="auto",freeSolo:$e=!1,fullWidth:ce=!1,getLimitTagsText:Be=a=>`+${a}`,getOptionLabel:Z,groupBy:Re,handleHomeEndKeys:Ge=!p.freeSolo,includeInputInList:G=!1,limitTags:qe=-1,ListboxComponent:Pe="ul",ListboxProps:Ne,loading:Ke=!1,loadingText:de="Loadingâ€¦",multiple:ee=!1,noOptionsText:ze="No options",openOnFocus:_e=!1,openText:q="Open",PaperComponent:ue=xo,PopperComponent:We=Co,popupIcon:nt=ao||(ao=r.jsx(Wo,{})),readOnly:te=!1,renderGroup:Ae,renderInput:it,renderOption:oe,renderTags:f,selectOnFocus:Ye=!p.freeSolo,size:T="medium",slotProps:we={}}=p,Te=Oe(p,ur),{getRootProps:Ee,getInputProps:Me,getInputLabelProps:ge,getPopupIndicatorProps:st,getClearProps:Fe,getTagProps:lt,getListboxProps:ct,getOptionProps:se,value:z,dirty:ye,expanded:Xe,id:Ve,popupOpen:He,focused:Se,focusedTag:Ce,anchorEl:De,setAnchorEl:Je,inputValue:yt,groupedOptions:he}=Qo(m({},p,{componentName:"Autocomplete"})),ke=!be&&!E&&ye&&!te,je=(!$e||k===!0)&&k!==!1,{onMouseDown:Ue}=Me(),{ref:o}=Ne??{},l=ct(),{ref:g}=l,b=Oe(l,pr),v=ho(g,o),K=Z||(a=>{var d;return(d=a.label)!=null?d:a}),D=m({},p,{disablePortal:ve,expanded:Xe,focused:Se,fullWidth:ce,getOptionLabel:K,hasClearIcon:ke,hasPopupIcon:je,inputFocused:Ce===-1,popupOpen:He,size:T}),L=hr(D);let re;if(ee&&z.length>0){const a=d=>m({className:L.tag,disabled:E},lt(d));f?re=f(z,a,D):re=z.map((d,h)=>{const P=a({index:h}),{key:Y}=P,J=Oe(P,fr);return r.jsx(cr,m({label:K(d),size:T},J,V),Y)})}if(qe>-1&&Array.isArray(re)){const a=re.length-qe;!Se&&a>0&&(re=re.splice(0,qe),re.push(r.jsx("span",{className:L.tag,children:Be(a)},re.length)))}const kt=Ae||(a=>r.jsxs("li",{children:[r.jsx(Sr,{className:L.groupLabel,ownerState:D,component:"div",children:a.group}),r.jsx(jr,{className:L.groupUl,ownerState:D,children:a.children})]},a.key)),Rt=oe||((a,d)=>{const{key:h}=a,P=Oe(a,gr);return r.jsx("li",m({},P,{children:K(d)}),h)}),Ct=(a,d)=>{const h=se({option:a,index:d});return Rt(m({},h,{className:L.option}),a,{selected:h["aria-selected"],index:d,inputValue:yt},D)},ht=(s=we.clearIndicator)!=null?s:X.clearIndicator,Qe=(c=we.paper)!=null?c:X.paper,dt=(C=we.popper)!=null?C:X.popper,i=(x=we.popupIndicator)!=null?x:X.popupIndicator;return r.jsxs(u.Fragment,{children:[r.jsx(xr,m({ref:n,className:pe(L.root,$),ownerState:D},Ee(Te),{children:it({id:Ve,disabled:E,fullWidth:!0,size:T==="small"?"small":void 0,InputLabelProps:ge(),InputProps:m({ref:Je,className:L.inputRoot,startAdornment:re,onClick:a=>{a.target===a.currentTarget&&Ue(a)}},(ke||je)&&{endAdornment:r.jsxs(mr,{className:L.endAdornment,ownerState:D,children:[ke?r.jsx(br,m({},Fe(),{"aria-label":ne,title:ne,ownerState:D},ht,{className:pe(L.clearIndicator,ht==null?void 0:ht.className),children:M})):null,je?r.jsx(vr,m({},st(),{disabled:E,"aria-label":He?le:q,title:He?le:q,ownerState:D},i,{className:pe(L.popupIndicator,i==null?void 0:i.className),children:nt})):null]})}),inputProps:m({className:L.input,disabled:E,readOnly:te},Me())})})),De?r.jsx(yr,m({as:We,disablePortal:ve,style:{width:De?De.clientWidth:null},ownerState:D,role:"presentation",anchorEl:De,open:He},dt,{className:pe(L.popper,dt==null?void 0:dt.className),children:r.jsxs(Cr,m({ownerState:D,as:ue},Qe,{className:pe(L.paper,Qe==null?void 0:Qe.className),children:[Ke&&he.length===0?r.jsx(Ir,{className:L.loading,ownerState:D,children:de}):null,he.length===0&&!$e&&!Ke?r.jsx($r,{className:L.noOptions,ownerState:D,role:"presentation",onMouseDown:a=>{a.preventDefault()},children:ze}):null,he.length>0?r.jsx(wr,m({as:Pe,className:L.listbox,ownerState:D},b,Ne,{ref:v,children:he.map((a,d)=>Re?kt({key:a.key,group:a.group,children:a.options.map((h,P)=>Ct(h,a.index+P))}):Ct(a,d))})):null]}))})):null]})});function kr(e){return tt("MuiCardMedia",e)}ot("MuiCardMedia",["root","media","img"]);const Or=["children","className","component","image","src","style"],Rr=e=>{const{classes:t,isMediaComponent:n,isImageComponent:s}=e;return at({root:["root",n&&"media",s&&"img"]},kr,t)},_r=Q("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:s,isImageComponent:c}=n;return[t.root,s&&t.media,c&&t.img]}})(({ownerState:e})=>m({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),Tr=["video","audio","picture","iframe","img"],Dr=["picture","img"],Lr=u.forwardRef(function(t,n){const s=rt({props:t,name:"MuiCardMedia"}),{children:c,className:C,component:x="div",image:p,src:S,style:_}=s,j=Oe(s,Or),I=Tr.indexOf(x)!==-1,V=!I&&p?m({backgroundImage:`url("${p}")`},_):_,$=m({},s,{component:x,isMediaComponent:I,isImageComponent:Dr.indexOf(x)!==-1}),M=Rr($);return r.jsx(_r,m({className:pe(M.root,C),as:x,role:!I&&p?"img":void 0,ref:n,style:V,ownerState:$,src:I?p||S:void 0},j,{children:c}))});function zr(e){return tt("MuiLinearProgress",e)}ot("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Ar=["className","color","value","valueBuffer","variant"];let gt=e=>e,no,io,so,lo,co,uo;const Bt=4,Mr=Et(no||(no=gt`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Br=Et(io||(io=gt`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Nr=Et(so||(so=gt`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Wr=e=>{const{classes:t,variant:n,color:s}=e,c={root:["root",`color${y(s)}`,n],dashed:["dashed",`dashedColor${y(s)}`],bar1:["bar",`barColor${y(s)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${y(s)}`,n==="buffer"&&`color${y(s)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return at(c,zr,t)},Ft=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?me.lighten(e.palette[t].main,.62):me.darken(e.palette[t].main,.5),Er=Q("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${y(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>m({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Ft(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),Fr=Q("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${y(n.color)}`]]}})(({ownerState:e,theme:t})=>{const n=Ft(t,e.color);return m({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Wt(lo||(lo=gt`
    animation: ${0} 3s infinite linear;
  `),Nr)),Vr=Q("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${y(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>m({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${Bt}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${Bt}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Wt(co||(co=gt`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Mr)),Hr=Q("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${y(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>m({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:Ft(t,e.color),transition:`transform .${Bt}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Wt(uo||(uo=gt`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Br)),Ur=u.forwardRef(function(t,n){const s=rt({props:t,name:"MuiLinearProgress"}),{className:c,color:C="primary",value:x,valueBuffer:p,variant:S="indeterminate"}=s,_=Oe(s,Ar),j=m({},s,{color:C,variant:S}),I=Wr(j),V=Ro(),$={},M={bar1:{},bar2:{}};if((S==="determinate"||S==="buffer")&&x!==void 0){$["aria-valuenow"]=Math.round(x),$["aria-valuemin"]=0,$["aria-valuemax"]=100;let W=x-100;V&&(W=-W),M.bar1.transform=`translateX(${W}%)`}if(S==="buffer"&&p!==void 0){let W=(p||0)-100;V&&(W=-W),M.bar2.transform=`translateX(${W}%)`}return r.jsxs(Er,m({className:pe(I.root,c),ownerState:j,role:"progressbar"},$,{ref:n},_,{children:[S==="buffer"?r.jsx(Fr,{className:I.dashed,ownerState:j}):null,r.jsx(Vr,{className:I.bar1,ownerState:j,style:M.bar1}),S==="determinate"?null:r.jsx(Hr,{className:I.bar2,ownerState:j,style:M.bar2})]}))});function Gr(e){return tt("MuiToggleButton",e)}const ft=ot("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),wo=u.createContext({}),So=u.createContext(void 0);function qr(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}const Kr=["value"],Yr=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Xr=e=>{const{classes:t,fullWidth:n,selected:s,disabled:c,size:C,color:x}=e,p={root:["root",s&&"selected",c&&"disabled",n&&"fullWidth",`size${y(C)}`,x]};return at(p,Gr,t)},Jr=Q(Mt,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${y(n.size)}`]]}})(({theme:e,ownerState:t})=>{let n=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,s;return e.vars&&(n=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,s=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),m({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${ft.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:jt(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ft.selected}`]:{color:n,backgroundColor:e.vars?`rgba(${s} / ${e.vars.palette.action.selectedOpacity})`:jt(n,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${s} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:jt(n,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${s} / ${e.vars.palette.action.selectedOpacity})`:jt(n,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),mt=u.forwardRef(function(t,n){const s=u.useContext(wo),{value:c}=s,C=Oe(s,Kr),x=u.useContext(So),p=_o(m({},C,{selected:qr(t.value,c)}),t),S=rt({props:p,name:"MuiToggleButton"}),{children:_,className:j,color:I="standard",disabled:V=!1,disableFocusRipple:$=!1,fullWidth:M=!1,onChange:W,onClick:H,selected:ne,size:le="medium",value:X}=S,U=Oe(S,Yr),be=m({},S,{color:I,disabled:V,disableFocusRipple:$,fullWidth:M,size:le}),fe=Xr(be),E=ie=>{H&&(H(ie,X),ie.defaultPrevented)||W&&W(ie,X)},B=x||"";return r.jsx(Jr,m({className:pe(C.className,fe.root,j,B),disabled:V,focusRipple:!$,ref:n,onClick:E,onChange:W,value:X,ownerState:be,"aria-pressed":ne},U,{children:_}))});function Qr(e){return tt("MuiToggleButtonGroup",e)}const F=ot("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),Zr=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],ea=e=>{const{classes:t,orientation:n,fullWidth:s,disabled:c}=e,C={root:["root",n==="vertical"&&"vertical",s&&"fullWidth"],grouped:["grouped",`grouped${y(n)}`,c&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return at(C,Qr,t)},ta=Q("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${F.grouped}`]:t.grouped},{[`& .${F.grouped}`]:t[`grouped${y(n.orientation)}`]},{[`& .${F.firstButton}`]:t.firstButton},{[`& .${F.lastButton}`]:t.lastButton},{[`& .${F.middleButton}`]:t.middleButton},t.root,n.orientation==="vertical"&&t.vertical,n.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>m({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${F.grouped}`]:m({},e.orientation==="horizontal"?{[`&.${F.selected} + .${F.grouped}.${F.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${F.selected} + .${F.grouped}.${F.selected}`]:{borderTop:0,marginTop:0}})},e.orientation==="horizontal"?{[`& .${F.firstButton},& .${F.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${F.lastButton},& .${F.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${F.firstButton},& .${F.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${F.lastButton},& .${F.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},e.orientation==="horizontal"?{[`& .${F.lastButton}.${ft.disabled},& .${F.middleButton}.${ft.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${F.lastButton}.${ft.disabled},& .${F.middleButton}.${ft.disabled}`]:{borderTop:"1px solid transparent"}})),po=u.forwardRef(function(t,n){const s=rt({props:t,name:"MuiToggleButtonGroup"}),{children:c,className:C,color:x="standard",disabled:p=!1,exclusive:S=!1,fullWidth:_=!1,onChange:j,orientation:I="horizontal",size:V="medium",value:$}=s,M=Oe(s,Zr),W=m({},s,{disabled:p,fullWidth:_,orientation:I,size:V}),H=ea(W),ne=u.useCallback((E,B)=>{if(!j)return;const ie=$&&$.indexOf(B);let ve;$&&ie>=0?(ve=$.slice(),ve.splice(ie,1)):ve=$?$.concat(B):[B],j(E,ve)},[j,$]),le=u.useCallback((E,B)=>{j&&j(E,$===B?null:B)},[j,$]),X=u.useMemo(()=>({className:H.grouped,onChange:S?le:ne,value:$,size:V,fullWidth:_,color:x,disabled:p}),[H.grouped,S,le,ne,$,V,_,x,p]),U=Go(c),be=U.length,fe=E=>{const B=E===0,ie=E===be-1;return B&&ie?"":B?H.firstButton:ie?H.lastButton:H.middleButton};return r.jsx(ta,m({role:"group",className:pe(H.root,C),ref:n,ownerState:W},M,{children:r.jsx(wo.Provider,{value:X,children:U.map((E,B)=>r.jsx(So.Provider,{value:fe(B),children:E},B))})}))});var bt={},fo;function oa(){if(fo)return bt;fo=1;var e=mo();Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=void 0;var t=e(yo()),n=bo();return bt.default=(0,t.default)((0,n.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),bt}var ra=oa();const aa=vo(ra);var vt={},go;function na(){if(go)return vt;go=1;var e=mo();Object.defineProperty(vt,"__esModule",{value:!0}),vt.default=void 0;var t=e(yo()),n=bo();return vt.default=(0,t.default)((0,n.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),vt}var ia=na();const sa=vo(ia);function la(e,t){const n=e.tmdb_id?String(e.tmdb_id):"",s=t.tmdb_id?String(t.tmdb_id):"",c=e.id?String(e.id):"",C=t.id?String(t.id):"",x=e.media_type?String(e.media_type):"",p=t.media_type?String(t.media_type):"";return n&&s&&n===s||c&&C&&c===C&&x&&p&&x===p}function ya({user:e,isAdmin:t}){const[n,s]=u.useState(""),[c,C]=u.useState("movie"),[x,p]=u.useState([]),[S,_]=u.useState(!1),[j,I]=u.useState(""),[V,$]=u.useState([]),[M,W]=u.useState(!1),[H,ne]=u.useState(null),[le,X]=u.useState([]),[U,be]=u.useState([]),[fe,E]=u.useState(!0),[B,ie]=u.useState({}),[ve,Ie]=u.useState({}),[k,$e]=u.useState({}),[ce,Be]=u.useState("all"),[Z,Re]=u.useState("all"),[Ge,G]=u.useState([]),[qe,Pe]=u.useState(!0),[Ne,Ke]=u.useState(null),[de,ee]=u.useState(null),[ze,_e]=u.useState(!1),[q,ue]=u.useState(!1),[We,nt]=u.useState(100),te=u.useRef(),[Ae,it]=u.useState({}),oe=3e4,[f,Ye]=u.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("searchTourCompleted")?null:0:null),[T,we]=u.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("tooltipsDismissed")==="true":!1),Te=f!==null&&!T,Ee=()=>{we(!0),typeof window<"u"&&window.localStorage&&window.localStorage.setItem("tooltipsDismissed","true"),Ye(null)},Me=()=>{we(!1),typeof window<"u"&&window.localStorage&&(window.localStorage.removeItem("tooltipsDismissed"),window.localStorage.removeItem("searchTourCompleted")),Ye(0)},ge=u.useRef(),st=u.useRef(),Fe=u.useRef(),lt=u.useRef();u.useRef();const ct=()=>{typeof window<"u"&&window.localStorage&&window.localStorage.setItem("searchTourCompleted","true"),Ye(null)},se=()=>{f===3?ct():Ye(o=>o!==null?o+1:null)};u.useEffect(()=>{f===0&&ge.current&&ge.current.focus(),f===1&&ge.current&&ge.current.focus(),f===2&&Fe.current&&Fe.current.focus()},[f]),u.useEffect(()=>{if(E(!0),!e)return;const o=_t(Ze(xe,"diary"),xt("userId","==",e.uid)),l=To(o,g=>{const b=g.docs.map(N=>({...N.data(),_docId:N.id}));be(b),X(b.map(N=>N.tmdb_id||N.id+(N.media_type||c)));const v={};b.forEach(N=>{v[N._docId]=!!N.watched}),$e(v),E(!1)});return()=>l()},[c,e]),u.useEffect(()=>{[...x,...U||[]].forEach(l=>{const g=`${l.id}_${l.media_type||c}`;B[g]||zo(l.id,l.media_type||c).then(b=>{ie(v=>({...v,[g]:b}))}).catch(()=>{ie(b=>({...b,[g]:null}))})})},[x,U,c]);const z=async(o,l,g)=>{if(s(l),ne(null),l.length<2){$([]);return}W(!0);try{const b=await Jt(l,c);$(b.slice(0,8))}catch{$([])}finally{W(!1)}},ye=(o,l)=>{ne(l),s(l?l.title||l.name:""),p(l?[{...l,media_type:l.media_type||c}]:[]),I("")},Xe=async o=>{o.preventDefault(),_(!0),I(""),p([]),ne(null);try{const l=await Jt(n,c);p(l),l.length===0&&I("No results found.")}catch{I("Error fetching results.")}finally{_(!1)}},Ve=async o=>{if(!e)return;if(U.some(v=>la(v,o))){I("This item is already in your diary!");return}const g=_t(Ze(xe,"diary"),xt("userId","==",e.uid),xt("id","==",o.id),xt("media_type","==",o.media_type||c));if(!(await $t(g)).empty){I("This item is already in your diary!");return}try{const v=await Kt(Ze(xe,"diary"),{...o,userId:e.uid,media_type:o.media_type||c,addedAt:new Date().toISOString(),watched:!1}),N=`${o.id}_${o.media_type||c}`,K=await $t(Ze(xe,"preDiaryDiscussions",N,"comments"));if(!K.empty)for(const D of K.docs)await Yt(ut(xe,"diary",v.id,"discussions",D.id),D.data()),await Tt(D.ref);X(D=>[...D,o.tmdb_id||o.id+(o.media_type||c)]),p(D=>D.filter(L=>L.id!==o.id||L.media_type!==(o.media_type||c))),H&&H.id===o.id&&H.media_type===(o.media_type||c)&&ne(null)}catch{I("Failed to add to diary.")}},He=async o=>{if(!o||!e||!o._docId){console.error("Invalid diary item for removal:",o),I("Invalid diary item for removal.");return}try{const l=await Do(ut(xe,"diary",o._docId));if(!l.exists()||!t&&l.data().userId!==e.uid)return;const g=await $t(Ze(xe,"diary",o._docId,"discussions"));if(!g.empty){const b=`${o.id}_${o.media_type||c}`;for(const v of g.docs)await Yt(ut(xe,"preDiaryDiscussions",b,"comments",v.id),v.data()),await Tt(v.ref)}await Tt(ut(xe,"diary",o._docId)),be(b=>b.filter(v=>v._docId!==o._docId)),X(b=>b.filter(v=>v!==(o.tmdb_id||o.id+(o.media_type||c)))),p(b=>b.filter(v=>v.id!==o.id||v.media_type!==(o.media_type||c))),H&&H.id===o.id&&H.media_type===(o.media_type||c)&&ne(null)}catch(l){console.error("Failed to remove from diary:",l,o),I("Failed to remove from diary.")}};async function Se(o){if(!U.find(b=>b._docId===o))return;const g=!k[o];$e(b=>({...b,[o]:g}));try{await Lo(ut(xe,"diary",o),{watched:g})}catch{}}u.useEffect(()=>{let o=!0,l;async function g(){Pe(!0);try{const b=await Qt(c,"day"),v=new Set(U.map(K=>K.id)),N=b.filter(K=>!v.has(K.id));o&&(G(N.slice(0,4)),Pe(!1),Ke(null))}catch{o&&(Ke("Could not load trending."),Pe(!1))}}return g(),l=setInterval(g,60*1e3),()=>{o=!1,clearInterval(l)}},[U,c]);async function Ce(o){if(e)try{const l={...o,userId:e.uid,media_type:c,addedAt:new Date().toISOString(),watched:!1};Object.keys(l).forEach(g=>l[g]===void 0&&delete l[g]),console.log("Diary entry payload:",l),await Kt(Ze(xe,"diary"),l),G(g=>{const b=g.findIndex(N=>N.id===o.id);if(b===-1)return g;const v=[...g];return v.splice(b,1),Qt(c,"day").then(N=>{const K=new Set([...v.map(L=>L.id),...U.map(L=>L.id),o.id]),D=N.filter(L=>!K.has(L.id));D.length>0&&v.splice(b,0,D[0]),G(v)}),v})}catch(l){console.error("Failed to add to diary:",l),alert("Failed to add to diary.")}}const De={};U.filter(o=>(o.media_type||c)===c).forEach(o=>{const l=`${o.id}_${o.media_type||c}`,g=B[l];g&&["flatrate","rent","buy"].forEach(b=>{(g[b]||[]).forEach(v=>{De[v.provider_id]||(De[v.provider_id]=v)})})});const Je=Object.values(De),he=[...U].sort((o,l)=>o.addedAt&&l.addedAt?new Date(l.addedAt)-new Date(o.addedAt):o._docId&&l._docId?l._docId.localeCompare(o._docId):0).filter(o=>{if(ce==="watched"&&!k[o._docId]||ce==="unwatched"&&k[o._docId])return!1;if(Z!=="all"){const l=B[`${o.id}_${o.media_type||c}`];if(l?console.debug("Provider cache for",o.id,l):console.debug("No provider cache for item:",o),!l||(!l.flatrate||!l.flatrate.some(g=>g.provider_id===Z))&&(!l.rent||!l.rent.some(g=>g.provider_id===Z))&&(!l.buy||!l.buy.some(g=>g.provider_id===Z)))return console.debug("Filtered out item",o,"for providerFilter",Z),!1}return o.media_type===c||!o.media_type&&c==="movie"});async function ke(){if(!e||!window.confirm("Are you sure you want to remove all your diary entries? This cannot be undone."))return;const o=_t(Ze(xe,"diary"),xt("userId","==",e.uid)),l=await $t(o),g=Xt(xe),b=[];l.forEach(v=>{const N=v.data();(N.media_type||c)===c&&(b.push({...N,_docId:v.id}),g.delete(v.ref))}),await g.commit(),b.length>0&&(ee(b),_e(!0))}async function je(){if(!de||!e)return;ue(!0);const o=Xt(xe);de.forEach(l=>{const g=ut(xe,"diary",l._docId),{_docId:b,...v}=l;o.set(g,v)}),await o.commit(),ee(null),_e(!1),ue(!1)}u.useEffect(()=>{if(ze){nt(100);let o=Date.now();te.current=setInterval(()=>{const l=Date.now()-o,g=Math.max(0,100-l/oe*100);nt(g),l>=oe&&(_e(!1),ee(null),clearInterval(te.current))},100)}else clearInterval(te.current);return()=>clearInterval(te.current)},[ze]);function Ue(o){const l=`${o.id}_${o.media_type||c}`,g=B[l];if(!g)return r.jsx(A,{variant:"body2",color:"text.secondary",children:"No streaming info."});const b=[{label:"Streaming",key:"flatrate"},{label:"Rent",key:"rent"},{label:"Buy",key:"buy"}];let v=!1;function N(K){Ie(D=>({...D,[K]:!0}))}return r.jsxs(O,{sx:{width:"100%"},children:[b.map((K,D)=>{const L=g[K.key]||[];return L.length?(v=!0,r.jsxs(O,{sx:{mb:D<b.length-1?2:0},children:[r.jsxs(A,{variant:"body2",sx:{fontWeight:700,mb:.5,letterSpacing:.5,width:"100%"},children:[K.label,":"]}),r.jsx(O,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,minHeight:40,flexWrap:"wrap",width:"100%"},children:L.map(re=>r.jsx(O,{sx:{width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2,background:"#222",boxShadow:"0 2px 8px #0002",border:"1px solid #444"},children:re.logo_path&&!ve[re.provider_id]?r.jsx("img",{src:`https://image.tmdb.org/t/p/w92${re.logo_path}`,alt:re.provider_name,style:{width:32,height:32,objectFit:"contain",display:"block"},onError:()=>N(re.provider_id)}):r.jsx(A,{sx:{color:"white",fontSize:10,fontWeight:600,textAlign:"center",px:1,lineHeight:1.1},children:re.provider_name})},re.provider_id))})]},K.key)):null}),!v&&r.jsx(A,{variant:"body2",color:"text.secondary",children:"No streaming info."})]})}return r.jsxs(O,{sx:{mt:4,mb:4},children:[e&&r.jsx(O,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:2},children:r.jsx("img",{src:No,alt:"App Logo",style:{height:80,marginBottom:8}})}),r.jsxs(O,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mb:3,position:"relative"},children:[r.jsx(A,{variant:"h5",sx:{fontWeight:900,letterSpacing:1,color:"#ffffff",textAlign:"center"},children:"Search for Movies / Tv Shows"}),r.jsx(ae,{variant:"text",onClick:Me,sx:{mt:1},children:"Need Instructions?"}),r.jsx(O,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",position:"absolute",right:32,top:0},children:e&&e.isAdmin&&r.jsx(ae,{variant:"outlined",color:"info",sx:{mb:1},children:"Admin"})})]}),r.jsx(Gt,{open:!!j,autoHideDuration:4e3,onClose:()=>I(""),anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(qt,{onClose:()=>I(""),severity:"warning",sx:{width:"100%"},children:j})}),r.jsx(wt,{open:Te&&f===0,title:r.jsxs(O,{children:[r.jsx(A,{fontWeight:700,children:"Search for Movies or TV Shows"}),r.jsx(A,{variant:"body2",children:"Type a title and press Search to get results."}),r.jsxs(O,{sx:{display:"flex",flexDirection:"row",gap:1,mt:1},children:[r.jsx(ae,{onClick:se,variant:"contained",size:"small",children:"Next"}),r.jsx(ae,{onClick:Ee,variant:"contained",color:"secondary",size:"small",sx:{color:"black"},children:"Dismiss Tips"})]})]}),placement:"bottom",arrow:!0,PopperProps:{disablePortal:!0,modifiers:[{name:"offset",options:{offset:[100,0]}}]},componentsProps:{tooltip:{sx:{maxWidth:260}}},disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:r.jsx("span",{ref:ge,tabIndex:-1})}),r.jsx(O,{sx:{display:"flex",justifyContent:"center",mt:2},children:r.jsx(wt,{open:Te&&f===1,title:r.jsxs(O,{children:[r.jsx(A,{fontWeight:700,children:"Switch Type"}),r.jsx(A,{variant:"body2",children:"Toggle between searching for movies or TV shows."}),r.jsxs(O,{sx:{display:"flex",flexDirection:"row",gap:1,mt:1},children:[r.jsx(ae,{onClick:se,variant:"contained",size:"small",children:"Next"}),r.jsx(ae,{onClick:Ee,variant:"contained",color:"secondary",size:"small",sx:{color:"black"},children:"Dismiss Tips"})]})]}),placement:"bottom",arrow:!0,PopperProps:{disablePortal:!0},componentsProps:{tooltip:{sx:{maxWidth:260}}},disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:r.jsxs(po,{value:c,exclusive:!0,onChange:(o,l)=>l&&C(l),size:"large",color:"primary",ref:st,children:[r.jsx(mt,{value:"movie",sx:{fontSize:18,px:3},children:"Movie"}),r.jsx(mt,{value:"tv",sx:{fontSize:18,px:3},children:"TV Show"})]})})}),r.jsx("form",{onSubmit:Xe,children:r.jsxs(zt,{direction:{xs:"column",sm:"row"},spacing:3,alignItems:"center",sx:{mb:1},children:[r.jsx(Pr,{freeSolo:!0,options:V,getOptionLabel:o=>o.title||o.name||"",loading:M,onInputChange:z,onChange:ye,value:H,inputValue:n,sx:{width:"100%",minWidth:{xs:"unset",sm:775},maxWidth:1500,fontSize:20},renderOption:(o,l)=>{console.log("AUTOCOMPLETE OPTION:",l);let g;return l.id!==void 0&&l.media_type!==void 0?g=`${l.id}-${l.media_type}`:l.id!==void 0?g=`id-${l.id}`:l.title?g=`title-${l.title}`:l.name?g=`name-${l.name}`:g=`random-${Math.random()}`,u.createElement("li",{...o,key:g,style:{display:"flex",alignItems:"center",gap:12,padding:8}},l.poster_path&&r.jsx("img",{src:`https://image.tmdb.org/t/p/w92${l.poster_path}`,alt:"poster",style:{width:45,height:65,objectFit:"cover",borderRadius:4}}),r.jsxs("span",{style:{fontSize:18,fontWeight:500},children:[l.title||l.name,r.jsxs(A,{component:"span",variant:"caption",color:"text.secondary",sx:{ml:1},children:["[",l.media_type==="movie"?"Movie":"TV","]"]})]}))},renderInput:o=>r.jsx(Eo,{...o,label:"Type to search for movies or shows...",size:"medium",InputProps:{...o.InputProps,style:{fontSize:20,height:56},endAdornment:r.jsxs(r.Fragment,{children:[M?r.jsx(St,{color:"inherit",size:22}):null,o.InputProps.endAdornment]})},inputProps:{...o.inputProps,style:{fontSize:20}},required:!0,ref:ge})}),r.jsx(ae,{type:"submit",variant:"contained",disabled:S,sx:{fontSize:18,px:4,height:56,ml:{xs:0,sm:2},mt:{xs:2,sm:0},width:{xs:"100%",sm:"auto"}},children:S?r.jsx(St,{size:26}):"Search"})]})}),r.jsx(zt,{spacing:3,sx:{mt:4},direction:"column",justifyContent:"flex-start",ref:Fe,children:x.map(o=>r.jsxs(Dt,{sx:{width:"100%",maxWidth:600,m:"0 auto",display:"flex",flexDirection:"row",alignItems:"stretch",boxShadow:4,p:2},children:[r.jsx(O,{sx:{width:100,minWidth:100,height:150,display:"flex",alignItems:"center",justifyContent:"center",mr:2},children:o.poster_path?r.jsx("img",{src:`https://image.tmdb.org/t/p/w185${o.poster_path}`,alt:o.title||o.name,style:{width:100,height:150,objectFit:"cover",borderRadius:8}}):r.jsx(O,{sx:{width:100,height:150,bgcolor:"#eee",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"#888"},children:"No Image"})}),r.jsxs(O,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:0},children:[r.jsxs(O,{children:[r.jsx(A,{variant:"h6",fontWeight:700,sx:{fontSize:18,mb:.5,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o.title||o.name}),r.jsx(A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:o.release_date||o.first_air_date||"Year N/A"}),r.jsx(A,{variant:"body2",color:"text.secondary",sx:{mb:1,fontSize:14,minHeight:36},children:o.overview?o.overview.slice(0,120)+(o.overview.length>120?"...":""):"No description."})]}),r.jsx(O,{sx:{mt:1,display:"flex",justifyContent:"flex-end",gap:1},children:U.some(l=>l.id===o.id)?r.jsx(A,{variant:"body2",color:"success.main",sx:{fontWeight:600,fontSize:13,px:2,borderRadius:2,alignSelf:"center"},children:"Already in Library"}):r.jsx(ae,{variant:"contained",color:"primary",size:"small",sx:{fontWeight:600,fontSize:13,px:2,borderRadius:2},onClick:()=>Ve(o),ref:lt,children:"Add"})})]})]},o.id+(o.media_type||c)))}),r.jsx(wt,{open:Te&&f===2,title:r.jsxs(O,{children:[r.jsx(A,{fontWeight:700,children:"View Search Results"}),r.jsx(A,{variant:"body2",children:"See the results below. Click 'Add' to add an item to your diary."}),r.jsxs(O,{sx:{display:"flex",flexDirection:"row",gap:1,mt:1},children:[r.jsx(ae,{onClick:se,variant:"contained",size:"small",children:"Next"}),r.jsx(ae,{onClick:Ee,variant:"contained",color:"secondary",size:"small",sx:{color:"black"},children:"Dismiss Tips"})]})]}),placement:"top",arrow:!0,PopperProps:{disablePortal:!0},componentsProps:{tooltip:{sx:{maxWidth:260}}},disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:r.jsx(O,{sx:{width:"100%"},children:r.jsxs(O,{sx:{mt:8,mb:10},ref:Fe,children:[r.jsx(A,{variant:"h4",sx:{fontWeight:700,mb:3,textAlign:"center"},children:"My Diary"}),r.jsxs(O,{sx:{mb:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[r.jsx(A,{variant:"subtitle1",sx:{fontWeight:600},children:"Show:"}),r.jsxs(po,{value:ce,exclusive:!0,onChange:(o,l)=>l&&Be(l),size:"small",color:"primary",children:[r.jsx(mt,{value:"all",children:"All"}),r.jsx(mt,{value:"watched",children:"Watched"}),r.jsx(mt,{value:"unwatched",children:"Unwatched"})]})]}),r.jsxs(O,{sx:{mb:2,display:"flex",gap:1,alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[r.jsx(ae,{variant:Z==="all"?"contained":"outlined",onClick:()=>Re("all"),sx:{minWidth:60,p:1.2},children:r.jsx(A,{sx:{fontSize:18,fontWeight:600},children:"All Providers"})}),Je.map(o=>r.jsx(wt,{title:o.provider_name,children:r.jsx(ae,{variant:Z===o.provider_id?"contained":"outlined",onClick:()=>Re(o.provider_id),sx:{minWidth:60,p:1.2},children:r.jsx("img",{src:`https://image.tmdb.org/t/p/w92${o.logo_path}`,alt:o.provider_name,style:{width:44,height:44,objectFit:"contain",borderRadius:6}})})},o.provider_id))]}),r.jsx(O,{sx:{display:"flex",justifyContent:"center",mb:2},children:r.jsx(ae,{variant:"outlined",color:"error",onClick:ke,sx:{fontWeight:700},children:"Remove All"})}),fe?r.jsx(O,{sx:{textAlign:"center",mt:4},children:r.jsx(St,{})}):he.length===0?r.jsxs(A,{color:"text.secondary",children:["No ",c==="movie"?"movies":"TV shows"," added yet!"]}):r.jsx(zt,{spacing:4,sx:{mt:8},direction:"column",justifyContent:"flex-start",children:he.map(o=>r.jsxs(O,{sx:{mt:2,width:"100%"},children:[r.jsxs(Dt,{sx:{width:"100%",maxWidth:"100%",display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"stretch",p:{xs:1,sm:2},m:"0 auto",boxShadow:4,borderRadius:2,position:"relative",minWidth:0,boxSizing:"border-box",overflow:"visible",bgcolor:"#23272f",border:"1px solid #444"},children:[r.jsx(O,{sx:{flex:{xs:"none",sm:"0 0 120px"},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:150,sm:"100%"},width:{xs:"100%",sm:120},mb:{xs:1.5,sm:0},mx:{xs:"auto",sm:0},boxSizing:"border-box"},children:o.poster_path?r.jsx(Lr,{component:"img",sx:{width:{xs:90,sm:100},height:{xs:135,sm:180},objectFit:"cover",borderRadius:2,boxShadow:2,boxSizing:"border-box"},image:`https://image.tmdb.org/t/p/w300${o.poster_path}`,alt:o.title||o.name}):r.jsx(O,{sx:{width:{xs:90,sm:100},height:{xs:135,sm:180},bgcolor:"#eee",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",color:"#888",fontSize:16,boxSizing:"border-box"},children:"No Image"})}),r.jsxs(O,{sx:{flex:1.2,pl:{xs:0,sm:2},pr:{xs:0,sm:2},display:"flex",flexDirection:"column",height:{xs:"auto",sm:"100%"},width:"100%",alignItems:{xs:"center",sm:"flex-start"},textAlign:{xs:"center",sm:"left"},minWidth:0,maxWidth:{sm:260,md:320},mb:{xs:1.5,sm:0},boxSizing:"border-box",overflow:"visible"},children:[r.jsx(A,{variant:"h6",sx:{fontWeight:700,mb:.5,fontSize:{xs:16,sm:20},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:o.title||o.name}),r.jsx(A,{variant:"subtitle2",color:"text.secondary",sx:{mb:1,fontSize:{xs:13,sm:15},width:"100%"},children:o.release_date||o.first_air_date||"Year N/A"}),r.jsx(A,{variant:"body2",color:"text.secondary",sx:{mb:2,fontSize:{xs:12,sm:14},minHeight:24,maxHeight:{xs:42,sm:56},overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:o.overview?o.overview.slice(0,120)+(o.overview.length>120?"...":""):"No description."}),r.jsxs(O,{sx:{mt:"auto",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:{xs:"center",sm:"flex-end"},width:"100%",gap:1},children:[r.jsx(ae,{variant:"outlined",color:"info",size:"small",startIcon:r.jsx(aa,{}),sx:{mb:{xs:1,sm:0},mr:{xs:0,sm:1},width:{xs:"100%",sm:"auto"}},onClick:()=>{const l="https://showswatched.github.io/showswatched/?item="+encodeURIComponent(o._docId);navigator.share?navigator.share({title:o.title||o.name,text:"Check out this show/movie I watched!",url:l}):(navigator.clipboard.writeText(l),alert("Share link copied to clipboard!"))},children:"Share"}),r.jsx(ae,{variant:k[o._docId]?"contained":"outlined",color:k[o._docId]?"success":"inherit",size:"small",sx:{mb:{xs:1,sm:0},mr:{xs:0,sm:1},width:{xs:"100%",sm:"auto"}},onClick:()=>Se(o._docId),children:k[o._docId]?"Watched":"Unwatched"}),r.jsx(ae,{variant:"outlined",color:"error",size:"small",sx:{mb:{xs:1,sm:0},width:{xs:"100%",sm:"auto"}},onClick:()=>He(o),children:"Remove"})]})]}),r.jsx(O,{sx:{flex:1,minWidth:{xs:"100%",sm:200},maxWidth:{xs:"100%",sm:400},minHeight:60,height:{xs:"auto",sm:"100%"},borderLeft:{xs:"none",sm:"1px solid #eee"},borderTop:{xs:"1px solid #eee",sm:"none"},pl:{xs:0,sm:2},pr:{xs:0,sm:2},py:1,mt:{xs:1,sm:0},display:"flex",flexDirection:"column",justifyContent:"center",boxSizing:"border-box",alignItems:"center",overflowX:"auto"},children:Ue(o)})]}),r.jsx(O,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:r.jsx(ae,{variant:Ae[o._docId]?"contained":"outlined",size:"small",onClick:()=>it(l=>({...l,[o._docId]:!l[o._docId]})),sx:{fontSize:13},children:Ae[o._docId]?"Hide Discussion":"Show Discussion"})}),Ae[o._docId]&&r.jsx(Bo,{diaryDocId:o._docId,user:e,diaryOwnerId:o.userId,isAdmin:e&&e.isAdmin,itemId:o.id,mediaType:o.media_type||c})]},o._docId))})]})})}),r.jsxs(O,{sx:{mb:6,mt:4},children:[r.jsxs(A,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{textAlign:"center"},children:["Trending ",c==="movie"?"Movies":"TV Shows"]}),qe?r.jsx(O,{sx:{textAlign:"center",py:4},children:r.jsx(St,{})}):Ne?r.jsx(A,{color:"error",align:"center",children:Ne}):r.jsx(eo,{container:!0,spacing:3,justifyContent:"center",children:Ge.map(o=>r.jsx(eo,{item:!0,xs:12,sm:6,md:4,lg:3,sx:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:r.jsx(Dt,{elevation:2,sx:{borderRadius:2,textAlign:"center",height:"100%",width:"100%",maxWidth:{xs:"100%",sm:200},mx:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:r.jsxs(Ao,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,p:2},children:[r.jsxs(O,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,width:"100%"},children:[r.jsx("img",{src:o.poster_path?`https://image.tmdb.org/t/p/w300${o.poster_path}`:"https://via.placeholder.com/200x300?text=No+Image",alt:o.title||o.name,style:{width:120,height:180,borderRadius:8,objectFit:"cover",marginBottom:10}}),r.jsx(A,{variant:"subtitle1",fontWeight:600,sx:{mb:1,fontSize:18},children:o.name||o.title}),r.jsx(A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:o.first_air_date||o.release_date?(o.first_air_date||o.release_date).slice(0,4):"Year N/A"}),r.jsx(A,{variant:"body2",color:"text.secondary",sx:{mb:1,minHeight:40,maxHeight:60,overflow:"hidden",textOverflow:"ellipsis"},children:o.overview?o.overview.slice(0,120)+(o.overview.length>120?"...":""):"No description."})]}),r.jsx(ae,{variant:"contained",color:"primary",sx:{mt:2,fontWeight:700,fontSize:16,px:3},onClick:()=>Ce(o),disabled:U.some(l=>l.id===o.id),children:U.some(l=>l.id===o.id)?"Added":"Add to Diary"})]})})},o.id))})]}),r.jsx(Gt,{open:ze,autoHideDuration:null,onClose:()=>_e(!1),anchorOrigin:{vertical:"top",horizontal:"center"},sx:{".MuiSnackbarContent-root":{background:"linear-gradient(120deg, #232526 0%, #ff9800 100%)",color:"white",fontWeight:900,fontSize:22,boxShadow:"0 8px 40px 0 #000b",borderRadius:4,border:"3px solid #fff",padding:"20px 28px",minWidth:480,justifyContent:"center",alignItems:"center",opacity:.98,position:"relative",overflow:"hidden",zIndex:1400}},children:r.jsxs(qt,{severity:"warning",sx:{width:"100%",background:"transparent",color:"white",fontWeight:900,fontSize:22,border:"none",boxShadow:"none",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",flexDirection:"column",pb:0,textShadow:"0 2px 8px #000a"},icon:!1,action:r.jsxs(O,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(ae,{color:"inherit",size:"large",onClick:je,disabled:q,sx:{background:"white",color:"#d32f2f",fontWeight:900,fontSize:20,px:3,py:1.5,borderRadius:2,boxShadow:"0 2px 8px #d32f2f44",ml:3,"&:hover":{background:"#ffe0e0",color:"#b71c1c"}},children:q?"Restoring...":"UNDO"}),r.jsx(Nt,{"aria-label":"close",color:"inherit",onClick:()=>_e(!1),sx:{ml:2,color:"white",fontSize:30},children:r.jsx(sa,{fontSize:"inherit"})})]}),children:[r.jsx("span",{style:{fontWeight:900,letterSpacing:1},children:"All diary items removed!"})," Â  You can ",r.jsx("span",{style:{textDecoration:"underline",fontWeight:900},children:"UNDO"})," this action.",r.jsx(Ur,{variant:"determinate",value:We,sx:{width:"100%",height:10,borderRadius:4,mt:2,background:"#fff3","& .MuiLinearProgress-bar":{background:"linear-gradient(90deg, #ff9800 0%, #f44336 100%)"}}})]})})]})}export{ya as default};
