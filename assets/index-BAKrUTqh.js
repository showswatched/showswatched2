(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function QE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var _m={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function MA(){if(H_)return ql;H_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return ql.Fragment=e,ql.jsx=n,ql.jsxs=n,ql}var F_;function VA(){return F_||(F_=1,_m.exports=MA()),_m.exports}var b=VA(),Em={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function kA(){if(G_)return Oe;G_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function R(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Y={};function F(V,ie,ue){this.props=V,this.context=ie,this.refs=Y,this.updater=ue||k}F.prototype.isReactComponent={},F.prototype.setState=function(V,ie){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ie,"setState")},F.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=F.prototype;function se(V,ie,ue){this.props=V,this.context=ie,this.refs=Y,this.updater=ue||k}var ne=se.prototype=new Q;ne.constructor=se,M(ne,F.prototype),ne.isPureReactComponent=!0;var he=Array.isArray,me={H:null,A:null,T:null,S:null,V:null},Ae=Object.prototype.hasOwnProperty;function D(V,ie,ue,re,pe,Me){return ue=Me.ref,{$$typeof:i,type:V,key:ie,ref:ue!==void 0?ue:null,props:Me}}function S(V,ie){return D(V.type,ie,void 0,void 0,void 0,V.props)}function I(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function x(V){var ie={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ue){return ie[ue]})}var O=/\/+/g;function L(V,ie){return typeof V=="object"&&V!==null&&V.key!=null?x(""+V.key):ie.toString(36)}function C(){}function qe(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(ie){V.status==="pending"&&(V.status="fulfilled",V.value=ie)},function(ie){V.status==="pending"&&(V.status="rejected",V.reason=ie)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function He(V,ie,ue,re,pe){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var be=!1;if(V===null)be=!0;else switch(Me){case"bigint":case"string":case"number":be=!0;break;case"object":switch(V.$$typeof){case i:case e:be=!0;break;case E:return be=V._init,He(be(V._payload),ie,ue,re,pe)}}if(be)return pe=pe(V),be=re===""?"."+L(V,0):re,he(pe)?(ue="",be!=null&&(ue=be.replace(O,"$&/")+"/"),He(pe,ie,ue,"",function(_n){return _n})):pe!=null&&(I(pe)&&(pe=S(pe,ue+(pe.key==null||V&&V.key===pe.key?"":(""+pe.key).replace(O,"$&/")+"/")+be)),ie.push(pe)),1;be=0;var Et=re===""?".":re+":";if(he(V))for(var it=0;it<V.length;it++)re=V[it],Me=Et+L(re,it),be+=He(re,ie,ue,Me,pe);else if(it=R(V),typeof it=="function")for(V=it.call(V),it=0;!(re=V.next()).done;)re=re.value,Me=Et+L(re,it++),be+=He(re,ie,ue,Me,pe);else if(Me==="object"){if(typeof V.then=="function")return He(qe(V),ie,ue,re,pe);throw ie=String(V),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return be}function X(V,ie,ue){if(V==null)return V;var re=[],pe=0;return He(V,re,"","",function(Me){return ie.call(ue,Me,pe++)}),re}function ae(V){if(V._status===-1){var ie=V._result;ie=ie(),ie.then(function(ue){(V._status===0||V._status===-1)&&(V._status=1,V._result=ue)},function(ue){(V._status===0||V._status===-1)&&(V._status=2,V._result=ue)}),V._status===-1&&(V._status=0,V._result=ie)}if(V._status===1)return V._result.default;throw V._result}var ve=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Le(){}return Oe.Children={map:X,forEach:function(V,ie,ue){X(V,function(){ie.apply(this,arguments)},ue)},count:function(V){var ie=0;return X(V,function(){ie++}),ie},toArray:function(V){return X(V,function(ie){return ie})||[]},only:function(V){if(!I(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Oe.Component=F,Oe.Fragment=n,Oe.Profiler=o,Oe.PureComponent=se,Oe.StrictMode=s,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return me.H.useMemoCache(V)}},Oe.cache=function(V){return function(){return V.apply(null,arguments)}},Oe.cloneElement=function(V,ie,ue){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var re=M({},V.props),pe=V.key,Me=void 0;if(ie!=null)for(be in ie.ref!==void 0&&(Me=void 0),ie.key!==void 0&&(pe=""+ie.key),ie)!Ae.call(ie,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ie.ref===void 0||(re[be]=ie[be]);var be=arguments.length-2;if(be===1)re.children=ue;else if(1<be){for(var Et=Array(be),it=0;it<be;it++)Et[it]=arguments[it+2];re.children=Et}return D(V.type,pe,void 0,void 0,Me,re)},Oe.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Oe.createElement=function(V,ie,ue){var re,pe={},Me=null;if(ie!=null)for(re in ie.key!==void 0&&(Me=""+ie.key),ie)Ae.call(ie,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(pe[re]=ie[re]);var be=arguments.length-2;if(be===1)pe.children=ue;else if(1<be){for(var Et=Array(be),it=0;it<be;it++)Et[it]=arguments[it+2];pe.children=Et}if(V&&V.defaultProps)for(re in be=V.defaultProps,be)pe[re]===void 0&&(pe[re]=be[re]);return D(V,Me,void 0,void 0,null,pe)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(V){return{$$typeof:m,render:V}},Oe.isValidElement=I,Oe.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:ae}},Oe.memo=function(V,ie){return{$$typeof:g,type:V,compare:ie===void 0?null:ie}},Oe.startTransition=function(V){var ie=me.T,ue={};me.T=ue;try{var re=V(),pe=me.S;pe!==null&&pe(ue,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Le,ve)}catch(Me){ve(Me)}finally{me.T=ie}},Oe.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()},Oe.use=function(V){return me.H.use(V)},Oe.useActionState=function(V,ie,ue){return me.H.useActionState(V,ie,ue)},Oe.useCallback=function(V,ie){return me.H.useCallback(V,ie)},Oe.useContext=function(V){return me.H.useContext(V)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(V,ie){return me.H.useDeferredValue(V,ie)},Oe.useEffect=function(V,ie,ue){var re=me.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(V,ie)},Oe.useId=function(){return me.H.useId()},Oe.useImperativeHandle=function(V,ie,ue){return me.H.useImperativeHandle(V,ie,ue)},Oe.useInsertionEffect=function(V,ie){return me.H.useInsertionEffect(V,ie)},Oe.useLayoutEffect=function(V,ie){return me.H.useLayoutEffect(V,ie)},Oe.useMemo=function(V,ie){return me.H.useMemo(V,ie)},Oe.useOptimistic=function(V,ie){return me.H.useOptimistic(V,ie)},Oe.useReducer=function(V,ie,ue){return me.H.useReducer(V,ie,ue)},Oe.useRef=function(V){return me.H.useRef(V)},Oe.useState=function(V){return me.H.useState(V)},Oe.useSyncExternalStore=function(V,ie,ue){return me.H.useSyncExternalStore(V,ie,ue)},Oe.useTransition=function(){return me.H.useTransition()},Oe.version="19.1.0",Oe}var K_;function Ep(){return K_||(K_=1,Em.exports=kA()),Em.exports}var U=Ep();const os=QE(U);var Tm={exports:{}},Hl={},bm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function PA(){return $_||($_=1,function(i){function e(X,ae){var ve=X.length;X.push(ae);e:for(;0<ve;){var Le=ve-1>>>1,V=X[Le];if(0<o(V,ae))X[Le]=ae,X[ve]=V,ve=Le;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ae=X[0],ve=X.pop();if(ve!==ae){X[0]=ve;e:for(var Le=0,V=X.length,ie=V>>>1;Le<ie;){var ue=2*(Le+1)-1,re=X[ue],pe=ue+1,Me=X[pe];if(0>o(re,ve))pe<V&&0>o(Me,re)?(X[Le]=Me,X[pe]=ve,Le=pe):(X[Le]=re,X[ue]=ve,Le=ue);else if(pe<V&&0>o(Me,ve))X[Le]=Me,X[pe]=ve,Le=pe;else break e}}return ae}function o(X,ae){var ve=X.sortIndex-ae.sortIndex;return ve!==0?ve:X.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,A=null,R=3,k=!1,M=!1,Y=!1,F=!1,Q=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function he(X){for(var ae=n(g);ae!==null;){if(ae.callback===null)s(g);else if(ae.startTime<=X)s(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(g)}}function me(X){if(Y=!1,he(X),!M)if(n(p)!==null)M=!0,Ae||(Ae=!0,L());else{var ae=n(g);ae!==null&&He(me,ae.startTime-X)}}var Ae=!1,D=-1,S=5,I=-1;function x(){return F?!0:!(i.unstable_now()-I<S)}function O(){if(F=!1,Ae){var X=i.unstable_now();I=X;var ae=!0;try{e:{M=!1,Y&&(Y=!1,se(D),D=-1),k=!0;var ve=R;try{t:{for(he(X),A=n(p);A!==null&&!(A.expirationTime>X&&x());){var Le=A.callback;if(typeof Le=="function"){A.callback=null,R=A.priorityLevel;var V=Le(A.expirationTime<=X);if(X=i.unstable_now(),typeof V=="function"){A.callback=V,he(X),ae=!0;break t}A===n(p)&&s(p),he(X)}else s(p);A=n(p)}if(A!==null)ae=!0;else{var ie=n(g);ie!==null&&He(me,ie.startTime-X),ae=!1}}break e}finally{A=null,R=ve,k=!1}ae=void 0}}finally{ae?L():Ae=!1}}}var L;if(typeof ne=="function")L=function(){ne(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,qe=C.port2;C.port1.onmessage=O,L=function(){qe.postMessage(null)}}else L=function(){Q(O,0)};function He(X,ae){D=Q(function(){X(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_next=function(X){switch(R){case 1:case 2:case 3:var ae=3;break;default:ae=R}var ve=R;R=ae;try{return X()}finally{R=ve}},i.unstable_requestPaint=function(){F=!0},i.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ve=R;R=X;try{return ae()}finally{R=ve}},i.unstable_scheduleCallback=function(X,ae,ve){var Le=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Le+ve:Le):ve=Le,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ve+V,X={id:E++,callback:ae,priorityLevel:X,startTime:ve,expirationTime:V,sortIndex:-1},ve>Le?(X.sortIndex=ve,e(g,X),n(p)===null&&X===n(g)&&(Y?(se(D),D=-1):Y=!0,He(me,ve-Le))):(X.sortIndex=V,e(p,X),M||k||(M=!0,Ae||(Ae=!0,L()))),X},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(X){var ae=R;return function(){var ve=R;R=ae;try{return X.apply(this,arguments)}finally{R=ve}}}}(wm)),wm}var Q_;function LA(){return Q_||(Q_=1,bm.exports=PA()),bm.exports}var Sm={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function UA(){if(Y_)return an;Y_=1;var i=Ep();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:g,implementation:E}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},an.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},an.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},an.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},an.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,A=m(E,g.crossOrigin),R=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:R,fetchPriority:k}):E==="script"&&s.d.X(p,{crossOrigin:A,integrity:R,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},an.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},an.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,A=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},an.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},an.requestFormReset=function(p){s.d.r(p)},an.unstable_batchedUpdates=function(p,g){return p(g)},an.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},an.useFormStatus=function(){return f.H.useHostTransitionStatus()},an.version="19.1.0",an}var X_;function YE(){if(X_)return Sm.exports;X_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=UA(),Sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function jA(){if(W_)return Hl;W_=1;var i=LA(),e=Ep(),n=YE();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,l=d;break}if(T===l){_=!0,l=h,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=h;break}if(T===l){_=!0,l=d,a=h;break}T=T.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function qe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case F:return"Profiler";case Y:return"StrictMode";case me:return"Suspense";case Ae:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case he:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return r=t.displayName||null,r!==null?r:qe(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return qe(t(r))}catch{}}return null}var He=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Le=[],V=-1;function ie(t){return{current:t}}function ue(t){0>V||(t.current=Le[V],Le[V]=null,V--)}function re(t,r){V++,Le[V]=t.current,t.current=r}var pe=ie(null),Me=ie(null),be=ie(null),Et=ie(null);function it(t,r){switch(re(be,r),re(Me,t),re(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?y_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=y_(r),t=v_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(pe),re(pe,t)}function _n(){ue(pe),ue(Me),ue(be)}function ei(t){t.memoizedState!==null&&re(Et,t);var r=pe.current,a=v_(r,t.type);r!==a&&(re(Me,t),re(pe,a))}function In(t){Me.current===t&&(ue(pe),ue(Me)),Et.current===t&&(ue(Et),Ll._currentValue=ve)}var di=Object.prototype.hasOwnProperty,mi=i.unstable_scheduleCallback,jn=i.unstable_cancelCallback,As=i.unstable_shouldYield,Rs=i.unstable_requestPaint,fn=i.unstable_now,zo=i.unstable_getCurrentPriorityLevel,Rr=i.unstable_ImmediatePriority,Ir=i.unstable_UserBlockingPriority,Bi=i.unstable_NormalPriority,Bo=i.unstable_LowPriority,Cr=i.unstable_IdlePriority,Is=i.log,Ta=i.unstable_setDisableYieldValue,mt=null,Ye=null;function dn(t){if(typeof Is=="function"&&Ta(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(mt,t)}catch{}}var Vt=Math.clz32?Math.clz32:qi,ba=Math.log,qo=Math.LN2;function qi(t){return t>>>=0,t===0?32:31-(ba(t)/qo|0)|0}var pi=256,Hi=4194304;function En(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fi(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=En(l):(_&=T,_!==0?h=En(_):a||(a=T&~t,a!==0&&(h=En(a))))):(T=l&~d,T!==0?h=En(T):_!==0?h=En(_):a||(a=l&~t,a!==0&&(h=En(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function gi(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Cs(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ns(){var t=pi;return pi<<=1,(pi&4194048)===0&&(pi=256),t}function z(){var t=Hi;return Hi<<=1,(Hi&62914560)===0&&(Hi=4194304),t}function le(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function fe(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _e(t,r,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,N=t.expirationTimes,H=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-Vt(a),ee=1<<W;T[W]=0,N[W]=-1;var G=H[W];if(G!==null)for(H[W]=null,W=0;W<G.length;W++){var K=G[W];K!==null&&(K.lane&=-536870913)}a&=~ee}l!==0&&ge(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~r))}function ge(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Vt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function xe(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Vt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function dt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Cn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function $t(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:L_(t.type))}function rn(t,r){var a=ae.p;try{return ae.p=t,r()}finally{ae.p=a}}var Ze=Math.random().toString(36).slice(2),ct="__reactFiber$"+Ze,yt="__reactProps$"+Ze,Xe="__reactContainer$"+Ze,Tt="__reactEvents$"+Ze,bf="__reactListeners$"+Ze,Nr="__reactHandles$"+Ze,ku="__reactResources$"+Ze,Ds="__reactMarker$"+Ze;function Dr(t){delete t[ct],delete t[yt],delete t[Tt],delete t[bf],delete t[Nr]}function Gi(t){var r=t[ct];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Xe]||a[ct]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=b_(t);t!==null;){if(a=t[ct])return a;t=b_(t)}return r}t=a,a=t.parentNode}return null}function yi(t){if(t=t[ct]||t[Xe]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function vi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function mn(t){var r=t[ku];return r||(r=t[ku]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(t){t[Ds]=!0}var Ho=new Set,wa={};function ti(t,r){Ki(t,r),Ki(t+"Capture",r)}function Ki(t,r){for(wa[t]=r,t=0;t<r.length;t++)Ho.add(r[t])}var Pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lu={},xs={};function Uu(t){return di.call(xs,t)?!0:di.call(Lu,t)?!1:Pu.test(t)?xs[t]=!0:(Lu[t]=!0,!1)}function xr(t,r,a){if(Uu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function _i(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Qt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Os,ju;function $i(t){if(Os===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Os=r&&r[1]||"",ju=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Os+t+ju}var Sa=!1;function Aa(t,r){if(!t||Sa)return"";Sa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var G=K}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(K){G=K}t.call(ee.prototype)}}else{try{throw Error()}catch(K){G=K}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var N=_.split(`
`),H=T.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===H.length)for(l=N.length-1,h=H.length-1;1<=l&&0<=h&&N[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==H[h]){var W=`
`+N[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{Sa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?$i(a):""}function Fo(t){switch(t.tag){case 26:case 27:case 5:return $i(t.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 15:return Aa(t.type,!1);case 11:return Aa(t.type.render,!1);case 1:return Aa(t.type,!0);case 31:return $i("Activity");default:return""}}function Ra(t){try{var r="";do r+=Fo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Go(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wf(t){var r=Go(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ia(t){t._valueTracker||(t._valueTracker=wf(t))}function Ko(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Go(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Sf=/[\n"\\]/g;function Nt(t){return t.replace(Sf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Nn(t,r,a,l,h,d,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+pn(r)):t.value!==""+pn(r)&&(t.value=""+pn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?Or(t,_,pn(r)):a!=null?Or(t,_,pn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+pn(T):t.removeAttribute("name")}function Vs(t,r,a,l,h,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+pn(a):"",r=r!=null?""+pn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Or(t,r,a){r==="number"&&Ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Qi(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+pn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function rt(t,r,a){if(r!=null&&(r=""+pn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+pn(a):""}function ks(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(He(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=pn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function zn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Ps=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Ps.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function $o(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&zu(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&zu(t,d,r[d])}function Qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(t){return Rf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Yi=null;function Bn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xi=null,Wi=null;function Yo(t){var r=yi(t);if(r&&(t=r.stateNode)){var a=t[yt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Nn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[yt]||null;if(!h)throw Error(s(90));Nn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Ko(l)}break e;case"textarea":rt(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Qi(t,!!a.multiple,r,!1)}}}var Ei=!1;function Bu(t,r,a){if(Ei)return t(r,a);Ei=!0;try{var l=t(r);return l}finally{if(Ei=!1,(Xi!==null||Wi!==null)&&(Vc(),Xi&&(r=Xi,t=Wi,Wi=Xi=null,Yo(r),t)))for(r=0;r<t.length;r++)Yo(t[r])}}function Ls(t,r){var a=t.stateNode;if(a===null)return null;var l=a[yt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(ni)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{qn=!1}var Ti=null,Mr=null,Zi=null;function Xo(){if(Zi)return Zi;var t,r=Mr,a=r.length,l,h="value"in Ti?Ti.value:Ti.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===h[d-l];l++);return Zi=h.slice(t,1<l?1-l:void 0)}function bi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function wi(){return!0}function Wo(){return!1}function Bt(t){function r(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?wi:Wo,this.isPropagationStopped=Wo,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),r}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Bt(Je),js=E({},Je,{view:0,detail:0}),qu=Bt(js),Da,xa,Si,zs=E({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Si&&(Si&&t.type==="mousemove"?(Da=t.screenX-Si.screenX,xa=t.screenY-Si.screenY):xa=Da=0,Si=t),Da)},movementY:function(t){return"movementY"in t?t.movementY:xa}}),Hn=Bt(zs),Hu=E({},zs,{dataTransfer:0}),If=Bt(Hu),Bs=E({},js,{relatedTarget:0}),Oa=Bt(Bs),Zo=E({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=Bt(Zo),Fu=E({},Je,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Va=Bt(Fu),Cf=E({},Je,{data:0}),Jo=Bt(Cf),qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function el(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ku[t])?!!r[t]:!1}function Hs(){return el}var $u=E({},js,{key:function(t){if(t.key){var r=qs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=bi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hs,charCode:function(t){return t.type==="keypress"?bi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ka=Bt($u),Qu=E({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tl=Bt(Qu),Ji=E({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hs}),Yu=Bt(Ji),Xu=E({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wu=Bt(Xu),Zu=E({},zs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pa=Bt(Zu),gn=E({},Je,{newState:0,oldState:0}),Ju=Bt(gn),ec=[9,13,27,32],Ai=ni&&"CompositionEvent"in window,c=null;ni&&"documentMode"in document&&(c=document.documentMode);var y=ni&&"TextEvent"in window&&!c,v=ni&&(!Ai||c&&8<c&&11>=c),w=" ",B=!1;function $(t,r){switch(t){case"keyup":return ec.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fe=!1;function kt(t,r){switch(t){case"compositionend":return oe(r);case"keypress":return r.which!==32?null:(B=!0,w);case"textInput":return t=r.data,t===w&&B?null:t;default:return null}}function Ge(t,r){if(Fe)return t==="compositionend"||!Ai&&$(t,r)?(t=Xo(),Zi=Mr=Ti=null,Fe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!qt[t.type]:r==="textarea"}function er(t,r,a,l){Xi?Wi?Wi.push(l):Wi=[l]:Xi=l,r=zc(r,"onChange"),0<r.length&&(a=new Na("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Yt=null,Ri=null;function nl(t){f_(t,0)}function tc(t){var r=vi(t);if(Ko(r))return t}function Mg(t,r){if(t==="change")return r}var Vg=!1;if(ni){var Nf;if(ni){var Df="oninput"in document;if(!Df){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),Df=typeof kg.oninput=="function"}Nf=Df}else Nf=!1;Vg=Nf&&(!document.documentMode||9<document.documentMode)}function Pg(){Yt&&(Yt.detachEvent("onpropertychange",Lg),Ri=Yt=null)}function Lg(t){if(t.propertyName==="value"&&tc(Ri)){var r=[];er(r,Ri,t,Bn(t)),Bu(nl,r)}}function uS(t,r,a){t==="focusin"?(Pg(),Yt=r,Ri=a,Yt.attachEvent("onpropertychange",Lg)):t==="focusout"&&Pg()}function cS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tc(Ri)}function hS(t,r){if(t==="click")return tc(r)}function fS(t,r){if(t==="input"||t==="change")return tc(r)}function dS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Dn=typeof Object.is=="function"?Object.is:dS;function il(t,r){if(Dn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!di.call(r,h)||!Dn(t[h],r[h]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jg(t,r){var a=Ug(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ug(a)}}function zg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?zg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ms(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ms(t.document)}return r}function xf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var mS=ni&&"documentMode"in document&&11>=document.documentMode,La=null,Of=null,rl=null,Mf=!1;function qg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mf||La==null||La!==Ms(l)||(l=La,"selectionStart"in l&&xf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rl&&il(rl,l)||(rl=l,l=zc(Of,"onSelect"),0<l.length&&(r=new Na("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=La)))}function Fs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ua={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},Vf={},Hg={};ni&&(Hg=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Gs(t){if(Vf[t])return Vf[t];if(!Ua[t])return t;var r=Ua[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Hg)return Vf[t]=r[a];return t}var Fg=Gs("animationend"),Gg=Gs("animationiteration"),Kg=Gs("animationstart"),pS=Gs("transitionrun"),gS=Gs("transitionstart"),yS=Gs("transitioncancel"),$g=Gs("transitionend"),Qg=new Map,kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kf.push("scrollEnd");function ii(t,r){Qg.set(t,r),ti(r,[t])}var Yg=new WeakMap;function Fn(t,r){if(typeof t=="object"&&t!==null){var a=Yg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Ra(r)},Yg.set(t,r),r)}return{value:t,source:r,stack:Ra(r)}}var Gn=[],ja=0,Pf=0;function nc(){for(var t=ja,r=Pf=ja=0;r<t;){var a=Gn[r];Gn[r++]=null;var l=Gn[r];Gn[r++]=null;var h=Gn[r];Gn[r++]=null;var d=Gn[r];if(Gn[r++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Xg(a,h,d)}}function ic(t,r,a,l){Gn[ja++]=t,Gn[ja++]=r,Gn[ja++]=a,Gn[ja++]=l,Pf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Lf(t,r,a,l){return ic(t,r,a,l),rc(t)}function za(t,r){return ic(t,null,null,r),rc(t)}function Xg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Vt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function rc(t){if(50<Nl)throw Nl=0,Hd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ba={};function vS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,r,a,l){return new vS(t,r,a,l)}function Uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tr(t,r){var a=t.alternate;return a===null?(a=xn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Wg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function sc(t,r,a,l,h,d){var _=0;if(l=t,typeof t=="function")Uf(t)&&(_=1);else if(typeof t=="string")_=EA(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=xn(31,a,r,h),t.elementType=I,t.lanes=d,t;case M:return Ks(a.children,h,d,r);case Y:_=8,h|=24;break;case F:return t=xn(12,a,r,h|2),t.elementType=F,t.lanes=d,t;case me:return t=xn(13,a,r,h),t.elementType=me,t.lanes=d,t;case Ae:return t=xn(19,a,r,h),t.elementType=Ae,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:case ne:_=10;break e;case se:_=9;break e;case he:_=11;break e;case D:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=xn(_,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Ks(t,r,a,l){return t=xn(7,t,l,r),t.lanes=a,t}function jf(t,r,a){return t=xn(6,t,null,r),t.lanes=a,t}function zf(t,r,a){return r=xn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var qa=[],Ha=0,ac=null,oc=0,Kn=[],$n=0,$s=null,nr=1,ir="";function Qs(t,r){qa[Ha++]=oc,qa[Ha++]=ac,ac=t,oc=r}function Zg(t,r,a){Kn[$n++]=nr,Kn[$n++]=ir,Kn[$n++]=$s,$s=t;var l=nr;t=ir;var h=32-Vt(l)-1;l&=~(1<<h),a+=1;var d=32-Vt(r)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,nr=1<<32-Vt(r)+h|a<<h|l,ir=d+t}else nr=1<<d|a<<h|l,ir=t}function Bf(t){t.return!==null&&(Qs(t,1),Zg(t,1,0))}function qf(t){for(;t===ac;)ac=qa[--Ha],qa[Ha]=null,oc=qa[--Ha],qa[Ha]=null;for(;t===$s;)$s=Kn[--$n],Kn[$n]=null,ir=Kn[--$n],Kn[$n]=null,nr=Kn[--$n],Kn[$n]=null}var yn=null,bt=null,We=!1,Ys=null,Ii=!1,Hf=Error(s(519));function Xs(t){var r=Error(s(418,""));throw ol(Fn(r,t)),Hf}function Jg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[ct]=t,r[yt]=l,a){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(a=0;a<xl.length;a++)je(xl[a],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":je("invalid",r),Vs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ia(r);break;case"select":je("invalid",r);break;case"textarea":je("invalid",r),ks(r,l.value,l.defaultValue,l.children),Ia(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||g_(r.textContent,a)?(l.popover!=null&&(je("beforetoggle",r),je("toggle",r)),l.onScroll!=null&&je("scroll",r),l.onScrollEnd!=null&&je("scrollend",r),l.onClick!=null&&(r.onclick=Bc),r=!0):r=!1,r||Xs(t)}function ey(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:yn=yn.return}}function sl(t){if(t!==yn)return!1;if(!We)return ey(t),We=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||sm(t.type,t.memoizedProps)),a=!a),a&&bt&&Xs(t),ey(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){bt=si(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}bt=null}}else r===27?(r=bt,Yr(t.type)?(t=um,um=null,bt=t):bt=r):bt=yn?si(t.stateNode.nextSibling):null;return!0}function al(){bt=yn=null,We=!1}function ty(){var t=Ys;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),Ys=null),t}function ol(t){Ys===null?Ys=[t]:Ys.push(t)}var Ff=ie(null),Ws=null,rr=null;function Vr(t,r,a){re(Ff,r._currentValue),r._currentValue=a}function sr(t){t._currentValue=Ff.current,ue(Ff)}function Gf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Kf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var N=0;N<r.length;N++)if(T.context===r[N]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Gf(d.return,a,t),l||(_=null);break e}d=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Gf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ll(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var T=h.type;Dn(h.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(h===Et.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ll):t=[Ll])}h=h.return}t!==null&&Kf(r,t,a,l),r.flags|=262144}function lc(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zs(t){Ws=t,rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return ny(Ws,t)}function uc(t,r){return Ws===null&&Zs(t),ny(t,r)}function ny(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},rr===null){if(t===null)throw Error(s(308));rr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else rr=rr.next=r;return a}var _S=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},ES=i.unstable_scheduleCallback,TS=i.unstable_NormalPriority,Lt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new _S,data:new Map,refCount:0}}function ul(t){t.refCount--,t.refCount===0&&ES(TS,function(){t.controller.abort()})}var cl=null,Qf=0,Fa=0,Ga=null;function bS(t,r){if(cl===null){var a=cl=[];Qf=0,Fa=Xd(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Qf++,r.then(iy,iy),r}function iy(){if(--Qf===0&&cl!==null){Ga!==null&&(Ga.status="fulfilled");var t=cl;cl=null,Fa=0,Ga=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function wS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var ry=X.S;X.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&bS(t,r),ry!==null&&ry(t,r)};var Js=ie(null);function Yf(){var t=Js.current;return t!==null?t:ht.pooledCache}function cc(t,r){r===null?re(Js,Js.current):re(Js,r.pool)}function sy(){var t=Yf();return t===null?null:{parent:Lt._currentValue,pool:t}}var hl=Error(s(460)),ay=Error(s(474)),hc=Error(s(542)),Xf={then:function(){}};function oy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fc(){}function ly(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(fc,fc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,cy(t),t;default:if(typeof r.status=="string")r.then(fc,fc);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,cy(t),t}throw fl=r,hl}}var fl=null;function uy(){if(fl===null)throw Error(s(459));var t=fl;return fl=null,t}function cy(t){if(t===hl||t===hc)throw Error(s(483))}var kr=!1;function Wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Pr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Lr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=rc(t),Xg(t,null,a),r}return ic(t,l,r,a),rc(t)}function dl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,xe(t,a)}}function Jf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ed=!1;function ml(){if(ed){var t=Ga;if(t!==null)throw t}}function pl(t,r,a,l){ed=!1;var h=t.updateQueue;kr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,H=N.next;N.next=null,_===null?d=H:_.next=H,_=N;var W=t.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=H:T.next=H,W.lastBaseUpdate=N))}if(d!==null){var ee=h.baseState;_=0,W=H=N=null,T=d;do{var G=T.lane&-536870913,K=G!==T.lane;if(K?(Ke&G)===G:(l&G)===G){G!==0&&G===Fa&&(ed=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ie=t,we=T;G=r;var ot=a;switch(we.tag){case 1:if(Ie=we.payload,typeof Ie=="function"){ee=Ie.call(ot,ee,G);break e}ee=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=we.payload,G=typeof Ie=="function"?Ie.call(ot,ee,G):Ie,G==null)break e;ee=E({},ee,G);break e;case 2:kr=!0}}G=T.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[G]:K.push(G))}else K={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(H=W=K,N=ee):W=W.next=K,_|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;K=T,T=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);W===null&&(N=ee),h.baseState=N,h.firstBaseUpdate=H,h.lastBaseUpdate=W,d===null&&(h.shared.lanes=0),Gr|=_,t.lanes=_,t.memoizedState=ee}}function hy(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function fy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)hy(a[t],r)}var Ka=ie(null),dc=ie(0);function dy(t,r){t=fr,re(dc,t),re(Ka,r),fr=t|r.baseLanes}function td(){re(dc,fr),re(Ka,Ka.current)}function nd(){fr=dc.current,ue(Ka),ue(dc)}var Ur=0,Ve=null,st=null,Dt=null,mc=!1,$a=!1,ea=!1,pc=0,gl=0,Qa=null,SS=0;function At(){throw Error(s(321))}function id(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Dn(t[a],r[a]))return!1;return!0}function rd(t,r,a,l,h,d){return Ur=d,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=t===null||t.memoizedState===null?Xy:Wy,ea=!1,d=a(l,h),ea=!1,$a&&(d=py(r,a,l,h)),my(t),d}function my(t){X.H=Tc;var r=st!==null&&st.next!==null;if(Ur=0,Dt=st=Ve=null,mc=!1,gl=0,Qa=null,r)throw Error(s(300));t===null||Ht||(t=t.dependencies,t!==null&&lc(t)&&(Ht=!0))}function py(t,r,a,l){Ve=t;var h=0;do{if($a&&(Qa=null),gl=0,$a=!1,25<=h)throw Error(s(301));if(h+=1,Dt=st=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=xS,d=r(a,l)}while($a);return d}function AS(){var t=X.H,r=t.useState()[0];return r=typeof r.then=="function"?yl(r):r,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(Ve.flags|=1024),r}function sd(){var t=pc!==0;return pc=0,t}function ad(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function od(t){if(mc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}mc=!1}Ur=0,Dt=st=Ve=null,$a=!1,gl=pc=0,Qa=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ve.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function xt(){if(st===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var r=Dt===null?Ve.memoizedState:Dt.next;if(r!==null)Dt=r,st=t;else{if(t===null)throw Ve.alternate===null?Error(s(467)):Error(s(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Dt===null?Ve.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(t){var r=gl;return gl+=1,Qa===null&&(Qa=[]),t=ly(Qa,t,r),r=Ve,(Dt===null?r.memoizedState:Dt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Xy:Wy),t}function gc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yl(t);if(t.$$typeof===ne)return sn(t)}throw Error(s(438,String(t)))}function ud(t){var r=null,a=Ve.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=ld(),Ve.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=x;return r.index++,a}function ar(t,r){return typeof r=="function"?r(t):r}function yc(t){var r=xt();return cd(r,st,t)}function cd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var T=_=null,N=null,H=r,W=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(Ke&ee)===ee:(Ur&ee)===ee){var G=H.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===Fa&&(W=!0);else if((Ur&G)===G){H=H.next,G===Fa&&(W=!0);continue}else ee={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(T=N=ee,_=d):N=N.next=ee,Ve.lanes|=G,Gr|=G;ee=H.action,ea&&a(d,ee),d=H.hasEagerState?H.eagerState:a(d,ee)}else G={lane:ee,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(T=N=G,_=d):N=N.next=G,Ve.lanes|=ee,Gr|=ee;H=H.next}while(H!==null&&H!==r);if(N===null?_=d:N.next=T,!Dn(d,t.memoizedState)&&(Ht=!0,W&&(a=Ga,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function hd(t){var r=xt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);Dn(d,r.memoizedState)||(Ht=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function gy(t,r,a){var l=Ve,h=xt(),d=We;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!Dn((st||h).memoizedState,a);_&&(h.memoizedState=a,Ht=!0),h=h.queue;var T=_y.bind(null,l,h,t);if(vl(2048,8,T,[t]),h.getSnapshot!==r||_||Dt!==null&&Dt.memoizedState.tag&1){if(l.flags|=2048,Ya(9,vc(),vy.bind(null,l,h,a,r),null),ht===null)throw Error(s(349));d||(Ur&124)!==0||yy(l,r,a)}return a}function yy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ve.updateQueue,r===null?(r=ld(),Ve.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function vy(t,r,a,l){r.value=a,r.getSnapshot=l,Ey(r)&&Ty(t)}function _y(t,r,a){return a(function(){Ey(r)&&Ty(t)})}function Ey(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Dn(t,a)}catch{return!0}}function Ty(t){var r=za(t,2);r!==null&&Pn(r,t,2)}function fd(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),ea){dn(!0);try{a()}finally{dn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:t},r}function by(t,r,a,l){return t.baseState=a,cd(t,st,typeof l=="function"?l:ar)}function RS(t,r,a,l,h){if(Ec(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,wy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function wy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=X.T,_={};X.T=_;try{var T=a(h,l),N=X.S;N!==null&&N(_,T),Sy(t,r,T)}catch(H){dd(t,r,H)}finally{X.T=d}}else try{d=a(h,l),Sy(t,r,d)}catch(H){dd(t,r,H)}}function Sy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ay(t,r,l)},function(l){return dd(t,r,l)}):Ay(t,r,a)}function Ay(t,r,a){r.status="fulfilled",r.value=a,Ry(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,wy(t,a)))}function dd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Ry(r),r=r.next;while(r!==l)}t.action=null}function Ry(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Iy(t,r){return r}function Cy(t,r){if(We){var a=ht.formState;if(a!==null){e:{var l=Ve;if(We){if(bt){t:{for(var h=bt,d=Ii;h.nodeType!==8;){if(!d){h=null;break t}if(h=si(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){bt=si(h.nextSibling),l=h.data==="F!";break e}}Xs(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iy,lastRenderedState:r},a.queue=l,a=$y.bind(null,Ve,l),l.dispatch=a,l=fd(!1),d=vd.bind(null,Ve,!1,l.queue),l=Tn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=RS.bind(null,Ve,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Ny(t){var r=xt();return Dy(r,st,t)}function Dy(t,r,a){if(r=cd(t,r,Iy)[0],t=yc(ar)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=yl(r)}catch(_){throw _===hl?hc:_}else l=r;r=xt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(Ve.flags|=2048,Ya(9,vc(),IS.bind(null,h,a),null)),[l,d,t]}function IS(t,r){t.action=r}function xy(t){var r=xt(),a=st;if(a!==null)return Dy(r,a,t);xt(),r=r.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ya(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=ld(),Ve.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function vc(){return{destroy:void 0,resource:void 0}}function Oy(){return xt().memoizedState}function _c(t,r,a,l){var h=Tn();l=l===void 0?null:l,Ve.flags|=t,h.memoizedState=Ya(1|r,vc(),a,l)}function vl(t,r,a,l){var h=xt();l=l===void 0?null:l;var d=h.memoizedState.inst;st!==null&&l!==null&&id(l,st.memoizedState.deps)?h.memoizedState=Ya(r,d,a,l):(Ve.flags|=t,h.memoizedState=Ya(1|r,d,a,l))}function My(t,r){_c(8390656,8,t,r)}function Vy(t,r){vl(2048,8,t,r)}function ky(t,r){return vl(4,2,t,r)}function Py(t,r){return vl(4,4,t,r)}function Ly(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Uy(t,r,a){a=a!=null?a.concat([t]):null,vl(4,4,Ly.bind(null,r,t),a)}function md(){}function jy(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&id(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function zy(t,r){var a=xt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&id(r,l[1]))return l[0];if(l=t(),ea){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[l,r],l}function pd(t,r,a){return a===void 0||(Ur&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Hv(),Ve.lanes|=t,Gr|=t,a)}function By(t,r,a,l){return Dn(a,r)?a:Ka.current!==null?(t=pd(t,a,l),Dn(t,r)||(Ht=!0),t):(Ur&42)===0?(Ht=!0,t.memoizedState=a):(t=Hv(),Ve.lanes|=t,Gr|=t,r)}function qy(t,r,a,l,h){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=X.T,T={};X.T=T,vd(t,!1,r,a);try{var N=h(),H=X.S;if(H!==null&&H(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var W=wS(N,l);_l(t,r,W,kn(t))}else _l(t,r,l,kn(t))}catch(ee){_l(t,r,{then:function(){},status:"rejected",reason:ee},kn())}finally{ae.p=d,X.T=_}}function CS(){}function gd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Hy(t).queue;qy(t,h,r,ve,a===null?CS:function(){return Fy(t),a(l)})}function Hy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Fy(t){var r=Hy(t).next.queue;_l(t,r,{},kn())}function yd(){return sn(Ll)}function Gy(){return xt().memoizedState}function Ky(){return xt().memoizedState}function NS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();t=Pr(a);var l=Lr(r,t,a);l!==null&&(Pn(l,r,a),dl(l,r,a)),r={cache:$f()},t.payload=r;return}r=r.return}}function DS(t,r,a){var l=kn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ec(t)?Qy(r,a):(a=Lf(t,r,a,l),a!==null&&(Pn(a,t,l),Yy(a,r,l)))}function $y(t,r,a){var l=kn();_l(t,r,a,l)}function _l(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ec(t))Qy(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,T=d(_,a);if(h.hasEagerState=!0,h.eagerState=T,Dn(T,_))return ic(t,r,h,0),ht===null&&nc(),!1}catch{}finally{}if(a=Lf(t,r,h,l),a!==null)return Pn(a,t,l),Yy(a,r,l),!0}return!1}function vd(t,r,a,l){if(l={lane:2,revertLane:Xd(),action:l,hasEagerState:!1,eagerState:null,next:null},Ec(t)){if(r)throw Error(s(479))}else r=Lf(t,a,l,2),r!==null&&Pn(r,t,2)}function Ec(t){var r=t.alternate;return t===Ve||r!==null&&r===Ve}function Qy(t,r){$a=mc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Yy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,xe(t,a)}}var Tc={readContext:sn,use:gc,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Xy={readContext:sn,use:gc,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:sn,useEffect:My,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,_c(4194308,4,Ly.bind(null,r,t),a)},useLayoutEffect:function(t,r){return _c(4194308,4,t,r)},useInsertionEffect:function(t,r){_c(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(ea){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var h=a(r);if(ea){dn(!0);try{a(r)}finally{dn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=DS.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=fd(t);var r=t.queue,a=$y.bind(null,Ve,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:md,useDeferredValue:function(t,r){var a=Tn();return pd(a,t,r)},useTransition:function(){var t=fd(!1);return t=qy.bind(null,Ve,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ve,h=Tn();if(We){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ht===null)throw Error(s(349));(Ke&124)!==0||yy(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,My(_y.bind(null,l,d,t),[t]),l.flags|=2048,Ya(9,vc(),vy.bind(null,l,d,a,r),null),a},useId:function(){var t=Tn(),r=ht.identifierPrefix;if(We){var a=ir,l=nr;a=(l&~(1<<32-Vt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=pc++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=SS++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:yd,useFormState:Cy,useActionState:Cy,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=vd.bind(null,Ve,!0,a),a.dispatch=r,[t,r]},useMemoCache:ud,useCacheRefresh:function(){return Tn().memoizedState=NS.bind(null,Ve)}},Wy={readContext:sn,use:gc,useCallback:jy,useContext:sn,useEffect:Vy,useImperativeHandle:Uy,useInsertionEffect:ky,useLayoutEffect:Py,useMemo:zy,useReducer:yc,useRef:Oy,useState:function(){return yc(ar)},useDebugValue:md,useDeferredValue:function(t,r){var a=xt();return By(a,st.memoizedState,t,r)},useTransition:function(){var t=yc(ar)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:gy,useId:Gy,useHostTransitionStatus:yd,useFormState:Ny,useActionState:Ny,useOptimistic:function(t,r){var a=xt();return by(a,st,t,r)},useMemoCache:ud,useCacheRefresh:Ky},xS={readContext:sn,use:gc,useCallback:jy,useContext:sn,useEffect:Vy,useImperativeHandle:Uy,useInsertionEffect:ky,useLayoutEffect:Py,useMemo:zy,useReducer:hd,useRef:Oy,useState:function(){return hd(ar)},useDebugValue:md,useDeferredValue:function(t,r){var a=xt();return st===null?pd(a,t,r):By(a,st.memoizedState,t,r)},useTransition:function(){var t=hd(ar)[0],r=xt().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:gy,useId:Gy,useHostTransitionStatus:yd,useFormState:xy,useActionState:xy,useOptimistic:function(t,r){var a=xt();return st!==null?by(a,st,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ud,useCacheRefresh:Ky},Xa=null,El=0;function bc(t){var r=El;return El+=1,Xa===null&&(Xa=[]),ly(Xa,t,r)}function Tl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function wc(t,r){throw r.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Zy(t){var r=t._init;return r(t._payload)}function Jy(t){function r(j,P){if(t){var q=j.deletions;q===null?(j.deletions=[P],j.flags|=16):q.push(P)}}function a(j,P){if(!t)return null;for(;P!==null;)r(j,P),P=P.sibling;return null}function l(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function h(j,P){return j=tr(j,P),j.index=0,j.sibling=null,j}function d(j,P,q){return j.index=q,t?(q=j.alternate,q!==null?(q=q.index,q<P?(j.flags|=67108866,P):q):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,P,q,Z){return P===null||P.tag!==6?(P=jf(q,j.mode,Z),P.return=j,P):(P=h(P,q),P.return=j,P)}function N(j,P,q,Z){var ye=q.type;return ye===M?W(j,P,q.props.children,Z,q.key):P!==null&&(P.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&Zy(ye)===P.type)?(P=h(P,q.props),Tl(P,q),P.return=j,P):(P=sc(q.type,q.key,q.props,null,j.mode,Z),Tl(P,q),P.return=j,P)}function H(j,P,q,Z){return P===null||P.tag!==4||P.stateNode.containerInfo!==q.containerInfo||P.stateNode.implementation!==q.implementation?(P=zf(q,j.mode,Z),P.return=j,P):(P=h(P,q.children||[]),P.return=j,P)}function W(j,P,q,Z,ye){return P===null||P.tag!==7?(P=Ks(q,j.mode,Z,ye),P.return=j,P):(P=h(P,q),P.return=j,P)}function ee(j,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=jf(""+P,j.mode,q),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case R:return q=sc(P.type,P.key,P.props,null,j.mode,q),Tl(q,P),q.return=j,q;case k:return P=zf(P,j.mode,q),P.return=j,P;case S:var Z=P._init;return P=Z(P._payload),ee(j,P,q)}if(He(P)||L(P))return P=Ks(P,j.mode,q,null),P.return=j,P;if(typeof P.then=="function")return ee(j,bc(P),q);if(P.$$typeof===ne)return ee(j,uc(j,P),q);wc(j,P)}return null}function G(j,P,q,Z){var ye=P!==null?P.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:T(j,P,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case R:return q.key===ye?N(j,P,q,Z):null;case k:return q.key===ye?H(j,P,q,Z):null;case S:return ye=q._init,q=ye(q._payload),G(j,P,q,Z)}if(He(q)||L(q))return ye!==null?null:W(j,P,q,Z,null);if(typeof q.then=="function")return G(j,P,bc(q),Z);if(q.$$typeof===ne)return G(j,P,uc(j,q),Z);wc(j,q)}return null}function K(j,P,q,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(q)||null,T(P,j,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:return j=j.get(Z.key===null?q:Z.key)||null,N(P,j,Z,ye);case k:return j=j.get(Z.key===null?q:Z.key)||null,H(P,j,Z,ye);case S:var Pe=Z._init;return Z=Pe(Z._payload),K(j,P,q,Z,ye)}if(He(Z)||L(Z))return j=j.get(q)||null,W(P,j,Z,ye,null);if(typeof Z.then=="function")return K(j,P,q,bc(Z),ye);if(Z.$$typeof===ne)return K(j,P,q,uc(P,Z),ye);wc(P,Z)}return null}function Ie(j,P,q,Z){for(var ye=null,Pe=null,Ee=P,Se=P=0,Gt=null;Ee!==null&&Se<q.length;Se++){Ee.index>Se?(Gt=Ee,Ee=null):Gt=Ee.sibling;var Qe=G(j,Ee,q[Se],Z);if(Qe===null){Ee===null&&(Ee=Gt);break}t&&Ee&&Qe.alternate===null&&r(j,Ee),P=d(Qe,P,Se),Pe===null?ye=Qe:Pe.sibling=Qe,Pe=Qe,Ee=Gt}if(Se===q.length)return a(j,Ee),We&&Qs(j,Se),ye;if(Ee===null){for(;Se<q.length;Se++)Ee=ee(j,q[Se],Z),Ee!==null&&(P=d(Ee,P,Se),Pe===null?ye=Ee:Pe.sibling=Ee,Pe=Ee);return We&&Qs(j,Se),ye}for(Ee=l(Ee);Se<q.length;Se++)Gt=K(Ee,j,Se,q[Se],Z),Gt!==null&&(t&&Gt.alternate!==null&&Ee.delete(Gt.key===null?Se:Gt.key),P=d(Gt,P,Se),Pe===null?ye=Gt:Pe.sibling=Gt,Pe=Gt);return t&&Ee.forEach(function(es){return r(j,es)}),We&&Qs(j,Se),ye}function we(j,P,q,Z){if(q==null)throw Error(s(151));for(var ye=null,Pe=null,Ee=P,Se=P=0,Gt=null,Qe=q.next();Ee!==null&&!Qe.done;Se++,Qe=q.next()){Ee.index>Se?(Gt=Ee,Ee=null):Gt=Ee.sibling;var es=G(j,Ee,Qe.value,Z);if(es===null){Ee===null&&(Ee=Gt);break}t&&Ee&&es.alternate===null&&r(j,Ee),P=d(es,P,Se),Pe===null?ye=es:Pe.sibling=es,Pe=es,Ee=Gt}if(Qe.done)return a(j,Ee),We&&Qs(j,Se),ye;if(Ee===null){for(;!Qe.done;Se++,Qe=q.next())Qe=ee(j,Qe.value,Z),Qe!==null&&(P=d(Qe,P,Se),Pe===null?ye=Qe:Pe.sibling=Qe,Pe=Qe);return We&&Qs(j,Se),ye}for(Ee=l(Ee);!Qe.done;Se++,Qe=q.next())Qe=K(Ee,j,Se,Qe.value,Z),Qe!==null&&(t&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Se:Qe.key),P=d(Qe,P,Se),Pe===null?ye=Qe:Pe.sibling=Qe,Pe=Qe);return t&&Ee.forEach(function(OA){return r(j,OA)}),We&&Qs(j,Se),ye}function ot(j,P,q,Z){if(typeof q=="object"&&q!==null&&q.type===M&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case R:e:{for(var ye=q.key;P!==null;){if(P.key===ye){if(ye=q.type,ye===M){if(P.tag===7){a(j,P.sibling),Z=h(P,q.props.children),Z.return=j,j=Z;break e}}else if(P.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&Zy(ye)===P.type){a(j,P.sibling),Z=h(P,q.props),Tl(Z,q),Z.return=j,j=Z;break e}a(j,P);break}else r(j,P);P=P.sibling}q.type===M?(Z=Ks(q.props.children,j.mode,Z,q.key),Z.return=j,j=Z):(Z=sc(q.type,q.key,q.props,null,j.mode,Z),Tl(Z,q),Z.return=j,j=Z)}return _(j);case k:e:{for(ye=q.key;P!==null;){if(P.key===ye)if(P.tag===4&&P.stateNode.containerInfo===q.containerInfo&&P.stateNode.implementation===q.implementation){a(j,P.sibling),Z=h(P,q.children||[]),Z.return=j,j=Z;break e}else{a(j,P);break}else r(j,P);P=P.sibling}Z=zf(q,j.mode,Z),Z.return=j,j=Z}return _(j);case S:return ye=q._init,q=ye(q._payload),ot(j,P,q,Z)}if(He(q))return Ie(j,P,q,Z);if(L(q)){if(ye=L(q),typeof ye!="function")throw Error(s(150));return q=ye.call(q),we(j,P,q,Z)}if(typeof q.then=="function")return ot(j,P,bc(q),Z);if(q.$$typeof===ne)return ot(j,P,uc(j,q),Z);wc(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,P!==null&&P.tag===6?(a(j,P.sibling),Z=h(P,q),Z.return=j,j=Z):(a(j,P),Z=jf(q,j.mode,Z),Z.return=j,j=Z),_(j)):a(j,P)}return function(j,P,q,Z){try{El=0;var ye=ot(j,P,q,Z);return Xa=null,ye}catch(Ee){if(Ee===hl||Ee===hc)throw Ee;var Pe=xn(29,Ee,null,j.mode);return Pe.lanes=Z,Pe.return=j,Pe}finally{}}}var Wa=Jy(!0),ev=Jy(!1),Qn=ie(null),Ci=null;function jr(t){var r=t.alternate;re(Ut,Ut.current&1),re(Qn,t),Ci===null&&(r===null||Ka.current!==null||r.memoizedState!==null)&&(Ci=t)}function tv(t){if(t.tag===22){if(re(Ut,Ut.current),re(Qn,t),Ci===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ci=t)}}else zr()}function zr(){re(Ut,Ut.current),re(Qn,Qn.current)}function or(t){ue(Qn),Ci===t&&(Ci=null),ue(Ut)}var Ut=ie(0);function Sc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||lm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function _d(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ed={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Pr(l);h.payload=r,a!=null&&(h.callback=a),r=Lr(t,h,l),r!==null&&(Pn(r,t,l),dl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Pr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Lr(t,h,l),r!==null&&(Pn(r,t,l),dl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=kn(),l=Pr(a);l.tag=2,r!=null&&(l.callback=r),r=Lr(t,l,a),r!==null&&(Pn(r,t,a),dl(r,t,a))}};function nv(t,r,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):r.prototype&&r.prototype.isPureReactComponent?!il(a,l)||!il(h,d):!0}function iv(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Ed.enqueueReplaceState(r,r.state,null)}function ta(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Ac=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function rv(t){Ac(t)}function sv(t){console.error(t)}function av(t){Ac(t)}function Rc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function ov(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Td(t,r,a){return a=Pr(a),a.tag=3,a.payload={element:null},a.callback=function(){Rc(t,r)},a}function lv(t){return t=Pr(t),t.tag=3,t}function uv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){ov(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){ov(r,a,l),typeof h!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function OS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ll(r,a,h,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return Ci===null?Gd():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Xf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),$d(t,l,h)),!1;case 22:return a.flags|=65536,l===Xf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),$d(t,l,h)),!1}throw Error(s(435,a.tag))}return $d(t,l,h),Gd(),!1}if(We)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Hf&&(t=Error(s(422),{cause:l}),ol(Fn(t,a)))):(l!==Hf&&(r=Error(s(423),{cause:l}),ol(Fn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Fn(l,a),h=Td(t.stateNode,l,h),Jf(t,h),wt!==4&&(wt=2)),!1;var d=Error(s(520),{cause:l});if(d=Fn(d,a),Cl===null?Cl=[d]:Cl.push(d),wt!==4&&(wt=2),r===null)return!0;l=Fn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Td(a.stateNode,l,t),Jf(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Kr===null||!Kr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=lv(h),uv(h,t,a,l),Jf(a,h),!1}a=a.return}while(a!==null);return!1}var cv=Error(s(461)),Ht=!1;function Xt(t,r,a,l){r.child=t===null?ev(r,null,a,l):Wa(r,t.child,a,l)}function hv(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Zs(r),l=rd(t,r,a,_,d,h),T=sd(),t!==null&&!Ht?(ad(t,r,h),lr(t,r,h)):(We&&T&&Bf(r),r.flags|=1,Xt(t,r,l,h),r.child)}function fv(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Uf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,dv(t,r,d,l,h)):(t=sc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Nd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(_,l)&&t.ref===r.ref)return lr(t,r,h)}return r.flags|=1,t=tr(d,l),t.ref=r.ref,t.return=r,r.child=t}function dv(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(il(d,l)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=l=d,Nd(t,h))(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,lr(t,r,h)}return bd(t,r,a,l,h)}function mv(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return pv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&cc(r,d!==null?d.cachePool:null),d!==null?dy(r,d):td(),tv(r);else return r.lanes=r.childLanes=536870912,pv(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(cc(r,d.cachePool),dy(r,d),zr(),r.memoizedState=null):(t!==null&&cc(r,null),td(),zr());return Xt(t,r,h,a),r.child}function pv(t,r,a,l){var h=Yf();return h=h===null?null:{parent:Lt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&cc(r,null),td(),tv(r),t!==null&&ll(t,r,l,!0),null}function Ic(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function bd(t,r,a,l,h){return Zs(r),a=rd(t,r,a,l,void 0,h),l=sd(),t!==null&&!Ht?(ad(t,r,h),lr(t,r,h)):(We&&l&&Bf(r),r.flags|=1,Xt(t,r,a,h),r.child)}function gv(t,r,a,l,h,d){return Zs(r),r.updateQueue=null,a=py(r,l,a,h),my(t),l=sd(),t!==null&&!Ht?(ad(t,r,d),lr(t,r,d)):(We&&l&&Bf(r),r.flags|=1,Xt(t,r,a,d),r.child)}function yv(t,r,a,l,h){if(Zs(r),r.stateNode===null){var d=Ba,_=a.contextType;typeof _=="object"&&_!==null&&(d=sn(_)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ed,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Wf(r),_=a.contextType,d.context=typeof _=="object"&&_!==null?sn(_):Ba,d.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(_d(r,a,_,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Ed.enqueueReplaceState(d,d.state,null),pl(r,l,d,h),ml(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var T=r.memoizedProps,N=ta(a,T);d.props=N;var H=d.context,W=a.contextType;_=Ba,typeof W=="object"&&W!==null&&(_=sn(W));var ee=a.getDerivedStateFromProps;W=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||H!==_)&&iv(r,d,l,_),kr=!1;var G=r.memoizedState;d.state=G,pl(r,l,d,h),ml(),H=r.memoizedState,T||G!==H||kr?(typeof ee=="function"&&(_d(r,a,ee,l),H=r.memoizedState),(N=kr||nv(r,a,N,l,G,H,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=H),d.props=l,d.state=H,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Zf(t,r),_=r.memoizedProps,W=ta(a,_),d.props=W,ee=r.pendingProps,G=d.context,H=a.contextType,N=Ba,typeof H=="object"&&H!==null&&(N=sn(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==ee||G!==N)&&iv(r,d,l,N),kr=!1,G=r.memoizedState,d.state=G,pl(r,l,d,h),ml();var K=r.memoizedState;_!==ee||G!==K||kr||t!==null&&t.dependencies!==null&&lc(t.dependencies)?(typeof T=="function"&&(_d(r,a,T,l),K=r.memoizedState),(W=kr||nv(r,a,W,l,G,K,N)||t!==null&&t.dependencies!==null&&lc(t.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,N)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),d.props=l,d.state=K,d.context=N,l=W):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,Ic(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Wa(r,t.child,null,h),r.child=Wa(r,null,a,h)):Xt(t,r,a,h),r.memoizedState=d.state,t=r.child):t=lr(t,r,h),t}function vv(t,r,a,l){return al(),r.flags|=256,Xt(t,r,a,l),r.child}var wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(t){return{baseLanes:t,cachePool:sy()}}function Ad(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Yn),t}function _v(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(We){if(h?jr(r):zr(),We){var T=bt,N;if(N=T){e:{for(N=T,T=Ii;N.nodeType!==8;){if(!T){T=null;break e}if(N=si(N.nextSibling),N===null){T=null;break e}}T=N}T!==null?(r.memoizedState={dehydrated:T,treeContext:$s!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},N=xn(18,null,null,0),N.stateNode=T,N.return=r,r.child=N,yn=r,bt=null,N=!0):N=!1}N||Xs(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return lm(T)?r.lanes=32:r.lanes=536870912,null;or(r)}return T=l.children,l=l.fallback,h?(zr(),h=r.mode,T=Cc({mode:"hidden",children:T},h),l=Ks(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=Sd(a),h.childLanes=Ad(t,_,a),r.memoizedState=wd,l):(jr(r),Rd(r,T))}if(N=t.memoizedState,N!==null&&(T=N.dehydrated,T!==null)){if(d)r.flags&256?(jr(r),r.flags&=-257,r=Id(t,r,a)):r.memoizedState!==null?(zr(),r.child=t.child,r.flags|=128,r=null):(zr(),h=l.fallback,T=r.mode,l=Cc({mode:"visible",children:l.children},T),h=Ks(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Wa(r,t.child,null,a),l=r.child,l.memoizedState=Sd(a),l.childLanes=Ad(t,_,a),r.memoizedState=wd,r=h);else if(jr(r),lm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var H=_.dgst;_=H,l=Error(s(419)),l.stack="",l.digest=_,ol({value:l,source:null,stack:null}),r=Id(t,r,a)}else if(Ht||ll(t,r,a,!1),_=(a&t.childLanes)!==0,Ht||_){if(_=ht,_!==null&&(l=a&-a,l=(l&42)!==0?1:dt(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,za(t,l),Pn(_,t,l),cv;T.data==="$?"||Gd(),r=Id(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,bt=si(T.nextSibling),yn=r,We=!0,Ys=null,Ii=!1,t!==null&&(Kn[$n++]=nr,Kn[$n++]=ir,Kn[$n++]=$s,nr=t.id,ir=t.overflow,$s=r),r=Rd(r,l.children),r.flags|=4096);return r}return h?(zr(),h=l.fallback,T=r.mode,N=t.child,H=N.sibling,l=tr(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,H!==null?h=tr(H,h):(h=Ks(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=Sd(a):(N=T.cachePool,N!==null?(H=Lt._currentValue,N=N.parent!==H?{parent:H,pool:H}:N):N=sy(),T={baseLanes:T.baseLanes|a,cachePool:N}),h.memoizedState=T,h.childLanes=Ad(t,_,a),r.memoizedState=wd,l):(jr(r),a=t.child,t=a.sibling,a=tr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function Rd(t,r){return r=Cc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Cc(t,r){return t=xn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Id(t,r,a){return Wa(r,t.child,null,a),t=Rd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ev(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Gf(t.return,r,a)}function Cd(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Tv(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(Xt(t,r,l.children,a),l=Ut.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,a,r);else if(t.tag===19)Ev(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(re(Ut,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Sc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Cd(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Sc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Cd(r,!0,a,null,d);break;case"together":Cd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function lr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Gr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ll(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=tr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=tr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Nd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&lc(t)))}function MS(t,r,a){switch(r.tag){case 3:it(r,r.stateNode.containerInfo),Vr(r,Lt,t.memoizedState.cache),al();break;case 27:case 5:ei(r);break;case 4:it(r,r.stateNode.containerInfo);break;case 10:Vr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(jr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?_v(t,r,a):(jr(r),t=lr(t,r,a),t!==null?t.sibling:null);jr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ll(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Tv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Ut,Ut.current),l)break;return null;case 22:case 23:return r.lanes=0,mv(t,r,a);case 24:Vr(r,Lt,t.memoizedState.cache)}return lr(t,r,a)}function bv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ht=!0;else{if(!Nd(t,a)&&(r.flags&128)===0)return Ht=!1,MS(t,r,a);Ht=(t.flags&131072)!==0}else Ht=!1,We&&(r.flags&1048576)!==0&&Zg(r,oc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Uf(l)?(t=ta(l,t),r.tag=1,r=yv(null,r,l,t,a)):(r.tag=0,r=bd(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===he){r.tag=11,r=hv(null,r,l,t,a);break e}else if(h===D){r.tag=14,r=fv(null,r,l,t,a);break e}}throw r=qe(l)||l,Error(s(306,r,""))}}return r;case 0:return bd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=ta(l,r.pendingProps),yv(t,r,l,h,a);case 3:e:{if(it(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,Zf(t,r),pl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Vr(r,Lt,l),l!==d.cache&&Kf(r,[Lt],a,!0),ml(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=vv(t,r,l,a);break e}else if(l!==h){h=Fn(Error(s(424)),r),ol(h),r=vv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=si(t.firstChild),yn=r,We=!0,Ys=null,Ii=!0,a=ev(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(al(),l===h){r=lr(t,r,a);break e}Xt(t,r,l,a)}r=r.child}return r;case 26:return Ic(t,r),t===null?(a=R_(r.type,null,r.pendingProps,null))?r.memoizedState=a:We||(a=r.type,t=r.pendingProps,l=qc(be.current).createElement(a),l[ct]=r,l[yt]=t,Zt(l,a,t),St(l),r.stateNode=l):r.memoizedState=R_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ei(r),t===null&&We&&(l=r.stateNode=w_(r.type,r.pendingProps,be.current),yn=r,Ii=!0,h=bt,Yr(r.type)?(um=h,bt=si(l.firstChild)):bt=h),Xt(t,r,r.pendingProps.children,a),Ic(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&We&&((h=l=bt)&&(l=oA(l,r.type,r.pendingProps,Ii),l!==null?(r.stateNode=l,yn=r,bt=si(l.firstChild),Ii=!1,h=!0):h=!1),h||Xs(r)),ei(r),h=r.type,d=r.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,sm(h,d)?l=null:_!==null&&sm(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=rd(t,r,AS,null,null,a),Ll._currentValue=h),Ic(t,r),Xt(t,r,l,a),r.child;case 6:return t===null&&We&&((t=a=bt)&&(a=lA(a,r.pendingProps,Ii),a!==null?(r.stateNode=a,yn=r,bt=null,t=!0):t=!1),t||Xs(r)),null;case 13:return _v(t,r,a);case 4:return it(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Wa(r,null,l,a):Xt(t,r,l,a),r.child;case 11:return hv(t,r,r.type,r.pendingProps,a);case 7:return Xt(t,r,r.pendingProps,a),r.child;case 8:return Xt(t,r,r.pendingProps.children,a),r.child;case 12:return Xt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Vr(r,r.type,l.value),Xt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Zs(r),h=sn(h),l=l(h),r.flags|=1,Xt(t,r,l,a),r.child;case 14:return fv(t,r,r.type,r.pendingProps,a);case 15:return dv(t,r,r.type,r.pendingProps,a);case 19:return Tv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Cc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=tr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return mv(t,r,a);case 24:return Zs(r),l=sn(Lt),t===null?(h=Yf(),h===null&&(h=ht,d=$f(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},Wf(r),Vr(r,Lt,h)):((t.lanes&a)!==0&&(Zf(t,r),pl(r,null,null,a),ml()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Vr(r,Lt,l)):(l=d.cache,Vr(r,Lt,l),l!==h.cache&&Kf(r,[Lt],a,!0))),Xt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ur(t){t.flags|=4}function wv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!x_(r)){if(r=Qn.current,r!==null&&((Ke&4194048)===Ke?Ci!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||r!==Ci))throw fl=Xf,ay;t.flags|=8192}}function Nc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?z():536870912,t.lanes|=r,to|=r)}function bl(t,r){if(!We)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function vt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function VS(t,r,a){var l=r.pendingProps;switch(qf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),sr(Lt),_n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(sl(r)?ur(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ty())),vt(r),null;case 26:return a=r.memoizedState,t===null?(ur(r),a!==null?(vt(r),wv(r,a)):(vt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(ur(r),vt(r),wv(r,a)):(vt(r),r.flags&=-16777217):(t.memoizedProps!==l&&ur(r),vt(r),r.flags&=-16777217),null;case 27:In(r),a=be.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return vt(r),null}t=pe.current,sl(r)?Jg(r):(t=w_(h,l,a),r.stateNode=t,ur(r))}return vt(r),null;case 5:if(In(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return vt(r),null}if(t=pe.current,sl(r))Jg(r);else{switch(h=qc(be.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[ct]=r,t[yt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ur(r)}}return vt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=be.current,sl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[ct]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||g_(t.nodeValue,a)),t||Xs(r)}else t=qc(t).createTextNode(l),t[ct]=r,r.stateNode=t}return vt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=sl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ct]=r}else al(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),h=!1}else h=ty(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(or(r),r):(or(r),null)}if(or(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Nc(r,r.updateQueue),vt(r),null;case 4:return _n(),t===null&&em(r.stateNode.containerInfo),vt(r),null;case 10:return sr(r.type),vt(r),null;case 19:if(ue(Ut),h=r.memoizedState,h===null)return vt(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)bl(h,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Sc(t),d!==null){for(r.flags|=128,bl(h,!1),t=d.updateQueue,r.updateQueue=t,Nc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Wg(a,t),a=a.sibling;return re(Ut,Ut.current&1|2),r.child}t=t.sibling}h.tail!==null&&fn()>Oc&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Sc(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Nc(r,t),bl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!We)return vt(r),null}else 2*fn()-h.renderingStartTime>Oc&&a!==536870912&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=fn(),r.sibling=null,t=Ut.current,re(Ut,l?t&1|2:t&1),r):(vt(r),null);case 22:case 23:return or(r),nd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),a=r.updateQueue,a!==null&&Nc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ue(Js),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),sr(Lt),vt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function kS(t,r){switch(qf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return sr(Lt),_n(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return In(r),null;case 13:if(or(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));al()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ue(Ut),null;case 4:return _n(),null;case 10:return sr(r.type),null;case 22:case 23:return or(r),nd(),t!==null&&ue(Js),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return sr(Lt),null;case 25:return null;default:return null}}function Sv(t,r){switch(qf(r),r.tag){case 3:sr(Lt),_n();break;case 26:case 27:case 5:In(r);break;case 4:_n();break;case 13:or(r);break;case 19:ue(Ut);break;case 10:sr(r.type);break;case 22:case 23:or(r),nd(),t!==null&&ue(Js);break;case 24:sr(Lt)}}function wl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(T){lt(r,r.return,T)}}function Br(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=r;var N=a,H=T;try{H()}catch(W){lt(h,N,W)}}}l=l.next}while(l!==d)}}catch(W){lt(r,r.return,W)}}function Av(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{fy(r,a)}catch(l){lt(t,t.return,l)}}}function Rv(t,r,a){a.props=ta(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){lt(t,r,l)}}function Sl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){lt(t,r,h)}}function Ni(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){lt(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){lt(t,r,h)}else a.current=null}function Iv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){lt(t,t.return,h)}}function Dd(t,r,a){try{var l=t.stateNode;nA(l,t.type,a,r),l[yt]=r}catch(h){lt(t,t.return,h)}}function Cv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Yr(t.type)||t.tag===4}function xd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Yr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Od(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Bc));else if(l!==4&&(l===27&&Yr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Od(t,r,a),t=t.sibling;t!==null;)Od(t,r,a),t=t.sibling}function Dc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Yr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Dc(t,r,a),t=t.sibling;t!==null;)Dc(t,r,a),t=t.sibling}function Nv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Zt(r,l,a),r[ct]=t,r[yt]=a}catch(d){lt(t,t.return,d)}}var cr=!1,Rt=!1,Md=!1,Dv=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function PS(t,r){if(t=t.containerInfo,im=Qc,t=Bg(t),xf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,N=-1,H=0,W=0,ee=t,G=null;t:for(;;){for(var K;ee!==a||h!==0&&ee.nodeType!==3||(T=_+h),ee!==d||l!==0&&ee.nodeType!==3||(N=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),(K=ee.firstChild)!==null;)G=ee,ee=K;for(;;){if(ee===t)break t;if(G===a&&++H===h&&(T=_),G===d&&++W===l&&(N=_),(K=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=K}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(rm={focusedElem:t,selectionRange:a},Qc=!1,Ft=r;Ft!==null;)if(r=Ft,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ft=t;else for(;Ft!==null;){switch(r=Ft,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ie=ta(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ie,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){lt(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)om(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Ft=t;break}Ft=r.return}}function xv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:qr(t,a),l&4&&wl(5,a);break;case 1:if(qr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){lt(a,a.return,_)}else{var h=ta(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){lt(a,a.return,_)}}l&64&&Av(a),l&512&&Sl(a,a.return);break;case 3:if(qr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{fy(t,r)}catch(_){lt(a,a.return,_)}}break;case 27:r===null&&l&4&&Nv(a);case 26:case 5:qr(t,a),r===null&&l&4&&Iv(a),l&512&&Sl(a,a.return);break;case 12:qr(t,a);break;case 13:qr(t,a),l&4&&Vv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=GS.bind(null,a),uA(t,a))));break;case 22:if(l=a.memoizedState!==null||cr,!l){r=r!==null&&r.memoizedState!==null||Rt,h=cr;var d=Rt;cr=l,(Rt=r)&&!d?Hr(t,a,(a.subtreeFlags&8772)!==0):qr(t,a),cr=h,Rt=d}break;case 30:break;default:qr(t,a)}}function Ov(t){var r=t.alternate;r!==null&&(t.alternate=null,Ov(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Dr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,bn=!1;function hr(t,r,a){for(a=a.child;a!==null;)Mv(t,r,a),a=a.sibling}function Mv(t,r,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:Rt||Ni(a,r),hr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||Ni(a,r);var l=pt,h=bn;Yr(a.type)&&(pt=a.stateNode,bn=!1),hr(t,r,a),Ml(a.stateNode),pt=l,bn=h;break;case 5:Rt||Ni(a,r);case 6:if(l=pt,h=bn,pt=null,hr(t,r,a),pt=l,bn=h,pt!==null)if(bn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(d){lt(a,r,d)}else try{pt.removeChild(a.stateNode)}catch(d){lt(a,r,d)}break;case 18:pt!==null&&(bn?(t=pt,T_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Bl(t)):T_(pt,a.stateNode));break;case 4:l=pt,h=bn,pt=a.stateNode.containerInfo,bn=!0,hr(t,r,a),pt=l,bn=h;break;case 0:case 11:case 14:case 15:Rt||Br(2,a,r),Rt||Br(4,a,r),hr(t,r,a);break;case 1:Rt||(Ni(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Rv(a,r,l)),hr(t,r,a);break;case 21:hr(t,r,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,hr(t,r,a),Rt=l;break;default:hr(t,r,a)}}function Vv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bl(t)}catch(a){lt(r,r.return,a)}}function LS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Dv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Dv),r;default:throw Error(s(435,t.tag))}}function Vd(t,r){var a=LS(t);r.forEach(function(l){var h=KS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function On(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Yr(T.type)){pt=T.stateNode,bn=!1;break e}break;case 5:pt=T.stateNode,bn=!1;break e;case 3:case 4:pt=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(pt===null)throw Error(s(160));Mv(d,_,h),pt=null,bn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)kv(r,t),r=r.sibling}var ri=null;function kv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Mn(t),l&4&&(Br(3,t,t.return),wl(3,t),Br(5,t,t.return));break;case 1:On(r,t),Mn(t),l&512&&(Rt||a===null||Ni(a,a.return)),l&64&&cr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ri;if(On(r,t),Mn(t),l&512&&(Rt||a===null||Ni(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ds]||d[ct]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Zt(d,l,a),d[ct]=t,St(d),l=d;break e;case"link":var _=N_("link","href",h).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=h.createElement(l),Zt(d,l,a),h.head.appendChild(d);break;case"meta":if(_=N_("meta","content",h).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=h.createElement(l),Zt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[ct]=t,St(d),l=d}t.stateNode=l}else D_(h,t.type,t.stateNode);else t.stateNode=C_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?D_(h,t.type,t.stateNode):C_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Dd(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(r,t),Mn(t),l&512&&(Rt||a===null||Ni(a,a.return)),a!==null&&l&4&&Dd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(r,t),Mn(t),l&512&&(Rt||a===null||Ni(a,a.return)),t.flags&32){h=t.stateNode;try{zn(h,"")}catch(K){lt(t,t.return,K)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Dd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Md=!0);break;case 6:if(On(r,t),Mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(K){lt(t,t.return,K)}}break;case 3:if(Gc=null,h=ri,ri=Hc(r.containerInfo),On(r,t),ri=h,Mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Bl(r.containerInfo)}catch(K){lt(t,t.return,K)}Md&&(Md=!1,Pv(t));break;case 4:l=ri,ri=Hc(t.stateNode.containerInfo),On(r,t),Mn(t),ri=l;break;case 12:On(r,t),Mn(t);break;case 13:On(r,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zd=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,H=cr,W=Rt;if(cr=H||h,Rt=W||N,On(r,t),Rt=W,cr=H,Mn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||N||cr||Rt||na(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(d=N.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=N.stateNode;var ee=N.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){lt(N,N.return,K)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(K){lt(N,N.return,K)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vd(t,a))));break;case 19:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 30:break;case 21:break;default:On(r,t),Mn(t)}}function Mn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Cv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=xd(t);Dc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(zn(_,""),a.flags&=-33);var T=xd(t);Dc(t,T,_);break;case 3:case 4:var N=a.stateNode.containerInfo,H=xd(t);Od(t,H,N);break;default:throw Error(s(161))}}catch(W){lt(t,t.return,W)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Pv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Pv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function qr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)xv(t,r.alternate,r),r=r.sibling}function na(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Br(4,r,r.return),na(r);break;case 1:Ni(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Rv(r,r.return,a),na(r);break;case 27:Ml(r.stateNode);case 26:case 5:Ni(r,r.return),na(r);break;case 22:r.memoizedState===null&&na(r);break;case 30:na(r);break;default:na(r)}t=t.sibling}}function Hr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,_=d.flags;switch(d.tag){case 0:case 11:case 15:Hr(h,d,a),wl(4,d);break;case 1:if(Hr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){lt(l,l.return,H)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)hy(N[h],T)}catch(H){lt(l,l.return,H)}}a&&_&64&&Av(d),Sl(d,d.return);break;case 27:Nv(d);case 26:case 5:Hr(h,d,a),a&&l===null&&_&4&&Iv(d),Sl(d,d.return);break;case 12:Hr(h,d,a);break;case 13:Hr(h,d,a),a&&_&4&&Vv(h,d);break;case 22:d.memoizedState===null&&Hr(h,d,a),Sl(d,d.return);break;case 30:break;default:Hr(h,d,a)}r=r.sibling}}function kd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ul(a))}function Pd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ul(t))}function Di(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Lv(t,r,a,l),r=r.sibling}function Lv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Di(t,r,a,l),h&2048&&wl(9,r);break;case 1:Di(t,r,a,l);break;case 3:Di(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ul(t)));break;case 12:if(h&2048){Di(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){lt(r,r.return,N)}}else Di(t,r,a,l);break;case 13:Di(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,_=r.alternate,r.memoizedState!==null?d._visibility&2?Di(t,r,a,l):Al(t,r):d._visibility&2?Di(t,r,a,l):(d._visibility|=2,Za(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&kd(_,r);break;case 24:Di(t,r,a,l),h&2048&&Pd(r.alternate,r);break;default:Di(t,r,a,l)}}function Za(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,_=r,T=a,N=l,H=_.flags;switch(_.tag){case 0:case 11:case 15:Za(d,_,T,N,h),wl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?Za(d,_,T,N,h):Al(d,_):(W._visibility|=2,Za(d,_,T,N,h)),h&&H&2048&&kd(_.alternate,_);break;case 24:Za(d,_,T,N,h),h&&H&2048&&Pd(_.alternate,_);break;default:Za(d,_,T,N,h)}r=r.sibling}}function Al(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Al(a,l),h&2048&&kd(l.alternate,l);break;case 24:Al(a,l),h&2048&&Pd(l.alternate,l);break;default:Al(a,l)}r=r.sibling}}var Rl=8192;function Ja(t){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Uv(t),t=t.sibling}function Uv(t){switch(t.tag){case 26:Ja(t),t.flags&Rl&&t.memoizedState!==null&&bA(ri,t.memoizedState,t.memoizedProps);break;case 5:Ja(t);break;case 3:case 4:var r=ri;ri=Hc(t.stateNode.containerInfo),Ja(t),ri=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Rl,Rl=16777216,Ja(t),Rl=r):Ja(t));break;default:Ja(t)}}function jv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Il(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,Bv(l,t)}jv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zv(t),t=t.sibling}function zv(t){switch(t.tag){case 0:case 11:case 15:Il(t),t.flags&2048&&Br(9,t,t.return);break;case 3:Il(t);break;case 12:Il(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,xc(t)):Il(t);break;default:Il(t)}}function xc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,Bv(l,t)}jv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Br(8,r,r.return),xc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,xc(r));break;default:xc(r)}t=t.sibling}}function Bv(t,r){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Br(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var h=l.sibling,d=l.return;if(Ov(l),l===a){Ft=null;break e}if(h!==null){h.return=d,Ft=h;break e}Ft=d}}}var US={getCacheForType:function(t){var r=sn(Lt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},jS=typeof WeakMap=="function"?WeakMap:Map,tt=0,ht=null,Ue=null,Ke=0,nt=0,Vn=null,Fr=!1,eo=!1,Ld=!1,fr=0,wt=0,Gr=0,ia=0,Ud=0,Yn=0,to=0,Cl=null,wn=null,jd=!1,zd=0,Oc=1/0,Mc=null,Kr=null,Wt=0,$r=null,no=null,io=0,Bd=0,qd=null,qv=null,Nl=0,Hd=null;function kn(){if((tt&2)!==0&&Ke!==0)return Ke&-Ke;if(X.T!==null){var t=Fa;return t!==0?t:Xd()}return $t()}function Hv(){Yn===0&&(Yn=(Ke&536870912)===0||We?Ns():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),Yn}function Pn(t,r,a){(t===ht&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(ro(t,0),Qr(t,Ke,Yn,!1)),fe(t,a),((tt&2)===0||t!==ht)&&(t===ht&&((tt&2)===0&&(ia|=a),wt===4&&Qr(t,Ke,Yn,!1)),xi(t))}function Fv(t,r,a){if((tt&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||gi(t,r),h=l?qS(t,r):Kd(t,r,!0),d=l;do{if(h===0){eo&&!l&&Qr(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!zS(a)){h=Kd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var T=t;h=Cl;var N=T.current.memoizedState.isDehydrated;if(N&&(ro(T,_).flags|=256),_=Kd(T,_,!1),_!==2){if(Ld&&!N){T.errorRecoveryDisabledLanes|=d,ia|=d,h=4;break e}d=wn,wn=h,d!==null&&(wn===null?wn=d:wn.push.apply(wn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){ro(t,0),Qr(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Qr(l,r,Yn,!Fr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=zd+300-fn(),10<h)){if(Qr(l,r,Yn,!Fr),Fi(l,0,!0)!==0)break e;l.timeoutHandle=__(Gv.bind(null,l,a,wn,Mc,jd,r,Yn,ia,to,Fr,d,2,-0,0),h);break e}Gv(l,a,wn,Mc,jd,r,Yn,ia,to,Fr,d,0,-0,0)}}break}while(!0);xi(t)}function Gv(t,r,a,l,h,d,_,T,N,H,W,ee,G,K){if(t.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:TA},Uv(r),ee=wA(),ee!==null)){t.cancelPendingCommit=ee(Zv.bind(null,t,r,d,a,l,h,_,T,N,W,1,G,K)),Qr(t,d,_,!H);return}Zv(t,r,d,a,l,h,_,T,N)}function zS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Dn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qr(t,r,a,l){r&=~Ud,r&=~ia,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Vt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&ge(t,a,r)}function Vc(){return(tt&6)===0?(Dl(0),!1):!0}function Fd(){if(Ue!==null){if(nt===0)var t=Ue.return;else t=Ue,rr=Ws=null,od(t),Xa=null,El=0,t=Ue;for(;t!==null;)Sv(t.alternate,t),t=t.return;Ue=null}}function ro(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,rA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Fd(),ht=t,Ue=a=tr(t.current,null),Ke=r,nt=0,Vn=null,Fr=!1,eo=gi(t,r),Ld=!1,to=Yn=Ud=ia=Gr=wt=0,wn=Cl=null,jd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Vt(l),d=1<<h;r|=t[h],l&=~d}return fr=r,nc(),a}function Kv(t,r){Ve=null,X.H=Tc,r===hl||r===hc?(r=uy(),nt=3):r===ay?(r=uy(),nt=4):nt=r===cv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,Ue===null&&(wt=1,Rc(t,Fn(r,t.current)))}function $v(){var t=X.H;return X.H=Tc,t===null?Tc:t}function Qv(){var t=X.A;return X.A=US,t}function Gd(){wt=4,Fr||(Ke&4194048)!==Ke&&Qn.current!==null||(eo=!0),(Gr&134217727)===0&&(ia&134217727)===0||ht===null||Qr(ht,Ke,Yn,!1)}function Kd(t,r,a){var l=tt;tt|=2;var h=$v(),d=Qv();(ht!==t||Ke!==r)&&(Mc=null,ro(t,r)),r=!1;var _=wt;e:do try{if(nt!==0&&Ue!==null){var T=Ue,N=Vn;switch(nt){case 8:Fd(),_=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var H=nt;if(nt=0,Vn=null,so(t,T,N,H),a&&eo){_=0;break e}break;default:H=nt,nt=0,Vn=null,so(t,T,N,H)}}BS(),_=wt;break}catch(W){Kv(t,W)}while(!0);return r&&t.shellSuspendCounter++,rr=Ws=null,tt=l,X.H=h,X.A=d,Ue===null&&(ht=null,Ke=0,nc()),_}function BS(){for(;Ue!==null;)Yv(Ue)}function qS(t,r){var a=tt;tt|=2;var l=$v(),h=Qv();ht!==t||Ke!==r?(Mc=null,Oc=fn()+500,ro(t,r)):eo=gi(t,r);e:do try{if(nt!==0&&Ue!==null){r=Ue;var d=Vn;t:switch(nt){case 1:nt=0,Vn=null,so(t,r,d,1);break;case 2:case 9:if(oy(d)){nt=0,Vn=null,Xv(r);break}r=function(){nt!==2&&nt!==9||ht!==t||(nt=7),xi(t)},d.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:oy(d)?(nt=0,Vn=null,Xv(r)):(nt=0,Vn=null,so(t,r,d,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var T=Ue;if(!_||x_(_)){nt=0,Vn=null;var N=T.sibling;if(N!==null)Ue=N;else{var H=T.return;H!==null?(Ue=H,kc(H)):Ue=null}break t}}nt=0,Vn=null,so(t,r,d,5);break;case 6:nt=0,Vn=null,so(t,r,d,6);break;case 8:Fd(),wt=6;break e;default:throw Error(s(462))}}HS();break}catch(W){Kv(t,W)}while(!0);return rr=Ws=null,X.H=l,X.A=h,tt=a,Ue!==null?0:(ht=null,Ke=0,nc(),wt)}function HS(){for(;Ue!==null&&!As();)Yv(Ue)}function Yv(t){var r=bv(t.alternate,t,fr);t.memoizedProps=t.pendingProps,r===null?kc(t):Ue=r}function Xv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=gv(a,r,r.pendingProps,r.type,void 0,Ke);break;case 11:r=gv(a,r,r.pendingProps,r.type.render,r.ref,Ke);break;case 5:od(r);default:Sv(a,r),r=Ue=Wg(r,fr),r=bv(a,r,fr)}t.memoizedProps=t.pendingProps,r===null?kc(t):Ue=r}function so(t,r,a,l){rr=Ws=null,od(r),Xa=null,El=0;var h=r.return;try{if(OS(t,h,r,a,Ke)){wt=1,Rc(t,Fn(a,t.current)),Ue=null;return}}catch(d){if(h!==null)throw Ue=h,d;wt=1,Rc(t,Fn(a,t.current)),Ue=null;return}r.flags&32768?(We||l===1?t=!0:eo||(Ke&536870912)!==0?t=!1:(Fr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Wv(r,t)):kc(r)}function kc(t){var r=t;do{if((r.flags&32768)!==0){Wv(r,Fr);return}t=r.return;var a=VS(r.alternate,r,fr);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=t}while(r!==null);wt===0&&(wt=5)}function Wv(t,r){do{var a=kS(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);wt=6,Ue=null}function Zv(t,r,a,l,h,d,_,T,N){t.cancelPendingCommit=null;do Pc();while(Wt!==0);if((tt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Pf,_e(t,a,d,_,T,N),t===ht&&(Ue=ht=null,Ke=0),no=r,$r=t,io=a,Bd=d,qd=h,qv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$S(Bi,function(){return i_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=ae.p,ae.p=2,_=tt,tt|=4;try{PS(t,r,a)}finally{tt=_,ae.p=h,X.T=l}}Wt=1,Jv(),e_(),t_()}}function Jv(){if(Wt===1){Wt=0;var t=$r,r=no,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var h=tt;tt|=4;try{kv(r,t);var d=rm,_=Bg(t.containerInfo),T=d.focusedElem,N=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&zg(T.ownerDocument.documentElement,T)){if(N!==null&&xf(T)){var H=N.start,W=N.end;if(W===void 0&&(W=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(W,T.value.length);else{var ee=T.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var K=G.getSelection(),Ie=T.textContent.length,we=Math.min(N.start,Ie),ot=N.end===void 0?we:Math.min(N.end,Ie);!K.extend&&we>ot&&(_=ot,ot=we,we=_);var j=jg(T,we),P=jg(T,ot);if(j&&P&&(K.rangeCount!==1||K.anchorNode!==j.node||K.anchorOffset!==j.offset||K.focusNode!==P.node||K.focusOffset!==P.offset)){var q=ee.createRange();q.setStart(j.node,j.offset),K.removeAllRanges(),we>ot?(K.addRange(q),K.extend(P.node,P.offset)):(q.setEnd(P.node,P.offset),K.addRange(q))}}}}for(ee=[],K=T;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Qc=!!im,rm=im=null}finally{tt=h,ae.p=l,X.T=a}}t.current=r,Wt=2}}function e_(){if(Wt===2){Wt=0;var t=$r,r=no,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var h=tt;tt|=4;try{xv(t,r.alternate,r)}finally{tt=h,ae.p=l,X.T=a}}Wt=3}}function t_(){if(Wt===4||Wt===3){Wt=0,Rs();var t=$r,r=no,a=io,l=qv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Wt=5:(Wt=0,no=$r=null,n_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Kr=null),Cn(a),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(mt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=X.T,h=ae.p,ae.p=2,X.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{X.T=r,ae.p=h}}(io&3)!==0&&Pc(),xi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Hd?Nl++:(Nl=0,Hd=t):Nl=0,Dl(0)}}function n_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ul(r)))}function Pc(t){return Jv(),e_(),t_(),i_()}function i_(){if(Wt!==5)return!1;var t=$r,r=Bd;Bd=0;var a=Cn(io),l=X.T,h=ae.p;try{ae.p=32>a?32:a,X.T=null,a=qd,qd=null;var d=$r,_=io;if(Wt=0,no=$r=null,io=0,(tt&6)!==0)throw Error(s(331));var T=tt;if(tt|=4,zv(d.current),Lv(d,d.current,_,a),tt=T,Dl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(mt,d)}catch{}return!0}finally{ae.p=h,X.T=l,n_(t,r)}}function r_(t,r,a){r=Fn(a,r),r=Td(t.stateNode,r,2),t=Lr(t,r,2),t!==null&&(fe(t,2),xi(t))}function lt(t,r,a){if(t.tag===3)r_(t,t,a);else for(;r!==null;){if(r.tag===3){r_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Kr===null||!Kr.has(l))){t=Fn(a,t),a=lv(2),l=Lr(r,a,2),l!==null&&(uv(a,l,r,t),fe(l,2),xi(l));break}}r=r.return}}function $d(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new jS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Ld=!0,h.add(a),t=FS.bind(null,t,r,a),r.then(t,t))}function FS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ht===t&&(Ke&a)===a&&(wt===4||wt===3&&(Ke&62914560)===Ke&&300>fn()-zd?(tt&2)===0&&ro(t,0):Ud|=a,to===Ke&&(to=0)),xi(t)}function s_(t,r){r===0&&(r=z()),t=za(t,r),t!==null&&(fe(t,r),xi(t))}function GS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),s_(t,a)}function KS(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),s_(t,a)}function $S(t,r){return mi(t,r)}var Lc=null,ao=null,Qd=!1,Uc=!1,Yd=!1,ra=0;function xi(t){t!==ao&&t.next===null&&(ao===null?Lc=ao=t:ao=ao.next=t),Uc=!0,Qd||(Qd=!0,YS())}function Dl(t,r){if(!Yd&&Uc){Yd=!0;do for(var a=!1,l=Lc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Vt(42|t)+1)-1,d&=h&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,u_(l,d))}else d=Ke,d=Fi(l,l===ht?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||gi(l,d)||(a=!0,u_(l,d));l=l.next}while(a);Yd=!1}}function QS(){a_()}function a_(){Uc=Qd=!1;var t=0;ra!==0&&(iA()&&(t=ra),ra=0);for(var r=fn(),a=null,l=Lc;l!==null;){var h=l.next,d=o_(l,r);d===0?(l.next=null,a===null?Lc=h:a.next=h,h===null&&(ao=a)):(a=l,(t!==0||(d&3)!==0)&&(Uc=!0)),l=h}Dl(t)}function o_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-Vt(d),T=1<<_,N=h[_];N===-1?((T&a)===0||(T&l)!==0)&&(h[_]=Cs(T,r)):N<=r&&(t.expiredLanes|=T),d&=~T}if(r=ht,a=Ke,a=Fi(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&jn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||gi(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&jn(l),Cn(a)){case 2:case 8:a=Ir;break;case 32:a=Bi;break;case 268435456:a=Cr;break;default:a=Bi}return l=l_.bind(null,t),a=mi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&jn(l),t.callbackPriority=2,t.callbackNode=null,2}function l_(t,r){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Pc()&&t.callbackNode!==a)return null;var l=Ke;return l=Fi(t,t===ht?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Fv(t,l,r),o_(t,fn()),t.callbackNode!=null&&t.callbackNode===a?l_.bind(null,t):null)}function u_(t,r){if(Pc())return null;Fv(t,r,!0)}function YS(){sA(function(){(tt&6)!==0?mi(Rr,QS):a_()})}function Xd(){return ra===0&&(ra=Ns()),ra}function c_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ca(""+t)}function h_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function XS(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=c_((h[yt]||null).action),_=l.submitter;_&&(r=(r=_[yt]||null)?c_(r.formAction):_.getAttribute("formAction"),r!==null&&(d=r,_=null));var T=new Na("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ra!==0){var N=_?h_(h,_):new FormData(h);gd(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(T.preventDefault(),N=_?h_(h,_):new FormData(h),gd(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var Wd=0;Wd<kf.length;Wd++){var Zd=kf[Wd],WS=Zd.toLowerCase(),ZS=Zd[0].toUpperCase()+Zd.slice(1);ii(WS,"on"+ZS)}ii(Fg,"onAnimationEnd"),ii(Gg,"onAnimationIteration"),ii(Kg,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(pS,"onTransitionRun"),ii(gS,"onTransitionStart"),ii(yS,"onTransitionCancel"),ii($g,"onTransitionEnd"),Ki("onMouseEnter",["mouseout","mouseover"]),Ki("onMouseLeave",["mouseout","mouseover"]),Ki("onPointerEnter",["pointerout","pointerover"]),Ki("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function f_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var _=l.length-1;0<=_;_--){var T=l[_],N=T.instance,H=T.currentTarget;if(T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=H;try{d(h)}catch(W){Ac(W)}h.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(T=l[_],N=T.instance,H=T.currentTarget,T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=H;try{d(h)}catch(W){Ac(W)}h.currentTarget=null,d=N}}}}function je(t,r){var a=r[Tt];a===void 0&&(a=r[Tt]=new Set);var l=t+"__bubble";a.has(l)||(d_(r,t,2,!1),a.add(l))}function Jd(t,r,a){var l=0;r&&(l|=4),d_(a,t,l,r)}var jc="_reactListening"+Math.random().toString(36).slice(2);function em(t){if(!t[jc]){t[jc]=!0,Ho.forEach(function(a){a!=="selectionchange"&&(JS.has(a)||Jd(a,!1,t),Jd(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[jc]||(r[jc]=!0,Jd("selectionchange",!1,r))}}function d_(t,r,a,l){switch(L_(r)){case 2:var h=RA;break;case 8:h=IA;break;default:h=mm}a=h.bind(null,r,a,t),h=void 0,!qn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function tm(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=Gi(T),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}T=T.parentNode}}l=l.return}Bu(function(){var H=d,W=Bn(a),ee=[];e:{var G=Qg.get(t);if(G!==void 0){var K=Na,Ie=t;switch(t){case"keypress":if(bi(a)===0)break e;case"keydown":case"keyup":K=ka;break;case"focusin":Ie="focus",K=Oa;break;case"focusout":Ie="blur",K=Oa;break;case"beforeblur":case"afterblur":K=Oa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=If;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Yu;break;case Fg:case Gg:case Kg:K=Ma;break;case $g:K=Wu;break;case"scroll":case"scrollend":K=qu;break;case"wheel":K=Pa;break;case"copy":case"cut":case"paste":K=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=tl;break;case"toggle":case"beforetoggle":K=Ju}var we=(r&4)!==0,ot=!we&&(t==="scroll"||t==="scrollend"),j=we?G!==null?G+"Capture":null:G;we=[];for(var P=H,q;P!==null;){var Z=P;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||j===null||(Z=Ls(P,j),Z!=null&&we.push(Ol(P,Z,q))),ot)break;P=P.return}0<we.length&&(G=new K(G,Ie,null,a,W),ee.push({event:G,listeners:we}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==Yi&&(Ie=a.relatedTarget||a.fromElement)&&(Gi(Ie)||Ie[Xe]))break e;if((K||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,K?(Ie=a.relatedTarget||a.toElement,K=H,Ie=Ie?Gi(Ie):null,Ie!==null&&(ot=u(Ie),we=Ie.tag,Ie!==ot||we!==5&&we!==27&&we!==6)&&(Ie=null)):(K=null,Ie=H),K!==Ie)){if(we=Hn,Z="onMouseLeave",j="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(we=tl,Z="onPointerLeave",j="onPointerEnter",P="pointer"),ot=K==null?G:vi(K),q=Ie==null?G:vi(Ie),G=new we(Z,P+"leave",K,a,W),G.target=ot,G.relatedTarget=q,Z=null,Gi(W)===H&&(we=new we(j,P+"enter",Ie,a,W),we.target=q,we.relatedTarget=ot,Z=we),ot=Z,K&&Ie)t:{for(we=K,j=Ie,P=0,q=we;q;q=oo(q))P++;for(q=0,Z=j;Z;Z=oo(Z))q++;for(;0<P-q;)we=oo(we),P--;for(;0<q-P;)j=oo(j),q--;for(;P--;){if(we===j||j!==null&&we===j.alternate)break t;we=oo(we),j=oo(j)}we=null}else we=null;K!==null&&m_(ee,G,K,we,!1),Ie!==null&&ot!==null&&m_(ee,ot,Ie,we,!0)}}e:{if(G=H?vi(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var ye=Mg;else if(Pt(G))if(Vg)ye=fS;else{ye=cS;var Pe=uS}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Qo(H.elementType)&&(ye=Mg):ye=hS;if(ye&&(ye=ye(t,H))){er(ee,ye,a,W);break e}Pe&&Pe(t,G,H),t==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Or(G,"number",G.value)}switch(Pe=H?vi(H):window,t){case"focusin":(Pt(Pe)||Pe.contentEditable==="true")&&(La=Pe,Of=H,rl=null);break;case"focusout":rl=Of=La=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,qg(ee,a,W);break;case"selectionchange":if(mS)break;case"keydown":case"keyup":qg(ee,a,W)}var Ee;if(Ai)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Fe?$(t,a)&&(Se="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(v&&a.locale!=="ko"&&(Fe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Fe&&(Ee=Xo()):(Ti=W,Mr="value"in Ti?Ti.value:Ti.textContent,Fe=!0)),Pe=zc(H,Se),0<Pe.length&&(Se=new Jo(Se,t,null,a,W),ee.push({event:Se,listeners:Pe}),Ee?Se.data=Ee:(Ee=oe(a),Ee!==null&&(Se.data=Ee)))),(Ee=y?kt(t,a):Ge(t,a))&&(Se=zc(H,"onBeforeInput"),0<Se.length&&(Pe=new Jo("onBeforeInput","beforeinput",null,a,W),ee.push({event:Pe,listeners:Se}),Pe.data=Ee)),XS(ee,t,H,a,W)}f_(ee,r)})}function Ol(t,r,a){return{instance:t,listener:r,currentTarget:a}}function zc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Ls(t,a),h!=null&&l.unshift(Ol(t,h,d)),h=Ls(t,r),h!=null&&l.push(Ol(t,h,d))),t.tag===3)return l;t=t.return}return[]}function oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function m_(t,r,a,l,h){for(var d=r._reactName,_=[];a!==null&&a!==l;){var T=a,N=T.alternate,H=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||H===null||(N=H,h?(H=Ls(a,d),H!=null&&_.unshift(Ol(a,H,N))):h||(H=Ls(a,d),H!=null&&_.push(Ol(a,H,N)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function p_(t){return(typeof t=="string"?t:""+t).replace(eA,`
`).replace(tA,"")}function g_(t,r){return r=p_(r),p_(t)===r}function Bc(){}function at(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&zn(t,""+l);break;case"className":_i(t,"class",l);break;case"tabIndex":_i(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(t,a,l);break;case"style":$o(t,l,d);break;case"data":if(r!=="object"){_i(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&at(t,r,"name",h.name,h,null),at(t,r,"formEncType",h.formEncType,h,null),at(t,r,"formMethod",h.formMethod,h,null),at(t,r,"formTarget",h.formTarget,h,null)):(at(t,r,"encType",h.encType,h,null),at(t,r,"method",h.method,h,null),at(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Bc);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),xr(t,"popover",l);break;case"xlinkActuate":Qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Af.get(a)||a,xr(t,a,l))}}function nm(t,r,a,l,h,d){switch(a){case"style":$o(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Bc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[yt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):xr(t,a,l)}}}function Zt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(t,r,d,_,a,null)}}h&&at(t,r,"srcSet",a.srcSet,a,null),l&&at(t,r,"src",a.src,a,null);return;case"input":je("invalid",t);var T=d=_=h=null,N=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":_=W;break;case"checked":N=W;break;case"defaultChecked":H=W;break;case"value":d=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:at(t,r,l,W,a,null)}}Vs(t,d,T,N,H,_,h,!1),Ia(t);return;case"select":je("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:at(t,r,h,T,a,null)}r=d,a=_,t.multiple=!!l,r!=null?Qi(t,!!l,r,!1):a!=null&&Qi(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:at(t,r,_,T,a,null)}ks(t,l,h,d),Ia(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,r,N,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<xl.length;l++)je(xl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(t,r,H,l,a,null)}return;default:if(Qo(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&nm(t,r,W,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&at(t,r,T,l,a,null))}function nA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,T=null,N=null,H=null,W=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":N=ee;default:l.hasOwnProperty(K)||at(t,r,K,null,l,ee)}}for(var G in l){var K=l[G];if(ee=a[G],l.hasOwnProperty(G)&&(K!=null||ee!=null))switch(G){case"type":d=K;break;case"name":h=K;break;case"checked":H=K;break;case"defaultChecked":W=K;break;case"value":_=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==ee&&at(t,r,G,K,l,ee)}}Nn(t,_,T,N,H,W,d,h);return;case"select":K=_=T=G=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":K=N;default:l.hasOwnProperty(d)||at(t,r,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":G=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==N&&at(t,r,h,d,l,N)}r=T,a=_,l=K,G!=null?Qi(t,!!a,G,!1):!!l!=!!a&&(r!=null?Qi(t,!!a,r,!0):Qi(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:at(t,r,T,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":G=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&at(t,r,_,h,l,d)}rt(t,G,K);return;case"option":for(var Ie in a)if(G=a[Ie],a.hasOwnProperty(Ie)&&G!=null&&!l.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:at(t,r,Ie,null,l,G)}for(N in l)if(G=l[N],K=a[N],l.hasOwnProperty(N)&&G!==K&&(G!=null||K!=null))switch(N){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:at(t,r,N,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we)&&at(t,r,we,null,l,G);for(H in l)if(G=l[H],K=a[H],l.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:at(t,r,H,G,l,K)}return;default:if(Qo(r)){for(var ot in a)G=a[ot],a.hasOwnProperty(ot)&&G!==void 0&&!l.hasOwnProperty(ot)&&nm(t,r,ot,void 0,l,G);for(W in l)G=l[W],K=a[W],!l.hasOwnProperty(W)||G===K||G===void 0&&K===void 0||nm(t,r,W,G,l,K);return}}for(var j in a)G=a[j],a.hasOwnProperty(j)&&G!=null&&!l.hasOwnProperty(j)&&at(t,r,j,null,l,G);for(ee in l)G=l[ee],K=a[ee],!l.hasOwnProperty(ee)||G===K||G==null&&K==null||at(t,r,ee,G,l,K)}var im=null,rm=null;function qc(t){return t.nodeType===9?t:t.ownerDocument}function y_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function sm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var am=null;function iA(){var t=window.event;return t&&t.type==="popstate"?t===am?!1:(am=t,!0):(am=null,!1)}var __=typeof setTimeout=="function"?setTimeout:void 0,rA=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,sA=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(t){return E_.resolve(null).then(t).catch(aA)}:__;function aA(t){setTimeout(function(){throw t})}function Yr(t){return t==="head"}function T_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&Ml(_.documentElement),a&2&&Ml(_.body),a&4)for(a=_.head,Ml(a),_=a.firstChild;_;){var T=_.nextSibling,N=_.nodeName;_[Ds]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=T}}if(h===0){t.removeChild(d),Bl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Bl(r)}function om(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":om(a),Dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function oA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ds])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function lA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=si(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function uA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function si(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var um=null;function b_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function w_(t,r,a){switch(r=qc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ml(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Dr(t)}var Xn=new Map,S_=new Set;function Hc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var dr=ae.d;ae.d={f:cA,r:hA,D:fA,C:dA,L:mA,m:pA,X:yA,S:gA,M:vA};function cA(){var t=dr.f(),r=Vc();return t||r}function hA(t){var r=yi(t);r!==null&&r.tag===5&&r.type==="form"?Fy(r):dr.r(t)}var lo=typeof document>"u"?null:document;function A_(t,r,a){var l=lo;if(l&&typeof r=="string"&&r){var h=Nt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),S_.has(h)||(S_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Zt(r,"link",t),St(r),l.head.appendChild(r)))}}function fA(t){dr.D(t),A_("dns-prefetch",t,null)}function dA(t,r){dr.C(t,r),A_("preconnect",t,r)}function mA(t,r,a){dr.L(t,r,a);var l=lo;if(l&&t&&r){var h='link[rel="preload"][as="'+Nt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Nt(a.imageSizes)+'"]')):h+='[href="'+Nt(t)+'"]';var d=h;switch(r){case"style":d=uo(t);break;case"script":d=co(t)}Xn.has(d)||(t=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Xn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Vl(d))||r==="script"&&l.querySelector(kl(d))||(r=l.createElement("link"),Zt(r,"link",t),St(r),l.head.appendChild(r)))}}function pA(t,r){dr.m(t,r);var a=lo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Nt(l)+'"][href="'+Nt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=co(t)}if(!Xn.has(d)&&(t=E({rel:"modulepreload",href:t},r),Xn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(d)))return}l=a.createElement("link"),Zt(l,"link",t),St(l),a.head.appendChild(l)}}}function gA(t,r,a){dr.S(t,r,a);var l=lo;if(l&&t){var h=mn(l).hoistableStyles,d=uo(t);r=r||"default";var _=h.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Vl(d)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Xn.get(d))&&cm(t,a);var N=_=l.createElement("link");St(N),Zt(N,"link",t),N._p=new Promise(function(H,W){N.onload=H,N.onerror=W}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(d,_)}}}function yA(t,r){dr.X(t,r);var a=lo;if(a&&t){var l=mn(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=E({src:t,async:!0},r),(r=Xn.get(h))&&hm(t,r),d=a.createElement("script"),St(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function vA(t,r){dr.M(t,r);var a=lo;if(a&&t){var l=mn(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=E({src:t,async:!0,type:"module"},r),(r=Xn.get(h))&&hm(t,r),d=a.createElement("script"),St(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function R_(t,r,a,l){var h=(h=be.current)?Hc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=uo(a.href),a=mn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=uo(a.href);var d=mn(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Vl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Xn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(t,a),d||_A(h,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=co(a),a=mn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function uo(t){return'href="'+Nt(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function I_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function _A(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zt(r,"link",a),St(r),t.head.appendChild(r))}function co(t){return'[src="'+Nt(t)+'"]'}function kl(t){return"script[async]"+t}function C_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(l)return r.instance=l,St(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),St(l),Zt(l,"style",h),Fc(l,a.precedence,t),r.instance=l;case"stylesheet":h=uo(a.href);var d=t.querySelector(Vl(h));if(d)return r.state.loading|=4,r.instance=d,St(d),d;l=I_(a),(h=Xn.get(h))&&cm(l,h),d=(t.ownerDocument||t).createElement("link"),St(d);var _=d;return _._p=new Promise(function(T,N){_.onload=T,_.onerror=N}),Zt(d,"link",l),r.state.loading|=4,Fc(d,a.precedence,t),r.instance=d;case"script":return d=co(a.src),(h=t.querySelector(kl(d)))?(r.instance=h,St(h),h):(l=a,(h=Xn.get(d))&&(l=E({},a),hm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),St(h),Zt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Fc(l,a.precedence,t));return r.instance}function Fc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===r)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function cm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function hm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gc=null;function N_(t,r,a){if(Gc===null){var l=new Map,h=Gc=new Map;h.set(a,l)}else h=Gc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ds]||d[ct]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(r)||"";_=t+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function D_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function EA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function x_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Pl=null;function TA(){}function bA(t,r,a){if(Pl===null)throw Error(s(475));var l=Pl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=uo(a.href),d=t.querySelector(Vl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Kc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,St(d);return}d=t.ownerDocument||t,a=I_(a),(h=Xn.get(h))&&cm(a,h),d=d.createElement("link"),St(d);var _=d;_._p=new Promise(function(T,N){_.onload=T,_.onerror=N}),Zt(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Kc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function wA(){if(Pl===null)throw Error(s(475));var t=Pl;return t.stylesheets&&t.count===0&&fm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&fm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Kc(){if(this.count--,this.count===0){if(this.stylesheets)fm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $c=null;function fm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$c=new Map,r.forEach(SA,t),$c=null,Kc.call(t))}function SA(t,r){if(!(r.state.loading&4)){var a=$c.get(t);if(a)var l=a.get(null);else{a=new Map,$c.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=r.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Kc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Ll={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function AA(t,r,a,l,h,d,_,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.hiddenUpdates=le(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function O_(t,r,a,l,h,d,_,T,N,H,W,ee){return t=new AA(t,r,a,_,T,N,H,ee),r=1,d===!0&&(r|=24),d=xn(3,null,null,r),t.current=d,d.stateNode=t,r=$f(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Wf(d),t}function M_(t){return t?(t=Ba,t):Ba}function V_(t,r,a,l,h,d){h=M_(h),l.context===null?l.context=h:l.pendingContext=h,l=Pr(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Lr(t,l,r),a!==null&&(Pn(a,t,r),dl(a,t,r))}function k_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function dm(t,r){k_(t,r),(t=t.alternate)&&k_(t,r)}function P_(t){if(t.tag===13){var r=za(t,67108864);r!==null&&Pn(r,t,67108864),dm(t,67108864)}}var Qc=!0;function RA(t,r,a,l){var h=X.T;X.T=null;var d=ae.p;try{ae.p=2,mm(t,r,a,l)}finally{ae.p=d,X.T=h}}function IA(t,r,a,l){var h=X.T;X.T=null;var d=ae.p;try{ae.p=8,mm(t,r,a,l)}finally{ae.p=d,X.T=h}}function mm(t,r,a,l){if(Qc){var h=pm(l);if(h===null)tm(t,r,l,Yc,a),U_(t,l);else if(NA(h,t,r,a,l))l.stopPropagation();else if(U_(t,l),r&4&&-1<CA.indexOf(t)){for(;h!==null;){var d=yi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=En(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var N=1<<31-Vt(_);T.entanglements[1]|=N,_&=~N}xi(d),(tt&6)===0&&(Oc=fn()+500,Dl(0))}}break;case 13:T=za(d,2),T!==null&&Pn(T,d,2),Vc(),dm(d,2)}if(d=pm(l),d===null&&tm(t,r,l,Yc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else tm(t,r,l,null,a)}}function pm(t){return t=Bn(t),gm(t)}var Yc=null;function gm(t){if(Yc=null,t=Gi(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Yc=t,null}function L_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zo()){case Rr:return 2;case Ir:return 8;case Bi:case Bo:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var ym=!1,Xr=null,Wr=null,Zr=null,Ul=new Map,jl=new Map,Jr=[],CA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(t,r){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Ul.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(r.pointerId)}}function zl(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=yi(r),r!==null&&P_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function NA(t,r,a,l,h){switch(r){case"focusin":return Xr=zl(Xr,t,r,a,l,h),!0;case"dragenter":return Wr=zl(Wr,t,r,a,l,h),!0;case"mouseover":return Zr=zl(Zr,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ul.set(d,zl(Ul.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,jl.set(d,zl(jl.get(d)||null,t,r,a,l,h)),!0}return!1}function j_(t){var r=Gi(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,rn(t.priority,function(){if(a.tag===13){var l=kn();l=dt(l);var h=za(a,l);h!==null&&Pn(h,a,l),dm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=pm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Yi=l,a.target.dispatchEvent(l),Yi=null}else return r=yi(a),r!==null&&P_(r),t.blockedOn=a,!1;r.shift()}return!0}function z_(t,r,a){Xc(t)&&a.delete(r)}function DA(){ym=!1,Xr!==null&&Xc(Xr)&&(Xr=null),Wr!==null&&Xc(Wr)&&(Wr=null),Zr!==null&&Xc(Zr)&&(Zr=null),Ul.forEach(z_),jl.forEach(z_)}function Wc(t,r){t.blockedOn===r&&(t.blockedOn=null,ym||(ym=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,DA)))}var Zc=null;function B_(t){Zc!==t&&(Zc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zc===t&&(Zc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(gm(l||a)===null)continue;break}var d=yi(a);d!==null&&(t.splice(r,3),r-=3,gd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Bl(t){function r(N){return Wc(N,t)}Xr!==null&&Wc(Xr,t),Wr!==null&&Wc(Wr,t),Zr!==null&&Wc(Zr,t),Ul.forEach(r),jl.forEach(r);for(var a=0;a<Jr.length;a++){var l=Jr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Jr.length&&(a=Jr[0],a.blockedOn===null);)j_(a),a.blockedOn===null&&Jr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[yt]||null;if(typeof d=="function")_||B_(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[yt]||null)T=_.formAction;else if(gm(h)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),B_(a)}}}function vm(t){this._internalRoot=t}Jc.prototype.render=vm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=kn();V_(a,l,t,r,null,null)},Jc.prototype.unmount=vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;V_(t.current,2,null,t,null,null),Vc(),r[Xe]=null}};function Jc(t){this._internalRoot=t}Jc.prototype.unstable_scheduleHydration=function(t){if(t){var r=$t();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Jr.length&&r!==0&&r<Jr[a].priority;a++);Jr.splice(a,0,t),a===0&&j_(t)}};var q_=e.version;if(q_!=="19.1.0")throw Error(s(527,q_,"19.1.0"));ae.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var xA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{mt=eh.inject(xA),Ye=eh}catch{}}return Hl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=rv,d=sv,_=av,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=O_(t,1,!1,null,null,a,l,h,d,_,T,null),t[Xe]=r.current,em(t),new vm(r)},Hl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=rv,_=sv,T=av,N=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),r=O_(t,1,!0,r,a??null,l,h,d,_,T,N,H),r.context=M_(null),a=r.current,l=kn(),l=dt(l),h=Pr(l),h.callback=null,Lr(a,h,l),a=l,r.current.lanes=a,fe(r,a),xi(r),t[Xe]=r.current,em(t),new Jc(r)},Hl.version="19.1.0",Hl}var Z_;function zA(){if(Z_)return Tm.exports;Z_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tm.exports=jA(),Tm.exports}var BA=zA();const qA=()=>{};var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},HA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},WE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,E=u>>2,A=(u&3)<<4|m>>4;let R=(m&15)<<2|g>>6,k=g&63;p||(k=64,f||(R=64)),s.push(n[E],n[A],n[R],n[k])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(XE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):HA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||A==null)throw new FA;const R=u<<2|m>>4;if(s.push(R),g!==64){const k=m<<4&240|g>>2;if(s.push(k),A!==64){const M=g<<6&192|A;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class FA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GA=function(i){const e=XE(i);return WE.encodeByteArray(e,!0)},wh=function(i){return GA(i).replace(/\./g,"")},ZE=function(i){try{return WE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=()=>KA().__FIREBASE_DEFAULTS__,QA=()=>{if(typeof process>"u"||typeof J_>"u")return;const i=J_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},YA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ZE(i[1]);return e&&JSON.parse(e)},Kh=()=>{try{return qA()||$A()||QA()||YA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},JE=i=>{var e,n;return(n=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},XA=i=>{const e=JE(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},eT=()=>{var i;return(i=Kh())===null||i===void 0?void 0:i.config},tT=i=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[wh(JSON.stringify(n)),wh(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function eR(){var i;const e=(i=Kh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function rR(){return!eR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iT(){try{return typeof indexedDB=="object"}catch{return!1}}function rT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function sR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="FirebaseError";class hi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=aR,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pa.prototype.create)}}class pa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?oR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new hi(o,m,s)}}function oR(i,e){return i.replace(lR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const lR=/\{\$([^}]+)}/g;function uR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fs(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(e0(u)&&e0(f)){if(!fs(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function e0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $l(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ql(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function cR(i,e){const n=new hR(i,e);return n.subscribe.bind(n)}class hR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Am),o.error===void 0&&(o.error=Am),o.complete===void 0&&(o.complete=Am);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Am(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=1e3,mR=2,pR=4*60*60*1e3,gR=.5;function t0(i,e=dR,n=mR){const s=e*Math.pow(n,i),o=Math.round(gR*s*(Math.random()-.5)*2);return Math.min(pR,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(i){return i&&i._delegate?i._delegate:i}class oi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new WA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_R(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vR(i){return i===sa?void 0:i}function _R(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ze||(ze={}));const TR={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},bR=ze.INFO,wR={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},SR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=wR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $h{constructor(e){this.name=e,this._logLevel=bR,this._logHandler=SR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const AR=(i,e)=>e.some(n=>i instanceof n);let n0,i0;function RR(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IR(){return i0||(i0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sT=new WeakMap,Hm=new WeakMap,aT=new WeakMap,Rm=new WeakMap,Tp=new WeakMap;function CR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(ls(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&sT.set(n,i)}).catch(()=>{}),Tp.set(e,i),e}function NR(i){if(Hm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Hm.set(i,e)}let Fm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Hm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||aT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ls(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function DR(i){Fm=i(Fm)}function xR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Im(this),e,...n);return aT.set(s,e.sort?e.sort():[e]),ls(s)}:IR().includes(i)?function(...e){return i.apply(Im(this),e),ls(sT.get(this))}:function(...e){return ls(i.apply(Im(this),e))}}function OR(i){return typeof i=="function"?xR(i):(i instanceof IDBTransaction&&NR(i),AR(i,RR())?new Proxy(i,Fm):i)}function ls(i){if(i instanceof IDBRequest)return CR(i);if(Rm.has(i))return Rm.get(i);const e=OR(i);return e!==i&&(Rm.set(i,e),Tp.set(e,i)),e}const Im=i=>Tp.get(i);function oT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=ls(f);return s&&f.addEventListener("upgradeneeded",p=>{s(ls(f.result),p.oldVersion,p.newVersion,ls(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const MR=["get","getKey","getAll","getAllKeys","count"],VR=["put","add","delete","clear"],Cm=new Map;function r0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=VR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||MR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Cm.set(e,u),u}DR(i=>({...i,get:(e,n,s)=>r0(e,n)||i.get(e,n,s),has:(e,n)=>!!r0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function PR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gm="@firebase/app",s0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new $h("@firebase/app"),LR="@firebase/app-compat",UR="@firebase/analytics-compat",jR="@firebase/analytics",zR="@firebase/app-check-compat",BR="@firebase/app-check",qR="@firebase/auth",HR="@firebase/auth-compat",FR="@firebase/database",GR="@firebase/data-connect",KR="@firebase/database-compat",$R="@firebase/functions",QR="@firebase/functions-compat",YR="@firebase/installations",XR="@firebase/installations-compat",WR="@firebase/messaging",ZR="@firebase/messaging-compat",JR="@firebase/performance",eI="@firebase/performance-compat",tI="@firebase/remote-config",nI="@firebase/remote-config-compat",iI="@firebase/storage",rI="@firebase/storage-compat",sI="@firebase/firestore",aI="@firebase/vertexai",oI="@firebase/firestore-compat",lI="firebase",uI="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="[DEFAULT]",cI={[Gm]:"fire-core",[LR]:"fire-core-compat",[jR]:"fire-analytics",[UR]:"fire-analytics-compat",[BR]:"fire-app-check",[zR]:"fire-app-check-compat",[qR]:"fire-auth",[HR]:"fire-auth-compat",[FR]:"fire-rtdb",[GR]:"fire-data-connect",[KR]:"fire-rtdb-compat",[$R]:"fire-fn",[QR]:"fire-fn-compat",[YR]:"fire-iid",[XR]:"fire-iid-compat",[WR]:"fire-fcm",[ZR]:"fire-fcm-compat",[JR]:"fire-perf",[eI]:"fire-perf-compat",[tI]:"fire-rc",[nI]:"fire-rc-compat",[iI]:"fire-gcs",[rI]:"fire-gcs-compat",[sI]:"fire-fst",[oI]:"fire-fst-compat",[aI]:"fire-vertex","fire-js":"fire-js",[lI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,hI=new Map,$m=new Map;function a0(i,e){try{i.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ui(i){const e=i.name;if($m.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;$m.set(e,i);for(const n of Sh.values())a0(n,i);for(const n of hI.values())a0(n,i);return!0}function ga(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Wn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new pa("app","Firebase",fI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=uI;function lT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Km,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw us.create("bad-app-name",{appName:String(o)});if(n||(n=eT()),!n)throw us.create("no-options");const u=Sh.get(o);if(u){if(fs(n,u.options)&&fs(s,u.config))return u;throw us.create("duplicate-app",{appName:o})}const f=new ER(o);for(const p of $m.values())f.addComponent(p);const m=new dI(n,s,f);return Sh.set(o,m),m}function bp(i=Km){const e=Sh.get(i);if(!e&&i===Km&&eT())return lT();if(!e)throw us.create("no-app",{appName:i});return e}function Zn(i,e,n){var s;let o=(s=cI[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(m.join(" "));return}Ui(new oi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebase-heartbeat-database",pI=1,au="firebase-heartbeat-store";let Nm=null;function uT(){return Nm||(Nm=oT(mI,pI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(i=>{throw us.create("idb-open",{originalErrorMessage:i.message})})),Nm}async function gI(i){try{const n=(await uT()).transaction(au),s=await n.objectStore(au).get(cT(i));return await n.done,s}catch(e){if(e instanceof hi)_r.warn(e.message);else{const n=us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function o0(i,e){try{const s=(await uT()).transaction(au,"readwrite");await s.objectStore(au).put(e,cT(i)),await s.done}catch(n){if(n instanceof hi)_r.warn(n.message);else{const s=us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(s.message)}}}function cT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1024,vI=30;class _I{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=l0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>vI){const f=bI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){_r.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=l0(),{heartbeatsToSend:s,unsentEntries:o}=EI(this._heartbeatsCache.heartbeats),u=wh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return _r.warn(n),""}}}function l0(){return new Date().toISOString().substring(0,10)}function EI(i,e=yI){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),u0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),u0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class TI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iT()?rT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return o0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return o0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function u0(i){return wh(JSON.stringify({version:2,heartbeats:i})).length}function bI(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(i){Ui(new oi("platform-logger",e=>new kR(e),"PRIVATE")),Ui(new oi("heartbeat",e=>new _I(e),"PRIVATE")),Zn(Gm,s0,i),Zn(Gm,s0,"esm2017"),Zn("fire-js","")}wI("");var SI="firebase",AI="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(SI,AI,"app");var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,hT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function I(){}I.prototype=S.prototype,D.D=S.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(x,O,L){for(var C=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)C[qe-2]=arguments[qe];return S.prototype[O].apply(x,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,I){I||(I=0);var x=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)x[O]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(O=0;16>O;++O)x[O]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=D.g[0],I=D.g[1],O=D.g[2];var L=D.g[3],C=S+(L^I&(O^L))+x[0]+3614090360&4294967295;S=I+(C<<7&4294967295|C>>>25),C=L+(O^S&(I^O))+x[1]+3905402710&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(I^L&(S^I))+x[2]+606105819&4294967295,O=L+(C<<17&4294967295|C>>>15),C=I+(S^O&(L^S))+x[3]+3250441966&4294967295,I=O+(C<<22&4294967295|C>>>10),C=S+(L^I&(O^L))+x[4]+4118548399&4294967295,S=I+(C<<7&4294967295|C>>>25),C=L+(O^S&(I^O))+x[5]+1200080426&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(I^L&(S^I))+x[6]+2821735955&4294967295,O=L+(C<<17&4294967295|C>>>15),C=I+(S^O&(L^S))+x[7]+4249261313&4294967295,I=O+(C<<22&4294967295|C>>>10),C=S+(L^I&(O^L))+x[8]+1770035416&4294967295,S=I+(C<<7&4294967295|C>>>25),C=L+(O^S&(I^O))+x[9]+2336552879&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(I^L&(S^I))+x[10]+4294925233&4294967295,O=L+(C<<17&4294967295|C>>>15),C=I+(S^O&(L^S))+x[11]+2304563134&4294967295,I=O+(C<<22&4294967295|C>>>10),C=S+(L^I&(O^L))+x[12]+1804603682&4294967295,S=I+(C<<7&4294967295|C>>>25),C=L+(O^S&(I^O))+x[13]+4254626195&4294967295,L=S+(C<<12&4294967295|C>>>20),C=O+(I^L&(S^I))+x[14]+2792965006&4294967295,O=L+(C<<17&4294967295|C>>>15),C=I+(S^O&(L^S))+x[15]+1236535329&4294967295,I=O+(C<<22&4294967295|C>>>10),C=S+(O^L&(I^O))+x[1]+4129170786&4294967295,S=I+(C<<5&4294967295|C>>>27),C=L+(I^O&(S^I))+x[6]+3225465664&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^I&(L^S))+x[11]+643717713&4294967295,O=L+(C<<14&4294967295|C>>>18),C=I+(L^S&(O^L))+x[0]+3921069994&4294967295,I=O+(C<<20&4294967295|C>>>12),C=S+(O^L&(I^O))+x[5]+3593408605&4294967295,S=I+(C<<5&4294967295|C>>>27),C=L+(I^O&(S^I))+x[10]+38016083&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^I&(L^S))+x[15]+3634488961&4294967295,O=L+(C<<14&4294967295|C>>>18),C=I+(L^S&(O^L))+x[4]+3889429448&4294967295,I=O+(C<<20&4294967295|C>>>12),C=S+(O^L&(I^O))+x[9]+568446438&4294967295,S=I+(C<<5&4294967295|C>>>27),C=L+(I^O&(S^I))+x[14]+3275163606&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^I&(L^S))+x[3]+4107603335&4294967295,O=L+(C<<14&4294967295|C>>>18),C=I+(L^S&(O^L))+x[8]+1163531501&4294967295,I=O+(C<<20&4294967295|C>>>12),C=S+(O^L&(I^O))+x[13]+2850285829&4294967295,S=I+(C<<5&4294967295|C>>>27),C=L+(I^O&(S^I))+x[2]+4243563512&4294967295,L=S+(C<<9&4294967295|C>>>23),C=O+(S^I&(L^S))+x[7]+1735328473&4294967295,O=L+(C<<14&4294967295|C>>>18),C=I+(L^S&(O^L))+x[12]+2368359562&4294967295,I=O+(C<<20&4294967295|C>>>12),C=S+(I^O^L)+x[5]+4294588738&4294967295,S=I+(C<<4&4294967295|C>>>28),C=L+(S^I^O)+x[8]+2272392833&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^I)+x[11]+1839030562&4294967295,O=L+(C<<16&4294967295|C>>>16),C=I+(O^L^S)+x[14]+4259657740&4294967295,I=O+(C<<23&4294967295|C>>>9),C=S+(I^O^L)+x[1]+2763975236&4294967295,S=I+(C<<4&4294967295|C>>>28),C=L+(S^I^O)+x[4]+1272893353&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^I)+x[7]+4139469664&4294967295,O=L+(C<<16&4294967295|C>>>16),C=I+(O^L^S)+x[10]+3200236656&4294967295,I=O+(C<<23&4294967295|C>>>9),C=S+(I^O^L)+x[13]+681279174&4294967295,S=I+(C<<4&4294967295|C>>>28),C=L+(S^I^O)+x[0]+3936430074&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^I)+x[3]+3572445317&4294967295,O=L+(C<<16&4294967295|C>>>16),C=I+(O^L^S)+x[6]+76029189&4294967295,I=O+(C<<23&4294967295|C>>>9),C=S+(I^O^L)+x[9]+3654602809&4294967295,S=I+(C<<4&4294967295|C>>>28),C=L+(S^I^O)+x[12]+3873151461&4294967295,L=S+(C<<11&4294967295|C>>>21),C=O+(L^S^I)+x[15]+530742520&4294967295,O=L+(C<<16&4294967295|C>>>16),C=I+(O^L^S)+x[2]+3299628645&4294967295,I=O+(C<<23&4294967295|C>>>9),C=S+(O^(I|~L))+x[0]+4096336452&4294967295,S=I+(C<<6&4294967295|C>>>26),C=L+(I^(S|~O))+x[7]+1126891415&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~I))+x[14]+2878612391&4294967295,O=L+(C<<15&4294967295|C>>>17),C=I+(L^(O|~S))+x[5]+4237533241&4294967295,I=O+(C<<21&4294967295|C>>>11),C=S+(O^(I|~L))+x[12]+1700485571&4294967295,S=I+(C<<6&4294967295|C>>>26),C=L+(I^(S|~O))+x[3]+2399980690&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~I))+x[10]+4293915773&4294967295,O=L+(C<<15&4294967295|C>>>17),C=I+(L^(O|~S))+x[1]+2240044497&4294967295,I=O+(C<<21&4294967295|C>>>11),C=S+(O^(I|~L))+x[8]+1873313359&4294967295,S=I+(C<<6&4294967295|C>>>26),C=L+(I^(S|~O))+x[15]+4264355552&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~I))+x[6]+2734768916&4294967295,O=L+(C<<15&4294967295|C>>>17),C=I+(L^(O|~S))+x[13]+1309151649&4294967295,I=O+(C<<21&4294967295|C>>>11),C=S+(O^(I|~L))+x[4]+4149444226&4294967295,S=I+(C<<6&4294967295|C>>>26),C=L+(I^(S|~O))+x[11]+3174756917&4294967295,L=S+(C<<10&4294967295|C>>>22),C=O+(S^(L|~I))+x[2]+718787259&4294967295,O=L+(C<<15&4294967295|C>>>17),C=I+(L^(O|~S))+x[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+L&4294967295}s.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var I=S-this.blockSize,x=this.B,O=this.h,L=0;L<S;){if(O==0)for(;L<=I;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<S;)if(x[O++]=D.charCodeAt(L++),O==this.blockSize){o(this,x),O=0;break}}else for(;L<S;)if(x[O++]=D[L++],O==this.blockSize){o(this,x),O=0;break}}this.h=O,this.o+=S},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var I=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=I&255,I/=256;for(this.u(D),D=Array(16),S=I=0;4>S;++S)for(var x=0;32>x;x+=8)D[I++]=this.g[S]>>>x&255;return D};function u(D,S){var I=m;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=S(D)}function f(D,S){this.h=S;for(var I=[],x=!0,O=D.length-1;0<=O;O--){var L=D[O]|0;x&&L==S||(I[O]=L,x=!1)}this.g=I}var m={};function p(D){return-128<=D&&128>D?u(D,function(S){return new f([S|0],0>S?-1:0)}):new f([D|0],0>D?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return A;if(0>D)return F(g(-D));for(var S=[],I=1,x=0;D>=I;x++)S[x]=D/I|0,I*=4294967296;return new f(S,0)}function E(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return F(E(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(S,8)),x=A,O=0;O<D.length;O+=8){var L=Math.min(8,D.length-O),C=parseInt(D.substring(O,O+L),S);8>L?(L=g(Math.pow(S,L)),x=x.j(L).add(g(C))):(x=x.j(I),x=x.add(g(C)))}return x}var A=p(0),R=p(1),k=p(16777216);i=f.prototype,i.m=function(){if(Y(this))return-F(this).m();for(var D=0,S=1,I=0;I<this.g.length;I++){var x=this.i(I);D+=(0<=x?x:4294967296+x)*S,S*=4294967296}return D},i.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(Y(this))return"-"+F(this).toString(D);for(var S=g(Math.pow(D,6)),I=this,x="";;){var O=he(I,S).g;I=Q(I,O.j(S));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=O,M(I))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},i.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function Y(D){return D.h==-1}i.l=function(D){return D=Q(this,D),Y(D)?-1:M(D)?0:1};function F(D){for(var S=D.g.length,I=[],x=0;x<S;x++)I[x]=~D.g[x];return new f(I,~D.h).add(R)}i.abs=function(){return Y(this)?F(this):this},i.add=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],x=0,O=0;O<=S;O++){var L=x+(this.i(O)&65535)+(D.i(O)&65535),C=(L>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);x=C>>>16,L&=65535,C&=65535,I[O]=C<<16|L}return new f(I,I[I.length-1]&-2147483648?-1:0)};function Q(D,S){return D.add(F(S))}i.j=function(D){if(M(this)||M(D))return A;if(Y(this))return Y(D)?F(this).j(F(D)):F(F(this).j(D));if(Y(D))return F(this.j(F(D)));if(0>this.l(k)&&0>D.l(k))return g(this.m()*D.m());for(var S=this.g.length+D.g.length,I=[],x=0;x<2*S;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var O=0;O<D.g.length;O++){var L=this.i(x)>>>16,C=this.i(x)&65535,qe=D.i(O)>>>16,He=D.i(O)&65535;I[2*x+2*O]+=C*He,se(I,2*x+2*O),I[2*x+2*O+1]+=L*He,se(I,2*x+2*O+1),I[2*x+2*O+1]+=C*qe,se(I,2*x+2*O+1),I[2*x+2*O+2]+=L*qe,se(I,2*x+2*O+2)}for(x=0;x<S;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=S;x<2*S;x++)I[x]=0;return new f(I,0)};function se(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function ne(D,S){this.g=D,this.h=S}function he(D,S){if(M(S))throw Error("division by zero");if(M(D))return new ne(A,A);if(Y(D))return S=he(F(D),S),new ne(F(S.g),F(S.h));if(Y(S))return S=he(D,F(S)),new ne(F(S.g),S.h);if(30<D.g.length){if(Y(D)||Y(S))throw Error("slowDivide_ only works with positive integers.");for(var I=R,x=S;0>=x.l(D);)I=me(I),x=me(x);var O=Ae(I,1),L=Ae(x,1);for(x=Ae(x,2),I=Ae(I,2);!M(x);){var C=L.add(x);0>=C.l(D)&&(O=O.add(I),L=C),x=Ae(x,1),I=Ae(I,1)}return S=Q(D,O.j(S)),new ne(O,S)}for(O=A;0<=D.l(S);){for(I=Math.max(1,Math.floor(D.m()/S.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=g(I),C=L.j(S);Y(C)||0<C.l(D);)I-=x,L=g(I),C=L.j(S);M(L)&&(L=R),O=O.add(L),D=Q(D,C)}return new ne(O,D)}i.A=function(D){return he(this,D).h},i.and=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],x=0;x<S;x++)I[x]=this.i(x)&D.i(x);return new f(I,this.h&D.h)},i.or=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],x=0;x<S;x++)I[x]=this.i(x)|D.i(x);return new f(I,this.h|D.h)},i.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),I=[],x=0;x<S;x++)I[x]=this.i(x)^D.i(x);return new f(I,this.h^D.h)};function me(D){for(var S=D.g.length+1,I=[],x=0;x<S;x++)I[x]=D.i(x)<<1|D.i(x-1)>>>31;return new f(I,D.h)}function Ae(D,S){var I=S>>5;S%=32;for(var x=D.g.length-I,O=[],L=0;L<x;L++)O[L]=0<S?D.i(L+I)>>>S|D.i(L+I+1)<<32-S:D.i(L+I);return new f(O,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,hT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,cs=f}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fT,Yl,dT,uh,Qm,mT,pT,gT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var B=c[w];if(!(B in v))break e;v=v[B]}c=c[c.length-1],w=v[c],y=y(w),y!=w&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,w=!1,B={next:function(){if(!w&&v<c.length){var $=v++;return{value:y($,c[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,v){return c.call.apply(c.bind,arguments)}function A(c,y,v){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function R(c,y,v){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,R.apply(null,arguments)}function k(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(w,B,$){for(var oe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)oe[Fe-2]=arguments[Fe];return y.prototype[B].apply(w,oe)}}function Y(c){const y=c.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=c[w];return v}return[]}function F(c,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(p(w)){const B=c.length||0,$=w.length||0;c.length=B+$;for(let oe=0;oe<$;oe++)c[B+oe]=w[oe]}else c.push(w)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var me=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Ae(c,y,v){for(const w in c)y.call(v,c[w],w,c)}function D(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function S(c){const y={};for(const v in c)y[v]=c[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,y){let v,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(v in w)c[v]=w[v];for(let $=0;$<I.length;$++)v=I[$],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function O(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function L(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Le;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class qe{constructor(){this.h=this.g=null}add(y,v){const w=He.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var He=new Q(()=>new X,c=>c.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ve=!1,Le=new qe,V=()=>{const c=m.Promise.resolve(void 0);ae=()=>{c.then(ie)}};var ie=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){L(v)}var y=He;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ve=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function Me(c,y){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(me){e:{try{he(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:be[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Me.aa.h.call(this)}}M(Me,re);var be={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),it=0;function _n(c,y,v,w,B){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=B,this.key=++it,this.da=this.fa=!1}function ei(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function In(c){this.src=c,this.g={},this.h=0}In.prototype.add=function(c,y,v,w,B){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var oe=mi(c,y,w,B);return-1<oe?(y=c[oe],v||(y.fa=!1)):(y=new _n(y,this.src,$,!!w,B),y.fa=v,c.push(y)),y};function di(c,y){var v=y.type;if(v in c.g){var w=c.g[v],B=Array.prototype.indexOf.call(w,y,void 0),$;($=0<=B)&&Array.prototype.splice.call(w,B,1),$&&(ei(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function mi(c,y,v,w){for(var B=0;B<c.length;++B){var $=c[B];if(!$.da&&$.listener==y&&$.capture==!!v&&$.ha==w)return B}return-1}var jn="closure_lm_"+(1e6*Math.random()|0),As={};function Rs(c,y,v,w,B){if(Array.isArray(y)){for(var $=0;$<y.length;$++)Rs(c,y[$],v,w,B);return null}return v=Ta(v),c&&c[Et]?c.K(y,v,g(w)?!!w.capture:!1,B):fn(c,y,v,!1,w,B)}function fn(c,y,v,w,B,$){if(!y)throw Error("Invalid event type");var oe=g(B)?!!B.capture:!!B,Fe=Cr(c);if(Fe||(c[jn]=Fe=new In(c)),v=Fe.add(y,v,w,oe,$),v.proxy)return v;if(w=zo(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)pe||(B=oe),B===void 0&&(B=!1),c.addEventListener(y.toString(),w,B);else if(c.attachEvent)c.attachEvent(Bi(y.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function zo(){function c(v){return y.call(c.src,c.listener,v)}const y=Bo;return c}function Rr(c,y,v,w,B){if(Array.isArray(y))for(var $=0;$<y.length;$++)Rr(c,y[$],v,w,B);else w=g(w)?!!w.capture:!!w,v=Ta(v),c&&c[Et]?(c=c.i,y=String(y).toString(),y in c.g&&($=c.g[y],v=mi($,v,w,B),-1<v&&(ei($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete c.g[y],c.h--)))):c&&(c=Cr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=mi(y,v,w,B)),(v=-1<c?y[c]:null)&&Ir(v))}function Ir(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Et])di(y.i,c);else{var v=c.type,w=c.proxy;y.removeEventListener?y.removeEventListener(v,w,c.capture):y.detachEvent?y.detachEvent(Bi(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=Cr(y))?(di(v,c),v.h==0&&(v.src=null,y[jn]=null)):ei(c)}}}function Bi(c){return c in As?As[c]:As[c]="on"+c}function Bo(c,y){if(c.da)c=!0;else{y=new Me(y,this);var v=c.listener,w=c.ha||c.src;c.fa&&Ir(c),c=v.call(w,y)}return c}function Cr(c){return c=c[jn],c instanceof In?c:null}var Is="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ta(c){return typeof c=="function"?c:(c[Is]||(c[Is]=function(y){return c.handleEvent(y)}),c[Is])}function mt(){ue.call(this),this.i=new In(this),this.M=this,this.F=null}M(mt,ue),mt.prototype[Et]=!0,mt.prototype.removeEventListener=function(c,y,v,w){Rr(this,c,y,v,w)};function Ye(c,y){var v,w=c.F;if(w)for(v=[];w;w=w.F)v.push(w);if(c=c.M,w=y.type||y,typeof y=="string")y=new re(y,c);else if(y instanceof re)y.target=y.target||c;else{var B=y;y=new re(w,c),x(y,B)}if(B=!0,v)for(var $=v.length-1;0<=$;$--){var oe=y.g=v[$];B=dn(oe,w,!0,y)&&B}if(oe=y.g=c,B=dn(oe,w,!0,y)&&B,B=dn(oe,w,!1,y)&&B,v)for($=0;$<v.length;$++)oe=y.g=v[$],B=dn(oe,w,!1,y)&&B}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],w=0;w<v.length;w++)ei(v[w]);delete c.g[y],c.h--}}this.F=null},mt.prototype.K=function(c,y,v,w){return this.i.add(String(c),y,!1,v,w)},mt.prototype.L=function(c,y,v,w){return this.i.add(String(c),y,!0,v,w)};function dn(c,y,v,w){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,$=0;$<y.length;++$){var oe=y[$];if(oe&&!oe.da&&oe.capture==v){var Fe=oe.listener,kt=oe.ha||oe.src;oe.fa&&di(c.i,oe),B=Fe.call(kt,w)!==!1&&B}}return B&&!w.defaultPrevented}function Vt(c,y,v){if(typeof c=="function")v&&(c=R(c,v));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function ba(c){c.g=Vt(()=>{c.g=null,c.i&&(c.i=!1,ba(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class qo extends ue{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ba(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(c){ue.call(this),this.h=c,this.g={}}M(qi,ue);var pi=[];function Hi(c){Ae(c.g,function(y,v){this.g.hasOwnProperty(v)&&Ir(y)},c),c.g={}}qi.prototype.N=function(){qi.aa.N.call(this),Hi(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=m.JSON.stringify,Fi=m.JSON.parse,gi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Cs(){}Cs.prototype.h=null;function Ns(c){return c.h||(c.h=c.i())}function z(){}var le={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fe(){re.call(this,"d")}M(fe,re);function _e(){re.call(this,"c")}M(_e,re);var ge={},xe=null;function dt(){return xe=xe||new mt}ge.La="serverreachability";function Cn(c){re.call(this,ge.La,c)}M(Cn,re);function $t(c){const y=dt();Ye(y,new Cn(y))}ge.STAT_EVENT="statevent";function rn(c,y){re.call(this,ge.STAT_EVENT,c),this.stat=y}M(rn,re);function Ze(c){const y=dt();Ye(y,new rn(y,c))}ge.Ma="timingevent";function ct(c,y){re.call(this,ge.Ma,c),this.size=y}M(ct,re);function yt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Xe(){this.g=!0}Xe.prototype.xa=function(){this.g=!1};function Tt(c,y,v,w,B,$){c.info(function(){if(c.g)if($)for(var oe="",Fe=$.split("&"),kt=0;kt<Fe.length;kt++){var Ge=Fe[kt].split("=");if(1<Ge.length){var qt=Ge[0];Ge=Ge[1];var Pt=qt.split("_");oe=2<=Pt.length&&Pt[1]=="type"?oe+(qt+"="+Ge+"&"):oe+(qt+"=redacted&")}}else oe=null;else oe=$;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+v+`
`+oe})}function bf(c,y,v,w,B,$,oe){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+v+`
`+$+" "+oe})}function Nr(c,y,v,w){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ds(c,v)+(w?" "+w:"")})}function ku(c,y){c.info(function(){return"TIMEOUT: "+y})}Xe.prototype.info=function(){};function Ds(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var w=v[c];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var oe=1;oe<B.length;oe++)B[oe]=""}}}}return En(v)}catch{return y}}var Dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yi;function vi(){}M(vi,Cs),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},yi=new vi;function mn(c,y,v,w){this.j=c,this.i=y,this.l=v,this.R=w||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Ho={},wa={};function ti(c,y,v){c.L=1,c.v=ks(Nn(y)),c.m=v,c.P=!0,Ki(c,null)}function Ki(c,y){c.F=Date.now(),xs(c),c.A=Nn(c.v);var v=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Yo(v.i,"t",w),c.C=0,v=c.j.J,c.h=new St,c.g=Wu(c.j,v?y:null,!c.m),0<c.O&&(c.M=new qo(R(c.Y,c,c.g),c.O)),y=c.U,v=c.g,w=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(pi[0]=B.toString()),B=pi);for(var $=0;$<B.length;$++){var oe=Rs(v,B[$],w||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),$t(),Tt(c.i,c.u,c.A,c.l,c.R,c.m)}mn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Hn(c)==3?y.j():this.Y(c)},mn.prototype.Y=function(c){try{if(c==this.g)e:{const Pt=Hn(this.g);var y=this.g.Ba();const er=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Hu(this.g)))){this.J||Pt!=4||y==7||(y==8||0>=er?$t(3):$t(2)),xr(this);var v=this.g.Z();this.X=v;t:if(Pu(this)){var w=Hu(this.g);c="";var B=w.length,$=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),_i(this);var oe="";break t}this.h.i=new m.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(w[y],{stream:!($&&y==B-1)});w.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,bf(this.i,this.u,this.A,this.l,this.R,Pt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,kt=this.g;if((Fe=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Fe)){var Ge=Fe;break t}}Ge=null}if(v=Ge)Nr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Os(this,v);else{this.o=!1,this.s=3,Ze(12),Qt(this),_i(this);break e}}if(this.P){v=!0;let Yt;for(;!this.J&&this.C<oe.length;)if(Yt=Lu(this,oe),Yt==wa){Pt==4&&(this.s=4,Ze(14),v=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Ho){this.s=4,Ze(15),Nr(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else Nr(this.i,this.l,Yt,null),Os(this,Yt);if(Pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||oe.length!=0||this.h.h||(this.s=1,Ze(16),v=!1),this.o=this.o&&v,!v)Nr(this.i,this.l,oe,"[Invalid Chunked Response]"),Qt(this),_i(this);else if(0<oe.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Hs(qt),qt.M=!0,Ze(11))}}else Nr(this.i,this.l,oe,null),Os(this,oe);Pt==4&&Qt(this),this.o&&!this.J&&(Pt==4?Qu(this.j,this):(this.o=!1,xs(this)))}else If(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),Qt(this),_i(this)}}}catch{}finally{}};function Pu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Lu(c,y){var v=c.C,w=y.indexOf(`
`,v);return w==-1?wa:(v=Number(y.substring(v,w)),isNaN(v)?Ho:(w+=1,w+v>y.length?wa:(y=y.slice(w,w+v),c.C=w+v,y)))}mn.prototype.cancel=function(){this.J=!0,Qt(this)};function xs(c){c.S=Date.now()+c.I,Uu(c,c.I)}function Uu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yt(R(c.ba,c),y)}function xr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ku(this.i,this.A),this.L!=2&&($t(),Ze(17)),Qt(this),this.s=2,_i(this)):Uu(this,this.S-c)};function _i(c){c.j.G==0||c.J||Qu(c.j,c)}function Qt(c){xr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Hi(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Os(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Fo(v.h,c))){if(!c.K&&Fo(v.h,c)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ka(v),Ma(v);else break e;el(v),Ze(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=yt(R(v.Za,v),6e3));if(1>=Aa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ji(v,11)}else if((c.K||v.g==c)&&ka(v),!se(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Ge=B[y];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];const qt=Ge[3];qt!=null&&(v.la=qt,v.j.info("VER="+v.la));const Pt=Ge[4];Pt!=null&&(v.Aa=Pt,v.j.info("SVER="+v.Aa));const er=Ge[5];er!=null&&typeof er=="number"&&0<er&&(w=1.5*er,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Yt=c.g;if(Yt){const Ri=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var $=w.h;$.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ra($,$.h),$.h=null))}if(w.D){const nl=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(w.ya=nl,rt(w.I,w.D,nl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var oe=c;if(w.qa=Xu(w,w.J?w.ia:null,w.W),oe.K){pn(w.h,oe);var Fe=oe,kt=w.L;kt&&(Fe.I=kt),Fe.B&&(xr(Fe),xs(Fe)),w.g=oe}else Ku(w);0<v.i.length&&Va(v)}else Ge[0]!="stop"&&Ge[0]!="close"||Ji(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Ji(v,7):Zo(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}$t(4)}catch{}}var ju=class{constructor(c,y){this.g=c,this.map=y}};function $i(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Aa(c){return c.h?1:c.g?c.g.size:0}function Fo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ra(c,y){c.g?c.g.add(y):c.h=y}function pn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}$i.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Go(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Y(c.i)}function wf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,w=0;w<v;w++)y.push(c[w]);return y}y=[],v=0;for(w in c)y[v++]=c[w];return y}function Ia(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const w in c)y[v++]=w;return y}}}function Ko(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Ia(c),w=wf(c),B=w.length,$=0;$<B;$++)y.call(void 0,w[$],v&&v[$],c)}var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sf(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var w=c[v].indexOf("="),B=null;if(0<=w){var $=c[v].substring(0,w);B=c[v].substring(w+1)}else $=c[v];y($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Nt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Nt){this.h=c.h,Vs(this,c.j),this.o=c.o,this.g=c.g,Or(this,c.s),this.l=c.l;var y=c.i,v=new Yi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Qi(this,v),this.m=c.m}else c&&(y=String(c).match(Ms))?(this.h=!1,Vs(this,y[1]||"",!0),this.o=zn(y[2]||""),this.g=zn(y[3]||"",!0),Or(this,y[4]),this.l=zn(y[5]||"",!0),Qi(this,y[6]||"",!0),this.m=zn(y[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Nt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Ps(y,$o,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ps(y,$o,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ps(v,v.charAt(0)=="/"?Af:Qo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ps(v,Ca)),c.join("")};function Nn(c){return new Nt(c)}function Vs(c,y,v){c.j=v?zn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Or(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Qi(c,y,v){y instanceof Yi?(c.i=y,Bu(c.i,c.h)):(v||(y=Ps(y,Rf)),c.i=new Yi(y,c.h))}function rt(c,y,v){c.i.set(y,v)}function ks(c){return rt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ps(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,zu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function zu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $o=/[#\/\?@]/g,Qo=/[#\?:]/g,Af=/[#\?]/g,Rf=/[#\?@]/g,Ca=/#/g;function Yi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Bn(c){c.g||(c.g=new Map,c.h=0,c.i&&Sf(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Yi.prototype,i.add=function(c,y){Bn(this),this.i=null,c=Ei(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Xi(c,y){Bn(c),y=Ei(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Wi(c,y){return Bn(c),y=Ei(c,y),c.g.has(y)}i.forEach=function(c,y){Bn(this),this.g.forEach(function(v,w){v.forEach(function(B){c.call(y,B,w,this)},this)},this)},i.na=function(){Bn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const B=c[w];for(let $=0;$<B.length;$++)v.push(y[w])}return v},i.V=function(c){Bn(this);let y=[];if(typeof c=="string")Wi(this,c)&&(y=y.concat(this.g.get(Ei(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return Bn(this),this.i=null,c=Ei(this,c),Wi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Yo(c,y,v){Xi(c,y),0<v.length&&(c.i=null,c.g.set(Ei(c,y),Y(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const $=encodeURIComponent(String(w)),oe=this.V(w);for(w=0;w<oe.length;w++){var B=$;oe[w]!==""&&(B+="="+encodeURIComponent(String(oe[w]))),c.push(B)}}return this.i=c.join("&")};function Ei(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Bu(c,y){y&&!c.j&&(Bn(c),c.i=null,c.g.forEach(function(v,w){var B=w.toLowerCase();w!=B&&(Xi(this,w),Yo(this,B,v))},c)),c.j=y}function Ls(c,y){const v=new Xe;if(m.Image){const w=new Image;w.onload=k(qn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=k(qn,v,"TestLoadImage: error",!1,y,w),w.onabort=k(qn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=k(qn,v,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else y(!1)}function ni(c,y){const v=new Xe,w=new AbortController,B=setTimeout(()=>{w.abort(),qn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:w.signal}).then($=>{clearTimeout(B),$.ok?qn(v,"TestPingServer: ok",!0,y):qn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),qn(v,"TestPingServer: error",!1,y)})}function qn(c,y,v,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(v)}catch{}}function Us(){this.g=new gi}function Ti(c,y,v){const w=v||"";try{Ko(c,function(B,$){let oe=B;g(B)&&(oe=En(B)),y.push(w+$+"="+encodeURIComponent(oe))})}catch(B){throw y.push(w+"type="+encodeURIComponent("_badmap")),B}}function Mr(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Mr,Cs),Mr.prototype.g=function(){return new Zi(this.l,this.j)},Mr.prototype.i=function(c){return function(){return c}}({});function Zi(c,y){mt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Zi,mt),i=Zi.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,wi(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?bi(this):wi(this),this.readyState==3&&Xo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,bi(this))},i.Qa=function(c){this.g&&(this.response=c,bi(this))},i.ga=function(){this.g&&bi(this)};function bi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wi(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function wi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Wo(c){let y="";return Ae(c,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Bt(c,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Wo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):rt(c,y,v))}function Je(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Je,mt);var Na=/^https?$/i,js=["POST","PUT"];i=Je.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yi.g(),this.v=this.o?Ns(this.o):Ns(yi),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){qu(this,$);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)v.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())v.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(js,y,void 0))||w||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of v)this.g.setRequestHeader($,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zs(this),this.u=!0,this.g.send(c),this.u=!1}catch($){qu(this,$)}};function qu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Da(c),Si(c)}function Da(c){c.A||(c.A=!0,Ye(c,"complete"),Ye(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ye(this,"complete"),Ye(this,"abort"),Si(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Si(this,!0)),Je.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?xa(this):this.bb())},i.bb=function(){xa(this)};function xa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)Vt(c.Ea,0,c);else if(Ye(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=oe===0){var B=String(c.D).match(Ms)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),w=!Na.test(B?B.toLowerCase():"")}v=w}if(v)Ye(c,"complete"),Ye(c,"success");else{c.m=6;try{var $=2<Hn(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",Da(c)}}finally{Si(c)}}}}function Si(c,y){if(c.g){zs(c);const v=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ye(c,"ready");try{v.onreadystatechange=w}catch{}}}function zs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Fi(y)}};function Hu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function If(c){const y={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(se(c[w]))continue;var v=O(c[w]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=y[B]||[];y[B]=$,$.push(v)}D(y,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bs(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Oa(c){this.Aa=0,this.i=[],this.j=new Xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bs("baseRetryDelayMs",5e3,c),this.cb=Bs("retryDelaySeedMs",1e4,c),this.Wa=Bs("forwardChannelMaxRetries",2,c),this.wa=Bs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $i(c&&c.concurrentRequestLimit),this.Da=new Us,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Oa.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,w){Ze(0),this.W=c,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Xu(this,null,this.W),Va(this)};function Zo(c){if(Fu(c),c.G==3){var y=c.U++,v=Nn(c.I);if(rt(v,"SID",c.K),rt(v,"RID",y),rt(v,"TYPE","terminate"),qs(c,v),y=new mn(c,c.j,y),y.L=2,y.v=ks(Nn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=Wu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),xs(y)}Yu(c)}function Ma(c){c.g&&(Hs(c),c.g.cancel(),c.g=null)}function Fu(c){Ma(c),c.u&&(m.clearTimeout(c.u),c.u=null),ka(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Va(c){if(!Sa(c.h)&&!c.s){c.s=!0;var y=c.Ga;ae||V(),ve||(ae(),ve=!0),Le.add(y,c),c.B=0}}function Cf(c,y){return Aa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yt(R(c.Ga,c,y),tl(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new mn(this,this.j,c);let $=this.o;if(this.S&&($?($=S($),x($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Gu(this,B,y),v=Nn(this.I),rt(v,"RID",c),rt(v,"CVER",22),this.D&&rt(v,"X-HTTP-Session-Id",this.D),qs(this,v),$&&(this.O?y="headers="+encodeURIComponent(String(Wo($)))+"&"+y:this.m&&Bt(v,this.m,$)),Ra(this.h,B),this.Ua&&rt(v,"TYPE","init"),this.P?(rt(v,"$req",y),rt(v,"SID","null"),B.T=!0,ti(B,v,null)):ti(B,v,y),this.G=2}}else this.G==3&&(c?Jo(this,c):this.i.length==0||Sa(this.h)||Jo(this))};function Jo(c,y){var v;y?v=y.l:v=c.U++;const w=Nn(c.I);rt(w,"SID",c.K),rt(w,"RID",v),rt(w,"AID",c.T),qs(c,w),c.m&&c.o&&Bt(w,c.m,c.o),v=new mn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Gu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ra(c.h,v),ti(v,w,y)}function qs(c,y){c.H&&Ae(c.H,function(v,w){rt(y,w,v)}),c.l&&Ko({},function(v,w){rt(y,w,v)})}function Gu(c,y,v){v=Math.min(c.i.length,v);var w=c.l?R(c.l.Na,c.l,c):null;e:{var B=c.i;let $=-1;for(;;){const oe=["count="+v];$==-1?0<v?($=B[0].g,oe.push("ofs="+$)):$=0:oe.push("ofs="+$);let Fe=!0;for(let kt=0;kt<v;kt++){let Ge=B[kt].g;const qt=B[kt].map;if(Ge-=$,0>Ge)$=Math.max(0,B[kt].g-100),Fe=!1;else try{Ti(qt,oe,"req"+Ge+"_")}catch{w&&w(qt)}}if(Fe){w=oe.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,w}function Ku(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ae||V(),ve||(ae(),ve=!0),Le.add(y,c),c.v=0}}function el(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yt(R(c.Fa,c),tl(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yt(R(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Ma(this),$u(this))};function Hs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function $u(c){c.g=new mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Nn(c.qa);rt(y,"RID","rpc"),rt(y,"SID",c.K),rt(y,"AID",c.T),rt(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&rt(y,"TO",c.ja),rt(y,"TYPE","xmlhttp"),qs(c,y),c.m&&c.o&&Bt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ks(Nn(y)),v.m=null,v.P=!0,Ki(v,c)}i.Za=function(){this.C!=null&&(this.C=null,Ma(this),el(this),Ze(19))};function ka(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Qu(c,y){var v=null;if(c.g==y){ka(c),Hs(c),c.g=null;var w=2}else if(Fo(c.h,y))v=y.D,pn(c.h,y),w=1;else return;if(c.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;w=dt(),Ye(w,new ct(w,v)),Va(c)}else Ku(c);else if(B=y.s,B==3||B==0&&0<y.X||!(w==1&&Cf(c,y)||w==2&&el(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),B){case 1:Ji(c,5);break;case 4:Ji(c,10);break;case 3:Ji(c,6);break;default:Ji(c,2)}}}function tl(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Ji(c,y){if(c.j.info("Error code "+y),y==2){var v=R(c.fb,c),w=c.Xa;const B=!w;w=new Nt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Vs(w,"https"),ks(w),B?Ls(w.toString(),v):ni(w.toString(),v)}else Ze(2);c.G=0,c.l&&c.l.sa(y),Yu(c),Fu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function Yu(c){if(c.G=0,c.ka=[],c.l){const y=Go(c.h);(y.length!=0||c.i.length!=0)&&(F(c.ka,y),F(c.ka,c.i),c.h.i.length=0,Y(c.i),c.i.length=0),c.l.ra()}}function Xu(c,y,v){var w=v instanceof Nt?Nn(v):new Nt(v);if(w.g!="")y&&(w.g=y+"."+w.g),Or(w,w.s);else{var B=m.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var $=new Nt(null);w&&Vs($,w),y&&($.g=y),B&&Or($,B),v&&($.l=v),w=$}return v=c.D,y=c.ya,v&&y&&rt(w,v,y),rt(w,"VER",c.la),qs(c,w),w}function Wu(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Je(new Mr({eb:v})):new Je(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}i=Zu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Pa(){}Pa.prototype.g=function(c,y){return new gn(c,y)};function gn(c,y){mt.call(this),this.g=new Oa(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!se(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ai(this)}M(gn,mt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Zo(this.g)},gn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=En(c),c=v);y.i.push(new ju(y.Ya++,c)),y.G==3&&Va(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,gn.aa.N.call(this)};function Ju(c){fe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(Ju,fe);function ec(){_e.call(this),this.status=1}M(ec,_e);function Ai(c){this.g=c}M(Ai,Zu),Ai.prototype.ua=function(){Ye(this.g,"a")},Ai.prototype.ta=function(c){Ye(this.g,new Ju(c))},Ai.prototype.sa=function(c){Ye(this.g,new ec)},Ai.prototype.ra=function(){Ye(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,gT=function(){return new Pa},pT=function(){return dt()},mT=ge,Qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,uh=Dr,Gi.COMPLETE="complete",dT=Gi,z.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Yl=z,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,fT=Je}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const h0="@firebase/firestore",f0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new $h("@firebase/firestore");function fo(){return ua.logLevel}function de(i,...e){if(ua.logLevel<=ze.DEBUG){const n=e.map(wp);ua.debug(`Firestore (${Oo}): ${i}`,...n)}}function Er(i,...e){if(ua.logLevel<=ze.ERROR){const n=e.map(wp);ua.error(`Firestore (${Oo}): ${i}`,...n)}}function So(i,...e){if(ua.logLevel<=ze.WARN){const n=e.map(wp);ua.warn(`Firestore (${Oo}): ${i}`,...n)}}function wp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(i="Unexpected state"){const e=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+i;throw Er(e),new Error(e)}function et(i,e){i||Ce()}function De(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class II{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CI{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new gr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new gr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string"),new yT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new ln(e)}}class NI{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class DI{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new NI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xI{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Wn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){et(this.o===void 0);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,de("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new d0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(et(typeof n.token=="string"),this.R=n.token,new d0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=OI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ke(i,e){return i<e?-1:i>e?1:0}function Ym(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return ke(s,o);{const u=vT(),f=MI(u.encode(m0(i,n)),u.encode(m0(e,n)));return f!==0?f:ke(s,o)}}n+=s>65535?2:1}return ke(i.length,e.length)}function m0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function MI(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return ke(i[n],e[n]);return ke(i.length,e.length)}function Ao(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=-62135596800,g0=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*g0);return new jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<p0)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g0}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-p0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new jt(0,0))}static max(){return new Ne(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="__name__";class Oi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ce(),s===void 0?s=e.length-n:s>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Oi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ke(e.length,n.length)}static compareSegments(e,n){const s=Oi.isNumericId(e),o=Oi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Oi.extractNumericId(e).compare(Oi.extractNumericId(n)):Ym(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class ft extends Oi{construct(e,n,s){return new ft(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const VI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Oi{construct(e,n,s){return new tn(e,n,s)}static isValidIdentifier(e){return VI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===y0}static keyField(){return new tn([y0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ft.fromString(e))}static fromName(e){return new Te(ft.fromString(e).popFirst(5))}static empty(){return new Te(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function kI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new ds(o,Te.empty(),e)}function PI(i){return new ds(i.readTime,i.key,ou)}class ds{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ds(Ne.min(),Te.empty(),ou)}static max(){return new ds(Ne.max(),Te.empty(),ou)}}function LI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(i.documentKey,e.documentKey),n!==0?n:ke(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==UI)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,s)=>{n(e)})}static reject(e){return new te((n,s)=>{s(e)})}static waitFor(e){return new te((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=te.resolve(!1);for(const s of e)n=n.next(o=>o?te.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new te((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{f[g]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new te((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function zI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=-1;function Yh(i){return i==null}function Ah(i){return i===0&&1/i==-1/0}function BI(i){return typeof i=="number"&&Number.isInteger(i)&&!Ah(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="";function qI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=v0(e)),e=HI(i.get(n),e);return v0(e)}function HI(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case ET:n+="";break;default:n+=u}}return n}function v0(i){return i+ET+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function _s(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function TT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Jt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E0(this.data.getIterator())}getIteratorFrom(e){return new E0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class E0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new zt(tn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new bT("Invalid base64 string: "+u):u}}(e);return new nn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const FI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(et(!!i),typeof i=="string"){let e=0;const n=FI.exec(i);if(et(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(i.seconds),nanos:It(i.nanos)}}function It(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ps(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="server_timestamp",ST="__type__",AT="__previous_value__",RT="__local_write_time__";function Ap(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[ST])===null||n===void 0?void 0:n.stringValue)===wT}function Xh(i){const e=i.mapValue.fields[AT];return Ap(e)?Xh(e):e}function lu(i){const e=ms(i.mapValue.fields[RT].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,s,o,u,f,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const Rh="(default)";class uu{constructor(e,n){this.projectId=e,this.database=n||Rh}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===Rh}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__type__",KI="__max__",ih={mapValue:{}},CT="__vector__",Ih="value";function gs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ap(i)?4:QI(i)?9007199254740991:$I(i)?10:11:Ce()}function ji(i,e){if(i===e)return!0;const n=gs(i);if(n!==gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return lu(i).isEqual(lu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ms(o.timestampValue),m=ms(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ps(o.bytesValue).isEqual(ps(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return It(o.geoPointValue.latitude)===It(u.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return It(o.integerValue)===It(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=It(o.doubleValue),m=It(u.doubleValue);return f===m?Ah(f)===Ah(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return Ao(i.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(_0(f)!==_0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!ji(f[p],m[p])))return!1;return!0}(i,e);default:return Ce()}}function cu(i,e){return(i.values||[]).find(n=>ji(n,e))!==void 0}function Ro(i,e){if(i===e)return 0;const n=gs(i),s=gs(e);if(n!==s)return ke(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(i.booleanValue,e.booleanValue);case 2:return function(u,f){const m=It(u.integerValue||u.doubleValue),p=It(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return T0(i.timestampValue,e.timestampValue);case 4:return T0(lu(i),lu(e));case 5:return Ym(i.stringValue,e.stringValue);case 6:return function(u,f){const m=ps(u),p=ps(f);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=ke(m[g],p[g]);if(E!==0)return E}return ke(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const m=ke(It(u.latitude),It(f.latitude));return m!==0?m:ke(It(u.longitude),It(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return b0(i.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,E;const A=u.fields||{},R=f.fields||{},k=(m=A[Ih])===null||m===void 0?void 0:m.arrayValue,M=(p=R[Ih])===null||p===void 0?void 0:p.arrayValue,Y=ke(((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return Y!==0?Y:b0(k,M)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===ih.mapValue&&f===ih.mapValue)return 0;if(u===ih.mapValue)return 1;if(f===ih.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let A=0;A<p.length&&A<E.length;++A){const R=Ym(p[A],E[A]);if(R!==0)return R;const k=Ro(m[p[A]],g[E[A]]);if(k!==0)return k}return ke(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Ce()}}function T0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ke(i,e);const n=ms(i),s=ms(e),o=ke(n.seconds,s.seconds);return o!==0?o:ke(n.nanos,s.nanos)}function b0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ro(n[o],s[o]);if(u)return u}return ke(n.length,s.length)}function Io(i){return Xm(i)}function Xm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ms(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ps(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Te.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Xm(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Xm(n.fields[f])}`;return o+"}"}(i.mapValue):Ce()}function ch(i){switch(gs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xh(i);return e?16+ch(e):16;case 5:return 2*i.stringValue.length;case 6:return ps(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+ch(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return _s(s.fields,(u,f)=>{o+=u.length+ch(f)}),o}(i.mapValue);default:throw Ce()}}function w0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wm(i){return!!i&&"integerValue"in i}function Rp(i){return!!i&&"arrayValue"in i}function S0(i){return!!i&&"nullValue"in i}function A0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function hh(i){return!!i&&"mapValue"in i}function $I(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[IT])===null||n===void 0?void 0:n.stringValue)===CT}function Jl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return _s(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Jl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function QI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===KI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(n)}setAll(e){let n=tn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Jl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];hh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){_s(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new An(Jl(this.value))}}function NT(i){const e=[];return _s(i.fields,(n,s)=>{const o=new tn([n]);if(hh(s)){const u=NT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new un(e,0,Ne.min(),Ne.min(),Ne.min(),An.empty(),0)}static newFoundDocument(e,n,s,o){return new un(e,1,n,Ne.min(),s,o,0)}static newNoDocument(e,n){return new un(e,2,n,Ne.min(),Ne.min(),An.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Ne.min(),Ne.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.position=e,this.inclusive=n}}function R0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(f.referenceValue),n.key):s=Ro(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function I0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ji(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function YI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class Mt extends DT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new WI(e,n,s):n==="array-contains"?new e1(e,s):n==="in"?new t1(e,s):n==="not-in"?new n1(e,s):n==="array-contains-any"?new i1(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new ZI(e,s):new JI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ro(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends DT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new li(e,n)}matches(e){return xT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function xT(i){return i.op==="and"}function OT(i){return XI(i)&&xT(i)}function XI(i){for(const e of i.filters)if(e instanceof li)return!1;return!0}function Zm(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+Io(i.value);if(OT(i))return i.filters.map(e=>Zm(e)).join(",");{const e=i.filters.map(n=>Zm(n)).join(",");return`${i.op}(${e})`}}function MT(i,e){return i instanceof Mt?function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&ji(s.value,o.value)}(i,e):i instanceof li?function(s,o){return o instanceof li&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&MT(f,o.filters[m]),!0):!1}(i,e):void Ce()}function VT(i){return i instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`}(i):i instanceof li?function(n){return n.op.toString()+" {"+n.getFilters().map(VT).join(" ,")+"}"}(i):"Filter"}class WI extends Mt{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZI extends Mt{constructor(e,n){super(e,"in",n),this.keys=kT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JI extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=kT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Te.fromName(s.referenceValue))}class e1 extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rp(n)&&cu(n.arrayValue,this.value)}}class t1 extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}}class n1 extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cu(this.value.arrayValue,n)}}class i1 extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>cu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function C0(i,e=null,n=[],s=[],o=null,u=null,f=null){return new r1(i,e,n,s,o,u,f)}function Ip(i){const e=De(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Zm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Io(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Io(s)).join(",")),e.le=n}return e.le}function Cp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!YI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!MT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!I0(i.startAt,e.startAt)&&I0(i.endAt,e.endAt)}function Jm(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function s1(i,e,n,s,o,u,f,m){return new ya(i,e,n,s,o,u,f,m)}function Wh(i){return new ya(i)}function N0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function PT(i){return i.collectionGroup!==null}function eu(i){const e=De(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new zt(tn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new hu(u,s))}),n.has(tn.keyField().canonicalString())||e.he.push(new hu(tn.keyField(),s))}return e.he}function Vi(i){const e=De(i);return e.Pe||(e.Pe=a1(e,eu(i))),e.Pe}function a1(i,e){if(i.limitType==="F")return C0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new hu(o.field,u)});const n=i.endAt?new Ch(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ch(i.startAt.position,i.startAt.inclusive):null;return C0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ep(i,e){const n=i.filters.concat([e]);return new ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function tp(i,e,n){return new ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Zh(i,e){return Cp(Vi(i),Vi(e))&&i.limitType===e.limitType}function LT(i){return`${Ip(Vi(i))}|lt:${i.limitType}`}function mo(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>VT(o)).join(", ")}]`),Yh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Io(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Io(o)).join(",")),`Target(${s})`}(Vi(i))}; limitType=${i.limitType})`}function Jh(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of eu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=R0(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,eu(s),o)||s.endAt&&!function(f,m,p){const g=R0(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,eu(s),o))}(i,e)}function o1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function UT(i){return(e,n)=>{let s=!1;for(const o of eu(i)){const u=l1(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function l1(i,e,n){const s=i.field.isKeyField()?Te.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Ro(p,g):Ce()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return TT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new _t(Te.comparator);function Tr(){return u1}const jT=new _t(Te.comparator);function Xl(...i){let e=jT;for(const n of i)e=e.insert(n.key,n);return e}function zT(i){let e=jT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function aa(){return tu()}function BT(){return tu()}function tu(){return new va(i=>i.toString(),(i,e)=>i.isEqual(e))}const c1=new _t(Te.comparator),h1=new zt(Te.comparator);function Be(...i){let e=h1;for(const n of i)e=e.add(n);return e}const f1=new zt(ke);function d1(){return f1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function qT(i){return{integerValue:""+i}}function HT(i,e){return BI(e)?qT(e):Np(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this._=void 0}}function m1(i,e,n){return i instanceof fu?function(o,u){const f={fields:{[ST]:{stringValue:wT},[RT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ap(u)&&(u=Xh(u)),u&&(f.fields[AT]=u),{mapValue:f}}(n,e):i instanceof du?GT(i,e):i instanceof mu?KT(i,e):function(o,u){const f=FT(o,u),m=D0(f)+D0(o.Ie);return Wm(f)&&Wm(o.Ie)?qT(m):Np(o.serializer,m)}(i,e)}function p1(i,e,n){return i instanceof du?GT(i,e):i instanceof mu?KT(i,e):n}function FT(i,e){return i instanceof pu?function(s){return Wm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class fu extends ef{}class du extends ef{constructor(e){super(),this.elements=e}}function GT(i,e){const n=$T(e);for(const s of i.elements)n.some(o=>ji(o,s))||n.push(s);return{arrayValue:{values:n}}}class mu extends ef{constructor(e){super(),this.elements=e}}function KT(i,e){let n=$T(e);for(const s of i.elements)n=n.filter(o=>!ji(o,s));return{arrayValue:{values:n}}}class pu extends ef{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function D0(i){return It(i.integerValue||i.doubleValue)}function $T(i){return Rp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.field=e,this.transform=n}}function g1(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof du&&o instanceof du||s instanceof mu&&o instanceof mu?Ao(s.elements,o.elements,ji):s instanceof pu&&o instanceof pu?ji(s.Ie,o.Ie):s instanceof fu&&o instanceof fu}(i.transform,e.transform)}class y1{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class tf{}function YT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Dp(i.key,Jn.none()):new Eu(i.key,i.data,Jn.none());{const n=i.data,s=An.empty();let o=new zt(tn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Es(i.key,s,new Ln(o.toArray()),Jn.none())}}function v1(i,e,n){i instanceof Eu?function(o,u,f){const m=o.value.clone(),p=O0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Es?function(o,u,f){if(!fh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=O0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(XT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function nu(i,e,n,s){return i instanceof Eu?function(u,f,m,p){if(!fh(u.precondition,f))return m;const g=u.value.clone(),E=M0(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof Es?function(u,f,m,p){if(!fh(u.precondition,f))return m;const g=M0(u.fieldTransforms,p,f),E=f.data;return E.setAll(XT(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(i,e,n,s):function(u,f,m){return fh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function _1(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=FT(s.transform,o||null);u!=null&&(n===null&&(n=An.empty()),n.set(s.field,u))}return n||null}function x0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ao(s,o,(u,f)=>g1(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Eu extends tf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Es extends tf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function XT(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function O0(i,e,n){const s=new Map;et(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,p1(f,m,n[o]))}return s}function M0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,m1(u,f,e))}return s}class Dp extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E1 extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&v1(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=BT();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=YT(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Ne.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(n,s)=>x0(n,s))&&Ao(this.baseMutations,e.baseMutations,(n,s)=>x0(n,s))}}class xp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){et(e.mutations.length===s.length);let o=function(){return c1}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new xp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,$e;function S1(i){switch(i){case J.OK:return Ce();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ce()}}function WT(i){if(i===void 0)return Er("GRPC error has no .code"),J.UNKNOWN;switch(i){case Ot.OK:return J.OK;case Ot.CANCELLED:return J.CANCELLED;case Ot.UNKNOWN:return J.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return J.INTERNAL;case Ot.UNAVAILABLE:return J.UNAVAILABLE;case Ot.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ot.NOT_FOUND:return J.NOT_FOUND;case Ot.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ot.ABORTED:return J.ABORTED;case Ot.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ot.DATA_LOSS:return J.DATA_LOSS;default:return Ce()}}($e=Ot||(Ot={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=new cs([4294967295,4294967295],0);function V0(i){const e=vT().encode(i),n=new hT;return n.update(e),new Uint8Array(n.digest())}function k0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new cs([n,s],0),new cs([o,u],0)]}class Op{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Wl(`Invalid padding: ${n}`);if(s<0)throw new Wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=cs.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(cs.fromNumber(s)));return o.compare(A1)===1&&(o=new cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=V0(e),[s,o]=k0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Op(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const n=V0(e),[s,o]=k0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nf(Ne.min(),o,new _t(ke),Tr(),Be())}}class Tu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Tu(s,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class ZT{constructor(e,n){this.targetId=e,this.ge=n}}class JT{constructor(e,n,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class P0{constructor(){this.pe=0,this.ye=L0(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Be(),n=Be(),s=Be();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ce()}}),new Tu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=L0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,et(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class R1{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Tr(),this.$e=rh(),this.Ue=rh(),this.Ke=new _t(ke)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(Jm(u))if(s===0){const f=new Te(u.path);this.ze(n,f,un.newNoDocument(f,Ne.min()))}else et(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(e),p=m?this.nt(m,e,f):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ps(s).toUint8Array()}catch(p){if(p instanceof bT)return So("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Op(f,o,u)}catch(p){return So(p instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&Jm(m.target)){const p=new Te(m.target.path);this._t(p).has(f)||this.ut(f,p)||this.ze(f,p,un.newNoDocument(p,e))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=Be();this.Ue.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new nf(e,n,this.Ke,this.Qe,s);return this.Qe=Tr(),this.$e=rh(),this.Ue=rh(),this.Ke=new _t(ke),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new P0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new zt(ke),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new zt(ke),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new P0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function rh(){return new _t(Te.comparator)}function L0(){return new _t(Te.comparator)}const I1={asc:"ASCENDING",desc:"DESCENDING"},C1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N1={and:"AND",or:"OR"};class D1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(i,e){return i.useProto3Json||Yh(e)?e:{value:e}}function Nh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function x1(i,e){return Nh(i,e.toTimestamp())}function ki(i){return et(!!i),Ne.fromTimestamp(function(n){const s=ms(n);return new jt(s.seconds,s.nanos)}(i))}function Mp(i,e){return ip(i,e).canonicalString()}function ip(i,e){const n=function(o){return new ft(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function tb(i){const e=ft.fromString(i);return et(ab(e)),e}function rp(i,e){return Mp(i.databaseId,e.path)}function Dm(i,e){const n=tb(e);if(n.get(1)!==i.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(ib(n))}function nb(i,e){return Mp(i.databaseId,e)}function O1(i){const e=tb(i);return e.length===4?ft.emptyPath():ib(e)}function sp(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ib(i){return et(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function U0(i,e,n){return{name:rp(i,e),fields:n.value.mapValue.fields}}function M1(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(et(E===void 0||typeof E=="string"),nn.fromBase64String(E||"")):(et(E===void 0||E instanceof Buffer||E instanceof Uint8Array),nn.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const E=g.code===void 0?J.UNKNOWN:WT(g.code);return new ce(E,g.message||"")}(f);n=new JT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Dm(i,s.document.name),u=ki(s.document.updateTime),f=s.document.createTime?ki(s.document.createTime):Ne.min(),m=new An({mapValue:{fields:s.document.fields}}),p=un.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new dh(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Dm(i,s.document),u=s.readTime?ki(s.readTime):Ne.min(),f=un.newNoDocument(o,u),m=s.removedTargetIds||[];n=new dh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Dm(i,s.document),u=s.removedTargetIds||[];n=new dh([],u,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new w1(o,u),m=s.targetId;n=new ZT(m,f)}}return n}function V1(i,e){let n;if(e instanceof Eu)n={update:U0(i,e.key,e.value)};else if(e instanceof Dp)n={delete:rp(i,e.key)};else if(e instanceof Es)n={update:U0(i,e.key,e.data),updateMask:H1(e.fieldMask)};else{if(!(e instanceof E1))return Ce();n={verify:rp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof fu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof du)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof mu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof pu)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Ce()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:x1(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce()}(i,e.precondition)),n}function k1(i,e){return i&&i.length>0?(et(e!==void 0),i.map(n=>function(o,u){let f=o.updateTime?ki(o.updateTime):ki(u);return f.isEqual(Ne.min())&&(f=ki(u)),new y1(f,o.transformResults||[])}(n,e))):[]}function P1(i,e){return{documents:[nb(i,e.path)]}}function L1(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=nb(i,o);const u=function(g){if(g.length!==0)return sb(li.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(E=>function(R){return{field:po(R.field),direction:z1(R.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=np(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function U1(i){let e=O1(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){et(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(A){const R=rb(A);return R instanceof li&&OT(R)?R.getFilters():[R]}(n.where));let f=[];n.orderBy&&(f=function(A){return A.map(R=>function(M){return new hu(go(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(R))}(n.orderBy));let m=null;n.limit&&(m=function(A){let R;return R=typeof A=="object"?A.value:A,Yh(R)?null:R}(n.limit));let p=null;n.startAt&&(p=function(A){const R=!!A.before,k=A.values||[];return new Ch(k,R)}(n.startAt));let g=null;return n.endAt&&(g=function(A){const R=!A.before,k=A.values||[];return new Ch(k,R)}(n.endAt)),s1(e,o,f,u,m,"F",p,g)}function j1(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rb(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=go(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=go(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=go(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=go(n.unaryFilter.field);return Mt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(i):i.fieldFilter!==void 0?function(n){return Mt.create(go(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return li.create(n.compositeFilter.filters.map(s=>rb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(i):Ce()}function z1(i){return I1[i]}function B1(i){return C1[i]}function q1(i){return N1[i]}function po(i){return{fieldPath:i.canonicalString()}}function go(i){return tn.fromServerFormat(i.fieldPath)}function sb(i){return i instanceof Mt?function(n){if(n.op==="=="){if(A0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(S0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(S0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:B1(n.op),value:n.value}}}(i):i instanceof li?function(n){const s=n.getFilters().map(o=>sb(o));return s.length===1?s[0]:{compositeFilter:{op:q1(n.op),filters:s}}}(i):Ce()}function H1(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ab(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,s,o,u=Ne.min(),f=Ne.min(),m=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.Tt=e}}function G1(i){const e=U1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.Tn=new $1}addToCollectionParentIndex(e,n){return this.Tn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(ds.min())}updateCollectionGroup(e,n,s){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class $1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zt(ft.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ob=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(ob,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Co(0)}static Kn(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="LruGarbageCollector",Q1=1048576;function B0([i,e],[n,s]){const o=ke(i,n);return o===0?ke(e,s):o}class Y1{constructor(e){this.Hn=e,this.buffer=new zt(B0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();B0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class X1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(z0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vo(n)?de(z0,"Ignoring IndexedDB error during garbage collection: ",n):await Mo(n)}await this.er(3e5)})}}class W1{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Qh.ae);const s=new Y1(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(j0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,m=Date.now(),this.removeTargets(e,s,n))).next(A=>(u=A,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(g=Date.now(),fo()<=ze.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${A} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}function Z1(i,e){return new W1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.changes=new va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?te.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&nu(s.mutation,o,Ln.empty(),jt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Be()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Be()){const o=aa();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Xl();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=aa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Be()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=Tr();const f=tu(),m=function(){return tu()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Es)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),nu(E.mutation,g,E.mutation.getFieldMask(),jt.now())):f.set(g.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>f.set(g,E)),n.forEach((g,E)=>{var A;return m.set(g,new eC(E,(A=f.get(g))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,n){const s=tu();let o=new _t((f,m)=>f-m),u=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Ln.empty();E=m.applyToLocalView(g,E),s.set(p,E);const A=(o.get(m.batchId)||Be()).add(p);o=o.insert(m.batchId,A)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,A=BT();E.forEach(R=>{if(!u.has(R)){const k=YT(n.get(R),s.get(R));k!==null&&A.set(R,k),u=u.add(R)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,A))}return te.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):te.resolve(aa());let m=ou,p=u;return f.next(g=>te.forEach(g,(E,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(E)?te.resolve():this.remoteDocumentCache.getEntry(e,E).next(R=>{p=p.insert(E,R)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Be())).next(E=>({batchId:m,changes:zT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(s=>{let o=Xl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Xl();return this.indexManager.getCollectionParents(e,u).next(m=>te.forEach(m,p=>{const g=function(A,R){return new ya(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((A,R)=>{f=f.insert(A,R)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,un.newInvalidDocument(E)))});let m=Xl();return f.forEach((p,g)=>{const E=u.get(p);E!==void 0&&nu(E.mutation,g,Ln.empty(),jt.now()),Jh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return te.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:G1(o.bundledQuery),readTime:ki(o.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.overlays=new _t(Te.comparator),this.Rr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const s=aa();return te.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),te.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),te.resolve()}getOverlaysForCollection(e,n,s){const o=aa(),u=n.length+1,f=new Te(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new _t((g,E)=>g-E);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=aa(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=aa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return te.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new b1(n,s));let u=this.Rr.get(n);u===void 0&&(u=Be(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this.Vr=new zt(Kt.mr),this.gr=new zt(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Kt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new Te(new ft([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Te(new ft([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=Be();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Te.comparator(e.key,n.key)||ke(e.Cr,n.Cr)}static pr(e,n){return ke(e.Cr,n.Cr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new zt(Kt.mr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new T1(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(f)}lookupMutationBatch(e,n){return te.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Sp:this.Fr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zt(ke);return n.forEach(o=>{const u=new Kt(o,0),f=new Kt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),te.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const f=new Kt(new Te(u),0);let m=new zt(ke);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},f),te.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){et(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return te.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Mr.firstAfterOrEqual(s);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.kr=e,this.docs=function(){return new _t(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return te.resolve(s?s.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let s=Tr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():un.newInvalidDocument(o))}),te.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Tr();const f=n.path,m=new Te(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||LI(PI(E),s)<=0||(o.has(E.key)||Jh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ce()}qr(e,n){return te.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new oC(this)}getSize(e){return te.resolve(this.size)}}class oC extends J1{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),te.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.persistence=e,this.Qr=new va(n=>Ip(n),Cp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Vp,this.targetCount=0,this.Kr=Co.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),te.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.zn(n),te.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return te.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),te.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),te.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return te.resolve(s)}containsKey(e,n){return te.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Qh(0),this.zr=!1,this.zr=!0,this.jr=new rC,this.referenceDelegate=e(this),this.Hr=new lC(this),this.indexManager=new K1,this.remoteDocumentCache=function(o){return new aC(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new F1(n),this.Yr=new nC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new sC(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new uC(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return te.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class uC extends jI{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.ti=new Vp,this.ni=null}static ri(e){return new kp(e)}get ii(){if(this.ni)return this.ni;throw Ce()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),te.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),te.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.ii,s=>{const o=Te.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,Ne.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return te.or([()=>te.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Dh{constructor(e,n){this.persistence=e,this.oi=new va(s=>qI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=Z1(this,n)}static ri(e,n){return new Dh(e,n)}Zr(){}Xr(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return te.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?te.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,n).next(m=>{m||(s++,u.removeEntry(f,Ne.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ch(e.data.value)),n}ar(e,n,s){return te.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Be(),o=Be();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Pp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return rR()?8:zI(hn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new cC;return this._s(e,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,f,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(fo()<=ze.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),te.resolve()):(fo()<=ze.DEBUG&&de("QueryEngine","Query:",mo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(fo()<=ze.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):te.resolve())}rs(e,n){if(N0(n))return te.resolve(null);let s=Vi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=tp(n,null,"F"),s=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=Be(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,f,p.readTime)?this.rs(e,tp(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return N0(n)||o.isEqual(Ne.min())?te.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?te.resolve(null):(fo()<=ze.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(n)),this.hs(e,f,n,kI(o,ou)).next(m=>m))})}cs(e,n){let s=new zt(UT(e));return n.forEach((o,u)=>{Jh(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return fo()<=ze.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ns.getDocumentsMatchingQuery(e,n,ds.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="LocalStore",fC=3e8;class dC{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new _t(ke),this.Is=new va(u=>Ip(u),Cp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tC(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function mC(i,e,n,s){return new dC(i,e,n,s)}async function ub(i,e){const n=De(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=Be();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:f,addedBatchIds:m}))})})}function pC(i,e){const n=De(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const A=g.batch,R=A.keys();let k=te.resolve();return R.forEach(M=>{k=k.next(()=>E.getEntry(p,M)).next(Y=>{const F=g.docVersions.get(M);et(F!==null),Y.version.compareTo(F)<0&&(A.applyToRemoteDocument(Y,g),Y.isValidDocument()&&(Y.setReadTime(g.commitVersion),E.addEntry(Y)))})}),k.next(()=>m.mutationQueue.removeMutationBatch(p,A))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Be();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function cb(i){const e=De(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function gC(i,e){const n=De(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((E,A)=>{const R=o.get(A);if(!R)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,A).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,A)));let k=R.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?k=k.withResumeToken(nn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,s)),o=o.insert(A,k),function(Y,F,Q){return Y.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=fC?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(R,k,E)&&m.push(n.Hr.updateTargetData(u,k))});let p=Tr(),g=Be();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(yC(u,f,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(Ne.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(A=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return te.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function yC(i,e,n){let s=Be(),o=Be();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let f=Tr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ne.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):de(Lp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:f,fs:o}})}function vC(i,e){const n=De(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Sp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function _C(i,e){const n=De(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,te.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new as(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function ap(i,e,n){const s=De(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Vo(f))throw f;de(Lp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function q0(i,e,n){const s=De(i);let o=Ne.min(),u=Be();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,E){const A=De(p),R=A.Is.get(E);return R!==void 0?te.resolve(A.Ts.get(R)):A.Hr.getTargetData(g,E)}(s,f,Vi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,n?o:Ne.min(),n?u:Be())).next(m=>(EC(s,o1(e),m),{documents:m,gs:u})))}function EC(i,e,n){let s=i.Es.get(e)||Ne.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class H0{constructor(){this.activeTargetIds=d1()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TC{constructor(){this.ho=new H0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new H0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="ConnectivityMonitor";class G0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(F0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(F0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh=null;function op(){return sh===null?sh=function(){return 268435456+Math.round(2147483648*Math.random())}():sh++,"0x"+sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",wC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SC{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Rh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const f=op(),m=this.bo(e,n.toUriEncodedString());de(xm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(de(xm,`Received RPC '${e}' ${f}: `,g),g),g=>{throw So(xm,`RPC '${e}' ${f} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,f){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=wC[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class RC extends SC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=op();return new Promise((f,m)=>{const p=new fT;p.setWithCredentials(!0),p.listenOnce(dT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case uh.NO_ERROR:const E=p.getResponseJson();de(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case uh.TIMEOUT:de(on,`RPC '${e}' ${u} timed out`),m(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const A=p.getStatus();if(de(on,`RPC '${e}' ${u} failed with status:`,A,"response text:",p.getResponseText()),A>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const k=R==null?void 0:R.error;if(k&&k.status&&k.message){const M=function(F){const Q=F.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Q)>=0?Q:J.UNKNOWN}(k.status);m(new ce(M,k.message))}else m(new ce(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{de(on,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);de(on,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=op(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=gT(),m=pT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");de(on,`Creating RPC '${e}' stream ${o}: ${E}`,p);const A=f.createWebChannel(E,p);let R=!1,k=!1;const M=new AC({Fo:F=>{k?de(on,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(R||(de(on,`Opening RPC '${e}' stream ${o} transport.`),A.open(),R=!0),de(on,`RPC '${e}' stream ${o} sending:`,F),A.send(F))},Mo:()=>A.close()}),Y=(F,Q,se)=>{F.listen(Q,ne=>{try{se(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return Y(A,Yl.EventType.OPEN,()=>{k||(de(on,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),Y(A,Yl.EventType.CLOSE,()=>{k||(k=!0,de(on,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),Y(A,Yl.EventType.ERROR,F=>{k||(k=!0,So(on,`RPC '${e}' stream ${o} transport errored:`,F),M.Uo(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),Y(A,Yl.EventType.MESSAGE,F=>{var Q;if(!k){const se=F.data[0];et(!!se);const ne=se,he=(ne==null?void 0:ne.error)||((Q=ne[0])===null||Q===void 0?void 0:Q.error);if(he){de(on,`RPC '${e}' stream ${o} received error:`,he);const me=he.status;let Ae=function(I){const x=Ot[I];if(x!==void 0)return WT(x)}(me),D=he.message;Ae===void 0&&(Ae=J.INTERNAL,D="Unknown error status: "+me+" with message "+he.message),k=!0,M.Uo(new ce(Ae,D)),A.close()}else de(on,`RPC '${e}' stream ${o} received:`,se),M.Ko(se)}}),Y(m,mT.STAT_EVENT,F=>{F.stat===Qm.PROXY?de(on,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Qm.NOPROXY&&de(on,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function Om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(i){return new D1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="PersistentStream";class fb{constructor(e,n,s,o,u,f,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new hb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(K0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(de(K0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IC extends fb{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=M1(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ne.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ne.min():f.readTime?ki(f.readTime):Ne.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=sp(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=Jm(p)?{documents:P1(u,p)}:{query:L1(u,p).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=eb(u,f.resumeToken);const g=np(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Ne.min())>0){m.readTime=Nh(u,f.snapshotVersion.toTimestamp());const g=np(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=j1(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.I_(n)}}class CC extends fb{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=k1(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=sp(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>V1(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{}class DC extends NC{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,ip(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,ip(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(J.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class xC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Er(n),this.N_=!1):de("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RemoteStore";class OC{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{_a(this)&&(de(ca,"Restarting streams for network reachability change."),await async function(p){const g=De(p);g.W_.add(4),await bu(g),g.j_.set("Unknown"),g.W_.delete(4),await sf(g)}(this))})}),this.j_=new xC(s,o)}}async function sf(i){if(_a(i))for(const e of i.G_)await e(!0)}async function bu(i){for(const e of i.G_)await e(!1)}function db(i,e){const n=De(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Bp(n)?zp(n):ko(n).c_()&&jp(n,e))}function Up(i,e){const n=De(i),s=ko(n);n.K_.delete(e),s.c_()&&mb(n,e),n.K_.size===0&&(s.c_()?s.P_():_a(n)&&n.j_.set("Unknown"))}function jp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(i).y_(e)}function mb(i,e){i.H_.Ne(e),ko(i).w_(e)}function zp(i){i.H_=new R1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),ko(i).start(),i.j_.B_()}function Bp(i){return _a(i)&&!ko(i).u_()&&i.K_.size>0}function _a(i){return De(i).W_.size===0}function pb(i){i.H_=void 0}async function MC(i){i.j_.set("Online")}async function VC(i){i.K_.forEach((e,n)=>{jp(i,e)})}async function kC(i,e){pb(i),Bp(i)?(i.j_.q_(e),zp(i)):i.j_.set("Unknown")}async function PC(i,e,n){if(i.j_.set("Online"),e instanceof JT&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){de(ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xh(i,s)}else if(e instanceof dh?i.H_.We(e):e instanceof ZT?i.H_.Ze(e):i.H_.je(e),!n.isEqual(Ne.min()))try{const s=await cb(i.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.K_.get(g);E&&u.K_.set(g,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const E=u.K_.get(p);if(!E)return;u.K_.set(p,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),mb(u,p);const A=new as(E.target,p,g,E.sequenceNumber);jp(u,A)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){de(ca,"Failed to raise snapshot:",s),await xh(i,s)}}async function xh(i,e,n){if(!Vo(e))throw e;i.W_.add(1),await bu(i),i.j_.set("Offline"),n||(n=()=>cb(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{de(ca,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await sf(i)})}function gb(i,e){return e().catch(n=>xh(i,n,e))}async function af(i){const e=De(i),n=ys(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:Sp;for(;LC(e);)try{const o=await vC(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,UC(e,o)}catch(o){await xh(e,o)}yb(e)&&vb(e)}function LC(i){return _a(i)&&i.U_.length<10}function UC(i,e){i.U_.push(e);const n=ys(i);n.c_()&&n.S_&&n.b_(e.mutations)}function yb(i){return _a(i)&&!ys(i).u_()&&i.U_.length>0}function vb(i){ys(i).start()}async function jC(i){ys(i).C_()}async function zC(i){const e=ys(i);for(const n of i.U_)e.b_(n.mutations)}async function BC(i,e,n){const s=i.U_.shift(),o=xp.from(s,e,n);await gb(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await af(i)}async function qC(i,e){e&&ys(i).S_&&await async function(s,o){if(function(f){return S1(f)&&f!==J.ABORTED}(o.code)){const u=s.U_.shift();ys(s).h_(),await gb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await af(s)}}(i,e),yb(i)&&vb(i)}async function $0(i,e){const n=De(i);n.asyncQueue.verifyOperationInProgress(),de(ca,"RemoteStore received new credentials");const s=_a(n);n.W_.add(3),await bu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await sf(n)}async function HC(i,e){const n=De(i);e?(n.W_.delete(2),await sf(n)):e||(n.W_.add(2),await bu(n),n.j_.set("Unknown"))}function ko(i){return i.J_||(i.J_=function(n,s,o){const u=De(n);return u.M_(),new IC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:MC.bind(null,i),No:VC.bind(null,i),Lo:kC.bind(null,i),p_:PC.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Bp(i)?zp(i):i.j_.set("Unknown")):(await i.J_.stop(),pb(i))})),i.J_}function ys(i){return i.Y_||(i.Y_=function(n,s,o){const u=De(n);return u.M_(),new CC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:jC.bind(null,i),Lo:qC.bind(null,i),D_:zC.bind(null,i),v_:BC.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await af(i)):(await i.Y_.stop(),i.U_.length>0&&(de(ca,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new qp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hp(i,e){if(Er("AsyncQueue",`${e}: ${i}`),Vo(i))return new ce(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Xl(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new _o;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.Z_=new _t(Te.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ce():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class No{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new No(e,n,_o.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class GC{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=De(n),u=o.queries;o.queries=Y0(),u.forEach((f,m)=>{for(const p of m.ta)p.onError(s)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function Y0(){return new va(i=>LT(i),Zh)}async function Fp(i,e){const n=De(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new FC,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Hp(f,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Kp(n)}async function Gp(i,e){const n=De(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function KC(i,e){const n=De(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&Kp(n)}function $C(i,e,n){const s=De(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Kp(i){i.ia.forEach(e=>{e.next()})}var lp,X0;(X0=lp||(lp={}))._a="default",X0.Cache="cache";class $p{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new No(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==lp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.key=e}}class Eb{constructor(e){this.key=e}}class QC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Be(),this.mutatedKeys=Be(),this.ya=UT(e),this.wa=new _o(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new Q0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,A)=>{const R=o.get(E),k=Jh(this.query,A)?A:null,M=!!R&&this.mutatedKeys.has(R.key),Y=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let F=!1;R&&k?R.data.isEqual(k.data)?M!==Y&&(s.track({type:3,doc:k}),F=!0):this.va(R,k)||(s.track({type:2,doc:k}),F=!0,(p&&this.ya(k,p)>0||g&&this.ya(k,g)<0)&&(m=!0)):!R&&k?(s.track({type:0,doc:k}),F=!0):R&&!k&&(s.track({type:1,doc:R}),F=!0,(p||g)&&(m=!0)),F&&(k?(f=f.add(k),u=Y?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((E,A)=>function(k,M){const Y=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return Y(k)-Y(M)}(E.type,A.type)||this.ya(E.doc,A.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,f.length!==0||g?{snapshot:new No(this.query,e.wa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Q0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Be(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new Eb(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new _b(s))}),n}Oa(e){this.fa=e.gs,this.pa=Be();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return No.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Qp="SyncEngine";class YC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class XC{constructor(e){this.key=e,this.Ba=!1}}class WC{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new va(m=>LT(m),Zh),this.qa=new Map,this.Qa=new Set,this.$a=new _t(Te.comparator),this.Ua=new Map,this.Ka=new Vp,this.Wa={},this.Ga=new Map,this.za=Co.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function ZC(i,e,n=!0){const s=Rb(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Tb(s,e,n,!0),o}async function JC(i,e){const n=Rb(i);await Tb(n,e,!0,!1)}async function Tb(i,e,n,s){const o=await _C(i.localStore,Vi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await e2(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&db(i.remoteStore,o),m}async function e2(i,e,n,s,o){i.Ha=(A,R,k)=>async function(Y,F,Q,se){let ne=F.view.ba(Q);ne.ls&&(ne=await q0(Y.localStore,F.query,!1).then(({documents:D})=>F.view.ba(D,ne)));const he=se&&se.targetChanges.get(F.targetId),me=se&&se.targetMismatches.get(F.targetId)!=null,Ae=F.view.applyChanges(ne,Y.isPrimaryClient,he,me);return Z0(Y,F.targetId,Ae.Ma),Ae.snapshot}(i,A,R,k);const u=await q0(i.localStore,e,!0),f=new QC(e,u.gs),m=f.ba(u.documents),p=Tu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,p);Z0(i,n,g.Ma);const E=new YC(e,n,f);return i.ka.set(e,E),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function t2(i,e,n){const s=De(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!Zh(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Up(s.remoteStore,o.targetId),up(s,o.targetId)}).catch(Mo)):(up(s,o.targetId),await ap(s.localStore,o.targetId,!0))}async function n2(i,e){const n=De(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Up(n.remoteStore,s.targetId))}async function i2(i,e,n){const s=c2(i);try{const o=await function(f,m){const p=De(f),g=jt.now(),E=m.reduce((k,M)=>k.add(M.key),Be());let A,R;return p.persistence.runTransaction("Locally write mutations","readwrite",k=>{let M=Tr(),Y=Be();return p.ds.getEntries(k,E).next(F=>{M=F,M.forEach((Q,se)=>{se.isValidDocument()||(Y=Y.add(Q))})}).next(()=>p.localDocuments.getOverlayedDocuments(k,M)).next(F=>{A=F;const Q=[];for(const se of m){const ne=_1(se,A.get(se.key).overlayedDocument);ne!=null&&Q.push(new Es(se.key,ne,NT(ne.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(k,g,Q,m)}).next(F=>{R=F;const Q=F.applyToLocalDocumentSet(A,Y);return p.documentOverlayCache.saveOverlays(k,F.batchId,Q)})}).then(()=>({batchId:R.batchId,changes:zT(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Wa[f.currentUser.toKey()];g||(g=new _t(ke)),g=g.insert(m,p),f.Wa[f.currentUser.toKey()]=g}(s,o.batchId,n),await wu(s,o.changes),await af(s.remoteStore)}catch(o){const u=Hp(o,"Failed to persist write");n.reject(u)}}async function bb(i,e){const n=De(i);try{const s=await gC(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Ua.get(u);f&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?et(f.Ba):o.removedDocuments.size>0&&(et(f.Ba),f.Ba=!1))}),await wu(n,s,e)}catch(s){await Mo(s)}}function W0(i,e,n){const s=De(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=De(f);p.onlineState=m;let g=!1;p.queries.forEach((E,A)=>{for(const R of A.ta)R.sa(m)&&(g=!0)}),g&&Kp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function r2(i,e,n){const s=De(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let f=new _t(Te.comparator);f=f.insert(u,un.newNoDocument(u,Ne.min()));const m=Be().add(u),p=new nf(Ne.min(),new Map,new _t(ke),f,m);await bb(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),Yp(s)}else await ap(s.localStore,e,!1).then(()=>up(s,e,n)).catch(Mo)}async function s2(i,e){const n=De(i),s=e.batch.batchId;try{const o=await pC(n.localStore,e);Sb(n,s,null),wb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wu(n,o)}catch(o){await Mo(o)}}async function a2(i,e,n){const s=De(i);try{const o=await function(f,m){const p=De(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(A=>(et(A!==null),E=A.keys(),p.mutationQueue.removeMutationBatch(g,A))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);Sb(s,e,n),wb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wu(s,o)}catch(o){await Mo(o)}}function wb(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Sb(i,e,n){const s=De(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function up(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Ab(i,s)})}function Ab(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(Up(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Yp(i))}function Z0(i,e,n){for(const s of n)s instanceof _b?(i.Ka.addReference(s.key,e),o2(i,s)):s instanceof Eb?(de(Qp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Ab(i,s.key)):Ce()}function o2(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(de(Qp,"New document in limbo: "+n),i.Qa.add(s),Yp(i))}function Yp(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new Te(ft.fromString(e)),s=i.za.next();i.Ua.set(s,new XC(n)),i.$a=i.$a.insert(n,s),db(i.remoteStore,new as(Vi(Wh(n.path)),s,"TargetPurposeLimboResolution",Qh.ae))}}async function wu(i,e,n){const s=De(i),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{f.push(s.Ha(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const A=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(g){o.push(g);const A=Pp.Yi(p.targetId,g);u.push(A)}}))}),await Promise.all(f),s.La.p_(o),await async function(p,g){const E=De(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>te.forEach(g,R=>te.forEach(R.Hi,k=>E.persistence.referenceDelegate.addReference(A,R.targetId,k)).next(()=>te.forEach(R.Ji,k=>E.persistence.referenceDelegate.removeReference(A,R.targetId,k)))))}catch(A){if(!Vo(A))throw A;de(Lp,"Failed to update sequence numbers: "+A)}for(const A of g){const R=A.targetId;if(!A.fromCache){const k=E.Ts.get(R),M=k.snapshotVersion,Y=k.withLastLimboFreeSnapshotVersion(M);E.Ts=E.Ts.insert(R,Y)}}}(s.localStore,u))}async function l2(i,e){const n=De(i);if(!n.currentUser.isEqual(e)){de(Qp,"User change. New user:",e.toKey());const s=await ub(n.localStore,e);n.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new ce(J.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wu(n,s.Rs)}}function u2(i,e){const n=De(i),s=n.Ua.get(e);if(s&&s.Ba)return Be().add(s.key);{let o=Be();const u=n.qa.get(e);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function Rb(i){const e=De(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=bb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r2.bind(null,e),e.La.p_=KC.bind(null,e.eventManager),e.La.Ja=$C.bind(null,e.eventManager),e}function c2(i){const e=De(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a2.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return mC(this.persistence,new hC,e.initialUser,this.serializer)}Xa(e){return new lb(kp.ri,this.serializer)}Za(e){return new TC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class h2 extends Oh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){et(this.persistence.referenceDelegate instanceof Dh);const s=this.persistence.referenceDelegate.garbageCollector;return new X1(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new lb(s=>Dh.ri(s,n),this.serializer)}}class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>W0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=l2.bind(null,this.syncEngine),await HC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GC}()}createDatastore(e){const n=rf(e.databaseInfo.databaseId),s=function(u){return new RC(u)}(e.databaseInfo);return function(u,f,m,p){return new DC(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new OC(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>W0(this.syncEngine,n,0),function(){return G0.D()?new G0:new bC}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,E){const A=new WC(o,u,f,m,p,g);return E&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=De(o);de(ca,"RemoteStore shutting down."),u.W_.add(5),await bu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cp.provider={build:()=>new cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class f2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=_T.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{de(vs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(de(vs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Hp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Mm(i,e){i.asyncQueue.verifyOperationInProgress(),de(vs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await ub(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function J0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await d2(i);de(vs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>$0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>$0(e.remoteStore,o)),i._onlineComponents=e}async function d2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(vs,"Using user provided OfflineComponentProvider");try{await Mm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await Mm(i,new Oh)}}else de(vs,"Using default OfflineComponentProvider"),await Mm(i,new h2(void 0));return i._offlineComponents}async function Ib(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(vs,"Using user provided OnlineComponentProvider"),await J0(i,i._uninitializedComponentsProvider._online)):(de(vs,"Using default OnlineComponentProvider"),await J0(i,new cp))),i._onlineComponents}function m2(i){return Ib(i).then(e=>e.syncEngine)}async function Mh(i){const e=await Ib(i),n=e.eventManager;return n.onListen=ZC.bind(null,e.syncEngine),n.onUnlisten=t2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=n2.bind(null,e.syncEngine),n}function p2(i,e,n={}){const s=new gr;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new Xp({next:R=>{E.su(),f.enqueueAndForget(()=>Gp(u,A));const k=R.docs.has(m);!k&&R.fromCache?g.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&R.fromCache&&p&&p.source==="server"?g.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(R)},error:R=>g.reject(R)}),A=new $p(Wh(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Fp(u,A)}(await Mh(i),i.asyncQueue,e,n,s)),s.promise}function g2(i,e,n={}){const s=new gr;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new Xp({next:R=>{E.su(),f.enqueueAndForget(()=>Gp(u,A)),R.fromCache&&p.source==="server"?g.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(R)},error:R=>g.reject(R)}),A=new $p(m,E,{includeMetadataChanges:!0,Ta:!0});return Fp(u,A)}(await Mh(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(i,e,n){if(!n)throw new ce(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function y2(i,e,n,s){if(e===!0&&s===!0)throw new ce(J.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function tE(i){if(!Te.isDocumentKey(i))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function nE(i){if(Te.isDocumentKey(i))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function of(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce()}function vn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(i);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="firestore.googleapis.com",iE=!0;class rE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nb,this.ssl=iE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:iE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ob;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q1)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Su{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new RI;switch(s.type){case"firstParty":return new DI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=eE.get(n);s&&(de("ComponentProvider","Removing Datastore"),eE.delete(n),s.terminate())}(this),Promise.resolve()}}function v2(i,e,n,s={}){var o;const u=(i=vn(i,Su))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==Nb&&u.host!==m&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!fs(p,f)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=ln.MOCK_USER;else{g=ZA(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(A)}i._authCredentials=new II(new yT(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class cn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class hs extends Ar{constructor(e,n,s){super(e,n,Wh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Te(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Mi(i,e,...n){if(i=Ct(i),Wp("collection","path",e),i instanceof Su){const s=ft.fromString(e,...n);return nE(s),new hs(i,null,s)}{if(!(i instanceof cn||i instanceof hs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return nE(s),new hs(i.firestore,null,s)}}function _2(i,e){if(i=vn(i,Su),Wp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ar(i,null,function(s){return new ya(ft.emptyPath(),s)}(e))}function en(i,e,...n){if(i=Ct(i),arguments.length===1&&(e=_T.newId()),Wp("doc","path",e),i instanceof Su){const s=ft.fromString(e,...n);return tE(s),new cn(i,null,new Te(s))}{if(!(i instanceof cn||i instanceof hs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return tE(s),new cn(i.firestore,i instanceof hs?i.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="AsyncQueue";class aE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new hb(this,"async_queue_retry"),this.Su=()=>{const s=Om();s&&de(sE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new gr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Vo(e))throw e;de(sE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw Er("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=qp.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ce()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function oE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class br extends Su{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new aE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aE(e),this._firestoreClient=void 0,await e}}}function E2(i,e){const n=typeof i=="object"?i:bp(),s=typeof i=="string"?i:Rh,o=ga(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=XA("firestore");u&&v2(o,...u)}return o}function lf(i){if(i._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||T2(i),i._firestoreClient}function T2(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,E){return new GI(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Cb(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new f2(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Do(nn.fromBase64String(e))}catch(n){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Do(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=/^__.*__$/;class w2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class Db{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class eg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new eg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Vh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(xb(this.Lu)&&b2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class S2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||rf(e)}ju(e,n,s,o=!1){return new eg({Lu:e,methodName:n,zu:s,path:tn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cf(i){const e=i._freezeSettings(),n=rf(i._databaseId);return new S2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Ob(i,e,n,s,o,u={}){const f=i.ju(u.merge||u.mergeFields?2:0,e,n,o);ig("Data must be an object, but it was:",f,s);const m=Mb(s,f);let p,g;if(u.merge)p=new Ln(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const R=hp(e,A,n);if(!f.contains(R))throw new ce(J.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);kb(E,R)||E.push(R)}p=new Ln(E),g=f.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,g=f.fieldTransforms;return new w2(new An(m),p,g)}class hf extends Au{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}class tg extends Au{_toFieldTransform(e){return new QT(e.path,new fu)}isEqual(e){return e instanceof tg}}class ng extends Au{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new pu(e.serializer,HT(e.serializer,this.Ju));return new QT(e.path,n)}isEqual(e){return e instanceof ng&&this.Ju===e.Ju}}function A2(i,e,n,s){const o=i.ju(1,e,n);ig("Data must be an object, but it was:",o,s);const u=[],f=An.empty();_s(s,(p,g)=>{const E=rg(e,p,n);g=Ct(g);const A=o.Uu(E);if(g instanceof hf)u.push(E);else{const R=Ru(g,A);R!=null&&(u.push(E),f.set(E,R))}});const m=new Ln(u);return new Db(f,m,o.fieldTransforms)}function R2(i,e,n,s,o,u){const f=i.ju(1,e,n),m=[hp(e,s,n)],p=[o];if(u.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(hp(e,u[R])),p.push(u[R+1]);const g=[],E=An.empty();for(let R=m.length-1;R>=0;--R)if(!kb(g,m[R])){const k=m[R];let M=p[R];M=Ct(M);const Y=f.Uu(k);if(M instanceof hf)g.push(k);else{const F=Ru(M,Y);F!=null&&(g.push(k),E.set(k,F))}}const A=new Ln(g);return new Db(E,A,f.fieldTransforms)}function I2(i,e,n,s=!1){return Ru(n,i.ju(s?4:3,e))}function Ru(i,e){if(Vb(i=Ct(i)))return ig("Unsupported field value:",e,i),Mb(i,e);if(i instanceof Au)return function(s,o){if(!xb(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=Ru(m,o.Ku(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=Ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=jt.fromDate(s);return{timestampValue:Nh(o.serializer,u)}}if(s instanceof jt){const u=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nh(o.serializer,u)}}if(s instanceof Zp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Do)return{bytesValue:eb(o.serializer,s._byteString)};if(s instanceof cn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Jp)return function(f,m){return{mapValue:{fields:{[IT]:{stringValue:CT},[Ih]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return Np(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${of(s)}`)}(i,e)}function Mb(i,e){const n={};return TT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(i,(s,o)=>{const u=Ru(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Vb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof jt||i instanceof Zp||i instanceof Do||i instanceof cn||i instanceof Au||i instanceof Jp)}function ig(i,e,n){if(!Vb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=of(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function hp(i,e,n){if((e=Ct(e))instanceof uf)return e._internalPath;if(typeof e=="string")return rg(i,e);throw Vh("Field path arguments must be of type string or ",i,!1,void 0,n)}const C2=new RegExp("[~\\*/\\[\\]]");function rg(i,e,n){if(e.search(C2)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new uf(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Vh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ce(J.INVALID_ARGUMENT,m+i+p)}function kb(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N2 extends Pb{data(){return super.data()}}function ff(i,e){return typeof e=="string"?rg(i,e):e instanceof uf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sg{}class Ub extends sg{}function mh(i,e,...n){let s=[];e instanceof sg&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof ag).length,m=u.filter(p=>p instanceof df).length;if(f>1||f>0&&m>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class df extends Ub{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new df(e,n,s)}_apply(e){const n=this._parse(e);return jb(e._query,n),new Ar(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=cf(e.firestore);return function(u,f,m,p,g,E,A){let R;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){uE(A,E);const M=[];for(const Y of A)M.push(lE(p,u,Y));R={arrayValue:{values:M}}}else R=lE(p,u,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||uE(A,E),R=I2(m,f,A,E==="in"||E==="not-in");return Mt.create(g,E,R)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vm(i,e,n){const s=e,o=ff("where",i);return df._create(o,s,n)}class ag extends sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ag(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:li.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)jb(f,p),f=ep(f,p)}(e._query,n),new Ar(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class og extends Ub{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new og(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hu(u,f)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new ya(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function D2(i,e="asc"){const n=e,s=ff("orderBy",i);return og._create(s,n)}function lE(i,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PT(e)&&n.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ft.fromString(n));if(!Te.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return w0(i,new Te(s))}if(n instanceof cn)return w0(i,n._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${of(n)}.`)}function uE(i,e){if(!Array.isArray(i)||i.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jb(i,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class x2{convertValue(e,n="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return _s(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Ih].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>It(f.doubleValue));return new Jp(u)}convertGeoPoint(e){return new Zp(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Xh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const n=ms(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ft.fromString(e);et(ab(s));const o=new uu(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(n)||Er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bb extends Pb{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ff("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ph extends Bb{data(e={}){return super.data(e)}}class qb{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ph(this._firestore,this._userDataWriter,s.key,s,new Zl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new ph(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new ph(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:O2(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function O2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i){i=vn(i,cn);const e=vn(i.firestore,br);return p2(lf(e),i._key).then(n=>Hb(e,i,n))}class lg extends x2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Do(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function oa(i){i=vn(i,Ar);const e=vn(i.firestore,br),n=lf(e),s=new lg(e);return Lb(i._query),g2(n,i._query).then(o=>new qb(e,s,i,o))}function M2(i,e,n){i=vn(i,cn);const s=vn(i.firestore,br),o=zb(i.converter,e,n);return mf(s,[Ob(cf(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Jn.none())])}function Eo(i,e,n,...s){i=vn(i,cn);const o=vn(i.firestore,br),u=cf(o);let f;return f=typeof(e=Ct(e))=="string"||e instanceof uf?R2(u,"updateDoc",i._key,e,n,s):A2(u,"updateDoc",i._key,e),mf(o,[f.toMutation(i._key,Jn.exists(!0))])}function iu(i){return mf(vn(i.firestore,br),[new Dp(i._key,Jn.none())])}function fp(i,e){const n=vn(i.firestore,br),s=en(i),o=zb(i.converter,e);return mf(n,[Ob(cf(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then(()=>s)}function V2(i,...e){var n,s,o;i=Ct(i);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||oE(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(oE(e[f])){const A=e[f];e[f]=(n=A.next)===null||n===void 0?void 0:n.bind(A),e[f+1]=(s=A.error)===null||s===void 0?void 0:s.bind(A),e[f+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let p,g,E;if(i instanceof cn)g=vn(i.firestore,br),E=Wh(i._key.path),p={next:A=>{e[f]&&e[f](Hb(g,i,A))},error:e[f+1],complete:e[f+2]};else{const A=vn(i,Ar);g=vn(A.firestore,br),E=A._query;const R=new lg(g);p={next:k=>{e[f]&&e[f](new qb(g,R,A,k))},error:e[f+1],complete:e[f+2]},Lb(i._query)}return function(R,k,M,Y){const F=new Xp(Y),Q=new $p(k,F,M);return R.asyncQueue.enqueueAndForget(async()=>Fp(await Mh(R),Q)),()=>{F.su(),R.asyncQueue.enqueueAndForget(async()=>Gp(await Mh(R),Q))}}(lf(g),E,m,p)}function mf(i,e){return function(s,o){const u=new gr;return s.asyncQueue.enqueueAndForget(async()=>i2(await m2(s),o,u)),u.promise}(lf(i),e)}function Hb(i,e,n){const s=n.docs.get(e._key),o=new lg(i);return new Bb(i,o,e._key,s,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}function cE(){return new tg("serverTimestamp")}function ah(i){return new ng("increment",i)}(function(e,n=!0){(function(o){Oo=o})(xo),Ui(new oi("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new br(new CI(s.getProvider("auth-internal")),new xI(f,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(g.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Zn(h0,f0,e),Zn(h0,f0,"esm2017")})();const Fb="@firebase/installations",ug="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=1e4,Kb=`w:${ug}`,$b="FIS_v2",k2="https://firebaseinstallations.googleapis.com/v1",P2=60*60*1e3,L2="installations",U2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ha=new pa(L2,U2,j2);function Qb(i){return i instanceof hi&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb({projectId:i}){return`${k2}/projects/${i}/installations`}function Xb(i){return{token:i.token,requestStatus:2,expiresIn:B2(i.expiresIn),creationTime:Date.now()}}async function Wb(i,e){const s=(await e.json()).error;return ha.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Zb({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function z2(i,{refreshToken:e}){const n=Zb(i);return n.append("Authorization",q2(e)),n}async function Jb(i){const e=await i();return e.status>=500&&e.status<600?i():e}function B2(i){return Number(i.replace("s","000"))}function q2(i){return`${$b} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=Yb(i),o=Zb(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={fid:n,authVersion:$b,appId:i.appId,sdkVersion:Kb},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await Jb(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:Xb(g.authToken)}}else throw await Wb("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=/^[cdef][\w-]{21}$/,dp="";function K2(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=$2(i);return G2.test(n)?n:dp}catch{return dp}}function $2(i){return F2(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new Map;function nw(i,e){const n=pf(i);iw(n,e),Q2(n,e)}function iw(i,e){const n=tw.get(i);if(n)for(const s of n)s(e)}function Q2(i,e){const n=Y2();n&&n.postMessage({key:i,fid:e}),X2()}let la=null;function Y2(){return!la&&"BroadcastChannel"in self&&(la=new BroadcastChannel("[Firebase] FID Change"),la.onmessage=i=>{iw(i.data.key,i.data.fid)}),la}function X2(){tw.size===0&&la&&(la.close(),la=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="firebase-installations-database",Z2=1,fa="firebase-installations-store";let km=null;function cg(){return km||(km=oT(W2,Z2,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(fa)}}})),km}async function kh(i,e){const n=pf(i),o=(await cg()).transaction(fa,"readwrite"),u=o.objectStore(fa),f=await u.get(n);return await u.put(e,n),await o.done,(!f||f.fid!==e.fid)&&nw(i,e.fid),e}async function rw(i){const e=pf(i),s=(await cg()).transaction(fa,"readwrite");await s.objectStore(fa).delete(e),await s.done}async function gf(i,e){const n=pf(i),o=(await cg()).transaction(fa,"readwrite"),u=o.objectStore(fa),f=await u.get(n),m=e(f);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!f||f.fid!==m.fid)&&nw(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hg(i){let e;const n=await gf(i.appConfig,s=>{const o=J2(s),u=eN(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===dp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function J2(i){const e=i||{fid:K2(),registrationStatus:0};return sw(e)}function eN(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ha.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=tN(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:nN(i)}:{installationEntry:e}}async function tN(i,e){try{const n=await H2(i,e);return kh(i.appConfig,n)}catch(n){throw Qb(n)&&n.customData.serverCode===409?await rw(i.appConfig):await kh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function nN(i){let e=await hE(i.appConfig);for(;e.registrationStatus===1;)await ew(100),e=await hE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await hg(i);return s||n}return e}function hE(i){return gf(i,e=>{if(!e)throw ha.create("installation-not-found");return sw(e)})}function sw(i){return iN(i)?{fid:i.fid,registrationStatus:0}:i}function iN(i){return i.registrationStatus===1&&i.registrationTime+Gb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN({appConfig:i,heartbeatServiceProvider:e},n){const s=sN(i,n),o=z2(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={installation:{sdkVersion:Kb,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await Jb(()=>fetch(s,m));if(p.ok){const g=await p.json();return Xb(g)}else throw await Wb("Generate Auth Token",p)}function sN(i,{fid:e}){return`${Yb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fg(i,e=!1){let n;const s=await gf(i.appConfig,u=>{if(!aw(u))throw ha.create("not-registered");const f=u.authToken;if(!e&&lN(f))return u;if(f.requestStatus===1)return n=aN(i,e),u;{if(!navigator.onLine)throw ha.create("app-offline");const m=cN(u);return n=oN(i,m),m}});return n?await n:s.authToken}async function aN(i,e){let n=await fE(i.appConfig);for(;n.authToken.requestStatus===1;)await ew(100),n=await fE(i.appConfig);const s=n.authToken;return s.requestStatus===0?fg(i,e):s}function fE(i){return gf(i,e=>{if(!aw(e))throw ha.create("not-registered");const n=e.authToken;return hN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oN(i,e){try{const n=await rN(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await kh(i.appConfig,s),n}catch(n){if(Qb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await rw(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kh(i.appConfig,s)}throw n}}function aw(i){return i!==void 0&&i.registrationStatus===2}function lN(i){return i.requestStatus===2&&!uN(i)}function uN(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+P2}function cN(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function hN(i){return i.requestStatus===1&&i.requestTime+Gb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(i){const e=i,{installationEntry:n,registrationPromise:s}=await hg(e);return s?s.catch(console.error):fg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(i,e=!1){const n=i;return await mN(n),(await fg(n,e)).token}async function mN(i){const{registrationPromise:e}=await hg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i){if(!i||!i.options)throw Pm("App Configuration");if(!i.name)throw Pm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Pm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Pm(i){return ha.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="installations",gN="installations-internal",yN=i=>{const e=i.getProvider("app").getImmediate(),n=pN(e),s=ga(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},vN=i=>{const e=i.getProvider("app").getImmediate(),n=ga(e,ow).getImmediate();return{getId:()=>fN(n),getToken:o=>dN(n,o)}};function _N(){Ui(new oi(ow,yN,"PUBLIC")),Ui(new oi(gN,vN,"PRIVATE"))}_N();Zn(Fb,ug);Zn(Fb,ug,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="analytics",EN="firebase_id",TN="origin",bN=60*1e3,wN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new $h("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Un=new pa("analytics","Analytics",SN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(i){if(!i.startsWith(dg)){const e=Un.create("invalid-gtag-resource",{gtagURL:i});return Rn.warn(e.message),""}return i}function lw(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function RN(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function IN(i,e){const n=RN("firebase-js-sdk-policy",{createScriptURL:AN}),s=document.createElement("script"),o=`${dg}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function CN(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function NN(i,e,n,s,o,u){const f=s[o];try{if(f)await e[f];else{const p=(await lw(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){Rn.error(m)}i("config",o,u)}async function DN(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const m=await lw(n);for(const p of f){const g=m.find(A=>A.measurementId===p),E=g&&e[g.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){Rn.error(u)}}function xN(i,e,n,s){async function o(u,...f){try{if(u==="event"){const[m,p]=f;await DN(i,e,n,m,p)}else if(u==="config"){const[m,p]=f;await NN(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=f;i("consent",m,p)}else if(u==="get"){const[m,p,g]=f;i("get",m,p,g)}else if(u==="set"){const[m]=f;i("set",m)}else i(u,...f)}catch(m){Rn.error(m)}}return o}function ON(i,e,n,s,o){let u=function(...f){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=xN(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function MN(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(dg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=30,kN=1e3;class PN{constructor(e={},n=kN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const uw=new PN;function LN(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function UN(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:LN(s)},u=wN.replace("{app-id}",n),f=await fetch(u,o);if(f.status!==200&&f.status!==304){let m="";try{const p=await f.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:f.status,responseMessage:m})}return f.json()}async function jN(i,e=uw,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw Un.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw Un.create("no-api-key")}const f=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new qN;return setTimeout(async()=>{m.abort()},bN),cw({appId:s,apiKey:o,measurementId:u},f,m,e)}async function cw(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=uw){var u;const{appId:f,measurementId:m}=i;try{await zN(s,e)}catch(p){if(m)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:f,measurementId:m};throw p}try{const p=await UN(i);return o.deleteThrottleMetadata(f),p}catch(p){const g=p;if(!BN(g)){if(o.deleteThrottleMetadata(f),m)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:f,measurementId:m};throw p}const E=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?t0(n,o.intervalMillis,VN):t0(n,o.intervalMillis),A={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(f,A),Rn.debug(`Calling attemptFetch again in ${E} millis`),cw(i,A,s,o)}}function zN(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function BN(i){if(!(i instanceof hi)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class qN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function HN(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,f=Object.assign(Object.assign({},s),{send_to:u});i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(){if(iT())try{await rT()}catch(i){return Rn.warn(Un.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return Rn.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GN(i,e,n,s,o,u,f){var m;const p=jN(i);p.then(k=>{n[k.measurementId]=k.appId,i.options.measurementId&&k.measurementId!==i.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${k.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(k=>Rn.error(k)),e.push(p);const g=FN().then(k=>{if(k)return s.getId()}),[E,A]=await Promise.all([p,g]);MN(u)||IN(u,E.measurementId),o("js",new Date);const R=(m=f==null?void 0:f.config)!==null&&m!==void 0?m:{};return R[TN]="firebase",R.update=!0,A!=null&&(R[EN]=A),o("config",E.measurementId,R),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.app=e}_delete(){return delete ru[this.app.options.appId],Promise.resolve()}}let ru={},dE=[];const mE={};let Lm="dataLayer",$N="gtag",pE,hw,gE=!1;function QN(){const i=[];if(nT()&&i.push("This is a browser extension environment."),sR()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=Un.create("invalid-analytics-context",{errorInfo:e});Rn.warn(n.message)}}function YN(i,e,n){QN();const s=i.options.appId;if(!s)throw Un.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Un.create("no-api-key");if(ru[s]!=null)throw Un.create("already-exists",{id:s});if(!gE){CN(Lm);const{wrappedGtag:u,gtagCore:f}=ON(ru,dE,mE,Lm,$N);hw=u,pE=f,gE=!0}return ru[s]=GN(i,dE,mE,e,pE,Lm,n),new KN(i)}function XN(i=bp()){i=Ct(i);const e=ga(i,Ph);return e.isInitialized()?e.getImmediate():WN(i)}function WN(i,e={}){const n=ga(i,Ph);if(n.isInitialized()){const o=n.getImmediate();if(fs(e,n.getOptions()))return o;throw Un.create("already-initialized")}return n.initialize({options:e})}function ZN(i,e,n,s){i=Ct(i),HN(hw,ru[i.app.options.appId],e,n,s).catch(o=>Rn.error(o))}const yE="@firebase/analytics",vE="0.10.12";function JN(){Ui(new oi(Ph,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return YN(s,o,n)},"PUBLIC")),Ui(new oi("analytics-internal",i,"PRIVATE")),Zn(yE,vE),Zn(yE,vE,"esm2017");function i(e){try{const n=e.getProvider(Ph).getImmediate();return{logEvent:(s,o,u)=>ZN(n,s,o,u)}}catch(n){throw Un.create("interop-component-reg-failed",{reason:n})}}}JN();const eD={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},mg=lT(eD),ut=E2(mg);XN(mg);var Fl={},_E;function tD(){if(_E)return Fl;_E=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.parse=f,Fl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function f(R,k){const M=new u,Y=R.length;if(Y<2)return M;const F=(k==null?void 0:k.decode)||E;let Q=0;do{const se=R.indexOf("=",Q);if(se===-1)break;const ne=R.indexOf(";",Q),he=ne===-1?Y:ne;if(se>he){Q=R.lastIndexOf(";",se-1)+1;continue}const me=m(R,Q,se),Ae=p(R,se,me),D=R.slice(me,Ae);if(M[D]===void 0){let S=m(R,se+1,he),I=p(R,he,S);const x=F(R.slice(S,I));M[D]=x}Q=he+1}while(Q<Y);return M}function m(R,k,M){do{const Y=R.charCodeAt(k);if(Y!==32&&Y!==9)return k}while(++k<M);return M}function p(R,k,M){for(;k>M;){const Y=R.charCodeAt(--k);if(Y!==32&&Y!==9)return k+1}return M}function g(R,k,M){const Y=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(R))throw new TypeError(`argument name is invalid: ${R}`);const F=Y(k);if(!e.test(F))throw new TypeError(`argument val is invalid: ${k}`);let Q=R+"="+F;if(!M)return Q;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);Q+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);Q+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);Q+="; Path="+M.path}if(M.expires){if(!A(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);Q+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(Q+="; HttpOnly"),M.secure&&(Q+="; Secure"),M.partitioned&&(Q+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return Q}function E(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function A(R){return o.call(R)==="[object Date]"}return Fl}tD();var EE="popstate";function nD(i={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return mp("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:gu(o)}return rD(e,n,null,i)}function gt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ui(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iD(){return Math.random().toString(36).substring(2,10)}function TE(i,e){return{usr:i.state,key:i.key,idx:e}}function mp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Po(e):e,state:n,key:e&&e.key||s||iD()}}function gu({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Po(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function rD(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function A(){m="POP";let F=E(),Q=F==null?null:F-g;g=F,p&&p({action:m,location:Y.location,delta:Q})}function R(F,Q){m="PUSH";let se=mp(Y.location,F,Q);g=E()+1;let ne=TE(se,g),he=Y.createHref(se);try{f.pushState(ne,"",he)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(he)}u&&p&&p({action:m,location:Y.location,delta:1})}function k(F,Q){m="REPLACE";let se=mp(Y.location,F,Q);g=E();let ne=TE(se,g),he=Y.createHref(se);f.replaceState(ne,"",he),u&&p&&p({action:m,location:Y.location,delta:0})}function M(F){let Q=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof F=="string"?F:gu(F);return se=se.replace(/ $/,"%20"),gt(Q,`No window.location.(origin|href) available to create URL for href: ${se}`),new URL(se,Q)}let Y={get action(){return m},get location(){return i(o,f)},listen(F){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(EE,A),p=F,()=>{o.removeEventListener(EE,A),p=null}},createHref(F){return e(o,F)},createURL:M,encodeLocation(F){let Q=M(F);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:R,replace:k,go(F){return f.go(F)}};return Y}function fw(i,e,n="/"){return sD(i,e,n,!1)}function sD(i,e,n,s){let o=typeof e=="string"?Po(e):e,u=wr(o.pathname||"/",n);if(u==null)return null;let f=dw(i);aD(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=yD(u);m=pD(f[p],g,s)}return m}function dw(i,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=yr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),dw(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:dD(g,u.index),routesMeta:E})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of mw(u.path))o(u,f,p)}),e}function mw(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=mw(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function aD(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:mD(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var oD=/^:[\w-]+$/,lD=3,uD=2,cD=1,hD=10,fD=-2,bE=i=>i==="*";function dD(i,e){let n=i.split("/"),s=n.length;return n.some(bE)&&(s+=fD),e&&(s+=uD),n.filter(o=>!bE(o)).reduce((o,u)=>o+(oD.test(u)?lD:u===""?cD:hD),s)}function mD(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function pD(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",A=Lh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),R=p.route;if(!A&&g&&n&&!s[s.length-1].route.index&&(A=Lh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!A)return null;Object.assign(o,A.params),f.push({params:o,pathname:yr([u,A.pathname]),pathnameBase:TD(yr([u,A.pathnameBase])),route:R}),A.pathnameBase!=="/"&&(u=yr([u,A.pathnameBase]))}return f}function Lh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=gD(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:A},R)=>{if(E==="*"){let M=m[R]||"";f=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const k=m[R];return A&&!k?g[E]=void 0:g[E]=(k||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function gD(i,e=!1,n=!0){ui(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function yD(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ui(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function wr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function vD(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Po(i):i;return{pathname:n?n.startsWith("/")?n:_D(n,e):e,search:bD(s),hash:wD(o)}}function _D(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Um(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ED(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pg(i){let e=ED(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function gg(i,e,n,s=!1){let o;typeof i=="string"?o=Po(i):(o={...i},gt(!o.pathname||!o.pathname.includes("?"),Um("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),Um("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),Um("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let A=e.length-1;if(!s&&f.startsWith("..")){let R=f.split("/");for(;R[0]==="..";)R.shift(),A-=1;o.pathname=R.join("/")}m=A>=0?e[A]:"/"}let p=vD(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var yr=i=>i.join("/").replace(/\/\/+/g,"/"),TD=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),bD=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,wD=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function SD(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var pw=["POST","PUT","PATCH","DELETE"];new Set(pw);var AD=["GET",...pw];new Set(AD);var Lo=U.createContext(null);Lo.displayName="DataRouter";var yf=U.createContext(null);yf.displayName="DataRouterState";var gw=U.createContext({isTransitioning:!1});gw.displayName="ViewTransition";var RD=U.createContext(new Map);RD.displayName="Fetchers";var ID=U.createContext(null);ID.displayName="Await";var fi=U.createContext(null);fi.displayName="Navigation";var Iu=U.createContext(null);Iu.displayName="Location";var zi=U.createContext({outlet:null,matches:[],isDataRoute:!1});zi.displayName="Route";var yg=U.createContext(null);yg.displayName="RouteError";function CD(i,{relative:e}={}){gt(Uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=U.useContext(fi),{hash:o,pathname:u,search:f}=Nu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:yr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function Uo(){return U.useContext(Iu)!=null}function Ts(){return gt(Uo(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Iu).location}var yw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vw(i){U.useContext(fi).static||U.useLayoutEffect(i)}function Cu(){let{isDataRoute:i}=U.useContext(zi);return i?BD():ND()}function ND(){gt(Uo(),"useNavigate() may be used only in the context of a <Router> component.");let i=U.useContext(Lo),{basename:e,navigator:n}=U.useContext(fi),{matches:s}=U.useContext(zi),{pathname:o}=Ts(),u=JSON.stringify(pg(s)),f=U.useRef(!1);return vw(()=>{f.current=!0}),U.useCallback((p,g={})=>{if(ui(f.current,yw),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=gg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:yr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}U.createContext(null);function Nu(i,{relative:e}={}){let{matches:n}=U.useContext(zi),{pathname:s}=Ts(),o=JSON.stringify(pg(n));return U.useMemo(()=>gg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function DD(i,e){return _w(i,e)}function _w(i,e,n,s){var se;gt(Uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=U.useContext(fi),{matches:f}=U.useContext(zi),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",A=m&&m.route;{let ne=A&&A.path||"";Ew(g,!A||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let R=Ts(),k;if(e){let ne=typeof e=="string"?Po(e):e;gt(E==="/"||((se=ne.pathname)==null?void 0:se.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),k=ne}else k=R;let M=k.pathname||"/",Y=M;if(E!=="/"){let ne=E.replace(/^\//,"").split("/");Y="/"+M.replace(/^\//,"").split("/").slice(ne.length).join("/")}let F=!u&&n&&n.matches&&n.matches.length>0?n.matches:fw(i,{pathname:Y});ui(A||F!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),ui(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=kD(F&&F.map(ne=>Object.assign({},ne,{params:Object.assign({},p,ne.params),pathname:yr([E,o.encodeLocation?o.encodeLocation(ne.pathname).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?E:yr([E,o.encodeLocation?o.encodeLocation(ne.pathnameBase).pathname:ne.pathnameBase])})),f,n,s);return e&&Q?U.createElement(Iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},Q):Q}function xD(){let i=zD(),e=SD(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:u},"ErrorBoundary")," or"," ",U.createElement("code",{style:u},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:o},n):null,f)}var OD=U.createElement(xD,null),MD=class extends U.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?U.createElement(zi.Provider,{value:this.props.routeContext},U.createElement(yg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VD({routeContext:i,match:e,children:n}){let s=U.useContext(Lo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(zi.Provider,{value:i},n)}function kD(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);gt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:A}=n,R=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||R){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let A,R=!1,k=null,M=null;n&&(A=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||OD,f&&(m<0&&E===0?(Ew("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,M=null):m===E&&(R=!0,M=g.route.hydrateFallbackElement||null)));let Y=e.concat(o.slice(0,E+1)),F=()=>{let Q;return A?Q=k:R?Q=M:g.route.Component?Q=U.createElement(g.route.Component,null):g.route.element?Q=g.route.element:Q=p,U.createElement(VD,{match:g,routeContext:{outlet:p,matches:Y,isDataRoute:n!=null},children:Q})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?U.createElement(MD,{location:n.location,revalidation:n.revalidation,component:k,error:A,children:F(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):F()},null)}function vg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PD(i){let e=U.useContext(Lo);return gt(e,vg(i)),e}function LD(i){let e=U.useContext(yf);return gt(e,vg(i)),e}function UD(i){let e=U.useContext(zi);return gt(e,vg(i)),e}function _g(i){let e=UD(i),n=e.matches[e.matches.length-1];return gt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function jD(){return _g("useRouteId")}function zD(){var s;let i=U.useContext(yg),e=LD("useRouteError"),n=_g("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function BD(){let{router:i}=PD("useNavigate"),e=_g("useNavigate"),n=U.useRef(!1);return vw(()=>{n.current=!0}),U.useCallback(async(o,u={})=>{ui(n.current,yw),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var wE={};function Ew(i,e,n){!e&&!wE[i]&&(wE[i]=!0,ui(!1,n))}U.memo(qD);function qD({routes:i,future:e,state:n}){return _w(i,void 0,n,e)}function Eg({to:i,replace:e,state:n,relative:s}){gt(Uo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=U.useContext(fi);ui(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=U.useContext(zi),{pathname:f}=Ts(),m=Cu(),p=gg(i,pg(u),f,s==="path"),g=JSON.stringify(p);return U.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function yo(i){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HD({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){gt(!Uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=U.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=Po(n));let{pathname:p="/",search:g="",hash:E="",state:A=null,key:R="default"}=n,k=U.useMemo(()=>{let M=wr(p,f);return M==null?null:{location:{pathname:M,search:g,hash:E,state:A,key:R},navigationType:s}},[f,p,g,E,A,R,s]);return ui(k!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:U.createElement(fi.Provider,{value:m},U.createElement(Iu.Provider,{children:e,value:k}))}function FD({children:i,location:e}){return DD(pp(i),e)}function pp(i,e=[]){let n=[];return U.Children.forEach(i,(s,o)=>{if(!U.isValidElement(s))return;let u=[...e,o];if(s.type===U.Fragment){n.push.apply(n,pp(s.props.children,u));return}gt(s.type===yo,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=pp(s.props.children,u)),n.push(f)}),n}var yh="get",vh="application/x-www-form-urlencoded";function vf(i){return i!=null&&typeof i.tagName=="string"}function GD(i){return vf(i)&&i.tagName.toLowerCase()==="button"}function KD(i){return vf(i)&&i.tagName.toLowerCase()==="form"}function $D(i){return vf(i)&&i.tagName.toLowerCase()==="input"}function QD(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function YD(i,e){return i.button===0&&(!e||e==="_self")&&!QD(i)}var oh=null;function XD(){if(oh===null)try{new FormData(document.createElement("form"),0),oh=!1}catch{oh=!0}return oh}var WD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jm(i){return i!=null&&!WD.has(i)?(ui(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vh}"`),null):i}function ZD(i,e){let n,s,o,u,f;if(KD(i)){let m=i.getAttribute("action");s=m?wr(m,e):null,n=i.getAttribute("method")||yh,o=jm(i.getAttribute("enctype"))||vh,u=new FormData(i)}else if(GD(i)||$D(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?wr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||yh,o=jm(i.getAttribute("formenctype"))||jm(m.getAttribute("enctype"))||vh,u=new FormData(m,i),!XD()){let{name:g,type:E,value:A}=i;if(E==="image"){let R=g?`${g}.`:"";u.append(`${R}x`,"0"),u.append(`${R}y`,"0")}else g&&u.append(g,A)}}else{if(vf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yh,s=null,o=vh,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function Tg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function JD(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ex(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function tx(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await JD(u,n);return f.links?f.links():[]}return[]}));return sx(s.flat(1).filter(ex).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function SE(i,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var A;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let R=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function nx(i,e,{includeHydrateFallback:n}={}){return ix(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function ix(i){return[...new Set(i)]}function rx(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function sx(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(rx(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var ax=new Set([100,101,204,205]);function ox(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&wr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Tw(){let i=U.useContext(Lo);return Tg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function lx(){let i=U.useContext(yf);return Tg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var bg=U.createContext(void 0);bg.displayName="FrameworkContext";function bw(){let i=U.useContext(bg);return Tg(i,"You must render this element inside a <HydratedRouter> element"),i}function ux(i,e){let n=U.useContext(bg),[s,o]=U.useState(!1),[u,f]=U.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:A}=e,R=U.useRef(null);U.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let Y=Q=>{Q.forEach(se=>{f(se.isIntersecting)})},F=new IntersectionObserver(Y,{threshold:.5});return R.current&&F.observe(R.current),()=>{F.disconnect()}}},[i]),U.useEffect(()=>{if(s){let Y=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Y)}}},[s]);let k=()=>{o(!0)},M=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,R,{}]:[u,R,{onFocus:Gl(m,k),onBlur:Gl(p,M),onMouseEnter:Gl(g,k),onMouseLeave:Gl(E,M),onTouchStart:Gl(A,k)}]:[!1,R,{}]}function Gl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function cx({page:i,...e}){let{router:n}=Tw(),s=U.useMemo(()=>fw(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?U.createElement(fx,{page:i,matches:s,...e}):null}function hx(i){let{manifest:e,routeModules:n}=bw(),[s,o]=U.useState([]);return U.useEffect(()=>{let u=!1;return tx(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function fx({page:i,matches:e,...n}){let s=Ts(),{manifest:o,routeModules:u}=bw(),{basename:f}=Tw(),{loaderData:m,matches:p}=lx(),g=U.useMemo(()=>SE(i,e,p,o,s,"data"),[i,e,p,o,s]),E=U.useMemo(()=>SE(i,e,p,o,s,"assets"),[i,e,p,o,s]),A=U.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let M=new Set,Y=!1;if(e.forEach(Q=>{var ne;let se=o.routes[Q.route.id];!se||!se.hasLoader||(!g.some(he=>he.route.id===Q.route.id)&&Q.route.id in m&&((ne=u[Q.route.id])!=null&&ne.shouldRevalidate)||se.hasClientLoader?Y=!0:M.add(Q.route.id))}),M.size===0)return[];let F=ox(i,f);return Y&&M.size>0&&F.searchParams.set("_routes",e.filter(Q=>M.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[F.pathname+F.search]},[f,m,s,o,g,e,i,u]),R=U.useMemo(()=>nx(E,o),[E,o]),k=hx(E);return U.createElement(U.Fragment,null,A.map(M=>U.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),R.map(M=>U.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),k.map(({key:M,link:Y})=>U.createElement("link",{key:M,...Y})))}function dx(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ww&&(window.__reactRouterVersion="7.5.2")}catch{}function mx({basename:i,children:e,window:n}){let s=U.useRef();s.current==null&&(s.current=nD({window:n,v5Compat:!0}));let o=s.current,[u,f]=U.useState({action:o.action,location:o.location}),m=U.useCallback(p=>{U.startTransition(()=>f(p))},[f]);return U.useLayoutEffect(()=>o.listen(m),[o,m]),U.createElement(HD,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Sw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wg=U.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:A,...R},k){let{basename:M}=U.useContext(fi),Y=typeof g=="string"&&Sw.test(g),F,Q=!1;if(typeof g=="string"&&Y&&(F=g,ww))try{let I=new URL(window.location.href),x=g.startsWith("//")?new URL(I.protocol+g):new URL(g),O=wr(x.pathname,M);x.origin===I.origin&&O!=null?g=O+x.search+x.hash:Q=!0}catch{ui(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=CD(g,{relative:o}),[ne,he,me]=ux(s,R),Ae=vx(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:A});function D(I){e&&e(I),I.defaultPrevented||Ae(I)}let S=U.createElement("a",{...R,...me,href:F||se,onClick:Q||u?e:D,ref:dx(k,he),target:p,"data-discover":!Y&&n==="render"?"true":void 0});return ne&&!Y?U.createElement(U.Fragment,null,S,U.createElement(cx,{page:se})):S});wg.displayName="Link";var px=U.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let A=Nu(f,{relative:g.relative}),R=Ts(),k=U.useContext(yf),{navigator:M,basename:Y}=U.useContext(fi),F=k!=null&&wx(A)&&m===!0,Q=M.encodeLocation?M.encodeLocation(A).pathname:A.pathname,se=R.pathname,ne=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(se=se.toLowerCase(),ne=ne?ne.toLowerCase():null,Q=Q.toLowerCase()),ne&&Y&&(ne=wr(ne,Y)||ne);const he=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let me=se===Q||!o&&se.startsWith(Q)&&se.charAt(he)==="/",Ae=ne!=null&&(ne===Q||!o&&ne.startsWith(Q)&&ne.charAt(Q.length)==="/"),D={isActive:me,isPending:Ae,isTransitioning:F},S=me?e:void 0,I;typeof s=="function"?I=s(D):I=[s,me?"active":null,Ae?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let x=typeof u=="function"?u(D):u;return U.createElement(wg,{...g,"aria-current":S,className:I,ref:E,style:x,to:f,viewTransition:m},typeof p=="function"?p(D):p)});px.displayName="NavLink";var gx=U.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=yh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:A,...R},k)=>{let M=Tx(),Y=bx(m,{relative:g}),F=f.toLowerCase()==="get"?"get":"post",Q=typeof m=="string"&&Sw.test(m),se=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let he=ne.nativeEvent.submitter,me=(he==null?void 0:he.getAttribute("formmethod"))||f;M(he||ne.currentTarget,{fetcherKey:e,method:me,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:A})};return U.createElement("form",{ref:k,method:F,action:Y,onSubmit:s?p:se,...R,"data-discover":!Q&&i==="render"?"true":void 0})});gx.displayName="Form";function yx(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Aw(i){let e=U.useContext(Lo);return gt(e,yx(i)),e}function vx(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=Cu(),p=Ts(),g=Nu(i,{relative:u});return U.useCallback(E=>{if(YD(E,e)){E.preventDefault();let A=n!==void 0?n:gu(p)===gu(g);m(i,{replace:A,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,i,o,u,f])}var _x=0,Ex=()=>`__${String(++_x)}__`;function Tx(){let{router:i}=Aw("useSubmit"),{basename:e}=U.useContext(fi),n=jD();return U.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=ZD(s,e);if(o.navigate===!1){let E=o.fetcherKey||Ex();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function bx(i,{relative:e}={}){let{basename:n}=U.useContext(fi),s=U.useContext(zi);gt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Nu(i||".",{relative:e})},f=Ts();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(A=>A).forEach(A=>m.append("index",A));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:yr([n,u.pathname])),gu(u)}function wx(i,e={}){let n=U.useContext(gw);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Aw("useViewTransitionState"),o=Nu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=wr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=wr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Lh(o.pathname,f)!=null||Lh(o.pathname,u)!=null}new TextEncoder;[...ax];var Sx=YE();const AE=QE(Sx);function Sg(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ax=Rw,Iw=new pa("auth","Firebase",Rw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new $h("@firebase/auth");function Rx(i,...e){Uh.logLevel<=ze.WARN&&Uh.warn(`Auth (${xo}): ${i}`,...e)}function _h(i,...e){Uh.logLevel<=ze.ERROR&&Uh.error(`Auth (${xo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(i,...e){throw Ag(i,...e)}function Pi(i,...e){return Ag(i,...e)}function Cw(i,e,n){const s=Object.assign(Object.assign({},Ax()),{[e]:n});return new pa("auth","Firebase",s).create(e,{appName:i.name})}function vr(i){return Cw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ag(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Iw.create(i,...e)}function Re(i,e,...n){if(!i)throw Ag(e,...n)}function mr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw _h(e),new Error(e)}function Sr(i,e){i||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function Ix(){return RE()==="http:"||RE()==="https:"}function RE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ix()||nT()||"connection"in navigator)?navigator.onLine:!0}function Nx(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=JA()||nR()}get(){return Cx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(i,e){Sr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ox=new Du(3e4,6e4);function bs(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function ws(i,e,n,s,o={}){return Dw(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=_u(Object.assign({key:i.config.apiKey},f)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return tR()||(g.referrerPolicy="no-referrer"),Nw.fetch()(await xw(i,i.config.apiHost,n,m),g)})}async function Dw(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},Dx),e);try{const o=new Vx(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw lh(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw lh(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw lh(i,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Cw(i,E,g);ci(i,E)}}catch(o){if(o instanceof hi)throw o;ci(i,"network-request-failed",{message:String(o)})}}async function xu(i,e,n,s,o={}){const u=await ws(i,e,n,s,o);return"mfaPendingCredential"in u&&ci(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function xw(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Rg(i.config,o):`${i.config.apiScheme}://${o}`;return xx.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function Mx(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Pi(this.auth,"network-request-failed")),Ox.get())})}}function lh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Pi(i,e,s);return o.customData._tokenResponse=n,o}function IE(i){return i!==void 0&&i.enterprise!==void 0}class kx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Mx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Px(i,e){return ws(i,"GET","/v2/recaptchaConfig",bs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(i,e){return ws(i,"POST","/v1/accounts:delete",e)}async function jh(i,e){return ws(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ux(i,e=!1){const n=Ct(i),s=await n.getIdToken(e),o=Ig(s);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:su(zm(o.auth_time)),issuedAtTime:su(zm(o.iat)),expirationTime:su(zm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function zm(i){return Number(i)*1e3}function Ig(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const o=ZE(n);return o?JSON.parse(o):(_h("Failed to decode base64 JWT payload"),null)}catch(o){return _h("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function CE(i){const e=Ig(i);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof hi&&jx(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function jx({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await yu(i,jh(n,{idToken:s}));Re(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Ow(u.providerUserInfo):[],m=qx(i.providerData,f),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new yp(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,A)}async function Bx(i){const e=Ct(i);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qx(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Ow(i){return i.map(e=>{var{providerId:n}=e,s=Sg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(i,e){const n=await Dw(i,{},async()=>{const s=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await xw(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Nw.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Fx(i,e){return ws(i,"POST","/v2/accounts:revokeToken",bs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=CE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await Hx(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new To;return s&&(Re(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Re(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(i,e){Re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ai{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Sg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new yp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await yu(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ux(this,e)}reload(){return Bx(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await zh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await yu(this,Lx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,E;const A=(s=n.displayName)!==null&&s!==void 0?s:void 0,R=(o=n.email)!==null&&o!==void 0?o:void 0,k=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Y=(m=n.tenantId)!==null&&m!==void 0?m:void 0,F=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Q=(g=n.createdAt)!==null&&g!==void 0?g:void 0,se=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:he,isAnonymous:me,providerData:Ae,stsTokenManager:D}=n;Re(ne&&D,e,"internal-error");const S=To.fromJSON(this.name,D);Re(typeof ne=="string",e,"internal-error"),ts(A,e.name),ts(R,e.name),Re(typeof he=="boolean",e,"internal-error"),Re(typeof me=="boolean",e,"internal-error"),ts(k,e.name),ts(M,e.name),ts(Y,e.name),ts(F,e.name),ts(Q,e.name),ts(se,e.name);const I=new ai({uid:ne,auth:e,email:R,emailVerified:he,displayName:A,isAnonymous:me,photoURL:M,phoneNumber:k,tenantId:Y,stsTokenManager:S,createdAt:Q,lastLoginAt:se});return Ae&&Array.isArray(Ae)&&(I.providerData=Ae.map(x=>Object.assign({},x))),F&&(I._redirectEventId=F),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new To;o.updateFromServerResponse(n);const u=new ai({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await zh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Ow(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new To;m.updateFromIdToken(s);const p=new ai({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new yp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;function pr(i){Sr(i instanceof Function,"Expected a class definition");let e=NE.get(i);return e?(Sr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,NE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Mw.type="NONE";const DE=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i,e,n){return`firebase:${i}:${e}:${n}`}class bo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Eh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Eh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jh(this.auth,{idToken:e}).catch(()=>{});return n?ai._fromGetAccountInfoResponse(this.auth,n,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new bo(pr(DE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||pr(DE);const f=Eh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let A;if(typeof E=="string"){const R=await jh(e,{idToken:E}).catch(()=>{});if(!R)break;A=await ai._fromGetAccountInfoResponse(e,R,E)}else A=ai._fromJSON(e,E);g!==u&&(m=A),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new bo(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new bo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if(zw(e))return"Webos";if(kw(e))return"Safari";if((e.includes("chrome/")||Pw(e))&&!e.includes("edge/"))return"Chrome";if(Uw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Vw(i=hn()){return/firefox\//i.test(i)}function kw(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pw(i=hn()){return/crios\//i.test(i)}function Lw(i=hn()){return/iemobile/i.test(i)}function Uw(i=hn()){return/android/i.test(i)}function jw(i=hn()){return/blackberry/i.test(i)}function zw(i=hn()){return/webos/i.test(i)}function Cg(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Gx(i=hn()){var e;return Cg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Kx(){return iR()&&document.documentMode===10}function Bw(i=hn()){return Cg(i)||Uw(i)||zw(i)||jw(i)||/windows phone/i.test(i)||Lw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(i,e=[]){let n;switch(i){case"Browser":n=xE(hn());break;case"Worker":n=`${xE(hn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(i,e={}){return ws(i,"GET","/v2/passwordPolicy",bs(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=6;class Xx{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:Yx,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new OE(this),this.idTokenSubscription=new OE(this),this.beforeStateQueue=new $x(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jh(this,{idToken:e}),s=await ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(vr(this));const n=e?Ct(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qx(this),n=new Xx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Fx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Rx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ea(i){return Ct(i)}class OE{constructor(e){this.auth=e,this.observer=null,this.addObserver=cR(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zx(i){_f=i}function Hw(i){return _f.loadJS(i)}function Jx(){return _f.recaptchaEnterpriseScript}function eO(){return _f.gapiScript}function tO(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class nO{constructor(){this.enterprise=new iO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class iO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const rO="recaptcha-enterprise",Fw="NO_RECAPTCHA";class sO{constructor(e){this.type=rO,this.auth=Ea(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{Px(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new kx(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;IE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(Fw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nO().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&IE(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Jx();p.length!==0&&(p+=m),Hw(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function ME(i,e,n,s=!1,o=!1){const u=new sO(i);let f;if(o)f=Fw;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function vp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await ME(i,e,n,n==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await ME(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(i,e){const n=ga(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(fs(u,e??{}))return o;ci(o,"already-initialized")}return n.initialize({options:e})}function oO(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function lO(i,e,n){const s=Ea(i);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Gw(e),{host:f,port:m}=uO(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(fs(g,s.config.emulator)&&fs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,cO()}function Gw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function uO(i){const e=Gw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:VE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:VE(f)}}}function VE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function cO(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,n){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}async function hO(i,e){return ws(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(i,e){return xu(i,"POST","/v1/accounts:signInWithPassword",bs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(i,e){return xu(i,"POST","/v1/accounts:signInWithEmailLink",bs(i,e))}async function mO(i,e){return xu(i,"POST","/v1/accounts:signInWithEmailLink",bs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends Ng{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new vu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new vu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vp(e,n,"signInWithPassword",fO);case"emailLink":return dO(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vp(e,s,"signUpPassword",hO);case"emailLink":return mO(e,{idToken:n,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(i,e){return xu(i,"POST","/v1/accounts:signInWithIdp",bs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="http://localhost";class da extends Ng{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ci("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Sg(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new da(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return wo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,wo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wo(e,n)}buildRequest(){const e={requestUri:pO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yO(i){const e=$l(Ql(i)).link,n=e?$l(Ql(e)).deep_link_id:null,s=$l(Ql(i)).deep_link_id;return(s?$l(Ql(s)).link:null)||s||n||e||i}class Dg{constructor(e){var n,s,o,u,f,m;const p=$l(Ql(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,A=gO((o=p.mode)!==null&&o!==void 0?o:null);Re(g&&E&&A,"argument-error"),this.apiKey=g,this.operation=A,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=yO(e);try{return new Dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.providerId=jo.PROVIDER_ID}static credential(e,n){return vu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Dg.parseLink(n);return Re(s,"argument-error"),vu._fromEmailAndCode(e,s.code,s.tenantId)}}jo.PROVIDER_ID="password";jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends Kw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Ou{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return da._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return is.credential(n,s)}catch{return null}}}is.GOOGLE_SIGN_IN_METHOD="google.com";is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Ou{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Ou{constructor(){super("twitter.com")}static credential(e,n){return da._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ss.credential(n,s)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(i,e){return xu(i,"POST","/v1/accounts:signUp",bs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ai._fromIdTokenResponse(e,s,o),f=kE(s);return new ma({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=kE(s);return new ma({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function kE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends hi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Bh(e,n,s,o)}}function $w(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(i,u,e,s):u})}async function _O(i,e,n=!1){const s=await yu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ma._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(i,e,n=!1){const{auth:s}=i;if(Wn(s.app))return Promise.reject(vr(s));const o="reauthenticate";try{const u=await yu(i,$w(s,o,e,i),n);Re(u.idToken,s,"internal-error");const f=Ig(u.idToken);Re(f,s,"internal-error");const{sub:m}=f;return Re(i.uid===m,s,"user-mismatch"),ma._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ci(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(i,e,n=!1){if(Wn(i.app))return Promise.reject(vr(i));const s="signIn",o=await $w(i,s,e),u=await ma._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function TO(i,e){return Qw(Ea(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(i){const e=Ea(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bO(i,e,n){if(Wn(i.app))return Promise.reject(vr(i));const s=Ea(i),f=await vp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Yw(i),p}),m=await ma._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function wO(i,e,n){return Wn(i.app)?Promise.reject(vr(i)):TO(Ct(i),jo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Yw(i),s})}function SO(i,e,n,s){return Ct(i).onIdTokenChanged(e,n,s)}function AO(i,e,n){return Ct(i).beforeAuthStateChanged(e,n)}function RO(i,e,n,s){return Ct(i).onAuthStateChanged(e,n,s)}function IO(i){return Ct(i).signOut()}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=1e3,NO=10;class Ww extends Xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Kx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,NO):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},CO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ww.type="LOCAL";const DO=Ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends Xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zw.type="SESSION";const Jw=Zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Ef(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await xO(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=xg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(A){const R=A;if(R.data.eventId===g)switch(R.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(R.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function MO(i){Li().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function VO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function PO(){return eS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firebaseLocalStorageDb",LO=1,Hh="firebaseLocalStorage",nS="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tf(i,e){return i.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function UO(){const i=indexedDB.deleteDatabase(tS);return new Mu(i).toPromise()}function _p(){const i=indexedDB.open(tS,LO);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Hh,{keyPath:nS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Hh)?e(s):(s.close(),await UO(),e(await _p()))})})}async function PE(i,e,n){const s=Tf(i,!0).put({[nS]:e,value:n});return new Mu(s).toPromise()}async function jO(i,e){const n=Tf(i,!1).get(e),s=await new Mu(n).toPromise();return s===void 0?null:s.value}function LE(i,e){const n=Tf(i,!0).delete(e);return new Mu(n).toPromise()}const zO=800,BO=3;class iS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _p(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>BO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ef._getInstance(PO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VO(),!this.activeServiceWorker)return;this.sender=new OO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _p();return await PE(e,qh,"1"),await LE(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>PE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>jO(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>LE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Tf(o,!1).getAll();return new Mu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iS.type="LOCAL";const qO=iS;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(i,e){return e?pr(e):(Re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends Ng{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FO(i){return Qw(i.auth,new Og(i),i.bypassAuthState)}function GO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),EO(n,new Og(i),i.bypassAuthState)}async function KO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),_O(n,new Og(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FO;case"linkViaPopup":case"linkViaRedirect":return KO;case"reauthViaPopup":case"reauthViaRedirect":return GO;default:ci(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new Du(2e3,1e4);class vo extends rS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$O.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="pendingRedirect",Th=new Map;class YO extends rS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const s=await XO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XO(i,e){const n=JO(e),s=ZO(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function WO(i,e){Th.set(i._key(),e)}function ZO(i){return pr(i._redirectPersistence)}function JO(i){return Eh(QO,i.config.apiKey,i.name)}async function eM(i,e,n=!1){if(Wn(i.app))return Promise.reject(vr(i));const s=Ea(i),o=HO(s,e),f=await new YO(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=10*60*1e3;class nM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!sS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tM&&this.cachedEventUids.clear(),this.cachedEventUids.has(UE(e))}saveEventToCache(e){this.cachedEventUids.add(UE(e)),this.lastProcessedEventTime=Date.now()}}function UE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function sS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iM(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(i,e={}){return ws(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aM=/^https?/;async function oM(i){if(i.config.emulator)return;const{authorizedDomains:e}=await rM(i);for(const n of e)try{if(lM(n))return}catch{}ci(i,"unauthorized-domain")}function lM(i){const e=gp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!aM.test(n))return!1;if(sM.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new Du(3e4,6e4);function jE(){const i=Li().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function cM(i){return new Promise((e,n)=>{var s,o,u;function f(){jE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jE(),n(Pi(i,"network-request-failed"))},timeout:uM.get()})}if(!((o=(s=Li().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Li().gapi)===null||u===void 0)&&u.load)f();else{const m=tO("iframefcb");return Li()[m]=()=>{gapi.load?f():n(Pi(i,"network-request-failed"))},Hw(`${eO()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw bh=null,e})}let bh=null;function hM(i){return bh=bh||cM(i),bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new Du(5e3,15e3),dM="__/auth/iframe",mM="emulator/auth/iframe",pM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yM(i){const e=i.config;Re(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Rg(e,mM):`https://${i.config.authDomain}/${dM}`,s={apiKey:e.apiKey,appName:i.name,v:xo},o=gM.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${_u(s).slice(1)}`}async function vM(i){const e=await hM(i),n=Li().gapi;return Re(n,i,"internal-error"),e.open({where:document.body,url:yM(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pM,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Pi(i,"network-request-failed"),m=Li().setTimeout(()=>{u(f)},fM.get());function p(){Li().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EM=500,TM=600,bM="_blank",wM="http://localhost";class zE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SM(i,e,n,s=EM,o=TM){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},_M),{width:s.toString(),height:o.toString(),top:u,left:f}),g=hn().toLowerCase();n&&(m=Pw(g)?bM:n),Vw(g)&&(e=e||wM,p.scrollbars="yes");const E=Object.entries(p).reduce((R,[k,M])=>`${R}${k}=${M},`,"");if(Gx(g)&&m!=="_self")return AM(e||"",m),new zE(null);const A=window.open(e||"",m,E);Re(A,i,"popup-blocked");try{A.focus()}catch{}return new zE(A)}function AM(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="__/auth/handler",IM="emulator/auth/handler",CM=encodeURIComponent("fac");async function BE(i,e,n,s,o,u){Re(i.config.authDomain,i,"auth-domain-config-required"),Re(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:xo,eventId:o};if(e instanceof Kw){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",uR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))f[E]=A}if(e instanceof Ou){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(f.scopes=E.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),g=p?`#${CM}=${encodeURIComponent(p)}`:"";return`${NM(i)}?${_u(m).slice(1)}${g}`}function NM({config:i}){return i.emulator?Rg(i,IM):`https://${i.authDomain}/${RM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class DM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=eM,this._overrideRedirectResult=WO}async _openPopup(e,n,s,o){var u;Sr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await BE(e,n,s,gp(),o);return SM(e,f,xg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await BE(e,n,s,gp(),o);return MO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Sr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await vM(e),s=new nM(e);return n.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Bm];f!==void 0&&n(!!f),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bw()||kw()||Cg()}}const xM=DM;var qE="@firebase/auth",HE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VM(i){Ui(new oi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Re(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(i)},g=new Wx(s,o,u,p);return oO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ui(new oi("auth-internal",e=>{const n=Ea(e.getProvider("auth").getImmediate());return(s=>new OM(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(qE,HE,MM(i)),Zn(qE,HE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=5*60,PM=tT("authIdTokenMaxAge")||kM;let FE=null;const LM=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>PM)return;const o=n==null?void 0:n.token;FE!==o&&(FE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function UM(i=bp()){const e=ga(i,"auth");if(e.isInitialized())return e.getImmediate();const n=aO(i,{popupRedirectResolver:xM,persistence:[qO,DO,Jw]}),s=tT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=LM(u.toString());AO(n,f,()=>f(n.currentUser)),SO(n,m=>f(m))}}const o=JE("auth");return o&&lO(n,`http://${o}`),n}function jM(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}Zx({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Pi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",jM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VM("Browser");const aS=U.createContext();function Ss(){return U.useContext(aS)}function zM({children:i}){const[e,n]=U.useState(null),[s,o]=U.useState(!0),u=UM(mg);U.useEffect(()=>RO(u,A=>{n(A),o(!1)}),[u]);const g={currentUser:e,signup:(E,A)=>bO(u,E,A),login:(E,A)=>wO(u,E,A),logout:()=>IO(u)};return b.jsx(aS.Provider,{value:g,children:!s&&i})}function BM(){const i=U.useRef(),e=U.useRef(),{login:n}=Ss(),[s,o]=U.useState(""),[u,f]=U.useState(!1),m=Cu();async function p(g){g.preventDefault(),o(""),f(!0);try{await n(i.current.value,e.current.value),m("/dashboard")}catch(E){o(E.message||"Failed to log in")}f(!1)}return b.jsx("div",{className:"auth-bg",children:b.jsxs("div",{className:"auth-container",children:[b.jsx("div",{className:"auth-logo-row",children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),b.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),b.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&b.jsx("div",{className:"auth-error",children:s}),b.jsxs("form",{className:"auth-form",onSubmit:p,children:[b.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),b.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),b.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),b.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),b.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),b.jsx("div",{className:"auth-link-row",children:b.jsxs("span",{children:["Don't have an account? ",b.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function qM(){const i=U.useRef(),e=U.useRef(),n=U.useRef(),{signup:s}=Ss(),[o,u]=U.useState(""),[f,m]=U.useState(!1),p=Cu();async function g(E){if(E.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{await s(i.current.value,e.current.value),p("/dashboard",{replace:!0})}catch(A){u(A.message||"Failed to create an account")}m(!1)}return b.jsx("div",{className:"auth-bg",children:b.jsxs("div",{className:"auth-container",children:[b.jsx("div",{className:"auth-logo-row",children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),b.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),b.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&b.jsx("div",{className:"auth-error",children:o}),b.jsxs("form",{className:"auth-form",onSubmit:g,children:[b.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),b.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),b.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),b.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),b.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),b.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),b.jsx("button",{disabled:f,type:"submit",className:"auth-btn",children:"Sign Up"})]}),b.jsx("div",{className:"auth-link-row",children:b.jsxs("span",{children:["Already have an account? ",b.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function HM({children:i}){const{currentUser:e}=Ss();return e?i:b.jsx(Eg,{to:"/login"})}function FM({show:i}){const[e,n]=U.useState(!1),[s,o]=U.useState([]),[u,f]=U.useState(null),[m,p]=U.useState([]),[g,E]=U.useState(!1),[A,R]=U.useState(""),k=async()=>{if(!e&&i.tmdbId){E(!0),R("");try{const Y=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,Q=await(await fetch(Y)).json();o(Q.seasons||[]),Q.seasons&&Q.seasons.length>0&&f(Q.seasons[0].season_number)}catch{R("Failed to load seasons.")}E(!1)}n(M=>!M)};return U.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){E(!0),R("");try{const F=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,se=await(await fetch(F)).json();p(se.episodes||[])}catch{R("Failed to load episodes.")}E(!1)}})()},[i.tmdbId,u]),b.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[b.jsx("button",{onClick:k,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":" Show Episodes"}),e&&b.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?b.jsx("div",{children:"Loading..."}):A?b.jsx("div",{style:{color:"red"},children:A}):b.jsxs(b.Fragment,{children:[s.length>0&&b.jsxs("div",{style:{marginBottom:10},children:[b.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),b.jsx("select",{id:"season-select",value:u||"",onChange:M=>f(Number(M.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(M=>b.jsx("option",{value:M.season_number,children:M.name||`Season ${M.season_number}`},M.id||M.season_number))})]}),m.length>0?b.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(M=>b.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[b.jsxs("strong",{children:["Ep ",M.episode_number,":"]})," ",M.name," ",M.air_date?b.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",M.air_date,")"]}):""]},M.id||M.episode_number))}):b.jsx("div",{children:"No episodes found."})]})})]})}function GM({users:i,onSelectUser:e}){return b.jsxs("table",{className:"admin-user-table",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Email"}),b.jsx("th",{children:"Display Name"}),b.jsx("th",{children:"Status"}),b.jsx("th",{children:"Roles"}),b.jsx("th",{children:"Stats"}),b.jsx("th",{children:"Actions"})]})}),b.jsx("tbody",{children:i.map(n=>{var s,o;return b.jsxs("tr",{children:[b.jsx("td",{children:n.email}),b.jsx("td",{children:n.displayName}),b.jsx("td",{children:n.disabled?"Inactive":"Active"}),b.jsx("td",{children:n.roles?n.roles.join(", "):""}),b.jsxs("td",{children:["Diary: ",((s=n.stats)==null?void 0:s.diaryCount)||0,b.jsx("br",{}),"Comments: ",((o=n.stats)==null?void 0:o.commentCount)||0]}),b.jsx("td",{children:b.jsx("button",{onClick:()=>e(n),children:"Manage"})})]},n.uid)})})]})}function KM({user:i,onClose:e,onDisable:n,onEnable:s,onDelete:o,onSendMessage:u,diaryEntries:f,comments:m,onDeleteDiary:p,onDeleteComment:g}){var E,A;return i?b.jsx("div",{className:"admin-modal-bg",children:b.jsxs("div",{className:"admin-modal",children:[b.jsx("button",{className:"close-btn",onClick:e,children:""}),b.jsxs("h2",{children:["User: ",i.displayName||i.email]}),b.jsxs("div",{children:["Status: ",i.disabled?"Inactive":"Active"]}),b.jsxs("div",{children:["Roles: ",i.roles?i.roles.join(", "):""]}),b.jsxs("div",{children:["Email: ",i.email]}),b.jsxs("div",{children:["Stats: Diary ",((E=i.stats)==null?void 0:E.diaryCount)||0,", Comments ",((A=i.stats)==null?void 0:A.commentCount)||0]}),b.jsxs("div",{style:{margin:"1em 0"},children:[i.disabled?b.jsx("button",{onClick:()=>s(i.uid),children:"Enable"}):b.jsx("button",{onClick:()=>n(i.uid),children:"Disable"}),b.jsx("button",{onClick:()=>o(i.uid),style:{marginLeft:8,color:"red"},children:"Delete"}),b.jsx("button",{onClick:()=>u(i.uid),style:{marginLeft:8},children:"Message"})]}),b.jsx("h3",{children:"Diary Entries"}),b.jsx("ul",{children:f.map(R=>b.jsxs("li",{children:[R.title," ",b.jsx("button",{onClick:()=>p(R.id),style:{color:"red"},children:"Delete"})]},R.id))}),b.jsx("h3",{children:"Comments"}),b.jsx("ul",{children:m.map(R=>b.jsxs("li",{children:[R.text," ",b.jsx("button",{onClick:()=>g(R.id),style:{color:"red"},children:"Delete"})]},R.id))})]})}):null}function $M({onSend:i,onClose:e}){const[n,s]=U.useState("");return b.jsx("div",{className:"admin-modal-bg",children:b.jsxs("div",{className:"admin-modal",children:[b.jsx("button",{className:"close-btn",onClick:e,children:""}),b.jsx("h2",{children:"Send Message to All Users"}),b.jsx("textarea",{value:n,onChange:o=>s(o.target.value),rows:6,style:{width:"100%"}}),b.jsx("button",{onClick:()=>i(n),style:{marginTop:12},children:"Send"})]})})}function QM(){const{currentUser:i}=Ss(),[e,n]=U.useState([]),[s,o]=U.useState(null),[u,f]=U.useState([]),[m,p]=U.useState([]),[g,E]=U.useState(!0),[A,R]=U.useState(""),[k,M]=U.useState(!1);U.useEffect(()=>{async function D(){E(!0),R("");try{const S=await oa(Mi(ut,"users"));n(S.docs.map(I=>({uid:I.id,...I.data()})))}catch{R("Failed to load users.")}E(!1)}D()},[]);async function Y(D){const S=await oa(Mi(ut,"diary"));f(S.docs.filter(x=>x.data().uid===D.uid).map(x=>({id:x.id,...x.data()})));const I=await oa(_2(ut,"comments"));p(I.docs.filter(x=>x.data().authorUid===D.uid).map(x=>({id:x.id,...x.data()}))),o(D)}async function F(D){await Eo(en(ut,"users",D),{disabled:!0}),n(e.map(S=>S.uid===D?{...S,disabled:!0}:S)),o(S=>S&&S.uid===D?{...S,disabled:!0}:S)}async function Q(D){await Eo(en(ut,"users",D),{disabled:!1}),n(e.map(S=>S.uid===D?{...S,disabled:!1}:S)),o(S=>S&&S.uid===D?{...S,disabled:!1}:S)}async function se(D){await iu(en(ut,"users",D)),n(e.filter(S=>S.uid!==D)),o(null)}async function ne(D){await iu(en(ut,"diary",D)),f(u.filter(S=>S.id!==D))}async function he(D){await iu(en(ut,"comments",D)),p(m.filter(S=>S.id!==D))}async function me(D){await oa(Mi(ut,"users")).then(S=>{S.forEach(I=>{Eo(en(ut,"users",I.id),{lastAdminMessage:D})})}),M(!1),alert("Message sent to all users!")}function Ae(D){M(!0)}return b.jsxs("div",{className:"admin-dashboard-container",children:[b.jsx("h2",{className:"admin-dashboard-title",children:"Admin Dashboard"}),b.jsx("div",{className:"admin-dashboard-actions",children:b.jsx("button",{className:"admin-dashboard-message-btn",onClick:()=>M(!0),children:"Message All Users"})}),A&&b.jsx("div",{className:"admin-dashboard-error",children:A}),g?b.jsx("div",{className:"admin-dashboard-loading",children:"Loading users..."}):b.jsx(GM,{users:e,onSelectUser:Y}),s&&b.jsx(KM,{user:s,diaryEntries:u,comments:m,onClose:()=>o(null),onDelete:se,onDisable:F,onEnable:Q,onSendMessage:Ae,onDeleteDiary:ne,onDeleteComment:he}),k&&b.jsx($M,{onSend:me,onClose:()=>M(!1)})]})}const YM=[{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],XM=[{icon:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],WM="https://image.tmdb.org/t/p/w500";function ZM(){const{currentUser:i}=Ss(),[e,n]=U.useState([]),[s,o]=U.useState(!0),[u,f]=U.useState("");return U.useEffect(()=>{async function m(){o(!0),f("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{f("Could not load trending movies.")}o(!1)}m()},[]),i?b.jsx(Eg,{to:"/dashboard"}):b.jsx("div",{className:"sw-bg",children:b.jsxs("div",{className:"sw-container",children:[b.jsxs("div",{className:"sw-header-box sw-header-custom",children:[b.jsx("div",{className:"sw-logo-row",children:b.jsx("div",{className:"sw-header-logo-bg",children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),b.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),b.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover Whats Next."}),b.jsx(wg,{to:"/login",children:b.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),b.jsxs("div",{className:"sw-section",children:[b.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),b.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:YM.map((m,p)=>b.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[b.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),b.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),b.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),b.jsxs("div",{className:"sw-section",children:[b.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),b.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:XM.map((m,p)=>b.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[b.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),b.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),b.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),b.jsxs("div",{className:"sw-section",children:[b.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),b.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?b.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?b.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?b.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>b.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[b.jsx("img",{src:m.poster_path?`${WM}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),b.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),b.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function JM({entryId:i}){console.log("entryId:",i);const{currentUser:e}=Ss(),[n,s]=U.useState([]),[o,u]=U.useState(!0),[f,m]=U.useState(""),[p,g]=U.useState(null),[E,A]=U.useState(""),[R,k]=U.useState({}),[M,Y]=U.useState(!0),F=U.useRef(null);async function Q(S){if(!S)return"Anonymous";try{const I=await gh(en(ut,"users",S.uid));if(I&&I.exists())return I.data().displayName||S.displayName||(S.email?S.email.split("@")[0]:S.uid)}catch{}return S.displayName||(S.email?S.email.split("@")[0]:S.uid)}U.useEffect(()=>{const S=mh(Mi(ut,`discussions/${i}/comments`),D2("timestamp","asc")),I=V2(S,x=>{const O=x.docs.map(L=>({id:L.id,...L.data()}));if(console.log("Fetched comments:",O),s(O),e){const L={};O.forEach(C=>{C.votes&&C.votes[e.uid]&&(L[C.id]=C.votes[e.uid])}),k(L)}u(!1)});return()=>I()},[i,e]);const se=async S=>{if(S.preventDefault(),!f.trim())return;const I=await Q(e);await fp(Mi(ut,`discussions/${i}/comments`),{text:f,author:I,authorUid:e?e.uid:null,timestamp:cE(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),F.current&&F.current.focus()},ne=async S=>{if(!E.trim())return;const I=await Q(e);await fp(Mi(ut,`discussions/${i}/comments`),{text:E,author:I,authorUid:e?e.uid:null,timestamp:cE(),parentId:S,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),A("")},he=async(S,I)=>{if(!e)return;const x=en(ut,`discussions/${i}/comments`,S),O=n.find(qe=>qe.id===S);if(!O)return;const L=O.votes?O.votes[e.uid]:void 0;if(L===I)return;let C={};I==="up"?C={upvotes:ah(1),...L==="down"?{downvotes:ah(-1)}:{},[`votes.${e.uid}`]:"up"}:I==="down"&&(C={downvotes:ah(1),...L==="up"?{upvotes:ah(-1)}:{},[`votes.${e.uid}`]:"down"}),await Eo(x,C)},me=async S=>{if(!e)return;const I=n.find(O=>O.id===S);if(!I||I.authorUid!==e.uid)return;const x=async O=>{const L=n.filter(qe=>qe.parentId===O);for(const qe of L)qe.authorUid===e.uid&&await x(qe.id);const C=n.find(qe=>qe.id===O);C&&C.authorUid===e.uid&&await iu(en(ut,`discussions/${i}/comments`,O))};await x(S)};function Ae({commentId:S,level:I,childrenCount:x,render:O,showCount:L=1}){const[C,qe]=U.useState(!1),He=O(S,I+1);return!He||He.length===0?null:C?b.jsxs("div",{children:[He,x>L&&b.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>qe(!1),children:"Hide Replies"})]}):b.jsxs("div",{children:[He.slice(0,L),x>L&&b.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>qe(!0),children:["View ",x-L+1," more repl",x-L+1===1?"y":"ies"]})]})}const D=(S=null,I=0)=>n.filter(O=>O.parentId===S).map(O=>{var C,qe,He,X;const L=n.filter(ae=>ae.parentId===O.id);return b.jsxs("div",{className:`discussion-comment${I>0?" discussion-reply":""}`,style:{marginLeft:I*18},children:[b.jsxs("div",{className:"discussion-header",children:[b.jsx("span",{className:"discussion-author",children:O.author}),b.jsx("span",{className:"discussion-date",children:((X=(qe=(C=O.timestamp)==null?void 0:C.toDate)==null?void 0:(He=qe.call(C)).toLocaleString)==null?void 0:X.call(He))||""})]}),b.jsx("div",{className:"discussion-body",children:O.text}),b.jsxs("div",{className:"discussion-actions",children:[b.jsxs("button",{className:`discussion-vote${R[O.id]==="up"?" voted":""}`,onClick:()=>he(O.id,"up"),title:"Thumbs up",disabled:R[O.id]==="up",children:[" ",O.upvotes||0]}),b.jsxs("button",{className:`discussion-vote${R[O.id]==="down"?" voted":""}`,onClick:()=>he(O.id,"down"),title:"Thumbs down",disabled:R[O.id]==="down",children:[" ",O.downvotes||0]}),b.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(O.id),children:"Reply"}),O.authorUid===(e==null?void 0:e.uid)&&b.jsx("button",{className:"discussion-delete-btn",onClick:()=>me(O.id),title:"Delete",children:""})]}),p===O.id&&b.jsxs("div",{className:"discussion-reply-form",children:[b.jsx("input",{type:"text",value:E,onChange:ae=>A(ae.target.value),placeholder:"Write a reply...",autoFocus:!0}),b.jsx("button",{onClick:()=>ne(O.id),children:"Send"}),b.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),b.jsx(Ae,{commentId:O.id,level:I,childrenCount:L.length,render:D,showCount:1})]},O.id)});return b.jsxs("div",{className:"discussion-section",children:[b.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Y(S=>!S),style:{marginBottom:M?0:10},children:M?"Show Discussion":"Hide Discussion"}),!M&&b.jsxs(b.Fragment,{children:[b.jsx("h4",{children:"Discussion"}),b.jsxs("form",{onSubmit:se,className:"discussion-form",children:[b.jsx("input",{type:"text",ref:F,value:f,onChange:S=>m(S.target.value),placeholder:"Add a comment..."}),b.jsx("button",{type:"submit",children:"Send"})]}),b.jsx("div",{className:"discussion-comments",children:o?b.jsx("div",{children:"Loading..."}):D()})]})]})}var oS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},GE=os.createContext&&os.createContext(oS),eV=["attr","size","title"];function tV(i,e){if(i==null)return{};var n=nV(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function nV(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Fh(){return Fh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Fh.apply(this,arguments)}function KE(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Gh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KE(Object(n),!0).forEach(function(s){iV(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function iV(i,e,n){return e=rV(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function rV(i){var e=sV(i,"string");return typeof e=="symbol"?e:e+""}function sV(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function lS(i){return i&&i.map((e,n)=>os.createElement(e.tag,Gh({key:n},e.attr),lS(e.child)))}function Vu(i){return e=>os.createElement(aV,Fh({attr:Gh({},i.attr)},e),lS(i.child))}function aV(i){var e=n=>{var{attr:s,size:o,title:u}=i,f=tV(i,eV),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),os.createElement("svg",Fh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,f,{className:p,style:Gh(Gh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&os.createElement("title",null,u),i.children)};return GE!==void 0?os.createElement(GE.Consumer,null,n=>e(n)):e(oS)}function oV(i){return Vu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function $E(i){return Vu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function lV(i){return Vu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function uV(i){return Vu({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function cV(i){return Vu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(i)}const ho="ca9a91468bb700f84faf986252bc3fe6",Kl="https://api.themoviedb.org/3",qm="US";function hV(){const{currentUser:i,logout:e}=Ss(),n=Cu(),[s,o]=U.useState("movie"),[u,f]=U.useState(""),[m,p]=U.useState([]),[g,E]=U.useState(!1),[A,R]=U.useState(""),[k,M]=U.useState([]),[Y,F]=U.useState({}),Q=U.useRef(null),se=U.useRef(""),[ne,he]=U.useState(null),[me,Ae]=U.useState(""),D=U.useRef({}),[S,I]=U.useState(!1),[x,O]=U.useState(null),[L,C]=U.useState(!1),[qe,He]=U.useState(""),[X,ae]=U.useState(!1),[ve,Le]=U.useState(""),[V,ie]=U.useState(!1),[ue,re]=U.useState(""),[pe,Me]=U.useState("movie"),[be,Et]=U.useState([]),[it,_n]=U.useState(!0),[ei,In]=U.useState(""),[di,mi]=U.useState(1),[jn,As]=U.useState(!1);U.useEffect(()=>{async function z(){if(!i)return;const le=await gh(en(ut,"users",i.uid));if(le.exists()){const fe=le.data();console.log("[ADMIN CHECK] Firestore user doc for UID",i.uid,fe),console.log("[ADMIN CHECK] roles field value:",fe.roles,"type:",typeof fe.roles,Array.isArray(fe.roles)),As(Array.isArray(fe.roles)&&fe.roles.includes("admin"))}else console.log("[ADMIN CHECK] No Firestore user doc found for UID",i.uid)}z()},[i]),U.useEffect(()=>{Et([]),mi(1),_n(!0),In("")},[pe]),U.useEffect(()=>{let z=!0;async function le(fe=1){_n(!0),In("");try{const _e=await fetch(`https://api.themoviedb.org/3/trending/${pe}/week?api_key=${ho}&page=${fe}`);if(!_e.ok)throw new Error("Failed to fetch trending");const ge=await _e.json();z&&Et(fe===1?ge.results:xe=>{const dt=new Set(xe.map(Cn=>Cn.id));return[...xe,...ge.results.filter(Cn=>!dt.has(Cn.id))]})}catch{z&&In("Could not load trending.")}z&&_n(!1)}return le(di),()=>{z=!1}},[pe,di]),U.useEffect(()=>{be.filter(le=>!k.some(fe=>fe.id===le.id&&fe.media_type===pe)).length<12&&be.length<100&&mi(le=>le+1)},[be,k,pe]),U.useEffect(()=>{if(!i)return;async function z(){const le=mh(Mi(ut,"diary"),Vm("uid","==",i.uid));let _e=(await oa(le)).docs.map(ge=>({...ge.data(),docId:ge.id}));_e=_e.sort((ge,xe)=>new Date(xe.createdAt)-new Date(ge.createdAt)),M(_e);for(const ge of _e)Rs(ge)}z()},[i]),U.useEffect(()=>{if(!i){He(""),Le("");return}let z=!1;async function le(){const fe=await gh(en(ut,"users",i.uid));let _e="";fe.exists()?_e=fe.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):_e=i.displayName||(i.email?i.email.split("@")[0]:i.uid),z||(He(_e),Le(_e))}return le(),()=>{z=!0}},[i&&i.uid]);async function Rs(z){var fe;if(Y[z.id])return;let le="";z.media_type==="movie"?le=`${Kl}/movie/${z.id}/watch/providers?api_key=${ho}`:le=`${Kl}/tv/${z.id}/watch/providers?api_key=${ho}`;try{const _e=await fetch(le);if(_e.status===404){F(dt=>({...dt,[z.id]:{}}));return}const xe=((fe=(await _e.json()).results)==null?void 0:fe[qm])||{};F(dt=>({...dt,[z.id]:xe}))}catch{F(ge=>({...ge,[z.id]:{}}))}}async function fn(z,le){if(!z.trim()){p([]),R(""),E(!1);return}E(!0),R(""),p([]);try{const _e=`${Kl}${le==="movie"?"/search/movie":"/search/tv"}?api_key=${ho}&query=${encodeURIComponent(z)}`,xe=await(await fetch(_e)).json();xe.results?p(xe.results):(p([]),R("No results found."))}catch{R("Failed to fetch results.")}E(!1)}U.useEffect(()=>{if(!(u.trim()===""||u===se.current))return Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{fn(u,s)},400),()=>clearTimeout(Q.current)},[u,s]);async function zo(z){z.preventDefault(),se.current=u,await fn(u,s)}async function Rr(z){if(!i||k.some(xe=>xe.id===z.id&&xe.media_type===(z.media_type||s)))return;const le={uid:i.uid,id:z.id,title:z.title||z.name,date:(z.release_date||z.first_air_date||"").slice(0,10),poster:z.poster_path?`https://image.tmdb.org/t/p/w200${z.poster_path}`:"https://placehold.co/120x170?text=No+Image",desc:z.overview||"No description.",watched:!1,archived:!1,media_type:z.media_type||s,createdAt:new Date().toISOString()};await fp(Mi(ut,"diary"),le);const fe=mh(Mi(ut,"diary"),Vm("uid","==",i.uid));let ge=(await oa(fe)).docs.map(xe=>({...xe.data(),docId:xe.id}));ge=ge.sort((xe,dt)=>new Date(dt.createdAt)-new Date(xe.createdAt)),M(ge),Rs(le),p([]),f("")}async function Ir(z){M(le=>le.filter(fe=>fe.docId!==z)),he(null);try{await iu(en(ut,"diary",z));const le=mh(Mi(ut,"diary"),Vm("uid","==",i.uid));let _e=(await oa(le)).docs.map(ge=>({...ge.data(),docId:ge.id}));_e=_e.sort((ge,xe)=>new Date(xe.createdAt)-new Date(ge.createdAt)),M(_e)}catch{window.alert("Failed to remove entry. Please try again.")}}async function Bi(z,le){const fe=!le,_e=fe;M(ge=>ge.map(xe=>xe.docId===z?{...xe,watched:fe,archived:_e}:xe)),he(ge=>ge&&ge.docId===z?{...ge,watched:fe,archived:_e}:ge);try{await Eo(en(ut,"diary",z),{watched:fe,archived:_e})}catch{M(xe=>xe.map(dt=>dt.docId===z?{...dt,watched:le,archived:le}:dt)),he(xe=>xe&&xe.docId===z?{...xe,watched:le,archived:le}:xe),window.alert("Failed to update watched status. Please try again.")}}async function Bo(z,le){M(fe=>fe.map(_e=>_e.docId===z?{..._e,archived:!le}:_e)),he(fe=>fe&&fe.docId===z?{...fe,archived:!le}:fe);try{await Eo(en(ut,"diary",z),{archived:!le})}catch{M(_e=>_e.map(ge=>ge.docId===z?{...ge,archived:le}:ge)),he(_e=>_e&&_e.docId===z?{..._e,archived:le}:_e),window.alert("Failed to update archive status. Please try again.")}}function Cr(z){window.alert(`Share this: ${z.title}`)}async function Is(){try{await e(),n("/")}catch{alert("Failed to sign out")}}async function Ta(){if(!ve.trim()){re("Display name cannot be empty.");return}ie(!0),re("");try{await M2(en(ut,"users",i.uid),{displayName:ve.trim()},{merge:!0}),He(ve.trim()),ae(!1);const z=await gh(en(ut,"users",i.uid));if(z.exists()){const le=z.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);He(le),Le(le)}}catch{re("Failed to update display name.")}ie(!1)}function mt(){Le(qe),ae(!0),re("")}function Ye(){ae(!1),re("")}async function dn(z){var le,fe,_e,ge,xe,dt;if(!z)return"";try{if(z.media_type==="movie"){const $t=await(await fetch(`${Kl}/movie/${z.id}/release_dates?api_key=${ho}`)).json(),rn=((le=$t.results)==null?void 0:le.find(ct=>ct.iso_3166_1===qm))||((fe=$t.results)==null?void 0:fe[0]);return((ge=(_e=rn==null?void 0:rn.release_dates)==null?void 0:_e.find(ct=>ct.certification))==null?void 0:ge.certification)||""}else if(z.media_type==="tv"){const $t=await(await fetch(`${Kl}/tv/${z.id}/content_ratings?api_key=${ho}`)).json(),rn=((xe=$t.results)==null?void 0:xe.find(Ze=>Ze.iso_3166_1===qm))||((dt=$t.results)==null?void 0:dt[0]);return(rn==null?void 0:rn.rating)||""}}catch{return""}return""}function Vt(z){he(z),Ae(""),dn(z).then(le=>Ae(le||""))}function ba({entry:z,providersMap:le,onClose:fe,onShare:_e,onToggleWatched:ge,onRemove:xe,onArchiveToggle:dt,diary:Cn,contentRating:$t}){if(!z)return null;const rn=le[z.id]||{},Ze=rn.flatrate||[],ct=rn.rent||[],yt=rn.buy||[],Xe=z;return AE.createPortal(b.jsx("div",{className:"dashboard-modal-overlay",onClick:fe,children:b.jsxs("div",{className:"dashboard-modal-content",onClick:Tt=>Tt.stopPropagation(),children:[b.jsx("button",{className:"dashboard-modal-close",onClick:fe,"aria-label":"Close modal",type:"button",children:""}),b.jsxs("div",{className:"dashboard-modal-body",children:[b.jsx("img",{className:"dashboard-diary-poster",src:Xe.poster_path?`https://image.tmdb.org/t/p/w300${Xe.poster_path}`:Xe.poster||"https://placehold.co/120x170?text=No+Image",alt:Xe.title,style:{marginBottom:"1rem"}}),b.jsx("div",{className:"dashboard-diary-movie-title",children:Xe.title}),b.jsxs("div",{className:"dashboard-diary-date",children:[Xe.release_date?Xe.release_date.slice(0,4):Xe.date||"",$t&&b.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:$t})]}),b.jsx("div",{className:"dashboard-diary-desc",children:Xe.overview||Xe.desc||""}),b.jsxs("div",{className:"dashboard-diary-providers-modal",children:[b.jsxs("div",{className:"dashboard-diary-providers-group",children:[b.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),b.jsx("div",{className:"dashboard-diary-providers-icons",children:Ze.length===0?b.jsx("span",{style:{color:"#888"},children:"N/A"}):Ze.map(Tt=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Tt.logo_path}`,alt:Tt.provider_name,title:Tt.provider_name,className:"dashboard-provider-icon-sm"},Tt.provider_id))})]}),b.jsxs("div",{className:"dashboard-diary-providers-group",children:[b.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),b.jsx("div",{className:"dashboard-diary-providers-icons",children:ct.length===0?b.jsx("span",{style:{color:"#888"},children:"N/A"}):ct.map(Tt=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Tt.logo_path}`,alt:Tt.provider_name,title:Tt.provider_name,className:"dashboard-provider-icon-sm"},Tt.provider_id))})]}),b.jsxs("div",{className:"dashboard-diary-providers-group",children:[b.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),b.jsx("div",{className:"dashboard-diary-providers-icons",children:yt.length===0?b.jsx("span",{style:{color:"#888"},children:"N/A"}):yt.map(Tt=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Tt.logo_path}`,alt:Tt.provider_name,title:Tt.provider_name,className:"dashboard-provider-icon-sm"},Tt.provider_id))})]})]}),z.media_type==="tv"&&(z.tmdbId||z.id)&&b.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:b.jsx(FM,{show:{...z,tmdbId:z.tmdbId||z.id}})}),b.jsxs("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:[b.jsx("button",{className:"dashboard-diary-share",onClick:()=>_e(Xe),title:"Share this diary entry with friends via link or social media",children:"SHARE"}),b.jsx("button",{className:Xe.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>ge(Xe.docId,Xe.watched),title:Xe.watched?"Mark as not watched":"Mark as watched",children:Xe.watched?"WATCHED":"UNWATCHED"}),b.jsx("button",{className:"dashboard-diary-archive",style:{background:z.archived?"#b2b2b2":"#25609c",color:z.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>dt(z.docId,z.archived),title:z.archived?"Move this entry back to active diary":"Archive this entry (hide from main diary)",children:z.archived?"Unarchive":"Archive"}),b.jsx("button",{className:"dashboard-diary-remove",onClick:()=>xe(Xe.docId),title:"Remove this diary entry permanently",children:"REMOVE"})]}),b.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[b.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),b.jsx(JM,{entryId:Xe.id})]})]})]})}),document.getElementById("modal-root"))}const qo=os.memo(ba);function qi(){const z={};return k.filter(le=>le.media_type===s).forEach(le=>{const fe=Y[le.id];fe&&[...fe.flatrate||[],...fe.rent||[],...fe.buy||[]].forEach(_e=>{z[_e.provider_id]=_e})}),Object.values(z)}const pi=x?k.filter(z=>{if(z.media_type!==s)return!1;const le=Y[z.id];return le?[...le.flatrate||[],...le.rent||[],...le.buy||[]].some(fe=>fe.provider_id===x.provider_id):!1}):k.filter(z=>z.media_type===s);function Hi({open:z,onClose:le,providers:fe,onSelect:_e}){return z?AE.createPortal(b.jsx("div",{className:"dashboard-modal-overlay",onClick:le,children:b.jsxs("div",{className:"dashboard-modal-content",onClick:ge=>ge.stopPropagation(),style:{maxWidth:440,padding:24},children:[b.jsx("button",{className:"dashboard-modal-close",onClick:le,"aria-label":"Close modal",type:"button",children:""}),b.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"All Providers"}),b.jsx("div",{style:{margin:"0 0 12px 0",color:"#8fc7ff",fontSize:"1.02rem",textAlign:"center",fontWeight:500},children:"View all providers. Click on a provider icon below to filter your diary and see which shows can be watched for that provider."}),b.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:fe.map(ge=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${ge.logo_path}`,alt:ge.provider_name,title:ge.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:x&&x.provider_id===ge.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>_e(ge)},ge.provider_id))}),x&&b.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>O(null),children:"Show All Entries"}),b.jsx("div",{style:{marginTop:24},children:pi.length===0?b.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):b.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:pi.map(ge=>b.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0003",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center"},children:[b.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:ge.poster,alt:ge.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),b.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:ge.title})]},ge.docId))})})]})}),document.getElementById("modal-root")):null}const En=k.filter(z=>!z.archived&&z.media_type===s),Fi=k.filter(z=>z.archived&&z.media_type===s);function gi(z){Me(z)}function Cs(z){Rr({id:z.id,title:z.title||z.name,poster_path:z.poster_path,release_date:z.release_date||z.first_air_date,overview:z.overview,media_type:pe}),Et(le=>le.filter(fe=>fe.id!==z.id))}function Ns(){const[z,le]=U.useState(!1);U.useEffect(()=>{function _e(){le(window.scrollY>300)}return window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)},[]);const fe=()=>{window.scrollTo({top:0,behavior:"smooth"})};return z?b.jsx("button",{onClick:fe,style:{position:"fixed",right:18,bottom:28,zIndex:9999,background:"rgba(37,96,156,0.93)",color:"#fff",border:"none",borderRadius:"50%",width:54,height:54,boxShadow:"0 3px 12px #0005",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,cursor:"pointer",touchAction:"manipulation"},"aria-label":"Back to top",className:"back-to-top-btn",children:b.jsx("span",{style:{fontSize:45,marginTop:-2},children:""})}):null}return b.jsxs("div",{className:"dashboard-bg",children:[b.jsx("style",{children:`
          .dashboard-trending-movie-title {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 2.7em;
            max-height: 2.7em;
            line-height: 1.35em;
            font-size: 1.07rem;
            font-weight: 600;
            color: #fff;
            margin: 0.7em 0 0.2em 0;
            text-align: center;
          }
          .dashboard-trending-desc {
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 6.75em;
            max-height: 6.75em;
            line-height: 1.35em;
            font-size: 0.98rem;
            color: #c7d0e0;
            margin-bottom: 1em;
            text-align: center;
          }
        `}),b.jsxs("div",{className:"dashboard-content-wrapper",children:[b.jsx("div",{className:"dashboard-banner",children:b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[b.jsx(cV,{size:48,style:{color:"#fff",marginBottom:12}}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[b.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),X?b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"text",value:ve,onChange:z=>Le(z.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:V,autoFocus:!0}),b.jsx("button",{onClick:Ta,disabled:V,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:b.jsx(oV,{})}),b.jsx("button",{onClick:Ye,disabled:V,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:b.jsx(uV,{})})]}):b.jsxs(b.Fragment,{children:[b.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:qe}),b.jsx("button",{onClick:mt,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:b.jsx(lV,{})})]})]}),ue&&b.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:ue}),b.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[b.jsx("button",{onClick:Is,style:{background:"#fff",color:"#18191d",fontWeight:700,fontSize:"1.1rem",borderRadius:8,border:"none",padding:"10px 32px",boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s"},children:"LOG OUT"}),jn!==void 0&&b.jsxs("span",{style:{color:jn?"limegreen":"tomato",fontWeight:600,marginRight:8},children:["[isAdmin: ",String(jn),"]"]}),jn&&b.jsx("button",{className:"dashboard-admin-btn",style:{background:"#25609c",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s"},onClick:()=>n("/admin"),children:"Admin Dashboard"})]})]})}),b.jsxs("div",{className:"dashboard-search-section",children:[b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),b.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),b.jsx("div",{className:"dashboard-search-instructions",children:"NEED INSTRUCTIONS?"}),b.jsxs("div",{className:"dashboard-search-toggle-row",children:[b.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),b.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),b.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:zo,children:[b.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows*",value:u,onChange:z=>f(z.target.value)}),b.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),b.jsxs("div",{className:"dashboard-search-results",children:[A&&b.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:A}),!A&&m.length>0&&b.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(z=>b.jsxs("div",{className:"dashboard-trending-card",children:[b.jsx("img",{src:z.poster_path?`https://image.tmdb.org/t/p/w200${z.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:z.title||z.name,className:"dashboard-trending-poster"}),b.jsx("div",{className:"dashboard-trending-movie-title",children:z.title||z.name}),b.jsx("div",{className:"dashboard-trending-year",children:(z.release_date||z.first_air_date||"").slice(0,4)}),b.jsx("div",{className:"dashboard-trending-desc",children:z.overview?z.overview.slice(0,90)+(z.overview.length>90?"":""):"No description."}),b.jsx("button",{className:"dashboard-trending-add",onClick:()=>Rr(z),children:k.some(le=>le.id===z.id)?"IN DIARY":"ADD TO DIARY"})]},z.id))})]})]}),b.jsxs("div",{className:"dashboard-diary-section",children:[b.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[b.jsx("button",{className:`dashboard-toggle${L?"":" active"}`,onClick:()=>C(!1),children:"My Diary"}),b.jsx("button",{className:`dashboard-toggle${L?" active":""}`,onClick:()=>C(!0),children:"Archived"})]}),b.jsx("div",{className:"dashboard-diary-providers-row",children:b.jsx("button",{className:"dashboard-providers-btn",onClick:()=>I(!0),title:"View all providers. Click on a provider icon to see which shows can be watched for that provider.",children:"ALL PROVIDERS"})}),L?Fi.length===0?b.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No archived entries."}):b.jsx("div",{className:"dashboard-diary-cards-row",children:Fi.map(z=>(D.current[z.docId]||(D.current[z.docId]=U.createRef()),b.jsxs("section",{ref:le=>D.current[z.docId]=le,className:"dashboard-diary-card collapsed",children:[b.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:b.jsx("img",{src:z.poster,alt:z.title,className:"dashboard-diary-poster collapsed"})}),b.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:z.title}),b.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Vt(z),children:["Show More ",b.jsx($E,{})]})]},z.docId)))}):En.length===0?b.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):b.jsx("div",{className:"dashboard-diary-cards-row",children:En.map(z=>(D.current[z.docId]||(D.current[z.docId]=U.createRef()),b.jsxs("section",{ref:le=>D.current[z.docId]=le,className:"dashboard-diary-card collapsed",children:[b.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:b.jsx("img",{src:z.poster,alt:z.title,className:"dashboard-diary-poster collapsed"})}),b.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:z.title}),b.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Vt(z),children:["Show More ",b.jsx($E,{})]})]},z.docId)))})]}),b.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),b.jsxs("div",{className:"dashboard-trending-section",children:[b.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",pe==="movie"?"Movies":"TV Shows"]}),b.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[b.jsx("button",{className:pe==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>gi("movie"),children:"Movies"}),b.jsx("button",{className:pe==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>gi("tv"),children:"TV Shows"})]}),b.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:it?b.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading"}):ei?b.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:ei}):be.filter(z=>!k.some(le=>le.id===z.id&&le.media_type===pe)).slice(0,10).map(z=>b.jsxs("div",{className:"dashboard-trending-card",children:[b.jsx("img",{src:z.poster_path?`https://image.tmdb.org/t/p/w200${z.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:z.title||z.name,className:"dashboard-trending-poster"}),b.jsx("div",{className:"dashboard-trending-movie-title",children:z.title||z.name}),b.jsx("div",{className:"dashboard-trending-year",children:(z.release_date||z.first_air_date||"").slice(0,4)}),b.jsx("div",{className:"dashboard-trending-desc",children:z.overview?z.overview.slice(0,90)+(z.overview.length>90?"":""):"No description."}),b.jsx("button",{className:"dashboard-trending-add",onClick:()=>Cs(z),children:"ADD TO DIARY"})]},z.id))})]})]}),ne&&b.jsx(qo,{entry:ne,providersMap:Y,onClose:()=>he(null),onShare:Cr,onToggleWatched:Bi,onRemove:Ir,onArchiveToggle:Bo,diary:k,contentRating:me}),b.jsx(Hi,{open:S,onClose:()=>{I(!1),O(null)},providers:qi(),onSelect:z=>O(z)}),b.jsx(Ns,{})]})}function fV(){const{currentUser:i}=Ss();return b.jsxs(FD,{children:[b.jsx(yo,{path:"/login",element:b.jsx(BM,{})}),b.jsx(yo,{path:"/signup",element:b.jsx(qM,{})}),b.jsx(yo,{path:"/admin",element:b.jsx(HM,{children:b.jsx(QM,{})})}),b.jsx(yo,{path:"/dashboard",element:b.jsx(hV,{})}),b.jsx(yo,{path:"/",element:i?b.jsx(Eg,{to:"/dashboard"}):b.jsx(ZM,{})})]})}BA.createRoot(document.getElementById("root")).render(b.jsx(U.StrictMode,{children:b.jsx(mx,{basename:"/showswatched2",children:b.jsx(zM,{children:b.jsx(fV,{})})})}));
