(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function WE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bm={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function UA(){if($_)return Ql;$_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Ql.Fragment=e,Ql.jsx=n,Ql.jsxs=n,Ql}var K_;function jA(){return K_||(K_=1,bm.exports=UA()),bm.exports}var T=jA(),wm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function zA(){if(Q_)return Pe;Q_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function I(k){return k===null||typeof k!="object"?null:(k=w&&k[w]||k["@@iterator"],typeof k=="function"?k:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Q={};function H(k,ie,ue){this.props=k,this.context=ie,this.refs=Q,this.updater=ue||O}H.prototype.isReactComponent={},H.prototype.setState=function(k,ie){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ie,"setState")},H.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Y(){}Y.prototype=H.prototype;function se(k,ie,ue){this.props=k,this.context=ie,this.refs=Q,this.updater=ue||O}var ne=se.prototype=new Y;ne.constructor=se,M(ne,H.prototype),ne.isPureReactComponent=!0;var fe=Array.isArray,me={H:null,A:null,T:null,S:null,V:null},Ae=Object.prototype.hasOwnProperty;function P(k,ie,ue,re,ge,Le){return ue=Le.ref,{$$typeof:i,type:k,key:ie,ref:ue!==void 0?ue:null,props:Le}}function S(k,ie){return P(k.type,ie,void 0,void 0,void 0,k.props)}function R(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function N(k){var ie={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return ie[ue]})}var x=/\/+/g;function V(k,ie){return typeof k=="object"&&k!==null&&k.key!=null?N(""+k.key):ie.toString(36)}function C(){}function xe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(C,C):(k.status="pending",k.then(function(ie){k.status==="pending"&&(k.status="fulfilled",k.value=ie)},function(ie){k.status==="pending"&&(k.status="rejected",k.reason=ie)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Oe(k,ie,ue,re,ge){var Le=typeof k;(Le==="undefined"||Le==="boolean")&&(k=null);var be=!1;if(k===null)be=!0;else switch(Le){case"bigint":case"string":case"number":be=!0;break;case"object":switch(k.$$typeof){case i:case e:be=!0;break;case E:return be=k._init,Oe(be(k._payload),ie,ue,re,ge)}}if(be)return ge=ge(k),be=re===""?"."+V(k,0):re,fe(ge)?(ue="",be!=null&&(ue=be.replace(x,"$&/")+"/"),Oe(ge,ie,ue,"",function(vn){return vn})):ge!=null&&(R(ge)&&(ge=S(ge,ue+(ge.key==null||k&&k.key===ge.key?"":(""+ge.key).replace(x,"$&/")+"/")+be)),ie.push(ge)),1;be=0;var Tt=re===""?".":re+":";if(fe(k))for(var st=0;st<k.length;st++)re=k[st],Le=Tt+V(re,st),be+=Oe(re,ie,ue,Le,ge);else if(st=I(k),typeof st=="function")for(k=st.call(k),st=0;!(re=k.next()).done;)re=re.value,Le=Tt+V(re,st++),be+=Oe(re,ie,ue,Le,ge);else if(Le==="object"){if(typeof k.then=="function")return Oe(xe(k),ie,ue,re,ge);throw ie=String(k),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return be}function X(k,ie,ue){if(k==null)return k;var re=[],ge=0;return Oe(k,re,"","",function(Le){return ie.call(ue,Le,ge++)}),re}function ae(k){if(k._status===-1){var ie=k._result;ie=ie(),ie.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=ie)}if(k._status===1)return k._result.default;throw k._result}var ve=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function je(){}return Pe.Children={map:X,forEach:function(k,ie,ue){X(k,function(){ie.apply(this,arguments)},ue)},count:function(k){var ie=0;return X(k,function(){ie++}),ie},toArray:function(k){return X(k,function(ie){return ie})||[]},only:function(k){if(!R(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Pe.Component=H,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=se,Pe.StrictMode=s,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return me.H.useMemoCache(k)}},Pe.cache=function(k){return function(){return k.apply(null,arguments)}},Pe.cloneElement=function(k,ie,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var re=M({},k.props),ge=k.key,Le=void 0;if(ie!=null)for(be in ie.ref!==void 0&&(Le=void 0),ie.key!==void 0&&(ge=""+ie.key),ie)!Ae.call(ie,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ie.ref===void 0||(re[be]=ie[be]);var be=arguments.length-2;if(be===1)re.children=ue;else if(1<be){for(var Tt=Array(be),st=0;st<be;st++)Tt[st]=arguments[st+2];re.children=Tt}return P(k.type,ge,void 0,void 0,Le,re)},Pe.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:u,_context:k},k},Pe.createElement=function(k,ie,ue){var re,ge={},Le=null;if(ie!=null)for(re in ie.key!==void 0&&(Le=""+ie.key),ie)Ae.call(ie,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ge[re]=ie[re]);var be=arguments.length-2;if(be===1)ge.children=ue;else if(1<be){for(var Tt=Array(be),st=0;st<be;st++)Tt[st]=arguments[st+2];ge.children=Tt}if(k&&k.defaultProps)for(re in be=k.defaultProps,be)ge[re]===void 0&&(ge[re]=be[re]);return P(k,Le,void 0,void 0,null,ge)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(k){return{$$typeof:m,render:k}},Pe.isValidElement=R,Pe.lazy=function(k){return{$$typeof:E,_payload:{_status:-1,_result:k},_init:ae}},Pe.memo=function(k,ie){return{$$typeof:g,type:k,compare:ie===void 0?null:ie}},Pe.startTransition=function(k){var ie=me.T,ue={};me.T=ue;try{var re=k(),ge=me.S;ge!==null&&ge(ue,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(je,ve)}catch(Le){ve(Le)}finally{me.T=ie}},Pe.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()},Pe.use=function(k){return me.H.use(k)},Pe.useActionState=function(k,ie,ue){return me.H.useActionState(k,ie,ue)},Pe.useCallback=function(k,ie){return me.H.useCallback(k,ie)},Pe.useContext=function(k){return me.H.useContext(k)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(k,ie){return me.H.useDeferredValue(k,ie)},Pe.useEffect=function(k,ie,ue){var re=me.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(k,ie)},Pe.useId=function(){return me.H.useId()},Pe.useImperativeHandle=function(k,ie,ue){return me.H.useImperativeHandle(k,ie,ue)},Pe.useInsertionEffect=function(k,ie){return me.H.useInsertionEffect(k,ie)},Pe.useLayoutEffect=function(k,ie){return me.H.useLayoutEffect(k,ie)},Pe.useMemo=function(k,ie){return me.H.useMemo(k,ie)},Pe.useOptimistic=function(k,ie){return me.H.useOptimistic(k,ie)},Pe.useReducer=function(k,ie,ue){return me.H.useReducer(k,ie,ue)},Pe.useRef=function(k){return me.H.useRef(k)},Pe.useState=function(k){return me.H.useState(k)},Pe.useSyncExternalStore=function(k,ie,ue){return me.H.useSyncExternalStore(k,ie,ue)},Pe.useTransition=function(){return me.H.useTransition()},Pe.version="19.1.0",Pe}var Y_;function Sp(){return Y_||(Y_=1,wm.exports=zA()),wm.exports}var L=Sp();const gs=WE(L);var Sm={exports:{}},Yl={},Am={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function BA(){return X_||(X_=1,function(i){function e(X,ae){var ve=X.length;X.push(ae);e:for(;0<ve;){var je=ve-1>>>1,k=X[je];if(0<o(k,ae))X[je]=ae,X[ve]=k,ve=je;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ae=X[0],ve=X.pop();if(ve!==ae){X[0]=ve;e:for(var je=0,k=X.length,ie=k>>>1;je<ie;){var ue=2*(je+1)-1,re=X[ue],ge=ue+1,Le=X[ge];if(0>o(re,ve))ge<k&&0>o(Le,re)?(X[je]=Le,X[ge]=ve,je=ge):(X[je]=re,X[ue]=ve,je=ue);else if(ge<k&&0>o(Le,ve))X[je]=Le,X[ge]=ve,je=ge;else break e}}return ae}function o(X,ae){var ve=X.sortIndex-ae.sortIndex;return ve!==0?ve:X.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,w=null,I=3,O=!1,M=!1,Q=!1,H=!1,Y=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function fe(X){for(var ae=n(g);ae!==null;){if(ae.callback===null)s(g);else if(ae.startTime<=X)s(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(g)}}function me(X){if(Q=!1,fe(X),!M)if(n(p)!==null)M=!0,Ae||(Ae=!0,V());else{var ae=n(g);ae!==null&&Oe(me,ae.startTime-X)}}var Ae=!1,P=-1,S=5,R=-1;function N(){return H?!0:!(i.unstable_now()-R<S)}function x(){if(H=!1,Ae){var X=i.unstable_now();R=X;var ae=!0;try{e:{M=!1,Q&&(Q=!1,se(P),P=-1),O=!0;var ve=I;try{t:{for(fe(X),w=n(p);w!==null&&!(w.expirationTime>X&&N());){var je=w.callback;if(typeof je=="function"){w.callback=null,I=w.priorityLevel;var k=je(w.expirationTime<=X);if(X=i.unstable_now(),typeof k=="function"){w.callback=k,fe(X),ae=!0;break t}w===n(p)&&s(p),fe(X)}else s(p);w=n(p)}if(w!==null)ae=!0;else{var ie=n(g);ie!==null&&Oe(me,ie.startTime-X),ae=!1}}break e}finally{w=null,I=ve,O=!1}ae=void 0}}finally{ae?V():Ae=!1}}}var V;if(typeof ne=="function")V=function(){ne(x)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,xe=C.port2;C.port1.onmessage=x,V=function(){xe.postMessage(null)}}else V=function(){Y(x,0)};function Oe(X,ae){P=Y(function(){X(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(X){switch(I){case 1:case 2:case 3:var ae=3;break;default:ae=I}var ve=I;I=ae;try{return X()}finally{I=ve}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ve=I;I=X;try{return ae()}finally{I=ve}},i.unstable_scheduleCallback=function(X,ae,ve){var je=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?je+ve:je):ve=je,X){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=ve+k,X={id:E++,callback:ae,priorityLevel:X,startTime:ve,expirationTime:k,sortIndex:-1},ve>je?(X.sortIndex=ve,e(g,X),n(p)===null&&X===n(g)&&(Q?(se(P),P=-1):Q=!0,Oe(me,ve-je))):(X.sortIndex=k,e(p,X),M||O||(M=!0,Ae||(Ae=!0,V()))),X},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(X){var ae=I;return function(){var ve=I;I=ae;try{return X.apply(this,arguments)}finally{I=ve}}}}(Rm)),Rm}var W_;function qA(){return W_||(W_=1,Am.exports=BA()),Am.exports}var Im={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function HA(){if(Z_)return sn;Z_=1;var i=Sp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:E}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,sn.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},sn.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},sn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},sn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},sn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,w=m(E,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:I,fetchPriority:O}):E==="script"&&s.d.X(p,{crossOrigin:w,integrity:I,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},sn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,w=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},sn.requestFormReset=function(p){s.d.r(p)},sn.unstable_batchedUpdates=function(p,g){return p(g)},sn.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},sn.useFormStatus=function(){return f.H.useHostTransitionStatus()},sn.version="19.1.0",sn}var J_;function ZE(){if(J_)return Im.exports;J_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=HA(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function FA(){if(e0)return Yl;e0=1;var i=qA(),e=Sp(),n=ZE();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=d;break}if(b===l){_=!0,l=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=h;break}if(b===l){_=!0,l=d,a=h;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case H:return"Profiler";case Q:return"StrictMode";case me:return"Suspense";case Ae:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case fe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return r=t.displayName||null,r!==null?r:xe(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return xe(t(r))}catch{}}return null}var Oe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},je=[],k=-1;function ie(t){return{current:t}}function ue(t){0>k||(t.current=je[k],je[k]=null,k--)}function re(t,r){k++,je[k]=t.current,t.current=r}var ge=ie(null),Le=ie(null),be=ie(null),Tt=ie(null);function st(t,r){switch(re(be,r),re(Le,t),re(ge,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?E_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=E_(r),t=T_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(ge),re(ge,t)}function vn(){ue(ge),ue(Le),ue(be)}function ei(t){t.memoizedState!==null&&re(Tt,t);var r=ge.current,a=T_(r,t.type);r!==a&&(re(Le,t),re(ge,a))}function In(t){Le.current===t&&(ue(ge),ue(Le)),Tt.current===t&&(ue(Tt),Hl._currentValue=ve)}var mi=Object.prototype.hasOwnProperty,pi=i.unstable_scheduleCallback,Hi=i.unstable_cancelCallback,Ds=i.unstable_shouldYield,Os=i.unstable_requestPaint,fn=i.unstable_now,$o=i.unstable_getCurrentPriorityLevel,Or=i.unstable_ImmediatePriority,Mr=i.unstable_UserBlockingPriority,Fi=i.unstable_NormalPriority,Ko=i.unstable_LowPriority,Vr=i.unstable_IdlePriority,Ms=i.log,Ia=i.unstable_setDisableYieldValue,mt=null,Je=null;function Qt(t){if(typeof Ms=="function"&&Ia(t),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(mt,t)}catch{}}var Bt=Math.clz32?Math.clz32:gi,Ca=Math.log,Qo=Math.LN2;function gi(t){return t>>>=0,t===0?32:31-(Ca(t)/Qo|0)|0}var Gi=256,yi=4194304;function _n(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $i(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=_n(l):(_&=b,_!==0?h=_n(_):a||(a=b&~t,a!==0&&(h=_n(a))))):(b=l&~d,b!==0?h=_n(b):_!==0?h=_n(_):a||(a=l&~t,a!==0&&(h=_n(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function Ki(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Vs(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(){var t=Gi;return Gi<<=1,(Gi&4194048)===0&&(Gi=256),t}function Pr(){var t=yi;return yi<<=1,(yi&62914560)===0&&(yi=4194304),t}function vi(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function jn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ks(t,r,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-Bt(a),ee=1<<W;b[W]=0,D[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var $=G[W];$!==null&&($.lane&=-536870913)}a&=~ee}l!==0&&j(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~r))}function j(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Bt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function oe(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Bt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function pe(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function _e(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ce(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:z_(t.type))}function Ne(t,r){var a=ae.p;try{return ae.p=t,r()}finally{ae.p=a}}var Ue=Math.random().toString(36).slice(2),ct="__reactFiber$"+Ue,ke="__reactProps$"+Ue,Ve="__reactContainer$"+Ue,Cn="__reactEvents$"+Ue,_i="__reactListeners$"+Ue,ti="__reactHandles$"+Ue,vt="__reactResources$"+Ue,pt="__reactMarker$"+Ue;function Lr(t){delete t[ct],delete t[ke],delete t[Cn],delete t[_i],delete t[ti]}function Qi(t){var r=t[ct];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Ve]||a[ct]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=A_(t);t!==null;){if(a=t[ct])return a;t=A_(t)}return r}t=a,a=t.parentNode}return null}function Ei(t){if(t=t[ct]||t[Ve]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ti(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function dn(t){var r=t[vt];return r||(r=t[vt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function At(t){t[pt]=!0}var Yo=new Set,xa={};function ni(t,r){Yi(t,r),Yi(t+"Capture",r)}function Yi(t,r){for(xa[t]=r,t=0;t<r.length;t++)Yo.add(r[t])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},Ps={};function Hu(t){return mi.call(Ps,t)?!0:mi.call(qu,t)?!1:Bu.test(t)?Ps[t]=!0:(qu[t]=!0,!1)}function Ur(t,r,a){if(Hu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function bi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Yt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Ls,Fu;function Xi(t){if(Ls===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ls=r&&r[1]||"",Fu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ls+t+Fu}var Na=!1;function Da(t,r){if(!t||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch($){var G=$}Reflect.construct(t,[],ee)}else{try{ee.call()}catch($){G=$}t.call(ee.prototype)}}else{try{throw Error()}catch($){G=$}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var D=_.split(`
`),F=b.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var W=`
`+D[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Xi(a):""}function Xo(t){switch(t.tag){case 26:case 27:case 5:return Xi(t.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 15:return Da(t.type,!1);case 11:return Da(t.type.render,!1);case 1:return Da(t.type,!0);case 31:return Xi("Activity");default:return""}}function Oa(t){try{var r="";do r+=Xo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Rf(t){var r=Wo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ma(t){t._valueTracker||(t._valueTracker=Rf(t))}function Zo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Wo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Us(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var If=/[\n"\\]/g;function xt(t){return t.replace(If,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function xn(t,r,a,l,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mn(r)):t.value!==""+mn(r)&&(t.value=""+mn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?jr(t,_,mn(r)):a!=null?jr(t,_,mn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+mn(b):t.removeAttribute("name")}function js(t,r,a,l,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+mn(a):"",r=r!=null?""+mn(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function jr(t,r,a){r==="number"&&Us(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Wi(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function at(t,r,a){if(r!=null&&(r=""+mn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mn(a):""}function zs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function zn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Bs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Bs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Jo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Gu(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&Gu(t,d,r[d])}function el(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Va(t){return xf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Zi=null;function Bn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ji=null,er=null;function tl(t){var r=Ei(t);if(r&&(t=r.stateNode)){var a=t[ke]||null;e:switch(t=r.stateNode,r.type){case"input":if(xn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[ke]||null;if(!h)throw Error(s(90));xn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Zo(l)}break e;case"textarea":at(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Wi(t,!!a.multiple,r,!1)}}}var wi=!1;function $u(t,r,a){if(wi)return t(r,a);wi=!0;try{var l=t(r);return l}finally{if(wi=!1,(Ji!==null||er!==null)&&(jc(),Ji&&(r=Ji,t=er,er=Ji=null,tl(r),t)))for(r=0;r<t.length;r++)tl(t[r])}}function qs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[ke]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(ii)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{qn=!1}var Si=null,zr=null,tr=null;function nl(){if(tr)return tr;var t,r=zr,a=r.length,l,h="value"in Si?Si.value:Si.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===h[d-l];l++);return tr=h.slice(t,1<l?1-l:void 0)}function Ai(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ri(){return!0}function il(){return!1}function qt(t){function r(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ri:il,this.isPropagationStopped=il,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),r}var tt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ka=qt(tt),Fs=E({},tt,{view:0,detail:0}),Ku=qt(Fs),Pa,La,Ii,Gs=E({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(Pa=t.screenX-Ii.screenX,La=t.screenY-Ii.screenY):La=Pa=0,Ii=t),Pa)},movementY:function(t){return"movementY"in t?t.movementY:La}}),Hn=qt(Gs),Qu=E({},Gs,{dataTransfer:0}),Nf=qt(Qu),$s=E({},Fs,{relatedTarget:0}),Ua=qt($s),rl=E({},tt,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=qt(rl),Yu=E({},tt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),za=qt(Yu),Df=E({},tt,{data:0}),sl=qt(Df),Ks={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wu[t])?!!r[t]:!1}function Qs(){return al}var Zu=E({},Fs,{key:function(t){if(t.key){var r=Ks[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ai(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(t){return t.type==="keypress"?Ai(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ai(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ba=qt(Zu),Ju=E({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=qt(Ju),nr=E({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),ec=qt(nr),tc=E({},tt,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=qt(tc),ic=E({},Gs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=qt(ic),pn=E({},tt,{newState:0,oldState:0}),rc=qt(pn),sc=[9,13,27,32],Ci=ii&&"CompositionEvent"in window,c=null;ii&&"documentMode"in document&&(c=document.documentMode);var y=ii&&"TextEvent"in window&&!c,v=ii&&(!Ci||c&&8<c&&11>=c),A=" ",B=!1;function K(t,r){switch(t){case"keyup":return sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qe=!1;function Vt(t,r){switch(t){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(B=!0,A);case"textInput":return t=r.data,t===A&&B?null:t;default:return null}}function Ye(t,r){if(Qe)return t==="compositionend"||!Ci&&K(t,r)?(t=nl(),tr=zr=Si=null,Qe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ht[t.type]:r==="textarea"}function ir(t,r,a,l){Ji?er?er.push(l):er=[l]:Ji=l,r=Gc(r,"onChange"),0<r.length&&(a=new ka("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Xt=null,xi=null;function ll(t){p_(t,0)}function ac(t){var r=Ti(t);if(Zo(r))return t}function Pg(t,r){if(t==="change")return r}var Lg=!1;if(ii){var Of;if(ii){var Mf="oninput"in document;if(!Mf){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Mf=typeof Ug.oninput=="function"}Of=Mf}else Of=!1;Lg=Of&&(!document.documentMode||9<document.documentMode)}function jg(){Xt&&(Xt.detachEvent("onpropertychange",zg),xi=Xt=null)}function zg(t){if(t.propertyName==="value"&&ac(xi)){var r=[];ir(r,xi,t,Bn(t)),$u(ll,r)}}function mS(t,r,a){t==="focusin"?(jg(),Xt=r,xi=a,Xt.attachEvent("onpropertychange",zg)):t==="focusout"&&jg()}function pS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ac(xi)}function gS(t,r){if(t==="click")return ac(r)}function yS(t,r){if(t==="input"||t==="change")return ac(r)}function vS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Nn=typeof Object.is=="function"?Object.is:vS;function ul(t,r){if(Nn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!mi.call(r,h)||!Nn(t[h],r[h]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,r){var a=Bg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bg(a)}}function Hg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Hg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Fg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Us(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Us(t.document)}return r}function Vf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var _S=ii&&"documentMode"in document&&11>=document.documentMode,Ha=null,kf=null,cl=null,Pf=!1;function Gg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pf||Ha==null||Ha!==Us(l)||(l=Ha,"selectionStart"in l&&Vf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ul(cl,l)||(cl=l,l=Gc(kf,"onSelect"),0<l.length&&(r=new ka("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ha)))}function Ys(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Fa={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Lf={},$g={};ii&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Xs(t){if(Lf[t])return Lf[t];if(!Fa[t])return t;var r=Fa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in $g)return Lf[t]=r[a];return t}var Kg=Xs("animationend"),Qg=Xs("animationiteration"),Yg=Xs("animationstart"),ES=Xs("transitionrun"),TS=Xs("transitionstart"),bS=Xs("transitioncancel"),Xg=Xs("transitionend"),Wg=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function ri(t,r){Wg.set(t,r),ni(r,[t])}var Zg=new WeakMap;function Fn(t,r){if(typeof t=="object"&&t!==null){var a=Zg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Oa(r)},Zg.set(t,r),r)}return{value:t,source:r,stack:Oa(r)}}var Gn=[],Ga=0,jf=0;function oc(){for(var t=Ga,r=jf=Ga=0;r<t;){var a=Gn[r];Gn[r++]=null;var l=Gn[r];Gn[r++]=null;var h=Gn[r];Gn[r++]=null;var d=Gn[r];if(Gn[r++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Jg(a,h,d)}}function lc(t,r,a,l){Gn[Ga++]=t,Gn[Ga++]=r,Gn[Ga++]=a,Gn[Ga++]=l,jf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function zf(t,r,a,l){return lc(t,r,a,l),uc(t)}function $a(t,r){return lc(t,null,null,r),uc(t)}function Jg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Bt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function uc(t){if(50<kl)throw kl=0,$d=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ka={};function wS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new wS(t,r,a,l)}function Bf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rr(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ey(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function cc(t,r,a,l,h,d){var _=0;if(l=t,typeof t=="function")Bf(t)&&(_=1);else if(typeof t=="string")_=AA(t,a,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Dn(31,a,r,h),t.elementType=R,t.lanes=d,t;case M:return Ws(a.children,h,d,r);case Q:_=8,h|=24;break;case H:return t=Dn(12,a,r,h|2),t.elementType=H,t.lanes=d,t;case me:return t=Dn(13,a,r,h),t.elementType=me,t.lanes=d,t;case Ae:return t=Dn(19,a,r,h),t.elementType=Ae,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case ne:_=10;break e;case se:_=9;break e;case fe:_=11;break e;case P:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Dn(_,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Ws(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function qf(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function Hf(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Qa=[],Ya=0,hc=null,fc=0,$n=[],Kn=0,Zs=null,sr=1,ar="";function Js(t,r){Qa[Ya++]=fc,Qa[Ya++]=hc,hc=t,fc=r}function ty(t,r,a){$n[Kn++]=sr,$n[Kn++]=ar,$n[Kn++]=Zs,Zs=t;var l=sr;t=ar;var h=32-Bt(l)-1;l&=~(1<<h),a+=1;var d=32-Bt(r)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,sr=1<<32-Bt(r)+h|a<<h|l,ar=d+t}else sr=1<<d|a<<h|l,ar=t}function Ff(t){t.return!==null&&(Js(t,1),ty(t,1,0))}function Gf(t){for(;t===hc;)hc=Qa[--Ya],Qa[Ya]=null,fc=Qa[--Ya],Qa[Ya]=null;for(;t===Zs;)Zs=$n[--Kn],$n[Kn]=null,ar=$n[--Kn],$n[Kn]=null,sr=$n[--Kn],$n[Kn]=null}var gn=null,bt=null,et=!1,ea=null,Ni=!1,$f=Error(s(519));function ta(t){var r=Error(s(418,""));throw dl(Fn(r,t)),$f}function ny(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[ct]=t,r[ke]=l,a){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)Ge(Ll[a],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Ge("invalid",r),js(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ma(r);break;case"select":Ge("invalid",r);break;case"textarea":Ge("invalid",r),zs(r,l.value,l.defaultValue,l.children),Ma(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||__(r.textContent,a)?(l.popover!=null&&(Ge("beforetoggle",r),Ge("toggle",r)),l.onScroll!=null&&Ge("scroll",r),l.onScrollEnd!=null&&Ge("scrollend",r),l.onClick!=null&&(r.onclick=$c),r=!0):r=!1,r||ta(t)}function iy(t){for(gn=t.return;gn;)switch(gn.tag){case 5:case 13:Ni=!1;return;case 27:case 3:Ni=!0;return;default:gn=gn.return}}function hl(t){if(t!==gn)return!1;if(!et)return iy(t),et=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||lm(t.type,t.memoizedProps)),a=!a),a&&bt&&ta(t),iy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){bt=ai(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}bt=null}}else r===27?(r=bt,ns(t.type)?(t=fm,fm=null,bt=t):bt=r):bt=gn?ai(t.stateNode.nextSibling):null;return!0}function fl(){bt=gn=null,et=!1}function ry(){var t=ea;return t!==null&&(bn===null?bn=t:bn.push.apply(bn,t),ea=null),t}function dl(t){ea===null?ea=[t]:ea.push(t)}var Kf=ie(null),na=null,or=null;function Br(t,r,a){re(Kf,r._currentValue),r._currentValue=a}function lr(t){t._currentValue=Kf.current,ue(Kf)}function Qf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Yf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var D=0;D<r.length;D++)if(b.context===r[D]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Qf(d.return,a,t),l||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Qf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ml(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=h.type;Nn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Tt.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}h=h.return}t!==null&&Yf(r,t,a,l),r.flags|=262144}function dc(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ia(t){na=t,or=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return sy(na,t)}function mc(t,r){return na===null&&ia(t),sy(t,r)}function sy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},or===null){if(t===null)throw Error(s(308));or=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else or=or.next=r;return a}var SS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},AS=i.unstable_scheduleCallback,RS=i.unstable_NormalPriority,Pt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new SS,data:new Map,refCount:0}}function pl(t){t.refCount--,t.refCount===0&&AS(RS,function(){t.controller.abort()})}var gl=null,Wf=0,Xa=0,Wa=null;function IS(t,r){if(gl===null){var a=gl=[];Wf=0,Xa=Jd(),Wa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wf++,r.then(ay,ay),r}function ay(){if(--Wf===0&&gl!==null){Wa!==null&&(Wa.status="fulfilled");var t=gl;gl=null,Xa=0,Wa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function CS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var oy=X.S;X.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&IS(t,r),oy!==null&&oy(t,r)};var ra=ie(null);function Zf(){var t=ra.current;return t!==null?t:ft.pooledCache}function pc(t,r){r===null?re(ra,ra.current):re(ra,r.pool)}function ly(){var t=Zf();return t===null?null:{parent:Pt._currentValue,pool:t}}var yl=Error(s(460)),uy=Error(s(474)),gc=Error(s(542)),Jf={then:function(){}};function cy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yc(){}function hy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(yc,yc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,dy(t),t;default:if(typeof r.status=="string")r.then(yc,yc);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,dy(t),t}throw vl=r,yl}}var vl=null;function fy(){if(vl===null)throw Error(s(459));var t=vl;return vl=null,t}function dy(t){if(t===yl||t===gc)throw Error(s(483))}var qr=!1;function ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Hr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(it&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=uc(t),Jg(t,null,a),r}return lc(t,l,r,a),uc(t)}function _l(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,oe(t,a)}}function nd(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var id=!1;function El(){if(id){var t=Wa;if(t!==null)throw t}}function Tl(t,r,a,l){id=!1;var h=t.updateQueue;qr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var D=b,F=D.next;D.next=null,_===null?d=F:_.next=F,_=D;var W=t.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==_&&(b===null?W.firstBaseUpdate=F:b.next=F,W.lastBaseUpdate=D))}if(d!==null){var ee=h.baseState;_=0,W=F=D=null,b=d;do{var G=b.lane&-536870913,$=G!==b.lane;if($?(Xe&G)===G:(l&G)===G){G!==0&&G===Xa&&(id=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ie=t,we=b;G=r;var ut=a;switch(we.tag){case 1:if(Ie=we.payload,typeof Ie=="function"){ee=Ie.call(ut,ee,G);break e}ee=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=we.payload,G=typeof Ie=="function"?Ie.call(ut,ee,G):Ie,G==null)break e;ee=E({},ee,G);break e;case 2:qr=!0}}G=b.callback,G!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[G]:$.push(G))}else $={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(F=W=$,D=ee):W=W.next=$,_|=G;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;$=b,b=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);W===null&&(D=ee),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=W,d===null&&(h.shared.lanes=0),Zr|=_,t.lanes=_,t.memoizedState=ee}}function my(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function py(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)my(a[t],r)}var Za=ie(null),vc=ie(0);function gy(t,r){t=pr,re(vc,t),re(Za,r),pr=t|r.baseLanes}function rd(){re(vc,pr),re(Za,Za.current)}function sd(){pr=vc.current,ue(Za),ue(vc)}var Gr=0,ze=null,ot=null,Nt=null,_c=!1,Ja=!1,sa=!1,Ec=0,bl=0,eo=null,xS=0;function Rt(){throw Error(s(321))}function ad(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Nn(t[a],r[a]))return!1;return!0}function od(t,r,a,l,h,d){return Gr=d,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=t===null||t.memoizedState===null?Jy:ev,sa=!1,d=a(l,h),sa=!1,Ja&&(d=vy(r,a,l,h)),yy(t),d}function yy(t){X.H=Rc;var r=ot!==null&&ot.next!==null;if(Gr=0,Nt=ot=ze=null,_c=!1,bl=0,eo=null,r)throw Error(s(300));t===null||Ft||(t=t.dependencies,t!==null&&dc(t)&&(Ft=!0))}function vy(t,r,a,l){ze=t;var h=0;do{if(Ja&&(eo=null),bl=0,Ja=!1,25<=h)throw Error(s(301));if(h+=1,Nt=ot=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=PS,d=r(a,l)}while(Ja);return d}function NS(){var t=X.H,r=t.useState()[0];return r=typeof r.then=="function"?wl(r):r,t=t.useState()[0],(ot!==null?ot.memoizedState:null)!==t&&(ze.flags|=1024),r}function ld(){var t=Ec!==0;return Ec=0,t}function ud(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function cd(t){if(_c){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}_c=!1}Gr=0,Nt=ot=ze=null,Ja=!1,bl=Ec=0,eo=null}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ze.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Dt(){if(ot===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var r=Nt===null?ze.memoizedState:Nt.next;if(r!==null)Nt=r,ot=t;else{if(t===null)throw ze.alternate===null?Error(s(467)):Error(s(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Nt===null?ze.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function hd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var r=bl;return bl+=1,eo===null&&(eo=[]),t=hy(eo,t,r),r=ze,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Jy:ev),t}function Tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===ne)return rn(t)}throw Error(s(438,String(t)))}function fd(t){var r=null,a=ze.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=hd(),ze.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=N;return r.index++,a}function ur(t,r){return typeof r=="function"?r(t):r}function bc(t){var r=Dt();return dd(r,ot,t)}function dd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var b=_=null,D=null,F=r,W=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Xe&ee)===ee:(Gr&ee)===ee){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Xa&&(W=!0);else if((Gr&G)===G){F=F.next,G===Xa&&(W=!0);continue}else ee={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=ee,_=d):D=D.next=ee,ze.lanes|=G,Zr|=G;ee=F.action,sa&&a(d,ee),d=F.hasEagerState?F.eagerState:a(d,ee)}else G={lane:ee,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=G,_=d):D=D.next=G,ze.lanes|=ee,Zr|=ee;F=F.next}while(F!==null&&F!==r);if(D===null?_=d:D.next=b,!Nn(d,t.memoizedState)&&(Ft=!0,W&&(a=Wa,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=D,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function md(t){var r=Dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);Nn(d,r.memoizedState)||(Ft=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function _y(t,r,a){var l=ze,h=Dt(),d=et;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!Nn((ot||h).memoizedState,a);_&&(h.memoizedState=a,Ft=!0),h=h.queue;var b=by.bind(null,l,h,t);if(Sl(2048,8,b,[t]),h.getSnapshot!==r||_||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,to(9,wc(),Ty.bind(null,l,h,a,r),null),ft===null)throw Error(s(349));d||(Gr&124)!==0||Ey(l,r,a)}return a}function Ey(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=ze.updateQueue,r===null?(r=hd(),ze.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Ty(t,r,a,l){r.value=a,r.getSnapshot=l,wy(r)&&Sy(t)}function by(t,r,a){return a(function(){wy(r)&&Sy(t)})}function wy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Nn(t,a)}catch{return!0}}function Sy(t){var r=$a(t,2);r!==null&&Pn(r,t,2)}function pd(t){var r=En();if(typeof t=="function"){var a=t;if(t=a(),sa){Qt(!0);try{a()}finally{Qt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:t},r}function Ay(t,r,a,l){return t.baseState=a,dd(t,ot,typeof l=="function"?l:ur)}function DS(t,r,a,l,h){if(Ac(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,Ry(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Ry(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=X.T,_={};X.T=_;try{var b=a(h,l),D=X.S;D!==null&&D(_,b),Iy(t,r,b)}catch(F){gd(t,r,F)}finally{X.T=d}}else try{d=a(h,l),Iy(t,r,d)}catch(F){gd(t,r,F)}}function Iy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Cy(t,r,l)},function(l){return gd(t,r,l)}):Cy(t,r,a)}function Cy(t,r,a){r.status="fulfilled",r.value=a,xy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Ry(t,a)))}function gd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,xy(r),r=r.next;while(r!==l)}t.action=null}function xy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Ny(t,r){return r}function Dy(t,r){if(et){var a=ft.formState;if(a!==null){e:{var l=ze;if(et){if(bt){t:{for(var h=bt,d=Ni;h.nodeType!==8;){if(!d){h=null;break t}if(h=ai(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){bt=ai(h.nextSibling),l=h.data==="F!";break e}}ta(l)}l=!1}l&&(r=a[0])}}return a=En(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:r},a.queue=l,a=Xy.bind(null,ze,l),l.dispatch=a,l=pd(!1),d=Td.bind(null,ze,!1,l.queue),l=En(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=DS.bind(null,ze,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function Oy(t){var r=Dt();return My(r,ot,t)}function My(t,r,a){if(r=dd(t,r,Ny)[0],t=bc(ur)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wl(r)}catch(_){throw _===yl?gc:_}else l=r;r=Dt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(ze.flags|=2048,to(9,wc(),OS.bind(null,h,a),null)),[l,d,t]}function OS(t,r){t.action=r}function Vy(t){var r=Dt(),a=ot;if(a!==null)return My(r,a,t);Dt(),r=r.memoizedState,a=Dt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function to(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=ze.updateQueue,r===null&&(r=hd(),ze.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function wc(){return{destroy:void 0,resource:void 0}}function ky(){return Dt().memoizedState}function Sc(t,r,a,l){var h=En();l=l===void 0?null:l,ze.flags|=t,h.memoizedState=to(1|r,wc(),a,l)}function Sl(t,r,a,l){var h=Dt();l=l===void 0?null:l;var d=h.memoizedState.inst;ot!==null&&l!==null&&ad(l,ot.memoizedState.deps)?h.memoizedState=to(r,d,a,l):(ze.flags|=t,h.memoizedState=to(1|r,d,a,l))}function Py(t,r){Sc(8390656,8,t,r)}function Ly(t,r){Sl(2048,8,t,r)}function Uy(t,r){return Sl(4,2,t,r)}function jy(t,r){return Sl(4,4,t,r)}function zy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function By(t,r,a){a=a!=null?a.concat([t]):null,Sl(4,4,zy.bind(null,r,t),a)}function yd(){}function qy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&ad(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Hy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&ad(r,l[1]))return l[0];if(l=t(),sa){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[l,r],l}function vd(t,r,a){return a===void 0||(Gr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=$v(),ze.lanes|=t,Zr|=t,a)}function Fy(t,r,a,l){return Nn(a,r)?a:Za.current!==null?(t=vd(t,a,l),Nn(t,r)||(Ft=!0),t):(Gr&42)===0?(Ft=!0,t.memoizedState=a):(t=$v(),ze.lanes|=t,Zr|=t,r)}function Gy(t,r,a,l,h){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=X.T,b={};X.T=b,Td(t,!1,r,a);try{var D=h(),F=X.S;if(F!==null&&F(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=CS(D,l);Al(t,r,W,kn(t))}else Al(t,r,l,kn(t))}catch(ee){Al(t,r,{then:function(){},status:"rejected",reason:ee},kn())}finally{ae.p=d,X.T=_}}function MS(){}function _d(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=$y(t).queue;Gy(t,h,r,ve,a===null?MS:function(){return Ky(t),a(l)})}function $y(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ky(t){var r=$y(t).next.queue;Al(t,r,{},kn())}function Ed(){return rn(Hl)}function Qy(){return Dt().memoizedState}function Yy(){return Dt().memoizedState}function VS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();t=Hr(a);var l=Fr(r,t,a);l!==null&&(Pn(l,r,a),_l(l,r,a)),r={cache:Xf()},t.payload=r;return}r=r.return}}function kS(t,r,a){var l=kn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(t)?Wy(r,a):(a=zf(t,r,a,l),a!==null&&(Pn(a,t,l),Zy(a,r,l)))}function Xy(t,r,a){var l=kn();Al(t,r,a,l)}function Al(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ac(t))Wy(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,Nn(b,_))return lc(t,r,h,0),ft===null&&oc(),!1}catch{}finally{}if(a=zf(t,r,h,l),a!==null)return Pn(a,t,l),Zy(a,r,l),!0}return!1}function Td(t,r,a,l){if(l={lane:2,revertLane:Jd(),action:l,hasEagerState:!1,eagerState:null,next:null},Ac(t)){if(r)throw Error(s(479))}else r=zf(t,a,l,2),r!==null&&Pn(r,t,2)}function Ac(t){var r=t.alternate;return t===ze||r!==null&&r===ze}function Wy(t,r){Ja=_c=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Zy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,oe(t,a)}}var Rc={readContext:rn,use:Tc,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},Jy={readContext:rn,use:Tc,useCallback:function(t,r){return En().memoizedState=[t,r===void 0?null:r],t},useContext:rn,useEffect:Py,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Sc(4194308,4,zy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Sc(4194308,4,t,r)},useInsertionEffect:function(t,r){Sc(4,2,t,r)},useMemo:function(t,r){var a=En();r=r===void 0?null:r;var l=t();if(sa){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=En();if(a!==void 0){var h=a(r);if(sa){Qt(!0);try{a(r)}finally{Qt(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=kS.bind(null,ze,t),[l.memoizedState,t]},useRef:function(t){var r=En();return t={current:t},r.memoizedState=t},useState:function(t){t=pd(t);var r=t.queue,a=Xy.bind(null,ze,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:yd,useDeferredValue:function(t,r){var a=En();return vd(a,t,r)},useTransition:function(){var t=pd(!1);return t=Gy.bind(null,ze,t.queue,!0,!1),En().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=ze,h=En();if(et){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ft===null)throw Error(s(349));(Xe&124)!==0||Ey(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Py(by.bind(null,l,d,t),[t]),l.flags|=2048,to(9,wc(),Ty.bind(null,l,d,a,r),null),a},useId:function(){var t=En(),r=ft.identifierPrefix;if(et){var a=ar,l=sr;a=(l&~(1<<32-Bt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=Ec++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=xS++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:Ed,useFormState:Dy,useActionState:Dy,useOptimistic:function(t){var r=En();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Td.bind(null,ze,!0,a),a.dispatch=r,[t,r]},useMemoCache:fd,useCacheRefresh:function(){return En().memoizedState=VS.bind(null,ze)}},ev={readContext:rn,use:Tc,useCallback:qy,useContext:rn,useEffect:Ly,useImperativeHandle:By,useInsertionEffect:Uy,useLayoutEffect:jy,useMemo:Hy,useReducer:bc,useRef:ky,useState:function(){return bc(ur)},useDebugValue:yd,useDeferredValue:function(t,r){var a=Dt();return Fy(a,ot.memoizedState,t,r)},useTransition:function(){var t=bc(ur)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:Ed,useFormState:Oy,useActionState:Oy,useOptimistic:function(t,r){var a=Dt();return Ay(a,ot,t,r)},useMemoCache:fd,useCacheRefresh:Yy},PS={readContext:rn,use:Tc,useCallback:qy,useContext:rn,useEffect:Ly,useImperativeHandle:By,useInsertionEffect:Uy,useLayoutEffect:jy,useMemo:Hy,useReducer:md,useRef:ky,useState:function(){return md(ur)},useDebugValue:yd,useDeferredValue:function(t,r){var a=Dt();return ot===null?vd(a,t,r):Fy(a,ot.memoizedState,t,r)},useTransition:function(){var t=md(ur)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:Ed,useFormState:Vy,useActionState:Vy,useOptimistic:function(t,r){var a=Dt();return ot!==null?Ay(a,ot,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:fd,useCacheRefresh:Yy},no=null,Rl=0;function Ic(t){var r=Rl;return Rl+=1,no===null&&(no=[]),hy(no,t,r)}function Il(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Cc(t,r){throw r.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function tv(t){var r=t._init;return r(t._payload)}function nv(t){function r(z,U){if(t){var q=z.deletions;q===null?(z.deletions=[U],z.flags|=16):q.push(U)}}function a(z,U){if(!t)return null;for(;U!==null;)r(z,U),U=U.sibling;return null}function l(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function h(z,U){return z=rr(z,U),z.index=0,z.sibling=null,z}function d(z,U,q){return z.index=q,t?(q=z.alternate,q!==null?(q=q.index,q<U?(z.flags|=67108866,U):q):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function _(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,U,q,Z){return U===null||U.tag!==6?(U=qf(q,z.mode,Z),U.return=z,U):(U=h(U,q),U.return=z,U)}function D(z,U,q,Z){var ye=q.type;return ye===M?W(z,U,q.props.children,Z,q.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&tv(ye)===U.type)?(U=h(U,q.props),Il(U,q),U.return=z,U):(U=cc(q.type,q.key,q.props,null,z.mode,Z),Il(U,q),U.return=z,U)}function F(z,U,q,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=Hf(q,z.mode,Z),U.return=z,U):(U=h(U,q.children||[]),U.return=z,U)}function W(z,U,q,Z,ye){return U===null||U.tag!==7?(U=Ws(q,z.mode,Z,ye),U.return=z,U):(U=h(U,q),U.return=z,U)}function ee(z,U,q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=qf(""+U,z.mode,q),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return q=cc(U.type,U.key,U.props,null,z.mode,q),Il(q,U),q.return=z,q;case O:return U=Hf(U,z.mode,q),U.return=z,U;case S:var Z=U._init;return U=Z(U._payload),ee(z,U,q)}if(Oe(U)||V(U))return U=Ws(U,z.mode,q,null),U.return=z,U;if(typeof U.then=="function")return ee(z,Ic(U),q);if(U.$$typeof===ne)return ee(z,mc(z,U),q);Cc(z,U)}return null}function G(z,U,q,Z){var ye=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:b(z,U,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return q.key===ye?D(z,U,q,Z):null;case O:return q.key===ye?F(z,U,q,Z):null;case S:return ye=q._init,q=ye(q._payload),G(z,U,q,Z)}if(Oe(q)||V(q))return ye!==null?null:W(z,U,q,Z,null);if(typeof q.then=="function")return G(z,U,Ic(q),Z);if(q.$$typeof===ne)return G(z,U,mc(z,q),Z);Cc(z,q)}return null}function $(z,U,q,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(q)||null,b(U,z,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return z=z.get(Z.key===null?q:Z.key)||null,D(U,z,Z,ye);case O:return z=z.get(Z.key===null?q:Z.key)||null,F(U,z,Z,ye);case S:var qe=Z._init;return Z=qe(Z._payload),$(z,U,q,Z,ye)}if(Oe(Z)||V(Z))return z=z.get(q)||null,W(U,z,Z,ye,null);if(typeof Z.then=="function")return $(z,U,q,Ic(Z),ye);if(Z.$$typeof===ne)return $(z,U,q,mc(U,Z),ye);Cc(U,Z)}return null}function Ie(z,U,q,Z){for(var ye=null,qe=null,Ee=U,Se=U=0,$t=null;Ee!==null&&Se<q.length;Se++){Ee.index>Se?($t=Ee,Ee=null):$t=Ee.sibling;var Ze=G(z,Ee,q[Se],Z);if(Ze===null){Ee===null&&(Ee=$t);break}t&&Ee&&Ze.alternate===null&&r(z,Ee),U=d(Ze,U,Se),qe===null?ye=Ze:qe.sibling=Ze,qe=Ze,Ee=$t}if(Se===q.length)return a(z,Ee),et&&Js(z,Se),ye;if(Ee===null){for(;Se<q.length;Se++)Ee=ee(z,q[Se],Z),Ee!==null&&(U=d(Ee,U,Se),qe===null?ye=Ee:qe.sibling=Ee,qe=Ee);return et&&Js(z,Se),ye}for(Ee=l(Ee);Se<q.length;Se++)$t=$(Ee,z,Se,q[Se],Z),$t!==null&&(t&&$t.alternate!==null&&Ee.delete($t.key===null?Se:$t.key),U=d($t,U,Se),qe===null?ye=$t:qe.sibling=$t,qe=$t);return t&&Ee.forEach(function(os){return r(z,os)}),et&&Js(z,Se),ye}function we(z,U,q,Z){if(q==null)throw Error(s(151));for(var ye=null,qe=null,Ee=U,Se=U=0,$t=null,Ze=q.next();Ee!==null&&!Ze.done;Se++,Ze=q.next()){Ee.index>Se?($t=Ee,Ee=null):$t=Ee.sibling;var os=G(z,Ee,Ze.value,Z);if(os===null){Ee===null&&(Ee=$t);break}t&&Ee&&os.alternate===null&&r(z,Ee),U=d(os,U,Se),qe===null?ye=os:qe.sibling=os,qe=os,Ee=$t}if(Ze.done)return a(z,Ee),et&&Js(z,Se),ye;if(Ee===null){for(;!Ze.done;Se++,Ze=q.next())Ze=ee(z,Ze.value,Z),Ze!==null&&(U=d(Ze,U,Se),qe===null?ye=Ze:qe.sibling=Ze,qe=Ze);return et&&Js(z,Se),ye}for(Ee=l(Ee);!Ze.done;Se++,Ze=q.next())Ze=$(Ee,z,Se,Ze.value,Z),Ze!==null&&(t&&Ze.alternate!==null&&Ee.delete(Ze.key===null?Se:Ze.key),U=d(Ze,U,Se),qe===null?ye=Ze:qe.sibling=Ze,qe=Ze);return t&&Ee.forEach(function(LA){return r(z,LA)}),et&&Js(z,Se),ye}function ut(z,U,q,Z){if(typeof q=="object"&&q!==null&&q.type===M&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case I:e:{for(var ye=q.key;U!==null;){if(U.key===ye){if(ye=q.type,ye===M){if(U.tag===7){a(z,U.sibling),Z=h(U,q.props.children),Z.return=z,z=Z;break e}}else if(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&tv(ye)===U.type){a(z,U.sibling),Z=h(U,q.props),Il(Z,q),Z.return=z,z=Z;break e}a(z,U);break}else r(z,U);U=U.sibling}q.type===M?(Z=Ws(q.props.children,z.mode,Z,q.key),Z.return=z,z=Z):(Z=cc(q.type,q.key,q.props,null,z.mode,Z),Il(Z,q),Z.return=z,z=Z)}return _(z);case O:e:{for(ye=q.key;U!==null;){if(U.key===ye)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){a(z,U.sibling),Z=h(U,q.children||[]),Z.return=z,z=Z;break e}else{a(z,U);break}else r(z,U);U=U.sibling}Z=Hf(q,z.mode,Z),Z.return=z,z=Z}return _(z);case S:return ye=q._init,q=ye(q._payload),ut(z,U,q,Z)}if(Oe(q))return Ie(z,U,q,Z);if(V(q)){if(ye=V(q),typeof ye!="function")throw Error(s(150));return q=ye.call(q),we(z,U,q,Z)}if(typeof q.then=="function")return ut(z,U,Ic(q),Z);if(q.$$typeof===ne)return ut(z,U,mc(z,q),Z);Cc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,U!==null&&U.tag===6?(a(z,U.sibling),Z=h(U,q),Z.return=z,z=Z):(a(z,U),Z=qf(q,z.mode,Z),Z.return=z,z=Z),_(z)):a(z,U)}return function(z,U,q,Z){try{Rl=0;var ye=ut(z,U,q,Z);return no=null,ye}catch(Ee){if(Ee===yl||Ee===gc)throw Ee;var qe=Dn(29,Ee,null,z.mode);return qe.lanes=Z,qe.return=z,qe}finally{}}}var io=nv(!0),iv=nv(!1),Qn=ie(null),Di=null;function $r(t){var r=t.alternate;re(Lt,Lt.current&1),re(Qn,t),Di===null&&(r===null||Za.current!==null||r.memoizedState!==null)&&(Di=t)}function rv(t){if(t.tag===22){if(re(Lt,Lt.current),re(Qn,t),Di===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Di=t)}}else Kr()}function Kr(){re(Lt,Lt.current),re(Qn,Qn.current)}function cr(t){ue(Qn),Di===t&&(Di=null),ue(Lt)}var Lt=ie(0);function xc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function bd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var wd={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Hr(l);h.payload=r,a!=null&&(h.callback=a),r=Fr(t,h,l),r!==null&&(Pn(r,t,l),_l(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Hr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Fr(t,h,l),r!==null&&(Pn(r,t,l),_l(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=kn(),l=Hr(a);l.tag=2,r!=null&&(l.callback=r),r=Fr(t,l,a),r!==null&&(Pn(r,t,a),_l(r,t,a))}};function sv(t,r,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):r.prototype&&r.prototype.isPureReactComponent?!ul(a,l)||!ul(h,d):!0}function av(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&wd.enqueueReplaceState(r,r.state,null)}function aa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function ov(t){Nc(t)}function lv(t){console.error(t)}function uv(t){Nc(t)}function Dc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function cv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sd(t,r,a){return a=Hr(a),a.tag=3,a.payload={element:null},a.callback=function(){Dc(t,r)},a}function hv(t){return t=Hr(t),t.tag=3,t}function fv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){cv(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){cv(r,a,l),typeof h!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function LS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ml(r,a,h,!0),a=Qn.current,a!==null){switch(a.tag){case 13:return Di===null?Qd():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Jf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Xd(t,l,h)),!1;case 22:return a.flags|=65536,l===Jf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Xd(t,l,h)),!1}throw Error(s(435,a.tag))}return Xd(t,l,h),Qd(),!1}if(et)return r=Qn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==$f&&(t=Error(s(422),{cause:l}),dl(Fn(t,a)))):(l!==$f&&(r=Error(s(423),{cause:l}),dl(Fn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Fn(l,a),h=Sd(t.stateNode,l,h),nd(t,h),wt!==4&&(wt=2)),!1;var d=Error(s(520),{cause:l});if(d=Fn(d,a),Vl===null?Vl=[d]:Vl.push(d),wt!==4&&(wt=2),r===null)return!0;l=Fn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Sd(a.stateNode,l,t),nd(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Jr===null||!Jr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=hv(h),fv(h,t,a,l),nd(a,h),!1}a=a.return}while(a!==null);return!1}var dv=Error(s(461)),Ft=!1;function Wt(t,r,a,l){r.child=t===null?iv(r,null,a,l):io(r,t.child,a,l)}function mv(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return ia(r),l=od(t,r,a,_,d,h),b=ld(),t!==null&&!Ft?(ud(t,r,h),hr(t,r,h)):(et&&b&&Ff(r),r.flags|=1,Wt(t,r,l,h),r.child)}function pv(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Bf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,gv(t,r,d,l,h)):(t=cc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Od(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(_,l)&&t.ref===r.ref)return hr(t,r,h)}return r.flags|=1,t=rr(d,l),t.ref=r.ref,t.return=r,r.child=t}function gv(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(ul(d,l)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=l=d,Od(t,h))(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,hr(t,r,h)}return Ad(t,r,a,l,h)}function yv(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return vv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,d!==null?d.cachePool:null),d!==null?gy(r,d):rd(),rv(r);else return r.lanes=r.childLanes=536870912,vv(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(pc(r,d.cachePool),gy(r,d),Kr(),r.memoizedState=null):(t!==null&&pc(r,null),rd(),Kr());return Wt(t,r,h,a),r.child}function vv(t,r,a,l){var h=Zf();return h=h===null?null:{parent:Pt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&pc(r,null),rd(),rv(r),t!==null&&ml(t,r,l,!0),null}function Oc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Ad(t,r,a,l,h){return ia(r),a=od(t,r,a,l,void 0,h),l=ld(),t!==null&&!Ft?(ud(t,r,h),hr(t,r,h)):(et&&l&&Ff(r),r.flags|=1,Wt(t,r,a,h),r.child)}function _v(t,r,a,l,h,d){return ia(r),r.updateQueue=null,a=vy(r,l,a,h),yy(t),l=ld(),t!==null&&!Ft?(ud(t,r,d),hr(t,r,d)):(et&&l&&Ff(r),r.flags|=1,Wt(t,r,a,d),r.child)}function Ev(t,r,a,l,h){if(ia(r),r.stateNode===null){var d=Ka,_=a.contextType;typeof _=="object"&&_!==null&&(d=rn(_)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=wd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},ed(r),_=a.contextType,d.context=typeof _=="object"&&_!==null?rn(_):Ka,d.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(bd(r,a,_,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&wd.enqueueReplaceState(d,d.state,null),Tl(r,l,d,h),El(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var b=r.memoizedProps,D=aa(a,b);d.props=D;var F=d.context,W=a.contextType;_=Ka,typeof W=="object"&&W!==null&&(_=rn(W));var ee=a.getDerivedStateFromProps;W=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||F!==_)&&av(r,d,l,_),qr=!1;var G=r.memoizedState;d.state=G,Tl(r,l,d,h),El(),F=r.memoizedState,b||G!==F||qr?(typeof ee=="function"&&(bd(r,a,ee,l),F=r.memoizedState),(D=qr||sv(r,a,D,l,G,F,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),d.props=l,d.state=F,d.context=_,l=D):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,td(t,r),_=r.memoizedProps,W=aa(a,_),d.props=W,ee=r.pendingProps,G=d.context,F=a.contextType,D=Ka,typeof F=="object"&&F!==null&&(D=rn(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==ee||G!==D)&&av(r,d,l,D),qr=!1,G=r.memoizedState,d.state=G,Tl(r,l,d,h),El();var $=r.memoizedState;_!==ee||G!==$||qr||t!==null&&t.dependencies!==null&&dc(t.dependencies)?(typeof b=="function"&&(bd(r,a,b,l),$=r.memoizedState),(W=qr||sv(r,a,W,l,G,$,D)||t!==null&&t.dependencies!==null&&dc(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,D)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),d.props=l,d.state=$,d.context=D,l=W):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,Oc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=io(r,t.child,null,h),r.child=io(r,null,a,h)):Wt(t,r,a,h),r.memoizedState=d.state,t=r.child):t=hr(t,r,h),t}function Tv(t,r,a,l){return fl(),r.flags|=256,Wt(t,r,a,l),r.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(t){return{baseLanes:t,cachePool:ly()}}function Cd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Yn),t}function bv(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(et){if(h?$r(r):Kr(),et){var b=bt,D;if(D=b){e:{for(D=b,b=Ni;D.nodeType!==8;){if(!b){b=null;break e}if(D=ai(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(r.memoizedState={dehydrated:b,treeContext:Zs!==null?{id:sr,overflow:ar}:null,retryLane:536870912,hydrationErrors:null},D=Dn(18,null,null,0),D.stateNode=b,D.return=r,r.child=D,gn=r,bt=null,D=!0):D=!1}D||ta(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return hm(b)?r.lanes=32:r.lanes=536870912,null;cr(r)}return b=l.children,l=l.fallback,h?(Kr(),h=r.mode,b=Mc({mode:"hidden",children:b},h),l=Ws(l,h,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,h=r.child,h.memoizedState=Id(a),h.childLanes=Cd(t,_,a),r.memoizedState=Rd,l):($r(r),xd(r,b))}if(D=t.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(d)r.flags&256?($r(r),r.flags&=-257,r=Nd(t,r,a)):r.memoizedState!==null?(Kr(),r.child=t.child,r.flags|=128,r=null):(Kr(),h=l.fallback,b=r.mode,l=Mc({mode:"visible",children:l.children},b),h=Ws(h,b,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,io(r,t.child,null,a),l=r.child,l.memoizedState=Id(a),l.childLanes=Cd(t,_,a),r.memoizedState=Rd,r=h);else if($r(r),hm(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,dl({value:l,source:null,stack:null}),r=Nd(t,r,a)}else if(Ft||ml(t,r,a,!1),_=(a&t.childLanes)!==0,Ft||_){if(_=ft,_!==null&&(l=a&-a,l=(l&42)!==0?1:pe(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,$a(t,l),Pn(_,t,l),dv;b.data==="$?"||Qd(),r=Nd(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,bt=ai(b.nextSibling),gn=r,et=!0,ea=null,Ni=!1,t!==null&&($n[Kn++]=sr,$n[Kn++]=ar,$n[Kn++]=Zs,sr=t.id,ar=t.overflow,Zs=r),r=xd(r,l.children),r.flags|=4096);return r}return h?(Kr(),h=l.fallback,b=r.mode,D=t.child,F=D.sibling,l=rr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?h=rr(F,h):(h=Ws(h,b,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,b=t.child.memoizedState,b===null?b=Id(a):(D=b.cachePool,D!==null?(F=Pt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=ly(),b={baseLanes:b.baseLanes|a,cachePool:D}),h.memoizedState=b,h.childLanes=Cd(t,_,a),r.memoizedState=Rd,l):($r(r),a=t.child,t=a.sibling,a=rr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function xd(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=Dn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nd(t,r,a){return io(r,t.child,null,a),t=xd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function wv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Qf(t.return,r,a)}function Dd(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Sv(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(Wt(t,r,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wv(t,a,r);else if(t.tag===19)wv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(re(Lt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&xc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Dd(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&xc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Dd(r,!0,a,null,d);break;case"together":Dd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function hr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Zr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ml(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=rr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=rr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Od(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&dc(t)))}function US(t,r,a){switch(r.tag){case 3:st(r,r.stateNode.containerInfo),Br(r,Pt,t.memoizedState.cache),fl();break;case 27:case 5:ei(r);break;case 4:st(r,r.stateNode.containerInfo);break;case 10:Br(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?($r(r),r.flags|=128,null):(a&r.child.childLanes)!==0?bv(t,r,a):($r(r),t=hr(t,r,a),t!==null?t.sibling:null);$r(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ml(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Sv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Lt,Lt.current),l)break;return null;case 22:case 23:return r.lanes=0,yv(t,r,a);case 24:Br(r,Pt,t.memoizedState.cache)}return hr(t,r,a)}function Av(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ft=!0;else{if(!Od(t,a)&&(r.flags&128)===0)return Ft=!1,US(t,r,a);Ft=(t.flags&131072)!==0}else Ft=!1,et&&(r.flags&1048576)!==0&&ty(r,fc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Bf(l)?(t=aa(l,t),r.tag=1,r=Ev(null,r,l,t,a)):(r.tag=0,r=Ad(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===fe){r.tag=11,r=mv(null,r,l,t,a);break e}else if(h===P){r.tag=14,r=pv(null,r,l,t,a);break e}}throw r=xe(l)||l,Error(s(306,r,""))}}return r;case 0:return Ad(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=aa(l,r.pendingProps),Ev(t,r,l,h,a);case 3:e:{if(st(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,td(t,r),Tl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Br(r,Pt,l),l!==d.cache&&Yf(r,[Pt],a,!0),El(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=Tv(t,r,l,a);break e}else if(l!==h){h=Fn(Error(s(424)),r),dl(h),r=Tv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=ai(t.firstChild),gn=r,et=!0,ea=null,Ni=!0,a=iv(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===h){r=hr(t,r,a);break e}Wt(t,r,l,a)}r=r.child}return r;case 26:return Oc(t,r),t===null?(a=x_(r.type,null,r.pendingProps,null))?r.memoizedState=a:et||(a=r.type,t=r.pendingProps,l=Kc(be.current).createElement(a),l[ct]=r,l[ke]=t,Jt(l,a,t),At(l),r.stateNode=l):r.memoizedState=x_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ei(r),t===null&&et&&(l=r.stateNode=R_(r.type,r.pendingProps,be.current),gn=r,Ni=!0,h=bt,ns(r.type)?(fm=h,bt=ai(l.firstChild)):bt=h),Wt(t,r,r.pendingProps.children,a),Oc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&et&&((h=l=bt)&&(l=fA(l,r.type,r.pendingProps,Ni),l!==null?(r.stateNode=l,gn=r,bt=ai(l.firstChild),Ni=!1,h=!0):h=!1),h||ta(r)),ei(r),h=r.type,d=r.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,lm(h,d)?l=null:_!==null&&lm(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=od(t,r,NS,null,null,a),Hl._currentValue=h),Oc(t,r),Wt(t,r,l,a),r.child;case 6:return t===null&&et&&((t=a=bt)&&(a=dA(a,r.pendingProps,Ni),a!==null?(r.stateNode=a,gn=r,bt=null,t=!0):t=!1),t||ta(r)),null;case 13:return bv(t,r,a);case 4:return st(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=io(r,null,l,a):Wt(t,r,l,a),r.child;case 11:return mv(t,r,r.type,r.pendingProps,a);case 7:return Wt(t,r,r.pendingProps,a),r.child;case 8:return Wt(t,r,r.pendingProps.children,a),r.child;case 12:return Wt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Br(r,r.type,l.value),Wt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,ia(r),h=rn(h),l=l(h),r.flags|=1,Wt(t,r,l,a),r.child;case 14:return pv(t,r,r.type,r.pendingProps,a);case 15:return gv(t,r,r.type,r.pendingProps,a);case 19:return Sv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Mc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=rr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return yv(t,r,a);case 24:return ia(r),l=rn(Pt),t===null?(h=Zf(),h===null&&(h=ft,d=Xf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},ed(r),Br(r,Pt,h)):((t.lanes&a)!==0&&(td(t,r),Tl(r,null,null,a),El()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Br(r,Pt,l)):(l=d.cache,Br(r,Pt,l),l!==h.cache&&Yf(r,[Pt],a,!0))),Wt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function fr(t){t.flags|=4}function Rv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!V_(r)){if(r=Qn.current,r!==null&&((Xe&4194048)===Xe?Di!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||r!==Di))throw vl=Jf,uy;t.flags|=8192}}function Vc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Pr():536870912,t.lanes|=r,oo|=r)}function Cl(t,r){if(!et)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _t(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function jS(t,r,a){var l=r.pendingProps;switch(Gf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(r),null;case 1:return _t(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),lr(Pt),vn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hl(r)?fr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ry())),_t(r),null;case 26:return a=r.memoizedState,t===null?(fr(r),a!==null?(_t(r),Rv(r,a)):(_t(r),r.flags&=-16777217)):a?a!==t.memoizedState?(fr(r),_t(r),Rv(r,a)):(_t(r),r.flags&=-16777217):(t.memoizedProps!==l&&fr(r),_t(r),r.flags&=-16777217),null;case 27:In(r),a=be.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return _t(r),null}t=ge.current,hl(r)?ny(r):(t=R_(h,l,a),r.stateNode=t,fr(r))}return _t(r),null;case 5:if(In(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return _t(r),null}if(t=ge.current,hl(r))ny(r);else{switch(h=Kc(be.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[ct]=r,t[ke]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Jt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&fr(r)}}return _t(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=be.current,hl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=gn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[ct]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||__(t.nodeValue,a)),t||ta(r)}else t=Kc(t).createTextNode(l),t[ct]=r,r.stateNode=t}return _t(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=hl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ct]=r}else fl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;_t(r),h=!1}else h=ry(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(cr(r),r):(cr(r),null)}if(cr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Vc(r,r.updateQueue),_t(r),null;case 4:return vn(),t===null&&im(r.stateNode.containerInfo),_t(r),null;case 10:return lr(r.type),_t(r),null;case 19:if(ue(Lt),h=r.memoizedState,h===null)return _t(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)Cl(h,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=xc(t),d!==null){for(r.flags|=128,Cl(h,!1),t=d.updateQueue,r.updateQueue=t,Vc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)ey(a,t),a=a.sibling;return re(Lt,Lt.current&1|2),r.child}t=t.sibling}h.tail!==null&&fn()>Lc&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304)}else{if(!l)if(t=xc(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Vc(r,t),Cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!et)return _t(r),null}else 2*fn()-h.renderingStartTime>Lc&&a!==536870912&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=fn(),r.sibling=null,t=Lt.current,re(Lt,l?t&1|2:t&1),r):(_t(r),null);case 22:case 23:return cr(r),sd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(_t(r),r.subtreeFlags&6&&(r.flags|=8192)):_t(r),a=r.updateQueue,a!==null&&Vc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ue(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),lr(Pt),_t(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function zS(t,r){switch(Gf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return lr(Pt),vn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return In(r),null;case 13:if(cr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));fl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ue(Lt),null;case 4:return vn(),null;case 10:return lr(r.type),null;case 22:case 23:return cr(r),sd(),t!==null&&ue(ra),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return lr(Pt),null;case 25:return null;default:return null}}function Iv(t,r){switch(Gf(r),r.tag){case 3:lr(Pt),vn();break;case 26:case 27:case 5:In(r);break;case 4:vn();break;case 13:cr(r);break;case 19:ue(Lt);break;case 10:lr(r.type);break;case 22:case 23:cr(r),sd(),t!==null&&ue(ra);break;case 24:lr(Pt)}}function xl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){ht(r,r.return,b)}}function Qr(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=r;var D=a,F=b;try{F()}catch(W){ht(h,D,W)}}}l=l.next}while(l!==d)}}catch(W){ht(r,r.return,W)}}function Cv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{py(r,a)}catch(l){ht(t,t.return,l)}}}function xv(t,r,a){a.props=aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ht(t,r,l)}}function Nl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ht(t,r,h)}}function Oi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ht(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ht(t,r,h)}else a.current=null}function Nv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ht(t,t.return,h)}}function Md(t,r,a){try{var l=t.stateNode;oA(l,t.type,a,r),l[ke]=r}catch(h){ht(t,t.return,h)}}function Dv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ns(t.type)||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ns(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$c));else if(l!==4&&(l===27&&ns(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(kd(t,r,a),t=t.sibling;t!==null;)kd(t,r,a),t=t.sibling}function kc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&ns(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(kc(t,r,a),t=t.sibling;t!==null;)kc(t,r,a),t=t.sibling}function Ov(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Jt(r,l,a),r[ct]=t,r[ke]=a}catch(d){ht(t,t.return,d)}}var dr=!1,It=!1,Pd=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function BS(t,r){if(t=t.containerInfo,am=Jc,t=Fg(t),Vf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,D=-1,F=0,W=0,ee=t,G=null;t:for(;;){for(var $;ee!==a||h!==0&&ee.nodeType!==3||(b=_+h),ee!==d||l!==0&&ee.nodeType!==3||(D=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),($=ee.firstChild)!==null;)G=ee,ee=$;for(;;){if(ee===t)break t;if(G===a&&++F===h&&(b=_),G===d&&++W===l&&(D=_),($=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=$}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:t,selectionRange:a},Jc=!1,Gt=r;Gt!==null;)if(r=Gt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Gt=t;else for(;Gt!==null;){switch(r=Gt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ie=aa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ie,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){ht(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)cm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Gt=t;break}Gt=r.return}}function Vv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(t,a),l&4&&xl(5,a);break;case 1:if(Yr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){ht(a,a.return,_)}else{var h=aa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ht(a,a.return,_)}}l&64&&Cv(a),l&512&&Nl(a,a.return);break;case 3:if(Yr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{py(t,r)}catch(_){ht(a,a.return,_)}}break;case 27:r===null&&l&4&&Ov(a);case 26:case 5:Yr(t,a),r===null&&l&4&&Nv(a),l&512&&Nl(a,a.return);break;case 12:Yr(t,a);break;case 13:Yr(t,a),l&4&&Lv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=XS.bind(null,a),mA(t,a))));break;case 22:if(l=a.memoizedState!==null||dr,!l){r=r!==null&&r.memoizedState!==null||It,h=dr;var d=It;dr=l,(It=r)&&!d?Xr(t,a,(a.subtreeFlags&8772)!==0):Yr(t,a),dr=h,It=d}break;case 30:break;default:Yr(t,a)}}function kv(t){var r=t.alternate;r!==null&&(t.alternate=null,kv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Lr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gt=null,Tn=!1;function mr(t,r,a){for(a=a.child;a!==null;)Pv(t,r,a),a=a.sibling}function Pv(t,r,a){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:It||Oi(a,r),mr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:It||Oi(a,r);var l=gt,h=Tn;ns(a.type)&&(gt=a.stateNode,Tn=!1),mr(t,r,a),jl(a.stateNode),gt=l,Tn=h;break;case 5:It||Oi(a,r);case 6:if(l=gt,h=Tn,gt=null,mr(t,r,a),gt=l,Tn=h,gt!==null)if(Tn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(a.stateNode)}catch(d){ht(a,r,d)}else try{gt.removeChild(a.stateNode)}catch(d){ht(a,r,d)}break;case 18:gt!==null&&(Tn?(t=gt,S_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Kl(t)):S_(gt,a.stateNode));break;case 4:l=gt,h=Tn,gt=a.stateNode.containerInfo,Tn=!0,mr(t,r,a),gt=l,Tn=h;break;case 0:case 11:case 14:case 15:It||Qr(2,a,r),It||Qr(4,a,r),mr(t,r,a);break;case 1:It||(Oi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&xv(a,r,l)),mr(t,r,a);break;case 21:mr(t,r,a);break;case 22:It=(l=It)||a.memoizedState!==null,mr(t,r,a),It=l;break;default:mr(t,r,a)}}function Lv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(a){ht(r,r.return,a)}}function qS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Mv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Mv),r;default:throw Error(s(435,t.tag))}}function Ld(t,r){var a=qS(t);r.forEach(function(l){var h=WS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function On(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=r,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(ns(b.type)){gt=b.stateNode,Tn=!1;break e}break;case 5:gt=b.stateNode,Tn=!1;break e;case 3:case 4:gt=b.stateNode.containerInfo,Tn=!0;break e}b=b.return}if(gt===null)throw Error(s(160));Pv(d,_,h),gt=null,Tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Uv(r,t),r=r.sibling}var si=null;function Uv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Mn(t),l&4&&(Qr(3,t,t.return),xl(3,t),Qr(5,t,t.return));break;case 1:On(r,t),Mn(t),l&512&&(It||a===null||Oi(a,a.return)),l&64&&dr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=si;if(On(r,t),Mn(t),l&512&&(It||a===null||Oi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[pt]||d[ct]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Jt(d,l,a),d[ct]=t,At(d),l=d;break e;case"link":var _=O_("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(l),Jt(d,l,a),h.head.appendChild(d);break;case"meta":if(_=O_("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(l),Jt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[ct]=t,At(d),l=d}t.stateNode=l}else M_(h,t.type,t.stateNode);else t.stateNode=D_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?M_(h,t.type,t.stateNode):D_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Md(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(r,t),Mn(t),l&512&&(It||a===null||Oi(a,a.return)),a!==null&&l&4&&Md(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(r,t),Mn(t),l&512&&(It||a===null||Oi(a,a.return)),t.flags&32){h=t.stateNode;try{zn(h,"")}catch($){ht(t,t.return,$)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Md(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Pd=!0);break;case 6:if(On(r,t),Mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch($){ht(t,t.return,$)}}break;case 3:if(Xc=null,h=si,si=Qc(r.containerInfo),On(r,t),si=h,Mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch($){ht(t,t.return,$)}Pd&&(Pd=!1,jv(t));break;case 4:l=si,si=Qc(t.stateNode.containerInfo),On(r,t),Mn(t),si=l;break;case 12:On(r,t),Mn(t);break;case 13:On(r,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hd=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ld(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=dr,W=It;if(dr=F||h,It=W||D,On(r,t),It=W,dr=F,Mn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||D||dr||It||oa(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(d=D.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=D.stateNode;var ee=D.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){ht(D,D.return,$)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch($){ht(D,D.return,$)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ld(t,a))));break;case 19:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ld(t,l)));break;case 30:break;case 21:break;default:On(r,t),Mn(t)}}function Mn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Dv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Vd(t);kc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(zn(_,""),a.flags&=-33);var b=Vd(t);kc(t,b,_);break;case 3:case 4:var D=a.stateNode.containerInfo,F=Vd(t);kd(t,F,D);break;default:throw Error(s(161))}}catch(W){ht(t,t.return,W)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function jv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;jv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Yr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Vv(t,r.alternate,r),r=r.sibling}function oa(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Qr(4,r,r.return),oa(r);break;case 1:Oi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&xv(r,r.return,a),oa(r);break;case 27:jl(r.stateNode);case 26:case 5:Oi(r,r.return),oa(r);break;case 22:r.memoizedState===null&&oa(r);break;case 30:oa(r);break;default:oa(r)}t=t.sibling}}function Xr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,_=d.flags;switch(d.tag){case 0:case 11:case 15:Xr(h,d,a),xl(4,d);break;case 1:if(Xr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){ht(l,l.return,F)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)my(D[h],b)}catch(F){ht(l,l.return,F)}}a&&_&64&&Cv(d),Nl(d,d.return);break;case 27:Ov(d);case 26:case 5:Xr(h,d,a),a&&l===null&&_&4&&Nv(d),Nl(d,d.return);break;case 12:Xr(h,d,a);break;case 13:Xr(h,d,a),a&&_&4&&Lv(h,d);break;case 22:d.memoizedState===null&&Xr(h,d,a),Nl(d,d.return);break;case 30:break;default:Xr(h,d,a)}r=r.sibling}}function Ud(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&pl(a))}function jd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t))}function Mi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zv(t,r,a,l),r=r.sibling}function zv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Mi(t,r,a,l),h&2048&&xl(9,r);break;case 1:Mi(t,r,a,l);break;case 3:Mi(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t)));break;case 12:if(h&2048){Mi(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ht(r,r.return,D)}}else Mi(t,r,a,l);break;case 13:Mi(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,_=r.alternate,r.memoizedState!==null?d._visibility&2?Mi(t,r,a,l):Dl(t,r):d._visibility&2?Mi(t,r,a,l):(d._visibility|=2,ro(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&Ud(_,r);break;case 24:Mi(t,r,a,l),h&2048&&jd(r.alternate,r);break;default:Mi(t,r,a,l)}}function ro(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,_=r,b=a,D=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:ro(d,_,b,D,h),xl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?ro(d,_,b,D,h):Dl(d,_):(W._visibility|=2,ro(d,_,b,D,h)),h&&F&2048&&Ud(_.alternate,_);break;case 24:ro(d,_,b,D,h),h&&F&2048&&jd(_.alternate,_);break;default:ro(d,_,b,D,h)}r=r.sibling}}function Dl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Dl(a,l),h&2048&&Ud(l.alternate,l);break;case 24:Dl(a,l),h&2048&&jd(l.alternate,l);break;default:Dl(a,l)}r=r.sibling}}var Ol=8192;function so(t){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)Bv(t),t=t.sibling}function Bv(t){switch(t.tag){case 26:so(t),t.flags&Ol&&t.memoizedState!==null&&IA(si,t.memoizedState,t.memoizedProps);break;case 5:so(t);break;case 3:case 4:var r=si;si=Qc(t.stateNode.containerInfo),so(t),si=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ol,Ol=16777216,so(t),Ol=r):so(t));break;default:so(t)}}function qv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ml(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Fv(l,t)}qv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hv(t),t=t.sibling}function Hv(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&Qr(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Pc(t)):Ml(t);break;default:Ml(t)}}function Pc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Fv(l,t)}qv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Qr(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}t=t.sibling}}function Fv(t,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Qr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var h=l.sibling,d=l.return;if(kv(l),l===a){Gt=null;break e}if(h!==null){h.return=d,Gt=h;break e}Gt=d}}}var HS={getCacheForType:function(t){var r=rn(Pt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},FS=typeof WeakMap=="function"?WeakMap:Map,it=0,ft=null,Fe=null,Xe=0,rt=0,Vn=null,Wr=!1,ao=!1,zd=!1,pr=0,wt=0,Zr=0,la=0,Bd=0,Yn=0,oo=0,Vl=null,bn=null,qd=!1,Hd=0,Lc=1/0,Uc=null,Jr=null,Zt=0,es=null,lo=null,uo=0,Fd=0,Gd=null,Gv=null,kl=0,$d=null;function kn(){if((it&2)!==0&&Xe!==0)return Xe&-Xe;if(X.T!==null){var t=Xa;return t!==0?t:Jd()}return ce()}function $v(){Yn===0&&(Yn=(Xe&536870912)===0||et?kr():536870912);var t=Qn.current;return t!==null&&(t.flags|=32),Yn}function Pn(t,r,a){(t===ft&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(co(t,0),ts(t,Xe,Yn,!1)),jn(t,a),((it&2)===0||t!==ft)&&(t===ft&&((it&2)===0&&(la|=a),wt===4&&ts(t,Xe,Yn,!1)),Vi(t))}function Kv(t,r,a){if((it&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Ki(t,r),h=l?KS(t,r):Yd(t,r,!0),d=l;do{if(h===0){ao&&!l&&ts(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!GS(a)){h=Yd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var b=t;h=Vl;var D=b.current.memoizedState.isDehydrated;if(D&&(co(b,_).flags|=256),_=Yd(b,_,!1),_!==2){if(zd&&!D){b.errorRecoveryDisabledLanes|=d,la|=d,h=4;break e}d=bn,bn=h,d!==null&&(bn===null?bn=d:bn.push.apply(bn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){co(t,0),ts(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ts(l,r,Yn,!Wr);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Hd+300-fn(),10<h)){if(ts(l,r,Yn,!Wr),$i(l,0,!0)!==0)break e;l.timeoutHandle=b_(Qv.bind(null,l,a,bn,Uc,qd,r,Yn,la,oo,Wr,d,2,-0,0),h);break e}Qv(l,a,bn,Uc,qd,r,Yn,la,oo,Wr,d,0,-0,0)}}break}while(!0);Vi(t)}function Qv(t,r,a,l,h,d,_,b,D,F,W,ee,G,$){if(t.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:RA},Bv(r),ee=CA(),ee!==null)){t.cancelPendingCommit=ee(t_.bind(null,t,r,d,a,l,h,_,b,D,W,1,G,$)),ts(t,d,_,!F);return}t_(t,r,d,a,l,h,_,b,D)}function GS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Nn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ts(t,r,a,l){r&=~Bd,r&=~la,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Bt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&j(t,a,r)}function jc(){return(it&6)===0?(Pl(0),!1):!0}function Kd(){if(Fe!==null){if(rt===0)var t=Fe.return;else t=Fe,or=na=null,cd(t),no=null,Rl=0,t=Fe;for(;t!==null;)Iv(t.alternate,t),t=t.return;Fe=null}}function co(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,uA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Kd(),ft=t,Fe=a=rr(t.current,null),Xe=r,rt=0,Vn=null,Wr=!1,ao=Ki(t,r),zd=!1,oo=Yn=Bd=la=Zr=wt=0,bn=Vl=null,qd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Bt(l),d=1<<h;r|=t[h],l&=~d}return pr=r,oc(),a}function Yv(t,r){ze=null,X.H=Rc,r===yl||r===gc?(r=fy(),rt=3):r===uy?(r=fy(),rt=4):rt=r===dv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,Fe===null&&(wt=1,Dc(t,Fn(r,t.current)))}function Xv(){var t=X.H;return X.H=Rc,t===null?Rc:t}function Wv(){var t=X.A;return X.A=HS,t}function Qd(){wt=4,Wr||(Xe&4194048)!==Xe&&Qn.current!==null||(ao=!0),(Zr&134217727)===0&&(la&134217727)===0||ft===null||ts(ft,Xe,Yn,!1)}function Yd(t,r,a){var l=it;it|=2;var h=Xv(),d=Wv();(ft!==t||Xe!==r)&&(Uc=null,co(t,r)),r=!1;var _=wt;e:do try{if(rt!==0&&Fe!==null){var b=Fe,D=Vn;switch(rt){case 8:Kd(),_=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(r=!0);var F=rt;if(rt=0,Vn=null,ho(t,b,D,F),a&&ao){_=0;break e}break;default:F=rt,rt=0,Vn=null,ho(t,b,D,F)}}$S(),_=wt;break}catch(W){Yv(t,W)}while(!0);return r&&t.shellSuspendCounter++,or=na=null,it=l,X.H=h,X.A=d,Fe===null&&(ft=null,Xe=0,oc()),_}function $S(){for(;Fe!==null;)Zv(Fe)}function KS(t,r){var a=it;it|=2;var l=Xv(),h=Wv();ft!==t||Xe!==r?(Uc=null,Lc=fn()+500,co(t,r)):ao=Ki(t,r);e:do try{if(rt!==0&&Fe!==null){r=Fe;var d=Vn;t:switch(rt){case 1:rt=0,Vn=null,ho(t,r,d,1);break;case 2:case 9:if(cy(d)){rt=0,Vn=null,Jv(r);break}r=function(){rt!==2&&rt!==9||ft!==t||(rt=7),Vi(t)},d.then(r,r);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:cy(d)?(rt=0,Vn=null,Jv(r)):(rt=0,Vn=null,ho(t,r,d,7));break;case 5:var _=null;switch(Fe.tag){case 26:_=Fe.memoizedState;case 5:case 27:var b=Fe;if(!_||V_(_)){rt=0,Vn=null;var D=b.sibling;if(D!==null)Fe=D;else{var F=b.return;F!==null?(Fe=F,zc(F)):Fe=null}break t}}rt=0,Vn=null,ho(t,r,d,5);break;case 6:rt=0,Vn=null,ho(t,r,d,6);break;case 8:Kd(),wt=6;break e;default:throw Error(s(462))}}QS();break}catch(W){Yv(t,W)}while(!0);return or=na=null,X.H=l,X.A=h,it=a,Fe!==null?0:(ft=null,Xe=0,oc(),wt)}function QS(){for(;Fe!==null&&!Ds();)Zv(Fe)}function Zv(t){var r=Av(t.alternate,t,pr);t.memoizedProps=t.pendingProps,r===null?zc(t):Fe=r}function Jv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=_v(a,r,r.pendingProps,r.type,void 0,Xe);break;case 11:r=_v(a,r,r.pendingProps,r.type.render,r.ref,Xe);break;case 5:cd(r);default:Iv(a,r),r=Fe=ey(r,pr),r=Av(a,r,pr)}t.memoizedProps=t.pendingProps,r===null?zc(t):Fe=r}function ho(t,r,a,l){or=na=null,cd(r),no=null,Rl=0;var h=r.return;try{if(LS(t,h,r,a,Xe)){wt=1,Dc(t,Fn(a,t.current)),Fe=null;return}}catch(d){if(h!==null)throw Fe=h,d;wt=1,Dc(t,Fn(a,t.current)),Fe=null;return}r.flags&32768?(et||l===1?t=!0:ao||(Xe&536870912)!==0?t=!1:(Wr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),e_(r,t)):zc(r)}function zc(t){var r=t;do{if((r.flags&32768)!==0){e_(r,Wr);return}t=r.return;var a=jS(r.alternate,r,pr);if(a!==null){Fe=a;return}if(r=r.sibling,r!==null){Fe=r;return}Fe=r=t}while(r!==null);wt===0&&(wt=5)}function e_(t,r){do{var a=zS(t.alternate,t);if(a!==null){a.flags&=32767,Fe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Fe=t;return}Fe=t=a}while(t!==null);wt=6,Fe=null}function t_(t,r,a,l,h,d,_,b,D){t.cancelPendingCommit=null;do Bc();while(Zt!==0);if((it&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=jf,ks(t,a,d,_,b,D),t===ft&&(Fe=ft=null,Xe=0),lo=r,es=t,uo=a,Fd=d,Gd=h,Gv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ZS(Fi,function(){return a_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=ae.p,ae.p=2,_=it,it|=4;try{BS(t,r,a)}finally{it=_,ae.p=h,X.T=l}}Zt=1,n_(),i_(),r_()}}function n_(){if(Zt===1){Zt=0;var t=es,r=lo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var h=it;it|=4;try{Uv(r,t);var d=om,_=Fg(t.containerInfo),b=d.focusedElem,D=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Hg(b.ownerDocument.documentElement,b)){if(D!==null&&Vf(b)){var F=D.start,W=D.end;if(W===void 0&&(W=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(W,b.value.length);else{var ee=b.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var $=G.getSelection(),Ie=b.textContent.length,we=Math.min(D.start,Ie),ut=D.end===void 0?we:Math.min(D.end,Ie);!$.extend&&we>ut&&(_=ut,ut=we,we=_);var z=qg(b,we),U=qg(b,ut);if(z&&U&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==U.node||$.focusOffset!==U.offset)){var q=ee.createRange();q.setStart(z.node,z.offset),$.removeAllRanges(),we>ut?($.addRange(q),$.extend(U.node,U.offset)):(q.setEnd(U.node,U.offset),$.addRange(q))}}}}for(ee=[],$=b;$=$.parentNode;)$.nodeType===1&&ee.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ee.length;b++){var Z=ee[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Jc=!!am,om=am=null}finally{it=h,ae.p=l,X.T=a}}t.current=r,Zt=2}}function i_(){if(Zt===2){Zt=0;var t=es,r=lo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var h=it;it|=4;try{Vv(t,r.alternate,r)}finally{it=h,ae.p=l,X.T=a}}Zt=3}}function r_(){if(Zt===4||Zt===3){Zt=0,Os();var t=es,r=lo,a=uo,l=Gv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,lo=es=null,s_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Jr=null),_e(a),r=r.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(mt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=X.T,h=ae.p,ae.p=2,X.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{X.T=r,ae.p=h}}(uo&3)!==0&&Bc(),Vi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===$d?kl++:(kl=0,$d=t):kl=0,Pl(0)}}function s_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,pl(r)))}function Bc(t){return n_(),i_(),r_(),a_()}function a_(){if(Zt!==5)return!1;var t=es,r=Fd;Fd=0;var a=_e(uo),l=X.T,h=ae.p;try{ae.p=32>a?32:a,X.T=null,a=Gd,Gd=null;var d=es,_=uo;if(Zt=0,lo=es=null,uo=0,(it&6)!==0)throw Error(s(331));var b=it;if(it|=4,Hv(d.current),zv(d,d.current,_,a),it=b,Pl(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(mt,d)}catch{}return!0}finally{ae.p=h,X.T=l,s_(t,r)}}function o_(t,r,a){r=Fn(a,r),r=Sd(t.stateNode,r,2),t=Fr(t,r,2),t!==null&&(jn(t,2),Vi(t))}function ht(t,r,a){if(t.tag===3)o_(t,t,a);else for(;r!==null;){if(r.tag===3){o_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Jr===null||!Jr.has(l))){t=Fn(a,t),a=hv(2),l=Fr(r,a,2),l!==null&&(fv(a,l,r,t),jn(l,2),Vi(l));break}}r=r.return}}function Xd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new FS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(zd=!0,h.add(a),t=YS.bind(null,t,r,a),r.then(t,t))}function YS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ft===t&&(Xe&a)===a&&(wt===4||wt===3&&(Xe&62914560)===Xe&&300>fn()-Hd?(it&2)===0&&co(t,0):Bd|=a,oo===Xe&&(oo=0)),Vi(t)}function l_(t,r){r===0&&(r=Pr()),t=$a(t,r),t!==null&&(jn(t,r),Vi(t))}function XS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),l_(t,a)}function WS(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),l_(t,a)}function ZS(t,r){return pi(t,r)}var qc=null,fo=null,Wd=!1,Hc=!1,Zd=!1,ua=0;function Vi(t){t!==fo&&t.next===null&&(fo===null?qc=fo=t:fo=fo.next=t),Hc=!0,Wd||(Wd=!0,eA())}function Pl(t,r){if(!Zd&&Hc){Zd=!0;do for(var a=!1,l=qc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Bt(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,f_(l,d))}else d=Xe,d=$i(l,l===ft?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Ki(l,d)||(a=!0,f_(l,d));l=l.next}while(a);Zd=!1}}function JS(){u_()}function u_(){Hc=Wd=!1;var t=0;ua!==0&&(lA()&&(t=ua),ua=0);for(var r=fn(),a=null,l=qc;l!==null;){var h=l.next,d=c_(l,r);d===0?(l.next=null,a===null?qc=h:a.next=h,h===null&&(fo=a)):(a=l,(t!==0||(d&3)!==0)&&(Hc=!0)),l=h}Pl(t)}function c_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-Bt(d),b=1<<_,D=h[_];D===-1?((b&a)===0||(b&l)!==0)&&(h[_]=Vs(b,r)):D<=r&&(t.expiredLanes|=b),d&=~b}if(r=ft,a=Xe,a=$i(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Hi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ki(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Hi(l),_e(a)){case 2:case 8:a=Mr;break;case 32:a=Fi;break;case 268435456:a=Vr;break;default:a=Fi}return l=h_.bind(null,t),a=pi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Hi(l),t.callbackPriority=2,t.callbackNode=null,2}function h_(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Bc()&&t.callbackNode!==a)return null;var l=Xe;return l=$i(t,t===ft?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Kv(t,l,r),c_(t,fn()),t.callbackNode!=null&&t.callbackNode===a?h_.bind(null,t):null)}function f_(t,r){if(Bc())return null;Kv(t,r,!0)}function eA(){cA(function(){(it&6)!==0?pi(Or,JS):u_()})}function Jd(){return ua===0&&(ua=kr()),ua}function d_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Va(""+t)}function m_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function tA(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=d_((h[ke]||null).action),_=l.submitter;_&&(r=(r=_[ke]||null)?d_(r.formAction):_.getAttribute("formAction"),r!==null&&(d=r,_=null));var b=new ka("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ua!==0){var D=_?m_(h,_):new FormData(h);_d(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(b.preventDefault(),D=_?m_(h,_):new FormData(h),_d(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var em=0;em<Uf.length;em++){var tm=Uf[em],nA=tm.toLowerCase(),iA=tm[0].toUpperCase()+tm.slice(1);ri(nA,"on"+iA)}ri(Kg,"onAnimationEnd"),ri(Qg,"onAnimationIteration"),ri(Yg,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(ES,"onTransitionRun"),ri(TS,"onTransitionStart"),ri(bS,"onTransitionCancel"),ri(Xg,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function p_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var _=l.length-1;0<=_;_--){var b=l[_],D=b.instance,F=b.currentTarget;if(b=b.listener,D!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=F;try{d(h)}catch(W){Nc(W)}h.currentTarget=null,d=D}else for(_=0;_<l.length;_++){if(b=l[_],D=b.instance,F=b.currentTarget,b=b.listener,D!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=F;try{d(h)}catch(W){Nc(W)}h.currentTarget=null,d=D}}}}function Ge(t,r){var a=r[Cn];a===void 0&&(a=r[Cn]=new Set);var l=t+"__bubble";a.has(l)||(g_(r,t,2,!1),a.add(l))}function nm(t,r,a){var l=0;r&&(l|=4),g_(a,t,l,r)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function im(t){if(!t[Fc]){t[Fc]=!0,Yo.forEach(function(a){a!=="selectionchange"&&(rA.has(a)||nm(a,!1,t),nm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Fc]||(r[Fc]=!0,nm("selectionchange",!1,r))}}function g_(t,r,a,l){switch(z_(r)){case 2:var h=DA;break;case 8:h=OA;break;default:h=ym}a=h.bind(null,r,a,t),h=void 0,!qn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function rm(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=Qi(b),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=d=_;continue e}b=b.parentNode}}l=l.return}$u(function(){var F=d,W=Bn(a),ee=[];e:{var G=Wg.get(t);if(G!==void 0){var $=ka,Ie=t;switch(t){case"keypress":if(Ai(a)===0)break e;case"keydown":case"keyup":$=Ba;break;case"focusin":Ie="focus",$=Ua;break;case"focusout":Ie="blur",$=Ua;break;case"beforeblur":case"afterblur":$=Ua;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ec;break;case Kg:case Qg:case Yg:$=ja;break;case Xg:$=nc;break;case"scroll":case"scrollend":$=Ku;break;case"wheel":$=qa;break;case"copy":case"cut":case"paste":$=za;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ol;break;case"toggle":case"beforetoggle":$=rc}var we=(r&4)!==0,ut=!we&&(t==="scroll"||t==="scrollend"),z=we?G!==null?G+"Capture":null:G;we=[];for(var U=F,q;U!==null;){var Z=U;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||z===null||(Z=qs(U,z),Z!=null&&we.push(Ul(U,Z,q))),ut)break;U=U.return}0<we.length&&(G=new $(G,Ie,null,a,W),ee.push({event:G,listeners:we}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",G&&a!==Zi&&(Ie=a.relatedTarget||a.fromElement)&&(Qi(Ie)||Ie[Ve]))break e;if(($||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,$?(Ie=a.relatedTarget||a.toElement,$=F,Ie=Ie?Qi(Ie):null,Ie!==null&&(ut=u(Ie),we=Ie.tag,Ie!==ut||we!==5&&we!==27&&we!==6)&&(Ie=null)):($=null,Ie=F),$!==Ie)){if(we=Hn,Z="onMouseLeave",z="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(we=ol,Z="onPointerLeave",z="onPointerEnter",U="pointer"),ut=$==null?G:Ti($),q=Ie==null?G:Ti(Ie),G=new we(Z,U+"leave",$,a,W),G.target=ut,G.relatedTarget=q,Z=null,Qi(W)===F&&(we=new we(z,U+"enter",Ie,a,W),we.target=q,we.relatedTarget=ut,Z=we),ut=Z,$&&Ie)t:{for(we=$,z=Ie,U=0,q=we;q;q=mo(q))U++;for(q=0,Z=z;Z;Z=mo(Z))q++;for(;0<U-q;)we=mo(we),U--;for(;0<q-U;)z=mo(z),q--;for(;U--;){if(we===z||z!==null&&we===z.alternate)break t;we=mo(we),z=mo(z)}we=null}else we=null;$!==null&&y_(ee,G,$,we,!1),Ie!==null&&ut!==null&&y_(ee,ut,Ie,we,!0)}}e:{if(G=F?Ti(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var ye=Pg;else if(kt(G))if(Lg)ye=yS;else{ye=pS;var qe=mS}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&el(F.elementType)&&(ye=Pg):ye=gS;if(ye&&(ye=ye(t,F))){ir(ee,ye,a,W);break e}qe&&qe(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&jr(G,"number",G.value)}switch(qe=F?Ti(F):window,t){case"focusin":(kt(qe)||qe.contentEditable==="true")&&(Ha=qe,kf=F,cl=null);break;case"focusout":cl=kf=Ha=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,Gg(ee,a,W);break;case"selectionchange":if(_S)break;case"keydown":case"keyup":Gg(ee,a,W)}var Ee;if(Ci)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Qe?K(t,a)&&(Se="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(v&&a.locale!=="ko"&&(Qe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Qe&&(Ee=nl()):(Si=W,zr="value"in Si?Si.value:Si.textContent,Qe=!0)),qe=Gc(F,Se),0<qe.length&&(Se=new sl(Se,t,null,a,W),ee.push({event:Se,listeners:qe}),Ee?Se.data=Ee:(Ee=le(a),Ee!==null&&(Se.data=Ee)))),(Ee=y?Vt(t,a):Ye(t,a))&&(Se=Gc(F,"onBeforeInput"),0<Se.length&&(qe=new sl("onBeforeInput","beforeinput",null,a,W),ee.push({event:qe,listeners:Se}),qe.data=Ee)),tA(ee,t,F,a,W)}p_(ee,r)})}function Ul(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Gc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=qs(t,a),h!=null&&l.unshift(Ul(t,h,d)),h=qs(t,r),h!=null&&l.push(Ul(t,h,d))),t.tag===3)return l;t=t.return}return[]}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function y_(t,r,a,l,h){for(var d=r._reactName,_=[];a!==null&&a!==l;){var b=a,D=b.alternate,F=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||F===null||(D=F,h?(F=qs(a,d),F!=null&&_.unshift(Ul(a,F,D))):h||(F=qs(a,d),F!=null&&_.push(Ul(a,F,D)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var sA=/\r\n?/g,aA=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(sA,`
`).replace(aA,"")}function __(t,r){return r=v_(r),v_(t)===r}function $c(){}function lt(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||zn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&zn(t,""+l);break;case"className":bi(t,"class",l);break;case"tabIndex":bi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bi(t,a,l);break;case"style":Jo(t,l,d);break;case"data":if(r!=="object"){bi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Va(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&lt(t,r,"name",h.name,h,null),lt(t,r,"formEncType",h.formEncType,h,null),lt(t,r,"formMethod",h.formMethod,h,null),lt(t,r,"formTarget",h.formTarget,h,null)):(lt(t,r,"encType",h.encType,h,null),lt(t,r,"method",h.method,h,null),lt(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Va(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=$c);break;case"onScroll":l!=null&&Ge("scroll",t);break;case"onScrollEnd":l!=null&&Ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Va(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ge("beforetoggle",t),Ge("toggle",t),Ur(t,"popover",l);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ur(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Cf.get(a)||a,Ur(t,a,l))}}function sm(t,r,a,l,h,d){switch(a){case"style":Jo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?zn(t,l):(typeof l=="number"||typeof l=="bigint")&&zn(t,""+l);break;case"onScroll":l!=null&&Ge("scroll",t);break;case"onScrollEnd":l!=null&&Ge("scrollend",t);break;case"onClick":l!=null&&(t.onclick=$c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[ke]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ur(t,a,l)}}}function Jt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",t),Ge("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:lt(t,r,d,_,a,null)}}h&&lt(t,r,"srcSet",a.srcSet,a,null),l&&lt(t,r,"src",a.src,a,null);return;case"input":Ge("invalid",t);var b=d=_=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":_=W;break;case"checked":D=W;break;case"defaultChecked":F=W;break;case"value":d=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:lt(t,r,l,W,a,null)}}js(t,d,b,D,F,_,h,!1),Ma(t);return;case"select":Ge("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:lt(t,r,h,b,a,null)}r=d,a=_,t.multiple=!!l,r!=null?Wi(t,!!l,r,!1):a!=null&&Wi(t,!!l,a,!0);return;case"textarea":Ge("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:lt(t,r,_,b,a,null)}zs(t,l,h,d),Ma(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:lt(t,r,D,l,a,null)}return;case"dialog":Ge("beforetoggle",t),Ge("toggle",t),Ge("cancel",t),Ge("close",t);break;case"iframe":case"object":Ge("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)Ge(Ll[l],t);break;case"image":Ge("error",t),Ge("load",t);break;case"details":Ge("toggle",t);break;case"embed":case"source":case"link":Ge("error",t),Ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:lt(t,r,F,l,a,null)}return;default:if(el(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&sm(t,r,W,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&lt(t,r,b,l,a,null))}function oA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,D=null,F=null,W=null;for($ in a){var ee=a[$];if(a.hasOwnProperty($)&&ee!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty($)||lt(t,r,$,null,l,ee)}}for(var G in l){var $=l[G];if(ee=a[G],l.hasOwnProperty(G)&&($!=null||ee!=null))switch(G){case"type":d=$;break;case"name":h=$;break;case"checked":F=$;break;case"defaultChecked":W=$;break;case"value":_=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==ee&&lt(t,r,G,$,l,ee)}}xn(t,_,b,D,F,W,d,h);return;case"select":$=_=b=G=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(d)||lt(t,r,d,null,l,D)}for(h in l)if(d=l[h],D=a[h],l.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":G=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==D&&lt(t,r,h,d,l,D)}r=b,a=_,l=$,G!=null?Wi(t,!!a,G,!1):!!l!=!!a&&(r!=null?Wi(t,!!a,r,!0):Wi(t,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:lt(t,r,b,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":G=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&lt(t,r,_,h,l,d)}at(t,G,$);return;case"option":for(var Ie in a)if(G=a[Ie],a.hasOwnProperty(Ie)&&G!=null&&!l.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:lt(t,r,Ie,null,l,G)}for(D in l)if(G=l[D],$=a[D],l.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:lt(t,r,D,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we)&&lt(t,r,we,null,l,G);for(F in l)if(G=l[F],$=a[F],l.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:lt(t,r,F,G,l,$)}return;default:if(el(r)){for(var ut in a)G=a[ut],a.hasOwnProperty(ut)&&G!==void 0&&!l.hasOwnProperty(ut)&&sm(t,r,ut,void 0,l,G);for(W in l)G=l[W],$=a[W],!l.hasOwnProperty(W)||G===$||G===void 0&&$===void 0||sm(t,r,W,G,l,$);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&lt(t,r,z,null,l,G);for(ee in l)G=l[ee],$=a[ee],!l.hasOwnProperty(ee)||G===$||G==null&&$==null||lt(t,r,ee,G,l,$)}var am=null,om=null;function Kc(t){return t.nodeType===9?t:t.ownerDocument}function E_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function lm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var um=null;function lA(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var b_=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,w_=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof w_<"u"?function(t){return w_.resolve(null).then(t).catch(hA)}:b_;function hA(t){setTimeout(function(){throw t})}function ns(t){return t==="head"}function S_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&jl(_.documentElement),a&2&&jl(_.body),a&4)for(a=_.head,jl(a),_=a.firstChild;_;){var b=_.nextSibling,D=_.nodeName;_[pt]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=b}}if(h===0){t.removeChild(d),Kl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Kl(r)}function cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),Lr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function fA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[pt])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ai(t.nextSibling),t===null)break}return null}function dA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ai(t.nextSibling),t===null))return null;return t}function hm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function mA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ai(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var fm=null;function A_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function R_(t,r,a){switch(r=Kc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function jl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Lr(t)}var Xn=new Map,I_=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var gr=ae.d;ae.d={f:pA,r:gA,D:yA,C:vA,L:_A,m:EA,X:bA,S:TA,M:wA};function pA(){var t=gr.f(),r=jc();return t||r}function gA(t){var r=Ei(t);r!==null&&r.tag===5&&r.type==="form"?Ky(r):gr.r(t)}var po=typeof document>"u"?null:document;function C_(t,r,a){var l=po;if(l&&typeof r=="string"&&r){var h=xt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),I_.has(h)||(I_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Jt(r,"link",t),At(r),l.head.appendChild(r)))}}function yA(t){gr.D(t),C_("dns-prefetch",t,null)}function vA(t,r){gr.C(t,r),C_("preconnect",t,r)}function _A(t,r,a){gr.L(t,r,a);var l=po;if(l&&t&&r){var h='link[rel="preload"][as="'+xt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+xt(a.imageSizes)+'"]')):h+='[href="'+xt(t)+'"]';var d=h;switch(r){case"style":d=go(t);break;case"script":d=yo(t)}Xn.has(d)||(t=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Xn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(zl(d))||r==="script"&&l.querySelector(Bl(d))||(r=l.createElement("link"),Jt(r,"link",t),At(r),l.head.appendChild(r)))}}function EA(t,r){gr.m(t,r);var a=po;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=yo(t)}if(!Xn.has(d)&&(t=E({rel:"modulepreload",href:t},r),Xn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(d)))return}l=a.createElement("link"),Jt(l,"link",t),At(l),a.head.appendChild(l)}}}function TA(t,r,a){gr.S(t,r,a);var l=po;if(l&&t){var h=dn(l).hoistableStyles,d=go(t);r=r||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(zl(d)))b.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Xn.get(d))&&dm(t,a);var D=_=l.createElement("link");At(D),Jt(D,"link",t),D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Yc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function bA(t,r){gr.X(t,r);var a=po;if(a&&t){var l=dn(a).hoistableScripts,h=yo(t),d=l.get(h);d||(d=a.querySelector(Bl(h)),d||(t=E({src:t,async:!0},r),(r=Xn.get(h))&&mm(t,r),d=a.createElement("script"),At(d),Jt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function wA(t,r){gr.M(t,r);var a=po;if(a&&t){var l=dn(a).hoistableScripts,h=yo(t),d=l.get(h);d||(d=a.querySelector(Bl(h)),d||(t=E({src:t,async:!0,type:"module"},r),(r=Xn.get(h))&&mm(t,r),d=a.createElement("script"),At(d),Jt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function x_(t,r,a,l){var h=(h=be.current)?Qc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=go(a.href),a=dn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=go(a.href);var d=dn(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(zl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Xn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(t,a),d||SA(h,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yo(a),a=dn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function go(t){return'href="'+xt(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function N_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function SA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Jt(r,"link",a),At(r),t.head.appendChild(r))}function yo(t){return'[src="'+xt(t)+'"]'}function Bl(t){return"script[async]"+t}function D_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+xt(a.href)+'"]');if(l)return r.instance=l,At(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),At(l),Jt(l,"style",h),Yc(l,a.precedence,t),r.instance=l;case"stylesheet":h=go(a.href);var d=t.querySelector(zl(h));if(d)return r.state.loading|=4,r.instance=d,At(d),d;l=N_(a),(h=Xn.get(h))&&dm(l,h),d=(t.ownerDocument||t).createElement("link"),At(d);var _=d;return _._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Jt(d,"link",l),r.state.loading|=4,Yc(d,a.precedence,t),r.instance=d;case"script":return d=yo(a.src),(h=t.querySelector(Bl(d)))?(r.instance=h,At(h),h):(l=a,(h=Xn.get(d))&&(l=E({},a),mm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),At(h),Jt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Yc(l,a.precedence,t));return r.instance}function Yc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===r)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function dm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function mm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Xc=null;function O_(t,r,a){if(Xc===null){var l=new Map,h=Xc=new Map;h.set(a,l)}else h=Xc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[pt]||d[ct]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(r)||"";_=t+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function M_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function AA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function V_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ql=null;function RA(){}function IA(t,r,a){if(ql===null)throw Error(s(475));var l=ql;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=go(a.href),d=t.querySelector(zl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Wc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,At(d);return}d=t.ownerDocument||t,a=N_(a),(h=Xn.get(h))&&dm(a,h),d=d.createElement("link"),At(d);var _=d;_._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Jt(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Wc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function CA(){if(ql===null)throw Error(s(475));var t=ql;return t.stylesheets&&t.count===0&&pm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&pm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Wc(){if(this.count--,this.count===0){if(this.stylesheets)pm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zc=null;function pm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zc=new Map,r.forEach(xA,t),Zc=null,Wc.call(t))}function xA(t,r){if(!(r.state.loading&4)){var a=Zc.get(t);if(a)var l=a.get(null);else{a=new Map,Zc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=r.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Wc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Hl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function NA(t,r,a,l,h,d,_,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function k_(t,r,a,l,h,d,_,b,D,F,W,ee){return t=new NA(t,r,a,_,b,D,F,ee),r=1,d===!0&&(r|=24),d=Dn(3,null,null,r),t.current=d,d.stateNode=t,r=Xf(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},ed(d),t}function P_(t){return t?(t=Ka,t):Ka}function L_(t,r,a,l,h,d){h=P_(h),l.context===null?l.context=h:l.pendingContext=h,l=Hr(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Fr(t,l,r),a!==null&&(Pn(a,t,r),_l(a,t,r))}function U_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function gm(t,r){U_(t,r),(t=t.alternate)&&U_(t,r)}function j_(t){if(t.tag===13){var r=$a(t,67108864);r!==null&&Pn(r,t,67108864),gm(t,67108864)}}var Jc=!0;function DA(t,r,a,l){var h=X.T;X.T=null;var d=ae.p;try{ae.p=2,ym(t,r,a,l)}finally{ae.p=d,X.T=h}}function OA(t,r,a,l){var h=X.T;X.T=null;var d=ae.p;try{ae.p=8,ym(t,r,a,l)}finally{ae.p=d,X.T=h}}function ym(t,r,a,l){if(Jc){var h=vm(l);if(h===null)rm(t,r,l,eh,a),B_(t,l);else if(VA(h,t,r,a,l))l.stopPropagation();else if(B_(t,l),r&4&&-1<MA.indexOf(t)){for(;h!==null;){var d=Ei(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=_n(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var D=1<<31-Bt(_);b.entanglements[1]|=D,_&=~D}Vi(d),(it&6)===0&&(Lc=fn()+500,Pl(0))}}break;case 13:b=$a(d,2),b!==null&&Pn(b,d,2),jc(),gm(d,2)}if(d=vm(l),d===null&&rm(t,r,l,eh,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else rm(t,r,l,null,a)}}function vm(t){return t=Bn(t),_m(t)}var eh=null;function _m(t){if(eh=null,t=Qi(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return eh=t,null}function z_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($o()){case Or:return 2;case Mr:return 8;case Fi:case Ko:return 32;case Vr:return 268435456;default:return 32}default:return 32}}var Em=!1,is=null,rs=null,ss=null,Fl=new Map,Gl=new Map,as=[],MA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B_(t,r){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function $l(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=Ei(r),r!==null&&j_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function VA(t,r,a,l,h){switch(r){case"focusin":return is=$l(is,t,r,a,l,h),!0;case"dragenter":return rs=$l(rs,t,r,a,l,h),!0;case"mouseover":return ss=$l(ss,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Fl.set(d,$l(Fl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Gl.set(d,$l(Gl.get(d)||null,t,r,a,l,h)),!0}return!1}function q_(t){var r=Qi(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,Ne(t.priority,function(){if(a.tag===13){var l=kn();l=pe(l);var h=$a(a,l);h!==null&&Pn(h,a,l),gm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=vm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Zi=l,a.target.dispatchEvent(l),Zi=null}else return r=Ei(a),r!==null&&j_(r),t.blockedOn=a,!1;r.shift()}return!0}function H_(t,r,a){th(t)&&a.delete(r)}function kA(){Em=!1,is!==null&&th(is)&&(is=null),rs!==null&&th(rs)&&(rs=null),ss!==null&&th(ss)&&(ss=null),Fl.forEach(H_),Gl.forEach(H_)}function nh(t,r){t.blockedOn===r&&(t.blockedOn=null,Em||(Em=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,kA)))}var ih=null;function F_(t){ih!==t&&(ih=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var d=Ei(a);d!==null&&(t.splice(r,3),r-=3,_d(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Kl(t){function r(D){return nh(D,t)}is!==null&&nh(is,t),rs!==null&&nh(rs,t),ss!==null&&nh(ss,t),Fl.forEach(r),Gl.forEach(r);for(var a=0;a<as.length;a++){var l=as[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<as.length&&(a=as[0],a.blockedOn===null);)q_(a),a.blockedOn===null&&as.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[ke]||null;if(typeof d=="function")_||F_(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[ke]||null)b=_.formAction;else if(_m(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),F_(a)}}}function Tm(t){this._internalRoot=t}rh.prototype.render=Tm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=kn();L_(a,l,t,r,null,null)},rh.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;L_(t.current,2,null,t,null,null),jc(),r[Ve]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var r=ce();t={blockedOn:null,target:t,priority:r};for(var a=0;a<as.length&&r!==0&&r<as[a].priority;a++);as.splice(a,0,t),a===0&&q_(t)}};var G_=e.version;if(G_!=="19.1.0")throw Error(s(527,G_,"19.1.0"));ae.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var PA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{mt=sh.inject(PA),Je=sh}catch{}}return Yl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=ov,d=lv,_=uv,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=k_(t,1,!1,null,null,a,l,h,d,_,b,null),t[Ve]=r.current,im(t),new Tm(r)},Yl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=ov,_=lv,b=uv,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=k_(t,1,!0,r,a??null,l,h,d,_,b,D,F),r.context=P_(null),a=r.current,l=kn(),l=pe(l),h=Hr(l),h.callback=null,Fr(a,h,l),a=l,r.current.lanes=a,jn(r,a),Vi(r),t[Ve]=r.current,im(t),new rh(r)},Yl.version="19.1.0",Yl}var t0;function GA(){if(t0)return Sm.exports;t0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=FA(),Sm.exports}var $A=GA();const KA="/showswatched2/assets/react-CHdo91hT.svg",QA=()=>{};var n0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},YA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},eT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,E=u>>2,w=(u&3)<<4|m>>4;let I=(m&15)<<2|g>>6,O=g&63;p||(O=64,f||(I=64)),s.push(n[E],n[w],n[I],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(JE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):YA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const w=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||w==null)throw new XA;const I=u<<2|m>>4;if(s.push(I),g!==64){const O=m<<4&240|g>>2;if(s.push(O),w!==64){const M=g<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WA=function(i){const e=JE(i);return eT.encodeByteArray(e,!0)},Rh=function(i){return WA(i).replace(/\./g,"")},tT=function(i){try{return eT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=()=>ZA().__FIREBASE_DEFAULTS__,eR=()=>{if(typeof process>"u"||typeof n0>"u")return;const i=n0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},tR=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&tT(i[1]);return e&&JSON.parse(e)},Xh=()=>{try{return QA()||JA()||eR()||tR()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},nT=i=>{var e,n;return(n=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},nR=i=>{const e=nT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},iT=()=>{var i;return(i=Xh())===null||i===void 0?void 0:i.config},rT=i=>{var e;return(e=Xh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Rh(JSON.stringify(n)),Rh(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function aR(){var i;const e=(i=Xh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function lR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uR(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function cR(){return!aR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aT(){try{return typeof indexedDB=="object"}catch{return!1}}function oT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function hR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="FirebaseError";class fi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=fR,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ea.prototype.create)}}class Ea{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?dR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new fi(o,m,s)}}function dR(i,e){return i.replace(mR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const mR=/\{\$([^}]+)}/g;function pR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ts(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(i0(u)&&i0(f)){if(!Ts(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function i0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Jl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function eu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function gR(i,e){const n=new yR(i,e);return n.subscribe.bind(n)}class yR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");vR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Cm),o.error===void 0&&(o.error=Cm),o.complete===void 0&&(o.complete=Cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vR(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=1e3,ER=2,TR=4*60*60*1e3,bR=.5;function r0(i,e=_R,n=ER){const s=e*Math.pow(n,i),o=Math.round(bR*s*(Math.random()-.5)*2);return Math.min(TR,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(i){return i&&i._delegate?i._delegate:i}class li{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new iR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AR(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(i){return i===ca?void 0:i}function AR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($e||($e={}));const IR={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},CR=$e.INFO,xR={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},NR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=xR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wh{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=NR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const DR=(i,e)=>e.some(n=>i instanceof n);let s0,a0;function OR(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MR(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lT=new WeakMap,Km=new WeakMap,uT=new WeakMap,xm=new WeakMap,Ap=new WeakMap;function VR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(ys(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&lT.set(n,i)}).catch(()=>{}),Ap.set(e,i),e}function kR(i){if(Km.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Km.set(i,e)}let Qm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Km.get(i);if(e==="objectStoreNames")return i.objectStoreNames||uT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ys(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function PR(i){Qm=i(Qm)}function LR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Nm(this),e,...n);return uT.set(s,e.sort?e.sort():[e]),ys(s)}:MR().includes(i)?function(...e){return i.apply(Nm(this),e),ys(lT.get(this))}:function(...e){return ys(i.apply(Nm(this),e))}}function UR(i){return typeof i=="function"?LR(i):(i instanceof IDBTransaction&&kR(i),DR(i,OR())?new Proxy(i,Qm):i)}function ys(i){if(i instanceof IDBRequest)return VR(i);if(xm.has(i))return xm.get(i);const e=UR(i);return e!==i&&(xm.set(i,e),Ap.set(e,i)),e}const Nm=i=>Ap.get(i);function cT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=ys(f);return s&&f.addEventListener("upgradeneeded",p=>{s(ys(f.result),p.oldVersion,p.newVersion,ys(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const jR=["get","getKey","getAll","getAllKeys","count"],zR=["put","add","delete","clear"],Dm=new Map;function o0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=zR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||jR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Dm.set(e,u),u}PR(i=>({...i,get:(e,n,s)=>o0(e,n)||i.get(e,n,s),has:(e,n)=>!!o0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function qR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ym="@firebase/app",l0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Wh("@firebase/app"),HR="@firebase/app-compat",FR="@firebase/analytics-compat",GR="@firebase/analytics",$R="@firebase/app-check-compat",KR="@firebase/app-check",QR="@firebase/auth",YR="@firebase/auth-compat",XR="@firebase/database",WR="@firebase/data-connect",ZR="@firebase/database-compat",JR="@firebase/functions",e1="@firebase/functions-compat",t1="@firebase/installations",n1="@firebase/installations-compat",i1="@firebase/messaging",r1="@firebase/messaging-compat",s1="@firebase/performance",a1="@firebase/performance-compat",o1="@firebase/remote-config",l1="@firebase/remote-config-compat",u1="@firebase/storage",c1="@firebase/storage-compat",h1="@firebase/firestore",f1="@firebase/vertexai",d1="@firebase/firestore-compat",m1="firebase",p1="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="[DEFAULT]",g1={[Ym]:"fire-core",[HR]:"fire-core-compat",[GR]:"fire-analytics",[FR]:"fire-analytics-compat",[KR]:"fire-app-check",[$R]:"fire-app-check-compat",[QR]:"fire-auth",[YR]:"fire-auth-compat",[XR]:"fire-rtdb",[WR]:"fire-data-connect",[ZR]:"fire-rtdb-compat",[JR]:"fire-fn",[e1]:"fire-fn-compat",[t1]:"fire-iid",[n1]:"fire-iid-compat",[i1]:"fire-fcm",[r1]:"fire-fcm-compat",[s1]:"fire-perf",[a1]:"fire-perf-compat",[o1]:"fire-rc",[l1]:"fire-rc-compat",[u1]:"fire-gcs",[c1]:"fire-gcs-compat",[h1]:"fire-fst",[d1]:"fire-fst-compat",[f1]:"fire-vertex","fire-js":"fire-js",[m1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,y1=new Map,Wm=new Map;function u0(i,e){try{i.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function zi(i){const e=i.name;if(Wm.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Wm.set(e,i);for(const n of Ih.values())u0(n,i);for(const n of y1.values())u0(n,i);return!0}function Ta(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Wn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new Ea("app","Firebase",v1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=p1;function hT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Xm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw vs.create("bad-app-name",{appName:String(o)});if(n||(n=iT()),!n)throw vs.create("no-options");const u=Ih.get(o);if(u){if(Ts(n,u.options)&&Ts(s,u.config))return u;throw vs.create("duplicate-app",{appName:o})}const f=new RR(o);for(const p of Wm.values())f.addComponent(p);const m=new _1(n,s,f);return Ih.set(o,m),m}function Rp(i=Xm){const e=Ih.get(i);if(!e&&i===Xm&&iT())return hT();if(!e)throw vs.create("no-app",{appName:i});return e}function Zn(i,e,n){var s;let o=(s=g1[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(m.join(" "));return}zi(new li(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="firebase-heartbeat-database",T1=1,mu="firebase-heartbeat-store";let Om=null;function fT(){return Om||(Om=cT(E1,T1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(i=>{throw vs.create("idb-open",{originalErrorMessage:i.message})})),Om}async function b1(i){try{const n=(await fT()).transaction(mu),s=await n.objectStore(mu).get(dT(i));return await n.done,s}catch(e){if(e instanceof fi)br.warn(e.message);else{const n=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(n.message)}}}async function c0(i,e){try{const s=(await fT()).transaction(mu,"readwrite");await s.objectStore(mu).put(e,dT(i)),await s.done}catch(n){if(n instanceof fi)br.warn(n.message);else{const s=vs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});br.warn(s.message)}}}function dT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1024,S1=30;class A1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new I1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=h0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>S1){const f=C1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){br.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h0(),{heartbeatsToSend:s,unsentEntries:o}=R1(this._heartbeatsCache.heartbeats),u=Rh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return br.warn(n),""}}}function h0(){return new Date().toISOString().substring(0,10)}function R1(i,e=w1){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),f0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class I1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aT()?oT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await b1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function f0(i){return Rh(JSON.stringify({version:2,heartbeats:i})).length}function C1(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(i){zi(new li("platform-logger",e=>new BR(e),"PRIVATE")),zi(new li("heartbeat",e=>new A1(e),"PRIVATE")),Zn(Ym,l0,i),Zn(Ym,l0,"esm2017"),Zn("fire-js","")}x1("");var N1="firebase",D1="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(N1,D1,"app");var d0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,mT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function R(){}R.prototype=S.prototype,P.D=S.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(N,x,V){for(var C=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)C[xe-2]=arguments[xe];return S.prototype[x].apply(N,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,S,R){R||(R=0);var N=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)N[x]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(x=0;16>x;++x)N[x]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=P.g[0],R=P.g[1],x=P.g[2];var V=P.g[3],C=S+(V^R&(x^V))+N[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+N[1]+3905402710&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+N[2]+606105819&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+N[3]+3250441966&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(V^R&(x^V))+N[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+N[5]+1200080426&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+N[6]+2821735955&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+N[7]+4249261313&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(V^R&(x^V))+N[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+N[9]+2336552879&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+N[10]+4294925233&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+N[11]+2304563134&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(V^R&(x^V))+N[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+N[13]+4254626195&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+N[14]+2792965006&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+N[15]+1236535329&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(x^V&(R^x))+N[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+N[6]+3225465664&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+N[11]+643717713&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+N[0]+3921069994&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(R^x))+N[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+N[10]+38016083&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+N[15]+3634488961&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+N[4]+3889429448&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(R^x))+N[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+N[14]+3275163606&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+N[3]+4107603335&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+N[8]+1163531501&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(R^x))+N[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+N[2]+4243563512&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+N[7]+1735328473&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+N[12]+2368359562&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(R^x^V)+N[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+N[8]+2272392833&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+N[11]+1839030562&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+N[14]+4259657740&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^V)+N[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+N[4]+1272893353&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+N[7]+4139469664&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+N[10]+3200236656&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^V)+N[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+N[0]+3936430074&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+N[3]+3572445317&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+N[6]+76029189&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^V)+N[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+N[12]+3873151461&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+N[15]+530742520&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+N[2]+3299628645&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(x^(R|~V))+N[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+N[7]+1126891415&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+N[14]+2878612391&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+N[5]+4237533241&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~V))+N[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+N[3]+2399980690&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+N[10]+4293915773&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+N[1]+2240044497&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~V))+N[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+N[15]+4264355552&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+N[6]+2734768916&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+N[13]+1309151649&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~V))+N[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+N[11]+3174756917&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+N[2]+718787259&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+V&4294967295}s.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var R=S-this.blockSize,N=this.B,x=this.h,V=0;V<S;){if(x==0)for(;V<=R;)o(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<S;)if(N[x++]=P.charCodeAt(V++),x==this.blockSize){o(this,N),x=0;break}}else for(;V<S;)if(N[x++]=P[V++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=S},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var R=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=R&255,R/=256;for(this.u(P),P=Array(16),S=R=0;4>S;++S)for(var N=0;32>N;N+=8)P[R++]=this.g[S]>>>N&255;return P};function u(P,S){var R=m;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=S(P)}function f(P,S){this.h=S;for(var R=[],N=!0,x=P.length-1;0<=x;x--){var V=P[x]|0;N&&V==S||(R[x]=V,N=!1)}this.g=R}var m={};function p(P){return-128<=P&&128>P?u(P,function(S){return new f([S|0],0>S?-1:0)}):new f([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return w;if(0>P)return H(g(-P));for(var S=[],R=1,N=0;P>=R;N++)S[N]=P/R|0,R*=4294967296;return new f(S,0)}function E(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return H(E(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(S,8)),N=w,x=0;x<P.length;x+=8){var V=Math.min(8,P.length-x),C=parseInt(P.substring(x,x+V),S);8>V?(V=g(Math.pow(S,V)),N=N.j(V).add(g(C))):(N=N.j(R),N=N.add(g(C)))}return N}var w=p(0),I=p(1),O=p(16777216);i=f.prototype,i.m=function(){if(Q(this))return-H(this).m();for(var P=0,S=1,R=0;R<this.g.length;R++){var N=this.i(R);P+=(0<=N?N:4294967296+N)*S,S*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(Q(this))return"-"+H(this).toString(P);for(var S=g(Math.pow(P,6)),R=this,N="";;){var x=fe(R,S).g;R=Y(R,x.j(S));var V=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=x,M(R))return V+N;for(;6>V.length;)V="0"+V;N=V+N}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function Q(P){return P.h==-1}i.l=function(P){return P=Y(this,P),Q(P)?-1:M(P)?0:1};function H(P){for(var S=P.g.length,R=[],N=0;N<S;N++)R[N]=~P.g[N];return new f(R,~P.h).add(I)}i.abs=function(){return Q(this)?H(this):this},i.add=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0,x=0;x<=S;x++){var V=N+(this.i(x)&65535)+(P.i(x)&65535),C=(V>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);N=C>>>16,V&=65535,C&=65535,R[x]=C<<16|V}return new f(R,R[R.length-1]&-2147483648?-1:0)};function Y(P,S){return P.add(H(S))}i.j=function(P){if(M(this)||M(P))return w;if(Q(this))return Q(P)?H(this).j(H(P)):H(H(this).j(P));if(Q(P))return H(this.j(H(P)));if(0>this.l(O)&&0>P.l(O))return g(this.m()*P.m());for(var S=this.g.length+P.g.length,R=[],N=0;N<2*S;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<P.g.length;x++){var V=this.i(N)>>>16,C=this.i(N)&65535,xe=P.i(x)>>>16,Oe=P.i(x)&65535;R[2*N+2*x]+=C*Oe,se(R,2*N+2*x),R[2*N+2*x+1]+=V*Oe,se(R,2*N+2*x+1),R[2*N+2*x+1]+=C*xe,se(R,2*N+2*x+1),R[2*N+2*x+2]+=V*xe,se(R,2*N+2*x+2)}for(N=0;N<S;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=S;N<2*S;N++)R[N]=0;return new f(R,0)};function se(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function ne(P,S){this.g=P,this.h=S}function fe(P,S){if(M(S))throw Error("division by zero");if(M(P))return new ne(w,w);if(Q(P))return S=fe(H(P),S),new ne(H(S.g),H(S.h));if(Q(S))return S=fe(P,H(S)),new ne(H(S.g),S.h);if(30<P.g.length){if(Q(P)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,N=S;0>=N.l(P);)R=me(R),N=me(N);var x=Ae(R,1),V=Ae(N,1);for(N=Ae(N,2),R=Ae(R,2);!M(N);){var C=V.add(N);0>=C.l(P)&&(x=x.add(R),V=C),N=Ae(N,1),R=Ae(R,1)}return S=Y(P,x.j(S)),new ne(x,S)}for(x=w;0<=P.l(S);){for(R=Math.max(1,Math.floor(P.m()/S.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),V=g(R),C=V.j(S);Q(C)||0<C.l(P);)R-=N,V=g(R),C=V.j(S);M(V)&&(V=I),x=x.add(V),P=Y(P,C)}return new ne(x,P)}i.A=function(P){return fe(this,P).h},i.and=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)&P.i(N);return new f(R,this.h&P.h)},i.or=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)|P.i(N);return new f(R,this.h|P.h)},i.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)^P.i(N);return new f(R,this.h^P.h)};function me(P){for(var S=P.g.length+1,R=[],N=0;N<S;N++)R[N]=P.i(N)<<1|P.i(N-1)>>>31;return new f(R,P.h)}function Ae(P,S){var R=S>>5;S%=32;for(var N=P.g.length-R,x=[],V=0;V<N;V++)x[V]=0<S?P.i(V+R)>>>S|P.i(V+R+1)<<32-S:P.i(V+R);return new f(x,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,_s=f}).apply(typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pT,tu,gT,mh,Zm,yT,vT,_T;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in v))break e;v=v[B]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,A=!1,B={next:function(){if(!A&&v<c.length){var K=v++;return{value:y(K,c[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,v){return c.call.apply(c.bind,arguments)}function w(c,y,v){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,A),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function I(c,y,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,I.apply(null,arguments)}function O(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(A,B,K){for(var le=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)le[Qe-2]=arguments[Qe];return y.prototype[B].apply(A,le)}}function Q(c){const y=c.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function H(c,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(p(A)){const B=c.length||0,K=A.length||0;c.length=B+K;for(let le=0;le<K;le++)c[B+le]=A[le]}else c.push(A)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function fe(c){return fe[" "](c),c}fe[" "]=function(){};var me=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Ae(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function P(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function S(c){const y={};for(const v in c)y[v]=c[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,y){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)c[v]=A[v];for(let K=0;K<R.length;K++)v=R[K],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function x(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function V(c){m.setTimeout(()=>{throw c},0)}function C(){var c=je;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class xe{constructor(){this.h=this.g=null}add(y,v){const A=Oe.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Oe=new Y(()=>new X,c=>c.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ve=!1,je=new xe,k=()=>{const c=m.Promise.resolve(void 0);ae=()=>{c.then(ie)}};var ie=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){V(v)}var y=Oe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ve=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function Le(c,y){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(me){e:{try{fe(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:be[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Le.aa.h.call(this)}}M(Le,re);var be={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Tt="closure_listenable_"+(1e6*Math.random()|0),st=0;function vn(c,y,v,A,B){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=B,this.key=++st,this.da=this.fa=!1}function ei(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function In(c){this.src=c,this.g={},this.h=0}In.prototype.add=function(c,y,v,A,B){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var le=pi(c,y,A,B);return-1<le?(y=c[le],v||(y.fa=!1)):(y=new vn(y,this.src,K,!!A,B),y.fa=v,c.push(y)),y};function mi(c,y){var v=y.type;if(v in c.g){var A=c.g[v],B=Array.prototype.indexOf.call(A,y,void 0),K;(K=0<=B)&&Array.prototype.splice.call(A,B,1),K&&(ei(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function pi(c,y,v,A){for(var B=0;B<c.length;++B){var K=c[B];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==A)return B}return-1}var Hi="closure_lm_"+(1e6*Math.random()|0),Ds={};function Os(c,y,v,A,B){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Os(c,y[K],v,A,B);return null}return v=Ia(v),c&&c[Tt]?c.K(y,v,g(A)?!!A.capture:!1,B):fn(c,y,v,!1,A,B)}function fn(c,y,v,A,B,K){if(!y)throw Error("Invalid event type");var le=g(B)?!!B.capture:!!B,Qe=Vr(c);if(Qe||(c[Hi]=Qe=new In(c)),v=Qe.add(y,v,A,le,K),v.proxy)return v;if(A=$o(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)ge||(B=le),B===void 0&&(B=!1),c.addEventListener(y.toString(),A,B);else if(c.attachEvent)c.attachEvent(Fi(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function $o(){function c(v){return y.call(c.src,c.listener,v)}const y=Ko;return c}function Or(c,y,v,A,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)Or(c,y[K],v,A,B);else A=g(A)?!!A.capture:!!A,v=Ia(v),c&&c[Tt]?(c=c.i,y=String(y).toString(),y in c.g&&(K=c.g[y],v=pi(K,v,A,B),-1<v&&(ei(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete c.g[y],c.h--)))):c&&(c=Vr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=pi(y,v,A,B)),(v=-1<c?y[c]:null)&&Mr(v))}function Mr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Tt])mi(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent(Fi(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Vr(y))?(mi(v,c),v.h==0&&(v.src=null,y[Hi]=null)):ei(c)}}}function Fi(c){return c in Ds?Ds[c]:Ds[c]="on"+c}function Ko(c,y){if(c.da)c=!0;else{y=new Le(y,this);var v=c.listener,A=c.ha||c.src;c.fa&&Mr(c),c=v.call(A,y)}return c}function Vr(c){return c=c[Hi],c instanceof In?c:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ia(c){return typeof c=="function"?c:(c[Ms]||(c[Ms]=function(y){return c.handleEvent(y)}),c[Ms])}function mt(){ue.call(this),this.i=new In(this),this.M=this,this.F=null}M(mt,ue),mt.prototype[Tt]=!0,mt.prototype.removeEventListener=function(c,y,v,A){Or(this,c,y,v,A)};function Je(c,y){var v,A=c.F;if(A)for(v=[];A;A=A.F)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new re(y,c);else if(y instanceof re)y.target=y.target||c;else{var B=y;y=new re(A,c),N(y,B)}if(B=!0,v)for(var K=v.length-1;0<=K;K--){var le=y.g=v[K];B=Qt(le,A,!0,y)&&B}if(le=y.g=c,B=Qt(le,A,!0,y)&&B,B=Qt(le,A,!1,y)&&B,v)for(K=0;K<v.length;K++)le=y.g=v[K],B=Qt(le,A,!1,y)&&B}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],A=0;A<v.length;A++)ei(v[A]);delete c.g[y],c.h--}}this.F=null},mt.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},mt.prototype.L=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function Qt(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,K=0;K<y.length;++K){var le=y[K];if(le&&!le.da&&le.capture==v){var Qe=le.listener,Vt=le.ha||le.src;le.fa&&mi(c.i,le),B=Qe.call(Vt,A)!==!1&&B}}return B&&!A.defaultPrevented}function Bt(c,y,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Ca(c){c.g=Bt(()=>{c.g=null,c.i&&(c.i=!1,Ca(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Qo extends ue{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ca(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(c){ue.call(this),this.h=c,this.g={}}M(gi,ue);var Gi=[];function yi(c){Ae(c.g,function(y,v){this.g.hasOwnProperty(v)&&Mr(y)},c),c.g={}}gi.prototype.N=function(){gi.aa.N.call(this),yi(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _n=m.JSON.stringify,$i=m.JSON.parse,Ki=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Vs(){}Vs.prototype.h=null;function kr(c){return c.h||(c.h=c.i())}function Pr(){}var vi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jn(){re.call(this,"d")}M(jn,re);function ks(){re.call(this,"c")}M(ks,re);var j={},oe=null;function pe(){return oe=oe||new mt}j.La="serverreachability";function _e(c){re.call(this,j.La,c)}M(_e,re);function ce(c){const y=pe();Je(y,new _e(y))}j.STAT_EVENT="statevent";function Ne(c,y){re.call(this,j.STAT_EVENT,c),this.stat=y}M(Ne,re);function Ue(c){const y=pe();Je(y,new Ne(y,c))}j.Ma="timingevent";function ct(c,y){re.call(this,j.Ma,c),this.size=y}M(ct,re);function ke(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Ve(){this.g=!0}Ve.prototype.xa=function(){this.g=!1};function Cn(c,y,v,A,B,K){c.info(function(){if(c.g)if(K)for(var le="",Qe=K.split("&"),Vt=0;Vt<Qe.length;Vt++){var Ye=Qe[Vt].split("=");if(1<Ye.length){var Ht=Ye[0];Ye=Ye[1];var kt=Ht.split("_");le=2<=kt.length&&kt[1]=="type"?le+(Ht+"="+Ye+"&"):le+(Ht+"=redacted&")}}else le=null;else le=K;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+v+`
`+le})}function _i(c,y,v,A,B,K,le){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+v+`
`+K+" "+le})}function ti(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+pt(c,v)+(A?" "+A:"")})}function vt(c,y){c.info(function(){return"TIMEOUT: "+y})}Ve.prototype.info=function(){};function pt(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var A=v[c];if(!(2>A.length)){var B=A[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var le=1;le<B.length;le++)B[le]=""}}}}return _n(v)}catch{return y}}var Lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ei;function Ti(){}M(Ti,Vs),Ti.prototype.g=function(){return new XMLHttpRequest},Ti.prototype.i=function(){return{}},Ei=new Ti;function dn(c,y,v,A){this.j=c,this.i=y,this.l=v,this.R=A||1,this.U=new gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Yo={},xa={};function ni(c,y,v){c.L=1,c.v=zs(xn(y)),c.m=v,c.P=!0,Yi(c,null)}function Yi(c,y){c.F=Date.now(),Ps(c),c.A=xn(c.v);var v=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),tl(v.i,"t",A),c.C=0,v=c.j.J,c.h=new At,c.g=nc(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Qo(I(c.Y,c,c.g),c.O)),y=c.U,v=c.g,A=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Gi[0]=B.toString()),B=Gi);for(var K=0;K<B.length;K++){var le=Os(v,B[K],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),ce(),Cn(c.i,c.u,c.A,c.l,c.R,c.m)}dn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Hn(c)==3?y.j():this.Y(c)},dn.prototype.Y=function(c){try{if(c==this.g)e:{const kt=Hn(this.g);var y=this.g.Ba();const ir=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Qu(this.g)))){this.J||kt!=4||y==7||(y==8||0>=ir?ce(3):ce(2)),Ur(this);var v=this.g.Z();this.X=v;t:if(Bu(this)){var A=Qu(this.g);c="";var B=A.length,K=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),bi(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(K&&y==B-1)});A.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,_i(this.i,this.u,this.A,this.l,this.R,kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Vt=this.g;if((Qe=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Qe)){var Ye=Qe;break t}}Ye=null}if(v=Ye)ti(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ls(this,v);else{this.o=!1,this.s=3,Ue(12),Yt(this),bi(this);break e}}if(this.P){v=!0;let Xt;for(;!this.J&&this.C<le.length;)if(Xt=qu(this,le),Xt==xa){kt==4&&(this.s=4,Ue(14),v=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Yo){this.s=4,Ue(15),ti(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else ti(this.i,this.l,Xt,null),Ls(this,Xt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||le.length!=0||this.h.h||(this.s=1,Ue(16),v=!1),this.o=this.o&&v,!v)ti(this.i,this.l,le,"[Invalid Chunked Response]"),Yt(this),bi(this);else if(0<le.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Qs(Ht),Ht.M=!0,Ue(11))}}else ti(this.i,this.l,le,null),Ls(this,le);kt==4&&Yt(this),this.o&&!this.J&&(kt==4?Ju(this.j,this):(this.o=!1,Ps(this)))}else Nf(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,Ue(12)):(this.s=0,Ue(13)),Yt(this),bi(this)}}}catch{}finally{}};function Bu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qu(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?xa:(v=Number(y.substring(v,A)),isNaN(v)?Yo:(A+=1,A+v>y.length?xa:(y=y.slice(A,A+v),c.C=A+v,y)))}dn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ps(c){c.S=Date.now()+c.I,Hu(c,c.I)}function Hu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ke(I(c.ba,c),y)}function Ur(c){c.B&&(m.clearTimeout(c.B),c.B=null)}dn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(vt(this.i,this.A),this.L!=2&&(ce(),Ue(17)),Yt(this),this.s=2,bi(this)):Hu(this,this.S-c)};function bi(c){c.j.G==0||c.J||Ju(c.j,c)}function Yt(c){Ur(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,yi(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ls(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Xo(v.h,c))){if(!c.K&&Xo(v.h,c)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ba(v),ja(v);else break e;al(v),Ue(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=ke(I(v.Za,v),6e3));if(1>=Da(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else nr(v,11)}else if((c.K||v.g==c)&&Ba(v),!se(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Ye=B[y];if(v.T=Ye[0],Ye=Ye[1],v.G==2)if(Ye[0]=="c"){v.K=Ye[1],v.ia=Ye[2];const Ht=Ye[3];Ht!=null&&(v.la=Ht,v.j.info("VER="+v.la));const kt=Ye[4];kt!=null&&(v.Aa=kt,v.j.info("SVER="+v.Aa));const ir=Ye[5];ir!=null&&typeof ir=="number"&&0<ir&&(A=1.5*ir,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Xt=c.g;if(Xt){const xi=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var K=A.h;K.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Oa(K,K.h),K.h=null))}if(A.D){const ll=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(A.ya=ll,at(A.I,A.D,ll))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var le=c;if(A.qa=tc(A,A.J?A.ia:null,A.W),le.K){mn(A.h,le);var Qe=le,Vt=A.L;Vt&&(Qe.I=Vt),Qe.B&&(Ur(Qe),Ps(Qe)),A.g=le}else Wu(A);0<v.i.length&&za(v)}else Ye[0]!="stop"&&Ye[0]!="close"||nr(v,7);else v.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?nr(v,7):rl(v):Ye[0]!="noop"&&v.l&&v.l.ta(Ye),v.v=0)}}ce(4)}catch{}}var Fu=class{constructor(c,y){this.g=c,this.map=y}};function Xi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Na(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Da(c){return c.h?1:c.g?c.g.size:0}function Xo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Oa(c,y){c.g?c.g.add(y):c.h=y}function mn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Xi.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Wo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Q(c.i)}function Rf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,A=0;A<v;A++)y.push(c[A]);return y}y=[],v=0;for(A in c)y[v++]=c[A];return y}function Ma(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const A in c)y[v++]=A;return y}}}function Zo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Ma(c),A=Rf(c),B=A.length,K=0;K<B;K++)y.call(void 0,A[K],v&&v[K],c)}var Us=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function If(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var A=c[v].indexOf("="),B=null;if(0<=A){var K=c[v].substring(0,A);B=c[v].substring(A+1)}else K=c[v];y(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function xt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xt){this.h=c.h,js(this,c.j),this.o=c.o,this.g=c.g,jr(this,c.s),this.l=c.l;var y=c.i,v=new Zi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Wi(this,v),this.m=c.m}else c&&(y=String(c).match(Us))?(this.h=!1,js(this,y[1]||"",!0),this.o=zn(y[2]||""),this.g=zn(y[3]||"",!0),jr(this,y[4]),this.l=zn(y[5]||"",!0),Wi(this,y[6]||"",!0),this.m=zn(y[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}xt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Bs(y,Jo,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Bs(y,Jo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Bs(v,v.charAt(0)=="/"?Cf:el,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Bs(v,Va)),c.join("")};function xn(c){return new xt(c)}function js(c,y,v){c.j=v?zn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function jr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Wi(c,y,v){y instanceof Zi?(c.i=y,$u(c.i,c.h)):(v||(y=Bs(y,xf)),c.i=new Zi(y,c.h))}function at(c,y,v){c.i.set(y,v)}function zs(c){return at(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Bs(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Gu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Gu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Jo=/[#\/\?@]/g,el=/[#\?:]/g,Cf=/[#\?]/g,xf=/[#\?@]/g,Va=/#/g;function Zi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Bn(c){c.g||(c.g=new Map,c.h=0,c.i&&If(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Zi.prototype,i.add=function(c,y){Bn(this),this.i=null,c=wi(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Ji(c,y){Bn(c),y=wi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function er(c,y){return Bn(c),y=wi(c,y),c.g.has(y)}i.forEach=function(c,y){Bn(this),this.g.forEach(function(v,A){v.forEach(function(B){c.call(y,B,A,this)},this)},this)},i.na=function(){Bn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const B=c[A];for(let K=0;K<B.length;K++)v.push(y[A])}return v},i.V=function(c){Bn(this);let y=[];if(typeof c=="string")er(this,c)&&(y=y.concat(this.g.get(wi(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return Bn(this),this.i=null,c=wi(this,c),er(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function tl(c,y,v){Ji(c,y),0<v.length&&(c.i=null,c.g.set(wi(c,y),Q(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const K=encodeURIComponent(String(A)),le=this.V(A);for(A=0;A<le.length;A++){var B=K;le[A]!==""&&(B+="="+encodeURIComponent(String(le[A]))),c.push(B)}}return this.i=c.join("&")};function wi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function $u(c,y){y&&!c.j&&(Bn(c),c.i=null,c.g.forEach(function(v,A){var B=A.toLowerCase();A!=B&&(Ji(this,A),tl(this,B,v))},c)),c.j=y}function qs(c,y){const v=new Ve;if(m.Image){const A=new Image;A.onload=O(qn,v,"TestLoadImage: loaded",!0,y,A),A.onerror=O(qn,v,"TestLoadImage: error",!1,y,A),A.onabort=O(qn,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=O(qn,v,"TestLoadImage: timeout",!1,y,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function ii(c,y){const v=new Ve,A=new AbortController,B=setTimeout(()=>{A.abort(),qn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(K=>{clearTimeout(B),K.ok?qn(v,"TestPingServer: ok",!0,y):qn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),qn(v,"TestPingServer: error",!1,y)})}function qn(c,y,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function Hs(){this.g=new Ki}function Si(c,y,v){const A=v||"";try{Zo(c,function(B,K){let le=B;g(B)&&(le=_n(B)),y.push(A+K+"="+encodeURIComponent(le))})}catch(B){throw y.push(A+"type="+encodeURIComponent("_badmap")),B}}function zr(c){this.l=c.Ub||null,this.j=c.eb||!1}M(zr,Vs),zr.prototype.g=function(){return new tr(this.l,this.j)},zr.prototype.i=function(c){return function(){return c}}({});function tr(c,y){mt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(tr,mt),i=tr.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Ri(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function nl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ai(this):Ri(this),this.readyState==3&&nl(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ai(this))},i.Qa=function(c){this.g&&(this.response=c,Ai(this))},i.ga=function(){this.g&&Ai(this)};function Ai(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ri(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Ri(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function il(c){let y="";return Ae(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function qt(c,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=il(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):at(c,y,v))}function tt(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(tt,mt);var ka=/^https?$/i,Fs=["POST","PUT"];i=tt.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ei.g(),this.v=this.o?kr(this.o):kr(Ei),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){Ku(this,K);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Fs,y,void 0))||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of v)this.g.setRequestHeader(K,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gs(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Ku(this,K)}};function Ku(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Pa(c),Ii(c)}function Pa(c){c.A||(c.A=!0,Je(c,"complete"),Je(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Je(this,"complete"),Je(this,"abort"),Ii(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),tt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?La(this):this.bb())},i.bb=function(){La(this)};function La(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)Bt(c.Ea,0,c);else if(Je(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=le===0){var B=String(c.D).match(Us)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),A=!ka.test(B?B.toLowerCase():"")}v=A}if(v)Je(c,"complete"),Je(c,"success");else{c.m=6;try{var K=2<Hn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Pa(c)}}finally{Ii(c)}}}}function Ii(c,y){if(c.g){Gs(c);const v=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Je(c,"ready");try{v.onreadystatechange=A}catch{}}}function Gs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),$i(y)}};function Qu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Nf(c){const y={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(se(c[A]))continue;var v=x(c[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[B]||[];y[B]=K,K.push(v)}P(y,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Ua(c){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$s("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$s("baseRetryDelayMs",5e3,c),this.cb=$s("retryDelaySeedMs",1e4,c),this.Wa=$s("forwardChannelMaxRetries",2,c),this.wa=$s("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(c&&c.concurrentRequestLimit),this.Da=new Hs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ua.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,A){Ue(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=tc(this,null,this.W),za(this)};function rl(c){if(Yu(c),c.G==3){var y=c.U++,v=xn(c.I);if(at(v,"SID",c.K),at(v,"RID",y),at(v,"TYPE","terminate"),Ks(c,v),y=new dn(c,c.j,y),y.L=2,y.v=zs(xn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=nc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ps(y)}ec(c)}function ja(c){c.g&&(Qs(c),c.g.cancel(),c.g=null)}function Yu(c){ja(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ba(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function za(c){if(!Na(c.h)&&!c.s){c.s=!0;var y=c.Ga;ae||k(),ve||(ae(),ve=!0),je.add(y,c),c.B=0}}function Df(c,y){return Da(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ke(I(c.Ga,c,y),ol(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new dn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=S(K),N(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Xu(this,B,y),v=xn(this.I),at(v,"RID",c),at(v,"CVER",22),this.D&&at(v,"X-HTTP-Session-Id",this.D),Ks(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(il(K)))+"&"+y:this.m&&qt(v,this.m,K)),Oa(this.h,B),this.Ua&&at(v,"TYPE","init"),this.P?(at(v,"$req",y),at(v,"SID","null"),B.T=!0,ni(B,v,null)):ni(B,v,y),this.G=2}}else this.G==3&&(c?sl(this,c):this.i.length==0||Na(this.h)||sl(this))};function sl(c,y){var v;y?v=y.l:v=c.U++;const A=xn(c.I);at(A,"SID",c.K),at(A,"RID",v),at(A,"AID",c.T),Ks(c,A),c.m&&c.o&&qt(A,c.m,c.o),v=new dn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Xu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Oa(c.h,v),ni(v,A,y)}function Ks(c,y){c.H&&Ae(c.H,function(v,A){at(y,A,v)}),c.l&&Zo({},function(v,A){at(y,A,v)})}function Xu(c,y,v){v=Math.min(c.i.length,v);var A=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let K=-1;for(;;){const le=["count="+v];K==-1?0<v?(K=B[0].g,le.push("ofs="+K)):K=0:le.push("ofs="+K);let Qe=!0;for(let Vt=0;Vt<v;Vt++){let Ye=B[Vt].g;const Ht=B[Vt].map;if(Ye-=K,0>Ye)K=Math.max(0,B[Vt].g-100),Qe=!1;else try{Si(Ht,le,"req"+Ye+"_")}catch{A&&A(Ht)}}if(Qe){A=le.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,A}function Wu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ae||k(),ve||(ae(),ve=!0),je.add(y,c),c.v=0}}function al(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ke(I(c.Fa,c),ol(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ke(I(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ue(10),ja(this),Zu(this))};function Qs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Zu(c){c.g=new dn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=xn(c.qa);at(y,"RID","rpc"),at(y,"SID",c.K),at(y,"AID",c.T),at(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&at(y,"TO",c.ja),at(y,"TYPE","xmlhttp"),Ks(c,y),c.m&&c.o&&qt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=zs(xn(y)),v.m=null,v.P=!0,Yi(v,c)}i.Za=function(){this.C!=null&&(this.C=null,ja(this),al(this),Ue(19))};function Ba(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ju(c,y){var v=null;if(c.g==y){Ba(c),Qs(c),c.g=null;var A=2}else if(Xo(c.h,y))v=y.D,mn(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;A=pe(),Je(A,new ct(A,v)),za(c)}else Wu(c);else if(B=y.s,B==3||B==0&&0<y.X||!(A==1&&Df(c,y)||A==2&&al(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),B){case 1:nr(c,5);break;case 4:nr(c,10);break;case 3:nr(c,6);break;default:nr(c,2)}}}function ol(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function nr(c,y){if(c.j.info("Error code "+y),y==2){var v=I(c.fb,c),A=c.Xa;const B=!A;A=new xt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||js(A,"https"),zs(A),B?qs(A.toString(),v):ii(A.toString(),v)}else Ue(2);c.G=0,c.l&&c.l.sa(y),ec(c),Yu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function ec(c){if(c.G=0,c.ka=[],c.l){const y=Wo(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ka,y),H(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function tc(c,y,v){var A=v instanceof xt?xn(v):new xt(v);if(A.g!="")y&&(A.g=y+"."+A.g),jr(A,A.s);else{var B=m.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var K=new xt(null);A&&js(K,A),y&&(K.g=y),B&&jr(K,B),v&&(K.l=v),A=K}return v=c.D,y=c.ya,v&&y&&at(A,v,y),at(A,"VER",c.la),Ks(c,A),A}function nc(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new tt(new zr({eb:v})):new tt(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}i=ic.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function qa(){}qa.prototype.g=function(c,y){return new pn(c,y)};function pn(c,y){mt.call(this),this.g=new Ua(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!se(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ci(this)}M(pn,mt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){rl(this.g)},pn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=_n(c),c=v);y.i.push(new Fu(y.Ya++,c)),y.G==3&&za(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,pn.aa.N.call(this)};function rc(c){jn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(rc,jn);function sc(){ks.call(this),this.status=1}M(sc,ks);function Ci(c){this.g=c}M(Ci,ic),Ci.prototype.ua=function(){Je(this.g,"a")},Ci.prototype.ta=function(c){Je(this.g,new rc(c))},Ci.prototype.sa=function(c){Je(this.g,new sc)},Ci.prototype.ra=function(){Je(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,_T=function(){return new qa},vT=function(){return pe()},yT=j,Zm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lr.NO_ERROR=0,Lr.TIMEOUT=8,Lr.HTTP_ERROR=6,mh=Lr,Qi.COMPLETE="complete",gT=Qi,Pr.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",mt.prototype.listen=mt.prototype.K,tu=Pr,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,pT=tt}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore",p0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new Wh("@firebase/firestore");function Eo(){return ma.logLevel}function de(i,...e){if(ma.logLevel<=$e.DEBUG){const n=e.map(Ip);ma.debug(`Firestore (${Lo}): ${i}`,...n)}}function wr(i,...e){if(ma.logLevel<=$e.ERROR){const n=e.map(Ip);ma.error(`Firestore (${Lo}): ${i}`,...n)}}function xo(i,...e){if(ma.logLevel<=$e.WARN){const n=e.map(Ip);ma.warn(`Firestore (${Lo}): ${i}`,...n)}}function Ip(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(i="Unexpected state"){const e=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+i;throw wr(e),new Error(e)}function nt(i,e){i||Ce()}function Me(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(on.UNAUTHENTICATED))}shutdown(){}}class M1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V1{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new _r,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new _r)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string"),new ET(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new on(e)}}class k1{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=on.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class P1{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new k1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L1{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Wn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,de("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new g0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string"),this.R=n.token,new g0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=U1(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Be(i,e){return i<e?-1:i>e?1:0}function Jm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Be(s,o);{const u=TT(),f=j1(u.encode(y0(i,n)),u.encode(y0(e,n)));return f!==0?f:Be(s,o)}}n+=s>65535?2:1}return Be(i.length,e.length)}function y0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function j1(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Be(i[n],e[n]);return Be(i.length,e.length)}function No(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-62135596800,_0=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*_0);return new jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<v0)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_0}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-v0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new jt(0,0))}static max(){return new De(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="__name__";class ki{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ce(),s===void 0?s=e.length-n:s>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=ki.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Be(e.length,n.length)}static compareSegments(e,n){const s=ki.isNumericId(e),o=ki.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ki.extractNumericId(e).compare(ki.extractNumericId(n)):Jm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class dt extends ki{construct(e,n,s){return new dt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const z1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends ki{construct(e,n,s){return new tn(e,n,s)}static isValidIdentifier(e){return z1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E0}static keyField(){return new tn([E0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(dt.fromString(e))}static fromName(e){return new Te(dt.fromString(e).popFirst(5))}static empty(){return new Te(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function B1(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new bs(o,Te.empty(),e)}function q1(i){return new bs(i.readTime,i.key,pu)}class bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new bs(De.min(),Te.empty(),pu)}static max(){return new bs(De.max(),Te.empty(),pu)}}function H1(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(i.documentKey,e.documentKey),n!==0?n:Be(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==F1)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,s)=>{n(e)})}static reject(e){return new te((n,s)=>{s(e)})}static waitFor(e){return new te((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=te.resolve(!1);for(const s of e)n=n.next(o=>o?te.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new te((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{f[g]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new te((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function $1(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Zh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=-1;function Jh(i){return i==null}function Ch(i){return i===0&&1/i==-1/0}function K1(i){return typeof i=="number"&&Number.isInteger(i)&&!Ch(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="";function Q1(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=T0(e)),e=Y1(i.get(n),e);return T0(e)}function Y1(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case wT:n+="";break;default:n+=u}}return n}function T0(i){return i+wT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Cs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function ST(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??en.RED,this.left=o??en.EMPTY,this.right=u??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new en(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,s,o,u){return this}insert(e,n,s){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new w0(this.data.getIterator())}getIteratorFrom(e){return new w0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class w0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new zt(tn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new AT("Invalid base64 string: "+u):u}}(e);return new nn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const X1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(i){if(nt(!!i),typeof i=="string"){let e=0;const n=X1.exec(i);if(nt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ct(i.seconds),nanos:Ct(i.nanos)}}function Ct(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ss(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="server_timestamp",IT="__type__",CT="__previous_value__",xT="__local_write_time__";function xp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[IT])===null||n===void 0?void 0:n.stringValue)===RT}function ef(i){const e=i.mapValue.fields[CT];return xp(e)?ef(e):e}function gu(i){const e=ws(i.mapValue.fields[xT].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,s,o,u,f,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const xh="(default)";class yu{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__type__",Z1="__max__",lh={mapValue:{}},DT="__vector__",Nh="value";function As(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xp(i)?4:eI(i)?9007199254740991:J1(i)?10:11:Ce()}function Bi(i,e){if(i===e)return!0;const n=As(i);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return gu(i).isEqual(gu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ws(o.timestampValue),m=ws(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return Ss(o.bytesValue).isEqual(Ss(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Ct(o.geoPointValue.latitude)===Ct(u.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Ct(o.integerValue)===Ct(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Ct(o.doubleValue),m=Ct(u.doubleValue);return f===m?Ch(f)===Ch(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return No(i.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(b0(f)!==b0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Bi(f[p],m[p])))return!1;return!0}(i,e);default:return Ce()}}function vu(i,e){return(i.values||[]).find(n=>Bi(n,e))!==void 0}function Do(i,e){if(i===e)return 0;const n=As(i),s=As(e);if(n!==s)return Be(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(i.booleanValue,e.booleanValue);case 2:return function(u,f){const m=Ct(u.integerValue||u.doubleValue),p=Ct(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return S0(i.timestampValue,e.timestampValue);case 4:return S0(gu(i),gu(e));case 5:return Jm(i.stringValue,e.stringValue);case 6:return function(u,f){const m=Ss(u),p=Ss(f);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=Be(m[g],p[g]);if(E!==0)return E}return Be(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Be(Ct(u.latitude),Ct(f.latitude));return m!==0?m:Be(Ct(u.longitude),Ct(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return A0(i.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,E;const w=u.fields||{},I=f.fields||{},O=(m=w[Nh])===null||m===void 0?void 0:m.arrayValue,M=(p=I[Nh])===null||p===void 0?void 0:p.arrayValue,Q=Be(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return Q!==0?Q:A0(O,M)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===lh.mapValue&&f===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(f===lh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const I=Jm(p[w],E[w]);if(I!==0)return I;const O=Do(m[p[w]],g[E[w]]);if(O!==0)return O}return Be(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Ce()}}function S0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Be(i,e);const n=ws(i),s=ws(e),o=Be(n.seconds,s.seconds);return o!==0?o:Be(n.nanos,s.nanos)}function A0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Do(n[o],s[o]);if(u)return u}return Be(n.length,s.length)}function Oo(i){return ep(i)}function ep(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ws(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Ss(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Te.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=ep(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${ep(n.fields[f])}`;return o+"}"}(i.mapValue):Ce()}function ph(i){switch(As(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ef(i);return e?16+ph(e):16;case 5:return 2*i.stringValue.length;case 6:return Ss(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+ph(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return Cs(s.fields,(u,f)=>{o+=u.length+ph(f)}),o}(i.mapValue);default:throw Ce()}}function R0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function tp(i){return!!i&&"integerValue"in i}function Np(i){return!!i&&"arrayValue"in i}function I0(i){return!!i&&"nullValue"in i}function C0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gh(i){return!!i&&"mapValue"in i}function J1(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[NT])===null||n===void 0?void 0:n.stringValue)===DT}function ou(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Cs(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ou(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ou(i.arrayValue.values[n]);return e}return Object.assign({},i)}function eI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Z1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(n)}setAll(e){let n=tn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=ou(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Cs(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new An(ou(this.value))}}function OT(i){const e=[];return Cs(i.fields,(n,s)=>{const o=new tn([n]);if(gh(s)){const u=OT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new ln(e,0,De.min(),De.min(),De.min(),An.empty(),0)}static newFoundDocument(e,n,s,o){return new ln(e,1,n,De.min(),s,o,0)}static newNoDocument(e,n){return new ln(e,2,n,De.min(),De.min(),An.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,De.min(),De.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function x0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(f.referenceValue),n.key):s=Do(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function N0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Bi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n="asc"){this.field=e,this.dir=n}}function tI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class Mt extends MT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new iI(e,n,s):n==="array-contains"?new aI(e,s):n==="in"?new oI(e,s):n==="not-in"?new lI(e,s):n==="array-contains-any"?new uI(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new rI(e,s):new sI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Do(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(Do(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends MT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ui(e,n)}matches(e){return VT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function VT(i){return i.op==="and"}function kT(i){return nI(i)&&VT(i)}function nI(i){for(const e of i.filters)if(e instanceof ui)return!1;return!0}function np(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+Oo(i.value);if(kT(i))return i.filters.map(e=>np(e)).join(",");{const e=i.filters.map(n=>np(n)).join(",");return`${i.op}(${e})`}}function PT(i,e){return i instanceof Mt?function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&Bi(s.value,o.value)}(i,e):i instanceof ui?function(s,o){return o instanceof ui&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&PT(f,o.filters[m]),!0):!1}(i,e):void Ce()}function LT(i){return i instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Oo(n.value)}`}(i):i instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(LT).join(" ,")+"}"}(i):"Filter"}class iI extends Mt{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class rI extends Mt{constructor(e,n){super(e,"in",n),this.keys=UT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sI extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=UT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Te.fromName(s.referenceValue))}class aI extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Np(n)&&vu(n.arrayValue,this.value)}}class oI extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vu(this.value.arrayValue,n)}}class lI extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vu(this.value.arrayValue,n)}}class uI extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>vu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function D0(i,e=null,n=[],s=[],o=null,u=null,f=null){return new cI(i,e,n,s,o,u,f)}function Dp(i){const e=Me(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>np(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Oo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Oo(s)).join(",")),e.le=n}return e.le}function Op(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!tI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!PT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!N0(i.startAt,e.startAt)&&N0(i.endAt,e.endAt)}function ip(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function hI(i,e,n,s,o,u,f,m){return new ba(i,e,n,s,o,u,f,m)}function tf(i){return new ba(i)}function O0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function jT(i){return i.collectionGroup!==null}function lu(i){const e=Me(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new zt(tn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new _u(u,s))}),n.has(tn.keyField().canonicalString())||e.he.push(new _u(tn.keyField(),s))}return e.he}function Pi(i){const e=Me(i);return e.Pe||(e.Pe=fI(e,lu(i))),e.Pe}function fI(i,e){if(i.limitType==="F")return D0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new _u(o.field,u)});const n=i.endAt?new Dh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Dh(i.startAt.position,i.startAt.inclusive):null;return D0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function rp(i,e){const n=i.filters.concat([e]);return new ba(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function sp(i,e,n){return new ba(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function nf(i,e){return Op(Pi(i),Pi(e))&&i.limitType===e.limitType}function zT(i){return`${Dp(Pi(i))}|lt:${i.limitType}`}function To(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>LT(o)).join(", ")}]`),Jh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Oo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Oo(o)).join(",")),`Target(${s})`}(Pi(i))}; limitType=${i.limitType})`}function rf(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of lu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=x0(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,lu(s),o)||s.endAt&&!function(f,m,p){const g=x0(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,lu(s),o))}(i,e)}function dI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function BT(i){return(e,n)=>{let s=!1;for(const o of lu(i)){const u=mI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function mI(i,e,n){const s=i.field.isKeyField()?Te.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Do(p,g):Ce()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return ST(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new Et(Te.comparator);function Sr(){return pI}const qT=new Et(Te.comparator);function nu(...i){let e=qT;for(const n of i)e=e.insert(n.key,n);return e}function HT(i){let e=qT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ha(){return uu()}function FT(){return uu()}function uu(){return new wa(i=>i.toString(),(i,e)=>i.isEqual(e))}const gI=new Et(Te.comparator),yI=new zt(Te.comparator);function Ke(...i){let e=yI;for(const n of i)e=e.add(n);return e}const vI=new zt(Be);function _I(){return vI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function GT(i){return{integerValue:""+i}}function $T(i,e){return K1(e)?GT(e):Mp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this._=void 0}}function EI(i,e,n){return i instanceof Eu?function(o,u){const f={fields:{[IT]:{stringValue:RT},[xT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xp(u)&&(u=ef(u)),u&&(f.fields[CT]=u),{mapValue:f}}(n,e):i instanceof Tu?QT(i,e):i instanceof bu?YT(i,e):function(o,u){const f=KT(o,u),m=M0(f)+M0(o.Ie);return tp(f)&&tp(o.Ie)?GT(m):Mp(o.serializer,m)}(i,e)}function TI(i,e,n){return i instanceof Tu?QT(i,e):i instanceof bu?YT(i,e):n}function KT(i,e){return i instanceof wu?function(s){return tp(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Eu extends sf{}class Tu extends sf{constructor(e){super(),this.elements=e}}function QT(i,e){const n=XT(e);for(const s of i.elements)n.some(o=>Bi(o,s))||n.push(s);return{arrayValue:{values:n}}}class bu extends sf{constructor(e){super(),this.elements=e}}function YT(i,e){let n=XT(e);for(const s of i.elements)n=n.filter(o=>!Bi(o,s));return{arrayValue:{values:n}}}class wu extends sf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function M0(i){return Ct(i.integerValue||i.doubleValue)}function XT(i){return Np(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n){this.field=e,this.transform=n}}function bI(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof Tu&&o instanceof Tu||s instanceof bu&&o instanceof bu?No(s.elements,o.elements,Bi):s instanceof wu&&o instanceof wu?Bi(s.Ie,o.Ie):s instanceof Eu&&o instanceof Eu}(i.transform,e.transform)}class wI{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class af{}function ZT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Vp(i.key,Jn.none()):new Cu(i.key,i.data,Jn.none());{const n=i.data,s=An.empty();let o=new zt(tn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new xs(i.key,s,new Ln(o.toArray()),Jn.none())}}function SI(i,e,n){i instanceof Cu?function(o,u,f){const m=o.value.clone(),p=k0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof xs?function(o,u,f){if(!yh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=k0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(JT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function cu(i,e,n,s){return i instanceof Cu?function(u,f,m,p){if(!yh(u.precondition,f))return m;const g=u.value.clone(),E=P0(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof xs?function(u,f,m,p){if(!yh(u.precondition,f))return m;const g=P0(u.fieldTransforms,p,f),E=f.data;return E.setAll(JT(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(i,e,n,s):function(u,f,m){return yh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function AI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=KT(s.transform,o||null);u!=null&&(n===null&&(n=An.empty()),n.set(s.field,u))}return n||null}function V0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&No(s,o,(u,f)=>bI(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Cu extends af{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xs extends af{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function JT(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function k0(i,e,n){const s=new Map;nt(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,TI(f,m,n[o]))}return s}function P0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,EI(u,f,e))}return s}class Vp extends af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RI extends af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&SI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=FT();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=ZT(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,s)=>V0(n,s))&&No(this.baseMutations,e.baseMutations,(n,s)=>V0(n,s))}}class kp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){nt(e.mutations.length===s.length);let o=function(){return gI}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new kp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,We;function NI(i){switch(i){case J.OK:return Ce();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ce()}}function eb(i){if(i===void 0)return wr("GRPC error has no .code"),J.UNKNOWN;switch(i){case Ot.OK:return J.OK;case Ot.CANCELLED:return J.CANCELLED;case Ot.UNKNOWN:return J.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return J.INTERNAL;case Ot.UNAVAILABLE:return J.UNAVAILABLE;case Ot.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ot.NOT_FOUND:return J.NOT_FOUND;case Ot.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ot.ABORTED:return J.ABORTED;case Ot.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ot.DATA_LOSS:return J.DATA_LOSS;default:return Ce()}}(We=Ot||(Ot={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new _s([4294967295,4294967295],0);function L0(i){const e=TT().encode(i),n=new mT;return n.update(e),new Uint8Array(n.digest())}function U0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new _s([n,s],0),new _s([o,u],0)]}class Pp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new iu(`Invalid padding: ${n}`);if(s<0)throw new iu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new iu(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=_s.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(_s.fromNumber(s)));return o.compare(DI)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=L0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Pp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const n=L0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new of(De.min(),o,new Et(Be),Sr(),Ke())}}class xu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new xu(s,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class tb{constructor(e,n){this.targetId=e,this.ge=n}}class nb{constructor(e,n,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class j0{constructor(){this.pe=0,this.ye=z0(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ke(),n=Ke(),s=Ke();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ce()}}),new xu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=z0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,nt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class OI{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Sr(),this.$e=uh(),this.Ue=uh(),this.Ke=new Et(Be)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(ip(u))if(s===0){const f=new Te(u.path);this.ze(n,f,ln.newNoDocument(f,De.min()))}else nt(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(e),p=m?this.nt(m,e,f):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Ss(s).toUint8Array()}catch(p){if(p instanceof AT)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Pp(f,o,u)}catch(p){return xo(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&ip(m.target)){const p=new Te(m.target.path);this._t(p).has(f)||this.ut(f,p)||this.ze(f,p,ln.newNoDocument(p,e))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=Ke();this.Ue.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new of(e,n,this.Ke,this.Qe,s);return this.Qe=Sr(),this.$e=uh(),this.Ue=uh(),this.Ke=new Et(Be),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new j0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new zt(Be),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new zt(Be),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new j0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function uh(){return new Et(Te.comparator)}function z0(){return new Et(Te.comparator)}const MI={asc:"ASCENDING",desc:"DESCENDING"},VI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kI={and:"AND",or:"OR"};class PI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ap(i,e){return i.useProto3Json||Jh(e)?e:{value:e}}function Oh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ib(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function LI(i,e){return Oh(i,e.toTimestamp())}function Li(i){return nt(!!i),De.fromTimestamp(function(n){const s=ws(n);return new jt(s.seconds,s.nanos)}(i))}function Lp(i,e){return op(i,e).canonicalString()}function op(i,e){const n=function(o){return new dt(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function rb(i){const e=dt.fromString(i);return nt(ub(e)),e}function lp(i,e){return Lp(i.databaseId,e.path)}function Mm(i,e){const n=rb(e);if(n.get(1)!==i.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(ab(n))}function sb(i,e){return Lp(i.databaseId,e)}function UI(i){const e=rb(i);return e.length===4?dt.emptyPath():ab(e)}function up(i){return new dt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ab(i){return nt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function B0(i,e,n){return{name:lp(i,e),fields:n.value.mapValue.fields}}function jI(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(nt(E===void 0||typeof E=="string"),nn.fromBase64String(E||"")):(nt(E===void 0||E instanceof Buffer||E instanceof Uint8Array),nn.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const E=g.code===void 0?J.UNKNOWN:eb(g.code);return new he(E,g.message||"")}(f);n=new nb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mm(i,s.document.name),u=Li(s.document.updateTime),f=s.document.createTime?Li(s.document.createTime):De.min(),m=new An({mapValue:{fields:s.document.fields}}),p=ln.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new vh(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mm(i,s.document),u=s.readTime?Li(s.readTime):De.min(),f=ln.newNoDocument(o,u),m=s.removedTargetIds||[];n=new vh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mm(i,s.document),u=s.removedTargetIds||[];n=new vh([],u,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new xI(o,u),m=s.targetId;n=new tb(m,f)}}return n}function zI(i,e){let n;if(e instanceof Cu)n={update:B0(i,e.key,e.value)};else if(e instanceof Vp)n={delete:lp(i,e.key)};else if(e instanceof xs)n={update:B0(i,e.key,e.data),updateMask:YI(e.fieldMask)};else{if(!(e instanceof RI))return Ce();n={verify:lp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof Eu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Tu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof bu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wu)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Ce()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:LI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce()}(i,e.precondition)),n}function BI(i,e){return i&&i.length>0?(nt(e!==void 0),i.map(n=>function(o,u){let f=o.updateTime?Li(o.updateTime):Li(u);return f.isEqual(De.min())&&(f=Li(u)),new wI(f,o.transformResults||[])}(n,e))):[]}function qI(i,e){return{documents:[sb(i,e.path)]}}function HI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=sb(i,o);const u=function(g){if(g.length!==0)return lb(ui.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(E=>function(I){return{field:bo(I.field),direction:$I(I.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=ap(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function FI(i){let e=UI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){nt(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(w){const I=ob(w);return I instanceof ui&&kT(I)?I.getFilters():[I]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(I=>function(M){return new _u(wo(M.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let m=null;n.limit&&(m=function(w){let I;return I=typeof w=="object"?w.value:w,Jh(I)?null:I}(n.limit));let p=null;n.startAt&&(p=function(w){const I=!!w.before,O=w.values||[];return new Dh(O,I)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const I=!w.before,O=w.values||[];return new Dh(O,I)}(n.endAt)),hI(e,o,f,u,m,"F",p,g)}function GI(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ob(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=wo(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=wo(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=wo(n.unaryFilter.field);return Mt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(i):i.fieldFilter!==void 0?function(n){return Mt.create(wo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(s=>ob(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(i):Ce()}function $I(i){return MI[i]}function KI(i){return VI[i]}function QI(i){return kI[i]}function bo(i){return{fieldPath:i.canonicalString()}}function wo(i){return tn.fromServerFormat(i.fieldPath)}function lb(i){return i instanceof Mt?function(n){if(n.op==="=="){if(C0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(I0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(I0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:KI(n.op),value:n.value}}}(i):i instanceof ui?function(n){const s=n.getFilters().map(o=>lb(o));return s.length===1?s[0]:{compositeFilter:{op:QI(n.op),filters:s}}}(i):Ce()}function YI(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ub(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,s,o,u=De.min(),f=De.min(),m=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.Tt=e}}function WI(i){const e=FI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.Tn=new JI}addToCollectionParentIndex(e,n){return this.Tn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(bs.min())}updateCollectionGroup(e,n,s){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class JI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zt(dt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cb=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(cb,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Mo(0)}static Kn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="LruGarbageCollector",e2=1048576;function F0([i,e],[n,s]){const o=Be(i,n);return o===0?Be(e,s):o}class t2{constructor(e){this.Hn=e,this.buffer=new zt(F0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();F0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class n2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(H0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jo(n)?de(H0,"Ignoring IndexedDB error during garbage collection: ",n):await Uo(n)}await this.er(3e5)})}}class i2{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Zh.ae);const s=new t2(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(q0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(g=Date.now(),Eo()<=$e.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function r2(i,e){return new i2(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.changes=new wa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?te.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&cu(s.mutation,o,Ln.empty(),jt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ke()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ke()){const o=ha();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=nu();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=ha();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ke()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=Sr();const f=uu(),m=function(){return uu()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof xs)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),cu(E.mutation,g,E.mutation.getFieldMask(),jt.now())):f.set(g.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>f.set(g,E)),n.forEach((g,E)=>{var w;return m.set(g,new a2(E,(w=f.get(g))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=uu();let o=new Et((f,m)=>f-m),u=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Ln.empty();E=m.applyToLocalView(g,E),s.set(p,E);const w=(o.get(m.batchId)||Ke()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,w=FT();E.forEach(I=>{if(!u.has(I)){const O=ZT(n.get(I),s.get(I));O!==null&&w.set(I,O),u=u.add(I)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,w))}return te.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):te.resolve(ha());let m=pu,p=u;return f.next(g=>te.forEach(g,(E,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(E)?te.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{p=p.insert(E,I)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Ke())).next(E=>({batchId:m,changes:HT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(s=>{let o=nu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=nu();return this.indexManager.getCollectionParents(e,u).next(m=>te.forEach(m,p=>{const g=function(w,I){return new ba(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((w,I)=>{f=f.insert(w,I)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,ln.newInvalidDocument(E)))});let m=nu();return f.forEach((p,g)=>{const E=u.get(p);E!==void 0&&cu(E.mutation,g,Ln.empty(),jt.now()),rf(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return te.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Li(o.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:WI(o.bundledQuery),readTime:Li(o.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.overlays=new Et(Te.comparator),this.Rr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ha();return te.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),te.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),te.resolve()}getOverlaysForCollection(e,n,s){const o=ha(),u=n.length+1,f=new Te(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new Et((g,E)=>g-E);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=ha(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=ha(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return te.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new CI(n,s));let u=this.Rr.get(n);u===void 0&&(u=Ke(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Vr=new zt(Kt.mr),this.gr=new zt(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Kt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new Te(new dt([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Te(new dt([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=Ke();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Te.comparator(e.key,n.key)||Be(e.Cr,n.Cr)}static pr(e,n){return Be(e.Cr,n.Cr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new zt(Kt.mr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new II(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(f)}lookupMutationBatch(e,n){return te.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Cp:this.Fr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zt(Be);return n.forEach(o=>{const u=new Kt(o,0),f=new Kt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),te.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const f=new Kt(new Te(u),0);let m=new zt(Be);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},f),te.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){nt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return te.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Mr.firstAfterOrEqual(s);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.kr=e,this.docs=function(){return new Et(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return te.resolve(s?s.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let s=Sr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():ln.newInvalidDocument(o))}),te.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Sr();const f=n.path,m=new Te(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||H1(q1(E),s)<=0||(o.has(E.key)||rf(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ce()}qr(e,n){return te.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new d2(this)}getSize(e){return te.resolve(this.size)}}class d2 extends s2{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),te.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.persistence=e,this.Qr=new wa(n=>Dp(n),Op),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Up,this.targetCount=0,this.Kr=Mo.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),te.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Mo(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.zn(n),te.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return te.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),te.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),te.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return te.resolve(s)}containsKey(e,n){return te.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Zh(0),this.zr=!1,this.zr=!0,this.jr=new c2,this.referenceDelegate=e(this),this.Hr=new m2(this),this.indexManager=new ZI,this.remoteDocumentCache=function(o){return new f2(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new XI(n),this.Yr=new l2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new h2(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new p2(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return te.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class p2 extends G1{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.ti=new Up,this.ni=null}static ri(e){return new jp(e)}get ii(){if(this.ni)return this.ni;throw Ce()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),te.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),te.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.ii,s=>{const o=Te.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,De.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return te.or([()=>te.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Mh{constructor(e,n){this.persistence=e,this.oi=new wa(s=>Q1(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=r2(this,n)}static ri(e,n){return new Mh(e,n)}Zr(){}Xr(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return te.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?te.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,n).next(m=>{m||(s++,u.removeEntry(f,De.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}ar(e,n,s){return te.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Ke(),o=Ke();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return cR()?8:$1(hn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new g2;return this._s(e,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,f,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(Eo()<=$e.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),te.resolve()):(Eo()<=$e.DEBUG&&de("QueryEngine","Query:",To(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(Eo()<=$e.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(n))):te.resolve())}rs(e,n){if(O0(n))return te.resolve(null);let s=Pi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=sp(n,null,"F"),s=Pi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=Ke(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,f,p.readTime)?this.rs(e,sp(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return O0(n)||o.isEqual(De.min())?te.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?te.resolve(null):(Eo()<=$e.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(n)),this.hs(e,f,n,B1(o,pu)).next(m=>m))})}cs(e,n){let s=new zt(BT(e));return n.forEach((o,u)=>{rf(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return Eo()<=$e.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",To(n)),this.ns.getDocumentsMatchingQuery(e,n,bs.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",v2=3e8;class _2{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new Et(Be),this.Is=new wa(u=>Dp(u),Op),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o2(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function E2(i,e,n,s){return new _2(i,e,n,s)}async function fb(i,e){const n=Me(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=Ke();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:f,addedBatchIds:m}))})})}function T2(i,e){const n=Me(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const w=g.batch,I=w.keys();let O=te.resolve();return I.forEach(M=>{O=O.next(()=>E.getEntry(p,M)).next(Q=>{const H=g.docVersions.get(M);nt(H!==null),Q.version.compareTo(H)<0&&(w.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),E.addEntry(Q)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Ke();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function db(i){const e=Me(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function b2(i,e){const n=Me(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((E,w)=>{const I=o.get(w);if(!I)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,w).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,w)));let O=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?O=O.withResumeToken(nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),o=o.insert(w,O),function(Q,H,Y){return Q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=v2?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(I,O,E)&&m.push(n.Hr.updateTargetData(u,O))});let p=Sr(),g=Ke();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(w2(u,f,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(De.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(w=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return te.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function w2(i,e,n){let s=Ke(),o=Ke();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let f=Sr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):de(Bp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:f,fs:o}})}function S2(i,e){const n=Me(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Cp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function A2(i,e){const n=Me(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,te.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new ps(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function cp(i,e,n){const s=Me(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!jo(f))throw f;de(Bp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function G0(i,e,n){const s=Me(i);let o=De.min(),u=Ke();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,E){const w=Me(p),I=w.Is.get(E);return I!==void 0?te.resolve(w.Ts.get(I)):w.Hr.getTargetData(g,E)}(s,f,Pi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,n?o:De.min(),n?u:Ke())).next(m=>(R2(s,dI(e),m),{documents:m,gs:u})))}function R2(i,e,n){let s=i.Es.get(e)||De.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class $0{constructor(){this.activeTargetIds=_I()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I2{constructor(){this.ho=new $0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new $0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="ConnectivityMonitor";class Q0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(K0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(K0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function hp(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",x2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class N2{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===xh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const f=hp(),m=this.bo(e,n.toUriEncodedString());de(Vm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(de(Vm,`Received RPC '${e}' ${f}: `,g),g),g=>{throw xo(Vm,`RPC '${e}' ${f} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,f){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=x2[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class O2 extends N2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=hp();return new Promise((f,m)=>{const p=new pT;p.setWithCredentials(!0),p.listenOnce(gT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case mh.NO_ERROR:const E=p.getResponseJson();de(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case mh.TIMEOUT:de(an,`RPC '${e}' ${u} timed out`),m(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const w=p.getStatus();if(de(an,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I==null?void 0:I.error;if(O&&O.status&&O.message){const M=function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN}(O.status);m(new he(M,O.message))}else m(new he(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new he(J.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{de(an,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);de(an,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=hp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=_T(),m=vT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");de(an,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=f.createWebChannel(E,p);let I=!1,O=!1;const M=new D2({Fo:H=>{O?de(an,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(I||(de(an,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),de(an,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Mo:()=>w.close()}),Q=(H,Y,se)=>{H.listen(Y,ne=>{try{se(ne)}catch(fe){setTimeout(()=>{throw fe},0)}})};return Q(w,tu.EventType.OPEN,()=>{O||(de(an,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),Q(w,tu.EventType.CLOSE,()=>{O||(O=!0,de(an,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),Q(w,tu.EventType.ERROR,H=>{O||(O=!0,xo(an,`RPC '${e}' stream ${o} transport errored:`,H),M.Uo(new he(J.UNAVAILABLE,"The operation could not be completed")))}),Q(w,tu.EventType.MESSAGE,H=>{var Y;if(!O){const se=H.data[0];nt(!!se);const ne=se,fe=(ne==null?void 0:ne.error)||((Y=ne[0])===null||Y===void 0?void 0:Y.error);if(fe){de(an,`RPC '${e}' stream ${o} received error:`,fe);const me=fe.status;let Ae=function(R){const N=Ot[R];if(N!==void 0)return eb(N)}(me),P=fe.message;Ae===void 0&&(Ae=J.INTERNAL,P="Unknown error status: "+me+" with message "+fe.message),O=!0,M.Uo(new he(Ae,P)),w.close()}else de(an,`RPC '${e}' stream ${o} received:`,se),M.Ko(se)}}),Q(m,yT.STAT_EVENT,H=>{H.stat===Zm.PROXY?de(an,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Zm.NOPROXY&&de(an,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(i){return new PI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="PersistentStream";class pb{constructor(e,n,s,o,u,f,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new mb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new he(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de(Y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(de(Y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class M2 extends pb{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=jI(this.serializer,e),s=function(u){if(!("targetChange"in u))return De.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?De.min():f.readTime?Li(f.readTime):De.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=up(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=ip(p)?{documents:qI(u,p)}:{query:HI(u,p).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=ib(u,f.resumeToken);const g=ap(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(De.min())>0){m.readTime=Oh(u,f.snapshotVersion.toTimestamp());const g=ap(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=GI(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=up(this.serializer),n.removeTarget=e,this.I_(n)}}class V2 extends pb{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=BI(e.writeResults,e.commitTime),s=Li(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=up(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>zI(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{}class P2 extends k2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,op(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(J.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,op(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(J.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class L2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(wr(n),this.N_=!1):de("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class U2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{Sa(this)&&(de(pa,"Restarting streams for network reachability change."),await async function(p){const g=Me(p);g.W_.add(4),await Nu(g),g.j_.set("Unknown"),g.W_.delete(4),await uf(g)}(this))})}),this.j_=new L2(s,o)}}async function uf(i){if(Sa(i))for(const e of i.G_)await e(!0)}async function Nu(i){for(const e of i.G_)await e(!1)}function gb(i,e){const n=Me(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Gp(n)?Fp(n):zo(n).c_()&&Hp(n,e))}function qp(i,e){const n=Me(i),s=zo(n);n.K_.delete(e),s.c_()&&yb(n,e),n.K_.size===0&&(s.c_()?s.P_():Sa(n)&&n.j_.set("Unknown"))}function Hp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(i).y_(e)}function yb(i,e){i.H_.Ne(e),zo(i).w_(e)}function Fp(i){i.H_=new OI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),zo(i).start(),i.j_.B_()}function Gp(i){return Sa(i)&&!zo(i).u_()&&i.K_.size>0}function Sa(i){return Me(i).W_.size===0}function vb(i){i.H_=void 0}async function j2(i){i.j_.set("Online")}async function z2(i){i.K_.forEach((e,n)=>{Hp(i,e)})}async function B2(i,e){vb(i),Gp(i)?(i.j_.q_(e),Fp(i)):i.j_.set("Unknown")}async function q2(i,e,n){if(i.j_.set("Online"),e instanceof nb&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){de(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(i,s)}else if(e instanceof vh?i.H_.We(e):e instanceof tb?i.H_.Ze(e):i.H_.je(e),!n.isEqual(De.min()))try{const s=await db(i.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.K_.get(g);E&&u.K_.set(g,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const E=u.K_.get(p);if(!E)return;u.K_.set(p,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),yb(u,p);const w=new ps(E.target,p,g,E.sequenceNumber);Hp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){de(pa,"Failed to raise snapshot:",s),await Vh(i,s)}}async function Vh(i,e,n){if(!jo(e))throw e;i.W_.add(1),await Nu(i),i.j_.set("Offline"),n||(n=()=>db(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{de(pa,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await uf(i)})}function _b(i,e){return e().catch(n=>Vh(i,n,e))}async function cf(i){const e=Me(i),n=Rs(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:Cp;for(;H2(e);)try{const o=await S2(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,F2(e,o)}catch(o){await Vh(e,o)}Eb(e)&&Tb(e)}function H2(i){return Sa(i)&&i.U_.length<10}function F2(i,e){i.U_.push(e);const n=Rs(i);n.c_()&&n.S_&&n.b_(e.mutations)}function Eb(i){return Sa(i)&&!Rs(i).u_()&&i.U_.length>0}function Tb(i){Rs(i).start()}async function G2(i){Rs(i).C_()}async function $2(i){const e=Rs(i);for(const n of i.U_)e.b_(n.mutations)}async function K2(i,e,n){const s=i.U_.shift(),o=kp.from(s,e,n);await _b(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await cf(i)}async function Q2(i,e){e&&Rs(i).S_&&await async function(s,o){if(function(f){return NI(f)&&f!==J.ABORTED}(o.code)){const u=s.U_.shift();Rs(s).h_(),await _b(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await cf(s)}}(i,e),Eb(i)&&Tb(i)}async function X0(i,e){const n=Me(i);n.asyncQueue.verifyOperationInProgress(),de(pa,"RemoteStore received new credentials");const s=Sa(n);n.W_.add(3),await Nu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await uf(n)}async function Y2(i,e){const n=Me(i);e?(n.W_.delete(2),await uf(n)):e||(n.W_.add(2),await Nu(n),n.j_.set("Unknown"))}function zo(i){return i.J_||(i.J_=function(n,s,o){const u=Me(n);return u.M_(),new M2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:j2.bind(null,i),No:z2.bind(null,i),Lo:B2.bind(null,i),p_:q2.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Gp(i)?Fp(i):i.j_.set("Unknown")):(await i.J_.stop(),vb(i))})),i.J_}function Rs(i){return i.Y_||(i.Y_=function(n,s,o){const u=Me(n);return u.M_(),new V2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:G2.bind(null,i),Lo:Q2.bind(null,i),D_:$2.bind(null,i),v_:K2.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await cf(i)):(await i.Y_.stop(),i.U_.length>0&&(de(pa,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new $p(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(i,e){if(wr("AsyncQueue",`${e}: ${i}`),jo(i))return new he(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=nu(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.Z_=new Et(Te.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ce():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Vo{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Vo(e,n,Ao.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class W2{constructor(){this.queries=Z0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=Z0(),u.forEach((f,m)=>{for(const p of m.ta)p.onError(s)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function Z0(){return new wa(i=>zT(i),nf)}async function Qp(i,e){const n=Me(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new X2,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Kp(f,`Initialization of query '${To(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Xp(n)}async function Yp(i,e){const n=Me(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Z2(i,e){const n=Me(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&Xp(n)}function J2(i,e,n){const s=Me(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Xp(i){i.ia.forEach(e=>{e.next()})}var fp,J0;(J0=fp||(fp={}))._a="default",J0.Cache="cache";class Wp{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.key=e}}class wb{constructor(e){this.key=e}}class eC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ke(),this.mutatedKeys=Ke(),this.ya=BT(e),this.wa=new Ao(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new W0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,w)=>{const I=o.get(E),O=rf(this.query,w)?w:null,M=!!I&&this.mutatedKeys.has(I.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let H=!1;I&&O?I.data.isEqual(O.data)?M!==Q&&(s.track({type:3,doc:O}),H=!0):this.va(I,O)||(s.track({type:2,doc:O}),H=!0,(p&&this.ya(O,p)>0||g&&this.ya(O,g)<0)&&(m=!0)):!I&&O?(s.track({type:0,doc:O}),H=!0):I&&!O&&(s.track({type:1,doc:I}),H=!0,(p||g)&&(m=!0)),H&&(O?(f=f.add(O),u=Q?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((E,w)=>function(O,M){const Q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return Q(O)-Q(M)}(E.type,w.type)||this.ya(E.doc,w.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,f.length!==0||g?{snapshot:new Vo(this.query,e.wa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new W0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ke(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new wb(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new bb(s))}),n}Oa(e){this.fa=e.gs,this.pa=Ke();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Vo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Zp="SyncEngine";class tC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class nC{constructor(e){this.key=e,this.Ba=!1}}class iC{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new wa(m=>zT(m),nf),this.qa=new Map,this.Qa=new Set,this.$a=new Et(Te.comparator),this.Ua=new Map,this.Ka=new Up,this.Wa={},this.Ga=new Map,this.za=Mo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function rC(i,e,n=!0){const s=xb(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Sb(s,e,n,!0),o}async function sC(i,e){const n=xb(i);await Sb(n,e,!0,!1)}async function Sb(i,e,n,s){const o=await A2(i.localStore,Pi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await aC(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&gb(i.remoteStore,o),m}async function aC(i,e,n,s,o){i.Ha=(w,I,O)=>async function(Q,H,Y,se){let ne=H.view.ba(Y);ne.ls&&(ne=await G0(Q.localStore,H.query,!1).then(({documents:P})=>H.view.ba(P,ne)));const fe=se&&se.targetChanges.get(H.targetId),me=se&&se.targetMismatches.get(H.targetId)!=null,Ae=H.view.applyChanges(ne,Q.isPrimaryClient,fe,me);return tE(Q,H.targetId,Ae.Ma),Ae.snapshot}(i,w,I,O);const u=await G0(i.localStore,e,!0),f=new eC(e,u.gs),m=f.ba(u.documents),p=xu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,p);tE(i,n,g.Ma);const E=new tC(e,n,f);return i.ka.set(e,E),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function oC(i,e,n){const s=Me(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!nf(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await cp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&qp(s.remoteStore,o.targetId),dp(s,o.targetId)}).catch(Uo)):(dp(s,o.targetId),await cp(s.localStore,o.targetId,!0))}async function lC(i,e){const n=Me(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function uC(i,e,n){const s=gC(i);try{const o=await function(f,m){const p=Me(f),g=jt.now(),E=m.reduce((O,M)=>O.add(M.key),Ke());let w,I;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let M=Sr(),Q=Ke();return p.ds.getEntries(O,E).next(H=>{M=H,M.forEach((Y,se)=>{se.isValidDocument()||(Q=Q.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,M)).next(H=>{w=H;const Y=[];for(const se of m){const ne=AI(se,w.get(se.key).overlayedDocument);ne!=null&&Y.push(new xs(se.key,ne,OT(ne.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,Y,m)}).next(H=>{I=H;const Y=H.applyToLocalDocumentSet(w,Q);return p.documentOverlayCache.saveOverlays(O,H.batchId,Y)})}).then(()=>({batchId:I.batchId,changes:HT(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Wa[f.currentUser.toKey()];g||(g=new Et(Be)),g=g.insert(m,p),f.Wa[f.currentUser.toKey()]=g}(s,o.batchId,n),await Du(s,o.changes),await cf(s.remoteStore)}catch(o){const u=Kp(o,"Failed to persist write");n.reject(u)}}async function Ab(i,e){const n=Me(i);try{const s=await b2(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Ua.get(u);f&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?nt(f.Ba):o.removedDocuments.size>0&&(nt(f.Ba),f.Ba=!1))}),await Du(n,s,e)}catch(s){await Uo(s)}}function eE(i,e,n){const s=Me(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=Me(f);p.onlineState=m;let g=!1;p.queries.forEach((E,w)=>{for(const I of w.ta)I.sa(m)&&(g=!0)}),g&&Xp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function cC(i,e,n){const s=Me(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let f=new Et(Te.comparator);f=f.insert(u,ln.newNoDocument(u,De.min()));const m=Ke().add(u),p=new of(De.min(),new Map,new Et(Be),f,m);await Ab(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),Jp(s)}else await cp(s.localStore,e,!1).then(()=>dp(s,e,n)).catch(Uo)}async function hC(i,e){const n=Me(i),s=e.batch.batchId;try{const o=await T2(n.localStore,e);Ib(n,s,null),Rb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Du(n,o)}catch(o){await Uo(o)}}async function fC(i,e,n){const s=Me(i);try{const o=await function(f,m){const p=Me(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(w=>(nt(w!==null),E=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);Ib(s,e,n),Rb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Du(s,o)}catch(o){await Uo(o)}}function Rb(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Ib(i,e,n){const s=Me(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function dp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Cb(i,s)})}function Cb(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(qp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Jp(i))}function tE(i,e,n){for(const s of n)s instanceof bb?(i.Ka.addReference(s.key,e),dC(i,s)):s instanceof wb?(de(Zp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Cb(i,s.key)):Ce()}function dC(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(de(Zp,"New document in limbo: "+n),i.Qa.add(s),Jp(i))}function Jp(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new Te(dt.fromString(e)),s=i.za.next();i.Ua.set(s,new nC(n)),i.$a=i.$a.insert(n,s),gb(i.remoteStore,new ps(Pi(tf(n.path)),s,"TargetPurposeLimboResolution",Zh.ae))}}async function Du(i,e,n){const s=Me(i),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{f.push(s.Ha(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=zp.Yi(p.targetId,g);u.push(w)}}))}),await Promise.all(f),s.La.p_(o),await async function(p,g){const E=Me(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>te.forEach(g,I=>te.forEach(I.Hi,O=>E.persistence.referenceDelegate.addReference(w,I.targetId,O)).next(()=>te.forEach(I.Ji,O=>E.persistence.referenceDelegate.removeReference(w,I.targetId,O)))))}catch(w){if(!jo(w))throw w;de(Bp,"Failed to update sequence numbers: "+w)}for(const w of g){const I=w.targetId;if(!w.fromCache){const O=E.Ts.get(I),M=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(M);E.Ts=E.Ts.insert(I,Q)}}}(s.localStore,u))}async function mC(i,e){const n=Me(i);if(!n.currentUser.isEqual(e)){de(Zp,"User change. New user:",e.toKey());const s=await fb(n.localStore,e);n.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new he(J.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Du(n,s.Rs)}}function pC(i,e){const n=Me(i),s=n.Ua.get(e);if(s&&s.Ba)return Ke().add(s.key);{let o=Ke();const u=n.qa.get(e);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function xb(i){const e=Me(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ab.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cC.bind(null,e),e.La.p_=Z2.bind(null,e.eventManager),e.La.Ja=J2.bind(null,e.eventManager),e}function gC(i){const e=Me(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fC.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return E2(this.persistence,new y2,e.initialUser,this.serializer)}Xa(e){return new hb(jp.ri,this.serializer)}Za(e){return new I2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class yC extends kh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){nt(this.persistence.referenceDelegate instanceof Mh);const s=this.persistence.referenceDelegate.garbageCollector;return new n2(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new hb(s=>Mh.ri(s,n),this.serializer)}}class mp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>eE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=mC.bind(null,this.syncEngine),await Y2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new W2}()}createDatastore(e){const n=lf(e.databaseInfo.databaseId),s=function(u){return new O2(u)}(e.databaseInfo);return function(u,f,m,p){return new P2(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new U2(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>eE(this.syncEngine,n,0),function(){return Q0.D()?new Q0:new C2}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,E){const w=new iC(o,u,f,m,p,g);return E&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Me(o);de(pa,"RemoteStore shutting down."),u.W_.add(5),await Nu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mp.provider={build:()=>new mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="FirestoreClient";class vC{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=bT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{de(Is,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(de(Is,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Pm(i,e){i.asyncQueue.verifyOperationInProgress(),de(Is,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await fb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function nE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await _C(i);de(Is,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>X0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>X0(e.remoteStore,o)),i._onlineComponents=e}async function _C(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(Is,"Using user provided OfflineComponentProvider");try{await Pm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await Pm(i,new kh)}}else de(Is,"Using default OfflineComponentProvider"),await Pm(i,new yC(void 0));return i._offlineComponents}async function Nb(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(Is,"Using user provided OnlineComponentProvider"),await nE(i,i._uninitializedComponentsProvider._online)):(de(Is,"Using default OnlineComponentProvider"),await nE(i,new mp))),i._onlineComponents}function EC(i){return Nb(i).then(e=>e.syncEngine)}async function Ph(i){const e=await Nb(i),n=e.eventManager;return n.onListen=rC.bind(null,e.syncEngine),n.onUnlisten=oC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lC.bind(null,e.syncEngine),n}function TC(i,e,n={}){const s=new _r;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new eg({next:I=>{E.su(),f.enqueueAndForget(()=>Yp(u,w));const O=I.docs.has(m);!O&&I.fromCache?g.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&p&&p.source==="server"?g.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Wp(tf(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Qp(u,w)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}function bC(i,e,n={}){const s=new _r;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new eg({next:I=>{E.su(),f.enqueueAndForget(()=>Yp(u,w)),I.fromCache&&p.source==="server"?g.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Wp(m,E,{includeMetadataChanges:!0,Ta:!0});return Qp(u,w)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(i,e,n){if(!n)throw new he(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function wC(i,e,n,s){if(e===!0&&s===!0)throw new he(J.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function rE(i){if(!Te.isDocumentKey(i))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function sE(i){if(Te.isDocumentKey(i))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function hf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce()}function yn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hf(i);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firestore.googleapis.com",aE=!0;class oE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ob,this.ssl=aE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:aE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e2)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Db((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new O1;switch(s.type){case"firstParty":return new P1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=iE.get(n);s&&(de("ComponentProvider","Removing Datastore"),iE.delete(n),s.terminate())}(this),Promise.resolve()}}function SC(i,e,n,s={}){var o;const u=(i=yn(i,Ou))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==Ob&&u.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!Ts(p,f)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=on.MOCK_USER;else{g=rR(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(w)}i._authCredentials=new M1(new ET(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Cr(this.firestore,e,this._query)}}class cn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Es extends Cr{constructor(e,n,s){super(e,n,tf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Te(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function un(i,e,...n){if(i=St(i),tg("collection","path",e),i instanceof Ou){const s=dt.fromString(e,...n);return sE(s),new Es(i,null,s)}{if(!(i instanceof cn||i instanceof Es))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(dt.fromString(e,...n));return sE(s),new Es(i.firestore,null,s)}}function Lm(i,e){if(i=yn(i,Ou),tg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cr(i,null,function(s){return new ba(dt.emptyPath(),s)}(e))}function Ut(i,e,...n){if(i=St(i),arguments.length===1&&(e=bT.newId()),tg("doc","path",e),i instanceof Ou){const s=dt.fromString(e,...n);return rE(s),new cn(i,null,new Te(s))}{if(!(i instanceof cn||i instanceof Es))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(dt.fromString(e,...n));return rE(s),new cn(i.firestore,i instanceof Es?i.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="AsyncQueue";class uE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new mb(this,"async_queue_retry"),this.Su=()=>{const s=km();s&&de(lE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new _r;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!jo(e))throw e;de(lE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw wr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ce()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function cE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class Ar extends Ou{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new uE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uE(e),this._firestoreClient=void 0,await e}}}function AC(i,e){const n=typeof i=="object"?i:Rp(),s=typeof i=="string"?i:xh,o=Ta(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=nR("firestore");u&&SC(o,...u)}return o}function ff(i){if(i._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||RC(i),i._firestoreClient}function RC(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,E){return new W1(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Db(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new vC(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ko(nn.fromBase64String(e))}catch(n){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ko(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=/^__.*__$/;class CC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class Mb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class rg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Lh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Vb(this.Lu)&&IC.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class xC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||lf(e)}ju(e,n,s,o=!1){return new rg({Lu:e,methodName:n,zu:s,path:tn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mf(i){const e=i._freezeSettings(),n=lf(i._databaseId);return new xC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function kb(i,e,n,s,o,u={}){const f=i.ju(u.merge||u.mergeFields?2:0,e,n,o);og("Data must be an object, but it was:",f,s);const m=Pb(s,f);let p,g;if(u.merge)p=new Ln(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const I=pp(e,w,n);if(!f.contains(I))throw new he(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Ub(E,I)||E.push(I)}p=new Ln(E),g=f.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=f.fieldTransforms;return new CC(new An(m),p,g)}class pf extends Mu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pf}}class sg extends Mu{_toFieldTransform(e){return new WT(e.path,new Eu)}isEqual(e){return e instanceof sg}}class ag extends Mu{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new wu(e.serializer,$T(e.serializer,this.Ju));return new WT(e.path,n)}isEqual(e){return e instanceof ag&&this.Ju===e.Ju}}function NC(i,e,n,s){const o=i.ju(1,e,n);og("Data must be an object, but it was:",o,s);const u=[],f=An.empty();Cs(s,(p,g)=>{const E=lg(e,p,n);g=St(g);const w=o.Uu(E);if(g instanceof pf)u.push(E);else{const I=Vu(g,w);I!=null&&(u.push(E),f.set(E,I))}});const m=new Ln(u);return new Mb(f,m,o.fieldTransforms)}function DC(i,e,n,s,o,u){const f=i.ju(1,e,n),m=[pp(e,s,n)],p=[o];if(u.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(pp(e,u[I])),p.push(u[I+1]);const g=[],E=An.empty();for(let I=m.length-1;I>=0;--I)if(!Ub(g,m[I])){const O=m[I];let M=p[I];M=St(M);const Q=f.Uu(O);if(M instanceof pf)g.push(O);else{const H=Vu(M,Q);H!=null&&(g.push(O),E.set(O,H))}}const w=new Ln(g);return new Mb(E,w,f.fieldTransforms)}function OC(i,e,n,s=!1){return Vu(n,i.ju(s?4:3,e))}function Vu(i,e){if(Lb(i=St(i)))return og("Unsupported field value:",e,i),Pb(i,e);if(i instanceof Mu)return function(s,o){if(!Vb(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=Vu(m,o.Ku(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $T(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=jt.fromDate(s);return{timestampValue:Oh(o.serializer,u)}}if(s instanceof jt){const u=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(o.serializer,u)}}if(s instanceof ng)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ko)return{bytesValue:ib(o.serializer,s._byteString)};if(s instanceof cn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ig)return function(f,m){return{mapValue:{fields:{[NT]:{stringValue:DT},[Nh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return Mp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${hf(s)}`)}(i,e)}function Pb(i,e){const n={};return ST(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(i,(s,o)=>{const u=Vu(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Lb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof jt||i instanceof ng||i instanceof ko||i instanceof cn||i instanceof Mu||i instanceof ig)}function og(i,e,n){if(!Lb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=hf(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function pp(i,e,n){if((e=St(e))instanceof df)return e._internalPath;if(typeof e=="string")return lg(i,e);throw Lh("Field path arguments must be of type string or ",i,!1,void 0,n)}const MC=new RegExp("[~\\*/\\[\\]]");function lg(i,e,n){if(e.search(MC)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new df(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Lh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new he(J.INVALID_ARGUMENT,m+i+p)}function Ub(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VC extends jb{data(){return super.data()}}function gf(i,e){return typeof e=="string"?lg(i,e):e instanceof df?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class Bb extends ug{}function ru(i,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof cg).length,m=u.filter(p=>p instanceof yf).length;if(f>1||f>0&&m>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class yf extends Bb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new yf(e,n,s)}_apply(e){const n=this._parse(e);return Hb(e._query,n),new Cr(e.firestore,e.converter,rp(e._query,n))}_parse(e){const n=mf(e.firestore);return function(u,f,m,p,g,E,w){let I;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){fE(w,E);const M=[];for(const Q of w)M.push(hE(p,u,Q));I={arrayValue:{values:M}}}else I=hE(p,u,w)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||fE(w,E),I=OC(m,f,w,E==="in"||E==="not-in");return Mt.create(g,E,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hh(i,e,n){const s=e,o=gf("where",i);return yf._create(o,s,n)}class cg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)Hb(f,p),f=rp(f,p)}(e._query,n),new Cr(e.firestore,e.converter,rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends Bb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(u,f)}(e._query,this._field,this._direction);return new Cr(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new ba(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function qb(i,e="asc"){const n=e,s=gf("orderBy",i);return hg._create(s,n)}function hE(i,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jT(e)&&n.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(dt.fromString(n));if(!Te.isDocumentKey(s))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return R0(i,new Te(s))}if(n instanceof cn)return R0(i,n._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hf(n)}.`)}function fE(i,e){if(!Array.isArray(i)||i.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hb(i,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kC{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Cs(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Nh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>Ct(f.doubleValue));return new ig(u)}convertGeoPoint(e){return new ng(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ef(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const n=ws(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=dt.fromString(e);nt(ub(s));const o=new yu(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(n)||wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gb extends jb{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(gf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class _h extends Gb{data(e={}){return super.data(e)}}class $b{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new su(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new _h(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:PC(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(i){i=yn(i,cn);const e=yn(i.firestore,Ar);return TC(ff(e),i._key).then(n=>Kb(e,i,n))}class fg extends kC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function Sn(i){i=yn(i,Cr);const e=yn(i.firestore,Ar),n=ff(e),s=new fg(e);return zb(i._query),bC(n,i._query).then(o=>new $b(e,s,i,o))}function Um(i,e,n){i=yn(i,cn);const s=yn(i.firestore,Ar),o=Fb(i.converter,e,n);return vf(s,[kb(mf(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Jn.none())])}function da(i,e,n,...s){i=yn(i,cn);const o=yn(i.firestore,Ar),u=mf(o);let f;return f=typeof(e=St(e))=="string"||e instanceof df?DC(u,"updateDoc",i._key,e,n,s):NC(u,"updateDoc",i._key,e),vf(o,[f.toMutation(i._key,Jn.exists(!0))])}function hu(i){return vf(yn(i.firestore,Ar),[new Vp(i._key,Jn.none())])}function Uh(i,e){const n=yn(i.firestore,Ar),s=Ut(i),o=Fb(i.converter,e);return vf(n,[kb(mf(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then(()=>s)}function LC(i,...e){var n,s,o;i=St(i);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||cE(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(cE(e[f])){const w=e[f];e[f]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[f+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[f+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,E;if(i instanceof cn)g=yn(i.firestore,Ar),E=tf(i._key.path),p={next:w=>{e[f]&&e[f](Kb(g,i,w))},error:e[f+1],complete:e[f+2]};else{const w=yn(i,Cr);g=yn(w.firestore,Ar),E=w._query;const I=new fg(g);p={next:O=>{e[f]&&e[f](new $b(g,I,w,O))},error:e[f+1],complete:e[f+2]},zb(i._query)}return function(I,O,M,Q){const H=new eg(Q),Y=new Wp(O,H,M);return I.asyncQueue.enqueueAndForget(async()=>Qp(await Ph(I),Y)),()=>{H.su(),I.asyncQueue.enqueueAndForget(async()=>Yp(await Ph(I),Y))}}(ff(g),E,m,p)}function vf(i,e){return function(s,o){const u=new _r;return s.asyncQueue.enqueueAndForget(async()=>uC(await EC(s),o,u)),u.promise}(ff(i),e)}function Kb(i,e,n){const s=n.docs.get(e._key),o=new fg(i);return new Gb(i,o,e._key,s,new su(n.hasPendingWrites,n.fromCache),e.converter)}function gp(){return new sg("serverTimestamp")}function vo(i){return new ag("increment",i)}(function(e,n=!0){(function(o){Lo=o})(Po),zi(new li("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Ar(new V1(s.getProvider("auth-internal")),new L1(f,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(g.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Zn(m0,p0,e),Zn(m0,p0,"esm2017")})();const Qb="@firebase/installations",dg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=1e4,Xb=`w:${dg}`,Wb="FIS_v2",UC="https://firebaseinstallations.googleapis.com/v1",jC=60*60*1e3,zC="installations",BC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ga=new Ea(zC,BC,qC);function Zb(i){return i instanceof fi&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb({projectId:i}){return`${UC}/projects/${i}/installations`}function ew(i){return{token:i.token,requestStatus:2,expiresIn:FC(i.expiresIn),creationTime:Date.now()}}async function tw(i,e){const s=(await e.json()).error;return ga.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function nw({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function HC(i,{refreshToken:e}){const n=nw(i);return n.append("Authorization",GC(e)),n}async function iw(i){const e=await i();return e.status>=500&&e.status<600?i():e}function FC(i){return Number(i.replace("s","000"))}function GC(i){return`${Wb} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=Jb(i),o=nw(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={fid:n,authVersion:Wb,appId:i.appId,sdkVersion:Xb},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await iw(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:ew(g.authToken)}}else throw await tw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=/^[cdef][\w-]{21}$/,yp="";function YC(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=XC(i);return QC.test(n)?n:yp}catch{return yp}}function XC(i){return KC(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map;function aw(i,e){const n=_f(i);ow(n,e),WC(n,e)}function ow(i,e){const n=sw.get(i);if(n)for(const s of n)s(e)}function WC(i,e){const n=ZC();n&&n.postMessage({key:i,fid:e}),JC()}let fa=null;function ZC(){return!fa&&"BroadcastChannel"in self&&(fa=new BroadcastChannel("[Firebase] FID Change"),fa.onmessage=i=>{ow(i.data.key,i.data.fid)}),fa}function JC(){sw.size===0&&fa&&(fa.close(),fa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="firebase-installations-database",tx=1,ya="firebase-installations-store";let jm=null;function mg(){return jm||(jm=cT(ex,tx,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(ya)}}})),jm}async function jh(i,e){const n=_f(i),o=(await mg()).transaction(ya,"readwrite"),u=o.objectStore(ya),f=await u.get(n);return await u.put(e,n),await o.done,(!f||f.fid!==e.fid)&&aw(i,e.fid),e}async function lw(i){const e=_f(i),s=(await mg()).transaction(ya,"readwrite");await s.objectStore(ya).delete(e),await s.done}async function Ef(i,e){const n=_f(i),o=(await mg()).transaction(ya,"readwrite"),u=o.objectStore(ya),f=await u.get(n),m=e(f);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!f||f.fid!==m.fid)&&aw(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pg(i){let e;const n=await Ef(i.appConfig,s=>{const o=nx(s),u=ix(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===yp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nx(i){const e=i||{fid:YC(),registrationStatus:0};return uw(e)}function ix(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ga.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=rx(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sx(i)}:{installationEntry:e}}async function rx(i,e){try{const n=await $C(i,e);return jh(i.appConfig,n)}catch(n){throw Zb(n)&&n.customData.serverCode===409?await lw(i.appConfig):await jh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function sx(i){let e=await dE(i.appConfig);for(;e.registrationStatus===1;)await rw(100),e=await dE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await pg(i);return s||n}return e}function dE(i){return Ef(i,e=>{if(!e)throw ga.create("installation-not-found");return uw(e)})}function uw(i){return ax(i)?{fid:i.fid,registrationStatus:0}:i}function ax(i){return i.registrationStatus===1&&i.registrationTime+Yb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox({appConfig:i,heartbeatServiceProvider:e},n){const s=lx(i,n),o=HC(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={installation:{sdkVersion:Xb,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await iw(()=>fetch(s,m));if(p.ok){const g=await p.json();return ew(g)}else throw await tw("Generate Auth Token",p)}function lx(i,{fid:e}){return`${Jb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(i,e=!1){let n;const s=await Ef(i.appConfig,u=>{if(!cw(u))throw ga.create("not-registered");const f=u.authToken;if(!e&&hx(f))return u;if(f.requestStatus===1)return n=ux(i,e),u;{if(!navigator.onLine)throw ga.create("app-offline");const m=dx(u);return n=cx(i,m),m}});return n?await n:s.authToken}async function ux(i,e){let n=await mE(i.appConfig);for(;n.authToken.requestStatus===1;)await rw(100),n=await mE(i.appConfig);const s=n.authToken;return s.requestStatus===0?gg(i,e):s}function mE(i){return Ef(i,e=>{if(!cw(e))throw ga.create("not-registered");const n=e.authToken;return mx(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function cx(i,e){try{const n=await ox(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await jh(i.appConfig,s),n}catch(n){if(Zb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await lw(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jh(i.appConfig,s)}throw n}}function cw(i){return i!==void 0&&i.registrationStatus===2}function hx(i){return i.requestStatus===2&&!fx(i)}function fx(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+jC}function dx(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function mx(i){return i.requestStatus===1&&i.requestTime+Yb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(i){const e=i,{installationEntry:n,registrationPromise:s}=await pg(e);return s?s.catch(console.error):gg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(i,e=!1){const n=i;return await yx(n),(await gg(n,e)).token}async function yx(i){const{registrationPromise:e}=await pg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(i){if(!i||!i.options)throw zm("App Configuration");if(!i.name)throw zm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw zm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function zm(i){return ga.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="installations",_x="installations-internal",Ex=i=>{const e=i.getProvider("app").getImmediate(),n=vx(e),s=Ta(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Tx=i=>{const e=i.getProvider("app").getImmediate(),n=Ta(e,hw).getImmediate();return{getId:()=>px(n),getToken:o=>gx(n,o)}};function bx(){zi(new li(hw,Ex,"PUBLIC")),zi(new li(_x,Tx,"PRIVATE"))}bx();Zn(Qb,dg);Zn(Qb,dg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="analytics",wx="firebase_id",Sx="origin",Ax=60*1e3,Rx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new Wh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Un=new Ea("analytics","Analytics",Ix);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(i){if(!i.startsWith(yg)){const e=Un.create("invalid-gtag-resource",{gtagURL:i});return Rn.warn(e.message),""}return i}function fw(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function xx(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function Nx(i,e){const n=xx("firebase-js-sdk-policy",{createScriptURL:Cx}),s=document.createElement("script"),o=`${yg}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function Dx(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function Ox(i,e,n,s,o,u){const f=s[o];try{if(f)await e[f];else{const p=(await fw(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){Rn.error(m)}i("config",o,u)}async function Mx(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const m=await fw(n);for(const p of f){const g=m.find(w=>w.measurementId===p),E=g&&e[g.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){Rn.error(u)}}function Vx(i,e,n,s){async function o(u,...f){try{if(u==="event"){const[m,p]=f;await Mx(i,e,n,m,p)}else if(u==="config"){const[m,p]=f;await Ox(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=f;i("consent",m,p)}else if(u==="get"){const[m,p,g]=f;i("get",m,p,g)}else if(u==="set"){const[m]=f;i("set",m)}else i(u,...f)}catch(m){Rn.error(m)}}return o}function kx(i,e,n,s,o){let u=function(...f){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=Vx(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function Px(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=30,Ux=1e3;class jx{constructor(e={},n=Ux){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dw=new jx;function zx(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function Bx(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:zx(s)},u=Rx.replace("{app-id}",n),f=await fetch(u,o);if(f.status!==200&&f.status!==304){let m="";try{const p=await f.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:f.status,responseMessage:m})}return f.json()}async function qx(i,e=dw,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw Un.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw Un.create("no-api-key")}const f=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new Gx;return setTimeout(async()=>{m.abort()},Ax),mw({appId:s,apiKey:o,measurementId:u},f,m,e)}async function mw(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=dw){var u;const{appId:f,measurementId:m}=i;try{await Hx(s,e)}catch(p){if(m)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:f,measurementId:m};throw p}try{const p=await Bx(i);return o.deleteThrottleMetadata(f),p}catch(p){const g=p;if(!Fx(g)){if(o.deleteThrottleMetadata(f),m)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:f,measurementId:m};throw p}const E=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?r0(n,o.intervalMillis,Lx):r0(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(f,w),Rn.debug(`Calling attemptFetch again in ${E} millis`),mw(i,w,s,o)}}function Hx(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Fx(i){if(!(i instanceof fi)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class Gx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function $x(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,f=Object.assign(Object.assign({},s),{send_to:u});i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(){if(aT())try{await oT()}catch(i){return Rn.warn(Un.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return Rn.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Qx(i,e,n,s,o,u,f){var m;const p=qx(i);p.then(O=>{n[O.measurementId]=O.appId,i.options.measurementId&&O.measurementId!==i.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>Rn.error(O)),e.push(p);const g=Kx().then(O=>{if(O)return s.getId()}),[E,w]=await Promise.all([p,g]);Px(u)||Nx(u,E.measurementId),o("js",new Date);const I=(m=f==null?void 0:f.config)!==null&&m!==void 0?m:{};return I[Sx]="firebase",I.update=!0,w!=null&&(I[wx]=w),o("config",E.measurementId,I),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.app=e}_delete(){return delete fu[this.app.options.appId],Promise.resolve()}}let fu={},pE=[];const gE={};let Bm="dataLayer",Xx="gtag",yE,pw,vE=!1;function Wx(){const i=[];if(sT()&&i.push("This is a browser extension environment."),hR()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=Un.create("invalid-analytics-context",{errorInfo:e});Rn.warn(n.message)}}function Zx(i,e,n){Wx();const s=i.options.appId;if(!s)throw Un.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Un.create("no-api-key");if(fu[s]!=null)throw Un.create("already-exists",{id:s});if(!vE){Dx(Bm);const{wrappedGtag:u,gtagCore:f}=kx(fu,pE,gE,Bm,Xx);pw=u,yE=f,vE=!0}return fu[s]=Qx(i,pE,gE,e,yE,Bm,n),new Yx(i)}function Jx(i=Rp()){i=St(i);const e=Ta(i,zh);return e.isInitialized()?e.getImmediate():eN(i)}function eN(i,e={}){const n=Ta(i,zh);if(n.isInitialized()){const o=n.getImmediate();if(Ts(e,n.getOptions()))return o;throw Un.create("already-initialized")}return n.initialize({options:e})}function tN(i,e,n,s){i=St(i),$x(pw,fu[i.app.options.appId],e,n,s).catch(o=>Rn.error(o))}const _E="@firebase/analytics",EE="0.10.12";function nN(){zi(new li(zh,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return Zx(s,o,n)},"PUBLIC")),zi(new li("analytics-internal",i,"PRIVATE")),Zn(_E,EE),Zn(_E,EE,"esm2017");function i(e){try{const n=e.getProvider(zh).getImmediate();return{logEvent:(s,o,u)=>tN(n,s,o,u)}}catch(n){throw Un.create("interop-component-reg-failed",{reason:n})}}}nN();const iN={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},vg=hT(iN),He=AC(vg);Jx(vg);var Xl={},TE;function rN(){if(TE)return Xl;TE=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.parse=f,Xl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function f(I,O){const M=new u,Q=I.length;if(Q<2)return M;const H=(O==null?void 0:O.decode)||E;let Y=0;do{const se=I.indexOf("=",Y);if(se===-1)break;const ne=I.indexOf(";",Y),fe=ne===-1?Q:ne;if(se>fe){Y=I.lastIndexOf(";",se-1)+1;continue}const me=m(I,Y,se),Ae=p(I,se,me),P=I.slice(me,Ae);if(M[P]===void 0){let S=m(I,se+1,fe),R=p(I,fe,S);const N=H(I.slice(S,R));M[P]=N}Y=fe+1}while(Y<Q);return M}function m(I,O,M){do{const Q=I.charCodeAt(O);if(Q!==32&&Q!==9)return O}while(++O<M);return M}function p(I,O,M){for(;O>M;){const Q=I.charCodeAt(--O);if(Q!==32&&Q!==9)return O+1}return M}function g(I,O,M){const Q=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(I))throw new TypeError(`argument name is invalid: ${I}`);const H=Q(O);if(!e.test(H))throw new TypeError(`argument val is invalid: ${O}`);let Y=I+"="+H;if(!M)return Y;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);Y+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);Y+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);Y+="; Path="+M.path}if(M.expires){if(!w(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);Y+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(Y+="; HttpOnly"),M.secure&&(Y+="; Secure"),M.partitioned&&(Y+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return Y}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function w(I){return o.call(I)==="[object Date]"}return Xl}rN();var bE="popstate";function sN(i={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return vp("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Su(o)}return oN(e,n,null,i)}function yt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ci(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aN(){return Math.random().toString(36).substring(2,10)}function wE(i,e){return{usr:i.state,key:i.key,idx:e}}function vp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:n,key:e&&e.key||s||aN()}}function Su({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Bo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function oN(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function w(){m="POP";let H=E(),Y=H==null?null:H-g;g=H,p&&p({action:m,location:Q.location,delta:Y})}function I(H,Y){m="PUSH";let se=vp(Q.location,H,Y);g=E()+1;let ne=wE(se,g),fe=Q.createHref(se);try{f.pushState(ne,"",fe)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(fe)}u&&p&&p({action:m,location:Q.location,delta:1})}function O(H,Y){m="REPLACE";let se=vp(Q.location,H,Y);g=E();let ne=wE(se,g),fe=Q.createHref(se);f.replaceState(ne,"",fe),u&&p&&p({action:m,location:Q.location,delta:0})}function M(H){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof H=="string"?H:Su(H);return se=se.replace(/ $/,"%20"),yt(Y,`No window.location.(origin|href) available to create URL for href: ${se}`),new URL(se,Y)}let Q={get action(){return m},get location(){return i(o,f)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(bE,w),p=H,()=>{o.removeEventListener(bE,w),p=null}},createHref(H){return e(o,H)},createURL:M,encodeLocation(H){let Y=M(H);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:I,replace:O,go(H){return f.go(H)}};return Q}function gw(i,e,n="/"){return lN(i,e,n,!1)}function lN(i,e,n,s){let o=typeof e=="string"?Bo(e):e,u=Rr(o.pathname||"/",n);if(u==null)return null;let f=yw(i);uN(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=EN(u);m=vN(f[p],g,s)}return m}function yw(i,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(yt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=Er([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(yt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),yw(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:gN(g,u.index),routesMeta:E})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of vw(u.path))o(u,f,p)}),e}function vw(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=vw(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function uN(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:yN(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var cN=/^:[\w-]+$/,hN=3,fN=2,dN=1,mN=10,pN=-2,SE=i=>i==="*";function gN(i,e){let n=i.split("/"),s=n.length;return n.some(SE)&&(s+=pN),e&&(s+=fN),n.filter(o=>!SE(o)).reduce((o,u)=>o+(cN.test(u)?hN:u===""?dN:mN),s)}function yN(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function vN(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),I=p.route;if(!w&&g&&n&&!s[s.length-1].route.index&&(w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!w)return null;Object.assign(o,w.params),f.push({params:o,pathname:Er([u,w.pathname]),pathnameBase:SN(Er([u,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(u=Er([u,w.pathnameBase]))}return f}function Bh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=_N(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:w},I)=>{if(E==="*"){let M=m[I]||"";f=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const O=m[I];return w&&!O?g[E]=void 0:g[E]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function _N(i,e=!1,n=!0){ci(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function EN(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ci(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Rr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function TN(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Bo(i):i;return{pathname:n?n.startsWith("/")?n:bN(n,e):e,search:AN(s),hash:RN(o)}}function bN(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function qm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wN(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _g(i){let e=wN(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Eg(i,e,n,s=!1){let o;typeof i=="string"?o=Bo(i):(o={...i},yt(!o.pathname||!o.pathname.includes("?"),qm("?","pathname","search",o)),yt(!o.pathname||!o.pathname.includes("#"),qm("#","pathname","hash",o)),yt(!o.search||!o.search.includes("#"),qm("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let w=e.length-1;if(!s&&f.startsWith("..")){let I=f.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}m=w>=0?e[w]:"/"}let p=TN(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var Er=i=>i.join("/").replace(/\/\/+/g,"/"),SN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),AN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,RN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function IN(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var _w=["POST","PUT","PATCH","DELETE"];new Set(_w);var CN=["GET",..._w];new Set(CN);var qo=L.createContext(null);qo.displayName="DataRouter";var Tf=L.createContext(null);Tf.displayName="DataRouterState";var Ew=L.createContext({isTransitioning:!1});Ew.displayName="ViewTransition";var xN=L.createContext(new Map);xN.displayName="Fetchers";var NN=L.createContext(null);NN.displayName="Await";var di=L.createContext(null);di.displayName="Navigation";var ku=L.createContext(null);ku.displayName="Location";var qi=L.createContext({outlet:null,matches:[],isDataRoute:!1});qi.displayName="Route";var Tg=L.createContext(null);Tg.displayName="RouteError";function DN(i,{relative:e}={}){yt(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=L.useContext(di),{hash:o,pathname:u,search:f}=Pu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Er([n,u])),s.createHref({pathname:m,search:f,hash:o})}function Ho(){return L.useContext(ku)!=null}function Ns(){return yt(Ho(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(ku).location}var Tw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bw(i){L.useContext(di).static||L.useLayoutEffect(i)}function Fo(){let{isDataRoute:i}=L.useContext(qi);return i?FN():ON()}function ON(){yt(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let i=L.useContext(qo),{basename:e,navigator:n}=L.useContext(di),{matches:s}=L.useContext(qi),{pathname:o}=Ns(),u=JSON.stringify(_g(s)),f=L.useRef(!1);return bw(()=>{f.current=!0}),L.useCallback((p,g={})=>{if(ci(f.current,Tw),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=Eg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Er([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}L.createContext(null);function Pu(i,{relative:e}={}){let{matches:n}=L.useContext(qi),{pathname:s}=Ns(),o=JSON.stringify(_g(n));return L.useMemo(()=>Eg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function MN(i,e){return ww(i,e)}function ww(i,e,n,s){var se;yt(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=L.useContext(di),{matches:f}=L.useContext(qi),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",w=m&&m.route;{let ne=w&&w.path||"";Sw(g,!w||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let I=Ns(),O;if(e){let ne=typeof e=="string"?Bo(e):e;yt(E==="/"||((se=ne.pathname)==null?void 0:se.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),O=ne}else O=I;let M=O.pathname||"/",Q=M;if(E!=="/"){let ne=E.replace(/^\//,"").split("/");Q="/"+M.replace(/^\//,"").split("/").slice(ne.length).join("/")}let H=!u&&n&&n.matches&&n.matches.length>0?n.matches:gw(i,{pathname:Q});ci(w||H!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),ci(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=UN(H&&H.map(ne=>Object.assign({},ne,{params:Object.assign({},p,ne.params),pathname:Er([E,o.encodeLocation?o.encodeLocation(ne.pathname).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?E:Er([E,o.encodeLocation?o.encodeLocation(ne.pathnameBase).pathname:ne.pathnameBase])})),f,n,s);return e&&Y?L.createElement(ku.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},Y):Y}function VN(){let i=HN(),e=IN(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:o},n):null,f)}var kN=L.createElement(VN,null),PN=class extends L.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?L.createElement(qi.Provider,{value:this.props.routeContext},L.createElement(Tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LN({routeContext:i,match:e,children:n}){let s=L.useContext(qo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(qi.Provider,{value:i},n)}function UN(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);yt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:w}=n,I=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||I){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let w,I=!1,O=null,M=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,O=g.route.errorElement||kN,f&&(m<0&&E===0?(Sw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,M=null):m===E&&(I=!0,M=g.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,E+1)),H=()=>{let Y;return w?Y=O:I?Y=M:g.route.Component?Y=L.createElement(g.route.Component,null):g.route.element?Y=g.route.element:Y=p,L.createElement(LN,{match:g,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:Y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?L.createElement(PN,{location:n.location,revalidation:n.revalidation,component:O,error:w,children:H(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):H()},null)}function bg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jN(i){let e=L.useContext(qo);return yt(e,bg(i)),e}function zN(i){let e=L.useContext(Tf);return yt(e,bg(i)),e}function BN(i){let e=L.useContext(qi);return yt(e,bg(i)),e}function wg(i){let e=BN(i),n=e.matches[e.matches.length-1];return yt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function qN(){return wg("useRouteId")}function HN(){var s;let i=L.useContext(Tg),e=zN("useRouteError"),n=wg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function FN(){let{router:i}=jN("useNavigate"),e=wg("useNavigate"),n=L.useRef(!1);return bw(()=>{n.current=!0}),L.useCallback(async(o,u={})=>{ci(n.current,Tw),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var AE={};function Sw(i,e,n){!e&&!AE[i]&&(AE[i]=!0,ci(!1,n))}L.memo(GN);function GN({routes:i,future:e,state:n}){return ww(i,void 0,n,e)}function cs({to:i,replace:e,state:n,relative:s}){yt(Ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=L.useContext(di);ci(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=L.useContext(qi),{pathname:f}=Ns(),m=Fo(),p=Eg(i,_g(u),f,s==="path"),g=JSON.stringify(p);return L.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function us(i){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $N({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){yt(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=L.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=Bo(n));let{pathname:p="/",search:g="",hash:E="",state:w=null,key:I="default"}=n,O=L.useMemo(()=>{let M=Rr(p,f);return M==null?null:{location:{pathname:M,search:g,hash:E,state:w,key:I},navigationType:s}},[f,p,g,E,w,I,s]);return ci(O!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:L.createElement(di.Provider,{value:m},L.createElement(ku.Provider,{children:e,value:O}))}function KN({children:i,location:e}){return MN(_p(i),e)}function _p(i,e=[]){let n=[];return L.Children.forEach(i,(s,o)=>{if(!L.isValidElement(s))return;let u=[...e,o];if(s.type===L.Fragment){n.push.apply(n,_p(s.props.children,u));return}yt(s.type===us,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=_p(s.props.children,u)),n.push(f)}),n}var Eh="get",Th="application/x-www-form-urlencoded";function bf(i){return i!=null&&typeof i.tagName=="string"}function QN(i){return bf(i)&&i.tagName.toLowerCase()==="button"}function YN(i){return bf(i)&&i.tagName.toLowerCase()==="form"}function XN(i){return bf(i)&&i.tagName.toLowerCase()==="input"}function WN(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ZN(i,e){return i.button===0&&(!e||e==="_self")&&!WN(i)}var fh=null;function JN(){if(fh===null)try{new FormData(document.createElement("form"),0),fh=!1}catch{fh=!0}return fh}var eD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hm(i){return i!=null&&!eD.has(i)?(ci(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Th}"`),null):i}function tD(i,e){let n,s,o,u,f;if(YN(i)){let m=i.getAttribute("action");s=m?Rr(m,e):null,n=i.getAttribute("method")||Eh,o=Hm(i.getAttribute("enctype"))||Th,u=new FormData(i)}else if(QN(i)||XN(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Rr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Eh,o=Hm(i.getAttribute("formenctype"))||Hm(m.getAttribute("enctype"))||Th,u=new FormData(m,i),!JN()){let{name:g,type:E,value:w}=i;if(E==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,w)}}else{if(bf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Eh,s=null,o=Th,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function Sg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function nD(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function rD(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await nD(u,n);return f.links?f.links():[]}return[]}));return lD(s.flat(1).filter(iD).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function RE(i,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var w;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function sD(i,e,{includeHydrateFallback:n}={}){return aD(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function aD(i){return[...new Set(i)]}function oD(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function lD(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(oD(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var uD=new Set([100,101,204,205]);function cD(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&Rr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Aw(){let i=L.useContext(qo);return Sg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function hD(){let i=L.useContext(Tf);return Sg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ag=L.createContext(void 0);Ag.displayName="FrameworkContext";function Rw(){let i=L.useContext(Ag);return Sg(i,"You must render this element inside a <HydratedRouter> element"),i}function fD(i,e){let n=L.useContext(Ag),[s,o]=L.useState(!1),[u,f]=L.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:w}=e,I=L.useRef(null);L.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let Q=Y=>{Y.forEach(se=>{f(se.isIntersecting)})},H=new IntersectionObserver(Q,{threshold:.5});return I.current&&H.observe(I.current),()=>{H.disconnect()}}},[i]),L.useEffect(()=>{if(s){let Q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let O=()=>{o(!0)},M=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:Wl(m,O),onBlur:Wl(p,M),onMouseEnter:Wl(g,O),onMouseLeave:Wl(E,M),onTouchStart:Wl(w,O)}]:[!1,I,{}]}function Wl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function dD({page:i,...e}){let{router:n}=Aw(),s=L.useMemo(()=>gw(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?L.createElement(pD,{page:i,matches:s,...e}):null}function mD(i){let{manifest:e,routeModules:n}=Rw(),[s,o]=L.useState([]);return L.useEffect(()=>{let u=!1;return rD(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function pD({page:i,matches:e,...n}){let s=Ns(),{manifest:o,routeModules:u}=Rw(),{basename:f}=Aw(),{loaderData:m,matches:p}=hD(),g=L.useMemo(()=>RE(i,e,p,o,s,"data"),[i,e,p,o,s]),E=L.useMemo(()=>RE(i,e,p,o,s,"assets"),[i,e,p,o,s]),w=L.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let M=new Set,Q=!1;if(e.forEach(Y=>{var ne;let se=o.routes[Y.route.id];!se||!se.hasLoader||(!g.some(fe=>fe.route.id===Y.route.id)&&Y.route.id in m&&((ne=u[Y.route.id])!=null&&ne.shouldRevalidate)||se.hasClientLoader?Q=!0:M.add(Y.route.id))}),M.size===0)return[];let H=cD(i,f);return Q&&M.size>0&&H.searchParams.set("_routes",e.filter(Y=>M.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[H.pathname+H.search]},[f,m,s,o,g,e,i,u]),I=L.useMemo(()=>sD(E,o),[E,o]),O=mD(E);return L.createElement(L.Fragment,null,w.map(M=>L.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),I.map(M=>L.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),O.map(({key:M,link:Q})=>L.createElement("link",{key:M,...Q})))}function gD(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Iw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Iw&&(window.__reactRouterVersion="7.5.2")}catch{}function yD({basename:i,children:e,window:n}){let s=L.useRef();s.current==null&&(s.current=sN({window:n,v5Compat:!0}));let o=s.current,[u,f]=L.useState({action:o.action,location:o.location}),m=L.useCallback(p=>{L.startTransition(()=>f(p))},[f]);return L.useLayoutEffect(()=>o.listen(m),[o,m]),L.createElement($N,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Cw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rg=L.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:w,...I},O){let{basename:M}=L.useContext(di),Q=typeof g=="string"&&Cw.test(g),H,Y=!1;if(typeof g=="string"&&Q&&(H=g,Iw))try{let R=new URL(window.location.href),N=g.startsWith("//")?new URL(R.protocol+g):new URL(g),x=Rr(N.pathname,M);N.origin===R.origin&&x!=null?g=x+N.search+N.hash:Y=!0}catch{ci(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=DN(g,{relative:o}),[ne,fe,me]=fD(s,I),Ae=TD(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:w});function P(R){e&&e(R),R.defaultPrevented||Ae(R)}let S=L.createElement("a",{...I,...me,href:H||se,onClick:Y||u?e:P,ref:gD(O,fe),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return ne&&!Q?L.createElement(L.Fragment,null,S,L.createElement(dD,{page:se})):S});Rg.displayName="Link";var vD=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let w=Pu(f,{relative:g.relative}),I=Ns(),O=L.useContext(Tf),{navigator:M,basename:Q}=L.useContext(di),H=O!=null&&RD(w)&&m===!0,Y=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,se=I.pathname,ne=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(se=se.toLowerCase(),ne=ne?ne.toLowerCase():null,Y=Y.toLowerCase()),ne&&Q&&(ne=Rr(ne,Q)||ne);const fe=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let me=se===Y||!o&&se.startsWith(Y)&&se.charAt(fe)==="/",Ae=ne!=null&&(ne===Y||!o&&ne.startsWith(Y)&&ne.charAt(Y.length)==="/"),P={isActive:me,isPending:Ae,isTransitioning:H},S=me?e:void 0,R;typeof s=="function"?R=s(P):R=[s,me?"active":null,Ae?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(P):u;return L.createElement(Rg,{...g,"aria-current":S,className:R,ref:E,style:N,to:f,viewTransition:m},typeof p=="function"?p(P):p)});vD.displayName="NavLink";var _D=L.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=Eh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:w,...I},O)=>{let M=SD(),Q=AD(m,{relative:g}),H=f.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&Cw.test(m),se=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let fe=ne.nativeEvent.submitter,me=(fe==null?void 0:fe.getAttribute("formmethod"))||f;M(fe||ne.currentTarget,{fetcherKey:e,method:me,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:w})};return L.createElement("form",{ref:O,method:H,action:Q,onSubmit:s?p:se,...I,"data-discover":!Y&&i==="render"?"true":void 0})});_D.displayName="Form";function ED(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xw(i){let e=L.useContext(qo);return yt(e,ED(i)),e}function TD(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=Fo(),p=Ns(),g=Pu(i,{relative:u});return L.useCallback(E=>{if(ZN(E,e)){E.preventDefault();let w=n!==void 0?n:Su(p)===Su(g);m(i,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,i,o,u,f])}var bD=0,wD=()=>`__${String(++bD)}__`;function SD(){let{router:i}=xw("useSubmit"),{basename:e}=L.useContext(di),n=qN();return L.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=tD(s,e);if(o.navigate===!1){let E=o.fetcherKey||wD();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function AD(i,{relative:e}={}){let{basename:n}=L.useContext(di),s=L.useContext(qi);yt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Pu(i||".",{relative:e})},f=Ns();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Er([n,u.pathname])),Su(u)}function RD(i,e={}){let n=L.useContext(Ew);yt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=xw("useViewTransitionState"),o=Pu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Rr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Rr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Bh(o.pathname,f)!=null||Bh(o.pathname,u)!=null}new TextEncoder;[...uD];var ID=ZE();const IE=WE(ID);function Ig(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Nw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CD=Nw,Dw=new Ea("auth","Firebase",Nw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Wh("@firebase/auth");function xD(i,...e){qh.logLevel<=$e.WARN&&qh.warn(`Auth (${Po}): ${i}`,...e)}function bh(i,...e){qh.logLevel<=$e.ERROR&&qh.error(`Auth (${Po}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(i,...e){throw Cg(i,...e)}function Ui(i,...e){return Cg(i,...e)}function Ow(i,e,n){const s=Object.assign(Object.assign({},CD()),{[e]:n});return new Ea("auth","Firebase",s).create(e,{appName:i.name})}function Tr(i){return Ow(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Dw.create(i,...e)}function Re(i,e,...n){if(!i)throw Cg(e,...n)}function yr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw bh(e),new Error(e)}function Ir(i,e){i||yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function ND(){return CE()==="http:"||CE()==="https:"}function CE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ND()||sT()||"connection"in navigator)?navigator.onLine:!0}function OD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=sR()||lR()}get(){return DD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i,e){Ir(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kD=new Lu(3e4,6e4);function xr(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Nr(i,e,n,s,o={}){return Vw(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Iu(Object.assign({key:i.config.apiKey},f)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return oR()||(g.referrerPolicy="no-referrer"),Mw.fetch()(await kw(i,i.config.apiHost,n,m),g)})}async function Vw(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},MD),e);try{const o=new LD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw dh(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw dh(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw dh(i,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ow(i,E,g);hi(i,E)}}catch(o){if(o instanceof fi)throw o;hi(i,"network-request-failed",{message:String(o)})}}async function Uu(i,e,n,s,o={}){const u=await Nr(i,e,n,s,o);return"mfaPendingCredential"in u&&hi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function kw(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?xg(i.config,o):`${i.config.apiScheme}://${o}`;return VD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function PD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ui(this.auth,"network-request-failed")),kD.get())})}}function dh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Ui(i,e,s);return o.customData._tokenResponse=n,o}function xE(i){return i!==void 0&&i.enterprise!==void 0}class UD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jD(i,e){return Nr(i,"GET","/v2/recaptchaConfig",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(i,e){return Nr(i,"POST","/v1/accounts:delete",e)}async function Hh(i,e){return Nr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BD(i,e=!1){const n=St(i),s=await n.getIdToken(e),o=Ng(s);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:du(Fm(o.auth_time)),issuedAtTime:du(Fm(o.iat)),expirationTime:du(Fm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Fm(i){return Number(i)*1e3}function Ng(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const o=tT(n);return o?JSON.parse(o):(bh("Failed to decode base64 JWT payload"),null)}catch(o){return bh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NE(i){const e=Ng(i);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fi&&qD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function qD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Au(i,Hh(n,{idToken:s}));Re(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Pw(u.providerUserInfo):[],m=GD(i.providerData,f),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Tp(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,w)}async function FD(i){const e=St(i);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Pw(i){return i.map(e=>{var{providerId:n}=e,s=Ig(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(i,e){const n=await Vw(i,{},async()=>{const s=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await kw(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Mw.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KD(i,e){return Nr(i,"POST","/v2/accounts:revokeToken",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await $D(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Ro;return s&&(Re(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Re(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(i,e){Re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Tp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Au(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BD(this,e)}reload(){return FD(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Tr(this.auth));const e=await this.getIdToken();return await Au(this,zD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,E;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,I=(o=n.email)!==null&&o!==void 0?o:void 0,O=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,H=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(g=n.createdAt)!==null&&g!==void 0?g:void 0,se=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:fe,isAnonymous:me,providerData:Ae,stsTokenManager:P}=n;Re(ne&&P,e,"internal-error");const S=Ro.fromJSON(this.name,P);Re(typeof ne=="string",e,"internal-error"),ls(w,e.name),ls(I,e.name),Re(typeof fe=="boolean",e,"internal-error"),Re(typeof me=="boolean",e,"internal-error"),ls(O,e.name),ls(M,e.name),ls(Q,e.name),ls(H,e.name),ls(Y,e.name),ls(se,e.name);const R=new oi({uid:ne,auth:e,email:I,emailVerified:fe,displayName:w,isAnonymous:me,photoURL:M,phoneNumber:O,tenantId:Q,stsTokenManager:S,createdAt:Y,lastLoginAt:se});return Ae&&Array.isArray(Ae)&&(R.providerData=Ae.map(N=>Object.assign({},N))),H&&(R._redirectEventId=H),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ro;o.updateFromServerResponse(n);const u=new oi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Fh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Pw(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ro;m.updateFromIdToken(s);const p=new oi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;function vr(i){Ir(i instanceof Function,"Expected a class definition");let e=DE.get(i);return e?(Ir(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,DE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Lw.type="NONE";const OE=Lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(i,e,n){return`firebase:${i}:${e}:${n}`}class Io{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=wh(this.userKey,o.apiKey,u),this.fullPersistenceKey=wh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?oi._fromGetAccountInfoResponse(this.auth,n,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Io(vr(OE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||vr(OE);const f=wh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let w;if(typeof E=="string"){const I=await Hh(e,{idToken:E}).catch(()=>{});if(!I)break;w=await oi._fromGetAccountInfoResponse(e,I,E)}else w=oi._fromJSON(e,E);g!==u&&(m=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Io(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new Io(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Bw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hw(e))return"Blackberry";if(Fw(e))return"Webos";if(jw(e))return"Safari";if((e.includes("chrome/")||zw(e))&&!e.includes("edge/"))return"Chrome";if(qw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Uw(i=hn()){return/firefox\//i.test(i)}function jw(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zw(i=hn()){return/crios\//i.test(i)}function Bw(i=hn()){return/iemobile/i.test(i)}function qw(i=hn()){return/android/i.test(i)}function Hw(i=hn()){return/blackberry/i.test(i)}function Fw(i=hn()){return/webos/i.test(i)}function Dg(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function QD(i=hn()){var e;return Dg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YD(){return uR()&&document.documentMode===10}function Gw(i=hn()){return Dg(i)||qw(i)||Fw(i)||Hw(i)||/windows phone/i.test(i)||Bw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(i,e=[]){let n;switch(i){case"Browser":n=ME(hn());break;case"Worker":n=`${ME(hn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(i,e={}){return Nr(i,"GET","/v2/passwordPolicy",xr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=6;class JD{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:ZD,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new XD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),s=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Tr(this));const n=e?St(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WD(this),n=new JD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ea("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await KD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vr(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$w(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Aa(i){return St(i)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=gR(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tO(i){wf=i}function Kw(i){return wf.loadJS(i)}function nO(){return wf.recaptchaEnterpriseScript}function iO(){return wf.gapiScript}function rO(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class sO{constructor(){this.enterprise=new aO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class aO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const oO="recaptcha-enterprise",Qw="NO_RECAPTCHA";class lO{constructor(e){this.type=oO,this.auth=Aa(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{jD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new UD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;xE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(Qw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sO().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&xE(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=nO();p.length!==0&&(p+=m),Kw(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function kE(i,e,n,s=!1,o=!1){const u=new lO(i);let f;if(o)f=Qw;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function bp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await kE(i,e,n,n==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await kE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(i,e){const n=Ta(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ts(u,e??{}))return o;hi(o,"already-initialized")}return n.initialize({options:e})}function cO(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(vr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function hO(i,e,n){const s=Aa(i);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Yw(e),{host:f,port:m}=fO(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(Ts(g,s.config.emulator)&&Ts(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,dO()}function Yw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function fO(i){const e=Yw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:PE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:PE(f)}}}function PE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function dO(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yr("not implemented")}_getIdTokenResponse(e){return yr("not implemented")}_linkToIdToken(e,n){return yr("not implemented")}_getReauthenticationResolver(e){return yr("not implemented")}}async function mO(i,e){return Nr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(i,e){return Uu(i,"POST","/v1/accounts:signInWithPassword",xr(i,e))}async function gO(i,e){return Nr(i,"POST","/v1/accounts:sendOobCode",xr(i,e))}async function yO(i,e){return gO(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",xr(i,e))}async function _O(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Og{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ru(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ru(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,n,"signInWithPassword",pO);case"emailLink":return vO(e,{email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bp(e,s,"signUpPassword",mO);case"emailLink":return _O(e,{idToken:n,email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(i,e){return Uu(i,"POST","/v1/accounts:signInWithIdp",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO="http://localhost";class va extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Ig(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new va(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Co(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Co(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Co(e,n)}buildRequest(){const e={requestUri:EO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bO(i){const e=Jl(eu(i)).link,n=e?Jl(eu(e)).deep_link_id:null,s=Jl(eu(i)).deep_link_id;return(s?Jl(eu(s)).link:null)||s||n||e||i}class Mg{constructor(e){var n,s,o,u,f,m;const p=Jl(eu(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,w=TO((o=p.mode)!==null&&o!==void 0?o:null);Re(g&&E&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=bO(e);try{return new Mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,n){return Ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Mg.parseLink(n);return Re(s,"argument-error"),Ru._fromEmailAndCode(e,s.code,s.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends Xw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends ju{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return va._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fs.credential(n,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends ju{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ju{constructor(){super("twitter.com")}static credential(e,n){return va._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ms.credential(n,s)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(i,e){return Uu(i,"POST","/v1/accounts:signUp",xr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await oi._fromIdTokenResponse(e,s,o),f=LE(s);return new _a({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=LE(s);return new _a({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function LE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends fi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Gh(e,n,s,o)}}function Ww(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(i,u,e,s):u})}async function SO(i,e,n=!1){const s=await Au(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return _a._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(i,e,n=!1){const{auth:s}=i;if(Wn(s.app))return Promise.reject(Tr(s));const o="reauthenticate";try{const u=await Au(i,Ww(s,o,e,i),n);Re(u.idToken,s,"internal-error");const f=Ng(u.idToken);Re(f,s,"internal-error");const{sub:m}=f;return Re(i.uid===m,s,"user-mismatch"),_a._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&hi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(i,e,n=!1){if(Wn(i.app))return Promise.reject(Tr(i));const s="signIn",o=await Ww(i,s,e),u=await _a._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function RO(i,e){return Zw(Aa(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(i){const e=Aa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IO(i,e,n){if(Wn(i.app))return Promise.reject(Tr(i));const s=Aa(i),f=await bp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Jw(i),p}),m=await _a._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function CO(i,e,n){return Wn(i.app)?Promise.reject(Tr(i)):RO(St(i),Go.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Jw(i),s})}async function eS(i,e){const n=St(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await yO(n.auth,o);u!==i.email&&await i.reload()}function xO(i,e,n,s){return St(i).onIdTokenChanged(e,n,s)}function NO(i,e,n){return St(i).beforeAuthStateChanged(e,n)}function DO(i,e,n,s){return St(i).onAuthStateChanged(e,n,s)}function OO(i){return St(i).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=1e3,VO=10;class nS extends tS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);YD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,VO):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},MO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nS.type="LOCAL";const kO=nS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS extends tS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iS.type="SESSION";const rS=iS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Sf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await PO(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Vg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return window}function UO(i){ji().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function jO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function BO(){return sS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebaseLocalStorageDb",qO=1,Kh="firebaseLocalStorage",oS="fbase_key";class zu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Af(i,e){return i.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function HO(){const i=indexedDB.deleteDatabase(aS);return new zu(i).toPromise()}function wp(){const i=indexedDB.open(aS,qO);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Kh,{keyPath:oS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Kh)?e(s):(s.close(),await HO(),e(await wp()))})})}async function UE(i,e,n){const s=Af(i,!0).put({[oS]:e,value:n});return new zu(s).toPromise()}async function FO(i,e){const n=Af(i,!1).get(e),s=await new zu(n).toPromise();return s===void 0?null:s.value}function jE(i,e){const n=Af(i,!0).delete(e);return new zu(n).toPromise()}const GO=800,$O=3;class lS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>$O)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(BO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await jO(),!this.activeServiceWorker)return;this.sender=new LO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wp();return await UE(e,$h,"1"),await jE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>UE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>FO(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Af(o,!1).getAll();return new zu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lS.type="LOCAL";const KO=lS;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(i,e){return e?vr(e):(Re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YO(i){return Zw(i.auth,new kg(i),i.bypassAuthState)}function XO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),AO(n,new kg(i),i.bypassAuthState)}async function WO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),SO(n,new kg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YO;case"linkViaPopup":case"linkViaRedirect":return WO;case"reauthViaPopup":case"reauthViaRedirect":return XO;default:hi(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=new Lu(2e3,1e4);class So extends uS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZO.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="pendingRedirect",Sh=new Map;class eM extends uS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const s=await tM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tM(i,e){const n=rM(e),s=iM(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function nM(i,e){Sh.set(i._key(),e)}function iM(i){return vr(i._redirectPersistence)}function rM(i){return wh(JO,i.config.apiKey,i.name)}async function sM(i,e,n=!1){if(Wn(i.app))return Promise.reject(Tr(i));const s=Aa(i),o=QO(s,e),f=await new eM(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=10*60*1e3;class oM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!cS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ui(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aM&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(e))}saveEventToCache(e){this.cachedEventUids.add(zE(e)),this.lastProcessedEventTime=Date.now()}}function zE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function cS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lM(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(i,e={}){return Nr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hM=/^https?/;async function fM(i){if(i.config.emulator)return;const{authorizedDomains:e}=await uM(i);for(const n of e)try{if(dM(n))return}catch{}hi(i,"unauthorized-domain")}function dM(i){const e=Ep(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!hM.test(n))return!1;if(cM.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=new Lu(3e4,6e4);function BE(){const i=ji().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function pM(i){return new Promise((e,n)=>{var s,o,u;function f(){BE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BE(),n(Ui(i,"network-request-failed"))},timeout:mM.get()})}if(!((o=(s=ji().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=ji().gapi)===null||u===void 0)&&u.load)f();else{const m=rO("iframefcb");return ji()[m]=()=>{gapi.load?f():n(Ui(i,"network-request-failed"))},Kw(`${iO()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function gM(i){return Ah=Ah||pM(i),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new Lu(5e3,15e3),vM="__/auth/iframe",_M="emulator/auth/iframe",EM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bM(i){const e=i.config;Re(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?xg(e,_M):`https://${i.config.authDomain}/${vM}`,s={apiKey:e.apiKey,appName:i.name,v:Po},o=TM.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Iu(s).slice(1)}`}async function wM(i){const e=await gM(i),n=ji().gapi;return Re(n,i,"internal-error"),e.open({where:document.body,url:bM(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EM,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Ui(i,"network-request-failed"),m=ji().setTimeout(()=>{u(f)},yM.get());function p(){ji().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AM=500,RM=600,IM="_blank",CM="http://localhost";class qE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xM(i,e,n,s=AM,o=RM){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},SM),{width:s.toString(),height:o.toString(),top:u,left:f}),g=hn().toLowerCase();n&&(m=zw(g)?IM:n),Uw(g)&&(e=e||CM,p.scrollbars="yes");const E=Object.entries(p).reduce((I,[O,M])=>`${I}${O}=${M},`,"");if(QD(g)&&m!=="_self")return NM(e||"",m),new qE(null);const w=window.open(e||"",m,E);Re(w,i,"popup-blocked");try{w.focus()}catch{}return new qE(w)}function NM(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="__/auth/handler",OM="emulator/auth/handler",MM=encodeURIComponent("fac");async function HE(i,e,n,s,o,u){Re(i.config.authDomain,i,"auth-domain-config-required"),Re(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Po,eventId:o};if(e instanceof Xw){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",pR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))f[E]=w}if(e instanceof ju){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(f.scopes=E.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),g=p?`#${MM}=${encodeURIComponent(p)}`:"";return`${VM(i)}?${Iu(m).slice(1)}${g}`}function VM({config:i}){return i.emulator?xg(i,OM):`https://${i.authDomain}/${DM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class kM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rS,this._completeRedirectFn=sM,this._overrideRedirectResult=nM}async _openPopup(e,n,s,o){var u;Ir((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await HE(e,n,s,Ep(),o);return xM(e,f,Vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await HE(e,n,s,Ep(),o);return UO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ir(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await wM(e),s=new oM(e);return n.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gm,{type:Gm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Gm];f!==void 0&&n(!!f),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Gw()||jw()||Dg()}}const PM=kM;var FE="@firebase/auth",GE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jM(i){zi(new li("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Re(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$w(i)},g=new eO(s,o,u,p);return cO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),zi(new li("auth-internal",e=>{const n=Aa(e.getProvider("auth").getImmediate());return(s=>new LM(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(FE,GE,UM(i)),Zn(FE,GE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=5*60,BM=rT("authIdTokenMaxAge")||zM;let $E=null;const qM=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>BM)return;const o=n==null?void 0:n.token;$E!==o&&($E=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function HM(i=Rp()){const e=Ta(i,"auth");if(e.isInitialized())return e.getImmediate();const n=uO(i,{popupRedirectResolver:PM,persistence:[KO,kO,rS]}),s=rT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=qM(u.toString());NO(n,f,()=>f(n.currentUser)),xO(n,m=>f(m))}}const o=nT("auth");return o&&hO(n,`http://${o}`),n}function FM(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}tO({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Ui("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",FM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jM("Browser");const hS=L.createContext();function Dr(){return L.useContext(hS)}function GM({children:i}){const[e,n]=L.useState(null),[s,o]=L.useState(!0),u=HM(vg);L.useEffect(()=>DO(u,I=>{n(I),o(!1)}),[u]);const E={currentUser:e,loading:s,signup:(w,I)=>IO(u,w,I),login:(w,I)=>CO(u,w,I),logout:async()=>{await OO(u),n(null)},resendVerificationEmail:async()=>{e&&await eS(e)},emailVerified:(e==null?void 0:e.emailVerified)||!1};return T.jsx(hS.Provider,{value:E,children:!s&&i})}function $M(){const i=L.useRef(),e=L.useRef(),{login:n}=Dr(),[s,o]=L.useState(""),[u,f]=L.useState(!1),m=Fo();async function p(g){g.preventDefault(),o(""),f(!0);try{await n(i.current.value,e.current.value),m("/dashboard")}catch(E){o(E.message||"Failed to log in")}f(!1)}return T.jsx("div",{className:"auth-bg",children:T.jsxs("div",{className:"auth-container",children:[T.jsx("div",{className:"auth-logo-row",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),T.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),T.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&T.jsx("div",{className:"auth-error",children:s}),T.jsxs("form",{className:"auth-form",onSubmit:p,children:[T.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),T.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),T.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),T.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),T.jsx("div",{className:"auth-link-row",children:T.jsxs("span",{style:{color:"#fff"},children:["Don't have an account? ",T.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function KM(){const i=L.useRef(),e=L.useRef(),n=L.useRef(),{signup:s}=Dr(),[o,u]=L.useState(""),[f,m]=L.useState(!1),p=Fo();async function g(E){if(E.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{const w=await s(i.current.value,e.current.value);await eS(w.user),m(!1),p("/verify-email")}catch(w){u(w.message||"Failed to create an account")}m(!1)}return T.jsx("div",{className:"auth-bg",children:T.jsxs("div",{className:"auth-container",children:[T.jsx("div",{className:"auth-logo-row",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),T.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),T.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&T.jsx("div",{className:"auth-error",children:o}),T.jsxs("form",{className:"auth-form",onSubmit:g,children:[T.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),T.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),T.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),T.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),T.jsx("button",{disabled:f,type:"submit",className:"auth-btn",children:"Sign Up"})]}),T.jsx("div",{className:"auth-link-row",children:T.jsxs("span",{style:{color:"#fff"},children:["Already have an account? ",T.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function QM({children:i}){const{currentUser:e}=Dr();return e?i:T.jsx(cs,{to:"/login"})}function YM({show:i}){const[e,n]=L.useState(!1),[s,o]=L.useState([]),[u,f]=L.useState(null),[m,p]=L.useState([]),[g,E]=L.useState(!1),[w,I]=L.useState(""),O=async()=>{if(!e&&i.tmdbId){E(!0),I("");try{const Q=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,Y=await(await fetch(Q)).json();o(Y.seasons||[]),Y.seasons&&Y.seasons.length>0&&f(Y.seasons[0].season_number)}catch{I("Failed to load seasons.")}E(!1)}n(M=>!M)};return L.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){E(!0),I("");try{const H=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,se=await(await fetch(H)).json();p(se.episodes||[])}catch{I("Failed to load episodes.")}E(!1)}})()},[i.tmdbId,u]),T.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[T.jsx("button",{onClick:O,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":" Show Episodes"}),e&&T.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?T.jsx("div",{children:"Loading..."}):w?T.jsx("div",{style:{color:"red"},children:w}):T.jsxs(T.Fragment,{children:[s.length>0&&T.jsxs("div",{style:{marginBottom:10},children:[T.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),T.jsx("select",{id:"season-select",value:u||"",onChange:M=>f(Number(M.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(M=>T.jsx("option",{value:M.season_number,children:M.name||`Season ${M.season_number}`},M.id||M.season_number))})]}),m.length>0?T.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(M=>T.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[T.jsxs("strong",{children:["Ep ",M.episode_number,":"]})," ",M.name," ",M.air_date?T.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",M.air_date,")"]}):""]},M.id||M.episode_number))}):T.jsx("div",{children:"No episodes found."})]})})]})}function XM({users:i,onSelectUser:e}){return T.jsxs("table",{className:"admin-user-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Email"}),T.jsx("th",{children:"Display Name"}),T.jsx("th",{children:"Status"}),T.jsx("th",{children:"Roles"}),T.jsx("th",{children:"Stats"}),T.jsx("th",{children:"Actions"})]})}),T.jsx("tbody",{children:i.map(n=>{var s,o;return T.jsxs("tr",{children:[T.jsx("td",{children:n.email}),T.jsx("td",{children:n.displayName}),T.jsx("td",{children:n.disabled?"Inactive":"Active"}),T.jsx("td",{children:n.roles?n.roles.join(", "):""}),T.jsxs("td",{children:["Diary: ",((s=n.stats)==null?void 0:s.diaryCount)||0,T.jsx("br",{}),"Comments: ",((o=n.stats)==null?void 0:o.commentCount)||0]}),T.jsx("td",{children:T.jsx("button",{onClick:()=>e(n),children:"Manage"})})]},n.uid)})})]})}function WM({user:i,onClose:e,onDisable:n,onEnable:s,onDelete:o,onSendMessage:u,diaryEntries:f,comments:m,onDeleteDiary:p,onDeleteComment:g}){var E,w;return i?T.jsx("div",{className:"admin-modal-bg",children:T.jsxs("div",{className:"admin-modal",style:{maxWidth:1200,width:"90vw",minWidth:320,padding:"2.2rem 2.5rem",borderRadius:18,background:"#fff",boxShadow:"0 4px 32px #205a7a22",margin:"0 auto"},children:[T.jsx("button",{className:"close-btn",onClick:e,style:{position:"absolute",top:18,right:24,fontSize:28,color:"#205a7a",background:"none",border:"none",cursor:"pointer"},children:""}),T.jsxs("h2",{style:{color:"#205a7a",fontWeight:900,fontSize:"2rem",marginBottom:12},children:["User: ",T.jsx("span",{style:{color:"#25609c"},children:i.displayName||i.email})]}),T.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,flexWrap:"wrap"},children:[T.jsxs("div",{children:["Status: ",T.jsx("b",{style:{color:i.disabled?"#d32f2f":"#35b36b"},children:i.disabled?"Inactive":"Active"})]}),T.jsxs("div",{children:["Roles: ",T.jsx("span",{style:{color:"#25609c"},children:i.roles?i.roles.join(", "):"-"})]}),T.jsxs("div",{children:["Email: ",T.jsx("span",{style:{color:"#333"},children:i.email})]}),T.jsxs("div",{children:["Stats: ",T.jsxs("span",{style:{color:"#25609c"},children:["Diary ",((E=i.stats)==null?void 0:E.diaryCount)||0,", Comments ",((w=i.stats)==null?void 0:w.commentCount)||0]})]})]}),T.jsxs("div",{style:{margin:"1.2em 0",display:"flex",gap:12,flexWrap:"wrap"},children:[i.disabled?T.jsx("button",{onClick:()=>s(i.uid),style:{background:"#35b36b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Enable"}):T.jsx("button",{onClick:()=>n(i.uid),style:{background:"#ffe066",color:"#205a7a",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Disable"}),T.jsx("button",{onClick:()=>o(i.uid),style:{background:"#ff6b6b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Delete"}),T.jsx("button",{onClick:()=>u(i.uid),style:{background:"#25609c",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Message"})]}),T.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:24,marginBottom:12,fontSize:"1.2rem"},children:"Diary Entries"}),T.jsx("div",{style:{maxHeight:180,overflowY:"auto",marginBottom:18,background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:f.length===0?T.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No diary entries."}):T.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:f.map(I=>T.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[T.jsx("span",{style:{fontWeight:600,color:"#205a7a"},children:I.title}),T.jsx("button",{onClick:()=>p(I.docId),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.docId))})}),T.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:18,marginBottom:10,fontSize:"1.2rem"},children:"Comments"}),T.jsx("div",{style:{maxHeight:140,overflowY:"auto",background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:m.length===0?T.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No comments."}):T.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:m.map(I=>T.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[T.jsxs("span",{style:{color:"#333",fontWeight:500,maxWidth:290,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[I.text,I.entryTitle&&T.jsxs("span",{style:{color:"#25609c",fontWeight:400,marginLeft:10,fontSize:13},children:["[on: ",I.entryTitle,"]"]})]}),T.jsx("button",{onClick:()=>g(I.id),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.id))})})]})}):null}function ZM({onSend:i,onClose:e}){const[n,s]=L.useState("");return T.jsx("div",{className:"admin-modal-bg",children:T.jsxs("div",{className:"admin-modal",children:[T.jsx("button",{className:"close-btn",onClick:e,children:""}),T.jsx("h2",{children:"Send Message to All Users"}),T.jsx("textarea",{value:n,onChange:o=>s(o.target.value),rows:6,style:{width:"100%"}}),T.jsx("button",{onClick:()=>i(n),style:{marginTop:12},children:"Send"})]})})}function JM(){async function i(){try{const e=await Sn(un(He,"users"));console.log("User docs:",e.docs.map(n=>n.data()))}catch(e){console.error("Direct test error:",e)}}return T.jsx("button",{onClick:i,style:{marginBottom:12},children:"Test Firestore Read"})}async function e4(i){const n=(await Sn(un(He,"users"))).docs.map(s=>Uh(un(He,`users/${s.id}/notifications`),{...i,read:!1,createdAt:gp()}));await Promise.all(n)}function t4(){const[i,e]=L.useState(""),[n,s]=L.useState(""),[o,u]=L.useState("info"),[f,m]=L.useState(!1),[p,g]=L.useState(""),[E,w]=L.useState("");async function I(O){O.preventDefault(),m(!0),w(""),g("");try{await e4({title:i,message:n,type:o}),g("Notification sent to all users!"),e(""),s("")}catch{w("Failed to send notification.")}m(!1)}return T.jsxs("form",{className:"admin-notification-form",onSubmit:I,style:{marginBottom:"2rem"},children:[T.jsx("h3",{children:"Send Notification to All Users"}),T.jsx("input",{value:i,onChange:O=>e(O.target.value),placeholder:"Title",required:!0}),T.jsx("textarea",{value:n,onChange:O=>s(O.target.value),placeholder:"Message",required:!0}),T.jsxs("select",{value:o,onChange:O=>u(O.target.value),children:[T.jsx("option",{value:"info",children:"Info"}),T.jsx("option",{value:"warning",children:"Warning"}),T.jsx("option",{value:"error",children:"Error"})]}),T.jsx("button",{type:"submit",disabled:f,children:f?"Sending...":"Send Notification"}),p&&T.jsx("div",{style:{color:"green",marginTop:8},children:p}),E&&T.jsx("div",{style:{color:"red",marginTop:8},children:E})]})}function n4(){const{currentUser:i}=Dr(),[e,n]=L.useState([]),[s,o]=L.useState(null),[u,f]=L.useState([]),[m,p]=L.useState([]),[g,E]=L.useState(!0),[w,I]=L.useState(""),[O,M]=L.useState(!1);L.useEffect(()=>{async function S(){E(!0),I("");try{console.log("Fetching users...");const R=await Sn(un(He,"users"));console.log("Fetched users:",R.size),console.log("Fetching diary...");const N=await Sn(un(He,"diary"));console.log("Fetched diary:",N.size),console.log("Fetching comments...");const x=await Sn(Lm(He,"comments"));console.log("Fetched comments:",x.size);const V={},C={};N.docs.forEach(xe=>{const Oe=xe.data().uid;V[Oe]=(V[Oe]||0)+1}),x.docs.forEach(xe=>{const Oe=xe.data().authorUid;C[Oe]=(C[Oe]||0)+1}),n(R.docs.map(xe=>({uid:xe.id,...xe.data(),stats:{diaryCount:V[xe.id]||0,commentCount:C[xe.id]||0}})))}catch(R){console.error("AdminDashboard Firestore error:",R),I("Failed to load users.")}E(!1)}S()},[]);async function Q(S){console.log("Fetching diary entries for user...");const R=await Sn(un(He,"diary"));console.log("Fetched diary entries:",R.size);const N=R.docs.filter(C=>C.data().uid===S.uid).map(C=>({docId:C.id,...C.data()}));f(N),console.log("Fetching comments for user...");const x=await Sn(Lm(He,"comments"));console.log("Fetched comments:",x.size);const V=x.docs.filter(C=>C.data().authorUid===S.uid).map(C=>{const Oe=C.ref.path.split("/")[1],X=R.docs.find(je=>String(je.data().id)===Oe),ae=X&&(X.data().title||X.data().desc)||"",ve={id:C.id,entryId:Oe,entryTitle:ae,...C.data()};return console.log("AdminDashboard userComment:",ve),ve});p(V),o(S)}async function H(S){await da(Ut(He,"users",S),{disabled:!0}),n(e.map(R=>R.uid===S?{...R,disabled:!0}:R)),o(R=>R&&R.uid===S?{...R,disabled:!0}:R)}async function Y(S){await da(Ut(He,"users",S),{disabled:!1}),n(e.map(R=>R.uid===S?{...R,disabled:!1}:R)),o(R=>R&&R.uid===S?{...R,disabled:!1}:R)}async function se(S){await hu(Ut(He,"users",S)),n(e.filter(R=>R.uid!==S)),o(null)}async function ne(S){if(!S||typeof S!="string"){I("Cannot delete diary entry: invalid id.");return}await hu(Ut(He,"diary",S)),f(u.filter(R=>R.docId!==S)),await me()}async function fe(S){const R=m.find(x=>x.id===S);if(!R)return;const N=R.entryId||R.entry_id||R.diaryId||R.parentEntryId;if(!N){I("Cannot delete: missing entryId for comment.");return}await hu(Ut(He,`discussions/${N}/comments`,S)),p(m.filter(x=>x.id!==S)),await me()}async function me(){console.log("Refreshing user stats...");const S=await Sn(un(He,"diary"));console.log("Fetched diary:",S.size);const R=await Sn(Lm(He,"comments"));console.log("Fetched comments:",R.size);const N={},x={};S.docs.forEach(V=>{const C=V.data().uid;N[C]=(N[C]||0)+1}),R.docs.forEach(V=>{const C=V.data().authorUid;x[C]=(x[C]||0)+1}),n(V=>V.map(C=>({...C,stats:{diaryCount:N[C.uid]||0,commentCount:x[C.uid]||0}})))}async function Ae(S){await Sn(un(He,"users")).then(R=>{R.forEach(N=>{da(Ut(He,"users",N.id),{lastAdminMessage:S})})}),M(!1),alert("Message sent to all users!")}function P(S){M(!0)}return T.jsxs("div",{className:"admin-dashboard-container",children:[T.jsx("h2",{className:"admin-dashboard-title",children:"Admin Dashboard"}),T.jsx(t4,{}),T.jsx(JM,{}),T.jsx("div",{className:"admin-dashboard-actions",children:T.jsx("button",{className:"admin-dashboard-message-btn",onClick:()=>M(!0),children:"Message All Users"})}),w&&T.jsx("div",{className:"admin-dashboard-error",children:w}),g?T.jsx("div",{className:"admin-dashboard-loading",children:"Loading users..."}):T.jsx(XM,{users:e,onSelectUser:Q}),s&&T.jsx(WM,{user:s,diaryEntries:u,comments:m,onClose:()=>o(null),onDelete:se,onDisable:H,onEnable:Y,onSendMessage:P,onDeleteDiary:ne,onDeleteComment:fe}),O&&T.jsx(ZM,{onSend:Ae,onClose:()=>M(!1)})]})}const i4=[{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],r4=[{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],s4="https://image.tmdb.org/t/p/w500";function a4(){const{currentUser:i}=Dr(),[e,n]=L.useState([]),[s,o]=L.useState(!0),[u,f]=L.useState("");return L.useEffect(()=>{async function m(){o(!0),f("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{f("Could not load trending movies.")}o(!1)}m()},[]),i?T.jsx(cs,{to:"/dashboard"}):T.jsx("div",{className:"sw-bg",children:T.jsxs("div",{className:"sw-container",children:[T.jsxs("div",{className:"sw-header-box sw-header-custom",children:[T.jsx("div",{className:"sw-logo-row",children:T.jsx("div",{className:"sw-header-logo-bg",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),T.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),T.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover Whats Next."}),T.jsx(Rg,{to:"/login",children:T.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),T.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:i4.map((m,p)=>T.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[T.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),T.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),T.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),T.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:r4.map((m,p)=>T.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[T.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),T.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),T.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),T.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?T.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?T.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?T.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>T.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[T.jsx("img",{src:m.poster_path?`${s4}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),T.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),T.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function o4({entryId:i}){console.log("entryId:",i);const{currentUser:e}=Dr(),[n,s]=L.useState([]),[o,u]=L.useState(!0),[f,m]=L.useState(""),[p,g]=L.useState(null),[E,w]=L.useState(""),[I,O]=L.useState({}),[M,Q]=L.useState(!0),H=L.useRef(null);async function Y(S){if(!S)return"Anonymous";try{const R=await au(Ut(He,"users",S.uid));if(R&&R.exists())return R.data().displayName||S.displayName||(S.email?S.email.split("@")[0]:S.uid)}catch{}return S.displayName||(S.email?S.email.split("@")[0]:S.uid)}L.useEffect(()=>{const S=ru(un(He,`discussions/${i}/comments`),qb("timestamp","asc")),R=LC(S,N=>{const x=N.docs.map(V=>({id:V.id,...V.data(),votes:V.data().votes||{}}));if(console.log("Fetched comments:",x),s(x),e){const V={};x.forEach(C=>{C.votes&&C.votes[e.uid]&&(V[C.id]=C.votes[e.uid])}),O(V)}u(!1)});return()=>R()},[i,e]);const se=async S=>{if(S.preventDefault(),!f.trim())return;const R=await Y(e);await Uh(un(He,`discussions/${i}/comments`),{text:f,author:R,authorUid:e?e.uid:null,timestamp:gp(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),H.current&&H.current.focus()},ne=async S=>{if(!E.trim())return;const R=await Y(e);await Uh(un(He,`discussions/${i}/comments`),{text:E,author:R,authorUid:e?e.uid:null,timestamp:gp(),parentId:S,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),w("")},fe=async(S,R)=>{if(!e)return;const N=Ut(He,`discussions/${i}/comments`,S),x=n.find(xe=>xe.id===S);if(!x)return;const V=x.votes?x.votes[e.uid]:void 0;let C={};R==="up"?C={upvotes:vo(V==="up"?0:1),...V==="down"?{downvotes:vo(-1)}:{},[`votes.${e.uid}`]:"up"}:R==="down"&&(C={downvotes:vo(V==="down"?0:1),...V==="up"?{upvotes:vo(-1)}:{},[`votes.${e.uid}`]:"down"}),O(xe=>({...xe,[S]:R})),await da(N,C)},me=async S=>{if(!e)return;const R=n.find(x=>x.id===S);if(!R||R.authorUid!==e.uid)return;const N=async x=>{const V=n.filter(xe=>xe.parentId===x);for(const xe of V)xe.authorUid===e.uid&&await N(xe.id);const C=n.find(xe=>xe.id===x);C&&C.authorUid===e.uid&&await hu(Ut(He,`discussions/${i}/comments`,x))};await N(S)};function Ae({commentId:S,level:R,childrenCount:N,render:x,showCount:V=1}){const[C,xe]=L.useState(!1),Oe=x(S,R+1);return!Oe||Oe.length===0?null:C?T.jsxs("div",{children:[Oe,N>V&&T.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>xe(!1),children:"Hide Replies"})]}):T.jsxs("div",{children:[Oe.slice(0,V),N>V&&T.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>xe(!0),children:["View ",N-V+1," more repl",N-V+1===1?"y":"ies"]})]})}const P=(S=null,R=0)=>n.filter(x=>x.parentId===S).map(x=>{var C,xe,Oe,X;const V=n.filter(ae=>ae.parentId===x.id);return T.jsxs("div",{className:`discussion-comment${R>0?" discussion-reply":""}`,style:{marginLeft:R*18},children:[T.jsxs("div",{className:"discussion-header",children:[T.jsx("span",{className:"discussion-author",children:x.author}),T.jsx("span",{className:"discussion-date",children:((X=(xe=(C=x.timestamp)==null?void 0:C.toDate)==null?void 0:(Oe=xe.call(C)).toLocaleString)==null?void 0:X.call(Oe))||""})]}),T.jsx("div",{className:"discussion-body",children:x.text}),T.jsxs("div",{className:"discussion-actions",children:[T.jsxs("button",{className:`discussion-vote${I[x.id]==="up"?" voted":""}`,onClick:()=>fe(x.id,"up"),title:"Thumbs up",disabled:I[x.id]==="up",children:[" ",x.upvotes||0]}),T.jsxs("button",{className:`discussion-vote${I[x.id]==="down"?" voted":""}`,onClick:()=>fe(x.id,"down"),title:"Thumbs down",disabled:I[x.id]==="down",children:[" ",x.downvotes||0]}),T.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(x.id),children:"Reply"}),x.authorUid===(e==null?void 0:e.uid)&&T.jsx("button",{className:"discussion-delete-btn",onClick:()=>me(x.id),title:"Delete",children:""})]}),p===x.id&&T.jsxs("div",{className:"discussion-reply-form",children:[T.jsx("input",{type:"text",value:E,onChange:ae=>w(ae.target.value),placeholder:"Write a reply...",autoFocus:!0}),T.jsx("button",{onClick:()=>ne(x.id),children:"Send"}),T.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),T.jsx(Ae,{commentId:x.id,level:R,childrenCount:V.length,render:P,showCount:1})]},x.id)});return T.jsxs("div",{className:"discussion-section",children:[T.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Q(S=>!S),style:{marginBottom:M?0:10},children:M?"Show Discussion":"Hide Discussion"}),!M&&T.jsxs(T.Fragment,{children:[T.jsx("h4",{children:"Discussion"}),T.jsxs("form",{onSubmit:se,className:"discussion-form",children:[T.jsx("input",{type:"text",ref:H,value:f,onChange:S=>m(S.target.value),placeholder:"Add a comment..."}),T.jsx("button",{type:"submit",children:"Send"})]}),T.jsx("div",{className:"discussion-comments",children:o?T.jsx("div",{children:"Loading..."}):P()})]})]})}var fS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KE=gs.createContext&&gs.createContext(fS),l4=["attr","size","title"];function u4(i,e){if(i==null)return{};var n=c4(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function c4(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Qh(){return Qh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Qh.apply(this,arguments)}function QE(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Yh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QE(Object(n),!0).forEach(function(s){h4(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function h4(i,e,n){return e=f4(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function f4(i){var e=d4(i,"string");return typeof e=="symbol"?e:e+""}function d4(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function dS(i){return i&&i.map((e,n)=>gs.createElement(e.tag,Yh({key:n},e.attr),dS(e.child)))}function Ra(i){return e=>gs.createElement(m4,Qh({attr:Yh({},i.attr)},e),dS(i.child))}function m4(i){var e=n=>{var{attr:s,size:o,title:u}=i,f=u4(i,l4),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),gs.createElement("svg",Qh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,f,{className:p,style:Yh(Yh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&gs.createElement("title",null,u),i.children)};return KE!==void 0?gs.createElement(KE.Consumer,null,n=>e(n)):e(fS)}function p4(i){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function YE(i){return Ra({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function g4(i){return Ra({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function y4(i){return Ra({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(i)}function v4(i){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(i)}function XE(i){return Ra({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(i)}function _4(i){return Ra({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function E4(){return T.jsxs("div",{style:{textAlign:"center",margin:"2rem 0"},children:[T.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block"},children:T.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/stacked-blue-5c3c7c3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c.svg",alt:"TMDb Logo",style:{height:48,marginBottom:8}})}),T.jsxs("div",{style:{fontSize:"0.95rem",color:"#888"},children:["This product uses the"," ",T.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb API"})," ","but is not endorsed or certified by TMDb."]})]})}function T4({notification:i,onDismiss:e}){const{title:n,message:s,type:o="info"}=i;let u=T.jsx(v4,{color:"#25609c",size:22});return o==="warning"&&(u=T.jsx(y4,{color:"#f59e42",size:22})),o==="error"&&(u=T.jsx(XE,{color:"#dc2626",size:22})),T.jsxs("div",{className:`notification-banner notification-${o}`,children:[T.jsx("span",{className:"notification-icon",children:u}),T.jsxs("div",{className:"notification-content",children:[T.jsx("strong",{children:n}),T.jsx("div",{children:s})]}),T.jsx("button",{className:"notification-dismiss",onClick:e,title:"Dismiss notification",children:T.jsx(XE,{size:20})})]})}const _o="ca9a91468bb700f84faf986252bc3fe6",Zl="https://api.themoviedb.org/3",$m="US";function b4(){const{currentUser:i,logout:e}=Dr(),n=Fo(),[s,o]=L.useState("movie"),[u,f]=L.useState(""),[m,p]=L.useState([]),[g,E]=L.useState(!1),[w,I]=L.useState(""),[O,M]=L.useState([]),[Q,H]=L.useState({}),Y=L.useRef(null),se=L.useRef(""),[ne,fe]=L.useState(null),[me,Ae]=L.useState(""),P=L.useRef({}),[S,R]=L.useState(!1),[N,x]=L.useState(null),[V,C]=L.useState(!1),[xe,Oe]=L.useState(""),[X,ae]=L.useState(!1),[ve,je]=L.useState(""),[k,ie]=L.useState(!1),[ue,re]=L.useState(""),[ge,Le]=L.useState("movie"),[be,Tt]=L.useState([]),[st,vn]=L.useState(!0),[ei,In]=L.useState(""),[mi,pi]=L.useState(1),[Hi,Ds]=L.useState(!1);L.useEffect(()=>{async function j(){if(!i)return;const oe=await au(Ut(He,"users",i.uid));if(oe.exists()){const pe=oe.data();Ds(Array.isArray(pe.roles)&&pe.roles.includes("admin"))}}j()},[i]),L.useEffect(()=>{Tt([]),pi(1),vn(!0),In("")},[ge]),L.useEffect(()=>{let j=!0;async function oe(pe=1){vn(!0),In("");try{const _e=await fetch(`https://api.themoviedb.org/3/trending/${ge}/week?api_key=${_o}&page=${pe}`);if(!_e.ok)throw new Error("Failed to fetch trending");const ce=await _e.json();j&&Tt(pe===1?ce.results:Ne=>{const Ue=new Set(Ne.map(ct=>ct.id));return[...Ne,...ce.results.filter(ct=>!Ue.has(ct.id))]})}catch{j&&In("Could not load trending.")}j&&vn(!1)}return oe(mi),()=>{j=!1}},[ge,mi]),L.useEffect(()=>{be.filter(oe=>!O.some(pe=>pe.id===oe.id&&pe.media_type===ge)).length<12&&be.length<100&&pi(oe=>oe+1)},[be,O,ge]),L.useEffect(()=>{if(!i)return;async function j(){const oe=ru(un(He,"diary"),hh("uid","==",i.uid));let _e=(await Sn(oe)).docs.map(ce=>({...ce.data(),docId:ce.id}));_e=_e.sort((ce,Ne)=>new Date(Ne.createdAt)-new Date(ce.createdAt)),M(_e);for(const ce of _e)Os(ce)}j()},[i]),L.useEffect(()=>{if(!i){Oe(""),je("");return}let j=!1;async function oe(){const pe=await au(Ut(He,"users",i.uid));let _e="";pe.exists()?_e=pe.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):_e=i.displayName||(i.email?i.email.split("@")[0]:i.uid),j||(Oe(_e),je(_e))}return oe(),()=>{j=!0}},[i&&i.uid]);async function Os(j){var pe;if(Q[j.id])return;const oe=Ut(He,"tmdbProvidersCache",`${j.media_type}_${j.id}`);try{const _e=await au(oe),ce=Date.now();if(_e.exists()){const Ve=_e.data();if(Ve.providers&&(Ve.providers.flatrate=Array.isArray(Ve.providers.flatrate)?Ve.providers.flatrate:[],Ve.providers.rent=Array.isArray(Ve.providers.rent)?Ve.providers.rent:[],Ve.providers.buy=Array.isArray(Ve.providers.buy)?Ve.providers.buy:[]),Ve.timestamp&&ce-Ve.timestamp<24*60*60*1e3){H(Cn=>({...Cn,[j.id]:Ve.providers}));return}}let Ne="";j.media_type==="movie"?Ne=`${Zl}/movie/${j.id}/watch/providers?api_key=${_o}`:Ne=`${Zl}/tv/${j.id}/watch/providers?api_key=${_o}`;const Ue=await fetch(Ne);if(Ue.status===404){H(Ve=>({...Ve,[j.id]:{}})),await Um(oe,{providers:{},timestamp:ce});return}const ke=((pe=(await Ue.json()).results)==null?void 0:pe[$m])||{};ke.flatrate=Array.isArray(ke.flatrate)?ke.flatrate:[],ke.rent=Array.isArray(ke.rent)?ke.rent:[],ke.buy=Array.isArray(ke.buy)?ke.buy:[],H(Ve=>({...Ve,[j.id]:ke})),await Um(oe,{providers:ke,timestamp:ce})}catch{H(ce=>({...ce,[j.id]:{}}))}}async function fn(j,oe){if(!j.trim()){p([]),I(""),E(!1);return}E(!0),I(""),p([]);try{const _e=`${Zl}${oe==="movie"?"/search/movie":"/search/tv"}?api_key=${_o}&query=${encodeURIComponent(j)}`,Ne=await(await fetch(_e)).json();Ne.results?p(Ne.results):(p([]),I("No results found."))}catch{I("Failed to fetch results.")}E(!1)}L.useEffect(()=>{if(!(u.trim()===""||u===se.current))return Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{fn(u,s)},400),()=>clearTimeout(Y.current)},[u,s]);async function $o(j){j.preventDefault(),se.current=u,await fn(u,s)}async function Or(j){if(!i||O.some(Ne=>Ne.id===j.id&&Ne.media_type===(j.media_type||s)))return;const oe={uid:i.uid,id:j.id,title:j.title||j.name,date:(j.release_date||j.first_air_date||"").slice(0,10),poster:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",desc:j.overview||"No description.",watched:!1,archived:!1,media_type:j.media_type||s,createdAt:new Date().toISOString()};await Uh(un(He,"diary"),oe);const pe=ru(un(He,"diary"),hh("uid","==",i.uid));let ce=(await Sn(pe)).docs.map(Ne=>({...Ne.data(),docId:Ne.id}));ce=ce.sort((Ne,Ue)=>new Date(Ue.createdAt)-new Date(Ne.createdAt)),M(ce),Os(oe),p([]),f("")}async function Mr(j){M(oe=>oe.filter(pe=>pe.docId!==j)),fe(null);try{await hu(Ut(He,"diary",j));const oe=ru(un(He,"diary"),hh("uid","==",i.uid));let _e=(await Sn(oe)).docs.map(ce=>({...ce.data(),docId:ce.id}));_e=_e.sort((ce,Ne)=>new Date(Ne.createdAt)-new Date(ce.createdAt)),M(_e)}catch{window.alert("Failed to remove entry. Please try again.")}}async function Fi(j,oe){const pe=!oe,_e=pe;M(ce=>ce.map(Ne=>Ne.docId===j?{...Ne,watched:pe,archived:_e}:Ne)),fe(ce=>ce&&ce.docId===j?{...ce,watched:pe,archived:_e}:ce);try{await da(Ut(He,"diary",j),{watched:pe,archived:_e})}catch{M(Ne=>Ne.map(Ue=>Ue.docId===j?{...Ue,watched:oe,archived:oe}:Ue)),fe(Ne=>Ne&&Ne.docId===j?{...Ne,watched:oe,archived:oe}:Ne),window.alert("Failed to update watched status. Please try again.")}}async function Ko(j,oe){M(pe=>pe.map(_e=>_e.docId===j?{..._e,archived:!oe}:_e)),fe(pe=>pe&&pe.docId===j?{...pe,archived:!oe}:pe);try{await da(Ut(He,"diary",j),{archived:!oe})}catch{M(_e=>_e.map(ce=>ce.docId===j?{...ce,archived:oe}:ce)),fe(_e=>_e&&_e.docId===j?{..._e,archived:oe}:_e),window.alert("Failed to update archive status. Please try again.")}}function Vr(j){window.alert(`Share this: ${j.title}`)}async function Ms(){if(!ve.trim()){re("Display name cannot be empty.");return}ie(!0),re("");try{await Um(Ut(He,"users",i.uid),{displayName:ve.trim()},{merge:!0}),Oe(ve.trim()),ae(!1);const j=await au(Ut(He,"users",i.uid));if(j.exists()){const oe=j.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);Oe(oe),je(oe)}}catch{re("Failed to update display name.")}ie(!1)}function Ia(){je(xe),ae(!0),re("")}function mt(){ae(!1),re("")}async function Je(j){var oe,pe,_e,ce,Ne,Ue;if(!j)return"";try{if(j.media_type==="movie"){const ke=await(await fetch(`${Zl}/movie/${j.id}/release_dates?api_key=${_o}`)).json(),Ve=((oe=ke.results)==null?void 0:oe.find(_i=>_i.iso_3166_1===$m))||((pe=ke.results)==null?void 0:pe[0]);return((ce=(_e=Ve==null?void 0:Ve.release_dates)==null?void 0:_e.find(_i=>_i.certification))==null?void 0:ce.certification)||""}else if(j.media_type==="tv"){const ke=await(await fetch(`${Zl}/tv/${j.id}/content_ratings?api_key=${_o}`)).json(),Ve=((Ne=ke.results)==null?void 0:Ne.find(Cn=>Cn.iso_3166_1===$m))||((Ue=ke.results)==null?void 0:Ue[0]);return(Ve==null?void 0:Ve.rating)||""}}catch{return""}return""}function Qt(j){fe(j),Ae(""),Je(j).then(oe=>Ae(oe||""))}function Bt({entry:j,providersMap:oe,onClose:pe,onShare:_e,onToggleWatched:ce,onRemove:Ne,onArchiveToggle:Ue,diary:ct,contentRating:ke}){if(!j)return null;const Ve=oe[j.id]||{},Cn=Ve.flatrate||[],_i=Ve.rent||[],ti=Ve.buy||[],vt=j;return IE.createPortal(T.jsx("div",{className:"dashboard-modal-overlay",onClick:pe,children:T.jsxs("div",{className:"dashboard-modal-content",onClick:pt=>pt.stopPropagation(),children:[T.jsx("button",{className:"dashboard-modal-close",onClick:pe,"aria-label":"Close modal",type:"button",children:""}),T.jsxs("div",{className:"dashboard-modal-body",children:[T.jsx("img",{className:"dashboard-diary-poster",src:vt.poster_path?`https://image.tmdb.org/t/p/w300${vt.poster_path}`:vt.poster||"https://placehold.co/120x170?text=No+Image",alt:vt.title,style:{marginBottom:"1rem"}}),T.jsx("div",{className:"dashboard-diary-movie-title",children:vt.title}),T.jsxs("div",{className:"dashboard-diary-date",children:[vt.release_date?vt.release_date.slice(0,4):vt.date||"",ke&&T.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:ke})]}),T.jsx("div",{className:"dashboard-diary-desc",children:vt.overview||vt.desc||""}),T.jsxs("div",{className:"dashboard-diary-providers-modal",children:[T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:Cn.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):Cn.map(pt=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${pt.logo_path}`,alt:pt.provider_name,title:pt.provider_name,className:"dashboard-provider-icon-sm"},pt.provider_id))})]}),T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:_i.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):_i.map(pt=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${pt.logo_path}`,alt:pt.provider_name,title:pt.provider_name,className:"dashboard-provider-icon-sm"},pt.provider_id))})]}),T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:ti.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):ti.map(pt=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${pt.logo_path}`,alt:pt.provider_name,title:pt.provider_name,className:"dashboard-provider-icon-sm"},pt.provider_id))})]})]}),j.media_type==="tv"&&(j.tmdbId||j.id)&&T.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:T.jsx(YM,{show:{...j,tmdbId:j.tmdbId||j.id}})}),T.jsxs("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:[T.jsx("button",{className:"dashboard-diary-share",onClick:()=>_e(vt),title:"Share this diary entry with friends via link or social media",children:"SHARE"}),T.jsx("button",{className:vt.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>ce(vt.docId,vt.watched),title:vt.watched?"Mark as not watched":"Mark as watched",children:vt.watched?"WATCHED":"UNWATCHED"}),T.jsx("button",{className:"dashboard-diary-archive",style:{background:j.archived?"#b2b2b2":"#25609c",color:j.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>Ue(j.docId,j.archived),title:j.archived?"Move this entry back to active diary":"Archive this entry (hide from main diary)",children:j.archived?"Unarchive":"Archive"}),T.jsx("button",{className:"dashboard-diary-remove",onClick:()=>Ne(vt.docId),title:"Remove this diary entry permanently",children:"REMOVE"})]}),T.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[T.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),T.jsx(o4,{entryId:vt.id})]})]})]})}),document.getElementById("modal-root"))}const Ca=gs.memo(Bt);function Qo(){const j={};return O.filter(oe=>oe.media_type===s).forEach(oe=>{const pe=Q[oe.id];pe&&[...pe.flatrate||[],...pe.rent||[],...pe.buy||[]].forEach(_e=>{j[_e.provider_id]=_e})}),Object.values(j)}const gi=N?O.filter(j=>{if(j.media_type!==s||j.archived)return!1;const oe=Q[j.id];return oe?[...oe.flatrate||[],...oe.rent||[],...oe.buy||[]].some(pe=>pe.provider_id===N.provider_id):!1}):O.filter(j=>j.media_type===s&&!j.archived);function Gi({open:j,onClose:oe,providers:pe,onSelect:_e}){return j?IE.createPortal(T.jsx("div",{className:"dashboard-modal-overlay",onClick:oe,children:T.jsxs("div",{className:"dashboard-modal-content",onClick:ce=>ce.stopPropagation(),style:{maxWidth:440,padding:24},children:[T.jsx("button",{className:"dashboard-modal-close",onClick:oe,"aria-label":"Close modal",type:"button",children:""}),T.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"Click to View Streaming Providers"}),T.jsx("div",{style:{margin:"0 0 12px 0",color:"#8fc7ff",fontSize:"1.02rem",textAlign:"center",fontWeight:500},children:"View all providers. Click on a provider icon below to filter your diary and see which shows can be watched for that provider."}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:pe.map(ce=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${ce.logo_path}`,alt:ce.provider_name,title:ce.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:N&&N.provider_id===ce.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>{_e(ce),x(ce)}},ce.provider_id))}),N&&T.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>x(null),children:"Show All Entries"}),T.jsx("div",{style:{marginTop:24},children:gi.length===0?T.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):T.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:gi.map(ce=>T.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0003",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center",cursor:"pointer"},onClick:()=>{Qt(ce),oe()},children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:ce.poster,alt:ce.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:ce.title})]},ce.docId))})})]})}),document.getElementById("modal-root")):null}const yi=O.filter(j=>!j.archived&&j.media_type===s),_n=O.filter(j=>j.archived&&j.media_type===s);function $i(j){Le(j)}function Ki(j){Or({id:j.id,title:j.title||j.name,poster_path:j.poster_path,release_date:j.release_date||j.first_air_date,overview:j.overview,media_type:ge}),Tt(oe=>oe.filter(pe=>pe.id!==j.id))}function Vs(){const[j,oe]=L.useState(!1);L.useEffect(()=>{function _e(){oe(window.scrollY>300)}return window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)},[]);const pe=()=>{window.scrollTo({top:0,behavior:"smooth"})};return j?T.jsx("button",{onClick:pe,style:{position:"fixed",right:18,bottom:28,zIndex:9999,background:"rgba(37,96,156,0.93)",color:"#fff",border:"none",borderRadius:"50%",width:54,height:54,boxShadow:"0 3px 12px #0005",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,cursor:"pointer",touchAction:"manipulation"},"aria-label":"Back to top",className:"back-to-top-btn",children:T.jsx("span",{style:{fontSize:45,marginTop:-2},children:""})}):null}const[kr,Pr]=L.useState([]),[vi,jn]=L.useState(!0);L.useEffect(()=>{let j=!1;async function oe(){if(!i)return;jn(!0);const pe=ru(un(He,`users/${i.uid}/notifications`),hh("read","==",!1),qb("createdAt","desc")),ce=(await Sn(pe)).docs.map(Ne=>({id:Ne.id,...Ne.data()}));j||(Pr(ce),jn(!1))}return oe(),()=>{j=!0}},[i,He]);async function ks(j){i&&(await da(Ut(He,`users/${i.uid}/notifications`,j),{read:!0}),Pr(kr.filter(oe=>oe.id!==j)))}return T.jsxs(T.Fragment,{children:[kr.map(j=>T.jsx(T4,{notification:j,onDismiss:()=>ks(j.id)},j.id)),T.jsxs("div",{className:"dashboard-bg",children:[T.jsx("style",{children:`
            .dashboard-trending-movie-title {
              display: -webkit-box;
              -webkit-line-clamp: 2;
              -webkit-box-orient: vertical;
              overflow: hidden;
              min-height: 2.7em;
              max-height: 2.7em;
              line-height: 1.35em;
              font-size: 1.07rem;
              font-weight: 600;
              color: #fff;
              margin: 0.7em 0 0.2em 0;
              text-align: center;
            }
            .dashboard-trending-desc {
              display: -webkit-box;
              -webkit-line-clamp: 5;
              -webkit-box-orient: vertical;
              overflow: hidden;
              min-height: 6.75em;
              max-height: 6.75em;
              line-height: 1.35em;
              font-size: 0.98rem;
              color: #c7d0e0;
              margin-bottom: 1em;
              text-align: center;
            }
          `}),T.jsxs("div",{className:"dashboard-content-wrapper",children:[T.jsx("div",{className:"dashboard-banner",children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[T.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),X?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:ve,onChange:j=>je(j.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:k,autoFocus:!0}),T.jsx("button",{onClick:Ms,disabled:k,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:T.jsx(p4,{})}),T.jsx("button",{onClick:mt,disabled:k,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:T.jsx(_4,{})})]}):T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:xe}),T.jsx("button",{onClick:Ia,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:T.jsx(g4,{})})]})]}),ue&&T.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:ue}),T.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[T.jsx("button",{className:"dashboard-signout",onClick:async()=>{try{await e(),window.localStorage.clear(),window.sessionStorage.clear(),n("/"),window.location.reload()}catch{alert("Failed to sign out")}},style:{background:"#2a1b1b",color:"#ffb3b3",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},children:"Sign Out"}),Hi&&T.jsx("button",{className:"dashboard-admin-btn",style:{background:"#25609c",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},onClick:()=>n("/admin"),children:"Admin Dashboard"})]})]})}),T.jsxs("div",{className:"dashboard-search-section",children:[T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),T.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),T.jsx("div",{className:"dashboard-search-instructions",children:"NEED INSTRUCTIONS?"}),T.jsxs("div",{className:"dashboard-search-toggle-row",children:[T.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),T.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),T.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:$o,children:[T.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows*",value:u,onChange:j=>f(j.target.value)}),T.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),T.jsxs("div",{className:"dashboard-search-results",children:[w&&T.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:w}),!w&&m.length>0&&T.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(j=>T.jsxs("div",{className:"dashboard-trending-card",children:[T.jsx("img",{src:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:j.title||j.name,className:"dashboard-trending-poster"}),T.jsx("div",{className:"dashboard-trending-movie-title",children:j.title||j.name}),T.jsx("div",{className:"dashboard-trending-year",children:(j.release_date||j.first_air_date||"").slice(0,4)}),T.jsx("div",{className:"dashboard-trending-desc",children:j.overview?j.overview.slice(0,90)+(j.overview.length>90?"":""):"No description."}),T.jsx("button",{className:"dashboard-trending-add",onClick:()=>Or(j),children:O.some(oe=>oe.id===j.id)?"IN DIARY":"ADD TO DIARY"})]},j.id))})]})]}),T.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"1.5rem 0"},children:T.jsx("ins",{className:"adsbygoogle",style:{display:"block",width:"100%",maxWidth:728,minHeight:90},"data-ad-client":"ca-pub-5502818698237515","data-ad-slot":"1749671682","data-ad-format":"auto"})}),T.jsxs("div",{className:"dashboard-diary-section",children:[T.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),T.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[T.jsx("button",{className:`dashboard-toggle${V?"":" active"}`,onClick:()=>C(!1),children:"My Diary"}),T.jsx("button",{className:`dashboard-toggle${V?" active":""}`,onClick:()=>C(!0),children:"Archived"})]}),T.jsx("div",{className:"dashboard-diary-providers-row",children:T.jsx("button",{className:"dashboard-providers-btn",onClick:()=>R(!0),title:"View all providers. Click on a provider icon to see which shows can be watched for that provider.",children:"Click to View Streaming Providers"})}),V?_n.length===0?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No archived entries."}):T.jsx("div",{className:"dashboard-diary-cards-row",children:_n.map(j=>(P.current[j.docId]||(P.current[j.docId]=L.createRef()),T.jsxs("section",{ref:oe=>P.current[j.docId]=oe,className:"dashboard-diary-card collapsed",children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:T.jsx("img",{src:j.poster,alt:j.title,className:"dashboard-diary-poster collapsed"})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:j.title}),T.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Qt(j),children:["Show More ",T.jsx(YE,{})]})]},j.docId)))}):yi.length===0?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):T.jsx("div",{className:"dashboard-diary-cards-row",children:yi.map(j=>(P.current[j.docId]||(P.current[j.docId]=L.createRef()),T.jsxs("section",{ref:oe=>P.current[j.docId]=oe,className:"dashboard-diary-card collapsed",children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:T.jsx("img",{src:j.poster,alt:j.title,className:"dashboard-diary-poster collapsed"})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:j.title}),T.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Qt(j),children:["Show More ",T.jsx(YE,{})]})]},j.docId)))})]}),T.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),T.jsxs("div",{className:"dashboard-trending-section",children:[T.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",ge==="movie"?"Movies":"TV Shows"]}),T.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[T.jsx("button",{className:ge==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>$i("movie"),children:"Movies"}),T.jsx("button",{className:ge==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>$i("tv"),children:"TV Shows"})]}),T.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:st?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading"}):ei?T.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:ei}):be.filter(j=>!O.some(oe=>oe.id===j.id&&oe.media_type===ge)).slice(0,10).map(j=>T.jsxs("div",{className:"dashboard-trending-card",children:[T.jsx("img",{src:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:j.title||j.name,className:"dashboard-trending-poster"}),T.jsx("div",{className:"dashboard-trending-movie-title",children:j.title||j.name}),T.jsx("div",{className:"dashboard-trending-year",children:(j.release_date||j.first_air_date||"").slice(0,4)}),T.jsx("div",{className:"dashboard-trending-desc",children:j.overview?j.overview.slice(0,90)+(j.overview.length>90?"":""):"No description."}),T.jsx("button",{className:"dashboard-trending-add",onClick:()=>Ki(j),children:"ADD TO DIARY"})]},j.id))})]})]})]}),ne&&T.jsx(Ca,{entry:ne,providersMap:Q,onClose:()=>fe(null),onShare:Vr,onToggleWatched:Fi,onRemove:Mr,onArchiveToggle:Ko,diary:O,contentRating:me}),T.jsx(Gi,{open:S,onClose:()=>{R(!1),x(null)},providers:Qo(),onSelect:j=>x(j)}),T.jsx(Vs,{}),T.jsx(E4,{})]})}function w4(){const{currentUser:i,resendVerificationEmail:e,logout:n}=Dr(),[s,o]=L.useState(!1),[u,f]=L.useState(""),[m,p]=L.useState(!1),[g,E]=L.useState(!1),w=Fo(),I=async()=>{f("");try{await e(),o(!0)}catch{f("Failed to resend verification email.")}},O=async()=>{await n(),w("/login")},M=async()=>{p(!0),f("");try{await i.reload(),E(!0),i.emailVerified&&window.location.reload()}catch{f("Could not refresh status.")}p(!1)};return T.jsxs("div",{className:"verify-email-page",children:[T.jsxs("div",{className:"verify-branding",children:[T.jsx("img",{src:KA,alt:"Site Logo",className:"verify-logo"}),T.jsx("h2",{children:"Welcome to ShowsWatched!"})]}),T.jsxs("div",{className:"verify-card",children:[T.jsx("h3",{children:"Verify Your Email"}),T.jsxs("p",{children:["We have sent a verification link to ",T.jsx("b",{children:i==null?void 0:i.email}),".",T.jsx("br",{}),"Please check your inbox and click the link to verify your email address."]}),s&&T.jsx("p",{style:{color:"green"},children:"Verification email sent!"}),u&&T.jsx("p",{style:{color:"red"},children:u}),T.jsx("button",{onClick:I,disabled:m,children:"Resend Verification Email"}),T.jsx("button",{onClick:M,disabled:m,style:{marginLeft:"1rem"},children:m?"Checking...":"Refresh Status"}),T.jsx("button",{onClick:O,style:{marginLeft:"1rem",background:"#eee",color:"#333"},children:"Log Out"}),g&&!i.emailVerified&&T.jsx("p",{style:{color:"orange",marginTop:"1rem"},children:"Still not verified. Please try again after clicking the link in your email."})]})]})}function S4(){const{currentUser:i,emailVerified:e}=Dr();return T.jsxs(KN,{children:[T.jsx(us,{path:"/login",element:T.jsx($M,{})}),T.jsx(us,{path:"/signup",element:T.jsx(KM,{})}),T.jsx(us,{path:"/verify-email",element:T.jsx(w4,{})}),T.jsx(us,{path:"/admin",element:T.jsx(QM,{children:i&&!e?T.jsx(cs,{to:"/verify-email",replace:!0}):T.jsx(n4,{})})}),T.jsx(us,{path:"/dashboard",element:i&&!e?T.jsx(cs,{to:"/verify-email",replace:!0}):T.jsx(b4,{})}),T.jsx(us,{path:"/",element:i?e?T.jsx(cs,{to:"/dashboard",replace:!0}):T.jsx(cs,{to:"/verify-email",replace:!0}):T.jsx(a4,{})}),T.jsx(us,{path:"*",element:i&&!e?T.jsx(cs,{to:"/verify-email",replace:!0}):T.jsx(cs,{to:"/",replace:!0})})]})}$A.createRoot(document.getElementById("root")).render(T.jsx(L.StrictMode,{children:T.jsx(yD,{basename:"/showswatched2",children:T.jsx(GM,{children:T.jsx(S4,{})})})}));
