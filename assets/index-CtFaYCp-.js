(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function eT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var wm={exports:{}},Yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function BA(){if($_)return Yl;$_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Yl.Fragment=e,Yl.jsx=n,Yl.jsxs=n,Yl}var K_;function qA(){return K_||(K_=1,wm.exports=BA()),wm.exports}var T=qA(),bm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function HA(){if(Q_)return Pe;Q_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.iterator;function I(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Q={};function H(P,re,he){this.props=P,this.context=re,this.refs=Q,this.updater=he||O}H.prototype.isReactComponent={},H.prototype.setState=function(P,re){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,re,"setState")},H.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Y(){}Y.prototype=H.prototype;function ae(P,re,he){this.props=P,this.context=re,this.refs=Q,this.updater=he||O}var J=ae.prototype=new Y;J.constructor=ae,M(J,H.prototype),J.isPureReactComponent=!0;var _e=Array.isArray,fe={H:null,A:null,T:null,S:null,V:null},be=Object.prototype.hasOwnProperty;function U(P,re,he,se,Te,Ve){return he=Ve.ref,{$$typeof:i,type:P,key:re,ref:he!==void 0?he:null,props:Ve}}function S(P,re){return U(P.type,re,void 0,void 0,void 0,P.props)}function R(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function D(P){var re={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return re[he]})}var x=/\/+/g;function k(P,re){return typeof P=="object"&&P!==null&&P.key!=null?D(""+P.key):re.toString(36)}function C(){}function Ie(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(C,C):(P.status="pending",P.then(function(re){P.status==="pending"&&(P.status="fulfilled",P.value=re)},function(re){P.status==="pending"&&(P.status="rejected",P.reason=re)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ke(P,re,he,se,Te){var Ve=typeof P;(Ve==="undefined"||Ve==="boolean")&&(P=null);var Ae=!1;if(P===null)Ae=!0;else switch(Ve){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(P.$$typeof){case i:case e:Ae=!0;break;case E:return Ae=P._init,ke(Ae(P._payload),re,he,se,Te)}}if(Ae)return Te=Te(P),Ae=se===""?"."+k(P,0):se,_e(Te)?(he="",Ae!=null&&(he=Ae.replace(x,"$&/")+"/"),ke(Te,re,he,"",function(xn){return xn})):Te!=null&&(R(Te)&&(Te=S(Te,he+(Te.key==null||P&&P.key===Te.key?"":(""+Te.key).replace(x,"$&/")+"/")+Ae)),re.push(Te)),1;Ae=0;var Ct=se===""?".":se+":";if(_e(P))for(var nt=0;nt<P.length;nt++)se=P[nt],Ve=Ct+k(se,nt),Ae+=ke(se,re,he,Ve,Te);else if(nt=I(P),typeof nt=="function")for(P=nt.call(P),nt=0;!(se=P.next()).done;)se=se.value,Ve=Ct+k(se,nt++),Ae+=ke(se,re,he,Ve,Te);else if(Ve==="object"){if(typeof P.then=="function")return ke(Ie(P),re,he,se,Te);throw re=String(P),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function W(P,re,he){if(P==null)return P;var se=[],Te=0;return ke(P,se,"","",function(Ve){return re.call(he,Ve,Te++)}),se}function oe(P){if(P._status===-1){var re=P._result;re=re(),re.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=re)}if(P._status===1)return P._result.default;throw P._result}var ye=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Be(){}return Pe.Children={map:W,forEach:function(P,re,he){W(P,function(){re.apply(this,arguments)},he)},count:function(P){var re=0;return W(P,function(){re++}),re},toArray:function(P){return W(P,function(re){return re})||[]},only:function(P){if(!R(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Pe.Component=H,Pe.Fragment=n,Pe.Profiler=o,Pe.PureComponent=ae,Pe.StrictMode=s,Pe.Suspense=p,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return fe.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cloneElement=function(P,re,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var se=M({},P.props),Te=P.key,Ve=void 0;if(re!=null)for(Ae in re.ref!==void 0&&(Ve=void 0),re.key!==void 0&&(Te=""+re.key),re)!be.call(re,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&re.ref===void 0||(se[Ae]=re[Ae]);var Ae=arguments.length-2;if(Ae===1)se.children=he;else if(1<Ae){for(var Ct=Array(Ae),nt=0;nt<Ae;nt++)Ct[nt]=arguments[nt+2];se.children=Ct}return U(P.type,Te,void 0,void 0,Ve,se)},Pe.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Pe.createElement=function(P,re,he){var se,Te={},Ve=null;if(re!=null)for(se in re.key!==void 0&&(Ve=""+re.key),re)be.call(re,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Te[se]=re[se]);var Ae=arguments.length-2;if(Ae===1)Te.children=he;else if(1<Ae){for(var Ct=Array(Ae),nt=0;nt<Ae;nt++)Ct[nt]=arguments[nt+2];Te.children=Ct}if(P&&P.defaultProps)for(se in Ae=P.defaultProps,Ae)Te[se]===void 0&&(Te[se]=Ae[se]);return U(P,Ve,void 0,void 0,null,Te)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:m,render:P}},Pe.isValidElement=R,Pe.lazy=function(P){return{$$typeof:E,_payload:{_status:-1,_result:P},_init:oe}},Pe.memo=function(P,re){return{$$typeof:g,type:P,compare:re===void 0?null:re}},Pe.startTransition=function(P){var re=fe.T,he={};fe.T=he;try{var se=P(),Te=fe.S;Te!==null&&Te(he,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Be,ye)}catch(Ve){ye(Ve)}finally{fe.T=re}},Pe.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},Pe.use=function(P){return fe.H.use(P)},Pe.useActionState=function(P,re,he){return fe.H.useActionState(P,re,he)},Pe.useCallback=function(P,re){return fe.H.useCallback(P,re)},Pe.useContext=function(P){return fe.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,re){return fe.H.useDeferredValue(P,re)},Pe.useEffect=function(P,re,he){var se=fe.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(P,re)},Pe.useId=function(){return fe.H.useId()},Pe.useImperativeHandle=function(P,re,he){return fe.H.useImperativeHandle(P,re,he)},Pe.useInsertionEffect=function(P,re){return fe.H.useInsertionEffect(P,re)},Pe.useLayoutEffect=function(P,re){return fe.H.useLayoutEffect(P,re)},Pe.useMemo=function(P,re){return fe.H.useMemo(P,re)},Pe.useOptimistic=function(P,re){return fe.H.useOptimistic(P,re)},Pe.useReducer=function(P,re,he){return fe.H.useReducer(P,re,he)},Pe.useRef=function(P){return fe.H.useRef(P)},Pe.useState=function(P){return fe.H.useState(P)},Pe.useSyncExternalStore=function(P,re,he){return fe.H.useSyncExternalStore(P,re,he)},Pe.useTransition=function(){return fe.H.useTransition()},Pe.version="19.1.0",Pe}var Y_;function Sp(){return Y_||(Y_=1,bm.exports=HA()),bm.exports}var V=Sp();const ys=eT(V);var Sm={exports:{}},Wl={},Am={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function FA(){return W_||(W_=1,function(i){function e(W,oe){var ye=W.length;W.push(oe);e:for(;0<ye;){var Be=ye-1>>>1,P=W[Be];if(0<o(P,oe))W[Be]=oe,W[ye]=P,ye=Be;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var oe=W[0],ye=W.pop();if(ye!==oe){W[0]=ye;e:for(var Be=0,P=W.length,re=P>>>1;Be<re;){var he=2*(Be+1)-1,se=W[he],Te=he+1,Ve=W[Te];if(0>o(se,ye))Te<P&&0>o(Ve,se)?(W[Be]=Ve,W[Te]=ye,Be=Te):(W[Be]=se,W[he]=ye,Be=he);else if(Te<P&&0>o(Ve,ye))W[Be]=Ve,W[Te]=ye,Be=Te;else break e}}return oe}function o(W,oe){var ye=W.sortIndex-oe.sortIndex;return ye!==0?ye:W.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var p=[],g=[],E=1,b=null,I=3,O=!1,M=!1,Q=!1,H=!1,Y=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function _e(W){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=W)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function fe(W){if(Q=!1,_e(W),!M)if(n(p)!==null)M=!0,be||(be=!0,k());else{var oe=n(g);oe!==null&&ke(fe,oe.startTime-W)}}var be=!1,U=-1,S=5,R=-1;function D(){return H?!0:!(i.unstable_now()-R<S)}function x(){if(H=!1,be){var W=i.unstable_now();R=W;var oe=!0;try{e:{M=!1,Q&&(Q=!1,ae(U),U=-1),O=!0;var ye=I;try{t:{for(_e(W),b=n(p);b!==null&&!(b.expirationTime>W&&D());){var Be=b.callback;if(typeof Be=="function"){b.callback=null,I=b.priorityLevel;var P=Be(b.expirationTime<=W);if(W=i.unstable_now(),typeof P=="function"){b.callback=P,_e(W),oe=!0;break t}b===n(p)&&s(p),_e(W)}else s(p);b=n(p)}if(b!==null)oe=!0;else{var re=n(g);re!==null&&ke(fe,re.startTime-W),oe=!1}}break e}finally{b=null,I=ye,O=!1}oe=void 0}}finally{oe?k():be=!1}}}var k;if(typeof J=="function")k=function(){J(x)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ie=C.port2;C.port1.onmessage=x,k=function(){Ie.postMessage(null)}}else k=function(){Y(x,0)};function ke(W,oe){U=Y(function(){W(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(W){switch(I){case 1:case 2:case 3:var oe=3;break;default:oe=I}var ye=I;I=oe;try{return W()}finally{I=ye}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ye=I;I=W;try{return oe()}finally{I=ye}},i.unstable_scheduleCallback=function(W,oe,ye){var Be=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Be+ye:Be):ye=Be,W){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ye+P,W={id:E++,callback:oe,priorityLevel:W,startTime:ye,expirationTime:P,sortIndex:-1},ye>Be?(W.sortIndex=ye,e(g,W),n(p)===null&&W===n(g)&&(Q?(ae(U),U=-1):Q=!0,ke(fe,ye-Be))):(W.sortIndex=P,e(p,W),M||O||(M=!0,be||(be=!0,k()))),W},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(W){var oe=I;return function(){var ye=I;I=oe;try{return W.apply(this,arguments)}finally{I=ye}}}}(Rm)),Rm}var X_;function GA(){return X_||(X_=1,Am.exports=FA()),Am.exports}var Im={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function $A(){if(Z_)return rn;Z_=1;var i=Sp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:E}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,rn.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},rn.flushSync=function(p){var g=h.T,E=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=E,s.d.f()}},rn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},rn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},rn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:I,fetchPriority:O}):E==="script"&&s.d.X(p,{crossOrigin:b,integrity:I,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},rn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},rn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},rn.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},rn.requestFormReset=function(p){s.d.r(p)},rn.unstable_batchedUpdates=function(p,g){return p(g)},rn.useFormState=function(p,g,E){return h.H.useFormState(p,g,E)},rn.useFormStatus=function(){return h.H.useHostTransitionStatus()},rn.version="19.1.0",rn}var J_;function tT(){if(J_)return Im.exports;J_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=$A(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function KA(){if(e0)return Wl;e0=1;var i=GA(),e=Sp(),n=tT();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return m(d),t;if(f===l)return m(d),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=f;else{for(var _=!1,w=d.child;w;){if(w===a){_=!0,a=d,l=f;break}if(w===l){_=!0,l=d,a=f;break}w=w.sibling}if(!_){for(w=f.child;w;){if(w===a){_=!0,a=f,l=d;break}if(w===l){_=!0,l=f,a=d;break}w=w.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),J=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case H:return"Profiler";case Q:return"StrictMode";case fe:return"Suspense";case be:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case J:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case _e:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return r=t.displayName||null,r!==null?r:Ie(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return Ie(t(r))}catch{}}return null}var ke=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Be=[],P=-1;function re(t){return{current:t}}function he(t){0>P||(t.current=Be[P],Be[P]=null,P--)}function se(t,r){P++,Be[P]=t.current,t.current=r}var Te=re(null),Ve=re(null),Ae=re(null),Ct=re(null);function nt(t,r){switch(se(Ae,r),se(Ve,t),se(Te,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?E_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=E_(r),t=T_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}he(Te),se(Te,t)}function xn(){he(Te),he(Ve),he(Ae)}function zn(t){t.memoizedState!==null&&se(Ct,t);var r=Te.current,a=T_(r,t.type);r!==a&&(se(Ve,t),se(Te,a))}function Bn(t){Ve.current===t&&(he(Te),he(Ve)),Ct.current===t&&(he(Ct),Fl._currentValue=ye)}var vi=Object.prototype.hasOwnProperty,Gi=i.unstable_scheduleCallback,$i=i.unstable_cancelCallback,Mr=i.unstable_shouldYield,Ds=i.unstable_requestPaint,vn=i.unstable_now,Os=i.unstable_getCurrentPriorityLevel,Ms=i.unstable_ImmediatePriority,Vr=i.unstable_UserBlockingPriority,Ki=i.unstable_NormalPriority,Yo=i.unstable_LowPriority,kr=i.unstable_IdlePriority,Vs=i.log,Na=i.unstable_setDisableYieldValue,mt=null,$e=null;function hn(t){if(typeof Vs=="function"&&Na(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(mt,t)}catch{}}var Bt=Math.clz32?Math.clz32:Qi,Da=Math.log,Oa=Math.LN2;function Qi(t){return t>>>=0,t===0?32:31-(Da(t)/Oa|0)|0}var _i=256,Ei=4194304;function _n(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Pr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~f,l!==0?d=_n(l):(_&=w,_!==0?d=_n(_):a||(a=w&~t,a!==0&&(d=_n(a))))):(w=l&~f,w!==0?d=_n(w):_!==0?d=_n(_):a||(a=l&~t,a!==0&&(d=_n(a)))),d===0?0:r!==0&&r!==d&&(r&f)===0&&(f=d&-d,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:d}function Yi(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Lr(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ur(){var t=_i;return _i<<=1,(_i&4194048)===0&&(_i=256),t}function Ma(){var t=Ei;return Ei<<=1,(Ei&62914560)===0&&(Ei=4194304),t}function qn(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function ai(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ks(t,r,a,l,d,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,N=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var X=31-Bt(a),te=1<<X;w[X]=0,N[X]=-1;var G=F[X];if(G!==null)for(F[X]=null,X=0;X<G.length;X++){var $=G[X];$!==null&&($.lane&=-536870913)}a&=~te}l!==0&&Hn(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~r))}function Hn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Bt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function L(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Bt(a),d=1<<l;d&r|t[l]&r&&(t[l]|=r),a&=~d}}function ie(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ue(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function le(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:z_(t.type))}function me(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var de=Math.random().toString(36).slice(2),De="__reactFiber$"+de,Je="__reactProps$"+de,Xe="__reactContainer$"+de,Ze="__reactEvents$"+de,Fn="__reactListeners$"+de,dn="__reactHandles$"+de,Ps="__reactResources$"+de,Ti="__reactMarker$"+de;function lt(t){delete t[De],delete t[Je],delete t[Ze],delete t[Fn],delete t[dn]}function En(t){var r=t[De];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Xe]||a[De]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=A_(t);t!==null;){if(a=t[De])return a;t=A_(t)}return r}t=a,a=t.parentNode}return null}function it(t){if(t=t[De]||t[Xe]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function wi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function fn(t){var r=t[Ps];return r||(r=t[Ps]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(t){t[Ti]=!0}var Wo=new Set,Va={};function oi(t,r){Wi(t,r),Wi(t+"Capture",r)}function Wi(t,r){for(Va[t]=r,t=0;t<r.length;t++)Wo.add(r[t])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},Ls={};function Hu(t){return vi.call(Ls,t)?!0:vi.call(qu,t)?!1:Bu.test(t)?Ls[t]=!0:(qu[t]=!0,!1)}function jr(t,r,a){if(Hu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function bi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Qt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Us,Fu;function Xi(t){if(Us===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Us=r&&r[1]||"",Fu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+t+Fu}var ka=!1;function Pa(t,r){if(!t||ka)return"";ka=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var G=$}Reflect.construct(t,[],te)}else{try{te.call()}catch($){G=$}t.call(te.prototype)}}else{try{throw Error()}catch($){G=$}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],w=f[1];if(_&&w){var N=_.split(`
`),F=w.split(`
`);for(d=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(l===N.length||d===F.length)for(l=N.length-1,d=F.length-1;1<=l&&0<=d&&N[l]!==F[d];)d--;for(;1<=l&&0<=d;l--,d--)if(N[l]!==F[d]){if(l!==1||d!==1)do if(l--,d--,0>d||N[l]!==F[d]){var X=`
`+N[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=d);break}}}finally{ka=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Xi(a):""}function Xo(t){switch(t.tag){case 26:case 27:case 5:return Xi(t.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 15:return Pa(t.type,!1);case 11:return Pa(t.type.render,!1);case 1:return Pa(t.type,!0);case 31:return Xi("Activity");default:return""}}function La(t){try{var r="";do r+=Xo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ad(t){var r=Zo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return d.call(this)},set:function(_){l=""+_,f.call(this,_)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ua(t){t._valueTracker||(t._valueTracker=Ad(t))}function Jo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Zo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function js(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rd=/[\n"\\]/g;function xt(t){return t.replace(Rd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Nn(t,r,a,l,d,f,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mn(r)):t.value!==""+mn(r)&&(t.value=""+mn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?zr(t,_,mn(r)):a!=null?zr(t,_,mn(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+mn(w):t.removeAttribute("name")}function zs(t,r,a,l,d,f,_,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+mn(a):"",r=r!=null?""+mn(r):a,w||r===t.value||(t.value=r),t.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function zr(t,r,a){r==="number"&&js(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Zi(t,r,a,l){if(t=t.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=r.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mn(a),r=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}r!==null||t[d].disabled||(r=t[d])}r!==null&&(r.selected=!0)}}function ut(t,r,a){if(r!=null&&(r=""+mn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mn(a):""}function Bs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(ke(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Gn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||qs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function el(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&Gu(t,d,l)}else for(var f in r)r.hasOwnProperty(f)&&Gu(t,f,r[f])}function tl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ja(t){return Cd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ji=null;function $n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var er=null,tr=null;function nl(t){var r=it(t);if(r&&(t=r.stateNode)){var a=t[Je]||null;e:switch(t=r.stateNode,r.type){case"input":if(Nn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var d=l[Je]||null;if(!d)throw Error(s(90));Nn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Jo(l)}break e;case"textarea":ut(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Zi(t,!!a.multiple,r,!1)}}}var Si=!1;function $u(t,r,a){if(Si)return t(r,a);Si=!0;try{var l=t(r);return l}finally{if(Si=!1,(er!==null||tr!==null)&&(jc(),er&&(r=er,t=tr,tr=er=null,nl(r),t)))for(r=0;r<t.length;r++)nl(t[r])}}function Hs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Je]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kn=!1;if(li)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){Kn=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{Kn=!1}var Ai=null,Br=null,nr=null;function il(){if(nr)return nr;var t,r=Br,a=r.length,l,d="value"in Ai?Ai.value:Ai.textContent,f=d.length;for(t=0;t<a&&r[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===d[f-l];l++);return nr=d.slice(t,1<l?1-l:void 0)}function Ri(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ii(){return!0}function rl(){return!1}function qt(t){function r(a,l,d,f,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ii:rl,this.isPropagationStopped=rl,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ii)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ii)},persist:function(){},isPersistent:Ii}),r}var rt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=qt(rt),Gs=E({},rt,{view:0,detail:0}),Ku=qt(Gs),Ba,qa,Ci,$s=E({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Ba=t.screenX-Ci.screenX,qa=t.screenY-Ci.screenY):qa=Ba=0,Ci=t),Ba)},movementY:function(t){return"movementY"in t?t.movementY:qa}}),Qn=qt($s),Qu=E({},$s,{dataTransfer:0}),xd=qt(Qu),Ks=E({},Gs,{relatedTarget:0}),Ha=qt(Ks),sl=E({},rt,{animationName:0,elapsedTime:0,pseudoElement:0}),Fa=qt(sl),Yu=E({},rt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ga=qt(Yu),Nd=E({},rt,{data:0}),al=qt(Nd),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Xu[t])?!!r[t]:!1}function Ys(){return ol}var Zu=E({},Gs,{key:function(t){if(t.key){var r=Qs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ri(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(t){return t.type==="keypress"?Ri(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ri(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$a=qt(Zu),Ju=E({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=qt(Ju),ir=E({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),ec=qt(ir),tc=E({},rt,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=qt(tc),ic=E({},$s,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=qt(ic),pn=E({},rt,{newState:0,oldState:0}),rc=qt(pn),sc=[9,13,27,32],xi=li&&"CompositionEvent"in window,c=null;li&&"documentMode"in document&&(c=document.documentMode);var y=li&&"TextEvent"in window&&!c,v=li&&(!xi||c&&8<c&&11>=c),A=" ",B=!1;function K(t,r){switch(t){case"keyup":return sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ke=!1;function Vt(t,r){switch(t){case"compositionend":return ce(r);case"keypress":return r.which!==32?null:(B=!0,A);case"textInput":return t=r.data,t===A&&B?null:t;default:return null}}function Qe(t,r){if(Ke)return t==="compositionend"||!xi&&K(t,r)?(t=il(),nr=Br=Ai=null,Ke=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ht[t.type]:r==="textarea"}function rr(t,r,a,l){er?tr?tr.push(l):tr=[l]:er=l,r=Gc(r,"onChange"),0<r.length&&(a=new za("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Yt=null,Ni=null;function ul(t){p_(t,0)}function ac(t){var r=wi(t);if(Jo(r))return t}function Pg(t,r){if(t==="change")return r}var Lg=!1;if(li){var Dd;if(li){var Od="oninput"in document;if(!Od){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Od=typeof Ug.oninput=="function"}Dd=Od}else Dd=!1;Lg=Dd&&(!document.documentMode||9<document.documentMode)}function jg(){Yt&&(Yt.detachEvent("onpropertychange",zg),Ni=Yt=null)}function zg(t){if(t.propertyName==="value"&&ac(Ni)){var r=[];rr(r,Ni,t,$n(t)),$u(ul,r)}}function yS(t,r,a){t==="focusin"?(jg(),Yt=r,Ni=a,Yt.attachEvent("onpropertychange",zg)):t==="focusout"&&jg()}function vS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ac(Ni)}function _S(t,r){if(t==="click")return ac(r)}function ES(t,r){if(t==="input"||t==="change")return ac(r)}function TS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Dn=typeof Object.is=="function"?Object.is:TS;function cl(t,r){if(Dn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!vi.call(r,d)||!Dn(t[d],r[d]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,r){var a=Bg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bg(a)}}function Hg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Hg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Fg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=js(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=js(t.document)}return r}function Md(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var wS=li&&"documentMode"in document&&11>=document.documentMode,Qa=null,Vd=null,hl=null,kd=!1;function Gg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kd||Qa==null||Qa!==js(l)||(l=Qa,"selectionStart"in l&&Md(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hl&&cl(hl,l)||(hl=l,l=Gc(Vd,"onSelect"),0<l.length&&(r=new za("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Qa)))}function Ws(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ya={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},Pd={},$g={};li&&($g=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Xs(t){if(Pd[t])return Pd[t];if(!Ya[t])return t;var r=Ya[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in $g)return Pd[t]=r[a];return t}var Kg=Xs("animationend"),Qg=Xs("animationiteration"),Yg=Xs("animationstart"),bS=Xs("transitionrun"),SS=Xs("transitionstart"),AS=Xs("transitioncancel"),Wg=Xs("transitionend"),Xg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function ui(t,r){Xg.set(t,r),oi(r,[t])}var Zg=new WeakMap;function Yn(t,r){if(typeof t=="object"&&t!==null){var a=Zg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:La(r)},Zg.set(t,r),r)}return{value:t,source:r,stack:La(r)}}var Wn=[],Wa=0,Ud=0;function oc(){for(var t=Wa,r=Ud=Wa=0;r<t;){var a=Wn[r];Wn[r++]=null;var l=Wn[r];Wn[r++]=null;var d=Wn[r];Wn[r++]=null;var f=Wn[r];if(Wn[r++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}f!==0&&Jg(a,d,f)}}function lc(t,r,a,l){Wn[Wa++]=t,Wn[Wa++]=r,Wn[Wa++]=a,Wn[Wa++]=l,Ud|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function jd(t,r,a,l){return lc(t,r,a,l),uc(t)}function Xa(t,r){return lc(t,null,null,r),uc(t)}function Jg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&r!==null&&(d=31-Bt(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[r]:l.push(r),r.lane=a|536870912),f):null}function uc(t){if(50<Pl)throw Pl=0,$f=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Za={};function RS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,r,a,l){return new RS(t,r,a,l)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sr(t,r){var a=t.alternate;return a===null?(a=On(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ey(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function cc(t,r,a,l,d,f){var _=0;if(l=t,typeof t=="function")zd(t)&&(_=1);else if(typeof t=="string")_=CA(t,a,Te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=On(31,a,r,d),t.elementType=R,t.lanes=f,t;case M:return Zs(a.children,d,f,r);case Q:_=8,d|=24;break;case H:return t=On(12,a,r,d|2),t.elementType=H,t.lanes=f,t;case fe:return t=On(13,a,r,d),t.elementType=fe,t.lanes=f,t;case be:return t=On(19,a,r,d),t.elementType=be,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case J:_=10;break e;case ae:_=9;break e;case _e:_=11;break e;case U:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=On(_,a,r,d),r.elementType=t,r.type=l,r.lanes=f,r}function Zs(t,r,a,l){return t=On(7,t,l,r),t.lanes=a,t}function Bd(t,r,a){return t=On(6,t,null,r),t.lanes=a,t}function qd(t,r,a){return r=On(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ja=[],eo=0,hc=null,dc=0,Xn=[],Zn=0,Js=null,ar=1,or="";function ea(t,r){Ja[eo++]=dc,Ja[eo++]=hc,hc=t,dc=r}function ty(t,r,a){Xn[Zn++]=ar,Xn[Zn++]=or,Xn[Zn++]=Js,Js=t;var l=ar;t=or;var d=32-Bt(l)-1;l&=~(1<<d),a+=1;var f=32-Bt(r)+d;if(30<f){var _=d-d%5;f=(l&(1<<_)-1).toString(32),l>>=_,d-=_,ar=1<<32-Bt(r)+d|a<<d|l,or=f+t}else ar=1<<f|a<<d|l,or=t}function Hd(t){t.return!==null&&(ea(t,1),ty(t,1,0))}function Fd(t){for(;t===hc;)hc=Ja[--eo],Ja[eo]=null,dc=Ja[--eo],Ja[eo]=null;for(;t===Js;)Js=Xn[--Zn],Xn[Zn]=null,or=Xn[--Zn],Xn[Zn]=null,ar=Xn[--Zn],Xn[Zn]=null}var gn=null,Tt=null,tt=!1,ta=null,Di=!1,Gd=Error(s(519));function na(t){var r=Error(s(418,""));throw ml(Yn(r,t)),Gd}function ny(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[De]=t,r[Je]=l,a){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(a=0;a<Ul.length;a++)He(Ul[a],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":He("invalid",r),zs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ua(r);break;case"select":He("invalid",r);break;case"textarea":He("invalid",r),Bs(r,l.value,l.defaultValue,l.children),Ua(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||__(r.textContent,a)?(l.popover!=null&&(He("beforetoggle",r),He("toggle",r)),l.onScroll!=null&&He("scroll",r),l.onScrollEnd!=null&&He("scrollend",r),l.onClick!=null&&(r.onclick=$c),r=!0):r=!1,r||na(t)}function iy(t){for(gn=t.return;gn;)switch(gn.tag){case 5:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:gn=gn.return}}function dl(t){if(t!==gn)return!1;if(!tt)return iy(t),tt=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||lm(t.type,t.memoizedProps)),a=!a),a&&Tt&&na(t),iy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){Tt=hi(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}Tt=null}}else r===27?(r=Tt,is(t.type)?(t=dm,dm=null,Tt=t):Tt=r):Tt=gn?hi(t.stateNode.nextSibling):null;return!0}function fl(){Tt=gn=null,tt=!1}function ry(){var t=ta;return t!==null&&(bn===null?bn=t:bn.push.apply(bn,t),ta=null),t}function ml(t){ta===null?ta=[t]:ta.push(t)}var $d=re(null),ia=null,lr=null;function qr(t,r,a){se($d,r._currentValue),r._currentValue=a}function ur(t){t._currentValue=$d.current,he($d)}function Kd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Qd(t,r,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var _=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var N=0;N<r.length;N++)if(w.context===r[N]){f.lanes|=a,w=f.alternate,w!==null&&(w.lanes|=a),Kd(f.return,a,t),l||(_=null);break e}f=w.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Kd(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function pl(t,r,a,l){t=null;for(var d=r,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var w=d.type;Dn(d.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(d===Ct.current){if(_=d.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Fl):t=[Fl])}d=d.return}t!==null&&Qd(r,t,a,l),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){ia=t,lr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function nn(t){return sy(ia,t)}function mc(t,r){return ia===null&&ra(t),sy(t,r)}function sy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},lr===null){if(t===null)throw Error(s(308));lr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else lr=lr.next=r;return a}var IS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},CS=i.unstable_scheduleCallback,xS=i.unstable_NormalPriority,Pt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new IS,data:new Map,refCount:0}}function gl(t){t.refCount--,t.refCount===0&&CS(xS,function(){t.controller.abort()})}var yl=null,Wd=0,to=0,no=null;function NS(t,r){if(yl===null){var a=yl=[];Wd=0,to=Jf(),no={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wd++,r.then(ay,ay),r}function ay(){if(--Wd===0&&yl!==null){no!==null&&(no.status="fulfilled");var t=yl;yl=null,to=0,no=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function DS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var oy=W.S;W.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&NS(t,r),oy!==null&&oy(t,r)};var sa=re(null);function Xd(){var t=sa.current;return t!==null?t:pt.pooledCache}function pc(t,r){r===null?se(sa,sa.current):se(sa,r.pool)}function ly(){var t=Xd();return t===null?null:{parent:Pt._currentValue,pool:t}}var vl=Error(s(460)),uy=Error(s(474)),gc=Error(s(542)),Zd={then:function(){}};function cy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yc(){}function hy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(yc,yc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fy(t),t;default:if(typeof r.status=="string")r.then(yc,yc);else{if(t=pt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fy(t),t}throw _l=r,vl}}var _l=null;function dy(){if(_l===null)throw Error(s(459));var t=_l;return _l=null,t}function fy(t){if(t===vl||t===gc)throw Error(s(483))}var Hr=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(at&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=uc(t),Jg(t,null,a),r}return lc(t,l,r,a),uc(t)}function El(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,L(t,a)}}function tf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?d=f=r:f=f.next=r}else d=f=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var nf=!1;function Tl(){if(nf){var t=no;if(t!==null)throw t}}function wl(t,r,a,l){nf=!1;var d=t.updateQueue;Hr=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var N=w,F=N.next;N.next=null,_===null?f=F:_.next=F,_=N;var X=t.alternate;X!==null&&(X=X.updateQueue,w=X.lastBaseUpdate,w!==_&&(w===null?X.firstBaseUpdate=F:w.next=F,X.lastBaseUpdate=N))}if(f!==null){var te=d.baseState;_=0,X=F=N=null,w=f;do{var G=w.lane&-536870913,$=G!==w.lane;if($?(Ye&G)===G:(l&G)===G){G!==0&&G===to&&(nf=!0),X!==null&&(X=X.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var xe=t,Se=w;G=r;var dt=a;switch(Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){te=xe.call(dt,te,G);break e}te=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,G=typeof xe=="function"?xe.call(dt,te,G):xe,G==null)break e;te=E({},te,G);break e;case 2:Hr=!0}}G=w.callback,G!==null&&(t.flags|=64,$&&(t.flags|=8192),$=d.callbacks,$===null?d.callbacks=[G]:$.push(G))}else $={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},X===null?(F=X=$,N=te):X=X.next=$,_|=G;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;$=w,w=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);X===null&&(N=te),d.baseState=N,d.firstBaseUpdate=F,d.lastBaseUpdate=X,f===null&&(d.shared.lanes=0),Jr|=_,t.lanes=_,t.memoizedState=te}}function my(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function py(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)my(a[t],r)}var io=re(null),vc=re(0);function gy(t,r){t=gr,se(vc,t),se(io,r),gr=t|r.baseLanes}function rf(){se(vc,gr),se(io,io.current)}function sf(){gr=vc.current,he(io),he(vc)}var $r=0,Le=null,ct=null,Nt=null,_c=!1,ro=!1,aa=!1,Ec=0,bl=0,so=null,OS=0;function At(){throw Error(s(321))}function af(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Dn(t[a],r[a]))return!1;return!0}function of(t,r,a,l,d,f){return $r=f,Le=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=t===null||t.memoizedState===null?Jy:ev,aa=!1,f=a(l,d),aa=!1,ro&&(f=vy(r,a,l,d)),yy(t),f}function yy(t){W.H=Rc;var r=ct!==null&&ct.next!==null;if($r=0,Nt=ct=Le=null,_c=!1,bl=0,so=null,r)throw Error(s(300));t===null||Ft||(t=t.dependencies,t!==null&&fc(t)&&(Ft=!0))}function vy(t,r,a,l){Le=t;var d=0;do{if(ro&&(so=null),bl=0,ro=!1,25<=d)throw Error(s(301));if(d+=1,Nt=ct=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=jS,f=r(a,l)}while(ro);return f}function MS(){var t=W.H,r=t.useState()[0];return r=typeof r.then=="function"?Sl(r):r,t=t.useState()[0],(ct!==null?ct.memoizedState:null)!==t&&(Le.flags|=1024),r}function lf(){var t=Ec!==0;return Ec=0,t}function uf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function cf(t){if(_c){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}_c=!1}$r=0,Nt=ct=Le=null,ro=!1,bl=Ec=0,so=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Le.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Dt(){if(ct===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var r=Nt===null?Le.memoizedState:Nt.next;if(r!==null)Nt=r,ct=t;else{if(t===null)throw Le.alternate===null?Error(s(467)):Error(s(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Nt===null?Le.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sl(t){var r=bl;return bl+=1,so===null&&(so=[]),t=hy(so,t,r),r=Le,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Jy:ev),t}function Tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sl(t);if(t.$$typeof===J)return nn(t)}throw Error(s(438,String(t)))}function df(t){var r=null,a=Le.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Le.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=hf(),Le.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function cr(t,r){return typeof r=="function"?r(t):r}function wc(t){var r=Dt();return ff(r,ct,t)}function ff(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}r.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{r=d.next;var w=_=null,N=null,F=r,X=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Ye&te)===te:($r&te)===te){var G=F.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===to&&(X=!0);else if(($r&G)===G){F=F.next,G===to&&(X=!0);continue}else te={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(w=N=te,_=f):N=N.next=te,Le.lanes|=G,Jr|=G;te=F.action,aa&&a(f,te),f=F.hasEagerState?F.eagerState:a(f,te)}else G={lane:te,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},N===null?(w=N=G,_=f):N=N.next=G,Le.lanes|=te,Jr|=te;F=F.next}while(F!==null&&F!==r);if(N===null?_=f:N.next=w,!Dn(f,t.memoizedState)&&(Ft=!0,X&&(a=no,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=N,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function mf(t){var r=Dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=r.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do f=t(f,_.action),_=_.next;while(_!==d);Dn(f,r.memoizedState)||(Ft=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function _y(t,r,a){var l=Le,d=Dt(),f=tt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!Dn((ct||d).memoizedState,a);_&&(d.memoizedState=a,Ft=!0),d=d.queue;var w=wy.bind(null,l,d,t);if(Al(2048,8,w,[t]),d.getSnapshot!==r||_||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,ao(9,bc(),Ty.bind(null,l,d,a,r),null),pt===null)throw Error(s(349));f||($r&124)!==0||Ey(l,r,a)}return a}function Ey(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Le.updateQueue,r===null?(r=hf(),Le.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function Ty(t,r,a,l){r.value=a,r.getSnapshot=l,by(r)&&Sy(t)}function wy(t,r,a){return a(function(){by(r)&&Sy(t)})}function by(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Dn(t,a)}catch{return!0}}function Sy(t){var r=Xa(t,2);r!==null&&Ln(r,t,2)}function pf(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),aa){hn(!0);try{a()}finally{hn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:t},r}function Ay(t,r,a,l){return t.baseState=a,ff(t,ct,typeof l=="function"?l:cr)}function VS(t,r,a,l,d){if(Ac(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};W.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Ry(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Ry(t,r){var a=r.action,l=r.payload,d=t.state;if(r.isTransition){var f=W.T,_={};W.T=_;try{var w=a(d,l),N=W.S;N!==null&&N(_,w),Iy(t,r,w)}catch(F){gf(t,r,F)}finally{W.T=f}}else try{f=a(d,l),Iy(t,r,f)}catch(F){gf(t,r,F)}}function Iy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Cy(t,r,l)},function(l){return gf(t,r,l)}):Cy(t,r,a)}function Cy(t,r,a){r.status="fulfilled",r.value=a,xy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Ry(t,a)))}function gf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,xy(r),r=r.next;while(r!==l)}t.action=null}function xy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Ny(t,r){return r}function Dy(t,r){if(tt){var a=pt.formState;if(a!==null){e:{var l=Le;if(tt){if(Tt){t:{for(var d=Tt,f=Di;d.nodeType!==8;){if(!f){d=null;break t}if(d=hi(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Tt=hi(d.nextSibling),l=d.data==="F!";break e}}na(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:r},a.queue=l,a=Wy.bind(null,Le,l),l.dispatch=a,l=pf(!1),f=Tf.bind(null,Le,!1,l.queue),l=Tn(),d={state:r,dispatch:null,action:t,pending:null},l.queue=d,a=VS.bind(null,Le,d,f,a),d.dispatch=a,l.memoizedState=t,[r,a,!1]}function Oy(t){var r=Dt();return My(r,ct,t)}function My(t,r,a){if(r=ff(t,r,Ny)[0],t=wc(cr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Sl(r)}catch(_){throw _===vl?gc:_}else l=r;r=Dt();var d=r.queue,f=d.dispatch;return a!==r.memoizedState&&(Le.flags|=2048,ao(9,bc(),kS.bind(null,d,a),null)),[l,f,t]}function kS(t,r){t.action=r}function Vy(t){var r=Dt(),a=ct;if(a!==null)return My(r,a,t);Dt(),r=r.memoizedState,a=Dt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function ao(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Le.updateQueue,r===null&&(r=hf(),Le.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function bc(){return{destroy:void 0,resource:void 0}}function ky(){return Dt().memoizedState}function Sc(t,r,a,l){var d=Tn();l=l===void 0?null:l,Le.flags|=t,d.memoizedState=ao(1|r,bc(),a,l)}function Al(t,r,a,l){var d=Dt();l=l===void 0?null:l;var f=d.memoizedState.inst;ct!==null&&l!==null&&af(l,ct.memoizedState.deps)?d.memoizedState=ao(r,f,a,l):(Le.flags|=t,d.memoizedState=ao(1|r,f,a,l))}function Py(t,r){Sc(8390656,8,t,r)}function Ly(t,r){Al(2048,8,t,r)}function Uy(t,r){return Al(4,2,t,r)}function jy(t,r){return Al(4,4,t,r)}function zy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function By(t,r,a){a=a!=null?a.concat([t]):null,Al(4,4,zy.bind(null,r,t),a)}function yf(){}function qy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&af(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Hy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&af(r,l[1]))return l[0];if(l=t(),aa){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,r],l}function vf(t,r,a){return a===void 0||($r&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=$v(),Le.lanes|=t,Jr|=t,a)}function Fy(t,r,a,l){return Dn(a,r)?a:io.current!==null?(t=vf(t,a,l),Dn(t,r)||(Ft=!0),t):($r&42)===0?(Ft=!0,t.memoizedState=a):(t=$v(),Le.lanes|=t,Jr|=t,r)}function Gy(t,r,a,l,d){var f=oe.p;oe.p=f!==0&&8>f?f:8;var _=W.T,w={};W.T=w,Tf(t,!1,r,a);try{var N=d(),F=W.S;if(F!==null&&F(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var X=DS(N,l);Rl(t,r,X,Pn(t))}else Rl(t,r,l,Pn(t))}catch(te){Rl(t,r,{then:function(){},status:"rejected",reason:te},Pn())}finally{oe.p=f,W.T=_}}function PS(){}function _f(t,r,a,l){if(t.tag!==5)throw Error(s(476));var d=$y(t).queue;Gy(t,d,r,ye,a===null?PS:function(){return Ky(t),a(l)})}function $y(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:ye},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ky(t){var r=$y(t).next.queue;Rl(t,r,{},Pn())}function Ef(){return nn(Fl)}function Qy(){return Dt().memoizedState}function Yy(){return Dt().memoizedState}function LS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Pn();t=Fr(a);var l=Gr(r,t,a);l!==null&&(Ln(l,r,a),El(l,r,a)),r={cache:Yd()},t.payload=r;return}r=r.return}}function US(t,r,a){var l=Pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(t)?Xy(r,a):(a=jd(t,r,a,l),a!==null&&(Ln(a,t,l),Zy(a,r,l)))}function Wy(t,r,a){var l=Pn();Rl(t,r,a,l)}function Rl(t,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ac(t))Xy(r,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var _=r.lastRenderedState,w=f(_,a);if(d.hasEagerState=!0,d.eagerState=w,Dn(w,_))return lc(t,r,d,0),pt===null&&oc(),!1}catch{}finally{}if(a=jd(t,r,d,l),a!==null)return Ln(a,t,l),Zy(a,r,l),!0}return!1}function Tf(t,r,a,l){if(l={lane:2,revertLane:Jf(),action:l,hasEagerState:!1,eagerState:null,next:null},Ac(t)){if(r)throw Error(s(479))}else r=jd(t,a,l,2),r!==null&&Ln(r,t,2)}function Ac(t){var r=t.alternate;return t===Le||r!==null&&r===Le}function Xy(t,r){ro=_c=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Zy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,L(t,a)}}var Rc={readContext:nn,use:Tc,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Jy={readContext:nn,use:Tc,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:nn,useEffect:Py,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Sc(4194308,4,zy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Sc(4194308,4,t,r)},useInsertionEffect:function(t,r){Sc(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(aa){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var d=a(r);if(aa){hn(!0);try{a(r)}finally{hn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=US.bind(null,Le,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=pf(t);var r=t.queue,a=Wy.bind(null,Le,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(t,r){var a=Tn();return vf(a,t,r)},useTransition:function(){var t=pf(!1);return t=Gy.bind(null,Le,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Le,d=Tn();if(tt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),pt===null)throw Error(s(349));(Ye&124)!==0||Ey(l,r,a)}d.memoizedState=a;var f={value:a,getSnapshot:r};return d.queue=f,Py(wy.bind(null,l,f,t),[t]),l.flags|=2048,ao(9,bc(),Ty.bind(null,l,f,a,r),null),a},useId:function(){var t=Tn(),r=pt.identifierPrefix;if(tt){var a=or,l=ar;a=(l&~(1<<32-Bt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=Ec++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=OS++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:Ef,useFormState:Dy,useActionState:Dy,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Tf.bind(null,Le,!0,a),a.dispatch=r,[t,r]},useMemoCache:df,useCacheRefresh:function(){return Tn().memoizedState=LS.bind(null,Le)}},ev={readContext:nn,use:Tc,useCallback:qy,useContext:nn,useEffect:Ly,useImperativeHandle:By,useInsertionEffect:Uy,useLayoutEffect:jy,useMemo:Hy,useReducer:wc,useRef:ky,useState:function(){return wc(cr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Dt();return Fy(a,ct.memoizedState,t,r)},useTransition:function(){var t=wc(cr)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:Sl(t),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:Ef,useFormState:Oy,useActionState:Oy,useOptimistic:function(t,r){var a=Dt();return Ay(a,ct,t,r)},useMemoCache:df,useCacheRefresh:Yy},jS={readContext:nn,use:Tc,useCallback:qy,useContext:nn,useEffect:Ly,useImperativeHandle:By,useInsertionEffect:Uy,useLayoutEffect:jy,useMemo:Hy,useReducer:mf,useRef:ky,useState:function(){return mf(cr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Dt();return ct===null?vf(a,t,r):Fy(a,ct.memoizedState,t,r)},useTransition:function(){var t=mf(cr)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:Sl(t),r]},useSyncExternalStore:_y,useId:Qy,useHostTransitionStatus:Ef,useFormState:Vy,useActionState:Vy,useOptimistic:function(t,r){var a=Dt();return ct!==null?Ay(a,ct,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:Yy},oo=null,Il=0;function Ic(t){var r=Il;return Il+=1,oo===null&&(oo=[]),hy(oo,t,r)}function Cl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Cc(t,r){throw r.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function tv(t){var r=t._init;return r(t._payload)}function nv(t){function r(z,j){if(t){var q=z.deletions;q===null?(z.deletions=[j],z.flags|=16):q.push(j)}}function a(z,j){if(!t)return null;for(;j!==null;)r(z,j),j=j.sibling;return null}function l(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function d(z,j){return z=sr(z,j),z.index=0,z.sibling=null,z}function f(z,j,q){return z.index=q,t?(q=z.alternate,q!==null?(q=q.index,q<j?(z.flags|=67108866,j):q):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function _(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function w(z,j,q,Z){return j===null||j.tag!==6?(j=Bd(q,z.mode,Z),j.return=z,j):(j=d(j,q),j.return=z,j)}function N(z,j,q,Z){var ve=q.type;return ve===M?X(z,j,q.props.children,Z,q.key):j!==null&&(j.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===S&&tv(ve)===j.type)?(j=d(j,q.props),Cl(j,q),j.return=z,j):(j=cc(q.type,q.key,q.props,null,z.mode,Z),Cl(j,q),j.return=z,j)}function F(z,j,q,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=qd(q,z.mode,Z),j.return=z,j):(j=d(j,q.children||[]),j.return=z,j)}function X(z,j,q,Z,ve){return j===null||j.tag!==7?(j=Zs(q,z.mode,Z,ve),j.return=z,j):(j=d(j,q),j.return=z,j)}function te(z,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Bd(""+j,z.mode,q),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return q=cc(j.type,j.key,j.props,null,z.mode,q),Cl(q,j),q.return=z,q;case O:return j=qd(j,z.mode,q),j.return=z,j;case S:var Z=j._init;return j=Z(j._payload),te(z,j,q)}if(ke(j)||k(j))return j=Zs(j,z.mode,q,null),j.return=z,j;if(typeof j.then=="function")return te(z,Ic(j),q);if(j.$$typeof===J)return te(z,mc(z,j),q);Cc(z,j)}return null}function G(z,j,q,Z){var ve=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ve!==null?null:w(z,j,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return q.key===ve?N(z,j,q,Z):null;case O:return q.key===ve?F(z,j,q,Z):null;case S:return ve=q._init,q=ve(q._payload),G(z,j,q,Z)}if(ke(q)||k(q))return ve!==null?null:X(z,j,q,Z,null);if(typeof q.then=="function")return G(z,j,Ic(q),Z);if(q.$$typeof===J)return G(z,j,mc(z,q),Z);Cc(z,q)}return null}function $(z,j,q,Z,ve){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(q)||null,w(j,z,""+Z,ve);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return z=z.get(Z.key===null?q:Z.key)||null,N(j,z,Z,ve);case O:return z=z.get(Z.key===null?q:Z.key)||null,F(j,z,Z,ve);case S:var je=Z._init;return Z=je(Z._payload),$(z,j,q,Z,ve)}if(ke(Z)||k(Z))return z=z.get(q)||null,X(j,z,Z,ve,null);if(typeof Z.then=="function")return $(z,j,q,Ic(Z),ve);if(Z.$$typeof===J)return $(z,j,q,mc(j,Z),ve);Cc(j,Z)}return null}function xe(z,j,q,Z){for(var ve=null,je=null,Ee=j,Re=j=0,$t=null;Ee!==null&&Re<q.length;Re++){Ee.index>Re?($t=Ee,Ee=null):$t=Ee.sibling;var et=G(z,Ee,q[Re],Z);if(et===null){Ee===null&&(Ee=$t);break}t&&Ee&&et.alternate===null&&r(z,Ee),j=f(et,j,Re),je===null?ve=et:je.sibling=et,je=et,Ee=$t}if(Re===q.length)return a(z,Ee),tt&&ea(z,Re),ve;if(Ee===null){for(;Re<q.length;Re++)Ee=te(z,q[Re],Z),Ee!==null&&(j=f(Ee,j,Re),je===null?ve=Ee:je.sibling=Ee,je=Ee);return tt&&ea(z,Re),ve}for(Ee=l(Ee);Re<q.length;Re++)$t=$(Ee,z,Re,q[Re],Z),$t!==null&&(t&&$t.alternate!==null&&Ee.delete($t.key===null?Re:$t.key),j=f($t,j,Re),je===null?ve=$t:je.sibling=$t,je=$t);return t&&Ee.forEach(function(ls){return r(z,ls)}),tt&&ea(z,Re),ve}function Se(z,j,q,Z){if(q==null)throw Error(s(151));for(var ve=null,je=null,Ee=j,Re=j=0,$t=null,et=q.next();Ee!==null&&!et.done;Re++,et=q.next()){Ee.index>Re?($t=Ee,Ee=null):$t=Ee.sibling;var ls=G(z,Ee,et.value,Z);if(ls===null){Ee===null&&(Ee=$t);break}t&&Ee&&ls.alternate===null&&r(z,Ee),j=f(ls,j,Re),je===null?ve=ls:je.sibling=ls,je=ls,Ee=$t}if(et.done)return a(z,Ee),tt&&ea(z,Re),ve;if(Ee===null){for(;!et.done;Re++,et=q.next())et=te(z,et.value,Z),et!==null&&(j=f(et,j,Re),je===null?ve=et:je.sibling=et,je=et);return tt&&ea(z,Re),ve}for(Ee=l(Ee);!et.done;Re++,et=q.next())et=$(Ee,z,Re,et.value,Z),et!==null&&(t&&et.alternate!==null&&Ee.delete(et.key===null?Re:et.key),j=f(et,j,Re),je===null?ve=et:je.sibling=et,je=et);return t&&Ee.forEach(function(zA){return r(z,zA)}),tt&&ea(z,Re),ve}function dt(z,j,q,Z){if(typeof q=="object"&&q!==null&&q.type===M&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case I:e:{for(var ve=q.key;j!==null;){if(j.key===ve){if(ve=q.type,ve===M){if(j.tag===7){a(z,j.sibling),Z=d(j,q.props.children),Z.return=z,z=Z;break e}}else if(j.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===S&&tv(ve)===j.type){a(z,j.sibling),Z=d(j,q.props),Cl(Z,q),Z.return=z,z=Z;break e}a(z,j);break}else r(z,j);j=j.sibling}q.type===M?(Z=Zs(q.props.children,z.mode,Z,q.key),Z.return=z,z=Z):(Z=cc(q.type,q.key,q.props,null,z.mode,Z),Cl(Z,q),Z.return=z,z=Z)}return _(z);case O:e:{for(ve=q.key;j!==null;){if(j.key===ve)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){a(z,j.sibling),Z=d(j,q.children||[]),Z.return=z,z=Z;break e}else{a(z,j);break}else r(z,j);j=j.sibling}Z=qd(q,z.mode,Z),Z.return=z,z=Z}return _(z);case S:return ve=q._init,q=ve(q._payload),dt(z,j,q,Z)}if(ke(q))return xe(z,j,q,Z);if(k(q)){if(ve=k(q),typeof ve!="function")throw Error(s(150));return q=ve.call(q),Se(z,j,q,Z)}if(typeof q.then=="function")return dt(z,j,Ic(q),Z);if(q.$$typeof===J)return dt(z,j,mc(z,q),Z);Cc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,j!==null&&j.tag===6?(a(z,j.sibling),Z=d(j,q),Z.return=z,z=Z):(a(z,j),Z=Bd(q,z.mode,Z),Z.return=z,z=Z),_(z)):a(z,j)}return function(z,j,q,Z){try{Il=0;var ve=dt(z,j,q,Z);return oo=null,ve}catch(Ee){if(Ee===vl||Ee===gc)throw Ee;var je=On(29,Ee,null,z.mode);return je.lanes=Z,je.return=z,je}finally{}}}var lo=nv(!0),iv=nv(!1),Jn=re(null),Oi=null;function Kr(t){var r=t.alternate;se(Lt,Lt.current&1),se(Jn,t),Oi===null&&(r===null||io.current!==null||r.memoizedState!==null)&&(Oi=t)}function rv(t){if(t.tag===22){if(se(Lt,Lt.current),se(Jn,t),Oi===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Oi=t)}}else Qr()}function Qr(){se(Lt,Lt.current),se(Jn,Jn.current)}function hr(t){he(Jn),Oi===t&&(Oi=null),he(Lt)}var Lt=re(0);function xc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function wf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var bf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Pn(),d=Fr(l);d.payload=r,a!=null&&(d.callback=a),r=Gr(t,d,l),r!==null&&(Ln(r,t,l),El(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Pn(),d=Fr(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Gr(t,d,l),r!==null&&(Ln(r,t,l),El(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Pn(),l=Fr(a);l.tag=2,r!=null&&(l.callback=r),r=Gr(t,l,a),r!==null&&(Ln(r,t,a),El(r,t,a))}};function sv(t,r,a,l,d,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):r.prototype&&r.prototype.isPureReactComponent?!cl(a,l)||!cl(d,f):!0}function av(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&bf.enqueueReplaceState(r,r.state,null)}function oa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=E({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var Nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function ov(t){Nc(t)}function lv(t){console.error(t)}function uv(t){Nc(t)}function Dc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function cv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Sf(t,r,a){return a=Fr(a),a.tag=3,a.payload={element:null},a.callback=function(){Dc(t,r)},a}function hv(t){return t=Fr(t),t.tag=3,t}function dv(t,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){cv(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){cv(r,a,l),typeof d!="function"&&(es===null?es=new Set([this]):es.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function zS(t,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&pl(r,a,d,!0),a=Jn.current,a!==null){switch(a.tag){case 13:return Oi===null?Qf():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Wf(t,l,d)),!1;case 22:return a.flags|=65536,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Wf(t,l,d)),!1}throw Error(s(435,a.tag))}return Wf(t,l,d),Qf(),!1}if(tt)return r=Jn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Gd&&(t=Error(s(422),{cause:l}),ml(Yn(t,a)))):(l!==Gd&&(r=Error(s(423),{cause:l}),ml(Yn(r,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Yn(l,a),d=Sf(t.stateNode,l,d),tf(t,d),wt!==4&&(wt=2)),!1;var f=Error(s(520),{cause:l});if(f=Yn(f,a),kl===null?kl=[f]:kl.push(f),wt!==4&&(wt=2),r===null)return!0;l=Yn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=Sf(a.stateNode,l,t),tf(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(es===null||!es.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=hv(d),dv(d,t,a,l),tf(a,d),!1}a=a.return}while(a!==null);return!1}var fv=Error(s(461)),Ft=!1;function Wt(t,r,a,l){r.child=t===null?iv(r,null,a,l):lo(r,t.child,a,l)}function mv(t,r,a,l,d){a=a.render;var f=r.ref;if("ref"in l){var _={};for(var w in l)w!=="ref"&&(_[w]=l[w])}else _=l;return ra(r),l=of(t,r,a,_,f,d),w=lf(),t!==null&&!Ft?(uf(t,r,d),dr(t,r,d)):(tt&&w&&Hd(r),r.flags|=1,Wt(t,r,l,d),r.child)}function pv(t,r,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!zd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,gv(t,r,f,l,d)):(t=cc(a.type,null,l,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Of(t,d)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:cl,a(_,l)&&t.ref===r.ref)return dr(t,r,d)}return r.flags|=1,t=sr(f,l),t.ref=r.ref,t.return=r,r.child=t}function gv(t,r,a,l,d){if(t!==null){var f=t.memoizedProps;if(cl(f,l)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=l=f,Of(t,d))(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,dr(t,r,d)}return Af(t,r,a,l,d)}function yv(t,r,a){var l=r.pendingProps,d=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(d=r.child=t.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return vv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,f!==null?f.cachePool:null),f!==null?gy(r,f):rf(),rv(r);else return r.lanes=r.childLanes=536870912,vv(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(pc(r,f.cachePool),gy(r,f),Qr(),r.memoizedState=null):(t!==null&&pc(r,null),rf(),Qr());return Wt(t,r,d,a),r.child}function vv(t,r,a,l){var d=Xd();return d=d===null?null:{parent:Pt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},t!==null&&pc(r,null),rf(),rv(r),t!==null&&pl(t,r,l,!0),null}function Oc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Af(t,r,a,l,d){return ra(r),a=of(t,r,a,l,void 0,d),l=lf(),t!==null&&!Ft?(uf(t,r,d),dr(t,r,d)):(tt&&l&&Hd(r),r.flags|=1,Wt(t,r,a,d),r.child)}function _v(t,r,a,l,d,f){return ra(r),r.updateQueue=null,a=vy(r,l,a,d),yy(t),l=lf(),t!==null&&!Ft?(uf(t,r,f),dr(t,r,f)):(tt&&l&&Hd(r),r.flags|=1,Wt(t,r,a,f),r.child)}function Ev(t,r,a,l,d){if(ra(r),r.stateNode===null){var f=Za,_=a.contextType;typeof _=="object"&&_!==null&&(f=nn(_)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Jd(r),_=a.contextType,f.context=typeof _=="object"&&_!==null?nn(_):Za,f.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(wf(r,a,_,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&bf.enqueueReplaceState(f,f.state,null),wl(r,l,f,d),Tl(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,N=oa(a,w);f.props=N;var F=f.context,X=a.contextType;_=Za,typeof X=="object"&&X!==null&&(_=nn(X));var te=a.getDerivedStateFromProps;X=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||F!==_)&&av(r,f,l,_),Hr=!1;var G=r.memoizedState;f.state=G,wl(r,l,f,d),Tl(),F=r.memoizedState,w||G!==F||Hr?(typeof te=="function"&&(wf(r,a,te,l),F=r.memoizedState),(N=Hr||sv(r,a,N,l,G,F,_))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),f.props=l,f.state=F,f.context=_,l=N):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,ef(t,r),_=r.memoizedProps,X=oa(a,_),f.props=X,te=r.pendingProps,G=f.context,F=a.contextType,N=Za,typeof F=="object"&&F!==null&&(N=nn(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==te||G!==N)&&av(r,f,l,N),Hr=!1,G=r.memoizedState,f.state=G,wl(r,l,f,d),Tl();var $=r.memoizedState;_!==te||G!==$||Hr||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof w=="function"&&(wf(r,a,w,l),$=r.memoizedState),(X=Hr||sv(r,a,X,l,G,$,N)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,$,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,$,N)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),f.props=l,f.state=$,f.context=N,l=X):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Oc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=lo(r,t.child,null,d),r.child=lo(r,null,a,d)):Wt(t,r,a,d),r.memoizedState=f.state,t=r.child):t=dr(t,r,d),t}function Tv(t,r,a,l){return fl(),r.flags|=256,Wt(t,r,a,l),r.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:ly()}}function Cf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=ei),t}function wv(t,r,a){var l=r.pendingProps,d=!1,f=(r.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),_&&(d=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(tt){if(d?Kr(r):Qr(),tt){var w=Tt,N;if(N=w){e:{for(N=w,w=Di;N.nodeType!==8;){if(!w){w=null;break e}if(N=hi(N.nextSibling),N===null){w=null;break e}}w=N}w!==null?(r.memoizedState={dehydrated:w,treeContext:Js!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},N=On(18,null,null,0),N.stateNode=w,N.return=r,r.child=N,gn=r,Tt=null,N=!0):N=!1}N||na(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return hm(w)?r.lanes=32:r.lanes=536870912,null;hr(r)}return w=l.children,l=l.fallback,d?(Qr(),d=r.mode,w=Mc({mode:"hidden",children:w},d),l=Zs(l,d,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,d=r.child,d.memoizedState=If(a),d.childLanes=Cf(t,_,a),r.memoizedState=Rf,l):(Kr(r),xf(r,w))}if(N=t.memoizedState,N!==null&&(w=N.dehydrated,w!==null)){if(f)r.flags&256?(Kr(r),r.flags&=-257,r=Nf(t,r,a)):r.memoizedState!==null?(Qr(),r.child=t.child,r.flags|=128,r=null):(Qr(),d=l.fallback,w=r.mode,l=Mc({mode:"visible",children:l.children},w),d=Zs(d,w,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,lo(r,t.child,null,a),l=r.child,l.memoizedState=If(a),l.childLanes=Cf(t,_,a),r.memoizedState=Rf,r=d);else if(Kr(r),hm(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,ml({value:l,source:null,stack:null}),r=Nf(t,r,a)}else if(Ft||pl(t,r,a,!1),_=(a&t.childLanes)!==0,Ft||_){if(_=pt,_!==null&&(l=a&-a,l=(l&42)!==0?1:ie(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Xa(t,l),Ln(_,t,l),fv;w.data==="$?"||Qf(),r=Nf(t,r,a)}else w.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=N.treeContext,Tt=hi(w.nextSibling),gn=r,tt=!0,ta=null,Di=!1,t!==null&&(Xn[Zn++]=ar,Xn[Zn++]=or,Xn[Zn++]=Js,ar=t.id,or=t.overflow,Js=r),r=xf(r,l.children),r.flags|=4096);return r}return d?(Qr(),d=l.fallback,w=r.mode,N=t.child,F=N.sibling,l=sr(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,F!==null?d=sr(F,d):(d=Zs(d,w,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,w=t.child.memoizedState,w===null?w=If(a):(N=w.cachePool,N!==null?(F=Pt._currentValue,N=N.parent!==F?{parent:F,pool:F}:N):N=ly(),w={baseLanes:w.baseLanes|a,cachePool:N}),d.memoizedState=w,d.childLanes=Cf(t,_,a),r.memoizedState=Rf,l):(Kr(r),a=t.child,t=a.sibling,a=sr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function xf(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=On(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nf(t,r,a){return lo(r,t.child,null,a),t=xf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function bv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Kd(t.return,r,a)}function Df(t,r,a,l,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=d)}function Sv(t,r,a){var l=r.pendingProps,d=l.revealOrder,f=l.tail;if(Wt(t,r,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bv(t,a,r);else if(t.tag===19)bv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(Lt,l),d){case"forwards":for(a=r.child,d=null;a!==null;)t=a.alternate,t!==null&&xc(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Df(r,!1,d,a,f);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&xc(t)===null){r.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}Df(r,!0,a,null,f);break;case"together":Df(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function dr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Jr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(pl(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=sr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=sr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Of(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function BS(t,r,a){switch(r.tag){case 3:nt(r,r.stateNode.containerInfo),qr(r,Pt,t.memoizedState.cache),fl();break;case 27:case 5:zn(r);break;case 4:nt(r,r.stateNode.containerInfo);break;case 10:qr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Kr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?wv(t,r,a):(Kr(r),t=dr(t,r,a),t!==null?t.sibling:null);Kr(r);break;case 19:var d=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(pl(t,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return Sv(t,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(Lt,Lt.current),l)break;return null;case 22:case 23:return r.lanes=0,yv(t,r,a);case 24:qr(r,Pt,t.memoizedState.cache)}return dr(t,r,a)}function Av(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ft=!0;else{if(!Of(t,a)&&(r.flags&128)===0)return Ft=!1,BS(t,r,a);Ft=(t.flags&131072)!==0}else Ft=!1,tt&&(r.flags&1048576)!==0&&ty(r,dc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")zd(l)?(t=oa(l,t),r.tag=1,r=Ev(null,r,l,t,a)):(r.tag=0,r=Af(null,r,l,t,a));else{if(l!=null){if(d=l.$$typeof,d===_e){r.tag=11,r=mv(null,r,l,t,a);break e}else if(d===U){r.tag=14,r=pv(null,r,l,t,a);break e}}throw r=Ie(l)||l,Error(s(306,r,""))}}return r;case 0:return Af(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=oa(l,r.pendingProps),Ev(t,r,l,d,a);case 3:e:{if(nt(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;d=f.element,ef(t,r),wl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,qr(r,Pt,l),l!==f.cache&&Qd(r,[Pt],a,!0),Tl(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Tv(t,r,l,a);break e}else if(l!==d){d=Yn(Error(s(424)),r),ml(d),r=Tv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Tt=hi(t.firstChild),gn=r,tt=!0,ta=null,Di=!0,a=iv(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===d){r=dr(t,r,a);break e}Wt(t,r,l,a)}r=r.child}return r;case 26:return Oc(t,r),t===null?(a=x_(r.type,null,r.pendingProps,null))?r.memoizedState=a:tt||(a=r.type,t=r.pendingProps,l=Kc(Ae.current).createElement(a),l[De]=r,l[Je]=t,Zt(l,a,t),St(l),r.stateNode=l):r.memoizedState=x_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return zn(r),t===null&&tt&&(l=r.stateNode=R_(r.type,r.pendingProps,Ae.current),gn=r,Di=!0,d=Tt,is(r.type)?(dm=d,Tt=hi(l.firstChild)):Tt=d),Wt(t,r,r.pendingProps.children,a),Oc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&tt&&((d=l=Tt)&&(l=pA(l,r.type,r.pendingProps,Di),l!==null?(r.stateNode=l,gn=r,Tt=hi(l.firstChild),Di=!1,d=!0):d=!1),d||na(r)),zn(r),d=r.type,f=r.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,lm(d,f)?l=null:_!==null&&lm(d,_)&&(r.flags|=32),r.memoizedState!==null&&(d=of(t,r,MS,null,null,a),Fl._currentValue=d),Oc(t,r),Wt(t,r,l,a),r.child;case 6:return t===null&&tt&&((t=a=Tt)&&(a=gA(a,r.pendingProps,Di),a!==null?(r.stateNode=a,gn=r,Tt=null,t=!0):t=!1),t||na(r)),null;case 13:return wv(t,r,a);case 4:return nt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=lo(r,null,l,a):Wt(t,r,l,a),r.child;case 11:return mv(t,r,r.type,r.pendingProps,a);case 7:return Wt(t,r,r.pendingProps,a),r.child;case 8:return Wt(t,r,r.pendingProps.children,a),r.child;case 12:return Wt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,qr(r,r.type,l.value),Wt(t,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,ra(r),d=nn(d),l=l(d),r.flags|=1,Wt(t,r,l,a),r.child;case 14:return pv(t,r,r.type,r.pendingProps,a);case 15:return gv(t,r,r.type,r.pendingProps,a);case 19:return Sv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Mc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=sr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return yv(t,r,a);case 24:return ra(r),l=nn(Pt),t===null?(d=Xd(),d===null&&(d=pt,f=Yd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),r.memoizedState={parent:l,cache:d},Jd(r),qr(r,Pt,d)):((t.lanes&a)!==0&&(ef(t,r),wl(r,null,null,a),Tl()),d=t.memoizedState,f=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),qr(r,Pt,l)):(l=f.cache,qr(r,Pt,l),l!==d.cache&&Qd(r,[Pt],a,!0))),Wt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function fr(t){t.flags|=4}function Rv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!V_(r)){if(r=Jn.current,r!==null&&((Ye&4194048)===Ye?Oi!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||r!==Oi))throw _l=Zd,uy;t.flags|=8192}}function Vc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ma():536870912,t.lanes|=r,fo|=r)}function xl(t,r){if(!tt)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _t(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function qS(t,r,a){var l=r.pendingProps;switch(Fd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(r),null;case 1:return _t(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ur(Pt),xn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(dl(r)?fr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ry())),_t(r),null;case 26:return a=r.memoizedState,t===null?(fr(r),a!==null?(_t(r),Rv(r,a)):(_t(r),r.flags&=-16777217)):a?a!==t.memoizedState?(fr(r),_t(r),Rv(r,a)):(_t(r),r.flags&=-16777217):(t.memoizedProps!==l&&fr(r),_t(r),r.flags&=-16777217),null;case 27:Bn(r),a=Ae.current;var d=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return _t(r),null}t=Te.current,dl(r)?ny(r):(t=R_(d,l,a),r.stateNode=t,fr(r))}return _t(r),null;case 5:if(Bn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return _t(r),null}if(t=Te.current,dl(r))ny(r);else{switch(d=Kc(Ae.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}t[De]=r,t[Je]=l;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=t;e:switch(Zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&fr(r)}}return _t(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Ae.current,dl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,d=gn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[De]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||__(t.nodeValue,a)),t||na(r)}else t=Kc(t).createTextNode(l),t[De]=r,r.stateNode=t}return _t(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=dl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[De]=r}else fl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;_t(r),d=!1}else d=ry(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(hr(r),r):(hr(r),null)}if(hr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Vc(r,r.updateQueue),_t(r),null;case 4:return xn(),t===null&&im(r.stateNode.containerInfo),_t(r),null;case 10:return ur(r.type),_t(r),null;case 19:if(he(Lt),d=r.memoizedState,d===null)return _t(r),null;if(l=(r.flags&128)!==0,f=d.rendering,f===null)if(l)xl(d,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=xc(t),f!==null){for(r.flags|=128,xl(d,!1),t=f.updateQueue,r.updateQueue=t,Vc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)ey(a,t),a=a.sibling;return se(Lt,Lt.current&1|2),r.child}t=t.sibling}d.tail!==null&&vn()>Lc&&(r.flags|=128,l=!0,xl(d,!1),r.lanes=4194304)}else{if(!l)if(t=xc(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Vc(r,t),xl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!tt)return _t(r),null}else 2*vn()-d.renderingStartTime>Lc&&a!==536870912&&(r.flags|=128,l=!0,xl(d,!1),r.lanes=4194304);d.isBackwards?(f.sibling=r.child,r.child=f):(t=d.last,t!==null?t.sibling=f:r.child=f,d.last=f)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=vn(),r.sibling=null,t=Lt.current,se(Lt,l?t&1|2:t&1),r):(_t(r),null);case 22:case 23:return hr(r),sf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(_t(r),r.subtreeFlags&6&&(r.flags|=8192)):_t(r),a=r.updateQueue,a!==null&&Vc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&he(sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ur(Pt),_t(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function HS(t,r){switch(Fd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ur(Pt),xn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Bn(r),null;case 13:if(hr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));fl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return he(Lt),null;case 4:return xn(),null;case 10:return ur(r.type),null;case 22:case 23:return hr(r),sf(),t!==null&&he(sa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ur(Pt),null;case 25:return null;default:return null}}function Iv(t,r){switch(Fd(r),r.tag){case 3:ur(Pt),xn();break;case 26:case 27:case 5:Bn(r);break;case 4:xn();break;case 13:hr(r);break;case 19:he(Lt);break;case 10:ur(r.type);break;case 22:case 23:hr(r),sf(),t!==null&&he(sa);break;case 24:ur(Pt)}}function Nl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==d)}}catch(w){ft(r,r.return,w)}}function Yr(t,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var _=l.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,d=r;var N=a,F=w;try{F()}catch(X){ft(d,N,X)}}}l=l.next}while(l!==f)}}catch(X){ft(r,r.return,X)}}function Cv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{py(r,a)}catch(l){ft(t,t.return,l)}}}function xv(t,r,a){a.props=oa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ft(t,r,l)}}function Dl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){ft(t,r,d)}}function Mi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ft(t,r,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ft(t,r,d)}else a.current=null}function Nv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ft(t,t.return,d)}}function Mf(t,r,a){try{var l=t.stateNode;cA(l,t.type,a,r),l[Je]=r}catch(d){ft(t,t.return,d)}}function Dv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&is(t.type)||t.tag===4}function Vf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&is(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$c));else if(l!==4&&(l===27&&is(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(kf(t,r,a),t=t.sibling;t!==null;)kf(t,r,a),t=t.sibling}function kc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&is(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(kc(t,r,a),t=t.sibling;t!==null;)kc(t,r,a),t=t.sibling}function Ov(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Zt(r,l,a),r[De]=t,r[Je]=a}catch(f){ft(t,t.return,f)}}var mr=!1,Rt=!1,Pf=!1,Mv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function FS(t,r){if(t=t.containerInfo,am=Jc,t=Fg(t),Md(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,w=-1,N=-1,F=0,X=0,te=t,G=null;t:for(;;){for(var $;te!==a||d!==0&&te.nodeType!==3||(w=_+d),te!==f||l!==0&&te.nodeType!==3||(N=_+l),te.nodeType===3&&(_+=te.nodeValue.length),($=te.firstChild)!==null;)G=te,te=$;for(;;){if(te===t)break t;if(G===a&&++F===d&&(w=_),G===f&&++X===l&&(N=_),($=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=$}a=w===-1||N===-1?null:{start:w,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:t,selectionRange:a},Jc=!1,Gt=r;Gt!==null;)if(r=Gt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Gt=t;else for(;Gt!==null;){switch(r=Gt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var xe=oa(a.type,d,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(xe,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){ft(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)cm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Gt=t;break}Gt=r.return}}function Vv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Wr(t,a),l&4&&Nl(5,a);break;case 1:if(Wr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){ft(a,a.return,_)}else{var d=oa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(d,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(a,a.return,_)}}l&64&&Cv(a),l&512&&Dl(a,a.return);break;case 3:if(Wr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{py(t,r)}catch(_){ft(a,a.return,_)}}break;case 27:r===null&&l&4&&Ov(a);case 26:case 5:Wr(t,a),r===null&&l&4&&Nv(a),l&512&&Dl(a,a.return);break;case 12:Wr(t,a);break;case 13:Wr(t,a),l&4&&Lv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=JS.bind(null,a),yA(t,a))));break;case 22:if(l=a.memoizedState!==null||mr,!l){r=r!==null&&r.memoizedState!==null||Rt,d=mr;var f=Rt;mr=l,(Rt=r)&&!f?Xr(t,a,(a.subtreeFlags&8772)!==0):Wr(t,a),mr=d,Rt=f}break;case 30:break;default:Wr(t,a)}}function kv(t){var r=t.alternate;r!==null&&(t.alternate=null,kv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&lt(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,wn=!1;function pr(t,r,a){for(a=a.child;a!==null;)Pv(t,r,a),a=a.sibling}function Pv(t,r,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:Rt||Mi(a,r),pr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||Mi(a,r);var l=yt,d=wn;is(a.type)&&(yt=a.stateNode,wn=!1),pr(t,r,a),zl(a.stateNode),yt=l,wn=d;break;case 5:Rt||Mi(a,r);case 6:if(l=yt,d=wn,yt=null,pr(t,r,a),yt=l,wn=d,yt!==null)if(wn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(f){ft(a,r,f)}else try{yt.removeChild(a.stateNode)}catch(f){ft(a,r,f)}break;case 18:yt!==null&&(wn?(t=yt,S_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ql(t)):S_(yt,a.stateNode));break;case 4:l=yt,d=wn,yt=a.stateNode.containerInfo,wn=!0,pr(t,r,a),yt=l,wn=d;break;case 0:case 11:case 14:case 15:Rt||Yr(2,a,r),Rt||Yr(4,a,r),pr(t,r,a);break;case 1:Rt||(Mi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&xv(a,r,l)),pr(t,r,a);break;case 21:pr(t,r,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,pr(t,r,a),Rt=l;break;default:pr(t,r,a)}}function Lv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ql(t)}catch(a){ft(r,r.return,a)}}function GS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Mv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Mv),r;default:throw Error(s(435,t.tag))}}function Lf(t,r){var a=GS(t);r.forEach(function(l){var d=eA.bind(null,t,l);a.has(l)||(a.add(l),l.then(d,d))})}function Mn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(is(w.type)){yt=w.stateNode,wn=!1;break e}break;case 5:yt=w.stateNode,wn=!1;break e;case 3:case 4:yt=w.stateNode.containerInfo,wn=!0;break e}w=w.return}if(yt===null)throw Error(s(160));Pv(f,_,d),yt=null,wn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Uv(r,t),r=r.sibling}var ci=null;function Uv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mn(r,t),Vn(t),l&4&&(Yr(3,t,t.return),Nl(3,t),Yr(5,t,t.return));break;case 1:Mn(r,t),Vn(t),l&512&&(Rt||a===null||Mi(a,a.return)),l&64&&mr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ci;if(Mn(r,t),Vn(t),l&512&&(Rt||a===null||Mi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Ti]||f[De]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Zt(f,l,a),f[De]=t,St(f),l=f;break e;case"link":var _=O_("link","href",d).get(l+(a.href||""));if(_){for(var w=0;w<_.length;w++)if(f=_[w],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(w,1);break t}}f=d.createElement(l),Zt(f,l,a),d.head.appendChild(f);break;case"meta":if(_=O_("meta","content",d).get(l+(a.content||""))){for(w=0;w<_.length;w++)if(f=_[w],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(w,1);break t}}f=d.createElement(l),Zt(f,l,a),d.head.appendChild(f);break;default:throw Error(s(468,l))}f[De]=t,St(f),l=f}t.stateNode=l}else M_(d,t.type,t.stateNode);else t.stateNode=D_(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?M_(d,t.type,t.stateNode):D_(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Mf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Mn(r,t),Vn(t),l&512&&(Rt||a===null||Mi(a,a.return)),a!==null&&l&4&&Mf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Mn(r,t),Vn(t),l&512&&(Rt||a===null||Mi(a,a.return)),t.flags&32){d=t.stateNode;try{Gn(d,"")}catch($){ft(t,t.return,$)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Mf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(Pf=!0);break;case 6:if(Mn(r,t),Vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch($){ft(t,t.return,$)}}break;case 3:if(Wc=null,d=ci,ci=Qc(r.containerInfo),Mn(r,t),ci=d,Vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ql(r.containerInfo)}catch($){ft(t,t.return,$)}Pf&&(Pf=!1,jv(t));break;case 4:l=ci,ci=Qc(t.stateNode.containerInfo),Mn(r,t),Vn(t),ci=l;break;case 12:Mn(r,t),Vn(t);break;case 13:Mn(r,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=vn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 22:d=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,F=mr,X=Rt;if(mr=F||d,Rt=X||N,Mn(r,t),Rt=X,mr=F,Vn(t),l&8192)e:for(r=t.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||N||mr||Rt||la(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(f=N.stateNode,d)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=N.stateNode;var te=N.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){ft(N,N.return,$)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch($){ft(N,N.return,$)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Lf(t,a))));break;case 19:Mn(r,t),Vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 30:break;case 21:break;default:Mn(r,t),Vn(t)}}function Vn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Dv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,f=Vf(t);kc(t,f,d);break;case 5:var _=a.stateNode;a.flags&32&&(Gn(_,""),a.flags&=-33);var w=Vf(t);kc(t,w,_);break;case 3:case 4:var N=a.stateNode.containerInfo,F=Vf(t);kf(t,F,N);break;default:throw Error(s(161))}}catch(X){ft(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function jv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;jv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Wr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Vv(t,r.alternate,r),r=r.sibling}function la(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Yr(4,r,r.return),la(r);break;case 1:Mi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&xv(r,r.return,a),la(r);break;case 27:zl(r.stateNode);case 26:case 5:Mi(r,r.return),la(r);break;case 22:r.memoizedState===null&&la(r);break;case 30:la(r);break;default:la(r)}t=t.sibling}}function Xr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=t,f=r,_=f.flags;switch(f.tag){case 0:case 11:case 15:Xr(d,f,a),Nl(4,f);break;case 1:if(Xr(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){ft(l,l.return,F)}if(l=f,d=l.updateQueue,d!==null){var w=l.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)my(N[d],w)}catch(F){ft(l,l.return,F)}}a&&_&64&&Cv(f),Dl(f,f.return);break;case 27:Ov(f);case 26:case 5:Xr(d,f,a),a&&l===null&&_&4&&Nv(f),Dl(f,f.return);break;case 12:Xr(d,f,a);break;case 13:Xr(d,f,a),a&&_&4&&Lv(d,f);break;case 22:f.memoizedState===null&&Xr(d,f,a),Dl(f,f.return);break;case 30:break;default:Xr(d,f,a)}r=r.sibling}}function Uf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&gl(a))}function jf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gl(t))}function Vi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zv(t,r,a,l),r=r.sibling}function zv(t,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Vi(t,r,a,l),d&2048&&Nl(9,r);break;case 1:Vi(t,r,a,l);break;case 3:Vi(t,r,a,l),d&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&gl(t)));break;case 12:if(d&2048){Vi(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,_=f.id,w=f.onPostCommit;typeof w=="function"&&w(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){ft(r,r.return,N)}}else Vi(t,r,a,l);break;case 13:Vi(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,_=r.alternate,r.memoizedState!==null?f._visibility&2?Vi(t,r,a,l):Ol(t,r):f._visibility&2?Vi(t,r,a,l):(f._visibility|=2,uo(t,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&Uf(_,r);break;case 24:Vi(t,r,a,l),d&2048&&jf(r.alternate,r);break;default:Vi(t,r,a,l)}}function uo(t,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,_=r,w=a,N=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:uo(f,_,w,N,d),Nl(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?uo(f,_,w,N,d):Ol(f,_):(X._visibility|=2,uo(f,_,w,N,d)),d&&F&2048&&Uf(_.alternate,_);break;case 24:uo(f,_,w,N,d),d&&F&2048&&jf(_.alternate,_);break;default:uo(f,_,w,N,d)}r=r.sibling}}function Ol(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,d=l.flags;switch(l.tag){case 22:Ol(a,l),d&2048&&Uf(l.alternate,l);break;case 24:Ol(a,l),d&2048&&jf(l.alternate,l);break;default:Ol(a,l)}r=r.sibling}}var Ml=8192;function co(t){if(t.subtreeFlags&Ml)for(t=t.child;t!==null;)Bv(t),t=t.sibling}function Bv(t){switch(t.tag){case 26:co(t),t.flags&Ml&&t.memoizedState!==null&&NA(ci,t.memoizedState,t.memoizedProps);break;case 5:co(t);break;case 3:case 4:var r=ci;ci=Qc(t.stateNode.containerInfo),co(t),ci=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ml,Ml=16777216,co(t),Ml=r):co(t));break;default:co(t)}}function qv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Vl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Fv(l,t)}qv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hv(t),t=t.sibling}function Hv(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&Yr(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Pc(t)):Vl(t);break;default:Vl(t)}}function Pc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Fv(l,t)}qv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Yr(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}t=t.sibling}}function Fv(t,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Yr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:gl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var d=l.sibling,f=l.return;if(kv(l),l===a){Gt=null;break e}if(d!==null){d.return=f,Gt=d;break e}Gt=f}}}var $S={getCacheForType:function(t){var r=nn(Pt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},KS=typeof WeakMap=="function"?WeakMap:Map,at=0,pt=null,qe=null,Ye=0,ot=0,kn=null,Zr=!1,ho=!1,zf=!1,gr=0,wt=0,Jr=0,ua=0,Bf=0,ei=0,fo=0,kl=null,bn=null,qf=!1,Hf=0,Lc=1/0,Uc=null,es=null,Xt=0,ts=null,mo=null,po=0,Ff=0,Gf=null,Gv=null,Pl=0,$f=null;function Pn(){if((at&2)!==0&&Ye!==0)return Ye&-Ye;if(W.T!==null){var t=to;return t!==0?t:Jf()}return le()}function $v(){ei===0&&(ei=(Ye&536870912)===0||tt?Ur():536870912);var t=Jn.current;return t!==null&&(t.flags|=32),ei}function Ln(t,r,a){(t===pt&&(ot===2||ot===9)||t.cancelPendingCommit!==null)&&(go(t,0),ns(t,Ye,ei,!1)),ai(t,a),((at&2)===0||t!==pt)&&(t===pt&&((at&2)===0&&(ua|=a),wt===4&&ns(t,Ye,ei,!1)),ki(t))}function Kv(t,r,a){if((at&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Yi(t,r),d=l?WS(t,r):Yf(t,r,!0),f=l;do{if(d===0){ho&&!l&&ns(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!QS(a)){d=Yf(t,r,!1),f=!1;continue}if(d===2){if(f=r,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var w=t;d=kl;var N=w.current.memoizedState.isDehydrated;if(N&&(go(w,_).flags|=256),_=Yf(w,_,!1),_!==2){if(zf&&!N){w.errorRecoveryDisabledLanes|=f,ua|=f,d=4;break e}f=bn,bn=d,f!==null&&(bn===null?bn=f:bn.push.apply(bn,f))}d=_}if(f=!1,d!==2)continue}}if(d===1){go(t,0),ns(t,r,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ns(l,r,ei,!Zr);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=Hf+300-vn(),10<d)){if(ns(l,r,ei,!Zr),Pr(l,0,!0)!==0)break e;l.timeoutHandle=w_(Qv.bind(null,l,a,bn,Uc,qf,r,ei,ua,fo,Zr,f,2,-0,0),d);break e}Qv(l,a,bn,Uc,qf,r,ei,ua,fo,Zr,f,0,-0,0)}}break}while(!0);ki(t)}function Qv(t,r,a,l,d,f,_,w,N,F,X,te,G,$){if(t.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:xA},Bv(r),te=DA(),te!==null)){t.cancelPendingCommit=te(t_.bind(null,t,r,f,a,l,d,_,w,N,X,1,G,$)),ns(t,f,_,!F);return}t_(t,r,f,a,l,d,_,w,N)}function QS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Dn(f(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ns(t,r,a,l){r&=~Bf,r&=~ua,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var d=r;0<d;){var f=31-Bt(d),_=1<<f;l[f]=-1,d&=~_}a!==0&&Hn(t,a,r)}function jc(){return(at&6)===0?(Ll(0),!1):!0}function Kf(){if(qe!==null){if(ot===0)var t=qe.return;else t=qe,lr=ia=null,cf(t),oo=null,Il=0,t=qe;for(;t!==null;)Iv(t.alternate,t),t=t.return;qe=null}}function go(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,dA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Kf(),pt=t,qe=a=sr(t.current,null),Ye=r,ot=0,kn=null,Zr=!1,ho=Yi(t,r),zf=!1,fo=ei=Bf=ua=Jr=wt=0,bn=kl=null,qf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var d=31-Bt(l),f=1<<d;r|=t[d],l&=~f}return gr=r,oc(),a}function Yv(t,r){Le=null,W.H=Rc,r===vl||r===gc?(r=dy(),ot=3):r===uy?(r=dy(),ot=4):ot=r===fv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,kn=r,qe===null&&(wt=1,Dc(t,Yn(r,t.current)))}function Wv(){var t=W.H;return W.H=Rc,t===null?Rc:t}function Xv(){var t=W.A;return W.A=$S,t}function Qf(){wt=4,Zr||(Ye&4194048)!==Ye&&Jn.current!==null||(ho=!0),(Jr&134217727)===0&&(ua&134217727)===0||pt===null||ns(pt,Ye,ei,!1)}function Yf(t,r,a){var l=at;at|=2;var d=Wv(),f=Xv();(pt!==t||Ye!==r)&&(Uc=null,go(t,r)),r=!1;var _=wt;e:do try{if(ot!==0&&qe!==null){var w=qe,N=kn;switch(ot){case 8:Kf(),_=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(r=!0);var F=ot;if(ot=0,kn=null,yo(t,w,N,F),a&&ho){_=0;break e}break;default:F=ot,ot=0,kn=null,yo(t,w,N,F)}}YS(),_=wt;break}catch(X){Yv(t,X)}while(!0);return r&&t.shellSuspendCounter++,lr=ia=null,at=l,W.H=d,W.A=f,qe===null&&(pt=null,Ye=0,oc()),_}function YS(){for(;qe!==null;)Zv(qe)}function WS(t,r){var a=at;at|=2;var l=Wv(),d=Xv();pt!==t||Ye!==r?(Uc=null,Lc=vn()+500,go(t,r)):ho=Yi(t,r);e:do try{if(ot!==0&&qe!==null){r=qe;var f=kn;t:switch(ot){case 1:ot=0,kn=null,yo(t,r,f,1);break;case 2:case 9:if(cy(f)){ot=0,kn=null,Jv(r);break}r=function(){ot!==2&&ot!==9||pt!==t||(ot=7),ki(t)},f.then(r,r);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:cy(f)?(ot=0,kn=null,Jv(r)):(ot=0,kn=null,yo(t,r,f,7));break;case 5:var _=null;switch(qe.tag){case 26:_=qe.memoizedState;case 5:case 27:var w=qe;if(!_||V_(_)){ot=0,kn=null;var N=w.sibling;if(N!==null)qe=N;else{var F=w.return;F!==null?(qe=F,zc(F)):qe=null}break t}}ot=0,kn=null,yo(t,r,f,5);break;case 6:ot=0,kn=null,yo(t,r,f,6);break;case 8:Kf(),wt=6;break e;default:throw Error(s(462))}}XS();break}catch(X){Yv(t,X)}while(!0);return lr=ia=null,W.H=l,W.A=d,at=a,qe!==null?0:(pt=null,Ye=0,oc(),wt)}function XS(){for(;qe!==null&&!Mr();)Zv(qe)}function Zv(t){var r=Av(t.alternate,t,gr);t.memoizedProps=t.pendingProps,r===null?zc(t):qe=r}function Jv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=_v(a,r,r.pendingProps,r.type,void 0,Ye);break;case 11:r=_v(a,r,r.pendingProps,r.type.render,r.ref,Ye);break;case 5:cf(r);default:Iv(a,r),r=qe=ey(r,gr),r=Av(a,r,gr)}t.memoizedProps=t.pendingProps,r===null?zc(t):qe=r}function yo(t,r,a,l){lr=ia=null,cf(r),oo=null,Il=0;var d=r.return;try{if(zS(t,d,r,a,Ye)){wt=1,Dc(t,Yn(a,t.current)),qe=null;return}}catch(f){if(d!==null)throw qe=d,f;wt=1,Dc(t,Yn(a,t.current)),qe=null;return}r.flags&32768?(tt||l===1?t=!0:ho||(Ye&536870912)!==0?t=!1:(Zr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Jn.current,l!==null&&l.tag===13&&(l.flags|=16384))),e_(r,t)):zc(r)}function zc(t){var r=t;do{if((r.flags&32768)!==0){e_(r,Zr);return}t=r.return;var a=qS(r.alternate,r,gr);if(a!==null){qe=a;return}if(r=r.sibling,r!==null){qe=r;return}qe=r=t}while(r!==null);wt===0&&(wt=5)}function e_(t,r){do{var a=HS(t.alternate,t);if(a!==null){a.flags&=32767,qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){qe=t;return}qe=t=a}while(t!==null);wt=6,qe=null}function t_(t,r,a,l,d,f,_,w,N){t.cancelPendingCommit=null;do Bc();while(Xt!==0);if((at&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Ud,ks(t,a,f,_,w,N),t===pt&&(qe=pt=null,Ye=0),mo=r,ts=t,po=a,Ff=f,Gf=d,Gv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,tA(Ki,function(){return a_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,d=oe.p,oe.p=2,_=at,at|=4;try{FS(t,r,a)}finally{at=_,oe.p=d,W.T=l}}Xt=1,n_(),i_(),r_()}}function n_(){if(Xt===1){Xt=0;var t=ts,r=mo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var d=at;at|=4;try{Uv(r,t);var f=om,_=Fg(t.containerInfo),w=f.focusedElem,N=f.selectionRange;if(_!==w&&w&&w.ownerDocument&&Hg(w.ownerDocument.documentElement,w)){if(N!==null&&Md(w)){var F=N.start,X=N.end;if(X===void 0&&(X=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(X,w.value.length);else{var te=w.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var $=G.getSelection(),xe=w.textContent.length,Se=Math.min(N.start,xe),dt=N.end===void 0?Se:Math.min(N.end,xe);!$.extend&&Se>dt&&(_=dt,dt=Se,Se=_);var z=qg(w,Se),j=qg(w,dt);if(z&&j&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==j.node||$.focusOffset!==j.offset)){var q=te.createRange();q.setStart(z.node,z.offset),$.removeAllRanges(),Se>dt?($.addRange(q),$.extend(j.node,j.offset)):(q.setEnd(j.node,j.offset),$.addRange(q))}}}}for(te=[],$=w;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var Z=te[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Jc=!!am,om=am=null}finally{at=d,oe.p=l,W.T=a}}t.current=r,Xt=2}}function i_(){if(Xt===2){Xt=0;var t=ts,r=mo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var d=at;at|=4;try{Vv(t,r.alternate,r)}finally{at=d,oe.p=l,W.T=a}}Xt=3}}function r_(){if(Xt===4||Xt===3){Xt=0,Ds();var t=ts,r=mo,a=po,l=Gv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,mo=ts=null,s_(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(es=null),ue(a),r=r.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(mt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=W.T,d=oe.p,oe.p=2,W.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var w=l[_];f(w.value,{componentStack:w.stack})}}finally{W.T=r,oe.p=d}}(po&3)!==0&&Bc(),ki(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===$f?Pl++:(Pl=0,$f=t):Pl=0,Ll(0)}}function s_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,gl(r)))}function Bc(t){return n_(),i_(),r_(),a_()}function a_(){if(Xt!==5)return!1;var t=ts,r=Ff;Ff=0;var a=ue(po),l=W.T,d=oe.p;try{oe.p=32>a?32:a,W.T=null,a=Gf,Gf=null;var f=ts,_=po;if(Xt=0,mo=ts=null,po=0,(at&6)!==0)throw Error(s(331));var w=at;if(at|=4,Hv(f.current),zv(f,f.current,_,a),at=w,Ll(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(mt,f)}catch{}return!0}finally{oe.p=d,W.T=l,s_(t,r)}}function o_(t,r,a){r=Yn(a,r),r=Sf(t.stateNode,r,2),t=Gr(t,r,2),t!==null&&(ai(t,2),ki(t))}function ft(t,r,a){if(t.tag===3)o_(t,t,a);else for(;r!==null;){if(r.tag===3){o_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(es===null||!es.has(l))){t=Yn(a,t),a=hv(2),l=Gr(r,a,2),l!==null&&(dv(a,l,r,t),ai(l,2),ki(l));break}}r=r.return}}function Wf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new KS;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(zf=!0,d.add(a),t=ZS.bind(null,t,r,a),r.then(t,t))}function ZS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,pt===t&&(Ye&a)===a&&(wt===4||wt===3&&(Ye&62914560)===Ye&&300>vn()-Hf?(at&2)===0&&go(t,0):Bf|=a,fo===Ye&&(fo=0)),ki(t)}function l_(t,r){r===0&&(r=Ma()),t=Xa(t,r),t!==null&&(ai(t,r),ki(t))}function JS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),l_(t,a)}function eA(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),l_(t,a)}function tA(t,r){return Gi(t,r)}var qc=null,vo=null,Xf=!1,Hc=!1,Zf=!1,ca=0;function ki(t){t!==vo&&t.next===null&&(vo===null?qc=vo=t:vo=vo.next=t),Hc=!0,Xf||(Xf=!0,iA())}function Ll(t,r){if(!Zf&&Hc){Zf=!0;do for(var a=!1,l=qc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var _=l.suspendedLanes,w=l.pingedLanes;f=(1<<31-Bt(42|t)+1)-1,f&=d&~(_&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,d_(l,f))}else f=Ye,f=Pr(l,l===pt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Yi(l,f)||(a=!0,d_(l,f));l=l.next}while(a);Zf=!1}}function nA(){u_()}function u_(){Hc=Xf=!1;var t=0;ca!==0&&(hA()&&(t=ca),ca=0);for(var r=vn(),a=null,l=qc;l!==null;){var d=l.next,f=c_(l,r);f===0?(l.next=null,a===null?qc=d:a.next=d,d===null&&(vo=a)):(a=l,(t!==0||(f&3)!==0)&&(Hc=!0)),l=d}Ll(t)}function c_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Bt(f),w=1<<_,N=d[_];N===-1?((w&a)===0||(w&l)!==0)&&(d[_]=Lr(w,r)):N<=r&&(t.expiredLanes|=w),f&=~w}if(r=pt,a=Ye,a=Pr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(ot===2||ot===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&$i(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yi(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&$i(l),ue(a)){case 2:case 8:a=Vr;break;case 32:a=Ki;break;case 268435456:a=kr;break;default:a=Ki}return l=h_.bind(null,t),a=Gi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&$i(l),t.callbackPriority=2,t.callbackNode=null,2}function h_(t,r){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Bc()&&t.callbackNode!==a)return null;var l=Ye;return l=Pr(t,t===pt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Kv(t,l,r),c_(t,vn()),t.callbackNode!=null&&t.callbackNode===a?h_.bind(null,t):null)}function d_(t,r){if(Bc())return null;Kv(t,r,!0)}function iA(){fA(function(){(at&6)!==0?Gi(Ms,nA):u_()})}function Jf(){return ca===0&&(ca=Ur()),ca}function f_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ja(""+t)}function m_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function rA(t,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var f=f_((d[Je]||null).action),_=l.submitter;_&&(r=(r=_[Je]||null)?f_(r.formAction):_.getAttribute("formAction"),r!==null&&(f=r,_=null));var w=new za("action","action",null,l,d);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ca!==0){var N=_?m_(d,_):new FormData(d);_f(a,{pending:!0,data:N,method:d.method,action:f},null,N)}}else typeof f=="function"&&(w.preventDefault(),N=_?m_(d,_):new FormData(d),_f(a,{pending:!0,data:N,method:d.method,action:f},f,N))},currentTarget:d}]})}}for(var em=0;em<Ld.length;em++){var tm=Ld[em],sA=tm.toLowerCase(),aA=tm[0].toUpperCase()+tm.slice(1);ui(sA,"on"+aA)}ui(Kg,"onAnimationEnd"),ui(Qg,"onAnimationIteration"),ui(Yg,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(bS,"onTransitionRun"),ui(SS,"onTransitionStart"),ui(AS,"onTransitionCancel"),ui(Wg,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function p_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var _=l.length-1;0<=_;_--){var w=l[_],N=w.instance,F=w.currentTarget;if(w=w.listener,N!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=F;try{f(d)}catch(X){Nc(X)}d.currentTarget=null,f=N}else for(_=0;_<l.length;_++){if(w=l[_],N=w.instance,F=w.currentTarget,w=w.listener,N!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=F;try{f(d)}catch(X){Nc(X)}d.currentTarget=null,f=N}}}}function He(t,r){var a=r[Ze];a===void 0&&(a=r[Ze]=new Set);var l=t+"__bubble";a.has(l)||(g_(r,t,2,!1),a.add(l))}function nm(t,r,a){var l=0;r&&(l|=4),g_(a,t,l,r)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function im(t){if(!t[Fc]){t[Fc]=!0,Wo.forEach(function(a){a!=="selectionchange"&&(oA.has(a)||nm(a,!1,t),nm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Fc]||(r[Fc]=!0,nm("selectionchange",!1,r))}}function g_(t,r,a,l){switch(z_(r)){case 2:var d=VA;break;case 8:d=kA;break;default:d=ym}a=d.bind(null,r,a,t),d=void 0,!Kn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(r,a,{capture:!0,passive:d}):t.addEventListener(r,a,!0):d!==void 0?t.addEventListener(r,a,{passive:d}):t.addEventListener(r,a,!1)}function rm(t,r,a,l,d){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var w=l.stateNode.containerInfo;if(w===d)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;w!==null;){if(_=En(w),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=f=_;continue e}w=w.parentNode}}l=l.return}$u(function(){var F=f,X=$n(a),te=[];e:{var G=Xg.get(t);if(G!==void 0){var $=za,xe=t;switch(t){case"keypress":if(Ri(a)===0)break e;case"keydown":case"keyup":$=$a;break;case"focusin":xe="focus",$=Ha;break;case"focusout":xe="blur",$=Ha;break;case"beforeblur":case"afterblur":$=Ha;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ec;break;case Kg:case Qg:case Yg:$=Fa;break;case Wg:$=nc;break;case"scroll":case"scrollend":$=Ku;break;case"wheel":$=Ka;break;case"copy":case"cut":case"paste":$=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ll;break;case"toggle":case"beforetoggle":$=rc}var Se=(r&4)!==0,dt=!Se&&(t==="scroll"||t==="scrollend"),z=Se?G!==null?G+"Capture":null:G;Se=[];for(var j=F,q;j!==null;){var Z=j;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||z===null||(Z=Hs(j,z),Z!=null&&Se.push(jl(j,Z,q))),dt)break;j=j.return}0<Se.length&&(G=new $(G,xe,null,a,X),te.push({event:G,listeners:Se}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",G&&a!==Ji&&(xe=a.relatedTarget||a.fromElement)&&(En(xe)||xe[Xe]))break e;if(($||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,$?(xe=a.relatedTarget||a.toElement,$=F,xe=xe?En(xe):null,xe!==null&&(dt=u(xe),Se=xe.tag,xe!==dt||Se!==5&&Se!==27&&Se!==6)&&(xe=null)):($=null,xe=F),$!==xe)){if(Se=Qn,Z="onMouseLeave",z="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Se=ll,Z="onPointerLeave",z="onPointerEnter",j="pointer"),dt=$==null?G:wi($),q=xe==null?G:wi(xe),G=new Se(Z,j+"leave",$,a,X),G.target=dt,G.relatedTarget=q,Z=null,En(X)===F&&(Se=new Se(z,j+"enter",xe,a,X),Se.target=q,Se.relatedTarget=dt,Z=Se),dt=Z,$&&xe)t:{for(Se=$,z=xe,j=0,q=Se;q;q=_o(q))j++;for(q=0,Z=z;Z;Z=_o(Z))q++;for(;0<j-q;)Se=_o(Se),j--;for(;0<q-j;)z=_o(z),q--;for(;j--;){if(Se===z||z!==null&&Se===z.alternate)break t;Se=_o(Se),z=_o(z)}Se=null}else Se=null;$!==null&&y_(te,G,$,Se,!1),xe!==null&&dt!==null&&y_(te,dt,xe,Se,!0)}}e:{if(G=F?wi(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var ve=Pg;else if(kt(G))if(Lg)ve=ES;else{ve=vS;var je=yS}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&tl(F.elementType)&&(ve=Pg):ve=_S;if(ve&&(ve=ve(t,F))){rr(te,ve,a,X);break e}je&&je(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&zr(G,"number",G.value)}switch(je=F?wi(F):window,t){case"focusin":(kt(je)||je.contentEditable==="true")&&(Qa=je,Vd=F,hl=null);break;case"focusout":hl=Vd=Qa=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Gg(te,a,X);break;case"selectionchange":if(wS)break;case"keydown":case"keyup":Gg(te,a,X)}var Ee;if(xi)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ke?K(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(v&&a.locale!=="ko"&&(Ke||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ke&&(Ee=il()):(Ai=X,Br="value"in Ai?Ai.value:Ai.textContent,Ke=!0)),je=Gc(F,Re),0<je.length&&(Re=new al(Re,t,null,a,X),te.push({event:Re,listeners:je}),Ee?Re.data=Ee:(Ee=ce(a),Ee!==null&&(Re.data=Ee)))),(Ee=y?Vt(t,a):Qe(t,a))&&(Re=Gc(F,"onBeforeInput"),0<Re.length&&(je=new al("onBeforeInput","beforeinput",null,a,X),te.push({event:je,listeners:Re}),je.data=Ee)),rA(te,t,F,a,X)}p_(te,r)})}function jl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Gc(t,r){for(var a=r+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Hs(t,a),d!=null&&l.unshift(jl(t,d,f)),d=Hs(t,r),d!=null&&l.push(jl(t,d,f))),t.tag===3)return l;t=t.return}return[]}function _o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function y_(t,r,a,l,d){for(var f=r._reactName,_=[];a!==null&&a!==l;){var w=a,N=w.alternate,F=w.stateNode;if(w=w.tag,N!==null&&N===l)break;w!==5&&w!==26&&w!==27||F===null||(N=F,d?(F=Hs(a,f),F!=null&&_.unshift(jl(a,F,N))):d||(F=Hs(a,f),F!=null&&_.push(jl(a,F,N)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var lA=/\r\n?/g,uA=/\u0000|\uFFFD/g;function v_(t){return(typeof t=="string"?t:""+t).replace(lA,`
`).replace(uA,"")}function __(t,r){return r=v_(r),v_(t)===r}function $c(){}function ht(t,r,a,l,d,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Gn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Gn(t,""+l);break;case"className":bi(t,"class",l);break;case"tabIndex":bi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bi(t,a,l);break;case"style":el(t,l,f);break;case"data":if(r!=="object"){bi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ja(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&ht(t,r,"name",d.name,d,null),ht(t,r,"formEncType",d.formEncType,d,null),ht(t,r,"formMethod",d.formMethod,d,null),ht(t,r,"formTarget",d.formTarget,d,null)):(ht(t,r,"encType",d.encType,d,null),ht(t,r,"method",d.method,d,null),ht(t,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ja(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=$c);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ja(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":He("beforetoggle",t),He("toggle",t),jr(t,"popover",l);break;case"xlinkActuate":Qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":jr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Id.get(a)||a,jr(t,a,l))}}function sm(t,r,a,l,d,f){switch(a){case"style":el(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Gn(t,l):(typeof l=="number"||typeof l=="bigint")&&Gn(t,""+l);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"onClick":l!=null&&(t.onclick=$c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Va.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),f=t[Je]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):jr(t,a,l)}}}function Zt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",t),He("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ht(t,r,f,_,a,null)}}d&&ht(t,r,"srcSet",a.srcSet,a,null),l&&ht(t,r,"src",a.src,a,null);return;case"input":He("invalid",t);var w=f=_=d=null,N=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":d=X;break;case"type":_=X;break;case"checked":N=X;break;case"defaultChecked":F=X;break;case"value":f=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:ht(t,r,l,X,a,null)}}zs(t,f,w,N,F,_,d,!1),Ua(t);return;case"select":He("invalid",t),l=_=f=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":_=w;break;case"multiple":l=w;default:ht(t,r,d,w,a,null)}r=f,a=_,t.multiple=!!l,r!=null?Zi(t,!!l,r,!1):a!=null&&Zi(t,!!l,a,!0);return;case"textarea":He("invalid",t),f=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(w=a[_],w!=null))switch(_){case"value":l=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:ht(t,r,_,w,a,null)}Bs(t,l,d,f),Ua(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ht(t,r,N,l,a,null)}return;case"dialog":He("beforetoggle",t),He("toggle",t),He("cancel",t),He("close",t);break;case"iframe":case"object":He("load",t);break;case"video":case"audio":for(l=0;l<Ul.length;l++)He(Ul[l],t);break;case"image":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"embed":case"source":case"link":He("error",t),He("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ht(t,r,F,l,a,null)}return;default:if(tl(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&sm(t,r,X,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&ht(t,r,w,l,a,null))}function cA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,_=null,w=null,N=null,F=null,X=null;for($ in a){var te=a[$];if(a.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":N=te;default:l.hasOwnProperty($)||ht(t,r,$,null,l,te)}}for(var G in l){var $=l[G];if(te=a[G],l.hasOwnProperty(G)&&($!=null||te!=null))switch(G){case"type":f=$;break;case"name":d=$;break;case"checked":F=$;break;case"defaultChecked":X=$;break;case"value":_=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==te&&ht(t,r,G,$,l,te)}}Nn(t,_,w,N,F,X,f,d);return;case"select":$=_=w=G=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":$=N;default:l.hasOwnProperty(f)||ht(t,r,f,null,l,N)}for(d in l)if(f=l[d],N=a[d],l.hasOwnProperty(d)&&(f!=null||N!=null))switch(d){case"value":G=f;break;case"defaultValue":w=f;break;case"multiple":_=f;default:f!==N&&ht(t,r,d,f,l,N)}r=w,a=_,l=$,G!=null?Zi(t,!!a,G,!1):!!l!=!!a&&(r!=null?Zi(t,!!a,r,!0):Zi(t,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ht(t,r,w,null,l,d)}for(_ in l)if(d=l[_],f=a[_],l.hasOwnProperty(_)&&(d!=null||f!=null))switch(_){case"value":G=d;break;case"defaultValue":$=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==f&&ht(t,r,_,d,l,f)}ut(t,G,$);return;case"option":for(var xe in a)if(G=a[xe],a.hasOwnProperty(xe)&&G!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":t.selected=!1;break;default:ht(t,r,xe,null,l,G)}for(N in l)if(G=l[N],$=a[N],l.hasOwnProperty(N)&&G!==$&&(G!=null||$!=null))switch(N){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ht(t,r,N,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se)&&ht(t,r,Se,null,l,G);for(F in l)if(G=l[F],$=a[F],l.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:ht(t,r,F,G,l,$)}return;default:if(tl(r)){for(var dt in a)G=a[dt],a.hasOwnProperty(dt)&&G!==void 0&&!l.hasOwnProperty(dt)&&sm(t,r,dt,void 0,l,G);for(X in l)G=l[X],$=a[X],!l.hasOwnProperty(X)||G===$||G===void 0&&$===void 0||sm(t,r,X,G,l,$);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&ht(t,r,z,null,l,G);for(te in l)G=l[te],$=a[te],!l.hasOwnProperty(te)||G===$||G==null&&$==null||ht(t,r,te,G,l,$)}var am=null,om=null;function Kc(t){return t.nodeType===9?t:t.ownerDocument}function E_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function lm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var um=null;function hA(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var w_=typeof setTimeout=="function"?setTimeout:void 0,dA=typeof clearTimeout=="function"?clearTimeout:void 0,b_=typeof Promise=="function"?Promise:void 0,fA=typeof queueMicrotask=="function"?queueMicrotask:typeof b_<"u"?function(t){return b_.resolve(null).then(t).catch(mA)}:w_;function mA(t){setTimeout(function(){throw t})}function is(t){return t==="head"}function S_(t,r){var a=r,l=0,d=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&zl(_.documentElement),a&2&&zl(_.body),a&4)for(a=_.head,zl(a),_=a.firstChild;_;){var w=_.nextSibling,N=_.nodeName;_[Ti]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=w}}if(d===0){t.removeChild(f),Ql(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Ql(r)}function cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),lt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function pA(t,r,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ti])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=hi(t.nextSibling),t===null)break}return null}function gA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=hi(t.nextSibling),t===null))return null;return t}function hm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function yA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function hi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var dm=null;function A_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function R_(t,r,a){switch(r=Kc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function zl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);lt(t)}var ti=new Map,I_=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var yr=oe.d;oe.d={f:vA,r:_A,D:EA,C:TA,L:wA,m:bA,X:AA,S:SA,M:RA};function vA(){var t=yr.f(),r=jc();return t||r}function _A(t){var r=it(t);r!==null&&r.tag===5&&r.type==="form"?Ky(r):yr.r(t)}var Eo=typeof document>"u"?null:document;function C_(t,r,a){var l=Eo;if(l&&typeof r=="string"&&r){var d=xt(r);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),I_.has(d)||(I_.add(d),t={rel:t,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Zt(r,"link",t),St(r),l.head.appendChild(r)))}}function EA(t){yr.D(t),C_("dns-prefetch",t,null)}function TA(t,r){yr.C(t,r),C_("preconnect",t,r)}function wA(t,r,a){yr.L(t,r,a);var l=Eo;if(l&&t&&r){var d='link[rel="preload"][as="'+xt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+xt(a.imageSizes)+'"]')):d+='[href="'+xt(t)+'"]';var f=d;switch(r){case"style":f=To(t);break;case"script":f=wo(t)}ti.has(f)||(t=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),ti.set(f,t),l.querySelector(d)!==null||r==="style"&&l.querySelector(Bl(f))||r==="script"&&l.querySelector(ql(f))||(r=l.createElement("link"),Zt(r,"link",t),St(r),l.head.appendChild(r)))}}function bA(t,r){yr.m(t,r);var a=Eo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+xt(l)+'"][href="'+xt(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=wo(t)}if(!ti.has(f)&&(t=E({rel:"modulepreload",href:t},r),ti.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ql(f)))return}l=a.createElement("link"),Zt(l,"link",t),St(l),a.head.appendChild(l)}}}function SA(t,r,a){yr.S(t,r,a);var l=Eo;if(l&&t){var d=fn(l).hoistableStyles,f=To(t);r=r||"default";var _=d.get(f);if(!_){var w={loading:0,preload:null};if(_=l.querySelector(Bl(f)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},a),(a=ti.get(f))&&fm(t,a);var N=_=l.createElement("link");St(N),Zt(N,"link",t),N._p=new Promise(function(F,X){N.onload=F,N.onerror=X}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Yc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:w},d.set(f,_)}}}function AA(t,r){yr.X(t,r);var a=Eo;if(a&&t){var l=fn(a).hoistableScripts,d=wo(t),f=l.get(d);f||(f=a.querySelector(ql(d)),f||(t=E({src:t,async:!0},r),(r=ti.get(d))&&mm(t,r),f=a.createElement("script"),St(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function RA(t,r){yr.M(t,r);var a=Eo;if(a&&t){var l=fn(a).hoistableScripts,d=wo(t),f=l.get(d);f||(f=a.querySelector(ql(d)),f||(t=E({src:t,async:!0,type:"module"},r),(r=ti.get(d))&&mm(t,r),f=a.createElement("script"),St(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function x_(t,r,a,l){var d=(d=Ae.current)?Qc(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=To(a.href),a=fn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=To(a.href);var f=fn(d).hoistableStyles,_=f.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=d.querySelector(Bl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),ti.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ti.set(t,a),f||IA(d,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=wo(a),a=fn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function To(t){return'href="'+xt(t)+'"'}function Bl(t){return'link[rel="stylesheet"]['+t+"]"}function N_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function IA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zt(r,"link",a),St(r),t.head.appendChild(r))}function wo(t){return'[src="'+xt(t)+'"]'}function ql(t){return"script[async]"+t}function D_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+xt(a.href)+'"]');if(l)return r.instance=l,St(l),l;var d=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),St(l),Zt(l,"style",d),Yc(l,a.precedence,t),r.instance=l;case"stylesheet":d=To(a.href);var f=t.querySelector(Bl(d));if(f)return r.state.loading|=4,r.instance=f,St(f),f;l=N_(a),(d=ti.get(d))&&fm(l,d),f=(t.ownerDocument||t).createElement("link"),St(f);var _=f;return _._p=new Promise(function(w,N){_.onload=w,_.onerror=N}),Zt(f,"link",l),r.state.loading|=4,Yc(f,a.precedence,t),r.instance=f;case"script":return f=wo(a.src),(d=t.querySelector(ql(f)))?(r.instance=d,St(d),d):(l=a,(d=ti.get(f))&&(l=E({},a),mm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),St(d),Zt(d,"link",l),t.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Yc(l,a.precedence,t));return r.instance}function Yc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,_=0;_<l.length;_++){var w=l[_];if(w.dataset.precedence===r)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function fm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function mm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Wc=null;function O_(t,r,a){if(Wc===null){var l=new Map,d=Wc=new Map;d.set(a,l)}else d=Wc,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Ti]||f[De]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(r)||"";_=t+_;var w=l.get(_);w?w.push(f):l.set(_,[f])}}return l}function M_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function CA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function V_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Hl=null;function xA(){}function NA(t,r,a){if(Hl===null)throw Error(s(475));var l=Hl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=To(a.href),f=t.querySelector(Bl(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Xc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,St(f);return}f=t.ownerDocument||t,a=N_(a),(d=ti.get(d))&&fm(a,d),f=f.createElement("link"),St(f);var _=f;_._p=new Promise(function(w,N){_.onload=w,_.onerror=N}),Zt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Xc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function DA(){if(Hl===null)throw Error(s(475));var t=Hl;return t.stylesheets&&t.count===0&&pm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&pm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Xc(){if(this.count--,this.count===0){if(this.stylesheets)pm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zc=null;function pm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zc=new Map,r.forEach(OA,t),Zc=null,Xc.call(t))}function OA(t,r){if(!(r.state.loading&4)){var a=Zc.get(t);if(a)var l=a.get(null);else{a=new Map,Zc.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var _=d[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=r.instance,_=d.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,d),a.set(_,d),this.count++,l=Xc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),r.state.loading|=4}}var Fl={$$typeof:J,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function MA(t,r,a,l,d,f,_,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qn(0),this.hiddenUpdates=qn(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function k_(t,r,a,l,d,f,_,w,N,F,X,te){return t=new MA(t,r,a,_,w,N,F,te),r=1,f===!0&&(r|=24),f=On(3,null,null,r),t.current=f,f.stateNode=t,r=Yd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Jd(f),t}function P_(t){return t?(t=Za,t):Za}function L_(t,r,a,l,d,f){d=P_(d),l.context===null?l.context=d:l.pendingContext=d,l=Fr(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Gr(t,l,r),a!==null&&(Ln(a,t,r),El(a,t,r))}function U_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function gm(t,r){U_(t,r),(t=t.alternate)&&U_(t,r)}function j_(t){if(t.tag===13){var r=Xa(t,67108864);r!==null&&Ln(r,t,67108864),gm(t,67108864)}}var Jc=!0;function VA(t,r,a,l){var d=W.T;W.T=null;var f=oe.p;try{oe.p=2,ym(t,r,a,l)}finally{oe.p=f,W.T=d}}function kA(t,r,a,l){var d=W.T;W.T=null;var f=oe.p;try{oe.p=8,ym(t,r,a,l)}finally{oe.p=f,W.T=d}}function ym(t,r,a,l){if(Jc){var d=vm(l);if(d===null)rm(t,r,l,eh,a),B_(t,l);else if(LA(d,t,r,a,l))l.stopPropagation();else if(B_(t,l),r&4&&-1<PA.indexOf(t)){for(;d!==null;){var f=it(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=_n(f.pendingLanes);if(_!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var N=1<<31-Bt(_);w.entanglements[1]|=N,_&=~N}ki(f),(at&6)===0&&(Lc=vn()+500,Ll(0))}}break;case 13:w=Xa(f,2),w!==null&&Ln(w,f,2),jc(),gm(f,2)}if(f=vm(l),f===null&&rm(t,r,l,eh,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else rm(t,r,l,null,a)}}function vm(t){return t=$n(t),_m(t)}var eh=null;function _m(t){if(eh=null,t=En(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return eh=t,null}function z_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Os()){case Ms:return 2;case Vr:return 8;case Ki:case Yo:return 32;case kr:return 268435456;default:return 32}default:return 32}}var Em=!1,rs=null,ss=null,as=null,Gl=new Map,$l=new Map,os=[],PA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B_(t,r){switch(t){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Gl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(r.pointerId)}}function Kl(t,r,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},r!==null&&(r=it(r),r!==null&&j_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),t)}function LA(t,r,a,l,d){switch(r){case"focusin":return rs=Kl(rs,t,r,a,l,d),!0;case"dragenter":return ss=Kl(ss,t,r,a,l,d),!0;case"mouseover":return as=Kl(as,t,r,a,l,d),!0;case"pointerover":var f=d.pointerId;return Gl.set(f,Kl(Gl.get(f)||null,t,r,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,$l.set(f,Kl($l.get(f)||null,t,r,a,l,d)),!0}return!1}function q_(t){var r=En(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,me(t.priority,function(){if(a.tag===13){var l=Pn();l=ie(l);var d=Xa(a,l);d!==null&&Ln(d,a,l),gm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=vm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ji=l,a.target.dispatchEvent(l),Ji=null}else return r=it(a),r!==null&&j_(r),t.blockedOn=a,!1;r.shift()}return!0}function H_(t,r,a){th(t)&&a.delete(r)}function UA(){Em=!1,rs!==null&&th(rs)&&(rs=null),ss!==null&&th(ss)&&(ss=null),as!==null&&th(as)&&(as=null),Gl.forEach(H_),$l.forEach(H_)}function nh(t,r){t.blockedOn===r&&(t.blockedOn=null,Em||(Em=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,UA)))}var ih=null;function F_(t){ih!==t&&(ih=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],d=t[r+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var f=it(a);f!==null&&(t.splice(r,3),r-=3,_f(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Ql(t){function r(N){return nh(N,t)}rs!==null&&nh(rs,t),ss!==null&&nh(ss,t),as!==null&&nh(as,t),Gl.forEach(r),$l.forEach(r);for(var a=0;a<os.length;a++){var l=os[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<os.length&&(a=os[0],a.blockedOn===null);)q_(a),a.blockedOn===null&&os.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],_=d[Je]||null;if(typeof f=="function")_||F_(a);else if(_){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,_=f[Je]||null)w=_.formAction;else if(_m(d)!==null)continue}else w=_.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),F_(a)}}}function Tm(t){this._internalRoot=t}rh.prototype.render=Tm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Pn();L_(a,l,t,r,null,null)},rh.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;L_(t.current,2,null,t,null,null),jc(),r[Xe]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var r=le();t={blockedOn:null,target:t,priority:r};for(var a=0;a<os.length&&r!==0&&r<os[a].priority;a++);os.splice(a,0,t),a===0&&q_(t)}};var G_=e.version;if(G_!=="19.1.0")throw Error(s(527,G_,"19.1.0"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var jA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{mt=sh.inject(jA),$e=sh}catch{}}return Wl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",d=ov,f=lv,_=uv,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=k_(t,1,!1,null,null,a,l,d,f,_,w,null),t[Xe]=r.current,im(t),new Tm(r)},Wl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,d="",f=ov,_=lv,w=uv,N=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=k_(t,1,!0,r,a??null,l,d,f,_,w,N,F),r.context=P_(null),a=r.current,l=Pn(),l=ie(l),d=Fr(l),d.callback=null,Gr(a,d,l),a=l,r.current.lanes=a,ai(r,a),ki(r),t[Xe]=r.current,im(t),new rh(r)},Wl.version="19.1.0",Wl}var t0;function QA(){if(t0)return Sm.exports;t0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=KA(),Sm.exports}var YA=QA();const WA="/showswatched2/assets/react-CHdo91hT.svg",XA=()=>{};var n0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},ZA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],h=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},iT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,m=h?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let I=(m&15)<<2|g>>6,O=g&63;p||(O=64,h||(I=64)),s.push(n[E],n[b],n[I],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(nT(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):ZA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new JA;const I=u<<2|m>>4;if(s.push(I),g!==64){const O=m<<4&240|g>>2;if(s.push(O),b!==64){const M=g<<6&192|b;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class JA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e1=function(i){const e=nT(i);return iT.encodeByteArray(e,!0)},Rh=function(i){return e1(i).replace(/\./g,"")},rT=function(i){try{return iT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=()=>t1().__FIREBASE_DEFAULTS__,i1=()=>{if(typeof process>"u"||typeof n0>"u")return;const i=n0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},r1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&rT(i[1]);return e&&JSON.parse(e)},Wh=()=>{try{return XA()||n1()||i1()||r1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},sT=i=>{var e,n;return(n=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},s1=i=>{const e=sT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},aT=()=>{var i;return(i=Wh())===null||i===void 0?void 0:i.config},oT=i=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Rh(JSON.stringify(n)),Rh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function u1(){var i;const e=(i=Wh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function h1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d1(){const i=cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function f1(){return!u1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uT(){try{return typeof indexedDB=="object"}catch{return!1}}function cT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function m1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="FirebaseError";class gi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=p1,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ba.prototype.create)}}class ba{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?g1(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new gi(o,m,s)}}function g1(i,e){return i.replace(y1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const y1=/\{\$([^}]+)}/g;function v1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ws(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(i0(u)&&i0(h)){if(!ws(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function i0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Jl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function eu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function _1(i,e){const n=new E1(i,e);return n.subscribe.bind(n)}class E1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");T1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Cm),o.error===void 0&&(o.error=Cm),o.complete===void 0&&(o.complete=Cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1e3,b1=2,S1=4*60*60*1e3,A1=.5;function r0(i,e=w1,n=b1){const s=e*Math.pow(n,i),o=Math.round(A1*s*(Math.random()-.5)*2);return Math.min(S1,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(i){return i&&i._delegate?i._delegate:i}class fi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new a1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C1(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:I1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function I1(i){return i===da?void 0:i}function C1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Fe||(Fe={}));const N1={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},D1=Fe.INFO,O1={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},M1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=O1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xh{constructor(e){this.name=e,this._logLevel=D1,this._logHandler=M1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const V1=(i,e)=>e.some(n=>i instanceof n);let s0,a0;function k1(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P1(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hT=new WeakMap,Km=new WeakMap,dT=new WeakMap,xm=new WeakMap,Ap=new WeakMap;function L1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(vs(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&hT.set(n,i)}).catch(()=>{}),Ap.set(e,i),e}function U1(i){if(Km.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});Km.set(i,e)}let Qm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Km.get(i);if(e==="objectStoreNames")return i.objectStoreNames||dT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function j1(i){Qm=i(Qm)}function z1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Nm(this),e,...n);return dT.set(s,e.sort?e.sort():[e]),vs(s)}:P1().includes(i)?function(...e){return i.apply(Nm(this),e),vs(hT.get(this))}:function(...e){return vs(i.apply(Nm(this),e))}}function B1(i){return typeof i=="function"?z1(i):(i instanceof IDBTransaction&&U1(i),V1(i,k1())?new Proxy(i,Qm):i)}function vs(i){if(i instanceof IDBRequest)return L1(i);if(xm.has(i))return xm.get(i);const e=B1(i);return e!==i&&(xm.set(i,e),Ap.set(e,i)),e}const Nm=i=>Ap.get(i);function fT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),m=vs(h);return s&&h.addEventListener("upgradeneeded",p=>{s(vs(h.result),p.oldVersion,p.newVersion,vs(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const q1=["get","getKey","getAll","getAllKeys","count"],H1=["put","add","delete","clear"],Dm=new Map;function o0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=H1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||q1.includes(n)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Dm.set(e,u),u}j1(i=>({...i,get:(e,n,s)=>o0(e,n)||i.get(e,n,s),has:(e,n)=>!!o0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(G1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function G1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ym="@firebase/app",l0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new Xh("@firebase/app"),$1="@firebase/app-compat",K1="@firebase/analytics-compat",Q1="@firebase/analytics",Y1="@firebase/app-check-compat",W1="@firebase/app-check",X1="@firebase/auth",Z1="@firebase/auth-compat",J1="@firebase/database",e2="@firebase/data-connect",t2="@firebase/database-compat",n2="@firebase/functions",i2="@firebase/functions-compat",r2="@firebase/installations",s2="@firebase/installations-compat",a2="@firebase/messaging",o2="@firebase/messaging-compat",l2="@firebase/performance",u2="@firebase/performance-compat",c2="@firebase/remote-config",h2="@firebase/remote-config-compat",d2="@firebase/storage",f2="@firebase/storage-compat",m2="@firebase/firestore",p2="@firebase/vertexai",g2="@firebase/firestore-compat",y2="firebase",v2="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="[DEFAULT]",_2={[Ym]:"fire-core",[$1]:"fire-core-compat",[Q1]:"fire-analytics",[K1]:"fire-analytics-compat",[W1]:"fire-app-check",[Y1]:"fire-app-check-compat",[X1]:"fire-auth",[Z1]:"fire-auth-compat",[J1]:"fire-rtdb",[e2]:"fire-data-connect",[t2]:"fire-rtdb-compat",[n2]:"fire-fn",[i2]:"fire-fn-compat",[r2]:"fire-iid",[s2]:"fire-iid-compat",[a2]:"fire-fcm",[o2]:"fire-fcm-compat",[l2]:"fire-perf",[u2]:"fire-perf-compat",[c2]:"fire-rc",[h2]:"fire-rc-compat",[d2]:"fire-gcs",[f2]:"fire-gcs-compat",[m2]:"fire-fst",[g2]:"fire-fst-compat",[p2]:"fire-vertex","fire-js":"fire-js",[y2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,E2=new Map,Xm=new Map;function u0(i,e){try{i.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Bi(i){const e=i.name;if(Xm.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,i);for(const n of Ih.values())u0(n,i);for(const n of E2.values())u0(n,i);return!0}function Sa(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ni(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new ba("app","Firebase",T2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=v2;function mT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw _s.create("bad-app-name",{appName:String(o)});if(n||(n=aT()),!n)throw _s.create("no-options");const u=Ih.get(o);if(u){if(ws(n,u.options)&&ws(s,u.config))return u;throw _s.create("duplicate-app",{appName:o})}const h=new x1(o);for(const p of Xm.values())h.addComponent(p);const m=new w2(n,s,h);return Ih.set(o,m),m}function Rp(i=Wm){const e=Ih.get(i);if(!e&&i===Wm&&aT())return mT();if(!e)throw _s.create("no-app",{appName:i});return e}function ii(i,e,n){var s;let o=(s=_2[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(m.join(" "));return}Bi(new fi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="firebase-heartbeat-database",S2=1,mu="firebase-heartbeat-store";let Om=null;function pT(){return Om||(Om=fT(b2,S2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(i=>{throw _s.create("idb-open",{originalErrorMessage:i.message})})),Om}async function A2(i){try{const n=(await pT()).transaction(mu),s=await n.objectStore(mu).get(gT(i));return await n.done,s}catch(e){if(e instanceof gi)br.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(n.message)}}}async function c0(i,e){try{const s=(await pT()).transaction(mu,"readwrite");await s.objectStore(mu).put(e,gT(i)),await s.done}catch(n){if(n instanceof gi)br.warn(n.message);else{const s=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});br.warn(s.message)}}}function gT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=1024,I2=30;class C2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=h0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>I2){const h=D2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){br.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=h0(),{heartbeatsToSend:s,unsentEntries:o}=x2(this._heartbeatsCache.heartbeats),u=Rh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return br.warn(n),""}}}function h0(){return new Date().toISOString().substring(0,10)}function x2(i,e=R2){const n=[];let s=i.slice();for(const o of i){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),d0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),d0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class N2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uT()?cT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return c0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function d0(i){return Rh(JSON.stringify({version:2,heartbeats:i})).length}function D2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(i){Bi(new fi("platform-logger",e=>new F1(e),"PRIVATE")),Bi(new fi("heartbeat",e=>new C2(e),"PRIVATE")),ii(Ym,l0,i),ii(Ym,l0,"esm2017"),ii("fire-js","")}O2("");var M2="firebase",V2="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii(M2,V2,"app");var f0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,yT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,S){function R(){}R.prototype=S.prototype,U.D=S.prototype,U.prototype=new R,U.prototype.constructor=U,U.C=function(D,x,k){for(var C=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)C[Ie-2]=arguments[Ie];return S.prototype[x].apply(D,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(U,S,R){R||(R=0);var D=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)D[x]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(x=0;16>x;++x)D[x]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=U.g[0],R=U.g[1],x=U.g[2];var k=U.g[3],C=S+(k^R&(x^k))+D[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+D[1]+3905402710&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+D[2]+606105819&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+D[3]+3250441966&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+D[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+D[5]+1200080426&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+D[6]+2821735955&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+D[7]+4249261313&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+D[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+D[9]+2336552879&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+D[10]+4294925233&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+D[11]+2304563134&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+D[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+D[13]+4254626195&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+D[14]+2792965006&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+D[15]+1236535329&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(x^k&(R^x))+D[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+D[6]+3225465664&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+D[11]+643717713&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+D[0]+3921069994&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+D[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+D[10]+38016083&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+D[15]+3634488961&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+D[4]+3889429448&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+D[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+D[14]+3275163606&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+D[3]+4107603335&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+D[8]+1163531501&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+D[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+D[2]+4243563512&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+D[7]+1735328473&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+D[12]+2368359562&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(R^x^k)+D[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+D[8]+2272392833&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+D[11]+1839030562&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+D[14]+4259657740&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+D[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+D[4]+1272893353&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+D[7]+4139469664&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+D[10]+3200236656&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+D[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+D[0]+3936430074&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+D[3]+3572445317&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+D[6]+76029189&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+D[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+D[12]+3873151461&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+D[15]+530742520&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+D[2]+3299628645&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(x^(R|~k))+D[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+D[7]+1126891415&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+D[14]+2878612391&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+D[5]+4237533241&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+D[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+D[3]+2399980690&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+D[10]+4293915773&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+D[1]+2240044497&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+D[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+D[15]+4264355552&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+D[6]+2734768916&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+D[13]+1309151649&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+D[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+D[11]+3174756917&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+D[2]+718787259&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+D[9]+3951481745&4294967295,U.g[0]=U.g[0]+S&4294967295,U.g[1]=U.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,U.g[2]=U.g[2]+x&4294967295,U.g[3]=U.g[3]+k&4294967295}s.prototype.u=function(U,S){S===void 0&&(S=U.length);for(var R=S-this.blockSize,D=this.B,x=this.h,k=0;k<S;){if(x==0)for(;k<=R;)o(this,U,k),k+=this.blockSize;if(typeof U=="string"){for(;k<S;)if(D[x++]=U.charCodeAt(k++),x==this.blockSize){o(this,D),x=0;break}}else for(;k<S;)if(D[x++]=U[k++],x==this.blockSize){o(this,D),x=0;break}}this.h=x,this.o+=S},s.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var S=1;S<U.length-8;++S)U[S]=0;var R=8*this.o;for(S=U.length-8;S<U.length;++S)U[S]=R&255,R/=256;for(this.u(U),U=Array(16),S=R=0;4>S;++S)for(var D=0;32>D;D+=8)U[R++]=this.g[S]>>>D&255;return U};function u(U,S){var R=m;return Object.prototype.hasOwnProperty.call(R,U)?R[U]:R[U]=S(U)}function h(U,S){this.h=S;for(var R=[],D=!0,x=U.length-1;0<=x;x--){var k=U[x]|0;D&&k==S||(R[x]=k,D=!1)}this.g=R}var m={};function p(U){return-128<=U&&128>U?u(U,function(S){return new h([S|0],0>S?-1:0)}):new h([U|0],0>U?-1:0)}function g(U){if(isNaN(U)||!isFinite(U))return b;if(0>U)return H(g(-U));for(var S=[],R=1,D=0;U>=R;D++)S[D]=U/R|0,R*=4294967296;return new h(S,0)}function E(U,S){if(U.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(U.charAt(0)=="-")return H(E(U.substring(1),S));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(S,8)),D=b,x=0;x<U.length;x+=8){var k=Math.min(8,U.length-x),C=parseInt(U.substring(x,x+k),S);8>k?(k=g(Math.pow(S,k)),D=D.j(k).add(g(C))):(D=D.j(R),D=D.add(g(C)))}return D}var b=p(0),I=p(1),O=p(16777216);i=h.prototype,i.m=function(){if(Q(this))return-H(this).m();for(var U=0,S=1,R=0;R<this.g.length;R++){var D=this.i(R);U+=(0<=D?D:4294967296+D)*S,S*=4294967296}return U},i.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(M(this))return"0";if(Q(this))return"-"+H(this).toString(U);for(var S=g(Math.pow(U,6)),R=this,D="";;){var x=_e(R,S).g;R=Y(R,x.j(S));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(U);if(R=x,M(R))return k+D;for(;6>k.length;)k="0"+k;D=k+D}},i.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function M(U){if(U.h!=0)return!1;for(var S=0;S<U.g.length;S++)if(U.g[S]!=0)return!1;return!0}function Q(U){return U.h==-1}i.l=function(U){return U=Y(this,U),Q(U)?-1:M(U)?0:1};function H(U){for(var S=U.g.length,R=[],D=0;D<S;D++)R[D]=~U.g[D];return new h(R,~U.h).add(I)}i.abs=function(){return Q(this)?H(this):this},i.add=function(U){for(var S=Math.max(this.g.length,U.g.length),R=[],D=0,x=0;x<=S;x++){var k=D+(this.i(x)&65535)+(U.i(x)&65535),C=(k>>>16)+(this.i(x)>>>16)+(U.i(x)>>>16);D=C>>>16,k&=65535,C&=65535,R[x]=C<<16|k}return new h(R,R[R.length-1]&-2147483648?-1:0)};function Y(U,S){return U.add(H(S))}i.j=function(U){if(M(this)||M(U))return b;if(Q(this))return Q(U)?H(this).j(H(U)):H(H(this).j(U));if(Q(U))return H(this.j(H(U)));if(0>this.l(O)&&0>U.l(O))return g(this.m()*U.m());for(var S=this.g.length+U.g.length,R=[],D=0;D<2*S;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(var x=0;x<U.g.length;x++){var k=this.i(D)>>>16,C=this.i(D)&65535,Ie=U.i(x)>>>16,ke=U.i(x)&65535;R[2*D+2*x]+=C*ke,ae(R,2*D+2*x),R[2*D+2*x+1]+=k*ke,ae(R,2*D+2*x+1),R[2*D+2*x+1]+=C*Ie,ae(R,2*D+2*x+1),R[2*D+2*x+2]+=k*Ie,ae(R,2*D+2*x+2)}for(D=0;D<S;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=S;D<2*S;D++)R[D]=0;return new h(R,0)};function ae(U,S){for(;(U[S]&65535)!=U[S];)U[S+1]+=U[S]>>>16,U[S]&=65535,S++}function J(U,S){this.g=U,this.h=S}function _e(U,S){if(M(S))throw Error("division by zero");if(M(U))return new J(b,b);if(Q(U))return S=_e(H(U),S),new J(H(S.g),H(S.h));if(Q(S))return S=_e(U,H(S)),new J(H(S.g),S.h);if(30<U.g.length){if(Q(U)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,D=S;0>=D.l(U);)R=fe(R),D=fe(D);var x=be(R,1),k=be(D,1);for(D=be(D,2),R=be(R,2);!M(D);){var C=k.add(D);0>=C.l(U)&&(x=x.add(R),k=C),D=be(D,1),R=be(R,1)}return S=Y(U,x.j(S)),new J(x,S)}for(x=b;0<=U.l(S);){for(R=Math.max(1,Math.floor(U.m()/S.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),k=g(R),C=k.j(S);Q(C)||0<C.l(U);)R-=D,k=g(R),C=k.j(S);M(k)&&(k=I),x=x.add(k),U=Y(U,C)}return new J(x,U)}i.A=function(U){return _e(this,U).h},i.and=function(U){for(var S=Math.max(this.g.length,U.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)&U.i(D);return new h(R,this.h&U.h)},i.or=function(U){for(var S=Math.max(this.g.length,U.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)|U.i(D);return new h(R,this.h|U.h)},i.xor=function(U){for(var S=Math.max(this.g.length,U.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)^U.i(D);return new h(R,this.h^U.h)};function fe(U){for(var S=U.g.length+1,R=[],D=0;D<S;D++)R[D]=U.i(D)<<1|U.i(D-1)>>>31;return new h(R,U.h)}function be(U,S){var R=S>>5;S%=32;for(var D=U.g.length-R,x=[],k=0;k<D;k++)x[k]=0<S?U.i(k+R)>>>S|U.i(k+R+1)<<32-S:U.i(k+R);return new h(x,U.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,yT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=E,Es=h}).apply(typeof f0<"u"?f0:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,tu,_T,mh,Zm,ET,TT,wT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in v))break e;v=v[B]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,A=!1,B={next:function(){if(!A&&v<c.length){var K=v++;return{value:y(K,c[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,v){return c.call.apply(c.bind,arguments)}function b(c,y,v){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,A),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function I(c,y,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:b,I.apply(null,arguments)}function O(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(A,B,K){for(var ce=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ce[Ke-2]=arguments[Ke];return y.prototype[B].apply(A,ce)}}function Q(c){const y=c.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function H(c,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(p(A)){const B=c.length||0,K=A.length||0;c.length=B+K;for(let ce=0;ce<K;ce++)c[B+ce]=A[ce]}else c.push(A)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ae(c){return/^[\s\xa0]*$/.test(c)}function J(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var fe=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function be(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function U(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function S(c){const y={};for(const v in c)y[v]=c[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,y){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)c[v]=A[v];for(let K=0;K<R.length;K++)v=R[K],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function x(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function k(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Be;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,v){const A=ke.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ke=new Y(()=>new W,c=>c.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ye=!1,Be=new Ie,P=()=>{const c=m.Promise.resolve(void 0);oe=()=>{c.then(re)}};var re=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){k(v)}var y=ke;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ye=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function Ve(c,y){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(fe){e:{try{_e(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ae[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ve.aa.h.call(this)}}M(Ve,se);var Ae={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),nt=0;function xn(c,y,v,A,B){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=B,this.key=++nt,this.da=this.fa=!1}function zn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Bn(c){this.src=c,this.g={},this.h=0}Bn.prototype.add=function(c,y,v,A,B){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ce=Gi(c,y,A,B);return-1<ce?(y=c[ce],v||(y.fa=!1)):(y=new xn(y,this.src,K,!!A,B),y.fa=v,c.push(y)),y};function vi(c,y){var v=y.type;if(v in c.g){var A=c.g[v],B=Array.prototype.indexOf.call(A,y,void 0),K;(K=0<=B)&&Array.prototype.splice.call(A,B,1),K&&(zn(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Gi(c,y,v,A){for(var B=0;B<c.length;++B){var K=c[B];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==A)return B}return-1}var $i="closure_lm_"+(1e6*Math.random()|0),Mr={};function Ds(c,y,v,A,B){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Ds(c,y[K],v,A,B);return null}return v=Na(v),c&&c[Ct]?c.K(y,v,g(A)?!!A.capture:!1,B):vn(c,y,v,!1,A,B)}function vn(c,y,v,A,B,K){if(!y)throw Error("Invalid event type");var ce=g(B)?!!B.capture:!!B,Ke=kr(c);if(Ke||(c[$i]=Ke=new Bn(c)),v=Ke.add(y,v,A,ce,K),v.proxy)return v;if(A=Os(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)Te||(B=ce),B===void 0&&(B=!1),c.addEventListener(y.toString(),A,B);else if(c.attachEvent)c.attachEvent(Ki(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Os(){function c(v){return y.call(c.src,c.listener,v)}const y=Yo;return c}function Ms(c,y,v,A,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)Ms(c,y[K],v,A,B);else A=g(A)?!!A.capture:!!A,v=Na(v),c&&c[Ct]?(c=c.i,y=String(y).toString(),y in c.g&&(K=c.g[y],v=Gi(K,v,A,B),-1<v&&(zn(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete c.g[y],c.h--)))):c&&(c=kr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Gi(y,v,A,B)),(v=-1<c?y[c]:null)&&Vr(v))}function Vr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ct])vi(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent(Ki(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=kr(y))?(vi(v,c),v.h==0&&(v.src=null,y[$i]=null)):zn(c)}}}function Ki(c){return c in Mr?Mr[c]:Mr[c]="on"+c}function Yo(c,y){if(c.da)c=!0;else{y=new Ve(y,this);var v=c.listener,A=c.ha||c.src;c.fa&&Vr(c),c=v.call(A,y)}return c}function kr(c){return c=c[$i],c instanceof Bn?c:null}var Vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Na(c){return typeof c=="function"?c:(c[Vs]||(c[Vs]=function(y){return c.handleEvent(y)}),c[Vs])}function mt(){he.call(this),this.i=new Bn(this),this.M=this,this.F=null}M(mt,he),mt.prototype[Ct]=!0,mt.prototype.removeEventListener=function(c,y,v,A){Ms(this,c,y,v,A)};function $e(c,y){var v,A=c.F;if(A)for(v=[];A;A=A.F)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new se(y,c);else if(y instanceof se)y.target=y.target||c;else{var B=y;y=new se(A,c),D(y,B)}if(B=!0,v)for(var K=v.length-1;0<=K;K--){var ce=y.g=v[K];B=hn(ce,A,!0,y)&&B}if(ce=y.g=c,B=hn(ce,A,!0,y)&&B,B=hn(ce,A,!1,y)&&B,v)for(K=0;K<v.length;K++)ce=y.g=v[K],B=hn(ce,A,!1,y)&&B}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],A=0;A<v.length;A++)zn(v[A]);delete c.g[y],c.h--}}this.F=null},mt.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},mt.prototype.L=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function hn(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,K=0;K<y.length;++K){var ce=y[K];if(ce&&!ce.da&&ce.capture==v){var Ke=ce.listener,Vt=ce.ha||ce.src;ce.fa&&vi(c.i,ce),B=Ke.call(Vt,A)!==!1&&B}}return B&&!A.defaultPrevented}function Bt(c,y,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Da(c){c.g=Bt(()=>{c.g=null,c.i&&(c.i=!1,Da(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Oa extends he{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Da(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(c){he.call(this),this.h=c,this.g={}}M(Qi,he);var _i=[];function Ei(c){be(c.g,function(y,v){this.g.hasOwnProperty(v)&&Vr(y)},c),c.g={}}Qi.prototype.N=function(){Qi.aa.N.call(this),Ei(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _n=m.JSON.stringify,Pr=m.JSON.parse,Yi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Lr(){}Lr.prototype.h=null;function Ur(c){return c.h||(c.h=c.i())}function Ma(){}var qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ai(){se.call(this,"d")}M(ai,se);function ks(){se.call(this,"c")}M(ks,se);var Hn={},L=null;function ie(){return L=L||new mt}Hn.La="serverreachability";function ue(c){se.call(this,Hn.La,c)}M(ue,se);function le(c){const y=ie();$e(y,new ue(y))}Hn.STAT_EVENT="statevent";function me(c,y){se.call(this,Hn.STAT_EVENT,c),this.stat=y}M(me,se);function de(c){const y=ie();$e(y,new me(y,c))}Hn.Ma="timingevent";function De(c,y){se.call(this,Hn.Ma,c),this.size=y}M(De,se);function Je(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Xe(){this.g=!0}Xe.prototype.xa=function(){this.g=!1};function Ze(c,y,v,A,B,K){c.info(function(){if(c.g)if(K)for(var ce="",Ke=K.split("&"),Vt=0;Vt<Ke.length;Vt++){var Qe=Ke[Vt].split("=");if(1<Qe.length){var Ht=Qe[0];Qe=Qe[1];var kt=Ht.split("_");ce=2<=kt.length&&kt[1]=="type"?ce+(Ht+"="+Qe+"&"):ce+(Ht+"=redacted&")}}else ce=null;else ce=K;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+v+`
`+ce})}function Fn(c,y,v,A,B,K,ce){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+v+`
`+K+" "+ce})}function dn(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ti(c,v)+(A?" "+A:"")})}function Ps(c,y){c.info(function(){return"TIMEOUT: "+y})}Xe.prototype.info=function(){};function Ti(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var A=v[c];if(!(2>A.length)){var B=A[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ce=1;ce<B.length;ce++)B[ce]=""}}}}return _n(v)}catch{return y}}var lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},En={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},it;function wi(){}M(wi,Lr),wi.prototype.g=function(){return new XMLHttpRequest},wi.prototype.i=function(){return{}},it=new wi;function fn(c,y,v,A){this.j=c,this.i=y,this.l=v,this.R=A||1,this.U=new Qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Wo={},Va={};function oi(c,y,v){c.L=1,c.v=Bs(Nn(y)),c.m=v,c.P=!0,Wi(c,null)}function Wi(c,y){c.F=Date.now(),Ls(c),c.A=Nn(c.v);var v=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),nl(v.i,"t",A),c.C=0,v=c.j.J,c.h=new St,c.g=nc(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Oa(I(c.Y,c,c.g),c.O)),y=c.U,v=c.g,A=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(_i[0]=B.toString()),B=_i);for(var K=0;K<B.length;K++){var ce=Ds(v,B[K],A||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),le(),Ze(c.i,c.u,c.A,c.l,c.R,c.m)}fn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Qn(c)==3?y.j():this.Y(c)},fn.prototype.Y=function(c){try{if(c==this.g)e:{const kt=Qn(this.g);var y=this.g.Ba();const rr=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Qu(this.g)))){this.J||kt!=4||y==7||(y==8||0>=rr?le(3):le(2)),jr(this);var v=this.g.Z();this.X=v;t:if(Bu(this)){var A=Qu(this.g);c="";var B=A.length,K=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),bi(this);var ce="";break t}this.h.i=new m.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(K&&y==B-1)});A.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,Fn(this.i,this.u,this.A,this.l,this.R,kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,Vt=this.g;if((Ke=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(Ke)){var Qe=Ke;break t}}Qe=null}if(v=Qe)dn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Us(this,v);else{this.o=!1,this.s=3,de(12),Qt(this),bi(this);break e}}if(this.P){v=!0;let Yt;for(;!this.J&&this.C<ce.length;)if(Yt=qu(this,ce),Yt==Va){kt==4&&(this.s=4,de(14),v=!1),dn(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Wo){this.s=4,de(15),dn(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else dn(this.i,this.l,Yt,null),Us(this,Yt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ce.length!=0||this.h.h||(this.s=1,de(16),v=!1),this.o=this.o&&v,!v)dn(this.i,this.l,ce,"[Invalid Chunked Response]"),Qt(this),bi(this);else if(0<ce.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Ys(Ht),Ht.M=!0,de(11))}}else dn(this.i,this.l,ce,null),Us(this,ce);kt==4&&Qt(this),this.o&&!this.J&&(kt==4?Ju(this.j,this):(this.o=!1,Ls(this)))}else xd(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,de(12)):(this.s=0,de(13)),Qt(this),bi(this)}}}catch{}finally{}};function Bu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qu(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?Va:(v=Number(y.substring(v,A)),isNaN(v)?Wo:(A+=1,A+v>y.length?Va:(y=y.slice(A,A+v),c.C=A+v,y)))}fn.prototype.cancel=function(){this.J=!0,Qt(this)};function Ls(c){c.S=Date.now()+c.I,Hu(c,c.I)}function Hu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Je(I(c.ba,c),y)}function jr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}fn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ps(this.i,this.A),this.L!=2&&(le(),de(17)),Qt(this),this.s=2,bi(this)):Hu(this,this.S-c)};function bi(c){c.j.G==0||c.J||Ju(c.j,c)}function Qt(c){jr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Ei(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Us(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Xo(v.h,c))){if(!c.K&&Xo(v.h,c)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)$a(v),Fa(v);else break e;ol(v),de(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=Je(I(v.Za,v),6e3));if(1>=Pa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ir(v,11)}else if((c.K||v.g==c)&&$a(v),!ae(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Qe=B[y];if(v.T=Qe[0],Qe=Qe[1],v.G==2)if(Qe[0]=="c"){v.K=Qe[1],v.ia=Qe[2];const Ht=Qe[3];Ht!=null&&(v.la=Ht,v.j.info("VER="+v.la));const kt=Qe[4];kt!=null&&(v.Aa=kt,v.j.info("SVER="+v.Aa));const rr=Qe[5];rr!=null&&typeof rr=="number"&&0<rr&&(A=1.5*rr,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Yt=c.g;if(Yt){const Ni=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ni){var K=A.h;K.g||Ni.indexOf("spdy")==-1&&Ni.indexOf("quic")==-1&&Ni.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(La(K,K.h),K.h=null))}if(A.D){const ul=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(A.ya=ul,ut(A.I,A.D,ul))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ce=c;if(A.qa=tc(A,A.J?A.ia:null,A.W),ce.K){mn(A.h,ce);var Ke=ce,Vt=A.L;Vt&&(Ke.I=Vt),Ke.B&&(jr(Ke),Ls(Ke)),A.g=ce}else Xu(A);0<v.i.length&&Ga(v)}else Qe[0]!="stop"&&Qe[0]!="close"||ir(v,7);else v.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?ir(v,7):sl(v):Qe[0]!="noop"&&v.l&&v.l.ta(Qe),v.v=0)}}le(4)}catch{}}var Fu=class{constructor(c,y){this.g=c,this.map=y}};function Xi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ka(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Pa(c){return c.h?1:c.g?c.g.size:0}function Xo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function La(c,y){c.g?c.g.add(y):c.h=y}function mn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Xi.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Q(c.i)}function Ad(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,A=0;A<v;A++)y.push(c[A]);return y}y=[],v=0;for(A in c)y[v++]=c[A];return y}function Ua(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const A in c)y[v++]=A;return y}}}function Jo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Ua(c),A=Ad(c),B=A.length,K=0;K<B;K++)y.call(void 0,A[K],v&&v[K],c)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var A=c[v].indexOf("="),B=null;if(0<=A){var K=c[v].substring(0,A);B=c[v].substring(A+1)}else K=c[v];y(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function xt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof xt){this.h=c.h,zs(this,c.j),this.o=c.o,this.g=c.g,zr(this,c.s),this.l=c.l;var y=c.i,v=new Ji;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Zi(this,v),this.m=c.m}else c&&(y=String(c).match(js))?(this.h=!1,zs(this,y[1]||"",!0),this.o=Gn(y[2]||""),this.g=Gn(y[3]||"",!0),zr(this,y[4]),this.l=Gn(y[5]||"",!0),Zi(this,y[6]||"",!0),this.m=Gn(y[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}xt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(qs(y,el,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(qs(y,el,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(qs(v,v.charAt(0)=="/"?Id:tl,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",qs(v,ja)),c.join("")};function Nn(c){return new xt(c)}function zs(c,y,v){c.j=v?Gn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function zr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Zi(c,y,v){y instanceof Ji?(c.i=y,$u(c.i,c.h)):(v||(y=qs(y,Cd)),c.i=new Ji(y,c.h))}function ut(c,y,v){c.i.set(y,v)}function Bs(c){return ut(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Gn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qs(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Gu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Gu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,Id=/[#\?]/g,Cd=/[#\?@]/g,ja=/#/g;function Ji(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function $n(c){c.g||(c.g=new Map,c.h=0,c.i&&Rd(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Ji.prototype,i.add=function(c,y){$n(this),this.i=null,c=Si(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function er(c,y){$n(c),y=Si(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function tr(c,y){return $n(c),y=Si(c,y),c.g.has(y)}i.forEach=function(c,y){$n(this),this.g.forEach(function(v,A){v.forEach(function(B){c.call(y,B,A,this)},this)},this)},i.na=function(){$n(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const B=c[A];for(let K=0;K<B.length;K++)v.push(y[A])}return v},i.V=function(c){$n(this);let y=[];if(typeof c=="string")tr(this,c)&&(y=y.concat(this.g.get(Si(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return $n(this),this.i=null,c=Si(this,c),tr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function nl(c,y,v){er(c,y),0<v.length&&(c.i=null,c.g.set(Si(c,y),Q(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const K=encodeURIComponent(String(A)),ce=this.V(A);for(A=0;A<ce.length;A++){var B=K;ce[A]!==""&&(B+="="+encodeURIComponent(String(ce[A]))),c.push(B)}}return this.i=c.join("&")};function Si(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function $u(c,y){y&&!c.j&&($n(c),c.i=null,c.g.forEach(function(v,A){var B=A.toLowerCase();A!=B&&(er(this,A),nl(this,B,v))},c)),c.j=y}function Hs(c,y){const v=new Xe;if(m.Image){const A=new Image;A.onload=O(Kn,v,"TestLoadImage: loaded",!0,y,A),A.onerror=O(Kn,v,"TestLoadImage: error",!1,y,A),A.onabort=O(Kn,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=O(Kn,v,"TestLoadImage: timeout",!1,y,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function li(c,y){const v=new Xe,A=new AbortController,B=setTimeout(()=>{A.abort(),Kn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(K=>{clearTimeout(B),K.ok?Kn(v,"TestPingServer: ok",!0,y):Kn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Kn(v,"TestPingServer: error",!1,y)})}function Kn(c,y,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function Fs(){this.g=new Yi}function Ai(c,y,v){const A=v||"";try{Jo(c,function(B,K){let ce=B;g(B)&&(ce=_n(B)),y.push(A+K+"="+encodeURIComponent(ce))})}catch(B){throw y.push(A+"type="+encodeURIComponent("_badmap")),B}}function Br(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Br,Lr),Br.prototype.g=function(){return new nr(this.l,this.j)},Br.prototype.i=function(c){return function(){return c}}({});function nr(c,y){mt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(nr,mt),i=nr.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Ii(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ii(this)),this.g&&(this.readyState=3,Ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;il(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function il(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ri(this):Ii(this),this.readyState==3&&il(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ri(this))},i.Qa=function(c){this.g&&(this.response=c,Ri(this))},i.ga=function(){this.g&&Ri(this)};function Ri(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ii(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function rl(c){let y="";return be(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function qt(c,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=rl(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):ut(c,y,v))}function rt(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(rt,mt);var za=/^https?$/i,Gs=["POST","PUT"];i=rt.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():it.g(),this.v=this.o?Ur(this.o):Ur(it),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){Ku(this,K);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Gs,y,void 0))||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ce]of v)this.g.setRequestHeader(K,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$s(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Ku(this,K)}};function Ku(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Ba(c),Ci(c)}function Ba(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$e(this,"complete"),$e(this,"abort"),Ci(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),rt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},i.bb=function(){qa(this)};function qa(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Qn(c)!=4||c.Z()!=2)){if(c.u&&Qn(c)==4)Bt(c.Ea,0,c);else if($e(c,"readystatechange"),Qn(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=ce===0){var B=String(c.D).match(js)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),A=!za.test(B?B.toLowerCase():"")}v=A}if(v)$e(c,"complete"),$e(c,"success");else{c.m=6;try{var K=2<Qn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Ba(c)}}finally{Ci(c)}}}}function Ci(c,y){if(c.g){$s(c);const v=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||$e(c,"ready");try{v.onreadystatechange=A}catch{}}}function $s(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Qn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Pr(y)}};function Qu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(c){const y={};c=(c.g&&2<=Qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ae(c[A]))continue;var v=x(c[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[B]||[];y[B]=K,K.push(v)}U(y,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Ha(c){this.Aa=0,this.i=[],this.j=new Xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,c),this.cb=Ks("retryDelaySeedMs",1e4,c),this.Wa=Ks("forwardChannelMaxRetries",2,c),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(c&&c.concurrentRequestLimit),this.Da=new Fs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ha.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,A){de(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=tc(this,null,this.W),Ga(this)};function sl(c){if(Yu(c),c.G==3){var y=c.U++,v=Nn(c.I);if(ut(v,"SID",c.K),ut(v,"RID",y),ut(v,"TYPE","terminate"),Qs(c,v),y=new fn(c,c.j,y),y.L=2,y.v=Bs(Nn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=nc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ls(y)}ec(c)}function Fa(c){c.g&&(Ys(c),c.g.cancel(),c.g=null)}function Yu(c){Fa(c),c.u&&(m.clearTimeout(c.u),c.u=null),$a(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Ga(c){if(!ka(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||P(),ye||(oe(),ye=!0),Be.add(y,c),c.B=0}}function Nd(c,y){return Pa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Je(I(c.Ga,c,y),ll(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new fn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=S(K),D(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Wu(this,B,y),v=Nn(this.I),ut(v,"RID",c),ut(v,"CVER",22),this.D&&ut(v,"X-HTTP-Session-Id",this.D),Qs(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(rl(K)))+"&"+y:this.m&&qt(v,this.m,K)),La(this.h,B),this.Ua&&ut(v,"TYPE","init"),this.P?(ut(v,"$req",y),ut(v,"SID","null"),B.T=!0,oi(B,v,null)):oi(B,v,y),this.G=2}}else this.G==3&&(c?al(this,c):this.i.length==0||ka(this.h)||al(this))};function al(c,y){var v;y?v=y.l:v=c.U++;const A=Nn(c.I);ut(A,"SID",c.K),ut(A,"RID",v),ut(A,"AID",c.T),Qs(c,A),c.m&&c.o&&qt(A,c.m,c.o),v=new fn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Wu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),La(c.h,v),oi(v,A,y)}function Qs(c,y){c.H&&be(c.H,function(v,A){ut(y,A,v)}),c.l&&Jo({},function(v,A){ut(y,A,v)})}function Wu(c,y,v){v=Math.min(c.i.length,v);var A=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let K=-1;for(;;){const ce=["count="+v];K==-1?0<v?(K=B[0].g,ce.push("ofs="+K)):K=0:ce.push("ofs="+K);let Ke=!0;for(let Vt=0;Vt<v;Vt++){let Qe=B[Vt].g;const Ht=B[Vt].map;if(Qe-=K,0>Qe)K=Math.max(0,B[Vt].g-100),Ke=!1;else try{Ai(Ht,ce,"req"+Qe+"_")}catch{A&&A(Ht)}}if(Ke){A=ce.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,A}function Xu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||P(),ye||(oe(),ye=!0),Be.add(y,c),c.v=0}}function ol(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Je(I(c.Fa,c),ll(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Je(I(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,de(10),Fa(this),Zu(this))};function Ys(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Zu(c){c.g=new fn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Nn(c.qa);ut(y,"RID","rpc"),ut(y,"SID",c.K),ut(y,"AID",c.T),ut(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&ut(y,"TO",c.ja),ut(y,"TYPE","xmlhttp"),Qs(c,y),c.m&&c.o&&qt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Bs(Nn(y)),v.m=null,v.P=!0,Wi(v,c)}i.Za=function(){this.C!=null&&(this.C=null,Fa(this),ol(this),de(19))};function $a(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ju(c,y){var v=null;if(c.g==y){$a(c),Ys(c),c.g=null;var A=2}else if(Xo(c.h,y))v=y.D,mn(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;A=ie(),$e(A,new De(A,v)),Ga(c)}else Xu(c);else if(B=y.s,B==3||B==0&&0<y.X||!(A==1&&Nd(c,y)||A==2&&ol(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),B){case 1:ir(c,5);break;case 4:ir(c,10);break;case 3:ir(c,6);break;default:ir(c,2)}}}function ll(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function ir(c,y){if(c.j.info("Error code "+y),y==2){var v=I(c.fb,c),A=c.Xa;const B=!A;A=new xt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||zs(A,"https"),Bs(A),B?Hs(A.toString(),v):li(A.toString(),v)}else de(2);c.G=0,c.l&&c.l.sa(y),ec(c),Yu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function ec(c){if(c.G=0,c.ka=[],c.l){const y=Zo(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ka,y),H(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function tc(c,y,v){var A=v instanceof xt?Nn(v):new xt(v);if(A.g!="")y&&(A.g=y+"."+A.g),zr(A,A.s);else{var B=m.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var K=new xt(null);A&&zs(K,A),y&&(K.g=y),B&&zr(K,B),v&&(K.l=v),A=K}return v=c.D,y=c.ya,v&&y&&ut(A,v,y),ut(A,"VER",c.la),Qs(c,A),A}function nc(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new rt(new Br({eb:v})):new rt(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}i=ic.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ka(){}Ka.prototype.g=function(c,y){return new pn(c,y)};function pn(c,y){mt.call(this),this.g=new Ha(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!ae(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ae(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new xi(this)}M(pn,mt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){sl(this.g)},pn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=_n(c),c=v);y.i.push(new Fu(y.Ya++,c)),y.G==3&&Ga(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,pn.aa.N.call(this)};function rc(c){ai.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(rc,ai);function sc(){ks.call(this),this.status=1}M(sc,ks);function xi(c){this.g=c}M(xi,ic),xi.prototype.ua=function(){$e(this.g,"a")},xi.prototype.ta=function(c){$e(this.g,new rc(c))},xi.prototype.sa=function(c){$e(this.g,new sc)},xi.prototype.ra=function(){$e(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,wT=function(){return new Ka},TT=function(){return ie()},ET=Hn,Zm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,mh=lt,En.COMPLETE="complete",_T=En,Ma.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",mt.prototype.listen=mt.prototype.K,tu=Ma,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,vT=rt}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore",p0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Xh("@firebase/firestore");function So(){return ya.logLevel}function ge(i,...e){if(ya.logLevel<=Fe.DEBUG){const n=e.map(Ip);ya.debug(`Firestore (${Bo}): ${i}`,...n)}}function Sr(i,...e){if(ya.logLevel<=Fe.ERROR){const n=e.map(Ip);ya.error(`Firestore (${Bo}): ${i}`,...n)}}function Mo(i,...e){if(ya.logLevel<=Fe.WARN){const n=e.map(Ip);ya.warn(`Firestore (${Bo}): ${i}`,...n)}}function Ip(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(i="Unexpected state"){const e=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+i;throw Sr(e),new Error(e)}function st(i,e){i||Ne()}function Me(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(an.UNAUTHENTICATED))}shutdown(){}}class P2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class L2{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Er,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Er)}},0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string"),new bT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string"),new an(e)}}class U2{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class j2{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new U2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z2{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ni(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){st(this.o===void 0);const s=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new g0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(st(typeof n.token=="string"),this.R=n.token,new g0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=B2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ue(i,e){return i<e?-1:i>e?1:0}function Jm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ue(s,o);{const u=ST(),h=q2(u.encode(y0(i,n)),u.encode(y0(e,n)));return h!==0?h:Ue(s,o)}}n+=s>65535?2:1}return Ue(i.length,e.length)}function y0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function q2(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Ue(i[n],e[n]);return Ue(i.length,e.length)}function Vo(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-62135596800,_0=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*_0);return new jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<v0)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-v0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new jt(0,0))}static max(){return new Oe(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="__name__";class Pi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ne(),s===void 0?s=e.length-n:s>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Pi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=Pi.isNumericId(e),o=Pi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Pi.extractNumericId(e).compare(Pi.extractNumericId(n)):Jm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class gt extends Pi{construct(e,n,s){return new gt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new gt(n)}static emptyPath(){return new gt([])}}const H2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Pi{construct(e,n,s){return new en(e,n,s)}static isValidIdentifier(e){return H2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E0}static keyField(){return new en([E0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new pe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(gt.fromString(e))}static fromName(e){return new we(gt.fromString(e).popFirst(5))}static empty(){return new we(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new gt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function F2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new bs(o,we.empty(),e)}function G2(i){return new bs(i.readTime,i.key,pu)}class bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new bs(Oe.min(),we.empty(),pu)}static max(){return new bs(Oe.max(),we.empty(),pu)}}function $2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(i.documentKey,e.documentKey),n!==0?n:Ue(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(i){if(i.code!==ee.FAILED_PRECONDITION||i.message!==K2)throw i;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,s)=>{n(e)})}static reject(e){return new ne((n,s)=>{s(e)})}static waitFor(e){return new ne((n,s)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&n()},p=>s(p))}),h=!0,u===o&&n()})}static or(e){let n=ne.resolve(!1);for(const s of e)n=n.next(o=>o?ne.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ne((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{h[g]=E,++m,m===u&&s(h)},E=>o(E))}})}static doWhile(e,n){return new ne((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function Y2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Zh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=-1;function Jh(i){return i==null}function Ch(i){return i===0&&1/i==-1/0}function W2(i){return typeof i=="number"&&Number.isInteger(i)&&!Ch(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="";function X2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=T0(e)),e=Z2(i.get(n),e);return T0(e)}function Z2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case RT:n+="";break;default:n+=u}}return n}function T0(i){return i+RT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function xs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function IT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Jt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Un([])}unionWith(e){let n=new zt(en.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new CT("Invalid base64 string: "+u):u}}(e);return new tn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const J2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(i){if(st(!!i),typeof i=="string"){let e=0;const n=J2.exec(i);if(st(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(i.seconds),nanos:It(i.nanos)}}function It(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function As(i){return typeof i=="string"?tn.fromBase64String(i):tn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="server_timestamp",NT="__type__",DT="__previous_value__",OT="__local_write_time__";function xp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[NT])===null||n===void 0?void 0:n.stringValue)===xT}function ed(i){const e=i.mapValue.fields[DT];return xp(e)?ed(e):e}function gu(i){const e=Ss(i.mapValue.fields[OT].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,s,o,u,h,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const xh="(default)";class yu{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__type__",tR="__max__",lh={mapValue:{}},VT="__vector__",Nh="value";function Rs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xp(i)?4:iR(i)?9007199254740991:nR(i)?10:11:Ne()}function qi(i,e){if(i===e)return!0;const n=Rs(i);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return gu(i).isEqual(gu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Ss(o.timestampValue),m=Ss(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return As(o.bytesValue).isEqual(As(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return It(o.geoPointValue.latitude)===It(u.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return It(o.integerValue)===It(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=It(o.doubleValue),m=It(u.doubleValue);return h===m?Ch(h)===Ch(m):isNaN(h)&&isNaN(m)}return!1}(i,e);case 9:return Vo(i.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(w0(h)!==w0(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!qi(h[p],m[p])))return!1;return!0}(i,e);default:return Ne()}}function vu(i,e){return(i.values||[]).find(n=>qi(n,e))!==void 0}function ko(i,e){if(i===e)return 0;const n=Rs(i),s=Rs(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(i.booleanValue,e.booleanValue);case 2:return function(u,h){const m=It(u.integerValue||u.doubleValue),p=It(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return S0(i.timestampValue,e.timestampValue);case 4:return S0(gu(i),gu(e));case 5:return Jm(i.stringValue,e.stringValue);case 6:return function(u,h){const m=As(u),p=As(h);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),p=h.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=Ue(m[g],p[g]);if(E!==0)return E}return Ue(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const m=Ue(It(u.latitude),It(h.latitude));return m!==0?m:Ue(It(u.longitude),It(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return A0(i.arrayValue,e.arrayValue);case 10:return function(u,h){var m,p,g,E;const b=u.fields||{},I=h.fields||{},O=(m=b[Nh])===null||m===void 0?void 0:m.arrayValue,M=(p=I[Nh])===null||p===void 0?void 0:p.arrayValue,Q=Ue(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return Q!==0?Q:A0(O,M)}(i.mapValue,e.mapValue);case 11:return function(u,h){if(u===lh.mapValue&&h===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(h===lh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=h.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let b=0;b<p.length&&b<E.length;++b){const I=Jm(p[b],E[b]);if(I!==0)return I;const O=ko(m[p[b]],g[E[b]]);if(O!==0)return O}return Ue(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Ne()}}function S0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ue(i,e);const n=Ss(i),s=Ss(e),o=Ue(n.seconds,s.seconds);return o!==0?o:Ue(n.nanos,s.nanos)}function A0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=ko(n[o],s[o]);if(u)return u}return Ue(n.length,s.length)}function Po(i){return ep(i)}function ep(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Ss(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return As(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return we.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=ep(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${ep(n.fields[h])}`;return o+"}"}(i.mapValue):Ne()}function ph(i){switch(Rs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(i);return e?16+ph(e):16;case 5:return 2*i.stringValue.length;case 6:return As(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+ph(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return xs(s.fields,(u,h)=>{o+=u.length+ph(h)}),o}(i.mapValue);default:throw Ne()}}function R0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function tp(i){return!!i&&"integerValue"in i}function Np(i){return!!i&&"arrayValue"in i}function I0(i){return!!i&&"nullValue"in i}function C0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gh(i){return!!i&&"mapValue"in i}function nR(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[MT])===null||n===void 0?void 0:n.stringValue)===VT}function ou(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return xs(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ou(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ou(i.arrayValue.values[n]);return e}return Object.assign({},i)}function iR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===tR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(n)}setAll(e){let n=en.emptyPath(),s={},o=[];e.forEach((h,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}h?s[m.lastSegment()]=ou(h):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){xs(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new Rn(ou(this.value))}}function kT(i){const e=[];return xs(i.fields,(n,s)=>{const o=new en([n]);if(gh(s)){const u=kT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,s,o,u,h,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new on(e,0,Oe.min(),Oe.min(),Oe.min(),Rn.empty(),0)}static newFoundDocument(e,n,s,o){return new on(e,1,n,Oe.min(),s,o,0)}static newNoDocument(e,n){return new on(e,2,n,Oe.min(),Oe.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,Oe.min(),Oe.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function x0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=we.comparator(we.fromName(h.referenceValue),n.key):s=ko(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function N0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!qi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n="asc"){this.field=e,this.dir=n}}function rR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{}class Mt extends PT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new aR(e,n,s):n==="array-contains"?new uR(e,s):n==="in"?new cR(e,s):n==="not-in"?new hR(e,s):n==="array-contains-any"?new dR(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new oR(e,s):new lR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ko(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends PT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new mi(e,n)}matches(e){return LT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function LT(i){return i.op==="and"}function UT(i){return sR(i)&&LT(i)}function sR(i){for(const e of i.filters)if(e instanceof mi)return!1;return!0}function np(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+Po(i.value);if(UT(i))return i.filters.map(e=>np(e)).join(",");{const e=i.filters.map(n=>np(n)).join(",");return`${i.op}(${e})`}}function jT(i,e){return i instanceof Mt?function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&qi(s.value,o.value)}(i,e):i instanceof mi?function(s,o){return o instanceof mi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,m)=>u&&jT(h,o.filters[m]),!0):!1}(i,e):void Ne()}function zT(i){return i instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`}(i):i instanceof mi?function(n){return n.op.toString()+" {"+n.getFilters().map(zT).join(" ,")+"}"}(i):"Filter"}class aR extends Mt{constructor(e,n,s){super(e,n,s),this.key=we.fromName(s.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class oR extends Mt{constructor(e,n){super(e,"in",n),this.keys=BT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lR extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=BT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>we.fromName(s.referenceValue))}class uR extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Np(n)&&vu(n.arrayValue,this.value)}}class cR extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vu(this.value.arrayValue,n)}}class hR extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vu(this.value.arrayValue,n)}}class dR extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>vu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.le=null}}function D0(i,e=null,n=[],s=[],o=null,u=null,h=null){return new fR(i,e,n,s,o,u,h)}function Dp(i){const e=Me(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>np(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Po(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Po(s)).join(",")),e.le=n}return e.le}function Op(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!rR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!jT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!N0(i.startAt,e.startAt)&&N0(i.endAt,e.endAt)}function ip(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n=null,s=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function mR(i,e,n,s,o,u,h,m){return new Aa(i,e,n,s,o,u,h,m)}function td(i){return new Aa(i)}function O0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function qT(i){return i.collectionGroup!==null}function lu(i){const e=Me(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new zt(en.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new _u(u,s))}),n.has(en.keyField().canonicalString())||e.he.push(new _u(en.keyField(),s))}return e.he}function Li(i){const e=Me(i);return e.Pe||(e.Pe=pR(e,lu(i))),e.Pe}function pR(i,e){if(i.limitType==="F")return D0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new _u(o.field,u)});const n=i.endAt?new Dh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Dh(i.startAt.position,i.startAt.inclusive):null;return D0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function rp(i,e){const n=i.filters.concat([e]);return new Aa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function sp(i,e,n){return new Aa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function nd(i,e){return Op(Li(i),Li(e))&&i.limitType===e.limitType}function HT(i){return`${Dp(Li(i))}|lt:${i.limitType}`}function Ao(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>zT(o)).join(", ")}]`),Jh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Po(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Po(o)).join(",")),`Target(${s})`}(Li(i))}; limitType=${i.limitType})`}function id(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):we.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of lu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(h,m,p){const g=x0(h,m,p);return h.inclusive?g<=0:g<0}(s.startAt,lu(s),o)||s.endAt&&!function(h,m,p){const g=x0(h,m,p);return h.inclusive?g>=0:g>0}(s.endAt,lu(s),o))}(i,e)}function gR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function FT(i){return(e,n)=>{let s=!1;for(const o of lu(i)){const u=yR(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function yR(i,e,n){const s=i.field.isKeyField()?we.comparator(e.key,n.key):function(u,h,m){const p=h.data.field(u),g=m.data.field(u);return p!==null&&g!==null?ko(p,g):Ne()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new Et(we.comparator);function Ar(){return vR}const GT=new Et(we.comparator);function nu(...i){let e=GT;for(const n of i)e=e.insert(n.key,n);return e}function $T(i){let e=GT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ma(){return uu()}function KT(){return uu()}function uu(){return new Ra(i=>i.toString(),(i,e)=>i.isEqual(e))}const _R=new Et(we.comparator),ER=new zt(we.comparator);function Ge(...i){let e=ER;for(const n of i)e=e.add(n);return e}const TR=new zt(Ue);function wR(){return TR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function QT(i){return{integerValue:""+i}}function YT(i,e){return W2(e)?QT(e):Mp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function bR(i,e,n){return i instanceof Eu?function(o,u){const h={fields:{[NT]:{stringValue:xT},[OT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xp(u)&&(u=ed(u)),u&&(h.fields[DT]=u),{mapValue:h}}(n,e):i instanceof Tu?XT(i,e):i instanceof wu?ZT(i,e):function(o,u){const h=WT(o,u),m=M0(h)+M0(o.Ie);return tp(h)&&tp(o.Ie)?QT(m):Mp(o.serializer,m)}(i,e)}function SR(i,e,n){return i instanceof Tu?XT(i,e):i instanceof wu?ZT(i,e):n}function WT(i,e){return i instanceof bu?function(s){return tp(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Eu extends rd{}class Tu extends rd{constructor(e){super(),this.elements=e}}function XT(i,e){const n=JT(e);for(const s of i.elements)n.some(o=>qi(o,s))||n.push(s);return{arrayValue:{values:n}}}class wu extends rd{constructor(e){super(),this.elements=e}}function ZT(i,e){let n=JT(e);for(const s of i.elements)n=n.filter(o=>!qi(o,s));return{arrayValue:{values:n}}}class bu extends rd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function M0(i){return It(i.integerValue||i.doubleValue)}function JT(i){return Np(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n){this.field=e,this.transform=n}}function AR(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof Tu&&o instanceof Tu||s instanceof wu&&o instanceof wu?Vo(s.elements,o.elements,qi):s instanceof bu&&o instanceof bu?qi(s.Ie,o.Ie):s instanceof Eu&&o instanceof Eu}(i.transform,e.transform)}class RR{constructor(e,n){this.version=e,this.transformResults=n}}class ri{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class sd{}function tw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Vp(i.key,ri.none()):new Cu(i.key,i.data,ri.none());{const n=i.data,s=Rn.empty();let o=new zt(en.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new Ns(i.key,s,new Un(o.toArray()),ri.none())}}function IR(i,e,n){i instanceof Cu?function(o,u,h){const m=o.value.clone(),p=k0(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Ns?function(o,u,h){if(!yh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=k0(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(nw(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,n)}function cu(i,e,n,s){return i instanceof Cu?function(u,h,m,p){if(!yh(u.precondition,h))return m;const g=u.value.clone(),E=P0(u.fieldTransforms,p,h);return g.setAll(E),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof Ns?function(u,h,m,p){if(!yh(u.precondition,h))return m;const g=P0(u.fieldTransforms,p,h),E=h.data;return E.setAll(nw(u)),E.setAll(g),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(i,e,n,s):function(u,h,m){return yh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(i,e,n)}function CR(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=WT(s.transform,o||null);u!=null&&(n===null&&(n=Rn.empty()),n.set(s.field,u))}return n||null}function V0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Vo(s,o,(u,h)=>AR(u,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Cu extends sd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ns extends sd{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nw(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function k0(i,e,n){const s=new Map;st(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,SR(h,m,n[o]))}return s}function P0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,h=n.data.field(o.field);s.set(o.field,bR(u,h,e))}return s}class Vp extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xR extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&IR(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=KT();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const p=tw(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Oe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,s)=>V0(n,s))&&Vo(this.baseMutations,e.baseMutations,(n,s)=>V0(n,s))}}class kp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){st(e.mutations.length===s.length);let o=function(){return _R}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new kp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,We;function MR(i){switch(i){case ee.OK:return Ne();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ne()}}function iw(i){if(i===void 0)return Sr("GRPC error has no .code"),ee.UNKNOWN;switch(i){case Ot.OK:return ee.OK;case Ot.CANCELLED:return ee.CANCELLED;case Ot.UNKNOWN:return ee.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ee.INTERNAL;case Ot.UNAVAILABLE:return ee.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ee.NOT_FOUND;case Ot.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ot.ABORTED:return ee.ABORTED;case Ot.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ot.DATA_LOSS:return ee.DATA_LOSS;default:return Ne()}}(We=Ot||(Ot={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Es([4294967295,4294967295],0);function L0(i){const e=ST().encode(i),n=new yT;return n.update(e),new Uint8Array(n.digest())}function U0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Es([n,s],0),new Es([o,u],0)]}class Pp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new iu(`Invalid padding: ${n}`);if(s<0)throw new iu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new iu(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Es.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(Es.fromNumber(s)));return o.compare(VR)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=L0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);if(!this.Re(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Pp(u,o,n);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.Ee===0)return;const n=L0(e),[s,o]=U0(n);for(let u=0;u<this.hashCount;u++){const h=this.Ae(s,o,u);this.Ve(h)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ad(Oe.min(),o,new Et(Ue),Ar(),Ge())}}class xu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new xu(s,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class rw{constructor(e,n){this.targetId=e,this.ge=n}}class sw{constructor(e,n,s=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class j0{constructor(){this.pe=0,this.ye=z0(),this.we=tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ge(),n=Ge(),s=Ge();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ne()}}),new xu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=z0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,st(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class kR{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ar(),this.$e=uh(),this.Ue=uh(),this.Ke=new Et(Ue)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(ip(u))if(s===0){const h=new we(u.path);this.ze(n,h,on.newNoDocument(h,Oe.min()))}else st(s===1);else{const h=this.et(n);if(h!==s){const m=this.tt(e),p=m?this.nt(m,e,h):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=As(s).toUint8Array()}catch(p){if(p instanceof CT)return Mo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Pp(h,o,u)}catch(p){return Mo(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const h=this.ke.it(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,h)=>{const m=this.Xe(h);if(m){if(u.current&&ip(m.target)){const p=new we(m.target.path);this._t(p).has(h)||this.ut(h,p)||this.ze(h,p,on.newNoDocument(p,e))}u.ve&&(n.set(h,u.Fe()),u.Me())}});let s=Ge();this.Ue.forEach((u,h)=>{let m=!0;h.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,h)=>h.setReadTime(e));const o=new ad(e,n,this.Ke,this.Qe,s);return this.Qe=Ar(),this.$e=uh(),this.Ue=uh(),this.Ke=new Et(Ue),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new j0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new zt(Ue),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new zt(Ue),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new j0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function uh(){return new Et(we.comparator)}function z0(){return new Et(we.comparator)}const PR={asc:"ASCENDING",desc:"DESCENDING"},LR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class jR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ap(i,e){return i.useProto3Json||Jh(e)?e:{value:e}}function Oh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function zR(i,e){return Oh(i,e.toTimestamp())}function Ui(i){return st(!!i),Oe.fromTimestamp(function(n){const s=Ss(n);return new jt(s.seconds,s.nanos)}(i))}function Lp(i,e){return op(i,e).canonicalString()}function op(i,e){const n=function(o){return new gt(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function ow(i){const e=gt.fromString(i);return st(dw(e)),e}function lp(i,e){return Lp(i.databaseId,e.path)}function Mm(i,e){const n=ow(e);if(n.get(1)!==i.databaseId.projectId)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new pe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new we(uw(n))}function lw(i,e){return Lp(i.databaseId,e)}function BR(i){const e=ow(i);return e.length===4?gt.emptyPath():uw(e)}function up(i){return new gt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function uw(i){return st(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function B0(i,e,n){return{name:lp(i,e),fields:n.value.mapValue.fields}}function qR(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(st(E===void 0||typeof E=="string"),tn.fromBase64String(E||"")):(st(E===void 0||E instanceof Buffer||E instanceof Uint8Array),tn.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(g){const E=g.code===void 0?ee.UNKNOWN:iw(g.code);return new pe(E,g.message||"")}(h);n=new sw(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mm(i,s.document.name),u=Ui(s.document.updateTime),h=s.document.createTime?Ui(s.document.createTime):Oe.min(),m=new Rn({mapValue:{fields:s.document.fields}}),p=on.newFoundDocument(o,u,h,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new vh(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mm(i,s.document),u=s.readTime?Ui(s.readTime):Oe.min(),h=on.newNoDocument(o,u),m=s.removedTargetIds||[];n=new vh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mm(i,s.document),u=s.removedTargetIds||[];n=new vh([],u,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new OR(o,u),m=s.targetId;n=new rw(m,h)}}return n}function HR(i,e){let n;if(e instanceof Cu)n={update:B0(i,e.key,e.value)};else if(e instanceof Vp)n={delete:lp(i,e.key)};else if(e instanceof Ns)n={update:B0(i,e.key,e.data),updateMask:ZR(e.fieldMask)};else{if(!(e instanceof xR))return Ne();n={verify:lp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const m=h.transform;if(m instanceof Eu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Tu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof wu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof bu)return{fieldPath:h.field.canonicalString(),increment:m.Ie};throw Ne()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:zR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ne()}(i,e.precondition)),n}function FR(i,e){return i&&i.length>0?(st(e!==void 0),i.map(n=>function(o,u){let h=o.updateTime?Ui(o.updateTime):Ui(u);return h.isEqual(Oe.min())&&(h=Ui(u)),new RR(h,o.transformResults||[])}(n,e))):[]}function GR(i,e){return{documents:[lw(i,e.path)]}}function $R(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=lw(i,o);const u=function(g){if(g.length!==0)return hw(mi.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(E=>function(I){return{field:Ro(I.field),direction:YR(I.dir)}}(E))}(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=ap(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function KR(i){let e=BR(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){st(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(b){const I=cw(b);return I instanceof mi&&UT(I)?I.getFilters():[I]}(n.where));let h=[];n.orderBy&&(h=function(b){return b.map(I=>function(M){return new _u(Io(M.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let m=null;n.limit&&(m=function(b){let I;return I=typeof b=="object"?b.value:b,Jh(I)?null:I}(n.limit));let p=null;n.startAt&&(p=function(b){const I=!!b.before,O=b.values||[];return new Dh(O,I)}(n.startAt));let g=null;return n.endAt&&(g=function(b){const I=!b.before,O=b.values||[];return new Dh(O,I)}(n.endAt)),mR(e,o,h,u,m,"F",p,g)}function QR(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cw(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Io(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Io(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(n.unaryFilter.field);return Mt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(i):i.fieldFilter!==void 0?function(n){return Mt.create(Io(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return mi.create(n.compositeFilter.filters.map(s=>cw(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(i):Ne()}function YR(i){return PR[i]}function WR(i){return LR[i]}function XR(i){return UR[i]}function Ro(i){return{fieldPath:i.canonicalString()}}function Io(i){return en.fromServerFormat(i.fieldPath)}function hw(i){return i instanceof Mt?function(n){if(n.op==="=="){if(C0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(I0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(I0(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:WR(n.op),value:n.value}}}(i):i instanceof mi?function(n){const s=n.getFilters().map(o=>hw(o));return s.length===1?s[0]:{compositeFilter:{op:XR(n.op),filters:s}}}(i):Ne()}function ZR(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,s,o,u=Oe.min(),h=Oe.min(),m=tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.Tt=e}}function eI(i){const e=KR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.Tn=new nI}addToCollectionParentIndex(e,n){return this.Tn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(bs.min())}updateCollectionGroup(e,n,s){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class nI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zt(gt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fw=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(fw,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Lo(0)}static Kn(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="LruGarbageCollector",iI=1048576;function F0([i,e],[n,s]){const o=Ue(i,n);return o===0?Ue(e,s):o}class rI{constructor(e){this.Hn=e,this.buffer=new zt(F0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();F0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(H0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?ge(H0,"Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.er(3e5)})}}class aI{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Zh.ae);const s=new rI(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(q0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,h,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(e,o))).next(b=>(s=b,m=Date.now(),this.removeTargets(e,s,n))).next(b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(b=>(g=Date.now(),So()<=Fe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function oI(i,e){return new aI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.changes=new Ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ne.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&cu(s.mutation,o,Un.empty(),jt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ge()){const o=ma();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let h=nu();return u.forEach((m,p)=>{h=h.insert(m,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,n){const s=ma();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ge()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,m)=>{n.set(h,m)})})}computeViews(e,n,s,o){let u=Ar();const h=uu(),m=function(){return uu()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Ns)?u=u.insert(g.key,g):E!==void 0?(h.set(g.key,E.mutation.getFieldMask()),cu(E.mutation,g,E.mutation.getFieldMask(),jt.now())):h.set(g.key,Un.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>h.set(g,E)),n.forEach((g,E)=>{var b;return m.set(g,new uI(E,(b=h.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,n){const s=uu();let o=new Et((h,m)=>h-m),u=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(h=>{for(const m of h)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Un.empty();E=m.applyToLocalView(g,E),s.set(p,E);const b=(o.get(m.batchId)||Ge()).add(p);o=o.insert(m.batchId,b)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,b=KT();E.forEach(I=>{if(!u.has(I)){const O=tw(n.get(I),s.get(I));O!==null&&b.set(I,O),u=u.add(I)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ne.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(h){return we.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ne.resolve(ma());let m=pu,p=u;return h.next(g=>ne.forEach(g,(E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?ne.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{p=p.insert(E,I)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Ge())).next(E=>({batchId:m,changes:$T(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(s=>{let o=nu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=nu();return this.indexManager.getCollectionParents(e,u).next(m=>ne.forEach(m,p=>{const g=function(b,I){return new Aa(I,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((b,I)=>{h=h.insert(b,I)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(h=>{u.forEach((p,g)=>{const E=g.getKey();h.get(E)===null&&(h=h.insert(E,on.newInvalidDocument(E)))});let m=nu();return h.forEach((p,g)=>{const E=u.get(p);E!==void 0&&cu(E.mutation,g,Un.empty(),jt.now()),id(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return ne.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ui(o.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:eI(o.bundledQuery),readTime:Ui(o.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.overlays=new Et(we.comparator),this.Rr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ma();return ne.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),ne.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ne.resolve()}getOverlaysForCollection(e,n,s){const o=ma(),u=n.length+1,h=new we(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new Et((g,E)=>g-E);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=ma(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=ma(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return ne.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new DR(n,s));let u=this.Rr.get(n);u===void 0&&(u=Ge(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Vr=new zt(Kt.mr),this.gr=new zt(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Kt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new we(new gt([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.gr.forEachInRange([s,o],h=>{this.wr(h),u.push(h.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new we(new gt([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=Ge();return this.gr.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return we.comparator(e.key,n.key)||Ue(e.Cr,n.Cr)}static pr(e,n){return Ue(e.Cr,n.Cr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new zt(Kt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new NR(u,n,s,o);this.mutationQueue.push(h);for(const m of o)this.Mr=this.Mr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,n){return ne.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Cp:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],h=>{const m=this.Or(h.Cr);u.push(m)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zt(Ue);return n.forEach(o=>{const u=new Kt(o,0),h=new Kt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,h],m=>{s=s.add(m.Cr)})}),ne.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;we.isDocumentKey(u)||(u=u.child(""));const h=new Kt(new we(u),0);let m=new zt(Ue);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},h),ne.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){st(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ne.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Mr.firstAfterOrEqual(s);return ne.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.kr=e,this.docs=function(){return new Et(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ne.resolve(s?s.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let s=Ar();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():on.newInvalidDocument(o))}),ne.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Ar();const h=n.path,m=new we(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||$2(G2(E),s)<=0||(o.has(E.key)||id(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ne()}qr(e,n){return ne.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new gI(this)}getSize(e){return ne.resolve(this.size)}}class gI extends lI{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ne.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.persistence=e,this.Qr=new Ra(n=>Dp(n),Op),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Up,this.targetCount=0,this.Kr=Lo.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),ne.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Lo(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.zn(n),ne.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((h,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return ne.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),ne.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return ne.resolve(s)}containsKey(e,n){return ne.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Zh(0),this.zr=!1,this.zr=!0,this.jr=new fI,this.referenceDelegate=e(this),this.Hr=new yI(this),this.indexManager=new tI,this.remoteDocumentCache=function(o){return new pI(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new JR(n),this.Yr=new hI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new mI(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){ge("MemoryPersistence","Starting transaction:",e);const o=new vI(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return ne.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class vI extends Q2{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.ti=new Up,this.ni=null}static ri(e){return new jp(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),ne.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),ne.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,s=>{const o=we.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,Oe.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return ne.or([()=>ne.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Mh{constructor(e,n){this.persistence=e,this.oi=new Ra(s=>X2(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=oI(this,n)}static ri(e,n){return new Mh(e,n)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return ne.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ne.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,h=>this.ar(e,h,n).next(m=>{m||(s++,u.removeEntry(h,Oe.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),ne.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}ar(e,n,s){return ne.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Ge(),o=Ge();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new zp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return f1()?8:Y2(cn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new _I;return this._s(e,n,h).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,h,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(So()<=Fe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ao(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(So()<=Fe.DEBUG&&ge("QueryEngine","Query:",Ao(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(So()<=Fe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ao(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(n))):ne.resolve())}rs(e,n){if(O0(n))return ne.resolve(null);let s=Li(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=sp(n,null,"F"),s=Li(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=Ge(...u);return this.ns.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,h,p.readTime)?this.rs(e,sp(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return O0(n)||o.isEqual(Oe.min())?ne.resolve(null):this.ns.getDocuments(e,s).next(u=>{const h=this.cs(n,u);return this.ls(n,h,s,o)?ne.resolve(null):(So()<=Fe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ao(n)),this.hs(e,h,n,F2(o,pu)).next(m=>m))})}cs(e,n){let s=new zt(FT(e));return n.forEach((o,u)=>{id(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return So()<=Fe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ao(n)),this.ns.getDocumentsMatchingQuery(e,n,bs.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",TI=3e8;class wI{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new Et(Ue),this.Is=new Ra(u=>Dp(u),Op),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function bI(i,e,n,s){return new wI(i,e,n,s)}async function pw(i,e){const n=Me(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],m=[];let p=Ge();for(const g of o){h.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:h,addedBatchIds:m}))})})}function SI(i,e){const n=Me(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const b=g.batch,I=b.keys();let O=ne.resolve();return I.forEach(M=>{O=O.next(()=>E.getEntry(p,M)).next(Q=>{const H=g.docVersions.get(M);st(H!==null),Q.version.compareTo(H)<0&&(b.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),E.addEntry(Q)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(p,b))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Ge();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function gw(i){const e=Me(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function AI(i,e){const n=Me(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((E,b)=>{const I=o.get(b);if(!I)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,b).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,b)));let O=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?O=O.withResumeToken(tn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):E.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(E.resumeToken,s)),o=o.insert(b,O),function(Q,H,Y){return Q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=TI?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(I,O,E)&&m.push(n.Hr.updateTargetData(u,O))});let p=Ar(),g=Ge();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(RI(u,h,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(Oe.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(b=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return ne.waitFor(m).next(()=>h.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function RI(i,e,n){let s=Ge(),o=Ge();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let h=Ar();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Oe.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):ge(Bp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:h,fs:o}})}function II(i,e){const n=Me(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Cp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function CI(i,e){const n=Me(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,ne.resolve(o)):n.Hr.allocateTargetId(s).next(h=>(o=new gs(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function cp(i,e,n){const s=Me(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Ho(h))throw h;ge(Bp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function G0(i,e,n){const s=Me(i);let o=Oe.min(),u=Ge();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,E){const b=Me(p),I=b.Is.get(E);return I!==void 0?ne.resolve(b.Ts.get(I)):b.Hr.getTargetData(g,E)}(s,h,Li(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(h,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(h,e,n?o:Oe.min(),n?u:Ge())).next(m=>(xI(s,gR(e),m),{documents:m,gs:u})))}function xI(i,e,n){let s=i.Es.get(e)||Oe.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class $0{constructor(){this.activeTargetIds=wR()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NI{constructor(){this.ho=new $0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new $0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="ConnectivityMonitor";class Q0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(K0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(K0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function hp(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",OI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MI{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===xh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const h=hp(),m=this.bo(e,n.toUriEncodedString());ge(Vm,`Sending RPC '${e}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(ge(Vm,`Received RPC '${e}' ${h}: `,g),g),g=>{throw Mo(Vm,`RPC '${e}' ${h} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,h){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=OI[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class kI extends MI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=hp();return new Promise((h,m)=>{const p=new vT;p.setWithCredentials(!0),p.listenOnce(_T.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case mh.NO_ERROR:const E=p.getResponseJson();ge(sn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case mh.TIMEOUT:ge(sn,`RPC '${e}' ${u} timed out`),m(new pe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const b=p.getStatus();if(ge(sn,`RPC '${e}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I==null?void 0:I.error;if(O&&O.status&&O.message){const M=function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(Y)>=0?Y:ee.UNKNOWN}(O.status);m(new pe(M,O.message))}else m(new pe(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new pe(ee.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ge(sn,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);ge(sn,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=hp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=wT(),m=TT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ge(sn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const b=h.createWebChannel(E,p);let I=!1,O=!1;const M=new VI({Fo:H=>{O?ge(sn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(I||(ge(sn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),I=!0),ge(sn,`RPC '${e}' stream ${o} sending:`,H),b.send(H))},Mo:()=>b.close()}),Q=(H,Y,ae)=>{H.listen(Y,J=>{try{ae(J)}catch(_e){setTimeout(()=>{throw _e},0)}})};return Q(b,tu.EventType.OPEN,()=>{O||(ge(sn,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),Q(b,tu.EventType.CLOSE,()=>{O||(O=!0,ge(sn,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),Q(b,tu.EventType.ERROR,H=>{O||(O=!0,Mo(sn,`RPC '${e}' stream ${o} transport errored:`,H),M.Uo(new pe(ee.UNAVAILABLE,"The operation could not be completed")))}),Q(b,tu.EventType.MESSAGE,H=>{var Y;if(!O){const ae=H.data[0];st(!!ae);const J=ae,_e=(J==null?void 0:J.error)||((Y=J[0])===null||Y===void 0?void 0:Y.error);if(_e){ge(sn,`RPC '${e}' stream ${o} received error:`,_e);const fe=_e.status;let be=function(R){const D=Ot[R];if(D!==void 0)return iw(D)}(fe),U=_e.message;be===void 0&&(be=ee.INTERNAL,U="Unknown error status: "+fe+" with message "+_e.message),O=!0,M.Uo(new pe(be,U)),b.close()}else ge(sn,`RPC '${e}' stream ${o} received:`,ae),M.Ko(ae)}}),Q(m,ET.STAT_EVENT,H=>{H.stat===Zm.PROXY?ge(sn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Zm.NOPROXY&&ge(sn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i){return new jR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="PersistentStream";class vw{constructor(e,n,s,o,u,h,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yw(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new pe(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(Y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ge(Y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PI extends vw{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=qR(this.serializer,e),s=function(u){if(!("targetChange"in u))return Oe.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Oe.min():h.readTime?Ui(h.readTime):Oe.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=up(this.serializer),n.addTarget=function(u,h){let m;const p=h.target;if(m=ip(p)?{documents:GR(u,p)}:{query:$R(u,p).ht},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=aw(u,h.resumeToken);const g=ap(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Oe.min())>0){m.readTime=Oh(u,h.snapshotVersion.toTimestamp());const g=ap(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=QR(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=up(this.serializer),n.removeTarget=e,this.I_(n)}}class LI extends vw{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return st(!!e.streamToken),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){st(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=FR(e.writeResults,e.commitTime),s=Ui(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=up(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>HR(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{}class jI extends UI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.So(e,op(n,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(ee.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Co(e,op(n,s),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(ee.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class zI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Sr(n),this.N_=!1):ge("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class BI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(h=>{s.enqueueAndForget(async()=>{Ia(this)&&(ge(va,"Restarting streams for network reachability change."),await async function(p){const g=Me(p);g.W_.add(4),await Nu(g),g.j_.set("Unknown"),g.W_.delete(4),await ld(g)}(this))})}),this.j_=new zI(s,o)}}async function ld(i){if(Ia(i))for(const e of i.G_)await e(!0)}async function Nu(i){for(const e of i.G_)await e(!1)}function _w(i,e){const n=Me(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Gp(n)?Fp(n):Fo(n).c_()&&Hp(n,e))}function qp(i,e){const n=Me(i),s=Fo(n);n.K_.delete(e),s.c_()&&Ew(n,e),n.K_.size===0&&(s.c_()?s.P_():Ia(n)&&n.j_.set("Unknown"))}function Hp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(i).y_(e)}function Ew(i,e){i.H_.Ne(e),Fo(i).w_(e)}function Fp(i){i.H_=new kR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Fo(i).start(),i.j_.B_()}function Gp(i){return Ia(i)&&!Fo(i).u_()&&i.K_.size>0}function Ia(i){return Me(i).W_.size===0}function Tw(i){i.H_=void 0}async function qI(i){i.j_.set("Online")}async function HI(i){i.K_.forEach((e,n)=>{Hp(i,e)})}async function FI(i,e){Tw(i),Gp(i)?(i.j_.q_(e),Fp(i)):i.j_.set("Unknown")}async function GI(i,e,n){if(i.j_.set("Online"),e instanceof sw&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){ge(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(i,s)}else if(e instanceof vh?i.H_.We(e):e instanceof rw?i.H_.Ze(e):i.H_.je(e),!n.isEqual(Oe.min()))try{const s=await gw(i.localStore);n.compareTo(s)>=0&&await function(u,h){const m=u.H_.ot(h);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.K_.get(g);E&&u.K_.set(g,E.withResumeToken(p.resumeToken,h))}}),m.targetMismatches.forEach((p,g)=>{const E=u.K_.get(p);if(!E)return;u.K_.set(p,E.withResumeToken(tn.EMPTY_BYTE_STRING,E.snapshotVersion)),Ew(u,p);const b=new gs(E.target,p,g,E.sequenceNumber);Hp(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){ge(va,"Failed to raise snapshot:",s),await Vh(i,s)}}async function Vh(i,e,n){if(!Ho(e))throw e;i.W_.add(1),await Nu(i),i.j_.set("Offline"),n||(n=()=>gw(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ge(va,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await ld(i)})}function ww(i,e){return e().catch(n=>Vh(i,n,e))}async function ud(i){const e=Me(i),n=Is(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:Cp;for(;$I(e);)try{const o=await II(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,KI(e,o)}catch(o){await Vh(e,o)}bw(e)&&Sw(e)}function $I(i){return Ia(i)&&i.U_.length<10}function KI(i,e){i.U_.push(e);const n=Is(i);n.c_()&&n.S_&&n.b_(e.mutations)}function bw(i){return Ia(i)&&!Is(i).u_()&&i.U_.length>0}function Sw(i){Is(i).start()}async function QI(i){Is(i).C_()}async function YI(i){const e=Is(i);for(const n of i.U_)e.b_(n.mutations)}async function WI(i,e,n){const s=i.U_.shift(),o=kp.from(s,e,n);await ww(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await ud(i)}async function XI(i,e){e&&Is(i).S_&&await async function(s,o){if(function(h){return MR(h)&&h!==ee.ABORTED}(o.code)){const u=s.U_.shift();Is(s).h_(),await ww(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ud(s)}}(i,e),bw(i)&&Sw(i)}async function W0(i,e){const n=Me(i);n.asyncQueue.verifyOperationInProgress(),ge(va,"RemoteStore received new credentials");const s=Ia(n);n.W_.add(3),await Nu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await ld(n)}async function ZI(i,e){const n=Me(i);e?(n.W_.delete(2),await ld(n)):e||(n.W_.add(2),await Nu(n),n.j_.set("Unknown"))}function Fo(i){return i.J_||(i.J_=function(n,s,o){const u=Me(n);return u.M_(),new PI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:qI.bind(null,i),No:HI.bind(null,i),Lo:FI.bind(null,i),p_:GI.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Gp(i)?Fp(i):i.j_.set("Unknown")):(await i.J_.stop(),Tw(i))})),i.J_}function Is(i){return i.Y_||(i.Y_=function(n,s,o){const u=Me(n);return u.M_(),new LI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:QI.bind(null,i),Lo:XI.bind(null,i),D_:YI.bind(null,i),v_:WI.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await ud(i)):(await i.Y_.stop(),i.U_.length>0&&(ge(va,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,m=new $p(e,n,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(i,e){if(Sr("AsyncQueue",`${e}: ${i}`),Ho(i))return new pe(ee.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{static emptySet(e){return new xo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||we.comparator(n.key,s.key):(n,s)=>we.comparator(n.key,s.key),this.keyedMap=nu(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new xo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.Z_=new Et(we.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Uo{constructor(e,n,s,o,u,h,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach(m=>{h.push({type:0,doc:m})}),new Uo(e,n,xo.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class eC{constructor(){this.queries=Z0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=Z0(),u.forEach((h,m)=>{for(const p of m.ta)p.onError(s)})})(this,new pe(ee.ABORTED,"Firestore shutting down"))}}function Z0(){return new Ra(i=>HT(i),nd)}async function Qp(i,e){const n=Me(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new JI,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=Kp(h,`Initialization of query '${Ao(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Wp(n)}async function Yp(i,e){const n=Me(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.ta.indexOf(e);h>=0&&(u.ta.splice(h,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function tC(i,e){const n=Me(i);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.ta)m.oa(o)&&(s=!0);h.ea=o}}s&&Wp(n)}function nC(i,e,n){const s=Me(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Wp(i){i.ia.forEach(e=>{e.next()})}var dp,J0;(J0=dp||(dp={}))._a="default",J0.Cache="cache";class Xp{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Uo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==dp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.key=e}}class Rw{constructor(e){this.key=e}}class iC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ge(),this.mutatedKeys=Ge(),this.ya=FT(e),this.wa=new xo(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new X0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,b)=>{const I=o.get(E),O=id(this.query,b)?b:null,M=!!I&&this.mutatedKeys.has(I.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let H=!1;I&&O?I.data.isEqual(O.data)?M!==Q&&(s.track({type:3,doc:O}),H=!0):this.va(I,O)||(s.track({type:2,doc:O}),H=!0,(p&&this.ya(O,p)>0||g&&this.ya(O,g)<0)&&(m=!0)):!I&&O?(s.track({type:0,doc:O}),H=!0):I&&!O&&(s.track({type:1,doc:I}),H=!0,(p||g)&&(m=!0)),H&&(O?(h=h.add(O),u=Q?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:h,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const h=e.Da.X_();h.sort((E,b)=>function(O,M){const Q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return Q(O)-Q(M)}(E.type,b.type)||this.ya(E.doc,b.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,h.length!==0||g?{snapshot:new Uo(this.query,e.wa,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new X0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ge(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new Rw(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new Aw(s))}),n}Oa(e){this.fa=e.gs,this.pa=Ge();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Uo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Zp="SyncEngine";class rC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class sC{constructor(e){this.key=e,this.Ba=!1}}class aC{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new Ra(m=>HT(m),nd),this.qa=new Map,this.Qa=new Set,this.$a=new Et(we.comparator),this.Ua=new Map,this.Ka=new Up,this.Wa={},this.Ga=new Map,this.za=Lo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function oC(i,e,n=!0){const s=Ow(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Iw(s,e,n,!0),o}async function lC(i,e){const n=Ow(i);await Iw(n,e,!0,!1)}async function Iw(i,e,n,s){const o=await CI(i.localStore,Li(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await uC(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&_w(i.remoteStore,o),m}async function uC(i,e,n,s,o){i.Ha=(b,I,O)=>async function(Q,H,Y,ae){let J=H.view.ba(Y);J.ls&&(J=await G0(Q.localStore,H.query,!1).then(({documents:U})=>H.view.ba(U,J)));const _e=ae&&ae.targetChanges.get(H.targetId),fe=ae&&ae.targetMismatches.get(H.targetId)!=null,be=H.view.applyChanges(J,Q.isPrimaryClient,_e,fe);return tE(Q,H.targetId,be.Ma),be.snapshot}(i,b,I,O);const u=await G0(i.localStore,e,!0),h=new iC(e,u.gs),m=h.ba(u.documents),p=xu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=h.applyChanges(m,i.isPrimaryClient,p);tE(i,n,g.Ma);const E=new rC(e,n,h);return i.ka.set(e,E),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function cC(i,e,n){const s=Me(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(h=>!nd(h,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await cp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&qp(s.remoteStore,o.targetId),fp(s,o.targetId)}).catch(qo)):(fp(s,o.targetId),await cp(s.localStore,o.targetId,!0))}async function hC(i,e){const n=Me(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function dC(i,e,n){const s=_C(i);try{const o=await function(h,m){const p=Me(h),g=jt.now(),E=m.reduce((O,M)=>O.add(M.key),Ge());let b,I;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let M=Ar(),Q=Ge();return p.ds.getEntries(O,E).next(H=>{M=H,M.forEach((Y,ae)=>{ae.isValidDocument()||(Q=Q.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,M)).next(H=>{b=H;const Y=[];for(const ae of m){const J=CR(ae,b.get(ae.key).overlayedDocument);J!=null&&Y.push(new Ns(ae.key,J,kT(J.value.mapValue),ri.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,Y,m)}).next(H=>{I=H;const Y=H.applyToLocalDocumentSet(b,Q);return p.documentOverlayCache.saveOverlays(O,H.batchId,Y)})}).then(()=>({batchId:I.batchId,changes:$T(b)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,m,p){let g=h.Wa[h.currentUser.toKey()];g||(g=new Et(Ue)),g=g.insert(m,p),h.Wa[h.currentUser.toKey()]=g}(s,o.batchId,n),await Du(s,o.changes),await ud(s.remoteStore)}catch(o){const u=Kp(o,"Failed to persist write");n.reject(u)}}async function Cw(i,e){const n=Me(i);try{const s=await AI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const h=n.Ua.get(u);h&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?st(h.Ba):o.removedDocuments.size>0&&(st(h.Ba),h.Ba=!1))}),await Du(n,s,e)}catch(s){await qo(s)}}function eE(i,e,n){const s=Me(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,h)=>{const m=h.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const p=Me(h);p.onlineState=m;let g=!1;p.queries.forEach((E,b)=>{for(const I of b.ta)I.sa(m)&&(g=!0)}),g&&Wp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function fC(i,e,n){const s=Me(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let h=new Et(we.comparator);h=h.insert(u,on.newNoDocument(u,Oe.min()));const m=Ge().add(u),p=new ad(Oe.min(),new Map,new Et(Ue),h,m);await Cw(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),Jp(s)}else await cp(s.localStore,e,!1).then(()=>fp(s,e,n)).catch(qo)}async function mC(i,e){const n=Me(i),s=e.batch.batchId;try{const o=await SI(n.localStore,e);Nw(n,s,null),xw(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Du(n,o)}catch(o){await qo(o)}}async function pC(i,e,n){const s=Me(i);try{const o=await function(h,m){const p=Me(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(b=>(st(b!==null),E=b.keys(),p.mutationQueue.removeMutationBatch(g,b))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);Nw(s,e,n),xw(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Du(s,o)}catch(o){await qo(o)}}function xw(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Nw(i,e,n){const s=Me(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function fp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Dw(i,s)})}function Dw(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(qp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Jp(i))}function tE(i,e,n){for(const s of n)s instanceof Aw?(i.Ka.addReference(s.key,e),gC(i,s)):s instanceof Rw?(ge(Zp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Dw(i,s.key)):Ne()}function gC(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(ge(Zp,"New document in limbo: "+n),i.Qa.add(s),Jp(i))}function Jp(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new we(gt.fromString(e)),s=i.za.next();i.Ua.set(s,new sC(n)),i.$a=i.$a.insert(n,s),_w(i.remoteStore,new gs(Li(td(n.path)),s,"TargetPurposeLimboResolution",Zh.ae))}}async function Du(i,e,n){const s=Me(i),o=[],u=[],h=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{h.push(s.Ha(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=zp.Yi(p.targetId,g);u.push(b)}}))}),await Promise.all(h),s.La.p_(o),await async function(p,g){const E=Me(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ne.forEach(g,I=>ne.forEach(I.Hi,O=>E.persistence.referenceDelegate.addReference(b,I.targetId,O)).next(()=>ne.forEach(I.Ji,O=>E.persistence.referenceDelegate.removeReference(b,I.targetId,O)))))}catch(b){if(!Ho(b))throw b;ge(Bp,"Failed to update sequence numbers: "+b)}for(const b of g){const I=b.targetId;if(!b.fromCache){const O=E.Ts.get(I),M=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(M);E.Ts=E.Ts.insert(I,Q)}}}(s.localStore,u))}async function yC(i,e){const n=Me(i);if(!n.currentUser.isEqual(e)){ge(Zp,"User change. New user:",e.toKey());const s=await pw(n.localStore,e);n.currentUser=e,function(u,h){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new pe(ee.CANCELLED,h))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Du(n,s.Rs)}}function vC(i,e){const n=Me(i),s=n.Ua.get(e);if(s&&s.Ba)return Ge().add(s.key);{let o=Ge();const u=n.qa.get(e);if(!u)return o;for(const h of u){const m=n.ka.get(h);o=o.unionWith(m.view.Sa)}return o}}function Ow(i){const e=Me(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fC.bind(null,e),e.La.p_=tC.bind(null,e.eventManager),e.La.Ja=nC.bind(null,e.eventManager),e}function _C(i){const e=Me(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pC.bind(null,e),e}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return bI(this.persistence,new EI,e.initialUser,this.serializer)}Xa(e){return new mw(jp.ri,this.serializer)}Za(e){return new NI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class EC extends kh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){st(this.persistence.referenceDelegate instanceof Mh);const s=this.persistence.referenceDelegate.garbageCollector;return new sI(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new mw(s=>Mh.ri(s,n),this.serializer)}}class mp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>eE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yC.bind(null,this.syncEngine),await ZI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eC}()}createDatastore(e){const n=od(e.databaseInfo.databaseId),s=function(u){return new kI(u)}(e.databaseInfo);return function(u,h,m,p){return new jI(u,h,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,h,m){return new BI(s,o,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,n=>eE(this.syncEngine,n,0),function(){return Q0.D()?new Q0:new DI}())}createSyncEngine(e,n){return function(o,u,h,m,p,g,E){const b=new aC(o,u,h,m,p,g);return E&&(b.ja=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Me(o);ge(va,"RemoteStore shutting down."),u.W_.add(5),await Nu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mp.provider={build:()=>new mp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class TC{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=AT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{ge(Cs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(ge(Cs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Pm(i,e){i.asyncQueue.verifyOperationInProgress(),ge(Cs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await pw(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function nE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await wC(i);ge(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>W0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>W0(e.remoteStore,o)),i._onlineComponents=e}async function wC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ge(Cs,"Using user provided OfflineComponentProvider");try{await Pm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Mo("Error using user provided cache. Falling back to memory cache: "+n),await Pm(i,new kh)}}else ge(Cs,"Using default OfflineComponentProvider"),await Pm(i,new EC(void 0));return i._offlineComponents}async function Mw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ge(Cs,"Using user provided OnlineComponentProvider"),await nE(i,i._uninitializedComponentsProvider._online)):(ge(Cs,"Using default OnlineComponentProvider"),await nE(i,new mp))),i._onlineComponents}function bC(i){return Mw(i).then(e=>e.syncEngine)}async function Ph(i){const e=await Mw(i),n=e.eventManager;return n.onListen=oC.bind(null,e.syncEngine),n.onUnlisten=cC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hC.bind(null,e.syncEngine),n}function SC(i,e,n={}){const s=new Er;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,m,p,g){const E=new eg({next:I=>{E.su(),h.enqueueAndForget(()=>Yp(u,b));const O=I.docs.has(m);!O&&I.fromCache?g.reject(new pe(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&p&&p.source==="server"?g.reject(new pe(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),b=new Xp(td(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Qp(u,b)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}function AC(i,e,n={}){const s=new Er;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,m,p,g){const E=new eg({next:I=>{E.su(),h.enqueueAndForget(()=>Yp(u,b)),I.fromCache&&p.source==="server"?g.reject(new pe(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),b=new Xp(m,E,{includeMetadataChanges:!0,Ta:!0});return Qp(u,b)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(i,e,n){if(!n)throw new pe(ee.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function RC(i,e,n,s){if(e===!0&&s===!0)throw new pe(ee.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function rE(i){if(!we.isDocumentKey(i))throw new pe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function sE(i){if(we.isDocumentKey(i))throw new pe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function cd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ne()}function yn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new pe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cd(i);throw new pe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firestore.googleapis.com",aE=!0;class oE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kw,this.ssl=aE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:aE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iI)throw new pe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new pe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new k2;switch(s.type){case"firstParty":return new j2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=iE.get(n);s&&(ge("ComponentProvider","Removing Datastore"),iE.delete(n),s.terminate())}(this),Promise.resolve()}}function IC(i,e,n,s={}){var o;const u=(i=yn(i,Ou))._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==kw&&u.host!==m&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!ws(p,h)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=an.MOCK_USER;else{g=o1(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new pe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new an(b)}i._authCredentials=new P2(new bT(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class un{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Ts extends xr{constructor(e,n,s){super(e,n,td(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new we(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function ln(i,e,...n){if(i=bt(i),tg("collection","path",e),i instanceof Ou){const s=gt.fromString(e,...n);return sE(s),new Ts(i,null,s)}{if(!(i instanceof un||i instanceof Ts))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(gt.fromString(e,...n));return sE(s),new Ts(i.firestore,null,s)}}function Lm(i,e){if(i=yn(i,Ou),tg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xr(i,null,function(s){return new Aa(gt.emptyPath(),s)}(e))}function Ut(i,e,...n){if(i=bt(i),arguments.length===1&&(e=AT.newId()),tg("doc","path",e),i instanceof Ou){const s=gt.fromString(e,...n);return rE(s),new un(i,null,new we(s))}{if(!(i instanceof un||i instanceof Ts))throw new pe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(gt.fromString(e,...n));return rE(s),new un(i.firestore,i instanceof Ts?i.converter:null,new we(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="AsyncQueue";class uE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yw(this,"async_queue_retry"),this.Su=()=>{const s=km();s&&ge(lE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Er;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ho(e))throw e;ge(lE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(s);throw Sr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function cE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class Rr extends Ou{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new uE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uE(e),this._firestoreClient=void 0,await e}}}function CC(i,e){const n=typeof i=="object"?i:Rp(),s=typeof i=="string"?i:xh,o=Sa(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=s1("firestore");u&&IC(o,...u)}return o}function hd(i){if(i._terminated)throw new pe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||xC(i),i._firestoreClient}function xC(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,E){return new eR(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Vw(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new TC(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jo(tn.fromBase64String(e))}catch(n){throw new pe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jo(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^__.*__$/;class DC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class Pw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Lw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class rg{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Lh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Lw(this.Lu)&&NC.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class OC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||od(e)}ju(e,n,s,o=!1){return new rg({Lu:e,methodName:n,zu:s,path:en.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(i){const e=i._freezeSettings(),n=od(i._databaseId);return new OC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Uw(i,e,n,s,o,u={}){const h=i.ju(u.merge||u.mergeFields?2:0,e,n,o);og("Data must be an object, but it was:",h,s);const m=jw(s,h);let p,g;if(u.merge)p=new Un(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const I=pp(e,b,n);if(!h.contains(I))throw new pe(ee.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Bw(E,I)||E.push(I)}p=new Un(E),g=h.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,g=h.fieldTransforms;return new DC(new Rn(m),p,g)}class md extends Mu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class sg extends Mu{_toFieldTransform(e){return new ew(e.path,new Eu)}isEqual(e){return e instanceof sg}}class ag extends Mu{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new bu(e.serializer,YT(e.serializer,this.Ju));return new ew(e.path,n)}isEqual(e){return e instanceof ag&&this.Ju===e.Ju}}function MC(i,e,n,s){const o=i.ju(1,e,n);og("Data must be an object, but it was:",o,s);const u=[],h=Rn.empty();xs(s,(p,g)=>{const E=lg(e,p,n);g=bt(g);const b=o.Uu(E);if(g instanceof md)u.push(E);else{const I=Vu(g,b);I!=null&&(u.push(E),h.set(E,I))}});const m=new Un(u);return new Pw(h,m,o.fieldTransforms)}function VC(i,e,n,s,o,u){const h=i.ju(1,e,n),m=[pp(e,s,n)],p=[o];if(u.length%2!=0)throw new pe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(pp(e,u[I])),p.push(u[I+1]);const g=[],E=Rn.empty();for(let I=m.length-1;I>=0;--I)if(!Bw(g,m[I])){const O=m[I];let M=p[I];M=bt(M);const Q=h.Uu(O);if(M instanceof md)g.push(O);else{const H=Vu(M,Q);H!=null&&(g.push(O),E.set(O,H))}}const b=new Un(g);return new Pw(E,b,h.fieldTransforms)}function kC(i,e,n,s=!1){return Vu(n,i.ju(s?4:3,e))}function Vu(i,e){if(zw(i=bt(i)))return og("Unsupported field value:",e,i),jw(i,e);if(i instanceof Mu)return function(s,o){if(!Lw(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const m of s){let p=Vu(m,o.Ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return YT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=jt.fromDate(s);return{timestampValue:Oh(o.serializer,u)}}if(s instanceof jt){const u=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(o.serializer,u)}}if(s instanceof ng)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof jo)return{bytesValue:aw(o.serializer,s._byteString)};if(s instanceof un){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ig)return function(h,m){return{mapValue:{fields:{[MT]:{stringValue:VT},[Nh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return Mp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${cd(s)}`)}(i,e)}function jw(i,e){const n={};return IT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(i,(s,o)=>{const u=Vu(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function zw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof jt||i instanceof ng||i instanceof jo||i instanceof un||i instanceof Mu||i instanceof ig)}function og(i,e,n){if(!zw(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=cd(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function pp(i,e,n){if((e=bt(e))instanceof dd)return e._internalPath;if(typeof e=="string")return lg(i,e);throw Lh("Field path arguments must be of type string or ",i,!1,void 0,n)}const PC=new RegExp("[~\\*/\\[\\]]");function lg(i,e,n){if(e.search(PC)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new dd(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Lh(i,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new pe(ee.INVALID_ARGUMENT,m+i+p)}function Bw(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LC extends qw{data(){return super.data()}}function pd(i,e){return typeof e=="string"?lg(i,e):e instanceof dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new pe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class Fw extends ug{}function ru(i,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),function(u){const h=u.filter(p=>p instanceof cg).length,m=u.filter(p=>p instanceof gd).length;if(h>1||h>0&&m>0)throw new pe(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class gd extends Fw{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new gd(e,n,s)}_apply(e){const n=this._parse(e);return $w(e._query,n),new xr(e.firestore,e.converter,rp(e._query,n))}_parse(e){const n=fd(e.firestore);return function(u,h,m,p,g,E,b){let I;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new pe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){dE(b,E);const M=[];for(const Q of b)M.push(hE(p,u,Q));I={arrayValue:{values:M}}}else I=hE(p,u,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||dE(b,E),I=kC(m,h,b,E==="in"||E==="not-in");return Mt.create(g,E,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hh(i,e,n){const s=e,o=pd("where",i);return gd._create(o,s,n)}class cg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:mi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)$w(h,p),h=rp(h,p)}(e._query,n),new xr(e.firestore,e.converter,rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends Fw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=function(o,u,h){if(o.startAt!==null)throw new pe(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(u,h)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new Aa(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Gw(i,e="asc"){const n=e,s=pd("orderBy",i);return hg._create(s,n)}function hE(i,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new pe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qT(e)&&n.indexOf("/")!==-1)throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(gt.fromString(n));if(!we.isDocumentKey(s))throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return R0(i,new we(s))}if(n instanceof un)return R0(i,n._key);throw new pe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(n)}.`)}function dE(i,e){if(!Array.isArray(i)||i.length===0)throw new pe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $w(i,e){const n=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new pe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UC{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return xs(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Nh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>It(h.doubleValue));return new ig(u)}convertGeoPoint(e){return new ng(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ed(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=gt.fromString(e);st(dw(s));const o=new yu(s.get(1),s.get(3)),u=new we(s.popFirst(5));return o.isEqual(n)||Sr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qw extends qw{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(pd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class _h extends Qw{data(e={}){return super.data(e)}}class Yw{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new su(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new _h(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:jC(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function jC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(i){i=yn(i,un);const e=yn(i.firestore,Rr);return SC(hd(e),i._key).then(n=>Ww(e,i,n))}class dg extends UC{constructor(e){super(),this.firestore=e}convertBytes(e){return new jo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function An(i){i=yn(i,xr);const e=yn(i.firestore,Rr),n=hd(e),s=new dg(e);return Hw(i._query),AC(n,i._query).then(o=>new Yw(e,s,i,o))}function Um(i,e,n){i=yn(i,un);const s=yn(i.firestore,Rr),o=Kw(i.converter,e,n);return yd(s,[Uw(fd(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ri.none())])}function ga(i,e,n,...s){i=yn(i,un);const o=yn(i.firestore,Rr),u=fd(o);let h;return h=typeof(e=bt(e))=="string"||e instanceof dd?VC(u,"updateDoc",i._key,e,n,s):MC(u,"updateDoc",i._key,e),yd(o,[h.toMutation(i._key,ri.exists(!0))])}function hu(i){return yd(yn(i.firestore,Rr),[new Vp(i._key,ri.none())])}function Uh(i,e){const n=yn(i.firestore,Rr),s=Ut(i),o=Kw(i.converter,e);return yd(n,[Uw(fd(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ri.exists(!1))]).then(()=>s)}function zC(i,...e){var n,s,o;i=bt(i);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||cE(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(cE(e[h])){const b=e[h];e[h]=(n=b.next)===null||n===void 0?void 0:n.bind(b),e[h+1]=(s=b.error)===null||s===void 0?void 0:s.bind(b),e[h+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let p,g,E;if(i instanceof un)g=yn(i.firestore,Rr),E=td(i._key.path),p={next:b=>{e[h]&&e[h](Ww(g,i,b))},error:e[h+1],complete:e[h+2]};else{const b=yn(i,xr);g=yn(b.firestore,Rr),E=b._query;const I=new dg(g);p={next:O=>{e[h]&&e[h](new Yw(g,I,b,O))},error:e[h+1],complete:e[h+2]},Hw(i._query)}return function(I,O,M,Q){const H=new eg(Q),Y=new Xp(O,H,M);return I.asyncQueue.enqueueAndForget(async()=>Qp(await Ph(I),Y)),()=>{H.su(),I.asyncQueue.enqueueAndForget(async()=>Yp(await Ph(I),Y))}}(hd(g),E,m,p)}function yd(i,e){return function(s,o){const u=new Er;return s.asyncQueue.enqueueAndForget(async()=>dC(await bC(s),o,u)),u.promise}(hd(i),e)}function Ww(i,e,n){const s=n.docs.get(e._key),o=new dg(i);return new Qw(i,o,e._key,s,new su(n.hasPendingWrites,n.fromCache),e.converter)}function gp(){return new sg("serverTimestamp")}function bo(i){return new ag("increment",i)}(function(e,n=!0){(function(o){Bo=o})(zo),Bi(new fi("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Rr(new L2(s.getProvider("auth-internal")),new z2(h,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(g.options.projectId,E)}(h,o),h);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ii(m0,p0,e),ii(m0,p0,"esm2017")})();const Xw="@firebase/installations",fg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=1e4,Jw=`w:${fg}`,eb="FIS_v2",BC="https://firebaseinstallations.googleapis.com/v1",qC=60*60*1e3,HC="installations",FC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_a=new ba(HC,FC,GC);function tb(i){return i instanceof gi&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb({projectId:i}){return`${BC}/projects/${i}/installations`}function ib(i){return{token:i.token,requestStatus:2,expiresIn:KC(i.expiresIn),creationTime:Date.now()}}async function rb(i,e){const s=(await e.json()).error;return _a.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function sb({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function $C(i,{refreshToken:e}){const n=sb(i);return n.append("Authorization",QC(e)),n}async function ab(i){const e=await i();return e.status>=500&&e.status<600?i():e}function KC(i){return Number(i.replace("s","000"))}function QC(i){return`${eb} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=nb(i),o=sb(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const h={fid:n,authVersion:eb,appId:i.appId,sdkVersion:Jw},m={method:"POST",headers:o,body:JSON.stringify(h)},p=await ab(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:ib(g.authToken)}}else throw await rb("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=/^[cdef][\w-]{21}$/,yp="";function ZC(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=JC(i);return XC.test(n)?n:yp}catch{return yp}}function JC(i){return WC(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new Map;function ub(i,e){const n=vd(i);cb(n,e),ex(n,e)}function cb(i,e){const n=lb.get(i);if(n)for(const s of n)s(e)}function ex(i,e){const n=tx();n&&n.postMessage({key:i,fid:e}),nx()}let pa=null;function tx(){return!pa&&"BroadcastChannel"in self&&(pa=new BroadcastChannel("[Firebase] FID Change"),pa.onmessage=i=>{cb(i.data.key,i.data.fid)}),pa}function nx(){lb.size===0&&pa&&(pa.close(),pa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="firebase-installations-database",rx=1,Ea="firebase-installations-store";let jm=null;function mg(){return jm||(jm=fT(ix,rx,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(Ea)}}})),jm}async function jh(i,e){const n=vd(i),o=(await mg()).transaction(Ea,"readwrite"),u=o.objectStore(Ea),h=await u.get(n);return await u.put(e,n),await o.done,(!h||h.fid!==e.fid)&&ub(i,e.fid),e}async function hb(i){const e=vd(i),s=(await mg()).transaction(Ea,"readwrite");await s.objectStore(Ea).delete(e),await s.done}async function _d(i,e){const n=vd(i),o=(await mg()).transaction(Ea,"readwrite"),u=o.objectStore(Ea),h=await u.get(n),m=e(h);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!h||h.fid!==m.fid)&&ub(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pg(i){let e;const n=await _d(i.appConfig,s=>{const o=sx(s),u=ax(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===yp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function sx(i){const e=i||{fid:ZC(),registrationStatus:0};return db(e)}function ax(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(_a.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=ox(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:lx(i)}:{installationEntry:e}}async function ox(i,e){try{const n=await YC(i,e);return jh(i.appConfig,n)}catch(n){throw tb(n)&&n.customData.serverCode===409?await hb(i.appConfig):await jh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function lx(i){let e=await fE(i.appConfig);for(;e.registrationStatus===1;)await ob(100),e=await fE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await pg(i);return s||n}return e}function fE(i){return _d(i,e=>{if(!e)throw _a.create("installation-not-found");return db(e)})}function db(i){return ux(i)?{fid:i.fid,registrationStatus:0}:i}function ux(i){return i.registrationStatus===1&&i.registrationTime+Zw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx({appConfig:i,heartbeatServiceProvider:e},n){const s=hx(i,n),o=$C(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const h={installation:{sdkVersion:Jw,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(h)},p=await ab(()=>fetch(s,m));if(p.ok){const g=await p.json();return ib(g)}else throw await rb("Generate Auth Token",p)}function hx(i,{fid:e}){return`${nb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(i,e=!1){let n;const s=await _d(i.appConfig,u=>{if(!fb(u))throw _a.create("not-registered");const h=u.authToken;if(!e&&mx(h))return u;if(h.requestStatus===1)return n=dx(i,e),u;{if(!navigator.onLine)throw _a.create("app-offline");const m=gx(u);return n=fx(i,m),m}});return n?await n:s.authToken}async function dx(i,e){let n=await mE(i.appConfig);for(;n.authToken.requestStatus===1;)await ob(100),n=await mE(i.appConfig);const s=n.authToken;return s.requestStatus===0?gg(i,e):s}function mE(i){return _d(i,e=>{if(!fb(e))throw _a.create("not-registered");const n=e.authToken;return yx(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fx(i,e){try{const n=await cx(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await jh(i.appConfig,s),n}catch(n){if(tb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await hb(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jh(i.appConfig,s)}throw n}}function fb(i){return i!==void 0&&i.registrationStatus===2}function mx(i){return i.requestStatus===2&&!px(i)}function px(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+qC}function gx(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function yx(i){return i.requestStatus===1&&i.requestTime+Zw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(i){const e=i,{installationEntry:n,registrationPromise:s}=await pg(e);return s?s.catch(console.error):gg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(i,e=!1){const n=i;return await Ex(n),(await gg(n,e)).token}async function Ex(i){const{registrationPromise:e}=await pg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(i){if(!i||!i.options)throw zm("App Configuration");if(!i.name)throw zm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw zm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function zm(i){return _a.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="installations",wx="installations-internal",bx=i=>{const e=i.getProvider("app").getImmediate(),n=Tx(e),s=Sa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Sx=i=>{const e=i.getProvider("app").getImmediate(),n=Sa(e,mb).getImmediate();return{getId:()=>vx(n),getToken:o=>_x(n,o)}};function Ax(){Bi(new fi(mb,bx,"PUBLIC")),Bi(new fi(wx,Sx,"PRIVATE"))}Ax();ii(Xw,fg);ii(Xw,fg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="analytics",Rx="firebase_id",Ix="origin",Cx=60*1e3,xx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jn=new ba("analytics","Analytics",Nx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(i){if(!i.startsWith(yg)){const e=jn.create("invalid-gtag-resource",{gtagURL:i});return In.warn(e.message),""}return i}function pb(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function Ox(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function Mx(i,e){const n=Ox("firebase-js-sdk-policy",{createScriptURL:Dx}),s=document.createElement("script"),o=`${yg}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function Vx(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function kx(i,e,n,s,o,u){const h=s[o];try{if(h)await e[h];else{const p=(await pb(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){In.error(m)}i("config",o,u)}async function Px(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const m=await pb(n);for(const p of h){const g=m.find(b=>b.measurementId===p),E=g&&e[g.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){In.error(u)}}function Lx(i,e,n,s){async function o(u,...h){try{if(u==="event"){const[m,p]=h;await Px(i,e,n,m,p)}else if(u==="config"){const[m,p]=h;await kx(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=h;i("consent",m,p)}else if(u==="get"){const[m,p,g]=h;i("get",m,p,g)}else if(u==="set"){const[m]=h;i("set",m)}else i(u,...h)}catch(m){In.error(m)}}return o}function Ux(i,e,n,s,o){let u=function(...h){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=Lx(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function jx(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=30,Bx=1e3;class qx{constructor(e={},n=Bx){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const gb=new qx;function Hx(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function Fx(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:Hx(s)},u=xx.replace("{app-id}",n),h=await fetch(u,o);if(h.status!==200&&h.status!==304){let m="";try{const p=await h.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw jn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:m})}return h.json()}async function Gx(i,e=gb,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw jn.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw jn.create("no-api-key")}const h=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new Qx;return setTimeout(async()=>{m.abort()},Cx),yb({appId:s,apiKey:o,measurementId:u},h,m,e)}async function yb(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=gb){var u;const{appId:h,measurementId:m}=i;try{await $x(s,e)}catch(p){if(m)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:h,measurementId:m};throw p}try{const p=await Fx(i);return o.deleteThrottleMetadata(h),p}catch(p){const g=p;if(!Kx(g)){if(o.deleteThrottleMetadata(h),m)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:h,measurementId:m};throw p}const E=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?r0(n,o.intervalMillis,zx):r0(n,o.intervalMillis),b={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(h,b),In.debug(`Calling attemptFetch again in ${E} millis`),yb(i,b,s,o)}}function $x(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Kx(i){if(!(i instanceof gi)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class Qx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Yx(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,h=Object.assign(Object.assign({},s),{send_to:u});i("event",n,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(){if(uT())try{await cT()}catch(i){return In.warn(jn.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return In.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Xx(i,e,n,s,o,u,h){var m;const p=Gx(i);p.then(O=>{n[O.measurementId]=O.appId,i.options.measurementId&&O.measurementId!==i.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>In.error(O)),e.push(p);const g=Wx().then(O=>{if(O)return s.getId()}),[E,b]=await Promise.all([p,g]);jx(u)||Mx(u,E.measurementId),o("js",new Date);const I=(m=h==null?void 0:h.config)!==null&&m!==void 0?m:{};return I[Ix]="firebase",I.update=!0,b!=null&&(I[Rx]=b),o("config",E.measurementId,I),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.app=e}_delete(){return delete du[this.app.options.appId],Promise.resolve()}}let du={},pE=[];const gE={};let Bm="dataLayer",Jx="gtag",yE,vb,vE=!1;function eN(){const i=[];if(lT()&&i.push("This is a browser extension environment."),m1()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=jn.create("invalid-analytics-context",{errorInfo:e});In.warn(n.message)}}function tN(i,e,n){eN();const s=i.options.appId;if(!s)throw jn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jn.create("no-api-key");if(du[s]!=null)throw jn.create("already-exists",{id:s});if(!vE){Vx(Bm);const{wrappedGtag:u,gtagCore:h}=Ux(du,pE,gE,Bm,Jx);vb=u,yE=h,vE=!0}return du[s]=Xx(i,pE,gE,e,yE,Bm,n),new Zx(i)}function nN(i=Rp()){i=bt(i);const e=Sa(i,zh);return e.isInitialized()?e.getImmediate():iN(i)}function iN(i,e={}){const n=Sa(i,zh);if(n.isInitialized()){const o=n.getImmediate();if(ws(e,n.getOptions()))return o;throw jn.create("already-initialized")}return n.initialize({options:e})}function rN(i,e,n,s){i=bt(i),Yx(vb,du[i.app.options.appId],e,n,s).catch(o=>In.error(o))}const _E="@firebase/analytics",EE="0.10.12";function sN(){Bi(new fi(zh,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return tN(s,o,n)},"PUBLIC")),Bi(new fi("analytics-internal",i,"PRIVATE")),ii(_E,EE),ii(_E,EE,"esm2017");function i(e){try{const n=e.getProvider(zh).getImmediate();return{logEvent:(s,o,u)=>rN(n,s,o,u)}}catch(n){throw jn.create("interop-component-reg-failed",{reason:n})}}}sN();const aN={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},vg=mT(aN),ze=CC(vg);nN(vg);var Xl={},TE;function oN(){if(TE)return Xl;TE=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.parse=h,Xl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function h(I,O){const M=new u,Q=I.length;if(Q<2)return M;const H=(O==null?void 0:O.decode)||E;let Y=0;do{const ae=I.indexOf("=",Y);if(ae===-1)break;const J=I.indexOf(";",Y),_e=J===-1?Q:J;if(ae>_e){Y=I.lastIndexOf(";",ae-1)+1;continue}const fe=m(I,Y,ae),be=p(I,ae,fe),U=I.slice(fe,be);if(M[U]===void 0){let S=m(I,ae+1,_e),R=p(I,_e,S);const D=H(I.slice(S,R));M[U]=D}Y=_e+1}while(Y<Q);return M}function m(I,O,M){do{const Q=I.charCodeAt(O);if(Q!==32&&Q!==9)return O}while(++O<M);return M}function p(I,O,M){for(;O>M;){const Q=I.charCodeAt(--O);if(Q!==32&&Q!==9)return O+1}return M}function g(I,O,M){const Q=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(I))throw new TypeError(`argument name is invalid: ${I}`);const H=Q(O);if(!e.test(H))throw new TypeError(`argument val is invalid: ${O}`);let Y=I+"="+H;if(!M)return Y;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);Y+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);Y+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);Y+="; Path="+M.path}if(M.expires){if(!b(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);Y+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(Y+="; HttpOnly"),M.secure&&(Y+="; Secure"),M.partitioned&&(Y+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return Y}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function b(I){return o.call(I)==="[object Date]"}return Xl}oN();var wE="popstate";function lN(i={}){function e(o,u){let{pathname:h="/",search:m="",hash:p=""}=Ca(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),vp("",{pathname:h,search:m,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),m="";if(h&&h.getAttribute("href")){let p=o.location.href,g=p.indexOf("#");m=g===-1?p:p.slice(0,g)}return m+"#"+(typeof u=="string"?u:Su(u))}function s(o,u){si(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return cN(e,n,s,i)}function vt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function si(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uN(){return Math.random().toString(36).substring(2,10)}function bE(i,e){return{usr:i.state,key:i.key,idx:e}}function vp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ca(e):e,state:n,key:e&&e.key||s||uN()}}function Su({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ca(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function cN(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m="POP",p=null,g=E();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function E(){return(h.state||{idx:null}).idx}function b(){m="POP";let H=E(),Y=H==null?null:H-g;g=H,p&&p({action:m,location:Q.location,delta:Y})}function I(H,Y){m="PUSH";let ae=vp(Q.location,H,Y);n&&n(ae,H),g=E()+1;let J=bE(ae,g),_e=Q.createHref(ae);try{h.pushState(J,"",_e)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;o.location.assign(_e)}u&&p&&p({action:m,location:Q.location,delta:1})}function O(H,Y){m="REPLACE";let ae=vp(Q.location,H,Y);n&&n(ae,H),g=E();let J=bE(ae,g),_e=Q.createHref(ae);h.replaceState(J,"",_e),u&&p&&p({action:m,location:Q.location,delta:0})}function M(H){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,ae=typeof H=="string"?H:Su(H);return ae=ae.replace(/ $/,"%20"),vt(Y,`No window.location.(origin|href) available to create URL for href: ${ae}`),new URL(ae,Y)}let Q={get action(){return m},get location(){return i(o,h)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(wE,b),p=H,()=>{o.removeEventListener(wE,b),p=null}},createHref(H){return e(o,H)},createURL:M,encodeLocation(H){let Y=M(H);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:I,replace:O,go(H){return h.go(H)}};return Q}function _b(i,e,n="/"){return hN(i,e,n,!1)}function hN(i,e,n,s){let o=typeof e=="string"?Ca(e):e,u=Ir(o.pathname||"/",n);if(u==null)return null;let h=Eb(i);dN(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=bN(u);m=TN(h[p],g,s)}return m}function Eb(i,e=[],n=[],s=""){let o=(u,h,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(vt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=Tr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(vt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Eb(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:_N(g,u.index),routesMeta:E})};return i.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,h);else for(let p of Tb(u.path))o(u,h,p)}),e}function Tb(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=Tb(s.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function dN(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:EN(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var fN=/^:[\w-]+$/,mN=3,pN=2,gN=1,yN=10,vN=-2,SE=i=>i==="*";function _N(i,e){let n=i.split("/"),s=n.length;return n.some(SE)&&(s+=vN),e&&(s+=pN),n.filter(o=>!SE(o)).reduce((o,u)=>o+(fN.test(u)?mN:u===""?gN:yN),s)}function EN(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function TN(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",b=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),I=p.route;if(!b&&g&&n&&!s[s.length-1].route.index&&(b=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!b)return null;Object.assign(o,b.params),h.push({params:o,pathname:Tr([u,b.pathname]),pathnameBase:IN(Tr([u,b.pathnameBase])),route:I}),b.pathnameBase!=="/"&&(u=Tr([u,b.pathnameBase]))}return h}function Bh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=wN(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:b},I)=>{if(E==="*"){let M=m[I]||"";h=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const O=m[I];return b&&!O?g[E]=void 0:g[E]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function wN(i,e=!1,n=!0){si(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function bN(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ir(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function SN(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Ca(i):i;return{pathname:n?n.startsWith("/")?n:AN(n,e):e,search:CN(s),hash:xN(o)}}function AN(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function qm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RN(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _g(i){let e=RN(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Eg(i,e,n,s=!1){let o;typeof i=="string"?o=Ca(i):(o={...i},vt(!o.pathname||!o.pathname.includes("?"),qm("?","pathname","search",o)),vt(!o.pathname||!o.pathname.includes("#"),qm("#","pathname","hash",o)),vt(!o.search||!o.search.includes("#"),qm("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=n;else{let b=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),b-=1;o.pathname=I.join("/")}m=b>=0?e[b]:"/"}let p=SN(o,m),g=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var Tr=i=>i.join("/").replace(/\/\/+/g,"/"),IN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),CN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,xN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function NN(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var wb=["POST","PUT","PATCH","DELETE"];new Set(wb);var DN=["GET",...wb];new Set(DN);var Go=V.createContext(null);Go.displayName="DataRouter";var Ed=V.createContext(null);Ed.displayName="DataRouterState";var bb=V.createContext({isTransitioning:!1});bb.displayName="ViewTransition";var ON=V.createContext(new Map);ON.displayName="Fetchers";var MN=V.createContext(null);MN.displayName="Await";var yi=V.createContext(null);yi.displayName="Navigation";var ku=V.createContext(null);ku.displayName="Location";var Hi=V.createContext({outlet:null,matches:[],isDataRoute:!1});Hi.displayName="Route";var Tg=V.createContext(null);Tg.displayName="RouteError";function VN(i,{relative:e}={}){vt($o(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=V.useContext(yi),{hash:o,pathname:u,search:h}=Pu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Tr([n,u])),s.createHref({pathname:m,search:h,hash:o})}function $o(){return V.useContext(ku)!=null}function Fi(){return vt($o(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(ku).location}var Sb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ab(i){V.useContext(yi).static||V.useLayoutEffect(i)}function Ko(){let{isDataRoute:i}=V.useContext(Hi);return i?KN():kN()}function kN(){vt($o(),"useNavigate() may be used only in the context of a <Router> component.");let i=V.useContext(Go),{basename:e,navigator:n}=V.useContext(yi),{matches:s}=V.useContext(Hi),{pathname:o}=Fi(),u=JSON.stringify(_g(s)),h=V.useRef(!1);return Ab(()=>{h.current=!0}),V.useCallback((p,g={})=>{if(si(h.current,Sb),!h.current)return;if(typeof p=="number"){n.go(p);return}let E=Eg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Tr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}V.createContext(null);function Pu(i,{relative:e}={}){let{matches:n}=V.useContext(Hi),{pathname:s}=Fi(),o=JSON.stringify(_g(n));return V.useMemo(()=>Eg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function PN(i,e){return Rb(i,e)}function Rb(i,e,n,s){var ae;vt($o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=V.useContext(yi),{matches:h}=V.useContext(Hi),m=h[h.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",b=m&&m.route;{let J=b&&b.path||"";Ib(g,!b||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let I=Fi(),O;if(e){let J=typeof e=="string"?Ca(e):e;vt(E==="/"||((ae=J.pathname)==null?void 0:ae.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${J.pathname}" was given in the \`location\` prop.`),O=J}else O=I;let M=O.pathname||"/",Q=M;if(E!=="/"){let J=E.replace(/^\//,"").split("/");Q="/"+M.replace(/^\//,"").split("/").slice(J.length).join("/")}let H=!u&&n&&n.matches&&n.matches.length>0?n.matches:_b(i,{pathname:Q});si(b||H!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),si(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=BN(H&&H.map(J=>Object.assign({},J,{params:Object.assign({},p,J.params),pathname:Tr([E,o.encodeLocation?o.encodeLocation(J.pathname).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?E:Tr([E,o.encodeLocation?o.encodeLocation(J.pathnameBase).pathname:J.pathnameBase])})),h,n,s);return e&&Y?V.createElement(ku.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},Y):Y}function LN(){let i=$N(),e=NN(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:u},"ErrorBoundary")," or"," ",V.createElement("code",{style:u},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:o},n):null,h)}var UN=V.createElement(LN,null),jN=class extends V.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?V.createElement(Hi.Provider,{value:this.props.routeContext},V.createElement(Tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zN({routeContext:i,match:e,children:n}){let s=V.useContext(Go);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Hi.Provider,{value:i},n)}function BN(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);vt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:b}=n,I=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||I){h=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let b,I=!1,O=null,M=null;n&&(b=u&&g.route.id?u[g.route.id]:void 0,O=g.route.errorElement||UN,h&&(m<0&&E===0?(Ib("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,M=null):m===E&&(I=!0,M=g.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,E+1)),H=()=>{let Y;return b?Y=O:I?Y=M:g.route.Component?Y=V.createElement(g.route.Component,null):g.route.element?Y=g.route.element:Y=p,V.createElement(zN,{match:g,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:Y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?V.createElement(jN,{location:n.location,revalidation:n.revalidation,component:O,error:b,children:H(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):H()},null)}function wg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qN(i){let e=V.useContext(Go);return vt(e,wg(i)),e}function HN(i){let e=V.useContext(Ed);return vt(e,wg(i)),e}function FN(i){let e=V.useContext(Hi);return vt(e,wg(i)),e}function bg(i){let e=FN(i),n=e.matches[e.matches.length-1];return vt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function GN(){return bg("useRouteId")}function $N(){var s;let i=V.useContext(Tg),e=HN("useRouteError"),n=bg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function KN(){let{router:i}=qN("useNavigate"),e=bg("useNavigate"),n=V.useRef(!1);return Ab(()=>{n.current=!0}),V.useCallback(async(o,u={})=>{si(n.current,Sb),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var AE={};function Ib(i,e,n){!e&&!AE[i]&&(AE[i]=!0,si(!1,n))}V.memo(QN);function QN({routes:i,future:e,state:n}){return Rb(i,void 0,n,e)}function fa({to:i,replace:e,state:n,relative:s}){vt($o(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=V.useContext(yi);si(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=V.useContext(Hi),{pathname:h}=Fi(),m=Ko(),p=Eg(i,_g(u),h,s==="path"),g=JSON.stringify(p);return V.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function hs(i){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YN({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){vt(!$o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),m=V.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=Ca(n));let{pathname:p="/",search:g="",hash:E="",state:b=null,key:I="default"}=n,O=V.useMemo(()=>{let M=Ir(p,h);return M==null?null:{location:{pathname:M,search:g,hash:E,state:b,key:I},navigationType:s}},[h,p,g,E,b,I,s]);return si(O!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:V.createElement(yi.Provider,{value:m},V.createElement(ku.Provider,{children:e,value:O}))}function WN({children:i,location:e}){return PN(_p(i),e)}function _p(i,e=[]){let n=[];return V.Children.forEach(i,(s,o)=>{if(!V.isValidElement(s))return;let u=[...e,o];if(s.type===V.Fragment){n.push.apply(n,_p(s.props.children,u));return}vt(s.type===hs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=_p(s.props.children,u)),n.push(h)}),n}var Eh="get",Th="application/x-www-form-urlencoded";function Td(i){return i!=null&&typeof i.tagName=="string"}function XN(i){return Td(i)&&i.tagName.toLowerCase()==="button"}function ZN(i){return Td(i)&&i.tagName.toLowerCase()==="form"}function JN(i){return Td(i)&&i.tagName.toLowerCase()==="input"}function eD(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function tD(i,e){return i.button===0&&(!e||e==="_self")&&!eD(i)}var dh=null;function nD(){if(dh===null)try{new FormData(document.createElement("form"),0),dh=!1}catch{dh=!0}return dh}var iD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hm(i){return i!=null&&!iD.has(i)?(si(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Th}"`),null):i}function rD(i,e){let n,s,o,u,h;if(ZN(i)){let m=i.getAttribute("action");s=m?Ir(m,e):null,n=i.getAttribute("method")||Eh,o=Hm(i.getAttribute("enctype"))||Th,u=new FormData(i)}else if(XN(i)||JN(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Ir(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Eh,o=Hm(i.getAttribute("formenctype"))||Hm(m.getAttribute("enctype"))||Th,u=new FormData(m,i),!nD()){let{name:g,type:E,value:b}=i;if(E==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,b)}}else{if(Td(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Eh,s=null,o=Th,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:h}}function Sg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function sD(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function oD(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await sD(u,n);return h.links?h.links():[]}return[]}));return hD(s.flat(1).filter(aD).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function RE(i,e,n,s,o,u){let h=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>h(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var b;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function lD(i,e,{includeHydrateFallback:n}={}){return uD(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function uD(i){return[...new Set(i)]}function cD(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function hD(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(cD(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var dD=new Set([100,101,204,205]);function fD(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&Ir(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Cb(){let i=V.useContext(Go);return Sg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function mD(){let i=V.useContext(Ed);return Sg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ag=V.createContext(void 0);Ag.displayName="FrameworkContext";function xb(){let i=V.useContext(Ag);return Sg(i,"You must render this element inside a <HydratedRouter> element"),i}function pD(i,e){let n=V.useContext(Ag),[s,o]=V.useState(!1),[u,h]=V.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:b}=e,I=V.useRef(null);V.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let Q=Y=>{Y.forEach(ae=>{h(ae.isIntersecting)})},H=new IntersectionObserver(Q,{threshold:.5});return I.current&&H.observe(I.current),()=>{H.disconnect()}}},[i]),V.useEffect(()=>{if(s){let Q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let O=()=>{o(!0)},M=()=>{o(!1),h(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:Zl(m,O),onBlur:Zl(p,M),onMouseEnter:Zl(g,O),onMouseLeave:Zl(E,M),onTouchStart:Zl(b,O)}]:[!1,I,{}]}function Zl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function gD({page:i,...e}){let{router:n}=Cb(),s=V.useMemo(()=>_b(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?V.createElement(vD,{page:i,matches:s,...e}):null}function yD(i){let{manifest:e,routeModules:n}=xb(),[s,o]=V.useState([]);return V.useEffect(()=>{let u=!1;return oD(i,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[i,e,n]),s}function vD({page:i,matches:e,...n}){let s=Fi(),{manifest:o,routeModules:u}=xb(),{basename:h}=Cb(),{loaderData:m,matches:p}=mD(),g=V.useMemo(()=>RE(i,e,p,o,s,"data"),[i,e,p,o,s]),E=V.useMemo(()=>RE(i,e,p,o,s,"assets"),[i,e,p,o,s]),b=V.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let M=new Set,Q=!1;if(e.forEach(Y=>{var J;let ae=o.routes[Y.route.id];!ae||!ae.hasLoader||(!g.some(_e=>_e.route.id===Y.route.id)&&Y.route.id in m&&((J=u[Y.route.id])!=null&&J.shouldRevalidate)||ae.hasClientLoader?Q=!0:M.add(Y.route.id))}),M.size===0)return[];let H=fD(i,h);return Q&&M.size>0&&H.searchParams.set("_routes",e.filter(Y=>M.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[H.pathname+H.search]},[h,m,s,o,g,e,i,u]),I=V.useMemo(()=>lD(E,o),[E,o]),O=yD(E);return V.createElement(V.Fragment,null,b.map(M=>V.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),I.map(M=>V.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),O.map(({key:M,link:Q})=>V.createElement("link",{key:M,...Q})))}function _D(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Nb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nb&&(window.__reactRouterVersion="7.5.2")}catch{}function ED({basename:i,children:e,window:n}){let s=V.useRef();s.current==null&&(s.current=lN({window:n,v5Compat:!0}));let o=s.current,[u,h]=V.useState({action:o.action,location:o.location}),m=V.useCallback(p=>{V.startTransition(()=>h(p))},[h]);return V.useLayoutEffect(()=>o.listen(m),[o,m]),V.createElement(YN,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Db=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rg=V.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:E,viewTransition:b,...I},O){let{basename:M}=V.useContext(yi),Q=typeof g=="string"&&Db.test(g),H,Y=!1;if(typeof g=="string"&&Q&&(H=g,Nb))try{let R=new URL(window.location.href),D=g.startsWith("//")?new URL(R.protocol+g):new URL(g),x=Ir(D.pathname,M);D.origin===R.origin&&x!=null?g=x+D.search+D.hash:Y=!0}catch{si(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=VN(g,{relative:o}),[J,_e,fe]=pD(s,I),be=SD(g,{replace:h,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:b});function U(R){e&&e(R),R.defaultPrevented||be(R)}let S=V.createElement("a",{...I,...fe,href:H||ae,onClick:Y||u?e:U,ref:_D(O,_e),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return J&&!Q?V.createElement(V.Fragment,null,S,V.createElement(gD,{page:ae})):S});Rg.displayName="Link";var TD=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:m,children:p,...g},E){let b=Pu(h,{relative:g.relative}),I=Fi(),O=V.useContext(Ed),{navigator:M,basename:Q}=V.useContext(yi),H=O!=null&&xD(b)&&m===!0,Y=M.encodeLocation?M.encodeLocation(b).pathname:b.pathname,ae=I.pathname,J=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),J=J?J.toLowerCase():null,Y=Y.toLowerCase()),J&&Q&&(J=Ir(J,Q)||J);const _e=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let fe=ae===Y||!o&&ae.startsWith(Y)&&ae.charAt(_e)==="/",be=J!=null&&(J===Y||!o&&J.startsWith(Y)&&J.charAt(Y.length)==="/"),U={isActive:fe,isPending:be,isTransitioning:H},S=fe?e:void 0,R;typeof s=="function"?R=s(U):R=[s,fe?"active":null,be?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(U):u;return V.createElement(Rg,{...g,"aria-current":S,className:R,ref:E,style:D,to:h,viewTransition:m},typeof p=="function"?p(U):p)});TD.displayName="NavLink";var wD=V.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:h=Eh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:b,...I},O)=>{let M=ID(),Q=CD(m,{relative:g}),H=h.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&Db.test(m),ae=J=>{if(p&&p(J),J.defaultPrevented)return;J.preventDefault();let _e=J.nativeEvent.submitter,fe=(_e==null?void 0:_e.getAttribute("formmethod"))||h;M(_e||J.currentTarget,{fetcherKey:e,method:fe,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:b})};return V.createElement("form",{ref:O,method:H,action:Q,onSubmit:s?p:ae,...I,"data-discover":!Y&&i==="render"?"true":void 0})});wD.displayName="Form";function bD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ob(i){let e=V.useContext(Go);return vt(e,bD(i)),e}function SD(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let m=Ko(),p=Fi(),g=Pu(i,{relative:u});return V.useCallback(E=>{if(tD(E,e)){E.preventDefault();let b=n!==void 0?n:Su(p)===Su(g);m(i,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[p,m,g,n,s,e,i,o,u,h])}var AD=0,RD=()=>`__${String(++AD)}__`;function ID(){let{router:i}=Ob("useSubmit"),{basename:e}=V.useContext(yi),n=GN();return V.useCallback(async(s,o={})=>{let{action:u,method:h,encType:m,formData:p,body:g}=rD(s,e);if(o.navigate===!1){let E=o.fetcherKey||RD();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function CD(i,{relative:e}={}){let{basename:n}=V.useContext(yi),s=V.useContext(Hi);vt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Pu(i||".",{relative:e})},h=Fi();if(i==null){u.search=h.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Tr([n,u.pathname])),Su(u)}function xD(i,e={}){let n=V.useContext(bb);vt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ob("useViewTransitionState"),o=Pu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Ir(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Ir(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Bh(o.pathname,h)!=null||Bh(o.pathname,u)!=null}new TextEncoder;[...dD];var ND=tT();const IE=eT(ND);function Ig(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DD=Mb,Vb=new ba("auth","Firebase",Mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Xh("@firebase/auth");function OD(i,...e){qh.logLevel<=Fe.WARN&&qh.warn(`Auth (${zo}): ${i}`,...e)}function wh(i,...e){qh.logLevel<=Fe.ERROR&&qh.error(`Auth (${zo}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(i,...e){throw Cg(i,...e)}function ji(i,...e){return Cg(i,...e)}function kb(i,e,n){const s=Object.assign(Object.assign({},DD()),{[e]:n});return new ba("auth","Firebase",s).create(e,{appName:i.name})}function wr(i){return kb(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Vb.create(i,...e)}function Ce(i,e,...n){if(!i)throw Cg(e,...n)}function vr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw wh(e),new Error(e)}function Cr(i,e){i||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function MD(){return CE()==="http:"||CE()==="https:"}function CE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MD()||lT()||"connection"in navigator)?navigator.onLine:!0}function kD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cr(n>e,"Short delay should be less than long delay!"),this.isMobile=l1()||h1()}get(){return VD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i,e){Cr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UD=new Lu(3e4,6e4);function Nr(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Dr(i,e,n,s,o={}){return Lb(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=Iu(Object.assign({key:i.config.apiKey},h)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return c1()||(g.referrerPolicy="no-referrer"),Pb.fetch()(await Ub(i,i.config.apiHost,n,m),g)})}async function Lb(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},PD),e);try{const o=new zD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw fh(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw fh(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw fh(i,"user-disabled",h);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw kb(i,E,g);pi(i,E)}}catch(o){if(o instanceof gi)throw o;pi(i,"network-request-failed",{message:String(o)})}}async function Uu(i,e,n,s,o={}){const u=await Dr(i,e,n,s,o);return"mfaPendingCredential"in u&&pi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ub(i,e,n,s){const o=`${e}${n}?${s}`,u=i,h=u.config.emulator?xg(i.config,o):`${i.config.apiScheme}://${o}`;return LD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function jD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ji(this.auth,"network-request-failed")),UD.get())})}}function fh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ji(i,e,s);return o.customData._tokenResponse=n,o}function xE(i){return i!==void 0&&i.enterprise!==void 0}class BD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qD(i,e){return Dr(i,"GET","/v2/recaptchaConfig",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(i,e){return Dr(i,"POST","/v1/accounts:delete",e)}async function Hh(i,e){return Dr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FD(i,e=!1){const n=bt(i),s=await n.getIdToken(e),o=Ng(s);Ce(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:fu(Fm(o.auth_time)),issuedAtTime:fu(Fm(o.iat)),expirationTime:fu(Fm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Fm(i){return Number(i)*1e3}function Ng(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{const o=rT(n);return o?JSON.parse(o):(wh("Failed to decode base64 JWT payload"),null)}catch(o){return wh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NE(i){const e=Ng(i);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gi&&GD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function GD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Au(i,Hh(n,{idToken:s}));Ce(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?jb(u.providerUserInfo):[],m=QD(i.providerData,h),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Tp(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,b)}async function KD(i){const e=bt(i);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function jb(i){return i.map(e=>{var{providerId:n}=e,s=Ig(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(i,e){const n=await Lb(i,{},async()=>{const s=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await Ub(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Pb.fetch()(h,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WD(i,e){return Dr(i,"POST","/v2/accounts:revokeToken",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await YD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new No;return s&&(Ce(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Ce(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(i,e){Ce(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class di{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $D(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Tp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Au(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FD(this,e)}reload(){return KD(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await Au(this,HD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,h,m,p,g,E;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,I=(o=n.email)!==null&&o!==void 0?o:void 0,O=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(h=n.photoURL)!==null&&h!==void 0?h:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,H=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(g=n.createdAt)!==null&&g!==void 0?g:void 0,ae=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:J,emailVerified:_e,isAnonymous:fe,providerData:be,stsTokenManager:U}=n;Ce(J&&U,e,"internal-error");const S=No.fromJSON(this.name,U);Ce(typeof J=="string",e,"internal-error"),us(b,e.name),us(I,e.name),Ce(typeof _e=="boolean",e,"internal-error"),Ce(typeof fe=="boolean",e,"internal-error"),us(O,e.name),us(M,e.name),us(Q,e.name),us(H,e.name),us(Y,e.name),us(ae,e.name);const R=new di({uid:J,auth:e,email:I,emailVerified:_e,displayName:b,isAnonymous:fe,photoURL:M,phoneNumber:O,tenantId:Q,stsTokenManager:S,createdAt:Y,lastLoginAt:ae});return be&&Array.isArray(be)&&(R.providerData=be.map(D=>Object.assign({},D))),H&&(R._redirectEventId=H),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new No;o.updateFromServerResponse(n);const u=new di({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Fh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ce(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?jb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new No;m.updateFromIdToken(s);const p=new di({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Tp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;function _r(i){Cr(i instanceof Function,"Expected a class definition");let e=DE.get(i);return e?(Cr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,DE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zb.type="NONE";const OE=zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(i,e,n){return`firebase:${i}:${e}:${n}`}class Do{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=bh(this.userKey,o.apiKey,u),this.fullPersistenceKey=bh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Do(_r(OE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||_r(OE);const h=bh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(h);if(E){let b;if(typeof E=="string"){const I=await Hh(e,{idToken:E}).catch(()=>{});if(!I)break;b=await di._fromGetAccountInfoResponse(e,I,E)}else b=di._fromJSON(e,E);g!==u&&(m=b),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Do(u,e,s):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Do(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($b(e))return"Blackberry";if(Kb(e))return"Webos";if(qb(e))return"Safari";if((e.includes("chrome/")||Hb(e))&&!e.includes("edge/"))return"Chrome";if(Gb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Bb(i=cn()){return/firefox\//i.test(i)}function qb(i=cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hb(i=cn()){return/crios\//i.test(i)}function Fb(i=cn()){return/iemobile/i.test(i)}function Gb(i=cn()){return/android/i.test(i)}function $b(i=cn()){return/blackberry/i.test(i)}function Kb(i=cn()){return/webos/i.test(i)}function Dg(i=cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function XD(i=cn()){var e;return Dg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZD(){return d1()&&document.documentMode===10}function Qb(i=cn()){return Dg(i)||Gb(i)||Kb(i)||$b(i)||/windows phone/i.test(i)||Fb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(i,e=[]){let n;switch(i){case"Browser":n=ME(cn());break;case"Worker":n=`${ME(cn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(i,e={}){return Dr(i,"GET","/v2/passwordPolicy",Nr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=6;class nO{constructor(e){var n,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:tO,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,h,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new JD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),s=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ni(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(wr(this));const n=e?bt(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eO(this),n=new nO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ba("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await WD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xa(i){return bt(i)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=_1(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rO(i){wd=i}function Wb(i){return wd.loadJS(i)}function sO(){return wd.recaptchaEnterpriseScript}function aO(){return wd.gapiScript}function oO(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class lO{constructor(){this.enterprise=new uO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class uO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const cO="recaptcha-enterprise",Xb="NO_RECAPTCHA";class hO{constructor(e){this.type=cO,this.auth=xa(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{qD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new BD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;xE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(Xb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lO().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!n&&xE(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=sO();p.length!==0&&(p+=m),Wb(p).then(()=>{o(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function kE(i,e,n,s=!1,o=!1){const u=new hO(i);let h;if(o)h=Xb;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function wp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await kE(i,e,n,n==="getOobCode");return s(i,h)}else return s(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await kE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(i,e){const n=Sa(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ws(u,e??{}))return o;pi(o,"already-initialized")}return n.initialize({options:e})}function fO(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function mO(i,e,n){const s=xa(i);Ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Zb(e),{host:h,port:m}=pO(e),p=m===null?"":`:${m}`,g={url:`${u}//${h}${p}/`},E=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ce(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ce(ws(g,s.config.emulator)&&ws(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,gO()}function Zb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function pO(i){const e=Zb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:PE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:PE(h)}}}function PE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function gO(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function yO(i,e){return Dr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(i,e){return Uu(i,"POST","/v1/accounts:signInWithPassword",Nr(i,e))}async function _O(i,e){return Dr(i,"POST","/v1/accounts:sendOobCode",Nr(i,e))}async function EO(i,e){return _O(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Nr(i,e))}async function wO(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Og{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ru(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ru(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",vO);case"emailLink":return TO(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,s,"signUpPassword",yO);case"emailLink":return wO(e,{idToken:n,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(i,e){return Uu(i,"POST","/v1/accounts:signInWithIdp",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="http://localhost";class Ta extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Ig(n,["providerId","signInMethod"]);if(!s||!o)return null;const h=new Ta(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Oo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Oo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oo(e,n)}buildRequest(){const e={requestUri:bO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AO(i){const e=Jl(eu(i)).link,n=e?Jl(eu(e)).deep_link_id:null,s=Jl(eu(i)).deep_link_id;return(s?Jl(eu(s)).link:null)||s||n||e||i}class Mg{constructor(e){var n,s,o,u,h,m;const p=Jl(eu(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,b=SO((o=p.mode)!==null&&o!==void 0?o:null);Ce(g&&E&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=AO(e);try{return new Mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return Ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Mg.parseLink(n);return Ce(s,"argument-error"),Ru._fromEmailAndCode(e,s.code,s.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends Jb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends ju{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ta._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fs.credential(n,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ju{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends ju{constructor(){super("twitter.com")}static credential(e,n){return Ta._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ps.credential(n,s)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(i,e){return Uu(i,"POST","/v1/accounts:signUp",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await di._fromIdTokenResponse(e,s,o),h=LE(s);return new wa({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=LE(s);return new wa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function LE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends gi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Gh(e,n,s,o)}}function eS(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(i,u,e,s):u})}async function IO(i,e,n=!1){const s=await Au(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return wa._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(i,e,n=!1){const{auth:s}=i;if(ni(s.app))return Promise.reject(wr(s));const o="reauthenticate";try{const u=await Au(i,eS(s,o,e,i),n);Ce(u.idToken,s,"internal-error");const h=Ng(u.idToken);Ce(h,s,"internal-error");const{sub:m}=h;return Ce(i.uid===m,s,"user-mismatch"),wa._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&pi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i,e,n=!1){if(ni(i.app))return Promise.reject(wr(i));const s="signIn",o=await eS(i,s,e),u=await wa._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function xO(i,e){return tS(xa(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(i){const e=xa(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NO(i,e,n){if(ni(i.app))return Promise.reject(wr(i));const s=xa(i),h=await wp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&nS(i),p}),m=await wa._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function DO(i,e,n){return ni(i.app)?Promise.reject(wr(i)):xO(bt(i),Qo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&nS(i),s})}async function iS(i,e){const n=bt(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await EO(n.auth,o);u!==i.email&&await i.reload()}function OO(i,e,n,s){return bt(i).onIdTokenChanged(e,n,s)}function MO(i,e,n){return bt(i).beforeAuthStateChanged(e,n)}function VO(i,e,n,s){return bt(i).onAuthStateChanged(e,n,s)}function kO(i){return bt(i).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=1e3,LO=10;class sS extends rS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);ZD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LO):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},PO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sS.type="LOCAL";const UO=sS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS extends rS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aS.type="SESSION";const oS=aS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new bd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async g=>g(n.origin,u)),p=await jO(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=Vg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(b){const I=b;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function BO(i){zi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function qO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function FO(){return lS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebaseLocalStorageDb",GO=1,Kh="firebaseLocalStorage",cS="fbase_key";class zu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sd(i,e){return i.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function $O(){const i=indexedDB.deleteDatabase(uS);return new zu(i).toPromise()}function bp(){const i=indexedDB.open(uS,GO);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Kh,{keyPath:cS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Kh)?e(s):(s.close(),await $O(),e(await bp()))})})}async function UE(i,e,n){const s=Sd(i,!0).put({[cS]:e,value:n});return new zu(s).toPromise()}async function KO(i,e){const n=Sd(i,!1).get(e),s=await new zu(n).toPromise();return s===void 0?null:s.value}function jE(i,e){const n=Sd(i,!0).delete(e);return new zu(n).toPromise()}const QO=800,YO=3;class hS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>YO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bd._getInstance(FO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qO(),!this.activeServiceWorker)return;this.sender=new zO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await UE(e,$h,"1"),await jE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>UE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>KO(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Sd(o,!1).getAll();return new zu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hS.type="LOCAL";const WO=hS;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(i,e){return e?_r(e):(Ce(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZO(i){return tS(i.auth,new kg(i),i.bypassAuthState)}function JO(i){const{auth:e,user:n}=i;return Ce(n,e,"internal-error"),CO(n,new kg(i),i.bypassAuthState)}async function e4(i){const{auth:e,user:n}=i;return Ce(n,e,"internal-error"),IO(n,new kg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZO;case"linkViaPopup":case"linkViaRedirect":return e4;case"reauthViaPopup":case"reauthViaRedirect":return JO;default:pi(this.auth,"internal-error")}}resolve(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new Lu(2e3,1e4);class Co extends dS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Cr(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t4.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="pendingRedirect",Sh=new Map;class i4 extends dS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const s=await r4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r4(i,e){const n=o4(e),s=a4(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function s4(i,e){Sh.set(i._key(),e)}function a4(i){return _r(i._redirectPersistence)}function o4(i){return bh(n4,i.config.apiKey,i.name)}async function l4(i,e,n=!1){if(ni(i.app))return Promise.reject(wr(i));const s=xa(i),o=XO(s,e),h=await new i4(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=10*60*1e3;class c4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!fS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ji(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u4&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(e))}saveEventToCache(e){this.cachedEventUids.add(zE(e)),this.lastProcessedEventTime=Date.now()}}function zE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function fS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(i,e={}){return Dr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m4=/^https?/;async function p4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await d4(i);for(const n of e)try{if(g4(n))return}catch{}pi(i,"unauthorized-domain")}function g4(i){const e=Ep(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!m4.test(n))return!1;if(f4.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Lu(3e4,6e4);function BE(){const i=zi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function v4(i){return new Promise((e,n)=>{var s,o,u;function h(){BE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BE(),n(ji(i,"network-request-failed"))},timeout:y4.get()})}if(!((o=(s=zi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=zi().gapi)===null||u===void 0)&&u.load)h();else{const m=oO("iframefcb");return zi()[m]=()=>{gapi.load?h():n(ji(i,"network-request-failed"))},Wb(`${aO()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function _4(i){return Ah=Ah||v4(i),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new Lu(5e3,15e3),T4="__/auth/iframe",w4="emulator/auth/iframe",b4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A4(i){const e=i.config;Ce(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?xg(e,w4):`https://${i.config.authDomain}/${T4}`,s={apiKey:e.apiKey,appName:i.name,v:zo},o=S4.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Iu(s).slice(1)}`}async function R4(i){const e=await _4(i),n=zi().gapi;return Ce(n,i,"internal-error"),e.open({where:document.body,url:A4(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b4,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=ji(i,"network-request-failed"),m=zi().setTimeout(()=>{u(h)},E4.get());function p(){zi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C4=500,x4=600,N4="_blank",D4="http://localhost";class qE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O4(i,e,n,s=C4,o=x4){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},I4),{width:s.toString(),height:o.toString(),top:u,left:h}),g=cn().toLowerCase();n&&(m=Hb(g)?N4:n),Bb(g)&&(e=e||D4,p.scrollbars="yes");const E=Object.entries(p).reduce((I,[O,M])=>`${I}${O}=${M},`,"");if(XD(g)&&m!=="_self")return M4(e||"",m),new qE(null);const b=window.open(e||"",m,E);Ce(b,i,"popup-blocked");try{b.focus()}catch{}return new qE(b)}function M4(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4="__/auth/handler",k4="emulator/auth/handler",P4=encodeURIComponent("fac");async function HE(i,e,n,s,o,u){Ce(i.config.authDomain,i,"auth-domain-config-required"),Ce(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:zo,eventId:o};if(e instanceof Jb){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",v1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))h[E]=b}if(e instanceof ju){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(h.scopes=E.join(","))}i.tenantId&&(h.tid=i.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),g=p?`#${P4}=${encodeURIComponent(p)}`:"";return`${L4(i)}?${Iu(m).slice(1)}${g}`}function L4({config:i}){return i.emulator?xg(i,k4):`https://${i.authDomain}/${V4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class U4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oS,this._completeRedirectFn=l4,this._overrideRedirectResult=s4}async _openPopup(e,n,s,o){var u;Cr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await HE(e,n,s,Ep(),o);return O4(e,h,Vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await HE(e,n,s,Ep(),o);return BO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Cr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await R4(e),s=new c4(e);return n.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gm,{type:Gm},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Gm];h!==void 0&&n(!!h),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=p4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qb()||qb()||Dg()}}const j4=U4;var FE="@firebase/auth",GE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q4(i){Bi(new fi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yb(i)},g=new iO(s,o,u,p);return fO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Bi(new fi("auth-internal",e=>{const n=xa(e.getProvider("auth").getImmediate());return(s=>new z4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ii(FE,GE,B4(i)),ii(FE,GE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=5*60,F4=oT("authIdTokenMaxAge")||H4;let $E=null;const G4=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>F4)return;const o=n==null?void 0:n.token;$E!==o&&($E=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function $4(i=Rp()){const e=Sa(i,"auth");if(e.isInitialized())return e.getImmediate();const n=dO(i,{popupRedirectResolver:j4,persistence:[WO,UO,oS]}),s=oT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=G4(u.toString());MO(n,h,()=>h(n.currentUser)),OO(n,m=>h(m))}}const o=sT("auth");return o&&mO(n,`http://${o}`),n}function K4(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}rO({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ji("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",K4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q4("Browser");const mS=V.createContext();function Or(){return V.useContext(mS)}function Q4({children:i}){const[e,n]=V.useState(null),[s,o]=V.useState(!0),u=$4(vg);V.useEffect(()=>VO(u,I=>{n(I),o(!1)}),[u]);const E={currentUser:e,loading:s,signup:(b,I)=>NO(u,b,I),login:(b,I)=>DO(u,b,I),logout:async()=>{await kO(u),n(null)},resendVerificationEmail:async()=>{e&&await iS(e)},emailVerified:(e==null?void 0:e.emailVerified)||!1};return T.jsx(mS.Provider,{value:E,children:!s&&i})}function Y4(){const i=V.useRef(),e=V.useRef(),{login:n}=Or(),[s,o]=V.useState(""),[u,h]=V.useState(!1),m=Ko(),p=Fi();async function g(E){E.preventDefault(),o(""),h(!0);try{await n(i.current.value,e.current.value),p.state&&p.state.fromShared?m("/dashboard",{replace:!0}):m("/dashboard")}catch(b){o(b.message||"Failed to log in")}h(!1)}return T.jsx("div",{className:"auth-bg",children:T.jsxs("div",{className:"auth-container",children:[T.jsx("div",{className:"auth-logo-row",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),T.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),T.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&T.jsx("div",{className:"auth-error",children:s}),T.jsxs("form",{className:"auth-form",onSubmit:g,children:[T.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),T.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),T.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),T.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),T.jsx("div",{className:"auth-link-row",children:T.jsxs("span",{style:{color:"#fff"},children:["Don't have an account? ",T.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function W4(){const i=V.useRef(),e=V.useRef(),n=V.useRef(),{signup:s}=Or(),[o,u]=V.useState(""),[h,m]=V.useState(!1),p=Ko();async function g(E){if(E.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{const b=await s(i.current.value,e.current.value);await iS(b.user),m(!1),p("/verify-email")}catch(b){u(b.message||"Failed to create an account")}m(!1)}return T.jsx("div",{className:"auth-bg",children:T.jsxs("div",{className:"auth-container",children:[T.jsx("div",{className:"auth-logo-row",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),T.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),T.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&T.jsx("div",{className:"auth-error",children:o}),T.jsxs("form",{className:"auth-form",onSubmit:g,children:[T.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),T.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),T.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),T.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),T.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),T.jsx("button",{disabled:h,type:"submit",className:"auth-btn",children:"Sign Up"})]}),T.jsx("div",{className:"auth-link-row",children:T.jsxs("span",{style:{color:"#fff"},children:["Already have an account? ",T.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function KE({children:i}){const{currentUser:e}=Or();return e?i:T.jsx(fa,{to:"/login"})}function X4({show:i}){const[e,n]=V.useState(!1),[s,o]=V.useState([]),[u,h]=V.useState(null),[m,p]=V.useState([]),[g,E]=V.useState(!1),[b,I]=V.useState(""),O=async()=>{if(!e&&i.tmdbId){E(!0),I("");try{const Q=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,Y=await(await fetch(Q)).json();o(Y.seasons||[]),Y.seasons&&Y.seasons.length>0&&h(Y.seasons[0].season_number)}catch{I("Failed to load seasons.")}E(!1)}n(M=>!M)};return V.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){E(!0),I("");try{const H=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,ae=await(await fetch(H)).json();p(ae.episodes||[])}catch{I("Failed to load episodes.")}E(!1)}})()},[i.tmdbId,u]),T.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[T.jsx("button",{onClick:O,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":" Show Episodes"}),e&&T.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?T.jsx("div",{children:"Loading..."}):b?T.jsx("div",{style:{color:"red"},children:b}):T.jsxs(T.Fragment,{children:[s.length>0&&T.jsxs("div",{style:{marginBottom:10},children:[T.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),T.jsx("select",{id:"season-select",value:u||"",onChange:M=>h(Number(M.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(M=>T.jsx("option",{value:M.season_number,children:M.name||`Season ${M.season_number}`},M.id||M.season_number))})]}),m.length>0?T.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(M=>T.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[T.jsxs("strong",{children:["Ep ",M.episode_number,":"]})," ",M.name," ",M.air_date?T.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",M.air_date,")"]}):""]},M.id||M.episode_number))}):T.jsx("div",{children:"No episodes found."})]})})]})}function Z4({users:i,onSelectUser:e}){return T.jsxs("table",{className:"admin-user-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Email"}),T.jsx("th",{children:"Display Name"}),T.jsx("th",{children:"Status"}),T.jsx("th",{children:"Roles"}),T.jsx("th",{children:"Stats"}),T.jsx("th",{children:"Actions"})]})}),T.jsx("tbody",{children:i.map(n=>{var s,o;return T.jsxs("tr",{children:[T.jsx("td",{children:n.email}),T.jsx("td",{children:n.displayName}),T.jsx("td",{children:n.disabled?"Inactive":"Active"}),T.jsx("td",{children:n.roles?n.roles.join(", "):""}),T.jsxs("td",{children:["Diary: ",((s=n.stats)==null?void 0:s.diaryCount)||0,T.jsx("br",{}),"Comments: ",((o=n.stats)==null?void 0:o.commentCount)||0]}),T.jsx("td",{children:T.jsx("button",{onClick:()=>e(n),children:"Manage"})})]},n.uid)})})]})}function J4({user:i,onClose:e,onDisable:n,onEnable:s,onDelete:o,onSendMessage:u,diaryEntries:h,comments:m,onDeleteDiary:p,onDeleteComment:g}){var E,b;return i?T.jsx("div",{className:"admin-modal-bg",children:T.jsxs("div",{className:"admin-modal",style:{maxWidth:1200,width:"90vw",minWidth:320,padding:"2.2rem 2.5rem",borderRadius:18,background:"#fff",boxShadow:"0 4px 32px #205a7a22",margin:"0 auto"},children:[T.jsx("button",{className:"close-btn",onClick:e,style:{position:"absolute",top:18,right:24,fontSize:28,color:"#205a7a",background:"none",border:"none",cursor:"pointer"},children:""}),T.jsxs("h2",{style:{color:"#205a7a",fontWeight:900,fontSize:"2rem",marginBottom:12},children:["User: ",T.jsx("span",{style:{color:"#25609c"},children:i.displayName||i.email})]}),T.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,flexWrap:"wrap"},children:[T.jsxs("div",{children:["Status: ",T.jsx("b",{style:{color:i.disabled?"#d32f2f":"#35b36b"},children:i.disabled?"Inactive":"Active"})]}),T.jsxs("div",{children:["Roles: ",T.jsx("span",{style:{color:"#25609c"},children:i.roles?i.roles.join(", "):"-"})]}),T.jsxs("div",{children:["Email: ",T.jsx("span",{style:{color:"#333"},children:i.email})]}),T.jsxs("div",{children:["Stats: ",T.jsxs("span",{style:{color:"#25609c"},children:["Diary ",((E=i.stats)==null?void 0:E.diaryCount)||0,", Comments ",((b=i.stats)==null?void 0:b.commentCount)||0]})]})]}),T.jsxs("div",{style:{margin:"1.2em 0",display:"flex",gap:12,flexWrap:"wrap"},children:[i.disabled?T.jsx("button",{onClick:()=>s(i.uid),style:{background:"#35b36b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Enable"}):T.jsx("button",{onClick:()=>n(i.uid),style:{background:"#ffe066",color:"#205a7a",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Disable"}),T.jsx("button",{onClick:()=>o(i.uid),style:{background:"#ff6b6b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Delete"}),T.jsx("button",{onClick:()=>u(i.uid),style:{background:"#25609c",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Message"})]}),T.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:24,marginBottom:12,fontSize:"1.2rem"},children:"Diary Entries"}),T.jsx("div",{style:{maxHeight:180,overflowY:"auto",marginBottom:18,background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:h.length===0?T.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No diary entries."}):T.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:h.map(I=>T.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[T.jsx("span",{style:{fontWeight:600,color:"#205a7a"},children:I.title}),T.jsx("button",{onClick:()=>p(I.docId),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.docId))})}),T.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:18,marginBottom:10,fontSize:"1.2rem"},children:"Comments"}),T.jsx("div",{style:{maxHeight:140,overflowY:"auto",background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:m.length===0?T.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No comments."}):T.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:m.map(I=>T.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[T.jsxs("span",{style:{color:"#333",fontWeight:500,maxWidth:290,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[I.text,I.entryTitle&&T.jsxs("span",{style:{color:"#25609c",fontWeight:400,marginLeft:10,fontSize:13},children:["[on: ",I.entryTitle,"]"]})]}),T.jsx("button",{onClick:()=>g(I.id),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.id))})})]})}):null}function eM({onSend:i,onClose:e}){const[n,s]=V.useState("");return T.jsx("div",{className:"admin-modal-bg",children:T.jsxs("div",{className:"admin-modal",children:[T.jsx("button",{className:"close-btn",onClick:e,children:""}),T.jsx("h2",{children:"Send Message to All Users"}),T.jsx("textarea",{value:n,onChange:o=>s(o.target.value),rows:6,style:{width:"100%"}}),T.jsx("button",{onClick:()=>i(n),style:{marginTop:12},children:"Send"})]})})}function tM(){async function i(){try{const e=await An(ln(ze,"users"));console.log("User docs:",e.docs.map(n=>n.data()))}catch(e){console.error("Direct test error:",e)}}return T.jsx("button",{onClick:i,style:{marginBottom:12},children:"Test Firestore Read"})}async function nM(i){const n=(await An(ln(ze,"users"))).docs.map(s=>Uh(ln(ze,`users/${s.id}/notifications`),{...i,read:!1,createdAt:gp()}));await Promise.all(n)}function iM(){const[i,e]=V.useState(""),[n,s]=V.useState(""),[o,u]=V.useState("info"),[h,m]=V.useState(!1),[p,g]=V.useState(""),[E,b]=V.useState("");async function I(O){O.preventDefault(),m(!0),b(""),g("");try{await nM({title:i,message:n,type:o}),g("Notification sent to all users!"),e(""),s("")}catch{b("Failed to send notification.")}m(!1)}return T.jsxs("form",{className:"admin-notification-form",onSubmit:I,style:{marginBottom:"2rem"},children:[T.jsx("h3",{children:"Send Notification to All Users"}),T.jsx("input",{value:i,onChange:O=>e(O.target.value),placeholder:"Title",required:!0}),T.jsx("textarea",{value:n,onChange:O=>s(O.target.value),placeholder:"Message",required:!0}),T.jsxs("select",{value:o,onChange:O=>u(O.target.value),children:[T.jsx("option",{value:"info",children:"Info"}),T.jsx("option",{value:"warning",children:"Warning"}),T.jsx("option",{value:"error",children:"Error"})]}),T.jsx("button",{type:"submit",disabled:h,children:h?"Sending...":"Send Notification"}),p&&T.jsx("div",{style:{color:"green",marginTop:8},children:p}),E&&T.jsx("div",{style:{color:"red",marginTop:8},children:E})]})}function rM(){const{currentUser:i}=Or(),[e,n]=V.useState([]),[s,o]=V.useState(null),[u,h]=V.useState([]),[m,p]=V.useState([]),[g,E]=V.useState(!0),[b,I]=V.useState(""),[O,M]=V.useState(!1);V.useEffect(()=>{async function S(){E(!0),I("");try{console.log("Fetching users...");const R=await An(ln(ze,"users"));console.log("Fetched users:",R.size),console.log("Fetching diary...");const D=await An(ln(ze,"diary"));console.log("Fetched diary:",D.size),console.log("Fetching comments...");const x=await An(Lm(ze,"comments"));console.log("Fetched comments:",x.size);const k={},C={};D.docs.forEach(Ie=>{const ke=Ie.data().uid;k[ke]=(k[ke]||0)+1}),x.docs.forEach(Ie=>{const ke=Ie.data().authorUid;C[ke]=(C[ke]||0)+1}),n(R.docs.map(Ie=>({uid:Ie.id,...Ie.data(),stats:{diaryCount:k[Ie.id]||0,commentCount:C[Ie.id]||0}})))}catch(R){console.error("AdminDashboard Firestore error:",R),I("Failed to load users.")}E(!1)}S()},[]);async function Q(S){console.log("Fetching diary entries for user...");const R=await An(ln(ze,"diary"));console.log("Fetched diary entries:",R.size);const D=R.docs.filter(C=>C.data().uid===S.uid).map(C=>({docId:C.id,...C.data()}));h(D),console.log("Fetching comments for user...");const x=await An(Lm(ze,"comments"));console.log("Fetched comments:",x.size);const k=x.docs.filter(C=>C.data().authorUid===S.uid).map(C=>{const ke=C.ref.path.split("/")[1],W=R.docs.find(Be=>String(Be.data().id)===ke),oe=W&&(W.data().title||W.data().desc)||"",ye={id:C.id,entryId:ke,entryTitle:oe,...C.data()};return console.log("AdminDashboard userComment:",ye),ye});p(k),o(S)}async function H(S){await ga(Ut(ze,"users",S),{disabled:!0}),n(e.map(R=>R.uid===S?{...R,disabled:!0}:R)),o(R=>R&&R.uid===S?{...R,disabled:!0}:R)}async function Y(S){await ga(Ut(ze,"users",S),{disabled:!1}),n(e.map(R=>R.uid===S?{...R,disabled:!1}:R)),o(R=>R&&R.uid===S?{...R,disabled:!1}:R)}async function ae(S){await hu(Ut(ze,"users",S)),n(e.filter(R=>R.uid!==S)),o(null)}async function J(S){if(!S||typeof S!="string"){I("Cannot delete diary entry: invalid id.");return}await hu(Ut(ze,"diary",S)),h(u.filter(R=>R.docId!==S)),await fe()}async function _e(S){const R=m.find(x=>x.id===S);if(!R)return;const D=R.entryId||R.entry_id||R.diaryId||R.parentEntryId;if(!D){I("Cannot delete: missing entryId for comment.");return}await hu(Ut(ze,`discussions/${D}/comments`,S)),p(m.filter(x=>x.id!==S)),await fe()}async function fe(){console.log("Refreshing user stats...");const S=await An(ln(ze,"diary"));console.log("Fetched diary:",S.size);const R=await An(Lm(ze,"comments"));console.log("Fetched comments:",R.size);const D={},x={};S.docs.forEach(k=>{const C=k.data().uid;D[C]=(D[C]||0)+1}),R.docs.forEach(k=>{const C=k.data().authorUid;x[C]=(x[C]||0)+1}),n(k=>k.map(C=>({...C,stats:{diaryCount:D[C.uid]||0,commentCount:x[C.uid]||0}})))}async function be(S){await An(ln(ze,"users")).then(R=>{R.forEach(D=>{ga(Ut(ze,"users",D.id),{lastAdminMessage:S})})}),M(!1),alert("Message sent to all users!")}function U(S){M(!0)}return T.jsxs("div",{className:"admin-dashboard-container",children:[T.jsx("h2",{className:"admin-dashboard-title",children:"Admin Dashboard"}),T.jsx(iM,{}),T.jsx(tM,{}),T.jsx("div",{className:"admin-dashboard-actions",children:T.jsx("button",{className:"admin-dashboard-message-btn",onClick:()=>M(!0),children:"Message All Users"})}),b&&T.jsx("div",{className:"admin-dashboard-error",children:b}),g?T.jsx("div",{className:"admin-dashboard-loading",children:"Loading users..."}):T.jsx(Z4,{users:e,onSelectUser:Q}),s&&T.jsx(J4,{user:s,diaryEntries:u,comments:m,onClose:()=>o(null),onDelete:ae,onDisable:H,onEnable:Y,onSendMessage:U,onDeleteDiary:J,onDeleteComment:_e}),O&&T.jsx(eM,{onSend:be,onClose:()=>M(!1)})]})}const sM=[{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:T.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],aM=[{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:T.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],oM="https://image.tmdb.org/t/p/w500";function QE(){const{currentUser:i}=Or(),[e,n]=V.useState([]),[s,o]=V.useState(!0),[u,h]=V.useState("");return V.useEffect(()=>{async function m(){o(!0),h("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{h("Could not load trending movies.")}o(!1)}m()},[]),i?T.jsx(fa,{to:"/dashboard"}):T.jsx("div",{className:"sw-bg",children:T.jsxs("div",{className:"sw-container",children:[T.jsxs("div",{className:"sw-header-box sw-header-custom",children:[T.jsx("div",{className:"sw-logo-row",children:T.jsx("div",{className:"sw-header-logo-bg",children:T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),T.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),T.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover Whats Next."}),T.jsx(Rg,{to:"/login",children:T.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),T.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:sM.map((m,p)=>T.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[T.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),T.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),T.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),T.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:aM.map((m,p)=>T.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[T.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),T.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),T.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),T.jsxs("div",{className:"sw-section",children:[T.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),T.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?T.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?T.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?T.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>T.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[T.jsx("img",{src:m.poster_path?`${oM}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),T.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),T.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function lM({entryId:i}){console.log("entryId:",i);const{currentUser:e}=Or(),[n,s]=V.useState([]),[o,u]=V.useState(!0),[h,m]=V.useState(""),[p,g]=V.useState(null),[E,b]=V.useState(""),[I,O]=V.useState({}),[M,Q]=V.useState(!0),H=V.useRef(null);async function Y(S){if(!S)return"Anonymous";try{const R=await au(Ut(ze,"users",S.uid));if(R&&R.exists())return R.data().displayName||S.displayName||(S.email?S.email.split("@")[0]:S.uid)}catch{}return S.displayName||(S.email?S.email.split("@")[0]:S.uid)}V.useEffect(()=>{const S=ru(ln(ze,`discussions/${i}/comments`),Gw("timestamp","asc")),R=zC(S,D=>{const x=D.docs.map(k=>({id:k.id,...k.data(),votes:k.data().votes||{}}));if(console.log("Fetched comments:",x),s(x),e){const k={};x.forEach(C=>{C.votes&&C.votes[e.uid]&&(k[C.id]=C.votes[e.uid])}),O(k)}u(!1)});return()=>R()},[i,e]);const ae=async S=>{if(S.preventDefault(),!h.trim())return;const R=await Y(e);await Uh(ln(ze,`discussions/${i}/comments`),{text:h,author:R,authorUid:e?e.uid:null,timestamp:gp(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),H.current&&H.current.focus()},J=async S=>{if(!E.trim())return;const R=await Y(e);await Uh(ln(ze,`discussions/${i}/comments`),{text:E,author:R,authorUid:e?e.uid:null,timestamp:gp(),parentId:S,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),b("")},_e=async(S,R)=>{if(!e)return;const D=Ut(ze,`discussions/${i}/comments`,S),x=n.find(Ie=>Ie.id===S);if(!x)return;const k=x.votes?x.votes[e.uid]:void 0;let C={};R==="up"?C={upvotes:bo(k==="up"?0:1),...k==="down"?{downvotes:bo(-1)}:{},[`votes.${e.uid}`]:"up"}:R==="down"&&(C={downvotes:bo(k==="down"?0:1),...k==="up"?{upvotes:bo(-1)}:{},[`votes.${e.uid}`]:"down"}),O(Ie=>({...Ie,[S]:R})),await ga(D,C)},fe=async S=>{if(!e)return;const R=n.find(x=>x.id===S);if(!R||R.authorUid!==e.uid)return;const D=async x=>{const k=n.filter(Ie=>Ie.parentId===x);for(const Ie of k)Ie.authorUid===e.uid&&await D(Ie.id);const C=n.find(Ie=>Ie.id===x);C&&C.authorUid===e.uid&&await hu(Ut(ze,`discussions/${i}/comments`,x))};await D(S)};function be({commentId:S,level:R,childrenCount:D,render:x,showCount:k=1}){const[C,Ie]=V.useState(!1),ke=x(S,R+1);return!ke||ke.length===0?null:C?T.jsxs("div",{children:[ke,D>k&&T.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ie(!1),children:"Hide Replies"})]}):T.jsxs("div",{children:[ke.slice(0,k),D>k&&T.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ie(!0),children:["View ",D-k+1," more repl",D-k+1===1?"y":"ies"]})]})}const U=(S=null,R=0)=>n.filter(x=>x.parentId===S).map(x=>{var C,Ie,ke,W;const k=n.filter(oe=>oe.parentId===x.id);return T.jsxs("div",{className:`discussion-comment${R>0?" discussion-reply":""}`,style:{marginLeft:R*18},children:[T.jsxs("div",{className:"discussion-header",children:[T.jsx("span",{className:"discussion-author",children:x.author}),T.jsx("span",{className:"discussion-date",children:((W=(Ie=(C=x.timestamp)==null?void 0:C.toDate)==null?void 0:(ke=Ie.call(C)).toLocaleString)==null?void 0:W.call(ke))||""})]}),T.jsx("div",{className:"discussion-body",children:x.text}),T.jsxs("div",{className:"discussion-actions",children:[T.jsxs("button",{className:`discussion-vote${I[x.id]==="up"?" voted":""}`,onClick:()=>_e(x.id,"up"),title:"Thumbs up",disabled:I[x.id]==="up",children:[" ",x.upvotes||0]}),T.jsxs("button",{className:`discussion-vote${I[x.id]==="down"?" voted":""}`,onClick:()=>_e(x.id,"down"),title:"Thumbs down",disabled:I[x.id]==="down",children:[" ",x.downvotes||0]}),T.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(x.id),children:"Reply"}),x.authorUid===(e==null?void 0:e.uid)&&T.jsx("button",{className:"discussion-delete-btn",onClick:()=>fe(x.id),title:"Delete",children:""})]}),p===x.id&&T.jsxs("div",{className:"discussion-reply-form",children:[T.jsx("input",{type:"text",value:E,onChange:oe=>b(oe.target.value),placeholder:"Write a reply...",autoFocus:!0}),T.jsx("button",{onClick:()=>J(x.id),children:"Send"}),T.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),T.jsx(be,{commentId:x.id,level:R,childrenCount:k.length,render:U,showCount:1})]},x.id)});return T.jsxs("div",{className:"discussion-section",children:[T.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Q(S=>!S),style:{marginBottom:M?0:10},children:M?"Show Discussion":"Hide Discussion"}),!M&&T.jsxs(T.Fragment,{children:[T.jsx("h4",{children:"Discussion"}),T.jsxs("form",{onSubmit:ae,className:"discussion-form",children:[T.jsx("input",{type:"text",ref:H,value:h,onChange:S=>m(S.target.value),placeholder:"Add a comment..."}),T.jsx("button",{type:"submit",children:"Send"})]}),T.jsx("div",{className:"discussion-comments",children:o?T.jsx("div",{children:"Loading..."}):U()})]})]})}var pS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},YE=ys.createContext&&ys.createContext(pS),uM=["attr","size","title"];function cM(i,e){if(i==null)return{};var n=hM(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function hM(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Qh(){return Qh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Qh.apply(this,arguments)}function WE(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Yh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(n),!0).forEach(function(s){dM(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function dM(i,e,n){return e=fM(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function fM(i){var e=mM(i,"string");return typeof e=="symbol"?e:e+""}function mM(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function gS(i){return i&&i.map((e,n)=>ys.createElement(e.tag,Yh({key:n},e.attr),gS(e.child)))}function Cn(i){return e=>ys.createElement(pM,Qh({attr:Yh({},i.attr)},e),gS(i.child))}function pM(i){var e=n=>{var{attr:s,size:o,title:u}=i,h=cM(i,uM),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),ys.createElement("svg",Qh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,h,{className:p,style:Yh(Yh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&ys.createElement("title",null,u),i.children)};return YE!==void 0?ys.createElement(YE.Consumer,null,n=>e(n)):e(pS)}function gM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"},child:[]}]})(i)}function yM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(i)}function vM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function XE(i){return Cn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function _M(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(i)}function ZE(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function EM(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(i)}function TM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(i)}function wM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(i)}function bM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(i)}function JE(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(i)}function SM(i){return Cn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function AM(i){return Cn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"},child:[]}]})(i)}function RM(i){return Cn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(i)}function IM(){return T.jsxs("div",{style:{textAlign:"center",margin:"2rem 0"},children:[T.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block"},children:T.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/stacked-blue-5c3c7c3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c.svg",alt:"TMDb Logo",style:{height:48,marginBottom:8}})}),T.jsxs("div",{style:{fontSize:"0.95rem",color:"#888"},children:["This product uses the"," ",T.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb API"})," ","but is not endorsed or certified by TMDb."]})]})}function CM({notification:i,onDismiss:e}){const{title:n,message:s,type:o="info"}=i;let u=T.jsx(TM,{color:"#25609c",size:22});return o==="warning"&&(u=T.jsx(EM,{color:"#f59e42",size:22})),o==="error"&&(u=T.jsx(JE,{color:"#dc2626",size:22})),T.jsxs("div",{className:`notification-banner notification-${o}`,children:[T.jsx("span",{className:"notification-icon",children:u}),T.jsxs("div",{className:"notification-content",children:[T.jsx("strong",{children:n}),T.jsx("div",{children:s})]}),T.jsx("button",{className:"notification-dismiss",onClick:e,title:"Dismiss notification",children:T.jsx(JE,{size:20})})]})}const cs="ca9a91468bb700f84faf986252bc3fe6",ha="https://api.themoviedb.org/3",$m="US";function xM(){const{currentUser:i,logout:e}=Or(),n=Ko(),[s,o]=V.useState("movie"),[u,h]=V.useState(""),[m,p]=V.useState([]),[g,E]=V.useState(!1),[b,I]=V.useState(""),[O,M]=V.useState([]),[Q,H]=V.useState({}),Y=V.useRef(null),[ae,J]=V.useState(null),[_e,fe]=V.useState(""),be=V.useRef({}),[U,S]=V.useState(!1),[R,D]=V.useState(null),[x,k]=V.useState(!1),[C,Ie]=V.useState(""),[ke,W]=V.useState(!1),[oe,ye]=V.useState(""),[Be,P]=V.useState(!1),[re,he]=V.useState(""),[se,Te]=V.useState("movie"),[Ve,Ae]=V.useState([]),[Ct,nt]=V.useState(!0),[xn,zn]=V.useState(""),[Bn,vi]=V.useState(1),[Gi,$i]=V.useState(!1);V.useEffect(()=>{async function L(){if(!i)return;const ie=await au(Ut(ze,"users",i.uid));if(ie.exists()){const ue=ie.data();$i(Array.isArray(ue.roles)&&ue.roles.includes("admin"))}}L()},[i]),V.useEffect(()=>{Ae([]),vi(1),nt(!0),zn("")},[se]),V.useEffect(()=>{let L=!0;async function ie(ue=1){nt(!0),zn("");try{const le=await fetch(`https://api.themoviedb.org/3/trending/${se}/week?api_key=${cs}&page=${ue}`);if(!le.ok)throw new Error("Failed to fetch trending");const me=await le.json();L&&Ae(ue===1?me.results:de=>{const De=new Set(de.map(Je=>Je.id));return[...de,...me.results.filter(Je=>!De.has(Je.id))]})}catch{L&&zn("Could not load trending.")}L&&nt(!1)}return ie(Bn),()=>{L=!1}},[se,Bn]),V.useEffect(()=>{Ve.filter(ie=>!O.some(ue=>ue.id===ie.id&&ue.media_type===se)).length<12&&Ve.length<100&&vi(ie=>ie+1)},[Ve,O,se]),V.useEffect(()=>{if(!i)return;async function L(){const ie=ru(ln(ze,"diary"),hh("uid","==",i.uid));let le=(await An(ie)).docs.map(me=>({...me.data(),docId:me.id}));le=le.sort((me,de)=>new Date(de.createdAt)-new Date(me.createdAt)),M(le);for(const me of le)Mr(me)}L()},[i]),V.useEffect(()=>{if(!i){Ie(""),ye("");return}let L=!1;async function ie(){const ue=await au(Ut(ze,"users",i.uid));let le="";ue.exists()?le=ue.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):le=i.displayName||(i.email?i.email.split("@")[0]:i.uid),L||(Ie(le),ye(le))}return ie(),()=>{L=!0}},[i&&i.uid]);async function Mr(L){var ue;if(Q[L.id])return;const ie=Ut(ze,"tmdbProvidersCache",`${L.media_type}_${L.id}`);try{const le=await au(ie),me=Date.now();if(le.exists()){const Ze=le.data();if(Ze.providers&&(Ze.providers.flatrate=Array.isArray(Ze.providers.flatrate)?Ze.providers.flatrate:[],Ze.providers.rent=Array.isArray(Ze.providers.rent)?Ze.providers.rent:[],Ze.providers.buy=Array.isArray(Ze.providers.buy)?Ze.providers.buy:[]),Ze.timestamp&&me-Ze.timestamp<24*60*60*1e3){H(Fn=>({...Fn,[L.id]:Ze.providers}));return}}let de="";L.media_type==="movie"?de=`${ha}/movie/${L.id}/watch/providers?api_key=${cs}`:de=`${ha}/tv/${L.id}/watch/providers?api_key=${cs}`;const De=await fetch(de);if(De.status===404){H(Ze=>({...Ze,[L.id]:{}})),await Um(ie,{providers:{},timestamp:me});return}const Xe=((ue=(await De.json()).results)==null?void 0:ue[$m])||{};Xe.flatrate=Array.isArray(Xe.flatrate)?Xe.flatrate:[],Xe.rent=Array.isArray(Xe.rent)?Xe.rent:[],Xe.buy=Array.isArray(Xe.buy)?Xe.buy:[],H(Ze=>({...Ze,[L.id]:Xe})),await Um(ie,{providers:Xe,timestamp:me})}catch{H(me=>({...me,[L.id]:{}}))}}async function Ds(L,ie){if(!L.trim()){p([]),I(""),E(!1);return}E(!0),I(""),p([]);try{const le=`${ha}${ie==="movie"?"/search/movie":"/search/tv"}?api_key=${cs}&query=${encodeURIComponent(L)}`,de=await(await fetch(le)).json();de.results?p(de.results):(p([]),I("No results found."))}catch{I("Failed to fetch results.")}E(!1)}V.useEffect(()=>{if(!(u.trim()===""||u===lastManualSearch.current))return Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{Ds(u,s)},400),()=>clearTimeout(Y.current)},[u,s]);async function vn(L){L.preventDefault(),lastManualSearch.current=u,await Ds(u,s)}async function Os(L){if(!i||O.some(De=>De.id===L.id&&De.media_type===(L.media_type||s)))return;let ie=L.poster;(!ie||ie.startsWith("http")===!1)&&(L.poster_path?ie=`https://image.tmdb.org/t/p/w200${L.poster_path}`:L.poster&&L.poster!==""?ie=L.poster:ie="https://placehold.co/120x170?text=No+Image");const ue={uid:i.uid,id:L.id,title:L.title||L.name,date:(L.release_date||L.first_air_date||L.date||"").slice(0,10),poster:ie,desc:L.overview||L.desc||"No description.",watched:!1,archived:!1,media_type:L.media_type||s,createdAt:new Date().toISOString()};await Uh(ln(ze,"diary"),ue);const le=ru(ln(ze,"diary"),hh("uid","==",i.uid));let de=(await An(le)).docs.map(De=>({...De.data(),docId:De.id}));de=de.sort((De,Je)=>new Date(Je.createdAt)-new Date(De.createdAt)),M(de),Mr(ue),p([]),h("")}async function Ms(L){M(ie=>ie.filter(ue=>ue.docId!==L)),J(null);try{await hu(Ut(ze,"diary",L));const ie=ru(ln(ze,"diary"),hh("uid","==",i.uid));let le=(await An(ie)).docs.map(me=>({...me.data(),docId:me.id}));le=le.sort((me,de)=>new Date(de.createdAt)-new Date(me.createdAt)),M(le)}catch{window.alert("Failed to remove entry. Please try again.")}}async function Vr(L,ie){const ue=!ie,le=ue;M(me=>me.map(de=>de.docId===L?{...de,watched:ue,archived:le}:de)),J(me=>me&&me.docId===L?{...me,watched:ue,archived:le}:me);try{await ga(Ut(ze,"diary",L),{watched:ue,archived:le})}catch{M(de=>de.map(De=>De.docId===L?{...De,watched:ie,archived:ie}:De)),J(de=>de&&de.docId===L?{...de,watched:ie,archived:ie}:de),window.alert("Failed to update watched status. Please try again.")}}async function Ki(L,ie){M(ue=>ue.map(le=>le.docId===L?{...le,archived:!ie}:le)),J(ue=>ue&&ue.docId===L?{...ue,archived:!ie}:ue);try{await ga(Ut(ze,"diary",L),{archived:!ie})}catch{M(le=>le.map(me=>me.docId===L?{...me,archived:ie}:me)),J(le=>le&&le.docId===L?{...le,archived:ie}:le),window.alert("Failed to update archive status. Please try again.")}}function Yo(L){const ue=`${window.location.origin+window.location.pathname}#/?entry=${L.id}`;navigator.share?navigator.share({title:`Diary Entry: ${L.title}`,url:ue}):(navigator.clipboard.writeText(ue),alert("Share link copied to clipboard!"))}async function kr(){if(!oe.trim()){he("Display name cannot be empty.");return}P(!0),he("");try{await Um(Ut(ze,"users",i.uid),{displayName:oe.trim()},{merge:!0}),Ie(oe.trim()),W(!1);const L=await au(Ut(ze,"users",i.uid));if(L.exists()){const ie=L.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);Ie(ie),ye(ie)}}catch{he("Failed to update display name.")}P(!1)}function Vs(){ye(C),W(!0),he("")}function Na(){W(!1),he("")}async function mt(L){var ie,ue,le,me,de,De;if(!L)return"";try{if(L.media_type==="movie"){const Xe=await(await fetch(`${ha}/movie/${L.id}/release_dates?api_key=${cs}`)).json(),Ze=((ie=Xe.results)==null?void 0:ie.find(dn=>dn.iso_3166_1===$m))||((ue=Xe.results)==null?void 0:ue[0]);return((me=(le=Ze==null?void 0:Ze.release_dates)==null?void 0:le.find(dn=>dn.certification))==null?void 0:me.certification)||""}else if(L.media_type==="tv"){const Xe=await(await fetch(`${ha}/tv/${L.id}/content_ratings?api_key=${cs}`)).json(),Ze=((de=Xe.results)==null?void 0:de.find(Fn=>Fn.iso_3166_1===$m))||((De=Xe.results)==null?void 0:De[0]);return(Ze==null?void 0:Ze.rating)||""}}catch{return""}return""}function $e(L){J(L),fe(""),mt(L).then(ie=>fe(ie||""))}function hn({entry:L,providersMap:ie,onClose:ue,onShare:le,onToggleWatched:me,onRemove:de,onArchiveToggle:De,diary:Je,contentRating:Xe,onAddToDiary:Ze}){if(!L)return null;const Fn=ie[L.id]||{},dn=Fn.flatrate||[],Ps=Fn.rent||[],Ti=Fn.buy||[],lt=L,En=Je&&Je.some(it=>it.id===L.id&&it.media_type===L.media_type);return IE.createPortal(T.jsx("div",{className:"dashboard-modal-overlay",onClick:ue,children:T.jsxs("div",{className:"dashboard-modal-content",onClick:it=>it.stopPropagation(),children:[T.jsx("button",{className:"dashboard-modal-close",onClick:ue,"aria-label":"Close modal",type:"button",children:""}),T.jsxs("div",{className:"dashboard-modal-body",children:[T.jsx("img",{className:"dashboard-diary-poster",src:lt.poster_path?`https://image.tmdb.org/t/p/w300${lt.poster_path}`:lt.poster||"https://placehold.co/120x170?text=No+Image",alt:lt.title,style:{marginBottom:"1rem"}}),T.jsx("div",{className:"dashboard-diary-movie-title",children:lt.title}),T.jsxs("div",{className:"dashboard-diary-date",children:[lt.release_date?lt.release_date.slice(0,4):lt.date||"",Xe&&T.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:Xe})]}),T.jsx("div",{className:"dashboard-diary-desc",children:lt.overview||lt.desc||""}),T.jsxs("div",{className:"dashboard-diary-providers-modal",children:[T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:dn.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):dn.map(it=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${it.logo_path}`,alt:it.provider_name,title:it.provider_name,className:"dashboard-provider-icon-sm"},it.provider_id))})]}),T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:Ps.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):Ps.map(it=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${it.logo_path}`,alt:it.provider_name,title:it.provider_name,className:"dashboard-provider-icon-sm"},it.provider_id))})]}),T.jsxs("div",{className:"dashboard-diary-providers-group",children:[T.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),T.jsx("div",{className:"dashboard-diary-providers-icons",children:Ti.length===0?T.jsx("span",{style:{color:"#888"},children:"N/A"}):Ti.map(it=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${it.logo_path}`,alt:it.provider_name,title:it.provider_name,className:"dashboard-provider-icon-sm"},it.provider_id))})]})]}),L.media_type==="tv"&&(L.tmdbId||L.id)&&T.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:T.jsx(X4,{show:{...L,tmdbId:L.tmdbId||L.id}})}),T.jsxs("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:[!En&&T.jsx("button",{className:"dashboard-diary-share",style:{background:"#35b36b",color:"#fff",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>Ze(L),children:"ADD TO DIARY"}),T.jsx("button",{className:"dashboard-diary-share",onClick:()=>le(lt),title:"Share this diary entry with friends via link or social media",children:"SHARE"}),En&&T.jsx("button",{className:lt.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>me(lt.docId,lt.watched),title:lt.watched?"Mark as not watched":"Mark as watched",children:lt.watched?"WATCHED":"UNWATCHED"}),En&&T.jsx("button",{className:"dashboard-diary-archive",style:{background:L.archived?"#b2b2b2":"#25609c",color:L.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>De(lt.docId,!L.archived),children:L.archived?"UNARCHIVE":"ARCHIVE"}),En&&T.jsx("button",{className:"dashboard-diary-remove",onClick:()=>de(lt.docId),children:"REMOVE FROM DIARY"})]}),T.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[T.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),T.jsx(lM,{entryId:lt.id})]})]})]})}),document.getElementById("modal-root"))}const Bt=ys.memo(hn);function Da(){const L={};return O.filter(ie=>ie.media_type===s).forEach(ie=>{const ue=Q[ie.id];ue&&[...ue.flatrate||[],...ue.rent||[],...ue.buy||[]].forEach(le=>{L[le.provider_id]=le})}),Object.values(L)}const Oa=R?O.filter(L=>{if(L.media_type!==s||L.archived)return!1;const ie=Q[L.id];return ie?[...ie.flatrate||[],...ie.rent||[],...ie.buy||[]].some(ue=>ue.provider_id===R.provider_id):!1}):O.filter(L=>L.media_type===s&&!L.archived);function Qi({open:L,onClose:ie,providers:ue,onSelect:le}){return L?IE.createPortal(T.jsx("div",{className:"dashboard-modal-overlay",onClick:ie,children:T.jsxs("div",{className:"dashboard-modal-content",onClick:me=>me.stopPropagation(),style:{maxWidth:440,padding:24},children:[T.jsx("button",{className:"dashboard-modal-close",onClick:ie,"aria-label":"Close modal",type:"button",children:""}),T.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"Click to View Streaming Providers"}),T.jsx("div",{style:{margin:"0 0 12px 0",color:"#8fc7ff",fontSize:"1.02rem",textAlign:"center",fontWeight:500},children:"View all providers. Click on a provider icon below to filter your diary and see which shows can be watched for that provider."}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:ue.map(me=>T.jsx("img",{src:`https://image.tmdb.org/t/p/w45${me.logo_path}`,alt:me.provider_name,title:me.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:R&&R.provider_id===me.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>{le(me),D(me)}},me.provider_id))}),R&&T.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>D(null),children:"Show All Entries"}),T.jsx("div",{style:{marginTop:24},children:Oa.length===0?T.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):T.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:Oa.map(me=>T.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0003",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center",cursor:"pointer"},onClick:()=>{$e(me),ie()},children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:T.jsx("img",{src:me.poster,alt:me.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:me.title})]},me.docId))})})]})}),document.getElementById("modal-root")):null}const _i=O.filter(L=>!L.archived&&L.media_type===s),Ei=O.filter(L=>L.archived&&L.media_type===s);function _n(L){Te(L)}function Pr(L){Os({id:L.id,title:L.title||L.name,poster_path:L.poster_path,release_date:L.release_date||L.first_air_date,overview:L.overview,media_type:se}),Ae(ie=>ie.filter(ue=>ue.id!==L.id))}function Yi(){const[L,ie]=V.useState(!1);V.useEffect(()=>{function le(){ie(window.scrollY>300)}return window.addEventListener("scroll",le),()=>window.removeEventListener("scroll",le)},[]);const ue=()=>{window.scrollTo({top:0,behavior:"smooth"})};return L?T.jsx("button",{onClick:ue,style:{position:"fixed",right:18,bottom:28,zIndex:9999,background:"rgba(37,96,156,0.93)",color:"#fff",border:"none",borderRadius:"50%",width:54,height:54,boxShadow:"0 3px 12px #0005",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,cursor:"pointer",touchAction:"manipulation"},"aria-label":"Back to top",className:"back-to-top-btn",children:T.jsx("span",{style:{fontSize:45,marginTop:-2},children:""})}):null}const[Lr,Ur]=V.useState([]),[Ma,qn]=V.useState(!0);V.useEffect(()=>{let L=!1;async function ie(){if(!i)return;qn(!0);const ue=ru(ln(ze,`users/${i.uid}/notifications`),hh("read","==",!1),Gw("createdAt","desc")),me=(await An(ue)).docs.map(de=>({id:de.id,...de.data()}));L||(Ur(me),qn(!1))}return ie(),()=>{L=!0}},[i,ze]);async function ai(L){i&&(await ga(Ut(ze,`users/${i.uid}/notifications`,L),{read:!0}),Ur(Lr.filter(ie=>ie.id!==L)))}function ks(){const[L,ie]=V.useState(!1),[ue,le]=V.useState(window.innerWidth<=700);V.useEffect(()=>{function de(){le(window.innerWidth<=700)}return window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[]);const me=[{icon:T.jsx(bM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Search for a Show or Movie",text:"Use the search bar at the top to find movies or TV shows. Results come from TMDb."},{icon:T.jsx(wM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Add to Your Diary",text:"Click on a result to add it to your diary. Track what youve watched or want to watch."},{icon:T.jsx(yM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Mark as Watched/Unwatched",text:"Toggle the watched status for each diary entry to keep your list up to date."},{icon:T.jsx(ZE,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Edit or Remove Entries",text:"Click a diary entry to view details, edit notes, or remove it from your diary."},{icon:T.jsx(AM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"View Streaming Providers",text:"See where you can stream each show or movie (US region by default)."},{icon:T.jsx(_M,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Join Discussions",text:"Add comments or replies to discuss shows with others. Upvote or downvote comments."},{icon:T.jsx(RM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Manage Your Profile",text:"Update your display name and view your activity stats at the top of the dashboard."},{icon:T.jsx(gM,{color:"#8fc7ff",size:22,style:{marginRight:12}}),title:"Archive Entries",text:"Archive shows/movies youve finished or want to hide from your main list. Toggle Show Archived to view them."}];return T.jsxs("div",{children:[T.jsx("div",{style:{display:"flex",justifyContent:"center",width:"100%",marginBottom:16},children:T.jsx("button",{onClick:()=>ie(de=>!de),style:{background:"#8fc7ff",color:"#222",border:"none",borderRadius:9,padding:"0.39rem 1.2rem",fontWeight:800,fontSize:"1.08rem",cursor:"pointer",zIndex:2,boxShadow:"0 2px 8px #0002",transition:"background 0.2s",margin:"0 auto",minWidth:180},"aria-expanded":L,"aria-controls":"instructions-panel",children:L?"Hide Instructions":"Show Instructions"})}),L&&T.jsxs("div",{style:{background:"linear-gradient(135deg, #222a38 60%, #253a54 100%)",color:"#fff",borderRadius:18,marginBottom:32,boxShadow:"0 4px 24px #0004",padding:ue?"1.2rem 0.5rem 1.5rem 0.5rem":"2.1rem 2.5rem 2.5rem 2.5rem",maxWidth:ue?"100vw":900,width:ue?"100vw":"100%",left:ue?"50%":void 0,transform:ue?"translateX(-50%)":void 0,position:ue?"relative":void 0,boxSizing:"border-box",marginLeft:ue?"calc(-50vw + 50%)":"auto",marginRight:ue?"calc(-50vw + 50%)":"auto",transition:"all 0.2s",border:"1.5px solid #334e7e",overflowX:"hidden"},children:[T.jsx("div",{id:"instructions-panel",style:{marginTop:0,fontSize:"1.11rem",lineHeight:1.75,display:"grid",gridTemplateColumns:ue?"1fr":"1fr 1fr",gap:ue?"18px 0":"24px 36px",maxWidth:ue?"98vw":900,margin:"0 auto",paddingBottom:8,boxSizing:"border-box",overflowX:"hidden"},children:me.map((de,De)=>T.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:0,marginBottom:0,background:"rgba(20,30,50,0.18)",borderRadius:10,padding:"12px 14px",boxShadow:"0 1px 8px #0002",minHeight:72,boxSizing:"border-box",overflowX:"hidden"},children:[T.jsx("div",{style:{marginTop:2},children:de.icon}),T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:800,fontSize:"1.09rem",color:"#b0e0ff",marginBottom:3},children:de.title}),T.jsx("div",{style:{fontSize:"1.01rem",color:"#e5f4ff"},children:de.text})]})]},De))}),T.jsx("hr",{style:{border:"none",borderTop:"1.5px solid #334e7e",margin:"32px 0 16px 0"}}),T.jsxs("div",{style:{marginTop:0,color:"#8fc7ff",fontSize:"1.08rem",textAlign:"center"},children:["Need more help? ",T.jsx("a",{href:"#",style:{color:"#fff",textDecoration:"underline",fontWeight:700},children:"Contact support"})," or ",T.jsx("a",{href:"#",style:{color:"#fff",textDecoration:"underline",fontWeight:700},children:"check the FAQ"}),"."]})]})]})}V.useEffect(()=>{if(!i)return;function L(){var le,me;let ie=null;if(window.location.hash.startsWith("#/?")&&(ie=new URLSearchParams(window.location.hash.replace("#/?","")).get("entry")),ie||(ie=sessionStorage.getItem("pendingEntryId")),!ie)return;if(ae&&(((le=ae.id)==null?void 0:le.toString())===ie||((me=ae.docId)==null?void 0:me.toString())===ie)){sessionStorage.removeItem("pendingEntryId"),window.location.hash.includes("entry=")&&(window.location.hash="#/dashboard");return}const ue=O.find(de=>{var De;return((De=de.id)==null?void 0:De.toString())===ie});ue?$e(ue):Hn(ie),sessionStorage.removeItem("pendingEntryId"),window.location.hash.includes("entry=")&&(window.location.hash="#/dashboard")}return window.addEventListener("hashchange",L),L(),()=>window.removeEventListener("hashchange",L)},[O,ae,i]);async function Hn(L){let ie="";ie=`${ha}/movie/${L}?api_key=${cs}&language=en-US`;let ue=await fetch(ie),le=await ue.json();if(le&&!le.status_code){J({id:le.id,title:le.title,date:le.release_date,poster:le.poster_path?`https://image.tmdb.org/t/p/w500${le.poster_path}`:"",desc:le.overview,watched:!1,media_type:"movie",createdAt:null,docId:null,archived:!1}),fe(""),mt({id:le.id,media_type:"movie"}).then(me=>fe(me||""));return}ie=`${ha}/tv/${L}?api_key=${cs}&language=en-US`,ue=await fetch(ie),le=await ue.json(),le&&!le.status_code&&(J({id:le.id,title:le.name,date:le.first_air_date,poster:le.poster_path?`https://image.tmdb.org/t/p/w500${le.poster_path}`:"",desc:le.overview,watched:!1,media_type:"tv",createdAt:null,docId:null,archived:!1}),fe(""),mt({id:le.id,media_type:"tv"}).then(me=>fe(me||"")))}return T.jsxs(T.Fragment,{children:[Lr.map(L=>T.jsx(CM,{notification:L,onDismiss:()=>ai(L.id)},L.id)),T.jsx("div",{className:"dashboard-bg",children:T.jsxs("div",{className:"dashboard-content-wrapper",children:[T.jsx(ks,{}),T.jsx("div",{className:"dashboard-banner",children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[T.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),ke?T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:oe,onChange:L=>ye(L.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:Be,autoFocus:!0}),T.jsx("button",{onClick:kr,disabled:Be,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:T.jsx(vM,{})}),T.jsx("button",{onClick:Na,disabled:Be,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:T.jsx(SM,{})})]}):T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:C}),T.jsx("button",{onClick:Vs,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:T.jsx(ZE,{})})]})]}),re&&T.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:re}),T.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[T.jsx("button",{className:"dashboard-signout",onClick:async()=>{try{await e(),window.localStorage.clear(),window.sessionStorage.clear(),n("/"),window.location.reload()}catch{alert("Failed to sign out")}},style:{background:"#2a1b1b",color:"#ffb3b3",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},children:"Sign Out"}),Gi&&T.jsx("button",{className:"dashboard-admin-btn",style:{background:"#25609c",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},onClick:()=>n("/admin"),children:"Admin Dashboard"})]})]})}),T.jsxs("div",{className:"dashboard-search-section",children:[T.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),T.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),T.jsxs("div",{className:"dashboard-search-toggle-row",children:[T.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),T.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),T.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:vn,children:[T.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows*",value:u,onChange:L=>h(L.target.value)}),T.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),T.jsxs("div",{className:"dashboard-search-results",children:[b&&T.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:b}),!b&&m.length>0&&T.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(L=>T.jsxs("div",{className:"dashboard-trending-card",children:[T.jsx("img",{src:L.poster_path?`https://image.tmdb.org/t/p/w200${L.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:L.title||L.name,className:"dashboard-trending-poster"}),T.jsx("div",{className:"dashboard-trending-movie-title",children:L.title||L.name}),T.jsx("div",{className:"dashboard-trending-year",children:(L.release_date||L.first_air_date||"").slice(0,4)}),T.jsx("div",{className:"dashboard-trending-desc",children:L.overview?L.overview.slice(0,90)+(L.overview.length>90?"":""):"No description."}),T.jsx("button",{className:"dashboard-trending-add",onClick:()=>Os(L),children:O.some(ie=>ie.id===L.id)?"IN DIARY":"ADD TO DIARY"})]},L.id))})]})]}),T.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"1.5rem 0"},children:T.jsx("ins",{className:"adsbygoogle",style:{display:"block",width:"100%",maxWidth:728,minHeight:90},"data-ad-client":"ca-pub-5502818698237515","data-ad-slot":"1749671682","data-ad-format":"auto"})}),T.jsxs("div",{className:"dashboard-diary-section",children:[T.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),T.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[T.jsx("button",{className:`dashboard-toggle${x?"":" active"}`,onClick:()=>k(!1),children:"My Diary"}),T.jsx("button",{className:`dashboard-toggle${x?" active":""}`,onClick:()=>k(!0),children:"Archived"})]}),T.jsx("div",{className:"dashboard-diary-providers-row",children:T.jsx("button",{className:"dashboard-providers-btn",onClick:()=>S(!0),title:"View all providers. Click on a provider icon to see which shows can be watched for that provider.",children:"Click to View Streaming Providers"})}),x?Ei.length===0?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No archived entries."}):T.jsx("div",{className:"dashboard-diary-cards-row",children:Ei.map(L=>(be.current[L.docId]||(be.current[L.docId]=V.createRef()),T.jsxs("section",{ref:ie=>be.current[L.docId]=ie,className:"dashboard-diary-card collapsed",children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:T.jsx("img",{src:L.poster,alt:L.title,className:"dashboard-diary-poster collapsed"})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:L.title}),T.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>$e(L),children:["Show More ",T.jsx(XE,{})]})]},L.docId)))}):_i.length===0?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):T.jsx("div",{className:"dashboard-diary-cards-row",children:_i.map(L=>(be.current[L.docId]||(be.current[L.docId]=V.createRef()),T.jsxs("section",{ref:ie=>be.current[L.docId]=ie,className:"dashboard-diary-card collapsed",children:[T.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:T.jsx("img",{src:L.poster,alt:L.title,className:"dashboard-diary-poster collapsed"})}),T.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:L.title}),T.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>$e(L),children:["Show More ",T.jsx(XE,{})]})]},L.docId)))})]}),T.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),T.jsxs("div",{className:"dashboard-trending-section",children:[T.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",se==="movie"?"Movies":"TV Shows"]}),T.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[T.jsx("button",{className:se==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>_n("movie"),children:"Movies"}),T.jsx("button",{className:se==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>_n("tv"),children:"TV Shows"})]}),T.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:Ct?T.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading"}):xn?T.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:xn}):Ve.filter(L=>!O.some(ie=>ie.id===L.id&&ie.media_type===se)).slice(0,10).map(L=>T.jsxs("div",{className:"dashboard-trending-card",children:[T.jsx("img",{src:L.poster_path?`https://image.tmdb.org/t/p/w200${L.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:L.title||L.name,className:"dashboard-trending-poster"}),T.jsx("div",{className:"dashboard-trending-movie-title",children:L.title||L.name}),T.jsx("div",{className:"dashboard-trending-year",children:(L.release_date||L.first_air_date||"").slice(0,4)}),T.jsx("div",{className:"dashboard-trending-desc",children:L.overview?L.overview.slice(0,90)+(L.overview.length>90?"":""):"No description."}),T.jsx("button",{className:"dashboard-trending-add",onClick:()=>Pr(L),children:"ADD TO DIARY"})]},L.id))})]})]})}),ae&&T.jsx(Bt,{entry:ae,providersMap:Q,onClose:()=>J(null),onShare:Yo,onToggleWatched:Vr,onRemove:Ms,onArchiveToggle:Ki,diary:O,contentRating:_e,onAddToDiary:Os}),T.jsx(Qi,{open:U,onClose:()=>{S(!1),D(null)},providers:Da(),onSelect:L=>D(L)}),T.jsx(Yi,{}),T.jsx(IM,{})]})}function NM(){const{currentUser:i,resendVerificationEmail:e,logout:n}=Or(),[s,o]=V.useState(!1),[u,h]=V.useState(""),[m,p]=V.useState(!1),[g,E]=V.useState(!1),b=Ko(),I=async()=>{h("");try{await e(),o(!0)}catch{h("Failed to resend verification email.")}},O=async()=>{await n(),b("/login")},M=async()=>{p(!0),h("");try{await i.reload(),E(!0),i.emailVerified&&window.location.reload()}catch{h("Could not refresh status.")}p(!1)};return T.jsxs("div",{className:"verify-email-page",children:[T.jsxs("div",{className:"verify-branding",children:[T.jsx("img",{src:WA,alt:"Site Logo",className:"verify-logo"}),T.jsx("h2",{children:"Welcome to ShowsWatched!"})]}),T.jsxs("div",{className:"verify-card",children:[T.jsx("h3",{children:"Verify Your Email"}),T.jsxs("p",{children:["We have sent a verification link to ",T.jsx("b",{children:i==null?void 0:i.email}),".",T.jsx("br",{}),"Please check your inbox and click the link to verify your email address."]}),s&&T.jsx("p",{style:{color:"green"},children:"Verification email sent!"}),u&&T.jsx("p",{style:{color:"red"},children:u}),T.jsx("button",{onClick:I,disabled:m,children:"Resend Verification Email"}),T.jsx("button",{onClick:M,disabled:m,style:{marginLeft:"1rem"},children:m?"Checking...":"Refresh Status"}),T.jsx("button",{onClick:O,style:{marginLeft:"1rem",background:"#eee",color:"#333"},children:"Log Out"}),g&&!i.emailVerified&&T.jsx("p",{style:{color:"orange",marginTop:"1rem"},children:"Still not verified. Please try again after clicking the link in your email."})]})]})}function DM(){const{currentUser:i,emailVerified:e,loading:n}=Or(),s=Fi(),[o,u]=V.useState(()=>sessionStorage.getItem("pendingEntryId"));return V.useEffect(()=>{function h(){let m=null;window.location.hash.startsWith("#/?")&&(m=new URLSearchParams(window.location.hash.replace("#/?","")).get("entry")),m&&(sessionStorage.setItem("pendingEntryId",m),u(m),i&&s.pathname!=="/dashboard"&&(window.location.hash="#/dashboard"))}return window.addEventListener("hashchange",h),h(),()=>window.removeEventListener("hashchange",h)},[i,s.pathname]),n?null:!i&&o&&s.pathname!=="/login"?T.jsx(fa,{to:"/login",replace:!0,state:{fromShared:!0}}):T.jsxs(WN,{children:[T.jsx(hs,{path:"/login",element:T.jsx(Y4,{})}),T.jsx(hs,{path:"/signup",element:T.jsx(W4,{})}),T.jsx(hs,{path:"/verify-email",element:T.jsx(NM,{})}),T.jsx(hs,{path:"/admin",element:T.jsx(KE,{children:i&&!e?T.jsx(fa,{to:"/verify-email",replace:!0}):T.jsx(rM,{})})}),T.jsx(hs,{path:"/dashboard",element:T.jsx(KE,{children:i&&!e?T.jsx(fa,{to:"/verify-email",replace:!0}):T.jsx(xM,{})})}),T.jsx(hs,{path:"/",element:i?e?T.jsx(fa,{to:"/dashboard",replace:!0}):T.jsx(fa,{to:"/verify-email",replace:!0}):T.jsx(QE,{})}),T.jsx(hs,{path:"*",element:T.jsx(QE,{})})]})}YA.createRoot(document.getElementById("root")).render(T.jsx(V.StrictMode,{children:T.jsx(ED,{children:T.jsx(Q4,{children:T.jsx(DM,{})})})}));
