(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function ZE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bm={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function jA(){if(K_)return Ql;K_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:u}}return Ql.Fragment=e,Ql.jsx=n,Ql.jsxs=n,Ql}var Q_;function zA(){return Q_||(Q_=1,bm.exports=jA()),bm.exports}var E=zA(),wm={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function BA(){if(Y_)return Ve;Y_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Q={};function H(V,ie,ue){this.props=V,this.context=ie,this.refs=Q,this.updater=ue||O}H.prototype.isReactComponent={},H.prototype.setState=function(V,ie){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ie,"setState")},H.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Y(){}Y.prototype=H.prototype;function se(V,ie,ue){this.props=V,this.context=ie,this.refs=Q,this.updater=ue||O}var ne=se.prototype=new Y;ne.constructor=se,M(ne,H.prototype),ne.isPureReactComponent=!0;var fe=Array.isArray,pe={H:null,A:null,T:null,S:null,V:null},Re=Object.prototype.hasOwnProperty;function P(V,ie,ue,re,ge,Pe){return ue=Pe.ref,{$$typeof:i,type:V,key:ie,ref:ue!==void 0?ue:null,props:Pe}}function S(V,ie){return P(V.type,ie,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function N(V){var ie={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ue){return ie[ue]})}var x=/\/+/g;function k(V,ie){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):ie.toString(36)}function C(){}function De(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(ie){V.status==="pending"&&(V.status="fulfilled",V.value=ie)},function(ie){V.status==="pending"&&(V.status="rejected",V.reason=ie)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Me(V,ie,ue,re,ge){var Pe=typeof V;(Pe==="undefined"||Pe==="boolean")&&(V=null);var we=!1;if(V===null)we=!0;else switch(Pe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(V.$$typeof){case i:case e:we=!0;break;case T:return we=V._init,Me(we(V._payload),ie,ue,re,ge)}}if(we)return ge=ge(V),we=re===""?"."+k(V,0):re,fe(ge)?(ue="",we!=null&&(ue=we.replace(x,"$&/")+"/"),Me(ge,ie,ue,"",function(_n){return _n})):ge!=null&&(R(ge)&&(ge=S(ge,ue+(ge.key==null||V&&V.key===ge.key?"":(""+ge.key).replace(x,"$&/")+"/")+we)),ie.push(ge)),1;we=0;var Et=re===""?".":re+":";if(fe(V))for(var at=0;at<V.length;at++)re=V[at],Pe=Et+k(re,at),we+=Me(re,ie,ue,Pe,ge);else if(at=I(V),typeof at=="function")for(V=at.call(V),at=0;!(re=V.next()).done;)re=re.value,Pe=Et+k(re,at++),we+=Me(re,ie,ue,Pe,ge);else if(Pe==="object"){if(typeof V.then=="function")return Me(De(V),ie,ue,re,ge);throw ie=String(V),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return we}function W(V,ie,ue){if(V==null)return V;var re=[],ge=0;return Me(V,re,"","",function(Pe){return ie.call(ue,Pe,ge++)}),re}function oe(V){if(V._status===-1){var ie=V._result;ie=ie(),ie.then(function(ue){(V._status===0||V._status===-1)&&(V._status=1,V._result=ue)},function(ue){(V._status===0||V._status===-1)&&(V._status=2,V._result=ue)}),V._status===-1&&(V._status=0,V._result=ie)}if(V._status===1)return V._result.default;throw V._result}var ve=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Le(){}return Ve.Children={map:W,forEach:function(V,ie,ue){W(V,function(){ie.apply(this,arguments)},ue)},count:function(V){var ie=0;return W(V,function(){ie++}),ie},toArray:function(V){return W(V,function(ie){return ie})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ve.Component=H,Ve.Fragment=n,Ve.Profiler=o,Ve.PureComponent=se,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pe,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(V){return pe.H.useMemoCache(V)}},Ve.cache=function(V){return function(){return V.apply(null,arguments)}},Ve.cloneElement=function(V,ie,ue){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var re=M({},V.props),ge=V.key,Pe=void 0;if(ie!=null)for(we in ie.ref!==void 0&&(Pe=void 0),ie.key!==void 0&&(ge=""+ie.key),ie)!Re.call(ie,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ie.ref===void 0||(re[we]=ie[we]);var we=arguments.length-2;if(we===1)re.children=ue;else if(1<we){for(var Et=Array(we),at=0;at<we;at++)Et[at]=arguments[at+2];re.children=Et}return P(V.type,ge,void 0,void 0,Pe,re)},Ve.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Ve.createElement=function(V,ie,ue){var re,ge={},Pe=null;if(ie!=null)for(re in ie.key!==void 0&&(Pe=""+ie.key),ie)Re.call(ie,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ge[re]=ie[re]);var we=arguments.length-2;if(we===1)ge.children=ue;else if(1<we){for(var Et=Array(we),at=0;at<we;at++)Et[at]=arguments[at+2];ge.children=Et}if(V&&V.defaultProps)for(re in we=V.defaultProps,we)ge[re]===void 0&&(ge[re]=we[re]);return P(V,Pe,void 0,void 0,null,ge)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:m,render:V}},Ve.isValidElement=R,Ve.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:oe}},Ve.memo=function(V,ie){return{$$typeof:g,type:V,compare:ie===void 0?null:ie}},Ve.startTransition=function(V){var ie=pe.T,ue={};pe.T=ue;try{var re=V(),ge=pe.S;ge!==null&&ge(ue,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Le,ve)}catch(Pe){ve(Pe)}finally{pe.T=ie}},Ve.unstable_useCacheRefresh=function(){return pe.H.useCacheRefresh()},Ve.use=function(V){return pe.H.use(V)},Ve.useActionState=function(V,ie,ue){return pe.H.useActionState(V,ie,ue)},Ve.useCallback=function(V,ie){return pe.H.useCallback(V,ie)},Ve.useContext=function(V){return pe.H.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V,ie){return pe.H.useDeferredValue(V,ie)},Ve.useEffect=function(V,ie,ue){var re=pe.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(V,ie)},Ve.useId=function(){return pe.H.useId()},Ve.useImperativeHandle=function(V,ie,ue){return pe.H.useImperativeHandle(V,ie,ue)},Ve.useInsertionEffect=function(V,ie){return pe.H.useInsertionEffect(V,ie)},Ve.useLayoutEffect=function(V,ie){return pe.H.useLayoutEffect(V,ie)},Ve.useMemo=function(V,ie){return pe.H.useMemo(V,ie)},Ve.useOptimistic=function(V,ie){return pe.H.useOptimistic(V,ie)},Ve.useReducer=function(V,ie,ue){return pe.H.useReducer(V,ie,ue)},Ve.useRef=function(V){return pe.H.useRef(V)},Ve.useState=function(V){return pe.H.useState(V)},Ve.useSyncExternalStore=function(V,ie,ue){return pe.H.useSyncExternalStore(V,ie,ue)},Ve.useTransition=function(){return pe.H.useTransition()},Ve.version="19.1.0",Ve}var W_;function Ap(){return W_||(W_=1,wm.exports=BA()),wm.exports}var L=Ap();const ys=ZE(L);var Sm={exports:{}},Yl={},Am={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function qA(){return X_||(X_=1,function(i){function e(W,oe){var ve=W.length;W.push(oe);e:for(;0<ve;){var Le=ve-1>>>1,V=W[Le];if(0<o(V,oe))W[Le]=oe,W[ve]=V,ve=Le;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var oe=W[0],ve=W.pop();if(ve!==oe){W[0]=ve;e:for(var Le=0,V=W.length,ie=V>>>1;Le<ie;){var ue=2*(Le+1)-1,re=W[ue],ge=ue+1,Pe=W[ge];if(0>o(re,ve))ge<V&&0>o(Pe,re)?(W[Le]=Pe,W[ge]=ve,Le=ge):(W[Le]=re,W[ue]=ve,Le=ue);else if(ge<V&&0>o(Pe,ve))W[Le]=Pe,W[ge]=ve,Le=ge;else break e}}return oe}function o(W,oe){var ve=W.sortIndex-oe.sortIndex;return ve!==0?ve:W.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],g=[],T=1,w=null,I=3,O=!1,M=!1,Q=!1,H=!1,Y=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function fe(W){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=W)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function pe(W){if(Q=!1,fe(W),!M)if(n(p)!==null)M=!0,Re||(Re=!0,k());else{var oe=n(g);oe!==null&&Me(pe,oe.startTime-W)}}var Re=!1,P=-1,S=5,R=-1;function N(){return H?!0:!(i.unstable_now()-R<S)}function x(){if(H=!1,Re){var W=i.unstable_now();R=W;var oe=!0;try{e:{M=!1,Q&&(Q=!1,se(P),P=-1),O=!0;var ve=I;try{t:{for(fe(W),w=n(p);w!==null&&!(w.expirationTime>W&&N());){var Le=w.callback;if(typeof Le=="function"){w.callback=null,I=w.priorityLevel;var V=Le(w.expirationTime<=W);if(W=i.unstable_now(),typeof V=="function"){w.callback=V,fe(W),oe=!0;break t}w===n(p)&&s(p),fe(W)}else s(p);w=n(p)}if(w!==null)oe=!0;else{var ie=n(g);ie!==null&&Me(pe,ie.startTime-W),oe=!1}}break e}finally{w=null,I=ve,O=!1}oe=void 0}}finally{oe?k():Re=!1}}}var k;if(typeof ne=="function")k=function(){ne(x)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,De=C.port2;C.port1.onmessage=x,k=function(){De.postMessage(null)}}else k=function(){Y(x,0)};function Me(W,oe){P=Y(function(){W(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(W){switch(I){case 1:case 2:case 3:var oe=3;break;default:oe=I}var ve=I;I=oe;try{return W()}finally{I=ve}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(W,oe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ve=I;I=W;try{return oe()}finally{I=ve}},i.unstable_scheduleCallback=function(W,oe,ve){var Le=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Le+ve:Le):ve=Le,W){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ve+V,W={id:T++,callback:oe,priorityLevel:W,startTime:ve,expirationTime:V,sortIndex:-1},ve>Le?(W.sortIndex=ve,e(g,W),n(p)===null&&W===n(g)&&(Q?(se(P),P=-1):Q=!0,Me(pe,ve-Le))):(W.sortIndex=V,e(p,W),M||O||(M=!0,Re||(Re=!0,k()))),W},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(W){var oe=I;return function(){var ve=I;I=oe;try{return W.apply(this,arguments)}finally{I=ve}}}}(Rm)),Rm}var Z_;function HA(){return Z_||(Z_=1,Am.exports=qA()),Am.exports}var Im={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function FA(){if(J_)return an;J_=1;var i=Ap();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(p,g){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,T)},an.flushSync=function(p){var g=d.T,T=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=T,s.d.f()}},an.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},an.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},an.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var T=g.as,w=m(T,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;T==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:I,fetchPriority:O}):T==="script"&&s.d.X(p,{crossOrigin:w,integrity:I,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},an.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var T=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},an.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var T=g.as,w=m(T,g.crossOrigin);s.d.L(p,T,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},an.preloadModule=function(p,g){if(typeof p=="string")if(g){var T=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},an.requestFormReset=function(p){s.d.r(p)},an.unstable_batchedUpdates=function(p,g){return p(g)},an.useFormState=function(p,g,T){return d.H.useFormState(p,g,T)},an.useFormStatus=function(){return d.H.useHostTransitionStatus()},an.version="19.1.0",an}var e0;function JE(){if(e0)return Im.exports;e0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=FA(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function GA(){if(t0)return Yl;t0=1;var i=HA(),e=Ap(),n=JE();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=f;break}if(b===l){_=!0,l=h,a=f;break}b=b.sibling}if(!_){for(b=f.child;b;){if(b===a){_=!0,a=f,l=h;break}if(b===l){_=!0,l=f,a=h;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function De(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case H:return"Profiler";case Q:return"StrictMode";case pe:return"Suspense";case Re:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case fe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return r=t.displayName||null,r!==null?r:De(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return De(t(r))}catch{}}return null}var Me=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Le=[],V=-1;function ie(t){return{current:t}}function ue(t){0>V||(t.current=Le[V],Le[V]=null,V--)}function re(t,r){V++,Le[V]=t.current,t.current=r}var ge=ie(null),Pe=ie(null),we=ie(null),Et=ie(null);function at(t,r){switch(re(we,r),re(Pe,t),re(ge,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?T_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=T_(r),t=b_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(ge),re(ge,t)}function _n(){ue(ge),ue(Pe),ue(we)}function ri(t){t.memoizedState!==null&&re(Et,t);var r=ge.current,a=b_(r,t.type);r!==a&&(re(Pe,t),re(ge,a))}function xn(t){Pe.current===t&&(ue(ge),ue(Pe)),Et.current===t&&(ue(Et),Hl._currentValue=ve)}var yi=Object.prototype.hasOwnProperty,vi=i.unstable_scheduleCallback,Gi=i.unstable_cancelCallback,Os=i.unstable_shouldYield,Ms=i.unstable_requestPaint,fn=i.unstable_now,$o=i.unstable_getCurrentPriorityLevel,Mr=i.unstable_ImmediatePriority,kr=i.unstable_UserBlockingPriority,$i=i.unstable_NormalPriority,Ko=i.unstable_LowPriority,Vr=i.unstable_IdlePriority,ks=i.log,Ia=i.unstable_setDisableYieldValue,mt=null,Xe=null;function Qt(t){if(typeof ks=="function"&&Ia(t),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(mt,t)}catch{}}var zt=Math.clz32?Math.clz32:_i,Ca=Math.log,Qo=Math.LN2;function _i(t){return t>>>=0,t===0?32:31-(Ca(t)/Qo|0)|0}var Ki=256,Ei=4194304;function En(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qi(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~f,l!==0?h=En(l):(_&=b,_!==0?h=En(_):a||(a=b&~t,a!==0&&(h=En(a))))):(b=l&~f,b!==0?h=En(b):_!==0?h=En(_):a||(a=l&~t,a!==0&&(h=En(a)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:h}function Yi(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Vs(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pr(){var t=Ki;return Ki<<=1,(Ki&4194048)===0&&(Ki=256),t}function Lr(){var t=Ei;return Ei<<=1,(Ei&62914560)===0&&(Ei=4194304),t}function Ti(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function Bn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ps(t,r,a,l,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var X=31-zt(a),ee=1<<X;b[X]=0,D[X]=-1;var G=F[X];if(G!==null)for(F[X]=null,X=0;X<G.length;X++){var $=G[X];$!==null&&($.lane&=-536870913)}a&=~ee}l!==0&&qn(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~r))}function qn(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-zt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Ur(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-zt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function bi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function j(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ae(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:B_(t.type))}function _e(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var ce=Math.random().toString(36).slice(2),he="__reactFiber$"+ce,Ee="__reactProps$"+ce,tt="__reactContainer$"+ce,Bt="__reactEvents$"+ce,rn="__reactListeners$"+ce,yt="__reactHandles$"+ce,Nn="__reactResources$"+ce,nt="__reactMarker$"+ce;function Hn(t){delete t[he],delete t[Ee],delete t[Bt],delete t[rn],delete t[yt]}function Ce(t){var r=t[he];if(r)return r;for(var a=t.parentNode;a;){if(r=a[tt]||a[he]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=R_(t);t!==null;){if(a=t[he])return a;t=R_(t)}return r}t=a,a=t.parentNode}return null}function it(t){if(t=t[he]||t[tt]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function wi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function mn(t){var r=t[Nn];return r||(r=t[Nn]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(t){t[nt]=!0}var Yo=new Set,xa={};function si(t,r){Wi(t,r),Wi(t+"Capture",r)}function Wi(t,r){for(xa[t]=r,t=0;t<r.length;t++)Yo.add(r[t])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},Ls={};function Hu(t){return yi.call(Ls,t)?!0:yi.call(qu,t)?!1:Bu.test(t)?Ls[t]=!0:(qu[t]=!0,!1)}function jr(t,r,a){if(Hu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Si(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Yt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Us,Fu;function Xi(t){if(Us===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Us=r&&r[1]||"",Fu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+t+Fu}var Na=!1;function Da(t,r){if(!t||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch($){var G=$}Reflect.construct(t,[],ee)}else{try{ee.call()}catch($){G=$}t.call(ee.prototype)}}else{try{throw Error()}catch($){G=$}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],b=f[1];if(_&&b){var D=_.split(`
`),F=b.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var X=`
`+D[l].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=l&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Xi(a):""}function Wo(t){switch(t.tag){case 26:case 27:case 5:return Xi(t.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 15:return Da(t.type,!1);case 11:return Da(t.type.render,!1);case 1:return Da(t.type,!0);case 31:return Xi("Activity");default:return""}}function Oa(t){try{var r="";do r+=Wo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xo(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ad(t){var r=Xo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,f.call(this,_)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ma(t){t._valueTracker||(t._valueTracker=Ad(t))}function Zo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Xo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function js(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Rd=/[\n"\\]/g;function Ct(t){return t.replace(Rd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Dn(t,r,a,l,h,f,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+pn(r)):t.value!==""+pn(r)&&(t.value=""+pn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?zr(t,_,pn(r)):a!=null?zr(t,_,pn(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+pn(b):t.removeAttribute("name")}function zs(t,r,a,l,h,f,_,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+pn(a):"",r=r!=null?""+pn(r):a,b||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function zr(t,r,a){r==="number"&&js(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Zi(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+pn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function ot(t,r,a){if(r!=null&&(r=""+pn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+pn(a):""}function Bs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Me(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=pn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Fn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||qs.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Jo(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Gu(t,h,l)}else for(var f in r)r.hasOwnProperty(f)&&Gu(t,f,r[f])}function el(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ka(t){return Cd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ji=null;function Gn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var er=null,tr=null;function tl(t){var r=it(t);if(r&&(t=r.stateNode)){var a=t[Ee]||null;e:switch(t=r.stateNode,r.type){case"input":if(Dn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Ee]||null;if(!h)throw Error(s(90));Dn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Zo(l)}break e;case"textarea":ot(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Zi(t,!!a.multiple,r,!1)}}}var Ai=!1;function $u(t,r,a){if(Ai)return t(r,a);Ai=!0;try{var l=t(r);return l}finally{if(Ai=!1,(er!==null||tr!==null)&&(jc(),er&&(r=er,t=tr,tr=er=null,tl(r),t)))for(r=0;r<t.length;r++)tl(t[r])}}function Hs(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Ee]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$n=!1;if(ai)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){$n=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{$n=!1}var Ri=null,Br=null,nr=null;function nl(){if(nr)return nr;var t,r=Br,a=r.length,l,h="value"in Ri?Ri.value:Ri.textContent,f=h.length;for(t=0;t<a&&r[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===h[f-l];l++);return nr=h.slice(t,1<l?1-l:void 0)}function Ii(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ci(){return!0}function il(){return!1}function qt(t){function r(a,l,h,f,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ci:il,this.isPropagationStopped=il,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),r}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Va=qt(Je),Gs=T({},Je,{view:0,detail:0}),Ku=qt(Gs),Pa,La,xi,$s=T({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xi&&(xi&&t.type==="mousemove"?(Pa=t.screenX-xi.screenX,La=t.screenY-xi.screenY):La=Pa=0,xi=t),Pa)},movementY:function(t){return"movementY"in t?t.movementY:La}}),Kn=qt($s),Qu=T({},$s,{dataTransfer:0}),xd=qt(Qu),Ks=T({},Gs,{relatedTarget:0}),Ua=qt(Ks),rl=T({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=qt(rl),Yu=T({},Je,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),za=qt(Yu),Nd=T({},Je,{data:0}),sl=qt(Nd),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Xu[t])?!!r[t]:!1}function Ys(){return al}var Zu=T({},Gs,{key:function(t){if(t.key){var r=Qs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(t){return t.type==="keypress"?Ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ba=qt(Zu),Ju=T({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=qt(Ju),ir=T({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),ec=qt(ir),tc=T({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=qt(tc),ic=T({},$s,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qa=qt(ic),gn=T({},Je,{newState:0,oldState:0}),rc=qt(gn),sc=[9,13,27,32],Ni=ai&&"CompositionEvent"in window,c=null;ai&&"documentMode"in document&&(c=document.documentMode);var y=ai&&"TextEvent"in window&&!c,v=ai&&(!Ni||c&&8<c&&11>=c),A=" ",B=!1;function K(t,r){switch(t){case"keyup":return sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $e=!1;function Mt(t,r){switch(t){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(B=!0,A);case"textInput":return t=r.data,t===A&&B?null:t;default:return null}}function Ke(t,r){if($e)return t==="compositionend"||!Ni&&K(t,r)?(t=nl(),nr=Br=Ri=null,$e=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ht[t.type]:r==="textarea"}function rr(t,r,a,l){er?tr?tr.push(l):tr=[l]:er=l,r=Gc(r,"onChange"),0<r.length&&(a=new Va("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Wt=null,Di=null;function ll(t){g_(t,0)}function ac(t){var r=wi(t);if(Zo(r))return t}function Lg(t,r){if(t==="change")return r}var Ug=!1;if(ai){var Dd;if(ai){var Od="oninput"in document;if(!Od){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Od=typeof jg.oninput=="function"}Dd=Od}else Dd=!1;Ug=Dd&&(!document.documentMode||9<document.documentMode)}function zg(){Wt&&(Wt.detachEvent("onpropertychange",Bg),Di=Wt=null)}function Bg(t){if(t.propertyName==="value"&&ac(Di)){var r=[];rr(r,Di,t,Gn(t)),$u(ll,r)}}function pS(t,r,a){t==="focusin"?(zg(),Wt=r,Di=a,Wt.attachEvent("onpropertychange",Bg)):t==="focusout"&&zg()}function gS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ac(Di)}function yS(t,r){if(t==="click")return ac(r)}function vS(t,r){if(t==="input"||t==="change")return ac(r)}function _S(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var On=typeof Object.is=="function"?Object.is:_S;function ul(t,r){if(On(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!yi.call(r,h)||!On(t[h],r[h]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hg(t,r){var a=qg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qg(a)}}function Fg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Fg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Gg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=js(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=js(t.document)}return r}function Md(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var ES=ai&&"documentMode"in document&&11>=document.documentMode,Ha=null,kd=null,cl=null,Vd=!1;function $g(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vd||Ha==null||Ha!==js(l)||(l=Ha,"selectionStart"in l&&Md(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ul(cl,l)||(cl=l,l=Gc(kd,"onSelect"),0<l.length&&(r=new Va("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Ha)))}function Ws(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Fa={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},Pd={},Kg={};ai&&(Kg=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Xs(t){if(Pd[t])return Pd[t];if(!Fa[t])return t;var r=Fa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Kg)return Pd[t]=r[a];return t}var Qg=Xs("animationend"),Yg=Xs("animationiteration"),Wg=Xs("animationstart"),TS=Xs("transitionrun"),bS=Xs("transitionstart"),wS=Xs("transitioncancel"),Xg=Xs("transitionend"),Zg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function oi(t,r){Zg.set(t,r),si(r,[t])}var Jg=new WeakMap;function Qn(t,r){if(typeof t=="object"&&t!==null){var a=Jg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Oa(r)},Jg.set(t,r),r)}return{value:t,source:r,stack:Oa(r)}}var Yn=[],Ga=0,Ud=0;function oc(){for(var t=Ga,r=Ud=Ga=0;r<t;){var a=Yn[r];Yn[r++]=null;var l=Yn[r];Yn[r++]=null;var h=Yn[r];Yn[r++]=null;var f=Yn[r];if(Yn[r++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&ey(a,h,f)}}function lc(t,r,a,l){Yn[Ga++]=t,Yn[Ga++]=r,Yn[Ga++]=a,Yn[Ga++]=l,Ud|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function jd(t,r,a,l){return lc(t,r,a,l),uc(t)}function $a(t,r){return lc(t,null,null,r),uc(t)}function ey(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-zt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),f):null}function uc(t){if(50<Vl)throw Vl=0,$f=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ka={};function SS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,r,a,l){return new SS(t,r,a,l)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sr(t,r){var a=t.alternate;return a===null?(a=Mn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ty(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function cc(t,r,a,l,h,f){var _=0;if(l=t,typeof t=="function")zd(t)&&(_=1);else if(typeof t=="string")_=RA(t,a,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Mn(31,a,r,h),t.elementType=R,t.lanes=f,t;case M:return Zs(a.children,h,f,r);case Q:_=8,h|=24;break;case H:return t=Mn(12,a,r,h|2),t.elementType=H,t.lanes=f,t;case pe:return t=Mn(13,a,r,h),t.elementType=pe,t.lanes=f,t;case Re:return t=Mn(19,a,r,h),t.elementType=Re,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case ne:_=10;break e;case se:_=9;break e;case fe:_=11;break e;case P:_=14;break e;case S:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Mn(_,a,r,h),r.elementType=t,r.type=l,r.lanes=f,r}function Zs(t,r,a,l){return t=Mn(7,t,l,r),t.lanes=a,t}function Bd(t,r,a){return t=Mn(6,t,null,r),t.lanes=a,t}function qd(t,r,a){return r=Mn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Qa=[],Ya=0,hc=null,dc=0,Wn=[],Xn=0,Js=null,ar=1,or="";function ea(t,r){Qa[Ya++]=dc,Qa[Ya++]=hc,hc=t,dc=r}function ny(t,r,a){Wn[Xn++]=ar,Wn[Xn++]=or,Wn[Xn++]=Js,Js=t;var l=ar;t=or;var h=32-zt(l)-1;l&=~(1<<h),a+=1;var f=32-zt(r)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,ar=1<<32-zt(r)+h|a<<h|l,or=f+t}else ar=1<<f|a<<h|l,or=t}function Hd(t){t.return!==null&&(ea(t,1),ny(t,1,0))}function Fd(t){for(;t===hc;)hc=Qa[--Ya],Qa[Ya]=null,dc=Qa[--Ya],Qa[Ya]=null;for(;t===Js;)Js=Wn[--Xn],Wn[Xn]=null,or=Wn[--Xn],Wn[Xn]=null,ar=Wn[--Xn],Wn[Xn]=null}var yn=null,Tt=null,Ze=!1,ta=null,Oi=!1,Gd=Error(s(519));function na(t){var r=Error(s(418,""));throw fl(Qn(r,t)),Gd}function iy(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[he]=t,r[Ee]=l,a){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(a=0;a<Ll.length;a++)He(Ll[a],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":He("invalid",r),zs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ma(r);break;case"select":He("invalid",r);break;case"textarea":He("invalid",r),Bs(r,l.value,l.defaultValue,l.children),Ma(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||E_(r.textContent,a)?(l.popover!=null&&(He("beforetoggle",r),He("toggle",r)),l.onScroll!=null&&He("scroll",r),l.onScrollEnd!=null&&He("scrollend",r),l.onClick!=null&&(r.onclick=$c),r=!0):r=!1,r||na(t)}function ry(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 13:Oi=!1;return;case 27:case 3:Oi=!0;return;default:yn=yn.return}}function hl(t){if(t!==yn)return!1;if(!Ze)return ry(t),Ze=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||lm(t.type,t.memoizedProps)),a=!a),a&&Tt&&na(t),ry(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){Tt=ui(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}Tt=null}}else r===27?(r=Tt,is(t.type)?(t=dm,dm=null,Tt=t):Tt=r):Tt=yn?ui(t.stateNode.nextSibling):null;return!0}function dl(){Tt=yn=null,Ze=!1}function sy(){var t=ta;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),ta=null),t}function fl(t){ta===null?ta=[t]:ta.push(t)}var $d=ie(null),ia=null,lr=null;function qr(t,r,a){re($d,r._currentValue),r._currentValue=a}function ur(t){t._currentValue=$d.current,ue($d)}function Kd(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Qd(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=h;for(var D=0;D<r.length;D++)if(b.context===r[D]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),Kd(f.return,a,t),l||(_=null);break e}f=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Kd(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ml(t,r,a,l){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=h.type;On(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Et.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}h=h.return}t!==null&&Qd(r,t,a,l),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ra(t){ia=t,lr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return ay(ia,t)}function mc(t,r){return ia===null&&ra(t),ay(t,r)}function ay(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},lr===null){if(t===null)throw Error(s(308));lr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else lr=lr.next=r;return a}var AS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},RS=i.unstable_scheduleCallback,IS=i.unstable_NormalPriority,Vt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new AS,data:new Map,refCount:0}}function pl(t){t.refCount--,t.refCount===0&&RS(IS,function(){t.controller.abort()})}var gl=null,Wd=0,Wa=0,Xa=null;function CS(t,r){if(gl===null){var a=gl=[];Wd=0,Wa=Jf(),Xa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Wd++,r.then(oy,oy),r}function oy(){if(--Wd===0&&gl!==null){Xa!==null&&(Xa.status="fulfilled");var t=gl;gl=null,Wa=0,Xa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function xS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var ly=W.S;W.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&CS(t,r),ly!==null&&ly(t,r)};var sa=ie(null);function Xd(){var t=sa.current;return t!==null?t:dt.pooledCache}function pc(t,r){r===null?re(sa,sa.current):re(sa,r.pool)}function uy(){var t=Xd();return t===null?null:{parent:Vt._currentValue,pool:t}}var yl=Error(s(460)),cy=Error(s(474)),gc=Error(s(542)),Zd={then:function(){}};function hy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yc(){}function dy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(yc,yc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,my(t),t;default:if(typeof r.status=="string")r.then(yc,yc);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,my(t),t}throw vl=r,yl}}var vl=null;function fy(){if(vl===null)throw Error(s(459));var t=vl;return vl=null,t}function my(t){if(t===yl||t===gc)throw Error(s(483))}var Hr=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ef(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(rt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=uc(t),ey(t,null,a),r}return lc(t,l,r,a),uc(t)}function _l(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Ur(t,a)}}function tf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=r:f=f.next=r}else h=f=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var nf=!1;function El(){if(nf){var t=Xa;if(t!==null)throw t}}function Tl(t,r,a,l){nf=!1;var h=t.updateQueue;Hr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var D=b,F=D.next;D.next=null,_===null?f=F:_.next=F,_=D;var X=t.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==_&&(b===null?X.firstBaseUpdate=F:b.next=F,X.lastBaseUpdate=D))}if(f!==null){var ee=h.baseState;_=0,X=F=D=null,b=f;do{var G=b.lane&-536870913,$=G!==b.lane;if($?(Qe&G)===G:(l&G)===G){G!==0&&G===Wa&&(nf=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var xe=t,Se=b;G=r;var ct=a;switch(Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){ee=xe.call(ct,ee,G);break e}ee=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,G=typeof xe=="function"?xe.call(ct,ee,G):xe,G==null)break e;ee=T({},ee,G);break e;case 2:Hr=!0}}G=b.callback,G!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[G]:$.push(G))}else $={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(F=X=$,D=ee):X=X.next=$,_|=G;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;$=b,b=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);X===null&&(D=ee),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=X,f===null&&(h.shared.lanes=0),Jr|=_,t.lanes=_,t.memoizedState=ee}}function py(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function gy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)py(a[t],r)}var Za=ie(null),vc=ie(0);function yy(t,r){t=gr,re(vc,t),re(Za,r),gr=t|r.baseLanes}function rf(){re(vc,gr),re(Za,Za.current)}function sf(){gr=vc.current,ue(Za),ue(vc)}var $r=0,Ue=null,lt=null,xt=null,_c=!1,Ja=!1,aa=!1,Ec=0,bl=0,eo=null,NS=0;function At(){throw Error(s(321))}function af(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!On(t[a],r[a]))return!1;return!0}function of(t,r,a,l,h,f){return $r=f,Ue=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=t===null||t.memoizedState===null?ev:tv,aa=!1,f=a(l,h),aa=!1,Ja&&(f=_y(r,a,l,h)),vy(t),f}function vy(t){W.H=Rc;var r=lt!==null&&lt.next!==null;if($r=0,xt=lt=Ue=null,_c=!1,bl=0,eo=null,r)throw Error(s(300));t===null||Ft||(t=t.dependencies,t!==null&&fc(t)&&(Ft=!0))}function _y(t,r,a,l){Ue=t;var h=0;do{if(Ja&&(eo=null),bl=0,Ja=!1,25<=h)throw Error(s(301));if(h+=1,xt=lt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=LS,f=r(a,l)}while(Ja);return f}function DS(){var t=W.H,r=t.useState()[0];return r=typeof r.then=="function"?wl(r):r,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(Ue.flags|=1024),r}function lf(){var t=Ec!==0;return Ec=0,t}function uf(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function cf(t){if(_c){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}_c=!1}$r=0,xt=lt=Ue=null,Ja=!1,bl=Ec=0,eo=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ue.memoizedState=xt=t:xt=xt.next=t,xt}function Nt(){if(lt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var r=xt===null?Ue.memoizedState:xt.next;if(r!==null)xt=r,lt=t;else{if(t===null)throw Ue.alternate===null?Error(s(467)):Error(s(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},xt===null?Ue.memoizedState=xt=t:xt=xt.next=t}return xt}function hf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var r=bl;return bl+=1,eo===null&&(eo=[]),t=dy(eo,t,r),r=Ue,(xt===null?r.memoizedState:xt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?ev:tv),t}function Tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===ne)return sn(t)}throw Error(s(438,String(t)))}function df(t){var r=null,a=Ue.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ue.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=hf(),Ue.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=N;return r.index++,a}function cr(t,r){return typeof r=="function"?r(t):r}function bc(t){var r=Nt();return ff(r,lt,t)}function ff(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}r.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var b=_=null,D=null,F=r,X=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Qe&ee)===ee:($r&ee)===ee){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Wa&&(X=!0);else if(($r&G)===G){F=F.next,G===Wa&&(X=!0);continue}else ee={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=ee,_=f):D=D.next=ee,Ue.lanes|=G,Jr|=G;ee=F.action,aa&&a(f,ee),f=F.hasEagerState?F.eagerState:a(f,ee)}else G={lane:ee,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(b=D=G,_=f):D=D.next=G,Ue.lanes|=ee,Jr|=ee;F=F.next}while(F!==null&&F!==r);if(D===null?_=f:D.next=b,!On(f,t.memoizedState)&&(Ft=!0,X&&(a=Xa,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=D,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function mf(t){var r=Nt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);On(f,r.memoizedState)||(Ft=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function Ey(t,r,a){var l=Ue,h=Nt(),f=Ze;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!On((lt||h).memoizedState,a);_&&(h.memoizedState=a,Ft=!0),h=h.queue;var b=wy.bind(null,l,h,t);if(Sl(2048,8,b,[t]),h.getSnapshot!==r||_||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,to(9,wc(),by.bind(null,l,h,a,r),null),dt===null)throw Error(s(349));f||($r&124)!==0||Ty(l,r,a)}return a}function Ty(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Ue.updateQueue,r===null?(r=hf(),Ue.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function by(t,r,a,l){r.value=a,r.getSnapshot=l,Sy(r)&&Ay(t)}function wy(t,r,a){return a(function(){Sy(r)&&Ay(t)})}function Sy(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!On(t,a)}catch{return!0}}function Ay(t){var r=$a(t,2);r!==null&&Un(r,t,2)}function pf(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),aa){Qt(!0);try{a()}finally{Qt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:t},r}function Ry(t,r,a,l){return t.baseState=a,ff(t,lt,typeof l=="function"?l:cr)}function OS(t,r,a,l,h){if(Ac(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};W.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,Iy(r,f)):(f.next=a.next,r.pending=a.next=f)}}function Iy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var f=W.T,_={};W.T=_;try{var b=a(h,l),D=W.S;D!==null&&D(_,b),Cy(t,r,b)}catch(F){gf(t,r,F)}finally{W.T=f}}else try{f=a(h,l),Cy(t,r,f)}catch(F){gf(t,r,F)}}function Cy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){xy(t,r,l)},function(l){return gf(t,r,l)}):xy(t,r,a)}function xy(t,r,a){r.status="fulfilled",r.value=a,Ny(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Iy(t,a)))}function gf(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Ny(r),r=r.next;while(r!==l)}t.action=null}function Ny(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Dy(t,r){return r}function Oy(t,r){if(Ze){var a=dt.formState;if(a!==null){e:{var l=Ue;if(Ze){if(Tt){t:{for(var h=Tt,f=Oi;h.nodeType!==8;){if(!f){h=null;break t}if(h=ui(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Tt=ui(h.nextSibling),l=h.data==="F!";break e}}na(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dy,lastRenderedState:r},a.queue=l,a=Xy.bind(null,Ue,l),l.dispatch=a,l=pf(!1),f=Tf.bind(null,Ue,!1,l.queue),l=Tn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=OS.bind(null,Ue,h,f,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function My(t){var r=Nt();return ky(r,lt,t)}function ky(t,r,a){if(r=ff(t,r,Dy)[0],t=bc(cr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wl(r)}catch(_){throw _===yl?gc:_}else l=r;r=Nt();var h=r.queue,f=h.dispatch;return a!==r.memoizedState&&(Ue.flags|=2048,to(9,wc(),MS.bind(null,h,a),null)),[l,f,t]}function MS(t,r){t.action=r}function Vy(t){var r=Nt(),a=lt;if(a!==null)return ky(r,a,t);Nt(),r=r.memoizedState,a=Nt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function to(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Ue.updateQueue,r===null&&(r=hf(),Ue.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function wc(){return{destroy:void 0,resource:void 0}}function Py(){return Nt().memoizedState}function Sc(t,r,a,l){var h=Tn();l=l===void 0?null:l,Ue.flags|=t,h.memoizedState=to(1|r,wc(),a,l)}function Sl(t,r,a,l){var h=Nt();l=l===void 0?null:l;var f=h.memoizedState.inst;lt!==null&&l!==null&&af(l,lt.memoizedState.deps)?h.memoizedState=to(r,f,a,l):(Ue.flags|=t,h.memoizedState=to(1|r,f,a,l))}function Ly(t,r){Sc(8390656,8,t,r)}function Uy(t,r){Sl(2048,8,t,r)}function jy(t,r){return Sl(4,2,t,r)}function zy(t,r){return Sl(4,4,t,r)}function By(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function qy(t,r,a){a=a!=null?a.concat([t]):null,Sl(4,4,By.bind(null,r,t),a)}function yf(){}function Hy(t,r){var a=Nt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&af(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Fy(t,r){var a=Nt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&af(r,l[1]))return l[0];if(l=t(),aa){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[l,r],l}function vf(t,r,a){return a===void 0||($r&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Kv(),Ue.lanes|=t,Jr|=t,a)}function Gy(t,r,a,l){return On(a,r)?a:Za.current!==null?(t=vf(t,a,l),On(t,r)||(Ft=!0),t):($r&42)===0?(Ft=!0,t.memoizedState=a):(t=Kv(),Ue.lanes|=t,Jr|=t,r)}function $y(t,r,a,l,h){var f=oe.p;oe.p=f!==0&&8>f?f:8;var _=W.T,b={};W.T=b,Tf(t,!1,r,a);try{var D=h(),F=W.S;if(F!==null&&F(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=xS(D,l);Al(t,r,X,Ln(t))}else Al(t,r,l,Ln(t))}catch(ee){Al(t,r,{then:function(){},status:"rejected",reason:ee},Ln())}finally{oe.p=f,W.T=_}}function kS(){}function _f(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Ky(t).queue;$y(t,h,r,ve,a===null?kS:function(){return Qy(t),a(l)})}function Ky(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Qy(t){var r=Ky(t).next.queue;Al(t,r,{},Ln())}function Ef(){return sn(Hl)}function Yy(){return Nt().memoizedState}function Wy(){return Nt().memoizedState}function VS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Ln();t=Fr(a);var l=Gr(r,t,a);l!==null&&(Un(l,r,a),_l(l,r,a)),r={cache:Yd()},t.payload=r;return}r=r.return}}function PS(t,r,a){var l=Ln();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(t)?Zy(r,a):(a=jd(t,r,a,l),a!==null&&(Un(a,t,l),Jy(a,r,l)))}function Xy(t,r,a){var l=Ln();Al(t,r,a,l)}function Al(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ac(t))Zy(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var _=r.lastRenderedState,b=f(_,a);if(h.hasEagerState=!0,h.eagerState=b,On(b,_))return lc(t,r,h,0),dt===null&&oc(),!1}catch{}finally{}if(a=jd(t,r,h,l),a!==null)return Un(a,t,l),Jy(a,r,l),!0}return!1}function Tf(t,r,a,l){if(l={lane:2,revertLane:Jf(),action:l,hasEagerState:!1,eagerState:null,next:null},Ac(t)){if(r)throw Error(s(479))}else r=jd(t,a,l,2),r!==null&&Un(r,t,2)}function Ac(t){var r=t.alternate;return t===Ue||r!==null&&r===Ue}function Zy(t,r){Ja=_c=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Jy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Ur(t,a)}}var Rc={readContext:sn,use:Tc,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},ev={readContext:sn,use:Tc,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:sn,useEffect:Ly,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Sc(4194308,4,By.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Sc(4194308,4,t,r)},useInsertionEffect:function(t,r){Sc(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(aa){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var h=a(r);if(aa){Qt(!0);try{a(r)}finally{Qt(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=PS.bind(null,Ue,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=pf(t);var r=t.queue,a=Xy.bind(null,Ue,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:yf,useDeferredValue:function(t,r){var a=Tn();return vf(a,t,r)},useTransition:function(){var t=pf(!1);return t=$y.bind(null,Ue,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Ue,h=Tn();if(Ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),dt===null)throw Error(s(349));(Qe&124)!==0||Ty(l,r,a)}h.memoizedState=a;var f={value:a,getSnapshot:r};return h.queue=f,Ly(wy.bind(null,l,f,t),[t]),l.flags|=2048,to(9,wc(),by.bind(null,l,f,a,r),null),a},useId:function(){var t=Tn(),r=dt.identifierPrefix;if(Ze){var a=or,l=ar;a=(l&~(1<<32-zt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=Ec++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=NS++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:Ef,useFormState:Oy,useActionState:Oy,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Tf.bind(null,Ue,!0,a),a.dispatch=r,[t,r]},useMemoCache:df,useCacheRefresh:function(){return Tn().memoizedState=VS.bind(null,Ue)}},tv={readContext:sn,use:Tc,useCallback:Hy,useContext:sn,useEffect:Uy,useImperativeHandle:qy,useInsertionEffect:jy,useLayoutEffect:zy,useMemo:Fy,useReducer:bc,useRef:Py,useState:function(){return bc(cr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Nt();return Gy(a,lt.memoizedState,t,r)},useTransition:function(){var t=bc(cr)[0],r=Nt().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:Ey,useId:Yy,useHostTransitionStatus:Ef,useFormState:My,useActionState:My,useOptimistic:function(t,r){var a=Nt();return Ry(a,lt,t,r)},useMemoCache:df,useCacheRefresh:Wy},LS={readContext:sn,use:Tc,useCallback:Hy,useContext:sn,useEffect:Uy,useImperativeHandle:qy,useInsertionEffect:jy,useLayoutEffect:zy,useMemo:Fy,useReducer:mf,useRef:Py,useState:function(){return mf(cr)},useDebugValue:yf,useDeferredValue:function(t,r){var a=Nt();return lt===null?vf(a,t,r):Gy(a,lt.memoizedState,t,r)},useTransition:function(){var t=mf(cr)[0],r=Nt().memoizedState;return[typeof t=="boolean"?t:wl(t),r]},useSyncExternalStore:Ey,useId:Yy,useHostTransitionStatus:Ef,useFormState:Vy,useActionState:Vy,useOptimistic:function(t,r){var a=Nt();return lt!==null?Ry(a,lt,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:df,useCacheRefresh:Wy},no=null,Rl=0;function Ic(t){var r=Rl;return Rl+=1,no===null&&(no=[]),dy(no,t,r)}function Il(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Cc(t,r){throw r.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function nv(t){var r=t._init;return r(t._payload)}function iv(t){function r(z,U){if(t){var q=z.deletions;q===null?(z.deletions=[U],z.flags|=16):q.push(U)}}function a(z,U){if(!t)return null;for(;U!==null;)r(z,U),U=U.sibling;return null}function l(z){for(var U=new Map;z!==null;)z.key!==null?U.set(z.key,z):U.set(z.index,z),z=z.sibling;return U}function h(z,U){return z=sr(z,U),z.index=0,z.sibling=null,z}function f(z,U,q){return z.index=q,t?(q=z.alternate,q!==null?(q=q.index,q<U?(z.flags|=67108866,U):q):(z.flags|=67108866,U)):(z.flags|=1048576,U)}function _(z){return t&&z.alternate===null&&(z.flags|=67108866),z}function b(z,U,q,Z){return U===null||U.tag!==6?(U=Bd(q,z.mode,Z),U.return=z,U):(U=h(U,q),U.return=z,U)}function D(z,U,q,Z){var ye=q.type;return ye===M?X(z,U,q.props.children,Z,q.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&nv(ye)===U.type)?(U=h(U,q.props),Il(U,q),U.return=z,U):(U=cc(q.type,q.key,q.props,null,z.mode,Z),Il(U,q),U.return=z,U)}function F(z,U,q,Z){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=qd(q,z.mode,Z),U.return=z,U):(U=h(U,q.children||[]),U.return=z,U)}function X(z,U,q,Z,ye){return U===null||U.tag!==7?(U=Zs(q,z.mode,Z,ye),U.return=z,U):(U=h(U,q),U.return=z,U)}function ee(z,U,q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Bd(""+U,z.mode,q),U.return=z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return q=cc(U.type,U.key,U.props,null,z.mode,q),Il(q,U),q.return=z,q;case O:return U=qd(U,z.mode,q),U.return=z,U;case S:var Z=U._init;return U=Z(U._payload),ee(z,U,q)}if(Me(U)||k(U))return U=Zs(U,z.mode,q,null),U.return=z,U;if(typeof U.then=="function")return ee(z,Ic(U),q);if(U.$$typeof===ne)return ee(z,mc(z,U),q);Cc(z,U)}return null}function G(z,U,q,Z){var ye=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:b(z,U,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return q.key===ye?D(z,U,q,Z):null;case O:return q.key===ye?F(z,U,q,Z):null;case S:return ye=q._init,q=ye(q._payload),G(z,U,q,Z)}if(Me(q)||k(q))return ye!==null?null:X(z,U,q,Z,null);if(typeof q.then=="function")return G(z,U,Ic(q),Z);if(q.$$typeof===ne)return G(z,U,mc(z,q),Z);Cc(z,q)}return null}function $(z,U,q,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(q)||null,b(U,z,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return z=z.get(Z.key===null?q:Z.key)||null,D(U,z,Z,ye);case O:return z=z.get(Z.key===null?q:Z.key)||null,F(U,z,Z,ye);case S:var ze=Z._init;return Z=ze(Z._payload),$(z,U,q,Z,ye)}if(Me(Z)||k(Z))return z=z.get(q)||null,X(U,z,Z,ye,null);if(typeof Z.then=="function")return $(z,U,q,Ic(Z),ye);if(Z.$$typeof===ne)return $(z,U,q,mc(U,Z),ye);Cc(U,Z)}return null}function xe(z,U,q,Z){for(var ye=null,ze=null,Te=U,Ae=U=0,$t=null;Te!==null&&Ae<q.length;Ae++){Te.index>Ae?($t=Te,Te=null):$t=Te.sibling;var We=G(z,Te,q[Ae],Z);if(We===null){Te===null&&(Te=$t);break}t&&Te&&We.alternate===null&&r(z,Te),U=f(We,U,Ae),ze===null?ye=We:ze.sibling=We,ze=We,Te=$t}if(Ae===q.length)return a(z,Te),Ze&&ea(z,Ae),ye;if(Te===null){for(;Ae<q.length;Ae++)Te=ee(z,q[Ae],Z),Te!==null&&(U=f(Te,U,Ae),ze===null?ye=Te:ze.sibling=Te,ze=Te);return Ze&&ea(z,Ae),ye}for(Te=l(Te);Ae<q.length;Ae++)$t=$(Te,z,Ae,q[Ae],Z),$t!==null&&(t&&$t.alternate!==null&&Te.delete($t.key===null?Ae:$t.key),U=f($t,U,Ae),ze===null?ye=$t:ze.sibling=$t,ze=$t);return t&&Te.forEach(function(ls){return r(z,ls)}),Ze&&ea(z,Ae),ye}function Se(z,U,q,Z){if(q==null)throw Error(s(151));for(var ye=null,ze=null,Te=U,Ae=U=0,$t=null,We=q.next();Te!==null&&!We.done;Ae++,We=q.next()){Te.index>Ae?($t=Te,Te=null):$t=Te.sibling;var ls=G(z,Te,We.value,Z);if(ls===null){Te===null&&(Te=$t);break}t&&Te&&ls.alternate===null&&r(z,Te),U=f(ls,U,Ae),ze===null?ye=ls:ze.sibling=ls,ze=ls,Te=$t}if(We.done)return a(z,Te),Ze&&ea(z,Ae),ye;if(Te===null){for(;!We.done;Ae++,We=q.next())We=ee(z,We.value,Z),We!==null&&(U=f(We,U,Ae),ze===null?ye=We:ze.sibling=We,ze=We);return Ze&&ea(z,Ae),ye}for(Te=l(Te);!We.done;Ae++,We=q.next())We=$(Te,z,Ae,We.value,Z),We!==null&&(t&&We.alternate!==null&&Te.delete(We.key===null?Ae:We.key),U=f(We,U,Ae),ze===null?ye=We:ze.sibling=We,ze=We);return t&&Te.forEach(function(UA){return r(z,UA)}),Ze&&ea(z,Ae),ye}function ct(z,U,q,Z){if(typeof q=="object"&&q!==null&&q.type===M&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case I:e:{for(var ye=q.key;U!==null;){if(U.key===ye){if(ye=q.type,ye===M){if(U.tag===7){a(z,U.sibling),Z=h(U,q.props.children),Z.return=z,z=Z;break e}}else if(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&nv(ye)===U.type){a(z,U.sibling),Z=h(U,q.props),Il(Z,q),Z.return=z,z=Z;break e}a(z,U);break}else r(z,U);U=U.sibling}q.type===M?(Z=Zs(q.props.children,z.mode,Z,q.key),Z.return=z,z=Z):(Z=cc(q.type,q.key,q.props,null,z.mode,Z),Il(Z,q),Z.return=z,z=Z)}return _(z);case O:e:{for(ye=q.key;U!==null;){if(U.key===ye)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){a(z,U.sibling),Z=h(U,q.children||[]),Z.return=z,z=Z;break e}else{a(z,U);break}else r(z,U);U=U.sibling}Z=qd(q,z.mode,Z),Z.return=z,z=Z}return _(z);case S:return ye=q._init,q=ye(q._payload),ct(z,U,q,Z)}if(Me(q))return xe(z,U,q,Z);if(k(q)){if(ye=k(q),typeof ye!="function")throw Error(s(150));return q=ye.call(q),Se(z,U,q,Z)}if(typeof q.then=="function")return ct(z,U,Ic(q),Z);if(q.$$typeof===ne)return ct(z,U,mc(z,q),Z);Cc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,U!==null&&U.tag===6?(a(z,U.sibling),Z=h(U,q),Z.return=z,z=Z):(a(z,U),Z=Bd(q,z.mode,Z),Z.return=z,z=Z),_(z)):a(z,U)}return function(z,U,q,Z){try{Rl=0;var ye=ct(z,U,q,Z);return no=null,ye}catch(Te){if(Te===yl||Te===gc)throw Te;var ze=Mn(29,Te,null,z.mode);return ze.lanes=Z,ze.return=z,ze}finally{}}}var io=iv(!0),rv=iv(!1),Zn=ie(null),Mi=null;function Kr(t){var r=t.alternate;re(Pt,Pt.current&1),re(Zn,t),Mi===null&&(r===null||Za.current!==null||r.memoizedState!==null)&&(Mi=t)}function sv(t){if(t.tag===22){if(re(Pt,Pt.current),re(Zn,t),Mi===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Mi=t)}}else Qr()}function Qr(){re(Pt,Pt.current),re(Zn,Zn.current)}function hr(t){ue(Zn),Mi===t&&(Mi=null),ue(Pt)}var Pt=ie(0);function xc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||hm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function bf(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var wf={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Ln(),h=Fr(l);h.payload=r,a!=null&&(h.callback=a),r=Gr(t,h,l),r!==null&&(Un(r,t,l),_l(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Ln(),h=Fr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Gr(t,h,l),r!==null&&(Un(r,t,l),_l(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Ln(),l=Fr(a);l.tag=2,r!=null&&(l.callback=r),r=Gr(t,l,a),r!==null&&(Un(r,t,a),_l(r,t,a))}};function av(t,r,a,l,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):r.prototype&&r.prototype.isPureReactComponent?!ul(a,l)||!ul(h,f):!0}function ov(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&wf.enqueueReplaceState(r,r.state,null)}function oa(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function lv(t){Nc(t)}function uv(t){console.error(t)}function cv(t){Nc(t)}function Dc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function hv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Sf(t,r,a){return a=Fr(a),a.tag=3,a.payload={element:null},a.callback=function(){Dc(t,r)},a}function dv(t){return t=Fr(t),t.tag=3,t}function fv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){hv(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){hv(r,a,l),typeof h!="function"&&(es===null?es=new Set([this]):es.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function US(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ml(r,a,h,!0),a=Zn.current,a!==null){switch(a.tag){case 13:return Mi===null?Qf():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Wf(t,l,h)),!1;case 22:return a.flags|=65536,l===Zd?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Wf(t,l,h)),!1}throw Error(s(435,a.tag))}return Wf(t,l,h),Qf(),!1}if(Ze)return r=Zn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Gd&&(t=Error(s(422),{cause:l}),fl(Qn(t,a)))):(l!==Gd&&(r=Error(s(423),{cause:l}),fl(Qn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Qn(l,a),h=Sf(t.stateNode,l,h),tf(t,h),bt!==4&&(bt=2)),!1;var f=Error(s(520),{cause:l});if(f=Qn(f,a),kl===null?kl=[f]:kl.push(f),bt!==4&&(bt=2),r===null)return!0;l=Qn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Sf(a.stateNode,l,t),tf(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(es===null||!es.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=dv(h),fv(h,t,a,l),tf(a,h),!1}a=a.return}while(a!==null);return!1}var mv=Error(s(461)),Ft=!1;function Xt(t,r,a,l){r.child=t===null?rv(r,null,a,l):io(r,t.child,a,l)}function pv(t,r,a,l,h){a=a.render;var f=r.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return ra(r),l=of(t,r,a,_,f,h),b=lf(),t!==null&&!Ft?(uf(t,r,h),dr(t,r,h)):(Ze&&b&&Hd(r),r.flags|=1,Xt(t,r,l,h),r.child)}function gv(t,r,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!zd(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,yv(t,r,f,l,h)):(t=cc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!Of(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(_,l)&&t.ref===r.ref)return dr(t,r,h)}return r.flags|=1,t=sr(f,l),t.ref=r.ref,t.return=r,r.child=t}function yv(t,r,a,l,h){if(t!==null){var f=t.memoizedProps;if(ul(f,l)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=l=f,Of(t,h))(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,dr(t,r,h)}return Af(t,r,a,l,h)}function vv(t,r,a){var l=r.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=r.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return _v(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,f!==null?f.cachePool:null),f!==null?yy(r,f):rf(),sv(r);else return r.lanes=r.childLanes=536870912,_v(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(pc(r,f.cachePool),yy(r,f),Qr(),r.memoizedState=null):(t!==null&&pc(r,null),rf(),Qr());return Xt(t,r,h,a),r.child}function _v(t,r,a,l){var h=Xd();return h=h===null?null:{parent:Vt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&pc(r,null),rf(),sv(r),t!==null&&ml(t,r,l,!0),null}function Oc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function Af(t,r,a,l,h){return ra(r),a=of(t,r,a,l,void 0,h),l=lf(),t!==null&&!Ft?(uf(t,r,h),dr(t,r,h)):(Ze&&l&&Hd(r),r.flags|=1,Xt(t,r,a,h),r.child)}function Ev(t,r,a,l,h,f){return ra(r),r.updateQueue=null,a=_y(r,l,a,h),vy(t),l=lf(),t!==null&&!Ft?(uf(t,r,f),dr(t,r,f)):(Ze&&l&&Hd(r),r.flags|=1,Xt(t,r,a,f),r.child)}function Tv(t,r,a,l,h){if(ra(r),r.stateNode===null){var f=Ka,_=a.contextType;typeof _=="object"&&_!==null&&(f=sn(_)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},Jd(r),_=a.contextType,f.context=typeof _=="object"&&_!==null?sn(_):Ka,f.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(bf(r,a,_,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&wf.enqueueReplaceState(f,f.state,null),Tl(r,l,f,h),El(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var b=r.memoizedProps,D=oa(a,b);f.props=D;var F=f.context,X=a.contextType;_=Ka,typeof X=="object"&&X!==null&&(_=sn(X));var ee=a.getDerivedStateFromProps;X=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,X||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||F!==_)&&ov(r,f,l,_),Hr=!1;var G=r.memoizedState;f.state=G,Tl(r,l,f,h),El(),F=r.memoizedState,b||G!==F||Hr?(typeof ee=="function"&&(bf(r,a,ee,l),F=r.memoizedState),(D=Hr||av(r,a,D,l,G,F,_))?(X||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),f.props=l,f.state=F,f.context=_,l=D):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,ef(t,r),_=r.memoizedProps,X=oa(a,_),f.props=X,ee=r.pendingProps,G=f.context,F=a.contextType,D=Ka,typeof F=="object"&&F!==null&&(D=sn(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==ee||G!==D)&&ov(r,f,l,D),Hr=!1,G=r.memoizedState,f.state=G,Tl(r,l,f,h),El();var $=r.memoizedState;_!==ee||G!==$||Hr||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof b=="function"&&(bf(r,a,b,l),$=r.memoizedState),(X=Hr||av(r,a,X,l,G,$,D)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,$,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,$,D)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),f.props=l,f.state=$,f.context=D,l=X):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,Oc(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=io(r,t.child,null,h),r.child=io(r,null,a,h)):Xt(t,r,a,h),r.memoizedState=f.state,t=r.child):t=dr(t,r,h),t}function bv(t,r,a,l){return dl(),r.flags|=256,Xt(t,r,a,l),r.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function If(t){return{baseLanes:t,cachePool:uy()}}function Cf(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Jn),t}function wv(t,r,a){var l=r.pendingProps,h=!1,f=(r.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ze){if(h?Kr(r):Qr(),Ze){var b=Tt,D;if(D=b){e:{for(D=b,b=Oi;D.nodeType!==8;){if(!b){b=null;break e}if(D=ui(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(r.memoizedState={dehydrated:b,treeContext:Js!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},D=Mn(18,null,null,0),D.stateNode=b,D.return=r,r.child=D,yn=r,Tt=null,D=!0):D=!1}D||na(r)}if(b=r.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return hm(b)?r.lanes=32:r.lanes=536870912,null;hr(r)}return b=l.children,l=l.fallback,h?(Qr(),h=r.mode,b=Mc({mode:"hidden",children:b},h),l=Zs(l,h,a,null),b.return=r,l.return=r,b.sibling=l,r.child=b,h=r.child,h.memoizedState=If(a),h.childLanes=Cf(t,_,a),r.memoizedState=Rf,l):(Kr(r),xf(r,b))}if(D=t.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(f)r.flags&256?(Kr(r),r.flags&=-257,r=Nf(t,r,a)):r.memoizedState!==null?(Qr(),r.child=t.child,r.flags|=128,r=null):(Qr(),h=l.fallback,b=r.mode,l=Mc({mode:"visible",children:l.children},b),h=Zs(h,b,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,io(r,t.child,null,a),l=r.child,l.memoizedState=If(a),l.childLanes=Cf(t,_,a),r.memoizedState=Rf,r=h);else if(Kr(r),hm(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,fl({value:l,source:null,stack:null}),r=Nf(t,r,a)}else if(Ft||ml(t,r,a,!1),_=(a&t.childLanes)!==0,Ft||_){if(_=dt,_!==null&&(l=a&-a,l=(l&42)!==0?1:bi(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,$a(t,l),Un(_,t,l),mv;b.data==="$?"||Qf(),r=Nf(t,r,a)}else b.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,Tt=ui(b.nextSibling),yn=r,Ze=!0,ta=null,Oi=!1,t!==null&&(Wn[Xn++]=ar,Wn[Xn++]=or,Wn[Xn++]=Js,ar=t.id,or=t.overflow,Js=r),r=xf(r,l.children),r.flags|=4096);return r}return h?(Qr(),h=l.fallback,b=r.mode,D=t.child,F=D.sibling,l=sr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?h=sr(F,h):(h=Zs(h,b,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,b=t.child.memoizedState,b===null?b=If(a):(D=b.cachePool,D!==null?(F=Vt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=uy(),b={baseLanes:b.baseLanes|a,cachePool:D}),h.memoizedState=b,h.childLanes=Cf(t,_,a),r.memoizedState=Rf,l):(Kr(r),a=t.child,t=a.sibling,a=sr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function xf(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=Mn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nf(t,r,a){return io(r,t.child,null,a),t=xf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Sv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Kd(t.return,r,a)}function Df(t,r,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function Av(t,r,a){var l=r.pendingProps,h=l.revealOrder,f=l.tail;if(Xt(t,r,l.children,a),l=Pt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sv(t,a,r);else if(t.tag===19)Sv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(re(Pt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&xc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Df(r,!1,h,a,f);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&xc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Df(r,!0,a,null,f);break;case"together":Df(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function dr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Jr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ml(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=sr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=sr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Of(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function jS(t,r,a){switch(r.tag){case 3:at(r,r.stateNode.containerInfo),qr(r,Vt,t.memoizedState.cache),dl();break;case 27:case 5:ri(r);break;case 4:at(r,r.stateNode.containerInfo);break;case 10:qr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Kr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?wv(t,r,a):(Kr(r),t=dr(t,r,a),t!==null?t.sibling:null);Kr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ml(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return Av(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Pt,Pt.current),l)break;return null;case 22:case 23:return r.lanes=0,vv(t,r,a);case 24:qr(r,Vt,t.memoizedState.cache)}return dr(t,r,a)}function Rv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ft=!0;else{if(!Of(t,a)&&(r.flags&128)===0)return Ft=!1,jS(t,r,a);Ft=(t.flags&131072)!==0}else Ft=!1,Ze&&(r.flags&1048576)!==0&&ny(r,dc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")zd(l)?(t=oa(l,t),r.tag=1,r=Tv(null,r,l,t,a)):(r.tag=0,r=Af(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===fe){r.tag=11,r=pv(null,r,l,t,a);break e}else if(h===P){r.tag=14,r=gv(null,r,l,t,a);break e}}throw r=De(l)||l,Error(s(306,r,""))}}return r;case 0:return Af(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=oa(l,r.pendingProps),Tv(t,r,l,h,a);case 3:e:{if(at(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;h=f.element,ef(t,r),Tl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,qr(r,Vt,l),l!==f.cache&&Qd(r,[Vt],a,!0),El(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=bv(t,r,l,a);break e}else if(l!==h){h=Qn(Error(s(424)),r),fl(h),r=bv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Tt=ui(t.firstChild),yn=r,Ze=!0,ta=null,Oi=!0,a=rv(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(dl(),l===h){r=dr(t,r,a);break e}Xt(t,r,l,a)}r=r.child}return r;case 26:return Oc(t,r),t===null?(a=N_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ze||(a=r.type,t=r.pendingProps,l=Kc(we.current).createElement(a),l[he]=r,l[Ee]=t,Jt(l,a,t),St(l),r.stateNode=l):r.memoizedState=N_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ri(r),t===null&&Ze&&(l=r.stateNode=I_(r.type,r.pendingProps,we.current),yn=r,Oi=!0,h=Tt,is(r.type)?(dm=h,Tt=ui(l.firstChild)):Tt=h),Xt(t,r,r.pendingProps.children,a),Oc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ze&&((h=l=Tt)&&(l=fA(l,r.type,r.pendingProps,Oi),l!==null?(r.stateNode=l,yn=r,Tt=ui(l.firstChild),Oi=!1,h=!0):h=!1),h||na(r)),ri(r),h=r.type,f=r.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,lm(h,f)?l=null:_!==null&&lm(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=of(t,r,DS,null,null,a),Hl._currentValue=h),Oc(t,r),Xt(t,r,l,a),r.child;case 6:return t===null&&Ze&&((t=a=Tt)&&(a=mA(a,r.pendingProps,Oi),a!==null?(r.stateNode=a,yn=r,Tt=null,t=!0):t=!1),t||na(r)),null;case 13:return wv(t,r,a);case 4:return at(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=io(r,null,l,a):Xt(t,r,l,a),r.child;case 11:return pv(t,r,r.type,r.pendingProps,a);case 7:return Xt(t,r,r.pendingProps,a),r.child;case 8:return Xt(t,r,r.pendingProps.children,a),r.child;case 12:return Xt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,qr(r,r.type,l.value),Xt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,ra(r),h=sn(h),l=l(h),r.flags|=1,Xt(t,r,l,a),r.child;case 14:return gv(t,r,r.type,r.pendingProps,a);case 15:return yv(t,r,r.type,r.pendingProps,a);case 19:return Av(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Mc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=sr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return vv(t,r,a);case 24:return ra(r),l=sn(Vt),t===null?(h=Xd(),h===null&&(h=dt,f=Yd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),r.memoizedState={parent:l,cache:h},Jd(r),qr(r,Vt,h)):((t.lanes&a)!==0&&(ef(t,r),Tl(r,null,null,a),El()),h=t.memoizedState,f=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),qr(r,Vt,l)):(l=f.cache,qr(r,Vt,l),l!==h.cache&&Qd(r,[Vt],a,!0))),Xt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function fr(t){t.flags|=4}function Iv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!V_(r)){if(r=Zn.current,r!==null&&((Qe&4194048)===Qe?Mi!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||r!==Mi))throw vl=Zd,cy;t.flags|=8192}}function kc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Lr():536870912,t.lanes|=r,oo|=r)}function Cl(t,r){if(!Ze)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function vt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function zS(t,r,a){var l=r.pendingProps;switch(Fd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ur(Vt),_n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hl(r)?fr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,sy())),vt(r),null;case 26:return a=r.memoizedState,t===null?(fr(r),a!==null?(vt(r),Iv(r,a)):(vt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(fr(r),vt(r),Iv(r,a)):(vt(r),r.flags&=-16777217):(t.memoizedProps!==l&&fr(r),vt(r),r.flags&=-16777217),null;case 27:xn(r),a=we.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return vt(r),null}t=ge.current,hl(r)?iy(r):(t=I_(h,l,a),r.stateNode=t,fr(r))}return vt(r),null;case 5:if(xn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return vt(r),null}if(t=ge.current,hl(r))iy(r);else{switch(h=Kc(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[he]=r,t[Ee]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Jt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&fr(r)}}return vt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&fr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=we.current,hl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[he]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||E_(t.nodeValue,a)),t||na(r)}else t=Kc(t).createTextNode(l),t[he]=r,r.stateNode=t}return vt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=hl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[he]=r}else dl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),h=!1}else h=sy(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(hr(r),r):(hr(r),null)}if(hr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),kc(r,r.updateQueue),vt(r),null;case 4:return _n(),t===null&&im(r.stateNode.containerInfo),vt(r),null;case 10:return ur(r.type),vt(r),null;case 19:if(ue(Pt),h=r.memoizedState,h===null)return vt(r),null;if(l=(r.flags&128)!==0,f=h.rendering,f===null)if(l)Cl(h,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=xc(t),f!==null){for(r.flags|=128,Cl(h,!1),t=f.updateQueue,r.updateQueue=t,kc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)ty(a,t),a=a.sibling;return re(Pt,Pt.current&1|2),r.child}t=t.sibling}h.tail!==null&&fn()>Lc&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304)}else{if(!l)if(t=xc(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,kc(r,t),Cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Ze)return vt(r),null}else 2*fn()-h.renderingStartTime>Lc&&a!==536870912&&(r.flags|=128,l=!0,Cl(h,!1),r.lanes=4194304);h.isBackwards?(f.sibling=r.child,r.child=f):(t=h.last,t!==null?t.sibling=f:r.child=f,h.last=f)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=fn(),r.sibling=null,t=Pt.current,re(Pt,l?t&1|2:t&1),r):(vt(r),null);case 22:case 23:return hr(r),sf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),a=r.updateQueue,a!==null&&kc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ue(sa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ur(Vt),vt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function BS(t,r){switch(Fd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ur(Vt),_n(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return xn(r),null;case 13:if(hr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));dl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ue(Pt),null;case 4:return _n(),null;case 10:return ur(r.type),null;case 22:case 23:return hr(r),sf(),t!==null&&ue(sa),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ur(Vt),null;case 25:return null;default:return null}}function Cv(t,r){switch(Fd(r),r.tag){case 3:ur(Vt),_n();break;case 26:case 27:case 5:xn(r);break;case 4:_n();break;case 13:hr(r);break;case 19:ue(Pt);break;case 10:ur(r.type);break;case 22:case 23:hr(r),sf(),t!==null&&ue(sa);break;case 24:ur(Vt)}}function xl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){ht(r,r.return,b)}}function Yr(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=r;var D=a,F=b;try{F()}catch(X){ht(h,D,X)}}}l=l.next}while(l!==f)}}catch(X){ht(r,r.return,X)}}function xv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{gy(r,a)}catch(l){ht(t,t.return,l)}}}function Nv(t,r,a){a.props=oa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ht(t,r,l)}}function Nl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ht(t,r,h)}}function ki(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ht(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ht(t,r,h)}else a.current=null}function Dv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ht(t,t.return,h)}}function Mf(t,r,a){try{var l=t.stateNode;lA(l,t.type,a,r),l[Ee]=r}catch(h){ht(t,t.return,h)}}function Ov(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&is(t.type)||t.tag===4}function kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ov(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&is(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vf(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=$c));else if(l!==4&&(l===27&&is(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Vf(t,r,a),t=t.sibling;t!==null;)Vf(t,r,a),t=t.sibling}function Vc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&is(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Vc(t,r,a),t=t.sibling;t!==null;)Vc(t,r,a),t=t.sibling}function Mv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Jt(r,l,a),r[he]=t,r[Ee]=a}catch(f){ht(t,t.return,f)}}var mr=!1,Rt=!1,Pf=!1,kv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function qS(t,r){if(t=t.containerInfo,am=Jc,t=Gg(t),Md(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,b=-1,D=-1,F=0,X=0,ee=t,G=null;t:for(;;){for(var $;ee!==a||h!==0&&ee.nodeType!==3||(b=_+h),ee!==f||l!==0&&ee.nodeType!==3||(D=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),($=ee.firstChild)!==null;)G=ee,ee=$;for(;;){if(ee===t)break t;if(G===a&&++F===h&&(b=_),G===f&&++X===l&&(D=_),($=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=$}a=b===-1||D===-1?null:{start:b,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(om={focusedElem:t,selectionRange:a},Jc=!1,Gt=r;Gt!==null;)if(r=Gt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Gt=t;else for(;Gt!==null;){switch(r=Gt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var xe=oa(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(xe,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){ht(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)cm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Gt=t;break}Gt=r.return}}function Vv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Wr(t,a),l&4&&xl(5,a);break;case 1:if(Wr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){ht(a,a.return,_)}else{var h=oa(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ht(a,a.return,_)}}l&64&&xv(a),l&512&&Nl(a,a.return);break;case 3:if(Wr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{gy(t,r)}catch(_){ht(a,a.return,_)}}break;case 27:r===null&&l&4&&Mv(a);case 26:case 5:Wr(t,a),r===null&&l&4&&Dv(a),l&512&&Nl(a,a.return);break;case 12:Wr(t,a);break;case 13:Wr(t,a),l&4&&Uv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=XS.bind(null,a),pA(t,a))));break;case 22:if(l=a.memoizedState!==null||mr,!l){r=r!==null&&r.memoizedState!==null||Rt,h=mr;var f=Rt;mr=l,(Rt=r)&&!f?Xr(t,a,(a.subtreeFlags&8772)!==0):Wr(t,a),mr=h,Rt=f}break;case 30:break;default:Wr(t,a)}}function Pv(t){var r=t.alternate;r!==null&&(t.alternate=null,Pv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Hn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,bn=!1;function pr(t,r,a){for(a=a.child;a!==null;)Lv(t,r,a),a=a.sibling}function Lv(t,r,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:Rt||ki(a,r),pr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||ki(a,r);var l=pt,h=bn;is(a.type)&&(pt=a.stateNode,bn=!1),pr(t,r,a),jl(a.stateNode),pt=l,bn=h;break;case 5:Rt||ki(a,r);case 6:if(l=pt,h=bn,pt=null,pr(t,r,a),pt=l,bn=h,pt!==null)if(bn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(f){ht(a,r,f)}else try{pt.removeChild(a.stateNode)}catch(f){ht(a,r,f)}break;case 18:pt!==null&&(bn?(t=pt,A_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Kl(t)):A_(pt,a.stateNode));break;case 4:l=pt,h=bn,pt=a.stateNode.containerInfo,bn=!0,pr(t,r,a),pt=l,bn=h;break;case 0:case 11:case 14:case 15:Rt||Yr(2,a,r),Rt||Yr(4,a,r),pr(t,r,a);break;case 1:Rt||(ki(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Nv(a,r,l)),pr(t,r,a);break;case 21:pr(t,r,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,pr(t,r,a),Rt=l;break;default:pr(t,r,a)}}function Uv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(a){ht(r,r.return,a)}}function HS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new kv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new kv),r;default:throw Error(s(435,t.tag))}}function Lf(t,r){var a=HS(t);r.forEach(function(l){var h=ZS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function kn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,_=r,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(is(b.type)){pt=b.stateNode,bn=!1;break e}break;case 5:pt=b.stateNode,bn=!1;break e;case 3:case 4:pt=b.stateNode.containerInfo,bn=!0;break e}b=b.return}if(pt===null)throw Error(s(160));Lv(f,_,h),pt=null,bn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)jv(r,t),r=r.sibling}var li=null;function jv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:kn(r,t),Vn(t),l&4&&(Yr(3,t,t.return),xl(3,t),Yr(5,t,t.return));break;case 1:kn(r,t),Vn(t),l&512&&(Rt||a===null||ki(a,a.return)),l&64&&mr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=li;if(kn(r,t),Vn(t),l&512&&(Rt||a===null||ki(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[nt]||f[he]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Jt(f,l,a),f[he]=t,St(f),l=f;break e;case"link":var _=M_("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(f=_[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}f=h.createElement(l),Jt(f,l,a),h.head.appendChild(f);break;case"meta":if(_=M_("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(f=_[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}f=h.createElement(l),Jt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[he]=t,St(f),l=f}t.stateNode=l}else k_(h,t.type,t.stateNode);else t.stateNode=O_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?k_(h,t.type,t.stateNode):O_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Mf(t,t.memoizedProps,a.memoizedProps)}break;case 27:kn(r,t),Vn(t),l&512&&(Rt||a===null||ki(a,a.return)),a!==null&&l&4&&Mf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(kn(r,t),Vn(t),l&512&&(Rt||a===null||ki(a,a.return)),t.flags&32){h=t.stateNode;try{Fn(h,"")}catch($){ht(t,t.return,$)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Mf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Pf=!0);break;case 6:if(kn(r,t),Vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch($){ht(t,t.return,$)}}break;case 3:if(Wc=null,h=li,li=Qc(r.containerInfo),kn(r,t),li=h,Vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Kl(r.containerInfo)}catch($){ht(t,t.return,$)}Pf&&(Pf=!1,zv(t));break;case 4:l=li,li=Qc(t.stateNode.containerInfo),kn(r,t),Vn(t),li=l;break;case 12:kn(r,t),Vn(t);break;case 13:kn(r,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Hf=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=mr,X=Rt;if(mr=F||h,Rt=X||D,kn(r,t),Rt=X,mr=F,Vn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||D||mr||Rt||la(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(f=D.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=D.stateNode;var ee=D.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){ht(D,D.return,$)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch($){ht(D,D.return,$)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Lf(t,a))));break;case 19:kn(r,t),Vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lf(t,l)));break;case 30:break;case 21:break;default:kn(r,t),Vn(t)}}function Vn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Ov(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=kf(t);Vc(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(Fn(_,""),a.flags&=-33);var b=kf(t);Vc(t,b,_);break;case 3:case 4:var D=a.stateNode.containerInfo,F=kf(t);Vf(t,F,D);break;default:throw Error(s(161))}}catch(X){ht(t,t.return,X)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function zv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;zv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Wr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Vv(t,r.alternate,r),r=r.sibling}function la(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Yr(4,r,r.return),la(r);break;case 1:ki(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Nv(r,r.return,a),la(r);break;case 27:jl(r.stateNode);case 26:case 5:ki(r,r.return),la(r);break;case 22:r.memoizedState===null&&la(r);break;case 30:la(r);break;default:la(r)}t=t.sibling}}function Xr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,f=r,_=f.flags;switch(f.tag){case 0:case 11:case 15:Xr(h,f,a),xl(4,f);break;case 1:if(Xr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){ht(l,l.return,F)}if(l=f,h=l.updateQueue,h!==null){var b=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)py(D[h],b)}catch(F){ht(l,l.return,F)}}a&&_&64&&xv(f),Nl(f,f.return);break;case 27:Mv(f);case 26:case 5:Xr(h,f,a),a&&l===null&&_&4&&Dv(f),Nl(f,f.return);break;case 12:Xr(h,f,a);break;case 13:Xr(h,f,a),a&&_&4&&Uv(h,f);break;case 22:f.memoizedState===null&&Xr(h,f,a),Nl(f,f.return);break;case 30:break;default:Xr(h,f,a)}r=r.sibling}}function Uf(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&pl(a))}function jf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t))}function Vi(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Bv(t,r,a,l),r=r.sibling}function Bv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Vi(t,r,a,l),h&2048&&xl(9,r);break;case 1:Vi(t,r,a,l);break;case 3:Vi(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&pl(t)));break;case 12:if(h&2048){Vi(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,_=f.id,b=f.onPostCommit;typeof b=="function"&&b(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ht(r,r.return,D)}}else Vi(t,r,a,l);break;case 13:Vi(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,_=r.alternate,r.memoizedState!==null?f._visibility&2?Vi(t,r,a,l):Dl(t,r):f._visibility&2?Vi(t,r,a,l):(f._visibility|=2,ro(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&Uf(_,r);break;case 24:Vi(t,r,a,l),h&2048&&jf(r.alternate,r);break;default:Vi(t,r,a,l)}}function ro(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,_=r,b=a,D=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:ro(f,_,b,D,h),xl(8,_);break;case 23:break;case 22:var X=_.stateNode;_.memoizedState!==null?X._visibility&2?ro(f,_,b,D,h):Dl(f,_):(X._visibility|=2,ro(f,_,b,D,h)),h&&F&2048&&Uf(_.alternate,_);break;case 24:ro(f,_,b,D,h),h&&F&2048&&jf(_.alternate,_);break;default:ro(f,_,b,D,h)}r=r.sibling}}function Dl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Dl(a,l),h&2048&&Uf(l.alternate,l);break;case 24:Dl(a,l),h&2048&&jf(l.alternate,l);break;default:Dl(a,l)}r=r.sibling}}var Ol=8192;function so(t){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)qv(t),t=t.sibling}function qv(t){switch(t.tag){case 26:so(t),t.flags&Ol&&t.memoizedState!==null&&CA(li,t.memoizedState,t.memoizedProps);break;case 5:so(t);break;case 3:case 4:var r=li;li=Qc(t.stateNode.containerInfo),so(t),li=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ol,Ol=16777216,so(t),Ol=r):so(t));break;default:so(t)}}function Hv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ml(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Gv(l,t)}Hv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Fv(t),t=t.sibling}function Fv(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&Yr(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Pc(t)):Ml(t);break;default:Ml(t)}}function Pc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Gt=l,Gv(l,t)}Hv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Yr(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}t=t.sibling}}function Gv(t,r){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Yr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var h=l.sibling,f=l.return;if(Pv(l),l===a){Gt=null;break e}if(h!==null){h.return=f,Gt=h;break e}Gt=f}}}var FS={getCacheForType:function(t){var r=sn(Vt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},GS=typeof WeakMap=="function"?WeakMap:Map,rt=0,dt=null,qe=null,Qe=0,st=0,Pn=null,Zr=!1,ao=!1,zf=!1,gr=0,bt=0,Jr=0,ua=0,Bf=0,Jn=0,oo=0,kl=null,wn=null,qf=!1,Hf=0,Lc=1/0,Uc=null,es=null,Zt=0,ts=null,lo=null,uo=0,Ff=0,Gf=null,$v=null,Vl=0,$f=null;function Ln(){if((rt&2)!==0&&Qe!==0)return Qe&-Qe;if(W.T!==null){var t=Wa;return t!==0?t:Jf()}return ae()}function Kv(){Jn===0&&(Jn=(Qe&536870912)===0||Ze?Pr():536870912);var t=Zn.current;return t!==null&&(t.flags|=32),Jn}function Un(t,r,a){(t===dt&&(st===2||st===9)||t.cancelPendingCommit!==null)&&(co(t,0),ns(t,Qe,Jn,!1)),Bn(t,a),((rt&2)===0||t!==dt)&&(t===dt&&((rt&2)===0&&(ua|=a),bt===4&&ns(t,Qe,Jn,!1)),Pi(t))}function Qv(t,r,a){if((rt&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Yi(t,r),h=l?QS(t,r):Yf(t,r,!0),f=l;do{if(h===0){ao&&!l&&ns(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!$S(a)){h=Yf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var b=t;h=kl;var D=b.current.memoizedState.isDehydrated;if(D&&(co(b,_).flags|=256),_=Yf(b,_,!1),_!==2){if(zf&&!D){b.errorRecoveryDisabledLanes|=f,ua|=f,h=4;break e}f=wn,wn=h,f!==null&&(wn===null?wn=f:wn.push.apply(wn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){co(t,0),ns(t,r,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ns(l,r,Jn,!Zr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Hf+300-fn(),10<h)){if(ns(l,r,Jn,!Zr),Qi(l,0,!0)!==0)break e;l.timeoutHandle=w_(Yv.bind(null,l,a,wn,Uc,qf,r,Jn,ua,oo,Zr,f,2,-0,0),h);break e}Yv(l,a,wn,Uc,qf,r,Jn,ua,oo,Zr,f,0,-0,0)}}break}while(!0);Pi(t)}function Yv(t,r,a,l,h,f,_,b,D,F,X,ee,G,$){if(t.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:IA},qv(r),ee=xA(),ee!==null)){t.cancelPendingCommit=ee(n_.bind(null,t,r,f,a,l,h,_,b,D,X,1,G,$)),ns(t,f,_,!F);return}n_(t,r,f,a,l,h,_,b,D)}function $S(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!On(f(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ns(t,r,a,l){r&=~Bf,r&=~ua,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var f=31-zt(h),_=1<<f;l[f]=-1,h&=~_}a!==0&&qn(t,a,r)}function jc(){return(rt&6)===0?(Pl(0),!1):!0}function Kf(){if(qe!==null){if(st===0)var t=qe.return;else t=qe,lr=ia=null,cf(t),no=null,Rl=0,t=qe;for(;t!==null;)Cv(t.alternate,t),t=t.return;qe=null}}function co(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,cA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Kf(),dt=t,qe=a=sr(t.current,null),Qe=r,st=0,Pn=null,Zr=!1,ao=Yi(t,r),zf=!1,oo=Jn=Bf=ua=Jr=bt=0,wn=kl=null,qf=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-zt(l),f=1<<h;r|=t[h],l&=~f}return gr=r,oc(),a}function Wv(t,r){Ue=null,W.H=Rc,r===yl||r===gc?(r=fy(),st=3):r===cy?(r=fy(),st=4):st=r===mv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Pn=r,qe===null&&(bt=1,Dc(t,Qn(r,t.current)))}function Xv(){var t=W.H;return W.H=Rc,t===null?Rc:t}function Zv(){var t=W.A;return W.A=FS,t}function Qf(){bt=4,Zr||(Qe&4194048)!==Qe&&Zn.current!==null||(ao=!0),(Jr&134217727)===0&&(ua&134217727)===0||dt===null||ns(dt,Qe,Jn,!1)}function Yf(t,r,a){var l=rt;rt|=2;var h=Xv(),f=Zv();(dt!==t||Qe!==r)&&(Uc=null,co(t,r)),r=!1;var _=bt;e:do try{if(st!==0&&qe!==null){var b=qe,D=Pn;switch(st){case 8:Kf(),_=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(r=!0);var F=st;if(st=0,Pn=null,ho(t,b,D,F),a&&ao){_=0;break e}break;default:F=st,st=0,Pn=null,ho(t,b,D,F)}}KS(),_=bt;break}catch(X){Wv(t,X)}while(!0);return r&&t.shellSuspendCounter++,lr=ia=null,rt=l,W.H=h,W.A=f,qe===null&&(dt=null,Qe=0,oc()),_}function KS(){for(;qe!==null;)Jv(qe)}function QS(t,r){var a=rt;rt|=2;var l=Xv(),h=Zv();dt!==t||Qe!==r?(Uc=null,Lc=fn()+500,co(t,r)):ao=Yi(t,r);e:do try{if(st!==0&&qe!==null){r=qe;var f=Pn;t:switch(st){case 1:st=0,Pn=null,ho(t,r,f,1);break;case 2:case 9:if(hy(f)){st=0,Pn=null,e_(r);break}r=function(){st!==2&&st!==9||dt!==t||(st=7),Pi(t)},f.then(r,r);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:hy(f)?(st=0,Pn=null,e_(r)):(st=0,Pn=null,ho(t,r,f,7));break;case 5:var _=null;switch(qe.tag){case 26:_=qe.memoizedState;case 5:case 27:var b=qe;if(!_||V_(_)){st=0,Pn=null;var D=b.sibling;if(D!==null)qe=D;else{var F=b.return;F!==null?(qe=F,zc(F)):qe=null}break t}}st=0,Pn=null,ho(t,r,f,5);break;case 6:st=0,Pn=null,ho(t,r,f,6);break;case 8:Kf(),bt=6;break e;default:throw Error(s(462))}}YS();break}catch(X){Wv(t,X)}while(!0);return lr=ia=null,W.H=l,W.A=h,rt=a,qe!==null?0:(dt=null,Qe=0,oc(),bt)}function YS(){for(;qe!==null&&!Os();)Jv(qe)}function Jv(t){var r=Rv(t.alternate,t,gr);t.memoizedProps=t.pendingProps,r===null?zc(t):qe=r}function e_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Ev(a,r,r.pendingProps,r.type,void 0,Qe);break;case 11:r=Ev(a,r,r.pendingProps,r.type.render,r.ref,Qe);break;case 5:cf(r);default:Cv(a,r),r=qe=ty(r,gr),r=Rv(a,r,gr)}t.memoizedProps=t.pendingProps,r===null?zc(t):qe=r}function ho(t,r,a,l){lr=ia=null,cf(r),no=null,Rl=0;var h=r.return;try{if(US(t,h,r,a,Qe)){bt=1,Dc(t,Qn(a,t.current)),qe=null;return}}catch(f){if(h!==null)throw qe=h,f;bt=1,Dc(t,Qn(a,t.current)),qe=null;return}r.flags&32768?(Ze||l===1?t=!0:ao||(Qe&536870912)!==0?t=!1:(Zr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Zn.current,l!==null&&l.tag===13&&(l.flags|=16384))),t_(r,t)):zc(r)}function zc(t){var r=t;do{if((r.flags&32768)!==0){t_(r,Zr);return}t=r.return;var a=zS(r.alternate,r,gr);if(a!==null){qe=a;return}if(r=r.sibling,r!==null){qe=r;return}qe=r=t}while(r!==null);bt===0&&(bt=5)}function t_(t,r){do{var a=BS(t.alternate,t);if(a!==null){a.flags&=32767,qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){qe=t;return}qe=t=a}while(t!==null);bt=6,qe=null}function n_(t,r,a,l,h,f,_,b,D){t.cancelPendingCommit=null;do Bc();while(Zt!==0);if((rt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Ud,Ps(t,a,f,_,b,D),t===dt&&(qe=dt=null,Qe=0),lo=r,ts=t,uo=a,Ff=f,Gf=h,$v=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,JS($i,function(){return o_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,h=oe.p,oe.p=2,_=rt,rt|=4;try{qS(t,r,a)}finally{rt=_,oe.p=h,W.T=l}}Zt=1,i_(),r_(),s_()}}function i_(){if(Zt===1){Zt=0;var t=ts,r=lo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var h=rt;rt|=4;try{jv(r,t);var f=om,_=Gg(t.containerInfo),b=f.focusedElem,D=f.selectionRange;if(_!==b&&b&&b.ownerDocument&&Fg(b.ownerDocument.documentElement,b)){if(D!==null&&Md(b)){var F=D.start,X=D.end;if(X===void 0&&(X=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(X,b.value.length);else{var ee=b.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var $=G.getSelection(),xe=b.textContent.length,Se=Math.min(D.start,xe),ct=D.end===void 0?Se:Math.min(D.end,xe);!$.extend&&Se>ct&&(_=ct,ct=Se,Se=_);var z=Hg(b,Se),U=Hg(b,ct);if(z&&U&&($.rangeCount!==1||$.anchorNode!==z.node||$.anchorOffset!==z.offset||$.focusNode!==U.node||$.focusOffset!==U.offset)){var q=ee.createRange();q.setStart(z.node,z.offset),$.removeAllRanges(),Se>ct?($.addRange(q),$.extend(U.node,U.offset)):(q.setEnd(U.node,U.offset),$.addRange(q))}}}}for(ee=[],$=b;$=$.parentNode;)$.nodeType===1&&ee.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ee.length;b++){var Z=ee[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Jc=!!am,om=am=null}finally{rt=h,oe.p=l,W.T=a}}t.current=r,Zt=2}}function r_(){if(Zt===2){Zt=0;var t=ts,r=lo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=oe.p;oe.p=2;var h=rt;rt|=4;try{Vv(t,r.alternate,r)}finally{rt=h,oe.p=l,W.T=a}}Zt=3}}function s_(){if(Zt===4||Zt===3){Zt=0,Ms();var t=ts,r=lo,a=uo,l=$v;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,lo=ts=null,a_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(es=null),j(a),r=r.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(mt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=W.T,h=oe.p,oe.p=2,W.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];f(b.value,{componentStack:b.stack})}}finally{W.T=r,oe.p=h}}(uo&3)!==0&&Bc(),Pi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===$f?Vl++:(Vl=0,$f=t):Vl=0,Pl(0)}}function a_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,pl(r)))}function Bc(t){return i_(),r_(),s_(),o_()}function o_(){if(Zt!==5)return!1;var t=ts,r=Ff;Ff=0;var a=j(uo),l=W.T,h=oe.p;try{oe.p=32>a?32:a,W.T=null,a=Gf,Gf=null;var f=ts,_=uo;if(Zt=0,lo=ts=null,uo=0,(rt&6)!==0)throw Error(s(331));var b=rt;if(rt|=4,Fv(f.current),Bv(f,f.current,_,a),rt=b,Pl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(mt,f)}catch{}return!0}finally{oe.p=h,W.T=l,a_(t,r)}}function l_(t,r,a){r=Qn(a,r),r=Sf(t.stateNode,r,2),t=Gr(t,r,2),t!==null&&(Bn(t,2),Pi(t))}function ht(t,r,a){if(t.tag===3)l_(t,t,a);else for(;r!==null;){if(r.tag===3){l_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(es===null||!es.has(l))){t=Qn(a,t),a=dv(2),l=Gr(r,a,2),l!==null&&(fv(a,l,r,t),Bn(l,2),Pi(l));break}}r=r.return}}function Wf(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new GS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(zf=!0,h.add(a),t=WS.bind(null,t,r,a),r.then(t,t))}function WS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,dt===t&&(Qe&a)===a&&(bt===4||bt===3&&(Qe&62914560)===Qe&&300>fn()-Hf?(rt&2)===0&&co(t,0):Bf|=a,oo===Qe&&(oo=0)),Pi(t)}function u_(t,r){r===0&&(r=Lr()),t=$a(t,r),t!==null&&(Bn(t,r),Pi(t))}function XS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),u_(t,a)}function ZS(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),u_(t,a)}function JS(t,r){return vi(t,r)}var qc=null,fo=null,Xf=!1,Hc=!1,Zf=!1,ca=0;function Pi(t){t!==fo&&t.next===null&&(fo===null?qc=fo=t:fo=fo.next=t),Hc=!0,Xf||(Xf=!0,tA())}function Pl(t,r){if(!Zf&&Hc){Zf=!0;do for(var a=!1,l=qc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,b=l.pingedLanes;f=(1<<31-zt(42|t)+1)-1,f&=h&~(_&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,f_(l,f))}else f=Qe,f=Qi(l,l===dt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Yi(l,f)||(a=!0,f_(l,f));l=l.next}while(a);Zf=!1}}function eA(){c_()}function c_(){Hc=Xf=!1;var t=0;ca!==0&&(uA()&&(t=ca),ca=0);for(var r=fn(),a=null,l=qc;l!==null;){var h=l.next,f=h_(l,r);f===0?(l.next=null,a===null?qc=h:a.next=h,h===null&&(fo=a)):(a=l,(t!==0||(f&3)!==0)&&(Hc=!0)),l=h}Pl(t)}function h_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-zt(f),b=1<<_,D=h[_];D===-1?((b&a)===0||(b&l)!==0)&&(h[_]=Vs(b,r)):D<=r&&(t.expiredLanes|=b),f&=~b}if(r=dt,a=Qe,a=Qi(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(st===2||st===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Gi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yi(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Gi(l),j(a)){case 2:case 8:a=kr;break;case 32:a=$i;break;case 268435456:a=Vr;break;default:a=$i}return l=d_.bind(null,t),a=vi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Gi(l),t.callbackPriority=2,t.callbackNode=null,2}function d_(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Bc()&&t.callbackNode!==a)return null;var l=Qe;return l=Qi(t,t===dt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Qv(t,l,r),h_(t,fn()),t.callbackNode!=null&&t.callbackNode===a?d_.bind(null,t):null)}function f_(t,r){if(Bc())return null;Qv(t,r,!0)}function tA(){hA(function(){(rt&6)!==0?vi(Mr,eA):c_()})}function Jf(){return ca===0&&(ca=Pr()),ca}function m_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ka(""+t)}function p_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function nA(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var f=m_((h[Ee]||null).action),_=l.submitter;_&&(r=(r=_[Ee]||null)?m_(r.formAction):_.getAttribute("formAction"),r!==null&&(f=r,_=null));var b=new Va("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ca!==0){var D=_?p_(h,_):new FormData(h);_f(a,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(b.preventDefault(),D=_?p_(h,_):new FormData(h),_f(a,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var em=0;em<Ld.length;em++){var tm=Ld[em],iA=tm.toLowerCase(),rA=tm[0].toUpperCase()+tm.slice(1);oi(iA,"on"+rA)}oi(Qg,"onAnimationEnd"),oi(Yg,"onAnimationIteration"),oi(Wg,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(TS,"onTransitionRun"),oi(bS,"onTransitionStart"),oi(wS,"onTransitionCancel"),oi(Xg,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function g_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var _=l.length-1;0<=_;_--){var b=l[_],D=b.instance,F=b.currentTarget;if(b=b.listener,D!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=F;try{f(h)}catch(X){Nc(X)}h.currentTarget=null,f=D}else for(_=0;_<l.length;_++){if(b=l[_],D=b.instance,F=b.currentTarget,b=b.listener,D!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=F;try{f(h)}catch(X){Nc(X)}h.currentTarget=null,f=D}}}}function He(t,r){var a=r[Bt];a===void 0&&(a=r[Bt]=new Set);var l=t+"__bubble";a.has(l)||(y_(r,t,2,!1),a.add(l))}function nm(t,r,a){var l=0;r&&(l|=4),y_(a,t,l,r)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function im(t){if(!t[Fc]){t[Fc]=!0,Yo.forEach(function(a){a!=="selectionchange"&&(sA.has(a)||nm(a,!1,t),nm(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Fc]||(r[Fc]=!0,nm("selectionchange",!1,r))}}function y_(t,r,a,l){switch(B_(r)){case 2:var h=OA;break;case 8:h=MA;break;default:h=ym}a=h.bind(null,r,a,t),h=void 0,!$n||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function rm(t,r,a,l,h){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=Ce(b),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=f=_;continue e}b=b.parentNode}}l=l.return}$u(function(){var F=f,X=Gn(a),ee=[];e:{var G=Zg.get(t);if(G!==void 0){var $=Va,xe=t;switch(t){case"keypress":if(Ii(a)===0)break e;case"keydown":case"keyup":$=Ba;break;case"focusin":xe="focus",$=Ua;break;case"focusout":xe="blur",$=Ua;break;case"beforeblur":case"afterblur":$=Ua;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=ec;break;case Qg:case Yg:case Wg:$=ja;break;case Xg:$=nc;break;case"scroll":case"scrollend":$=Ku;break;case"wheel":$=qa;break;case"copy":case"cut":case"paste":$=za;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ol;break;case"toggle":case"beforetoggle":$=rc}var Se=(r&4)!==0,ct=!Se&&(t==="scroll"||t==="scrollend"),z=Se?G!==null?G+"Capture":null:G;Se=[];for(var U=F,q;U!==null;){var Z=U;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||z===null||(Z=Hs(U,z),Z!=null&&Se.push(Ul(U,Z,q))),ct)break;U=U.return}0<Se.length&&(G=new $(G,xe,null,a,X),ee.push({event:G,listeners:Se}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",G&&a!==Ji&&(xe=a.relatedTarget||a.fromElement)&&(Ce(xe)||xe[tt]))break e;if(($||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,$?(xe=a.relatedTarget||a.toElement,$=F,xe=xe?Ce(xe):null,xe!==null&&(ct=u(xe),Se=xe.tag,xe!==ct||Se!==5&&Se!==27&&Se!==6)&&(xe=null)):($=null,xe=F),$!==xe)){if(Se=Kn,Z="onMouseLeave",z="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Se=ol,Z="onPointerLeave",z="onPointerEnter",U="pointer"),ct=$==null?G:wi($),q=xe==null?G:wi(xe),G=new Se(Z,U+"leave",$,a,X),G.target=ct,G.relatedTarget=q,Z=null,Ce(X)===F&&(Se=new Se(z,U+"enter",xe,a,X),Se.target=q,Se.relatedTarget=ct,Z=Se),ct=Z,$&&xe)t:{for(Se=$,z=xe,U=0,q=Se;q;q=mo(q))U++;for(q=0,Z=z;Z;Z=mo(Z))q++;for(;0<U-q;)Se=mo(Se),U--;for(;0<q-U;)z=mo(z),q--;for(;U--;){if(Se===z||z!==null&&Se===z.alternate)break t;Se=mo(Se),z=mo(z)}Se=null}else Se=null;$!==null&&v_(ee,G,$,Se,!1),xe!==null&&ct!==null&&v_(ee,ct,xe,Se,!0)}}e:{if(G=F?wi(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var ye=Lg;else if(kt(G))if(Ug)ye=vS;else{ye=gS;var ze=pS}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&el(F.elementType)&&(ye=Lg):ye=yS;if(ye&&(ye=ye(t,F))){rr(ee,ye,a,X);break e}ze&&ze(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&zr(G,"number",G.value)}switch(ze=F?wi(F):window,t){case"focusin":(kt(ze)||ze.contentEditable==="true")&&(Ha=ze,kd=F,cl=null);break;case"focusout":cl=kd=Ha=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,$g(ee,a,X);break;case"selectionchange":if(ES)break;case"keydown":case"keyup":$g(ee,a,X)}var Te;if(Ni)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else $e?K(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(v&&a.locale!=="ko"&&($e||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&$e&&(Te=nl()):(Ri=X,Br="value"in Ri?Ri.value:Ri.textContent,$e=!0)),ze=Gc(F,Ae),0<ze.length&&(Ae=new sl(Ae,t,null,a,X),ee.push({event:Ae,listeners:ze}),Te?Ae.data=Te:(Te=le(a),Te!==null&&(Ae.data=Te)))),(Te=y?Mt(t,a):Ke(t,a))&&(Ae=Gc(F,"onBeforeInput"),0<Ae.length&&(ze=new sl("onBeforeInput","beforeinput",null,a,X),ee.push({event:ze,listeners:Ae}),ze.data=Te)),nA(ee,t,F,a,X)}g_(ee,r)})}function Ul(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Gc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Hs(t,a),h!=null&&l.unshift(Ul(t,h,f)),h=Hs(t,r),h!=null&&l.push(Ul(t,h,f))),t.tag===3)return l;t=t.return}return[]}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function v_(t,r,a,l,h){for(var f=r._reactName,_=[];a!==null&&a!==l;){var b=a,D=b.alternate,F=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||F===null||(D=F,h?(F=Hs(a,f),F!=null&&_.unshift(Ul(a,F,D))):h||(F=Hs(a,f),F!=null&&_.push(Ul(a,F,D)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var aA=/\r\n?/g,oA=/\u0000|\uFFFD/g;function __(t){return(typeof t=="string"?t:""+t).replace(aA,`
`).replace(oA,"")}function E_(t,r){return r=__(r),__(t)===r}function $c(){}function ut(t,r,a,l,h,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Fn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Fn(t,""+l);break;case"className":Si(t,"class",l);break;case"tabIndex":Si(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Si(t,a,l);break;case"style":Jo(t,l,f);break;case"data":if(r!=="object"){Si(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&ut(t,r,"name",h.name,h,null),ut(t,r,"formEncType",h.formEncType,h,null),ut(t,r,"formMethod",h.formMethod,h,null),ut(t,r,"formTarget",h.formTarget,h,null)):(ut(t,r,"encType",h.encType,h,null),ut(t,r,"method",h.method,h,null),ut(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=$c);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ka(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":He("beforetoggle",t),He("toggle",t),jr(t,"popover",l);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":jr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Id.get(a)||a,jr(t,a,l))}}function sm(t,r,a,l,h,f){switch(a){case"style":Jo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Fn(t,l):(typeof l=="number"||typeof l=="bigint")&&Fn(t,""+l);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"onClick":l!=null&&(t.onclick=$c);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),f=t[Ee]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):jr(t,a,l)}}}function Jt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",t),He("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(t,r,f,_,a,null)}}h&&ut(t,r,"srcSet",a.srcSet,a,null),l&&ut(t,r,"src",a.src,a,null);return;case"input":He("invalid",t);var b=f=_=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":h=X;break;case"type":_=X;break;case"checked":D=X;break;case"defaultChecked":F=X;break;case"value":f=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,r));break;default:ut(t,r,l,X,a,null)}}zs(t,f,b,D,F,_,h,!1),Ma(t);return;case"select":He("invalid",t),l=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":f=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:ut(t,r,h,b,a,null)}r=f,a=_,t.multiple=!!l,r!=null?Zi(t,!!l,r,!1):a!=null&&Zi(t,!!l,a,!0);return;case"textarea":He("invalid",t),f=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:ut(t,r,_,b,a,null)}Bs(t,l,h,f),Ma(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ut(t,r,D,l,a,null)}return;case"dialog":He("beforetoggle",t),He("toggle",t),He("cancel",t),He("close",t);break;case"iframe":case"object":He("load",t);break;case"video":case"audio":for(l=0;l<Ll.length;l++)He(Ll[l],t);break;case"image":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"embed":case"source":case"link":He("error",t),He("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ut(t,r,F,l,a,null)}return;default:if(el(r)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&sm(t,r,X,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ut(t,r,b,l,a,null))}function lA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,b=null,D=null,F=null,X=null;for($ in a){var ee=a[$];if(a.hasOwnProperty($)&&ee!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=ee;default:l.hasOwnProperty($)||ut(t,r,$,null,l,ee)}}for(var G in l){var $=l[G];if(ee=a[G],l.hasOwnProperty(G)&&($!=null||ee!=null))switch(G){case"type":f=$;break;case"name":h=$;break;case"checked":F=$;break;case"defaultChecked":X=$;break;case"value":_=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==ee&&ut(t,r,G,$,l,ee)}}Dn(t,_,b,D,F,X,f,h);return;case"select":$=_=b=G=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(f)||ut(t,r,f,null,l,D)}for(h in l)if(f=l[h],D=a[h],l.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":G=f;break;case"defaultValue":b=f;break;case"multiple":_=f;default:f!==D&&ut(t,r,h,f,l,D)}r=b,a=_,l=$,G!=null?Zi(t,!!a,G,!1):!!l!=!!a&&(r!=null?Zi(t,!!a,r,!0):Zi(t,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ut(t,r,b,null,l,h)}for(_ in l)if(h=l[_],f=a[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":G=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&ut(t,r,_,h,l,f)}ot(t,G,$);return;case"option":for(var xe in a)if(G=a[xe],a.hasOwnProperty(xe)&&G!=null&&!l.hasOwnProperty(xe))switch(xe){case"selected":t.selected=!1;break;default:ut(t,r,xe,null,l,G)}for(D in l)if(G=l[D],$=a[D],l.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ut(t,r,D,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se)&&ut(t,r,Se,null,l,G);for(F in l)if(G=l[F],$=a[F],l.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:ut(t,r,F,G,l,$)}return;default:if(el(r)){for(var ct in a)G=a[ct],a.hasOwnProperty(ct)&&G!==void 0&&!l.hasOwnProperty(ct)&&sm(t,r,ct,void 0,l,G);for(X in l)G=l[X],$=a[X],!l.hasOwnProperty(X)||G===$||G===void 0&&$===void 0||sm(t,r,X,G,l,$);return}}for(var z in a)G=a[z],a.hasOwnProperty(z)&&G!=null&&!l.hasOwnProperty(z)&&ut(t,r,z,null,l,G);for(ee in l)G=l[ee],$=a[ee],!l.hasOwnProperty(ee)||G===$||G==null&&$==null||ut(t,r,ee,G,l,$)}var am=null,om=null;function Kc(t){return t.nodeType===9?t:t.ownerDocument}function T_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function lm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var um=null;function uA(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var w_=typeof setTimeout=="function"?setTimeout:void 0,cA=typeof clearTimeout=="function"?clearTimeout:void 0,S_=typeof Promise=="function"?Promise:void 0,hA=typeof queueMicrotask=="function"?queueMicrotask:typeof S_<"u"?function(t){return S_.resolve(null).then(t).catch(dA)}:w_;function dA(t){setTimeout(function(){throw t})}function is(t){return t==="head"}function A_(t,r){var a=r,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&jl(_.documentElement),a&2&&jl(_.body),a&4)for(a=_.head,jl(a),_=a.firstChild;_;){var b=_.nextSibling,D=_.nodeName;_[nt]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=b}}if(h===0){t.removeChild(f),Kl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Kl(r)}function cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":cm(a),Hn(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function fA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[nt])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ui(t.nextSibling),t===null)break}return null}function mA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ui(t.nextSibling),t===null))return null;return t}function hm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function pA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ui(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var dm=null;function R_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function I_(t,r,a){switch(r=Kc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function jl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Hn(t)}var ei=new Map,C_=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var yr=oe.d;oe.d={f:gA,r:yA,D:vA,C:_A,L:EA,m:TA,X:wA,S:bA,M:SA};function gA(){var t=yr.f(),r=jc();return t||r}function yA(t){var r=it(t);r!==null&&r.tag===5&&r.type==="form"?Qy(r):yr.r(t)}var po=typeof document>"u"?null:document;function x_(t,r,a){var l=po;if(l&&typeof r=="string"&&r){var h=Ct(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),C_.has(h)||(C_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Jt(r,"link",t),St(r),l.head.appendChild(r)))}}function vA(t){yr.D(t),x_("dns-prefetch",t,null)}function _A(t,r){yr.C(t,r),x_("preconnect",t,r)}function EA(t,r,a){yr.L(t,r,a);var l=po;if(l&&t&&r){var h='link[rel="preload"][as="'+Ct(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ct(a.imageSizes)+'"]')):h+='[href="'+Ct(t)+'"]';var f=h;switch(r){case"style":f=go(t);break;case"script":f=yo(t)}ei.has(f)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),ei.set(f,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(zl(f))||r==="script"&&l.querySelector(Bl(f))||(r=l.createElement("link"),Jt(r,"link",t),St(r),l.head.appendChild(r)))}}function TA(t,r){yr.m(t,r);var a=po;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Ct(l)+'"][href="'+Ct(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=yo(t)}if(!ei.has(f)&&(t=T({rel:"modulepreload",href:t},r),ei.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(f)))return}l=a.createElement("link"),Jt(l,"link",t),St(l),a.head.appendChild(l)}}}function bA(t,r,a){yr.S(t,r,a);var l=po;if(l&&t){var h=mn(l).hoistableStyles,f=go(t);r=r||"default";var _=h.get(f);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(zl(f)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=ei.get(f))&&fm(t,a);var D=_=l.createElement("link");St(D),Jt(D,"link",t),D._p=new Promise(function(F,X){D.onload=F,D.onerror=X}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Yc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(f,_)}}}function wA(t,r){yr.X(t,r);var a=po;if(a&&t){var l=mn(a).hoistableScripts,h=yo(t),f=l.get(h);f||(f=a.querySelector(Bl(h)),f||(t=T({src:t,async:!0},r),(r=ei.get(h))&&mm(t,r),f=a.createElement("script"),St(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function SA(t,r){yr.M(t,r);var a=po;if(a&&t){var l=mn(a).hoistableScripts,h=yo(t),f=l.get(h);f||(f=a.querySelector(Bl(h)),f||(t=T({src:t,async:!0,type:"module"},r),(r=ei.get(h))&&mm(t,r),f=a.createElement("script"),St(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function N_(t,r,a,l){var h=(h=we.current)?Qc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=go(a.href),a=mn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=go(a.href);var f=mn(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(zl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),ei.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ei.set(t,a),f||AA(h,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=yo(a),a=mn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function go(t){return'href="'+Ct(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function D_(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function AA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Jt(r,"link",a),St(r),t.head.appendChild(r))}function yo(t){return'[src="'+Ct(t)+'"]'}function Bl(t){return"script[async]"+t}function O_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(l)return r.instance=l,St(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),St(l),Jt(l,"style",h),Yc(l,a.precedence,t),r.instance=l;case"stylesheet":h=go(a.href);var f=t.querySelector(zl(h));if(f)return r.state.loading|=4,r.instance=f,St(f),f;l=D_(a),(h=ei.get(h))&&fm(l,h),f=(t.ownerDocument||t).createElement("link"),St(f);var _=f;return _._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Jt(f,"link",l),r.state.loading|=4,Yc(f,a.precedence,t),r.instance=f;case"script":return f=yo(a.src),(h=t.querySelector(Bl(f)))?(r.instance=h,St(h),h):(l=a,(h=ei.get(f))&&(l=T({},a),mm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),St(h),Jt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Yc(l,a.precedence,t));return r.instance}function Yc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===r)f=b;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function fm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function mm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Wc=null;function M_(t,r,a){if(Wc===null){var l=new Map,h=Wc=new Map;h.set(a,l)}else h=Wc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[nt]||f[he]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(r)||"";_=t+_;var b=l.get(_);b?b.push(f):l.set(_,[f])}}return l}function k_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function RA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function V_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ql=null;function IA(){}function CA(t,r,a){if(ql===null)throw Error(s(475));var l=ql;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=go(a.href),f=t.querySelector(zl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Xc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,St(f);return}f=t.ownerDocument||t,a=D_(a),(h=ei.get(h))&&fm(a,h),f=f.createElement("link"),St(f);var _=f;_._p=new Promise(function(b,D){_.onload=b,_.onerror=D}),Jt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Xc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function xA(){if(ql===null)throw Error(s(475));var t=ql;return t.stylesheets&&t.count===0&&pm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&pm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Xc(){if(this.count--,this.count===0){if(this.stylesheets)pm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zc=null;function pm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zc=new Map,r.forEach(NA,t),Zc=null,Xc.call(t))}function NA(t,r){if(!(r.state.loading&4)){var a=Zc.get(t);if(a)var l=a.get(null);else{a=new Map,Zc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=r.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,h),a.set(_,h),this.count++,l=Xc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Hl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function DA(t,r,a,l,h,f,_,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function P_(t,r,a,l,h,f,_,b,D,F,X,ee){return t=new DA(t,r,a,_,b,D,F,ee),r=1,f===!0&&(r|=24),f=Mn(3,null,null,r),t.current=f,f.stateNode=t,r=Yd(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},Jd(f),t}function L_(t){return t?(t=Ka,t):Ka}function U_(t,r,a,l,h,f){h=L_(h),l.context===null?l.context=h:l.pendingContext=h,l=Fr(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Gr(t,l,r),a!==null&&(Un(a,t,r),_l(a,t,r))}function j_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function gm(t,r){j_(t,r),(t=t.alternate)&&j_(t,r)}function z_(t){if(t.tag===13){var r=$a(t,67108864);r!==null&&Un(r,t,67108864),gm(t,67108864)}}var Jc=!0;function OA(t,r,a,l){var h=W.T;W.T=null;var f=oe.p;try{oe.p=2,ym(t,r,a,l)}finally{oe.p=f,W.T=h}}function MA(t,r,a,l){var h=W.T;W.T=null;var f=oe.p;try{oe.p=8,ym(t,r,a,l)}finally{oe.p=f,W.T=h}}function ym(t,r,a,l){if(Jc){var h=vm(l);if(h===null)rm(t,r,l,eh,a),q_(t,l);else if(VA(h,t,r,a,l))l.stopPropagation();else if(q_(t,l),r&4&&-1<kA.indexOf(t)){for(;h!==null;){var f=it(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=En(f.pendingLanes);if(_!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var D=1<<31-zt(_);b.entanglements[1]|=D,_&=~D}Pi(f),(rt&6)===0&&(Lc=fn()+500,Pl(0))}}break;case 13:b=$a(f,2),b!==null&&Un(b,f,2),jc(),gm(f,2)}if(f=vm(l),f===null&&rm(t,r,l,eh,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else rm(t,r,l,null,a)}}function vm(t){return t=Gn(t),_m(t)}var eh=null;function _m(t){if(eh=null,t=Ce(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return eh=t,null}function B_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($o()){case Mr:return 2;case kr:return 8;case $i:case Ko:return 32;case Vr:return 268435456;default:return 32}default:return 32}}var Em=!1,rs=null,ss=null,as=null,Fl=new Map,Gl=new Map,os=[],kA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q_(t,r){switch(t){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Fl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(r.pointerId)}}function $l(t,r,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},r!==null&&(r=it(r),r!==null&&z_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function VA(t,r,a,l,h){switch(r){case"focusin":return rs=$l(rs,t,r,a,l,h),!0;case"dragenter":return ss=$l(ss,t,r,a,l,h),!0;case"mouseover":return as=$l(as,t,r,a,l,h),!0;case"pointerover":var f=h.pointerId;return Fl.set(f,$l(Fl.get(f)||null,t,r,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Gl.set(f,$l(Gl.get(f)||null,t,r,a,l,h)),!0}return!1}function H_(t){var r=Ce(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,_e(t.priority,function(){if(a.tag===13){var l=Ln();l=bi(l);var h=$a(a,l);h!==null&&Un(h,a,l),gm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=vm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ji=l,a.target.dispatchEvent(l),Ji=null}else return r=it(a),r!==null&&z_(r),t.blockedOn=a,!1;r.shift()}return!0}function F_(t,r,a){th(t)&&a.delete(r)}function PA(){Em=!1,rs!==null&&th(rs)&&(rs=null),ss!==null&&th(ss)&&(ss=null),as!==null&&th(as)&&(as=null),Fl.forEach(F_),Gl.forEach(F_)}function nh(t,r){t.blockedOn===r&&(t.blockedOn=null,Em||(Em=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,PA)))}var ih=null;function G_(t){ih!==t&&(ih=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(_m(l||a)===null)continue;break}var f=it(a);f!==null&&(t.splice(r,3),r-=3,_f(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Kl(t){function r(D){return nh(D,t)}rs!==null&&nh(rs,t),ss!==null&&nh(ss,t),as!==null&&nh(as,t),Fl.forEach(r),Gl.forEach(r);for(var a=0;a<os.length;a++){var l=os[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<os.length&&(a=os[0],a.blockedOn===null);)H_(a),a.blockedOn===null&&os.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],_=h[Ee]||null;if(typeof f=="function")_||G_(a);else if(_){var b=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Ee]||null)b=_.formAction;else if(_m(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),G_(a)}}}function Tm(t){this._internalRoot=t}rh.prototype.render=Tm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Ln();U_(a,l,t,r,null,null)},rh.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;U_(t.current,2,null,t,null,null),jc(),r[tt]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var r=ae();t={blockedOn:null,target:t,priority:r};for(var a=0;a<os.length&&r!==0&&r<os[a].priority;a++);os.splice(a,0,t),a===0&&H_(t)}};var $_=e.version;if($_!=="19.1.0")throw Error(s(527,$_,"19.1.0"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var LA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{mt=sh.inject(LA),Xe=sh}catch{}}return Yl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=lv,f=uv,_=cv,b=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(b=r.unstable_transitionCallbacks)),r=P_(t,1,!1,null,null,a,l,h,f,_,b,null),t[tt]=r.current,im(t),new Tm(r)},Yl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=lv,_=uv,b=cv,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=P_(t,1,!0,r,a??null,l,h,f,_,b,D,F),r.context=L_(null),a=r.current,l=Ln(),l=bi(l),h=Fr(l),h.callback=null,Gr(a,h,l),a=l,r.current.lanes=a,Bn(r,a),Pi(r),t[tt]=r.current,im(t),new rh(r)},Yl.version="19.1.0",Yl}var n0;function $A(){if(n0)return Sm.exports;n0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=GA(),Sm.exports}var KA=$A();const QA="/showswatched2/assets/react-CHdo91hT.svg",YA=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},WA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],d=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},tT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],d=o+1<i.length,m=d?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,T=u>>2,w=(u&3)<<4|m>>4;let I=(m&15)<<2|g>>6,O=g&63;p||(O=64,d||(I=64)),s.push(n[T],n[w],n[I],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(eT(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):WA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const w=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||w==null)throw new XA;const I=u<<2|m>>4;if(s.push(I),g!==64){const O=m<<4&240|g>>2;if(s.push(O),w!==64){const M=g<<6&192|w;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class XA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZA=function(i){const e=eT(i);return tT.encodeByteArray(e,!0)},Rh=function(i){return ZA(i).replace(/\./g,"")},nT=function(i){try{return tT.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=()=>JA().__FIREBASE_DEFAULTS__,t1=()=>{if(typeof process>"u"||typeof i0>"u")return;const i=i0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},n1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&nT(i[1]);return e&&JSON.parse(e)},Wh=()=>{try{return YA()||e1()||t1()||n1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},iT=i=>{var e,n;return(n=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},i1=i=>{const e=iT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},rT=()=>{var i;return(i=Wh())===null||i===void 0?void 0:i.config},sT=i=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Rh(JSON.stringify(n)),Rh(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function o1(){var i;const e=(i=Wh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function u1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c1(){const i=dn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function h1(){return!o1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oT(){try{return typeof indexedDB=="object"}catch{return!1}}function lT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function d1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="FirebaseError";class pi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=f1,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ta.prototype.create)}}class Ta{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?m1(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new pi(o,m,s)}}function m1(i,e){return i.replace(p1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const p1=/\{\$([^}]+)}/g;function g1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function bs(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],d=e[o];if(r0(u)&&r0(d)){if(!bs(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function r0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Jl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function eu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function y1(i,e){const n=new v1(i,e);return n.subscribe.bind(n)}class v1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");_1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Cm),o.error===void 0&&(o.error=Cm),o.complete===void 0&&(o.complete=Cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Cm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=1e3,T1=2,b1=4*60*60*1e3,w1=.5;function s0(i,e=E1,n=T1){const s=e*Math.pow(n,i),o=Math.round(w1*s*(Math.random()-.5)*2);return Math.min(b1,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(i){return i&&i._delegate?i._delegate:i}class hi{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new r1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R1(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:A1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function A1(i){return i===ha?void 0:i}function R1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Fe||(Fe={}));const C1={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},x1=Fe.INFO,N1={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},D1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=N1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xh{constructor(e){this.name=e,this._logLevel=x1,this._logHandler=D1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const O1=(i,e)=>e.some(n=>i instanceof n);let a0,o0;function M1(){return a0||(a0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k1(){return o0||(o0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uT=new WeakMap,Qm=new WeakMap,cT=new WeakMap,xm=new WeakMap,Rp=new WeakMap;function V1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",d)},u=()=>{n(vs(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&uT.set(n,i)}).catch(()=>{}),Rp.set(e,i),e}function P1(i){if(Qm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",d),i.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",d),i.addEventListener("abort",d)});Qm.set(i,e)}let Ym={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Qm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||cT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function L1(i){Ym=i(Ym)}function U1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Nm(this),e,...n);return cT.set(s,e.sort?e.sort():[e]),vs(s)}:k1().includes(i)?function(...e){return i.apply(Nm(this),e),vs(uT.get(this))}:function(...e){return vs(i.apply(Nm(this),e))}}function j1(i){return typeof i=="function"?U1(i):(i instanceof IDBTransaction&&P1(i),O1(i,M1())?new Proxy(i,Ym):i)}function vs(i){if(i instanceof IDBRequest)return V1(i);if(xm.has(i))return xm.get(i);const e=j1(i);return e!==i&&(xm.set(i,e),Rp.set(e,i)),e}const Nm=i=>Rp.get(i);function hT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(i,e),m=vs(d);return s&&d.addEventListener("upgradeneeded",p=>{s(vs(d.result),p.oldVersion,p.newVersion,vs(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const z1=["get","getKey","getAll","getAllKeys","count"],B1=["put","add","delete","clear"],Dm=new Map;function l0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=B1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||z1.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Dm.set(e,u),u}L1(i=>({...i,get:(e,n,s)=>l0(e,n)||i.get(e,n,s),has:(e,n)=>!!l0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function H1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wm="@firebase/app",u0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Xh("@firebase/app"),F1="@firebase/app-compat",G1="@firebase/analytics-compat",$1="@firebase/analytics",K1="@firebase/app-check-compat",Q1="@firebase/app-check",Y1="@firebase/auth",W1="@firebase/auth-compat",X1="@firebase/database",Z1="@firebase/data-connect",J1="@firebase/database-compat",e2="@firebase/functions",t2="@firebase/functions-compat",n2="@firebase/installations",i2="@firebase/installations-compat",r2="@firebase/messaging",s2="@firebase/messaging-compat",a2="@firebase/performance",o2="@firebase/performance-compat",l2="@firebase/remote-config",u2="@firebase/remote-config-compat",c2="@firebase/storage",h2="@firebase/storage-compat",d2="@firebase/firestore",f2="@firebase/vertexai",m2="@firebase/firestore-compat",p2="firebase",g2="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="[DEFAULT]",y2={[Wm]:"fire-core",[F1]:"fire-core-compat",[$1]:"fire-analytics",[G1]:"fire-analytics-compat",[Q1]:"fire-app-check",[K1]:"fire-app-check-compat",[Y1]:"fire-auth",[W1]:"fire-auth-compat",[X1]:"fire-rtdb",[Z1]:"fire-data-connect",[J1]:"fire-rtdb-compat",[e2]:"fire-fn",[t2]:"fire-fn-compat",[n2]:"fire-iid",[i2]:"fire-iid-compat",[r2]:"fire-fcm",[s2]:"fire-fcm-compat",[a2]:"fire-perf",[o2]:"fire-perf-compat",[l2]:"fire-rc",[u2]:"fire-rc-compat",[c2]:"fire-gcs",[h2]:"fire-gcs-compat",[d2]:"fire-fst",[m2]:"fire-fst-compat",[f2]:"fire-vertex","fire-js":"fire-js",[p2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map,v2=new Map,Zm=new Map;function c0(i,e){try{i.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function qi(i){const e=i.name;if(Zm.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;Zm.set(e,i);for(const n of Ih.values())c0(n,i);for(const n of v2.values())c0(n,i);return!0}function ba(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ti(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Ta("app","Firebase",_2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=g2;function dT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Xm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw _s.create("bad-app-name",{appName:String(o)});if(n||(n=rT()),!n)throw _s.create("no-options");const u=Ih.get(o);if(u){if(bs(n,u.options)&&bs(s,u.config))return u;throw _s.create("duplicate-app",{appName:o})}const d=new I1(o);for(const p of Zm.values())d.addComponent(p);const m=new E2(n,s,d);return Ih.set(o,m),m}function Ip(i=Xm){const e=Ih.get(i);if(!e&&i===Xm&&rT())return dT();if(!e)throw _s.create("no-app",{appName:i});return e}function ni(i,e,n){var s;let o=(s=y2[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(m.join(" "));return}qi(new hi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebase-heartbeat-database",b2=1,mu="firebase-heartbeat-store";let Om=null;function fT(){return Om||(Om=hT(T2,b2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(i=>{throw _s.create("idb-open",{originalErrorMessage:i.message})})),Om}async function w2(i){try{const n=(await fT()).transaction(mu),s=await n.objectStore(mu).get(mT(i));return await n.done,s}catch(e){if(e instanceof pi)wr.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function h0(i,e){try{const s=(await fT()).transaction(mu,"readwrite");await s.objectStore(mu).put(e,mT(i)),await s.done}catch(n){if(n instanceof pi)wr.warn(n.message);else{const s=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(s.message)}}}function mT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=1024,A2=30;class R2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new C2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=d0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>A2){const d=x2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){wr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d0(),{heartbeatsToSend:s,unsentEntries:o}=I2(this._heartbeatsCache.heartbeats),u=Rh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return wr.warn(n),""}}}function d0(){return new Date().toISOString().substring(0,10)}function I2(i,e=S2){const n=[];let s=i.slice();for(const o of i){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),f0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class C2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oT()?lT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return h0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return h0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function f0(i){return Rh(JSON.stringify({version:2,heartbeats:i})).length}function x2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(i){qi(new hi("platform-logger",e=>new q1(e),"PRIVATE")),qi(new hi("heartbeat",e=>new R2(e),"PRIVATE")),ni(Wm,u0,i),ni(Wm,u0,"esm2017"),ni("fire-js","")}N2("");var D2="firebase",O2="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(D2,O2,"app");var m0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,pT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,S){function R(){}R.prototype=S.prototype,P.D=S.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(N,x,k){for(var C=Array(arguments.length-2),De=2;De<arguments.length;De++)C[De-2]=arguments[De];return S.prototype[x].apply(N,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,S,R){R||(R=0);var N=Array(16);if(typeof S=="string")for(var x=0;16>x;++x)N[x]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(x=0;16>x;++x)N[x]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=P.g[0],R=P.g[1],x=P.g[2];var k=P.g[3],C=S+(k^R&(x^k))+N[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[1]+3905402710&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[2]+606105819&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[3]+3250441966&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+N[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[5]+1200080426&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[6]+2821735955&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[7]+4249261313&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+N[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[9]+2336552879&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[10]+4294925233&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[11]+2304563134&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(k^R&(x^k))+N[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(x^S&(R^x))+N[13]+4254626195&4294967295,k=S+(C<<12&4294967295|C>>>20),C=x+(R^k&(S^R))+N[14]+2792965006&4294967295,x=k+(C<<17&4294967295|C>>>15),C=R+(S^x&(k^S))+N[15]+1236535329&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(x^k&(R^x))+N[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[6]+3225465664&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[11]+643717713&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[0]+3921069994&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+N[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[10]+38016083&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[15]+3634488961&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[4]+3889429448&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+N[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[14]+3275163606&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[3]+4107603335&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[8]+1163531501&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^k&(R^x))+N[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^x&(S^R))+N[2]+4243563512&4294967295,k=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(k^S))+N[7]+1735328473&4294967295,x=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(x^k))+N[12]+2368359562&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(R^x^k)+N[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[8]+2272392833&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[11]+1839030562&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[14]+4259657740&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+N[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[4]+1272893353&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[7]+4139469664&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[10]+3200236656&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+N[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[0]+3936430074&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[3]+3572445317&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[6]+76029189&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^k)+N[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^x)+N[12]+3873151461&4294967295,k=S+(C<<11&4294967295|C>>>21),C=x+(k^S^R)+N[15]+530742520&4294967295,x=k+(C<<16&4294967295|C>>>16),C=R+(x^k^S)+N[2]+3299628645&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(x^(R|~k))+N[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[7]+1126891415&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[14]+2878612391&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[5]+4237533241&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+N[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[3]+2399980690&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[10]+4293915773&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[1]+2240044497&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+N[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[15]+4264355552&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[6]+2734768916&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[13]+1309151649&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~k))+N[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~x))+N[11]+3174756917&4294967295,k=S+(C<<10&4294967295|C>>>22),C=x+(S^(k|~R))+N[2]+718787259&4294967295,x=k+(C<<15&4294967295|C>>>17),C=R+(k^(x|~S))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+k&4294967295}s.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var R=S-this.blockSize,N=this.B,x=this.h,k=0;k<S;){if(x==0)for(;k<=R;)o(this,P,k),k+=this.blockSize;if(typeof P=="string"){for(;k<S;)if(N[x++]=P.charCodeAt(k++),x==this.blockSize){o(this,N),x=0;break}}else for(;k<S;)if(N[x++]=P[k++],x==this.blockSize){o(this,N),x=0;break}}this.h=x,this.o+=S},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var R=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=R&255,R/=256;for(this.u(P),P=Array(16),S=R=0;4>S;++S)for(var N=0;32>N;N+=8)P[R++]=this.g[S]>>>N&255;return P};function u(P,S){var R=m;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=S(P)}function d(P,S){this.h=S;for(var R=[],N=!0,x=P.length-1;0<=x;x--){var k=P[x]|0;N&&k==S||(R[x]=k,N=!1)}this.g=R}var m={};function p(P){return-128<=P&&128>P?u(P,function(S){return new d([S|0],0>S?-1:0)}):new d([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return w;if(0>P)return H(g(-P));for(var S=[],R=1,N=0;P>=R;N++)S[N]=P/R|0,R*=4294967296;return new d(S,0)}function T(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return H(T(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(S,8)),N=w,x=0;x<P.length;x+=8){var k=Math.min(8,P.length-x),C=parseInt(P.substring(x,x+k),S);8>k?(k=g(Math.pow(S,k)),N=N.j(k).add(g(C))):(N=N.j(R),N=N.add(g(C)))}return N}var w=p(0),I=p(1),O=p(16777216);i=d.prototype,i.m=function(){if(Q(this))return-H(this).m();for(var P=0,S=1,R=0;R<this.g.length;R++){var N=this.i(R);P+=(0<=N?N:4294967296+N)*S,S*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M(this))return"0";if(Q(this))return"-"+H(this).toString(P);for(var S=g(Math.pow(P,6)),R=this,N="";;){var x=fe(R,S).g;R=Y(R,x.j(S));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=x,M(R))return k+N;for(;6>k.length;)k="0"+k;N=k+N}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function M(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function Q(P){return P.h==-1}i.l=function(P){return P=Y(this,P),Q(P)?-1:M(P)?0:1};function H(P){for(var S=P.g.length,R=[],N=0;N<S;N++)R[N]=~P.g[N];return new d(R,~P.h).add(I)}i.abs=function(){return Q(this)?H(this):this},i.add=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0,x=0;x<=S;x++){var k=N+(this.i(x)&65535)+(P.i(x)&65535),C=(k>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);N=C>>>16,k&=65535,C&=65535,R[x]=C<<16|k}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Y(P,S){return P.add(H(S))}i.j=function(P){if(M(this)||M(P))return w;if(Q(this))return Q(P)?H(this).j(H(P)):H(H(this).j(P));if(Q(P))return H(this.j(H(P)));if(0>this.l(O)&&0>P.l(O))return g(this.m()*P.m());for(var S=this.g.length+P.g.length,R=[],N=0;N<2*S;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var x=0;x<P.g.length;x++){var k=this.i(N)>>>16,C=this.i(N)&65535,De=P.i(x)>>>16,Me=P.i(x)&65535;R[2*N+2*x]+=C*Me,se(R,2*N+2*x),R[2*N+2*x+1]+=k*Me,se(R,2*N+2*x+1),R[2*N+2*x+1]+=C*De,se(R,2*N+2*x+1),R[2*N+2*x+2]+=k*De,se(R,2*N+2*x+2)}for(N=0;N<S;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=S;N<2*S;N++)R[N]=0;return new d(R,0)};function se(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function ne(P,S){this.g=P,this.h=S}function fe(P,S){if(M(S))throw Error("division by zero");if(M(P))return new ne(w,w);if(Q(P))return S=fe(H(P),S),new ne(H(S.g),H(S.h));if(Q(S))return S=fe(P,H(S)),new ne(H(S.g),S.h);if(30<P.g.length){if(Q(P)||Q(S))throw Error("slowDivide_ only works with positive integers.");for(var R=I,N=S;0>=N.l(P);)R=pe(R),N=pe(N);var x=Re(R,1),k=Re(N,1);for(N=Re(N,2),R=Re(R,2);!M(N);){var C=k.add(N);0>=C.l(P)&&(x=x.add(R),k=C),N=Re(N,1),R=Re(R,1)}return S=Y(P,x.j(S)),new ne(x,S)}for(x=w;0<=P.l(S);){for(R=Math.max(1,Math.floor(P.m()/S.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),k=g(R),C=k.j(S);Q(C)||0<C.l(P);)R-=N,k=g(R),C=k.j(S);M(k)&&(k=I),x=x.add(k),P=Y(P,C)}return new ne(x,P)}i.A=function(P){return fe(this,P).h},i.and=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)&P.i(N);return new d(R,this.h&P.h)},i.or=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)|P.i(N);return new d(R,this.h|P.h)},i.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),R=[],N=0;N<S;N++)R[N]=this.i(N)^P.i(N);return new d(R,this.h^P.h)};function pe(P){for(var S=P.g.length+1,R=[],N=0;N<S;N++)R[N]=P.i(N)<<1|P.i(N-1)>>>31;return new d(R,P.h)}function Re(P,S){var R=S>>5;S%=32;for(var N=P.g.length-R,x=[],k=0;k<N;k++)x[k]=0<S?P.i(k+R)>>>S|P.i(k+R+1)<<32-S:P.i(k+R);return new d(x,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,pT=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=T,Es=d}).apply(typeof m0<"u"?m0:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gT,tu,yT,mh,Jm,vT,_T,ET;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var B=c[A];if(!(B in v))break e;v=v[B]}c=c[c.length-1],A=v[c],y=y(A),y!=A&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,A=!1,B={next:function(){if(!A&&v<c.length){var K=v++;return{value:y(K,c[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function T(c,y,v){return c.call.apply(c.bind,arguments)}function w(c,y,v){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,A),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function I(c,y,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,I.apply(null,arguments)}function O(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(A,B,K){for(var le=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)le[$e-2]=arguments[$e];return y.prototype[B].apply(A,le)}}function Q(c){const y=c.length;if(0<y){const v=Array(y);for(let A=0;A<y;A++)v[A]=c[A];return v}return[]}function H(c,y){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(p(A)){const B=c.length||0,K=A.length||0;c.length=B+K;for(let le=0;le<K;le++)c[B+le]=A[le]}else c.push(A)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function fe(c){return fe[" "](c),c}fe[" "]=function(){};var pe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Re(c,y,v){for(const A in c)y.call(v,c[A],A,c)}function P(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function S(c){const y={};for(const v in c)y[v]=c[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,y){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)c[v]=A[v];for(let K=0;K<R.length;K++)v=R[K],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function x(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function k(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Le;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class De{constructor(){this.h=this.g=null}add(y,v){const A=Me.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var Me=new Y(()=>new W,c=>c.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ve=!1,Le=new De,V=()=>{const c=m.Promise.resolve(void 0);oe=()=>{c.then(ie)}};var ie=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){k(v)}var y=Me;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ve=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function Pe(c,y){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(pe){e:{try{fe(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}M(Pe,re);var we={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),at=0;function _n(c,y,v,A,B){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=B,this.key=++at,this.da=this.fa=!1}function ri(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xn(c){this.src=c,this.g={},this.h=0}xn.prototype.add=function(c,y,v,A,B){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var le=vi(c,y,A,B);return-1<le?(y=c[le],v||(y.fa=!1)):(y=new _n(y,this.src,K,!!A,B),y.fa=v,c.push(y)),y};function yi(c,y){var v=y.type;if(v in c.g){var A=c.g[v],B=Array.prototype.indexOf.call(A,y,void 0),K;(K=0<=B)&&Array.prototype.splice.call(A,B,1),K&&(ri(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function vi(c,y,v,A){for(var B=0;B<c.length;++B){var K=c[B];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==A)return B}return-1}var Gi="closure_lm_"+(1e6*Math.random()|0),Os={};function Ms(c,y,v,A,B){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Ms(c,y[K],v,A,B);return null}return v=Ia(v),c&&c[Et]?c.K(y,v,g(A)?!!A.capture:!1,B):fn(c,y,v,!1,A,B)}function fn(c,y,v,A,B,K){if(!y)throw Error("Invalid event type");var le=g(B)?!!B.capture:!!B,$e=Vr(c);if($e||(c[Gi]=$e=new xn(c)),v=$e.add(y,v,A,le,K),v.proxy)return v;if(A=$o(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)ge||(B=le),B===void 0&&(B=!1),c.addEventListener(y.toString(),A,B);else if(c.attachEvent)c.attachEvent($i(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function $o(){function c(v){return y.call(c.src,c.listener,v)}const y=Ko;return c}function Mr(c,y,v,A,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)Mr(c,y[K],v,A,B);else A=g(A)?!!A.capture:!!A,v=Ia(v),c&&c[Et]?(c=c.i,y=String(y).toString(),y in c.g&&(K=c.g[y],v=vi(K,v,A,B),-1<v&&(ri(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete c.g[y],c.h--)))):c&&(c=Vr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=vi(y,v,A,B)),(v=-1<c?y[c]:null)&&kr(v))}function kr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Et])yi(y.i,c);else{var v=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(v,A,c.capture):y.detachEvent?y.detachEvent($i(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=Vr(y))?(yi(v,c),v.h==0&&(v.src=null,y[Gi]=null)):ri(c)}}}function $i(c){return c in Os?Os[c]:Os[c]="on"+c}function Ko(c,y){if(c.da)c=!0;else{y=new Pe(y,this);var v=c.listener,A=c.ha||c.src;c.fa&&kr(c),c=v.call(A,y)}return c}function Vr(c){return c=c[Gi],c instanceof xn?c:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ia(c){return typeof c=="function"?c:(c[ks]||(c[ks]=function(y){return c.handleEvent(y)}),c[ks])}function mt(){ue.call(this),this.i=new xn(this),this.M=this,this.F=null}M(mt,ue),mt.prototype[Et]=!0,mt.prototype.removeEventListener=function(c,y,v,A){Mr(this,c,y,v,A)};function Xe(c,y){var v,A=c.F;if(A)for(v=[];A;A=A.F)v.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new re(y,c);else if(y instanceof re)y.target=y.target||c;else{var B=y;y=new re(A,c),N(y,B)}if(B=!0,v)for(var K=v.length-1;0<=K;K--){var le=y.g=v[K];B=Qt(le,A,!0,y)&&B}if(le=y.g=c,B=Qt(le,A,!0,y)&&B,B=Qt(le,A,!1,y)&&B,v)for(K=0;K<v.length;K++)le=y.g=v[K],B=Qt(le,A,!1,y)&&B}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],A=0;A<v.length;A++)ri(v[A]);delete c.g[y],c.h--}}this.F=null},mt.prototype.K=function(c,y,v,A){return this.i.add(String(c),y,!1,v,A)},mt.prototype.L=function(c,y,v,A){return this.i.add(String(c),y,!0,v,A)};function Qt(c,y,v,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,K=0;K<y.length;++K){var le=y[K];if(le&&!le.da&&le.capture==v){var $e=le.listener,Mt=le.ha||le.src;le.fa&&yi(c.i,le),B=$e.call(Mt,A)!==!1&&B}}return B&&!A.defaultPrevented}function zt(c,y,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Ca(c){c.g=zt(()=>{c.g=null,c.i&&(c.i=!1,Ca(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Qo extends ue{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ca(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(c){ue.call(this),this.h=c,this.g={}}M(_i,ue);var Ki=[];function Ei(c){Re(c.g,function(y,v){this.g.hasOwnProperty(v)&&kr(y)},c),c.g={}}_i.prototype.N=function(){_i.aa.N.call(this),Ei(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=m.JSON.stringify,Qi=m.JSON.parse,Yi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Vs(){}Vs.prototype.h=null;function Pr(c){return c.h||(c.h=c.i())}function Lr(){}var Ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bn(){re.call(this,"d")}M(Bn,re);function Ps(){re.call(this,"c")}M(Ps,re);var qn={},Ur=null;function bi(){return Ur=Ur||new mt}qn.La="serverreachability";function j(c){re.call(this,qn.La,c)}M(j,re);function ae(c){const y=bi();Xe(y,new j(y))}qn.STAT_EVENT="statevent";function _e(c,y){re.call(this,qn.STAT_EVENT,c),this.stat=y}M(_e,re);function ce(c){const y=bi();Xe(y,new _e(y,c))}qn.Ma="timingevent";function he(c,y){re.call(this,qn.Ma,c),this.size=y}M(he,re);function Ee(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function tt(){this.g=!0}tt.prototype.xa=function(){this.g=!1};function Bt(c,y,v,A,B,K){c.info(function(){if(c.g)if(K)for(var le="",$e=K.split("&"),Mt=0;Mt<$e.length;Mt++){var Ke=$e[Mt].split("=");if(1<Ke.length){var Ht=Ke[0];Ke=Ke[1];var kt=Ht.split("_");le=2<=kt.length&&kt[1]=="type"?le+(Ht+"="+Ke+"&"):le+(Ht+"=redacted&")}}else le=null;else le=K;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+v+`
`+le})}function rn(c,y,v,A,B,K,le){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+v+`
`+K+" "+le})}function yt(c,y,v,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+nt(c,v)+(A?" "+A:"")})}function Nn(c,y){c.info(function(){return"TIMEOUT: "+y})}tt.prototype.info=function(){};function nt(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var A=v[c];if(!(2>A.length)){var B=A[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var le=1;le<B.length;le++)B[le]=""}}}}return En(v)}catch{return y}}var Hn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ce={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},it;function wi(){}M(wi,Vs),wi.prototype.g=function(){return new XMLHttpRequest},wi.prototype.i=function(){return{}},it=new wi;function mn(c,y,v,A){this.j=c,this.i=y,this.l=v,this.R=A||1,this.U=new _i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Yo={},xa={};function si(c,y,v){c.L=1,c.v=Bs(Dn(y)),c.m=v,c.P=!0,Wi(c,null)}function Wi(c,y){c.F=Date.now(),Ls(c),c.A=Dn(c.v);var v=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),tl(v.i,"t",A),c.C=0,v=c.j.J,c.h=new St,c.g=nc(c.j,v?y:null,!c.m),0<c.O&&(c.M=new Qo(I(c.Y,c,c.g),c.O)),y=c.U,v=c.g,A=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ki[0]=B.toString()),B=Ki);for(var K=0;K<B.length;K++){var le=Ms(v,B[K],A||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),ae(),Bt(c.i,c.u,c.A,c.l,c.R,c.m)}mn.prototype.ca=function(c){c=c.target;const y=this.M;y&&Kn(c)==3?y.j():this.Y(c)},mn.prototype.Y=function(c){try{if(c==this.g)e:{const kt=Kn(this.g);var y=this.g.Ba();const rr=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Qu(this.g)))){this.J||kt!=4||y==7||(y==8||0>=rr?ae(3):ae(2)),jr(this);var v=this.g.Z();this.X=v;t:if(Bu(this)){var A=Qu(this.g);c="";var B=A.length,K=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),Si(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(A[y],{stream:!(K&&y==B-1)});A.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=v==200,rn(this.i,this.u,this.A,this.l,this.R,kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Mt=this.g;if(($e=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se($e)){var Ke=$e;break t}}Ke=null}if(v=Ke)yt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Us(this,v);else{this.o=!1,this.s=3,ce(12),Yt(this),Si(this);break e}}if(this.P){v=!0;let Wt;for(;!this.J&&this.C<le.length;)if(Wt=qu(this,le),Wt==xa){kt==4&&(this.s=4,ce(14),v=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Yo){this.s=4,ce(15),yt(this.i,this.l,le,"[Invalid Chunk]"),v=!1;break}else yt(this.i,this.l,Wt,null),Us(this,Wt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||le.length!=0||this.h.h||(this.s=1,ce(16),v=!1),this.o=this.o&&v,!v)yt(this.i,this.l,le,"[Invalid Chunked Response]"),Yt(this),Si(this);else if(0<le.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Ys(Ht),Ht.M=!0,ce(11))}}else yt(this.i,this.l,le,null),Us(this,le);kt==4&&Yt(this),this.o&&!this.J&&(kt==4?Ju(this.j,this):(this.o=!1,Ls(this)))}else xd(this.g),v==400&&0<le.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Yt(this),Si(this)}}}catch{}finally{}};function Bu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qu(c,y){var v=c.C,A=y.indexOf(`
`,v);return A==-1?xa:(v=Number(y.substring(v,A)),isNaN(v)?Yo:(A+=1,A+v>y.length?xa:(y=y.slice(A,A+v),c.C=A+v,y)))}mn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ls(c){c.S=Date.now()+c.I,Hu(c,c.I)}function Hu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ee(I(c.ba,c),y)}function jr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Nn(this.i,this.A),this.L!=2&&(ae(),ce(17)),Yt(this),this.s=2,Si(this)):Hu(this,this.S-c)};function Si(c){c.j.G==0||c.J||Ju(c.j,c)}function Yt(c){jr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Ei(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Us(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Wo(v.h,c))){if(!c.K&&Wo(v.h,c)&&v.G==3){try{var A=v.Da.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Ba(v),ja(v);else break e;al(v),ce(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ee(I(v.Za,v),6e3));if(1>=Da(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ir(v,11)}else if((c.K||v.g==c)&&Ba(v),!se(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Ke=B[y];if(v.T=Ke[0],Ke=Ke[1],v.G==2)if(Ke[0]=="c"){v.K=Ke[1],v.ia=Ke[2];const Ht=Ke[3];Ht!=null&&(v.la=Ht,v.j.info("VER="+v.la));const kt=Ke[4];kt!=null&&(v.Aa=kt,v.j.info("SVER="+v.Aa));const rr=Ke[5];rr!=null&&typeof rr=="number"&&0<rr&&(A=1.5*rr,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Wt=c.g;if(Wt){const Di=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var K=A.h;K.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Oa(K,K.h),K.h=null))}if(A.D){const ll=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(A.ya=ll,ot(A.I,A.D,ll))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var le=c;if(A.qa=tc(A,A.J?A.ia:null,A.W),le.K){pn(A.h,le);var $e=le,Mt=A.L;Mt&&($e.I=Mt),$e.B&&(jr($e),Ls($e)),A.g=le}else Xu(A);0<v.i.length&&za(v)}else Ke[0]!="stop"&&Ke[0]!="close"||ir(v,7);else v.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ir(v,7):rl(v):Ke[0]!="noop"&&v.l&&v.l.ta(Ke),v.v=0)}}ae(4)}catch{}}var Fu=class{constructor(c,y){this.g=c,this.map=y}};function Xi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Na(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Da(c){return c.h?1:c.g?c.g.size:0}function Wo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Oa(c,y){c.g?c.g.add(y):c.h=y}function pn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Xi.prototype.cancel=function(){if(this.i=Xo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Xo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Q(c.i)}function Ad(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,A=0;A<v;A++)y.push(c[A]);return y}y=[],v=0;for(A in c)y[v++]=c[A];return y}function Ma(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const A in c)y[v++]=A;return y}}}function Zo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Ma(c),A=Ad(c),B=A.length,K=0;K<B;K++)y.call(void 0,A[K],v&&v[K],c)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rd(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var A=c[v].indexOf("="),B=null;if(0<=A){var K=c[v].substring(0,A);B=c[v].substring(A+1)}else K=c[v];y(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ct(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ct){this.h=c.h,zs(this,c.j),this.o=c.o,this.g=c.g,zr(this,c.s),this.l=c.l;var y=c.i,v=new Ji;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Zi(this,v),this.m=c.m}else c&&(y=String(c).match(js))?(this.h=!1,zs(this,y[1]||"",!0),this.o=Fn(y[2]||""),this.g=Fn(y[3]||"",!0),zr(this,y[4]),this.l=Fn(y[5]||"",!0),Zi(this,y[6]||"",!0),this.m=Fn(y[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}Ct.prototype.toString=function(){var c=[],y=this.j;y&&c.push(qs(y,Jo,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(qs(y,Jo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(qs(v,v.charAt(0)=="/"?Id:el,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",qs(v,ka)),c.join("")};function Dn(c){return new Ct(c)}function zs(c,y,v){c.j=v?Fn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function zr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Zi(c,y,v){y instanceof Ji?(c.i=y,$u(c.i,c.h)):(v||(y=qs(y,Cd)),c.i=new Ji(y,c.h))}function ot(c,y,v){c.i.set(y,v)}function Bs(c){return ot(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qs(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Gu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Gu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Jo=/[#\/\?@]/g,el=/[#\?:]/g,Id=/[#\?]/g,Cd=/[#\?@]/g,ka=/#/g;function Ji(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Gn(c){c.g||(c.g=new Map,c.h=0,c.i&&Rd(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Ji.prototype,i.add=function(c,y){Gn(this),this.i=null,c=Ai(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function er(c,y){Gn(c),y=Ai(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function tr(c,y){return Gn(c),y=Ai(c,y),c.g.has(y)}i.forEach=function(c,y){Gn(this),this.g.forEach(function(v,A){v.forEach(function(B){c.call(y,B,A,this)},this)},this)},i.na=function(){Gn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let A=0;A<y.length;A++){const B=c[A];for(let K=0;K<B.length;K++)v.push(y[A])}return v},i.V=function(c){Gn(this);let y=[];if(typeof c=="string")tr(this,c)&&(y=y.concat(this.g.get(Ai(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return Gn(this),this.i=null,c=Ai(this,c),tr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function tl(c,y,v){er(c,y),0<v.length&&(c.i=null,c.g.set(Ai(c,y),Q(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var A=y[v];const K=encodeURIComponent(String(A)),le=this.V(A);for(A=0;A<le.length;A++){var B=K;le[A]!==""&&(B+="="+encodeURIComponent(String(le[A]))),c.push(B)}}return this.i=c.join("&")};function Ai(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function $u(c,y){y&&!c.j&&(Gn(c),c.i=null,c.g.forEach(function(v,A){var B=A.toLowerCase();A!=B&&(er(this,A),tl(this,B,v))},c)),c.j=y}function Hs(c,y){const v=new tt;if(m.Image){const A=new Image;A.onload=O($n,v,"TestLoadImage: loaded",!0,y,A),A.onerror=O($n,v,"TestLoadImage: error",!1,y,A),A.onabort=O($n,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=O($n,v,"TestLoadImage: timeout",!1,y,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function ai(c,y){const v=new tt,A=new AbortController,B=setTimeout(()=>{A.abort(),$n(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(K=>{clearTimeout(B),K.ok?$n(v,"TestPingServer: ok",!0,y):$n(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),$n(v,"TestPingServer: error",!1,y)})}function $n(c,y,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function Fs(){this.g=new Yi}function Ri(c,y,v){const A=v||"";try{Zo(c,function(B,K){let le=B;g(B)&&(le=En(B)),y.push(A+K+"="+encodeURIComponent(le))})}catch(B){throw y.push(A+"type="+encodeURIComponent("_badmap")),B}}function Br(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Br,Vs),Br.prototype.g=function(){return new nr(this.l,this.j)},Br.prototype.i=function(c){return function(){return c}}({});function nr(c,y){mt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(nr,mt),i=nr.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Ci(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nl(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function nl(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ii(this):Ci(this),this.readyState==3&&nl(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ii(this))},i.Qa=function(c){this.g&&(this.response=c,Ii(this))},i.ga=function(){this.g&&Ii(this)};function Ii(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ci(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Ci(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function il(c){let y="";return Re(c,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function qt(c,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=il(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):ot(c,y,v))}function Je(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Je,mt);var Va=/^https?$/i,Gs=["POST","PUT"];i=Je.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():it.g(),this.v=this.o?Pr(this.o):Pr(it),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){Ku(this,K);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Gs,y,void 0))||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of v)this.g.setRequestHeader(K,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$s(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){Ku(this,K)}};function Ku(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Pa(c),xi(c)}function Pa(c){c.A||(c.A=!0,Xe(c,"complete"),Xe(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Xe(this,"complete"),Xe(this,"abort"),xi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xi(this,!0)),Je.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?La(this):this.bb())},i.bb=function(){La(this)};function La(c){if(c.h&&typeof d<"u"&&(!c.v[1]||Kn(c)!=4||c.Z()!=2)){if(c.u&&Kn(c)==4)zt(c.Ea,0,c);else if(Xe(c,"readystatechange"),Kn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=le===0){var B=String(c.D).match(js)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),A=!Va.test(B?B.toLowerCase():"")}v=A}if(v)Xe(c,"complete"),Xe(c,"success");else{c.m=6;try{var K=2<Kn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Pa(c)}}finally{xi(c)}}}}function xi(c,y){if(c.g){$s(c);const v=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Xe(c,"ready");try{v.onreadystatechange=A}catch{}}}function $s(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Kn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Qi(y)}};function Qu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function xd(c){const y={};c=(c.g&&2<=Kn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(se(c[A]))continue;var v=x(c[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[B]||[];y[B]=K,K.push(v)}P(y,function(A){return A.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Ua(c){this.Aa=0,this.i=[],this.j=new tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,c),this.cb=Ks("retryDelaySeedMs",1e4,c),this.Wa=Ks("forwardChannelMaxRetries",2,c),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(c&&c.concurrentRequestLimit),this.Da=new Fs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ua.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,A){ce(0),this.W=c,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=tc(this,null,this.W),za(this)};function rl(c){if(Yu(c),c.G==3){var y=c.U++,v=Dn(c.I);if(ot(v,"SID",c.K),ot(v,"RID",y),ot(v,"TYPE","terminate"),Qs(c,v),y=new mn(c,c.j,y),y.L=2,y.v=Bs(Dn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=nc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ls(y)}ec(c)}function ja(c){c.g&&(Ys(c),c.g.cancel(),c.g=null)}function Yu(c){ja(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ba(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function za(c){if(!Na(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||V(),ve||(oe(),ve=!0),Le.add(y,c),c.B=0}}function Nd(c,y){return Da(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ee(I(c.Ga,c,y),ol(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new mn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=S(K),N(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Wu(this,B,y),v=Dn(this.I),ot(v,"RID",c),ot(v,"CVER",22),this.D&&ot(v,"X-HTTP-Session-Id",this.D),Qs(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(il(K)))+"&"+y:this.m&&qt(v,this.m,K)),Oa(this.h,B),this.Ua&&ot(v,"TYPE","init"),this.P?(ot(v,"$req",y),ot(v,"SID","null"),B.T=!0,si(B,v,null)):si(B,v,y),this.G=2}}else this.G==3&&(c?sl(this,c):this.i.length==0||Na(this.h)||sl(this))};function sl(c,y){var v;y?v=y.l:v=c.U++;const A=Dn(c.I);ot(A,"SID",c.K),ot(A,"RID",v),ot(A,"AID",c.T),Qs(c,A),c.m&&c.o&&qt(A,c.m,c.o),v=new mn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Wu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Oa(c.h,v),si(v,A,y)}function Qs(c,y){c.H&&Re(c.H,function(v,A){ot(y,A,v)}),c.l&&Zo({},function(v,A){ot(y,A,v)})}function Wu(c,y,v){v=Math.min(c.i.length,v);var A=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let K=-1;for(;;){const le=["count="+v];K==-1?0<v?(K=B[0].g,le.push("ofs="+K)):K=0:le.push("ofs="+K);let $e=!0;for(let Mt=0;Mt<v;Mt++){let Ke=B[Mt].g;const Ht=B[Mt].map;if(Ke-=K,0>Ke)K=Math.max(0,B[Mt].g-100),$e=!1;else try{Ri(Ht,le,"req"+Ke+"_")}catch{A&&A(Ht)}}if($e){A=le.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,A}function Xu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||V(),ve||(oe(),ve=!0),Le.add(y,c),c.v=0}}function al(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ee(I(c.Fa,c),ol(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ee(I(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),ja(this),Zu(this))};function Ys(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Zu(c){c.g=new mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Dn(c.qa);ot(y,"RID","rpc"),ot(y,"SID",c.K),ot(y,"AID",c.T),ot(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&ot(y,"TO",c.ja),ot(y,"TYPE","xmlhttp"),Qs(c,y),c.m&&c.o&&qt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Bs(Dn(y)),v.m=null,v.P=!0,Wi(v,c)}i.Za=function(){this.C!=null&&(this.C=null,ja(this),al(this),ce(19))};function Ba(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ju(c,y){var v=null;if(c.g==y){Ba(c),Ys(c),c.g=null;var A=2}else if(Wo(c.h,y))v=y.D,pn(c.h,y),A=1;else return;if(c.G!=0){if(y.o)if(A==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;A=bi(),Xe(A,new he(A,v)),za(c)}else Xu(c);else if(B=y.s,B==3||B==0&&0<y.X||!(A==1&&Nd(c,y)||A==2&&al(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),B){case 1:ir(c,5);break;case 4:ir(c,10);break;case 3:ir(c,6);break;default:ir(c,2)}}}function ol(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function ir(c,y){if(c.j.info("Error code "+y),y==2){var v=I(c.fb,c),A=c.Xa;const B=!A;A=new Ct(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||zs(A,"https"),Bs(A),B?Hs(A.toString(),v):ai(A.toString(),v)}else ce(2);c.G=0,c.l&&c.l.sa(y),ec(c),Yu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function ec(c){if(c.G=0,c.ka=[],c.l){const y=Xo(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ka,y),H(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function tc(c,y,v){var A=v instanceof Ct?Dn(v):new Ct(v);if(A.g!="")y&&(A.g=y+"."+A.g),zr(A,A.s);else{var B=m.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var K=new Ct(null);A&&zs(K,A),y&&(K.g=y),B&&zr(K,B),v&&(K.l=v),A=K}return v=c.D,y=c.ya,v&&y&&ot(A,v,y),ot(A,"VER",c.la),Qs(c,A),A}function nc(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Je(new Br({eb:v})):new Je(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}i=ic.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function qa(){}qa.prototype.g=function(c,y){return new gn(c,y)};function gn(c,y){mt.call(this),this.g=new Ua(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!se(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ni(this)}M(gn,mt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){rl(this.g)},gn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=En(c),c=v);y.i.push(new Fu(y.Ya++,c)),y.G==3&&za(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,gn.aa.N.call(this)};function rc(c){Bn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(rc,Bn);function sc(){Ps.call(this),this.status=1}M(sc,Ps);function Ni(c){this.g=c}M(Ni,ic),Ni.prototype.ua=function(){Xe(this.g,"a")},Ni.prototype.ta=function(c){Xe(this.g,new rc(c))},Ni.prototype.sa=function(c){Xe(this.g,new sc)},Ni.prototype.ra=function(){Xe(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ET=function(){return new qa},_T=function(){return bi()},vT=qn,Jm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hn.NO_ERROR=0,Hn.TIMEOUT=8,Hn.HTTP_ERROR=6,mh=Hn,Ce.COMPLETE="complete",yT=Ce,Lr.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",mt.prototype.listen=mt.prototype.K,tu=Lr,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,gT=Je}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const p0="@firebase/firestore",g0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Xh("@firebase/firestore");function Eo(){return pa.logLevel}function me(i,...e){if(pa.logLevel<=Fe.DEBUG){const n=e.map(Cp);pa.debug(`Firestore (${Lo}): ${i}`,...n)}}function Sr(i,...e){if(pa.logLevel<=Fe.ERROR){const n=e.map(Cp);pa.error(`Firestore (${Lo}): ${i}`,...n)}}function xo(i,...e){if(pa.logLevel<=Fe.WARN){const n=e.map(Cp);pa.warn(`Firestore (${Lo}): ${i}`,...n)}}function Cp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(i="Unexpected state"){const e=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: `+i;throw Sr(e),new Error(e)}function et(i,e){i||Ne()}function ke(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class k2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V2{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Er,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Er)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string"),new TT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new ln(e)}}class P2{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class L2{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new P2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U2{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ti(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){et(this.o===void 0);const s=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new y0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(et(typeof n.token=="string"),this.R=n.token,new y0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=j2(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function je(i,e){return i<e?-1:i>e?1:0}function ep(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return je(s,o);{const u=bT(),d=z2(u.encode(v0(i,n)),u.encode(v0(e,n)));return d!==0?d:je(s,o)}}n+=s>65535?2:1}return je(i.length,e.length)}function v0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function z2(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return je(i[n],e[n]);return je(i.length,e.length)}function No(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=-62135596800,E0=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*E0);return new Ut(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_0)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E0}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Ut(0,0))}static max(){return new Oe(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="__name__";class Li{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ne(),s===void 0?s=e.length-n:s>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Li.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Li?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Li.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return je(e.length,n.length)}static compareSegments(e,n){const s=Li.isNumericId(e),o=Li.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Li.extractNumericId(e).compare(Li.extractNumericId(n)):ep(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class ft extends Li{construct(e,n,s){return new ft(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const B2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Li{construct(e,n,s){return new tn(e,n,s)}static isValidIdentifier(e){return B2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T0}static keyField(){return new tn([T0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ft.fromString(e))}static fromName(e){return new be(ft.fromString(e).popFirst(5))}static empty(){return new be(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function q2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(s===1e9?new Ut(n+1,0):new Ut(n,s));return new ws(o,be.empty(),e)}function H2(i){return new ws(i.readTime,i.key,pu)}class ws{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ws(Oe.min(),be.empty(),pu)}static max(){return new ws(Oe.max(),be.empty(),pu)}}function F2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(i.documentKey,e.documentKey),n!==0?n:je(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==G2)throw i;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,s)=>{n(e)})}static reject(e){return new te((n,s)=>{s(e)})}static waitFor(e){return new te((n,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},p=>s(p))}),d=!0,u===o&&n()})}static or(e){let n=te.resolve(!1);for(const s of e)n=n.next(o=>o?te.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new te((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(T=>{d[g]=T,++m,m===u&&s(d)},T=>o(T))}})}static doWhile(e,n){return new te((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function K2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Zh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=-1;function Jh(i){return i==null}function Ch(i){return i===0&&1/i==-1/0}function Q2(i){return typeof i=="number"&&Number.isInteger(i)&&!Ch(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="";function Y2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=b0(e)),e=W2(i.get(n),e);return b0(e)}function W2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case ST:n+="";break;default:n+=u}}return n}function b0(i){return i+ST+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function xs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function AT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??en.RED,this.left=o??en.EMPTY,this.right=u??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new en(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,s,o,u){return this}insert(e,n,s){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new S0(this.data.getIterator())}getIteratorFrom(e){return new S0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class S0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new jn([])}unionWith(e){let n=new jt(tn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new RT("Invalid base64 string: "+u):u}}(e);return new nn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const X2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(i){if(et(!!i),typeof i=="string"){let e=0;const n=X2.exec(i);if(et(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(i.seconds),nanos:It(i.nanos)}}function It(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function As(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="server_timestamp",CT="__type__",xT="__previous_value__",NT="__local_write_time__";function Np(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[CT])===null||n===void 0?void 0:n.stringValue)===IT}function ed(i){const e=i.mapValue.fields[xT];return Np(e)?ed(e):e}function gu(i){const e=Ss(i.mapValue.fields[NT].timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,s,o,u,d,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const xh="(default)";class yu{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__type__",J2="__max__",lh={mapValue:{}},OT="__vector__",Nh="value";function Rs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Np(i)?4:tR(i)?9007199254740991:eR(i)?10:11:Ne()}function Hi(i,e){if(i===e)return!0;const n=Rs(i);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return gu(i).isEqual(gu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ss(o.timestampValue),m=Ss(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return As(o.bytesValue).isEqual(As(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return It(o.geoPointValue.latitude)===It(u.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return It(o.integerValue)===It(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=It(o.doubleValue),m=It(u.doubleValue);return d===m?Ch(d)===Ch(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return No(i.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(w0(d)!==w0(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Hi(d[p],m[p])))return!1;return!0}(i,e);default:return Ne()}}function vu(i,e){return(i.values||[]).find(n=>Hi(n,e))!==void 0}function Do(i,e){if(i===e)return 0;const n=Rs(i),s=Rs(e);if(n!==s)return je(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(i.booleanValue,e.booleanValue);case 2:return function(u,d){const m=It(u.integerValue||u.doubleValue),p=It(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return A0(i.timestampValue,e.timestampValue);case 4:return A0(gu(i),gu(e));case 5:return ep(i.stringValue,e.stringValue);case 6:return function(u,d){const m=As(u),p=As(d);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const T=je(m[g],p[g]);if(T!==0)return T}return je(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const m=je(It(u.latitude),It(d.latitude));return m!==0?m:je(It(u.longitude),It(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return R0(i.arrayValue,e.arrayValue);case 10:return function(u,d){var m,p,g,T;const w=u.fields||{},I=d.fields||{},O=(m=w[Nh])===null||m===void 0?void 0:m.arrayValue,M=(p=I[Nh])===null||p===void 0?void 0:p.arrayValue,Q=je(((g=O==null?void 0:O.values)===null||g===void 0?void 0:g.length)||0,((T=M==null?void 0:M.values)===null||T===void 0?void 0:T.length)||0);return Q!==0?Q:R0(O,M)}(i.mapValue,e.mapValue);case 11:return function(u,d){if(u===lh.mapValue&&d===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=d.fields||{},T=Object.keys(g);p.sort(),T.sort();for(let w=0;w<p.length&&w<T.length;++w){const I=ep(p[w],T[w]);if(I!==0)return I;const O=Do(m[p[w]],g[T[w]]);if(O!==0)return O}return je(p.length,T.length)}(i.mapValue,e.mapValue);default:throw Ne()}}function A0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return je(i,e);const n=Ss(i),s=Ss(e),o=je(n.seconds,s.seconds);return o!==0?o:je(n.nanos,s.nanos)}function R0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Do(n[o],s[o]);if(u)return u}return je(n.length,s.length)}function Oo(i){return tp(i)}function tp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Ss(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return As(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return be.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=tp(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${tp(n.fields[d])}`;return o+"}"}(i.mapValue):Ne()}function ph(i){switch(Rs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(i);return e?16+ph(e):16;case 5:return 2*i.stringValue.length;case 6:return As(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+ph(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return xs(s.fields,(u,d)=>{o+=u.length+ph(d)}),o}(i.mapValue);default:throw Ne()}}function I0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function np(i){return!!i&&"integerValue"in i}function Dp(i){return!!i&&"arrayValue"in i}function C0(i){return!!i&&"nullValue"in i}function x0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function gh(i){return!!i&&"mapValue"in i}function eR(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[DT])===null||n===void 0?void 0:n.stringValue)===OT}function ou(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return xs(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ou(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ou(i.arrayValue.values[n]);return e}return Object.assign({},i)}function tR(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===J2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(n)}setAll(e){let n=tn.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=ou(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];gh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){xs(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new Rn(ou(this.value))}}function MT(i){const e=[];return xs(i.fields,(n,s)=>{const o=new tn([n]);if(gh(s)){const u=MT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new un(e,0,Oe.min(),Oe.min(),Oe.min(),Rn.empty(),0)}static newFoundDocument(e,n,s,o){return new un(e,1,n,Oe.min(),s,o,0)}static newNoDocument(e,n){return new un(e,2,n,Oe.min(),Oe.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Oe.min(),Oe.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function N0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],d=i.position[o];if(u.field.isKeyField()?s=be.comparator(be.fromName(d.referenceValue),n.key):s=Do(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function D0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Hi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n="asc"){this.field=e,this.dir=n}}function nR(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{}class Ot extends kT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new rR(e,n,s):n==="array-contains"?new oR(e,s):n==="in"?new lR(e,s):n==="not-in"?new uR(e,s):n==="array-contains-any"?new cR(e,s):new Ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new sR(e,s):new aR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Do(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(Do(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends kT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new di(e,n)}matches(e){return VT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function VT(i){return i.op==="and"}function PT(i){return iR(i)&&VT(i)}function iR(i){for(const e of i.filters)if(e instanceof di)return!1;return!0}function ip(i){if(i instanceof Ot)return i.field.canonicalString()+i.op.toString()+Oo(i.value);if(PT(i))return i.filters.map(e=>ip(e)).join(",");{const e=i.filters.map(n=>ip(n)).join(",");return`${i.op}(${e})`}}function LT(i,e){return i instanceof Ot?function(s,o){return o instanceof Ot&&s.op===o.op&&s.field.isEqual(o.field)&&Hi(s.value,o.value)}(i,e):i instanceof di?function(s,o){return o instanceof di&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&LT(d,o.filters[m]),!0):!1}(i,e):void Ne()}function UT(i){return i instanceof Ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Oo(n.value)}`}(i):i instanceof di?function(n){return n.op.toString()+" {"+n.getFilters().map(UT).join(" ,")+"}"}(i):"Filter"}class rR extends Ot{constructor(e,n,s){super(e,n,s),this.key=be.fromName(s.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class sR extends Ot{constructor(e,n){super(e,"in",n),this.keys=jT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aR extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=jT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>be.fromName(s.referenceValue))}class oR extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dp(n)&&vu(n.arrayValue,this.value)}}class lR extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vu(this.value.arrayValue,n)}}class uR extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vu(this.value.arrayValue,n)}}class cR extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>vu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.le=null}}function O0(i,e=null,n=[],s=[],o=null,u=null,d=null){return new hR(i,e,n,s,o,u,d)}function Op(i){const e=ke(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ip(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Oo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Oo(s)).join(",")),e.le=n}return e.le}function Mp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!nR(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!LT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!D0(i.startAt,e.startAt)&&D0(i.endAt,e.endAt)}function rp(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function dR(i,e,n,s,o,u,d,m){return new wa(i,e,n,s,o,u,d,m)}function td(i){return new wa(i)}function M0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function zT(i){return i.collectionGroup!==null}function lu(i){const e=ke(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new jt(tn.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new _u(u,s))}),n.has(tn.keyField().canonicalString())||e.he.push(new _u(tn.keyField(),s))}return e.he}function Ui(i){const e=ke(i);return e.Pe||(e.Pe=fR(e,lu(i))),e.Pe}function fR(i,e){if(i.limitType==="F")return O0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new _u(o.field,u)});const n=i.endAt?new Dh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Dh(i.startAt.position,i.startAt.inclusive):null;return O0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function sp(i,e){const n=i.filters.concat([e]);return new wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ap(i,e,n){return new wa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function nd(i,e){return Mp(Ui(i),Ui(e))&&i.limitType===e.limitType}function BT(i){return`${Op(Ui(i))}|lt:${i.limitType}`}function To(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>UT(o)).join(", ")}]`),Jh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Oo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Oo(o)).join(",")),`Target(${s})`}(Ui(i))}; limitType=${i.limitType})`}function id(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):be.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of lu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(d,m,p){const g=N0(d,m,p);return d.inclusive?g<=0:g<0}(s.startAt,lu(s),o)||s.endAt&&!function(d,m,p){const g=N0(d,m,p);return d.inclusive?g>=0:g>0}(s.endAt,lu(s),o))}(i,e)}function mR(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function qT(i){return(e,n)=>{let s=!1;for(const o of lu(i)){const u=pR(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function pR(i,e,n){const s=i.field.isKeyField()?be.comparator(e.key,n.key):function(u,d,m){const p=d.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Do(p,g):Ne()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return AT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new _t(be.comparator);function Ar(){return gR}const HT=new _t(be.comparator);function nu(...i){let e=HT;for(const n of i)e=e.insert(n.key,n);return e}function FT(i){let e=HT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function da(){return uu()}function GT(){return uu()}function uu(){return new Sa(i=>i.toString(),(i,e)=>i.isEqual(e))}const yR=new _t(be.comparator),vR=new jt(be.comparator);function Ge(...i){let e=vR;for(const n of i)e=e.add(n);return e}const _R=new jt(je);function ER(){return _R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function $T(i){return{integerValue:""+i}}function KT(i,e){return Q2(e)?$T(e):kp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this._=void 0}}function TR(i,e,n){return i instanceof Eu?function(o,u){const d={fields:{[CT]:{stringValue:IT},[NT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Np(u)&&(u=ed(u)),u&&(d.fields[xT]=u),{mapValue:d}}(n,e):i instanceof Tu?YT(i,e):i instanceof bu?WT(i,e):function(o,u){const d=QT(o,u),m=k0(d)+k0(o.Ie);return np(d)&&np(o.Ie)?$T(m):kp(o.serializer,m)}(i,e)}function bR(i,e,n){return i instanceof Tu?YT(i,e):i instanceof bu?WT(i,e):n}function QT(i,e){return i instanceof wu?function(s){return np(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Eu extends rd{}class Tu extends rd{constructor(e){super(),this.elements=e}}function YT(i,e){const n=XT(e);for(const s of i.elements)n.some(o=>Hi(o,s))||n.push(s);return{arrayValue:{values:n}}}class bu extends rd{constructor(e){super(),this.elements=e}}function WT(i,e){let n=XT(e);for(const s of i.elements)n=n.filter(o=>!Hi(o,s));return{arrayValue:{values:n}}}class wu extends rd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function k0(i){return It(i.integerValue||i.doubleValue)}function XT(i){return Dp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.field=e,this.transform=n}}function wR(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof Tu&&o instanceof Tu||s instanceof bu&&o instanceof bu?No(s.elements,o.elements,Hi):s instanceof wu&&o instanceof wu?Hi(s.Ie,o.Ie):s instanceof Eu&&o instanceof Eu}(i.transform,e.transform)}class SR{constructor(e,n){this.version=e,this.transformResults=n}}class ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class sd{}function JT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Vp(i.key,ii.none()):new Cu(i.key,i.data,ii.none());{const n=i.data,s=Rn.empty();let o=new jt(tn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new Ns(i.key,s,new jn(o.toArray()),ii.none())}}function AR(i,e,n){i instanceof Cu?function(o,u,d){const m=o.value.clone(),p=P0(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Ns?function(o,u,d){if(!yh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=P0(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(eb(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function cu(i,e,n,s){return i instanceof Cu?function(u,d,m,p){if(!yh(u.precondition,d))return m;const g=u.value.clone(),T=L0(u.fieldTransforms,p,d);return g.setAll(T),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof Ns?function(u,d,m,p){if(!yh(u.precondition,d))return m;const g=L0(u.fieldTransforms,p,d),T=d.data;return T.setAll(eb(u)),T.setAll(g),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(i,e,n,s):function(u,d,m){return yh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,n)}function RR(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=QT(s.transform,o||null);u!=null&&(n===null&&(n=Rn.empty()),n.set(s.field,u))}return n||null}function V0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&No(s,o,(u,d)=>wR(u,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Cu extends sd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ns extends sd{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function eb(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function P0(i,e,n){const s=new Map;et(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,bR(d,m,n[o]))}return s}function L0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,d=n.data.field(o.field);s.set(o.field,TR(u,d,e))}return s}class Vp extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IR extends sd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&AR(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=cu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=GT();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=JT(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(Oe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(n,s)=>V0(n,s))&&No(this.baseMutations,e.baseMutations,(n,s)=>V0(n,s))}}class Pp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){et(e.mutations.length===s.length);let o=function(){return yR}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Pp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Ye;function DR(i){switch(i){case J.OK:return Ne();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ne()}}function tb(i){if(i===void 0)return Sr("GRPC error has no .code"),J.UNKNOWN;switch(i){case Dt.OK:return J.OK;case Dt.CANCELLED:return J.CANCELLED;case Dt.UNKNOWN:return J.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return J.INTERNAL;case Dt.UNAVAILABLE:return J.UNAVAILABLE;case Dt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Dt.NOT_FOUND:return J.NOT_FOUND;case Dt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Dt.ABORTED:return J.ABORTED;case Dt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Dt.DATA_LOSS:return J.DATA_LOSS;default:return Ne()}}(Ye=Dt||(Dt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new Es([4294967295,4294967295],0);function U0(i){const e=bT().encode(i),n=new pT;return n.update(e),new Uint8Array(n.digest())}function j0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Es([n,s],0),new Es([o,u],0)]}class Lp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new iu(`Invalid padding: ${n}`);if(s<0)throw new iu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new iu(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Es.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(Es.fromNumber(s)));return o.compare(OR)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=U0(e),[s,o]=j0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ae(s,o,u);if(!this.Re(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Lp(u,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.Ee===0)return;const n=U0(e),[s,o]=j0(n);for(let u=0;u<this.hashCount;u++){const d=this.Ae(s,o,u);this.Ve(d)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ad(Oe.min(),o,new _t(je),Ar(),Ge())}}class xu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new xu(s,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class nb{constructor(e,n){this.targetId=e,this.ge=n}}class ib{constructor(e,n,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class z0{constructor(){this.pe=0,this.ye=B0(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ge(),n=Ge(),s=Ge();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ne()}}),new xu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=B0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,et(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class MR{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ar(),this.$e=uh(),this.Ue=uh(),this.Ke=new _t(je)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(rp(u))if(s===0){const d=new be(u.path);this.ze(n,d,un.newNoDocument(d,Oe.min()))}else et(s===1);else{const d=this.et(n);if(d!==s){const m=this.tt(e),p=m?this.nt(m,e,d):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=As(s).toUint8Array()}catch(p){if(p instanceof RT)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Lp(d,o,u)}catch(p){return xo(p instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ke.it(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,d)=>{const m=this.Xe(d);if(m){if(u.current&&rp(m.target)){const p=new be(m.target.path);this._t(p).has(d)||this.ut(d,p)||this.ze(d,p,un.newNoDocument(p,e))}u.ve&&(n.set(d,u.Fe()),u.Me())}});let s=Ge();this.Ue.forEach((u,d)=>{let m=!0;d.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,d)=>d.setReadTime(e));const o=new ad(e,n,this.Ke,this.Qe,s);return this.Qe=Ar(),this.$e=uh(),this.Ue=uh(),this.Ke=new _t(je),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new z0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new jt(je),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new jt(je),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new z0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function uh(){return new _t(be.comparator)}function B0(){return new _t(be.comparator)}const kR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class LR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function op(i,e){return i.useProto3Json||Jh(e)?e:{value:e}}function Oh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function UR(i,e){return Oh(i,e.toTimestamp())}function ji(i){return et(!!i),Oe.fromTimestamp(function(n){const s=Ss(n);return new Ut(s.seconds,s.nanos)}(i))}function Up(i,e){return lp(i,e).canonicalString()}function lp(i,e){const n=function(o){return new ft(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function sb(i){const e=ft.fromString(i);return et(cb(e)),e}function up(i,e){return Up(i.databaseId,e.path)}function Mm(i,e){const n=sb(e);if(n.get(1)!==i.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new be(ob(n))}function ab(i,e){return Up(i.databaseId,e)}function jR(i){const e=sb(i);return e.length===4?ft.emptyPath():ob(e)}function cp(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ob(i){return et(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function q0(i,e,n){return{name:up(i,e),fields:n.value.mapValue.fields}}function zR(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,T){return g.useProto3Json?(et(T===void 0||typeof T=="string"),nn.fromBase64String(T||"")):(et(T===void 0||T instanceof Buffer||T instanceof Uint8Array),nn.fromUint8Array(T||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(g){const T=g.code===void 0?J.UNKNOWN:tb(g.code);return new de(T,g.message||"")}(d);n=new ib(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mm(i,s.document.name),u=ji(s.document.updateTime),d=s.document.createTime?ji(s.document.createTime):Oe.min(),m=new Rn({mapValue:{fields:s.document.fields}}),p=un.newFoundDocument(o,u,d,m),g=s.targetIds||[],T=s.removedTargetIds||[];n=new vh(g,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mm(i,s.document),u=s.readTime?ji(s.readTime):Oe.min(),d=un.newNoDocument(o,u),m=s.removedTargetIds||[];n=new vh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mm(i,s.document),u=s.removedTargetIds||[];n=new vh([],u,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new NR(o,u),m=s.targetId;n=new nb(m,d)}}return n}function BR(i,e){let n;if(e instanceof Cu)n={update:q0(i,e.key,e.value)};else if(e instanceof Vp)n={delete:up(i,e.key)};else if(e instanceof Ns)n={update:q0(i,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof IR))return Ne();n={verify:up(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof Eu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Tu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof bu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof wu)return{fieldPath:d.field.canonicalString(),increment:m.Ie};throw Ne()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:UR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ne()}(i,e.precondition)),n}function qR(i,e){return i&&i.length>0?(et(e!==void 0),i.map(n=>function(o,u){let d=o.updateTime?ji(o.updateTime):ji(u);return d.isEqual(Oe.min())&&(d=ji(u)),new SR(d,o.transformResults||[])}(n,e))):[]}function HR(i,e){return{documents:[ab(i,e.path)]}}function FR(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ab(i,o);const u=function(g){if(g.length!==0)return ub(di.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(g){if(g.length!==0)return g.map(T=>function(I){return{field:bo(I.field),direction:KR(I.dir)}}(T))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=op(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function GR(i){let e=jR(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){et(s===1);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=function(w){const I=lb(w);return I instanceof di&&PT(I)?I.getFilters():[I]}(n.where));let d=[];n.orderBy&&(d=function(w){return w.map(I=>function(M){return new _u(wo(M.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let m=null;n.limit&&(m=function(w){let I;return I=typeof w=="object"?w.value:w,Jh(I)?null:I}(n.limit));let p=null;n.startAt&&(p=function(w){const I=!!w.before,O=w.values||[];return new Dh(O,I)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const I=!w.before,O=w.values||[];return new Dh(O,I)}(n.endAt)),dR(e,o,d,u,m,"F",p,g)}function $R(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lb(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=wo(n.unaryFilter.field);return Ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(n.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=wo(n.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=wo(n.unaryFilter.field);return Ot.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(i):i.fieldFilter!==void 0?function(n){return Ot.create(wo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return di.create(n.compositeFilter.filters.map(s=>lb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(i):Ne()}function KR(i){return kR[i]}function QR(i){return VR[i]}function YR(i){return PR[i]}function bo(i){return{fieldPath:i.canonicalString()}}function wo(i){return tn.fromServerFormat(i.fieldPath)}function ub(i){return i instanceof Ot?function(n){if(n.op==="=="){if(x0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(C0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(C0(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:QR(n.op),value:n.value}}}(i):i instanceof di?function(n){const s=n.getFilters().map(o=>ub(o));return s.length===1?s[0]:{compositeFilter:{op:YR(n.op),filters:s}}}(i):Ne()}function WR(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,s,o,u=Oe.min(),d=Oe.min(),m=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Tt=e}}function ZR(i){const e=GR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.Tn=new eI}addToCollectionParentIndex(e,n){return this.Tn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(ws.min())}updateCollectionGroup(e,n,s){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class eI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new jt(ft.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new jt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hb=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(hb,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Mo(0)}static Kn(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="LruGarbageCollector",tI=1048576;function G0([i,e],[n,s]){const o=je(i,n);return o===0?je(e,s):o}class nI{constructor(e){this.Hn=e,this.buffer=new jt(G0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();G0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(F0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jo(n)?me(F0,"Ignoring IndexedDB error during garbage collection: ",n):await Uo(n)}await this.er(3e5)})}}class rI{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Zh.ae);const s=new nI(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(H0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,d,m,p,g;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(g=Date.now(),Eo()<=Fe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-T}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function sI(i,e){return new rI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.changes=new Sa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?te.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&cu(s.mutation,o,jn.empty(),Ut.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ge()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ge()){const o=da();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=nu();return u.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=da();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ge()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let u=Ar();const d=uu(),m=function(){return uu()}();return n.forEach((p,g)=>{const T=s.get(g.key);o.has(g.key)&&(T===void 0||T.mutation instanceof Ns)?u=u.insert(g.key,g):T!==void 0?(d.set(g.key,T.mutation.getFieldMask()),cu(T.mutation,g,T.mutation.getFieldMask(),Ut.now())):d.set(g.key,jn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,T)=>d.set(g,T)),n.forEach((g,T)=>{var w;return m.set(g,new oI(T,(w=d.get(g))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=uu();let o=new _t((d,m)=>d-m),u=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let T=s.get(p)||jn.empty();T=m.applyToLocalView(g,T),s.set(p,T);const w=(o.get(m.batchId)||Ge()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,T=p.value,w=GT();T.forEach(I=>{if(!u.has(I)){const O=JT(n.get(I),s.get(I));O!==null&&w.set(I,O),u=u.add(I)}}),d.push(this.documentOverlayCache.saveOverlays(e,g,w))}return te.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):te.resolve(da());let m=pu,p=u;return d.next(g=>te.forEach(g,(T,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(T)?te.resolve():this.remoteDocumentCache.getEntry(e,T).next(I=>{p=p.insert(T,I)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Ge())).next(T=>({batchId:m,changes:FT(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(s=>{let o=nu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=nu();return this.indexManager.getCollectionParents(e,u).next(m=>te.forEach(m,p=>{const g=function(w,I){return new wa(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(T=>{T.forEach((w,I)=>{d=d.insert(w,I)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((p,g)=>{const T=g.getKey();d.get(T)===null&&(d=d.insert(T,un.newInvalidDocument(T)))});let m=nu();return d.forEach((p,g)=>{const T=u.get(p);T!==void 0&&cu(T.mutation,g,jn.empty(),Ut.now()),id(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return te.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ji(o.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:ZR(o.bundledQuery),readTime:ji(o.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.overlays=new _t(be.comparator),this.Rr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const s=da();return te.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),te.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),te.resolve()}getOverlaysForCollection(e,n,s){const o=da(),u=n.length+1,d=new be(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new _t((g,T)=>g-T);const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let T=u.get(g.largestBatchId);T===null&&(T=da(),u=u.insert(g.largestBatchId,T)),T.set(g.getKey(),g)}}const m=da(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,T)=>m.set(g,T)),!(m.size()>=o)););return te.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new xR(n,s));let u=this.Rr.get(n);u===void 0&&(u=Ge(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.Vr=new jt(Kt.mr),this.gr=new jt(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Kt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new be(new ft([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.gr.forEachInRange([s,o],d=>{this.wr(d),u.push(d.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new be(new ft([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=Ge();return this.gr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return be.comparator(e.key,n.key)||je(e.Cr,n.Cr)}static pr(e,n){return je(e.Cr,n.Cr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new jt(Kt.mr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new CR(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Mr=this.Mr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(d)}lookupMutationBatch(e,n){return te.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?xp:this.Fr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],d=>{const m=this.Or(d.Cr);u.push(m)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new jt(je);return n.forEach(o=>{const u=new Kt(o,0),d=new Kt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,d],m=>{s=s.add(m.Cr)})}),te.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;be.isDocumentKey(u)||(u=u.child(""));const d=new Kt(new be(u),0);let m=new jt(je);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},d),te.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){et(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return te.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Mr.firstAfterOrEqual(s);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this.kr=e,this.docs=function(){return new _t(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return te.resolve(s?s.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let s=Ar();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():un.newInvalidDocument(o))}),te.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Ar();const d=n.path,m=new be(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:T}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||F2(H2(T),s)<=0||(o.has(T.key)||id(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ne()}qr(e,n){return te.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new mI(this)}getSize(e){return te.resolve(this.size)}}class mI extends aI{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),te.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.persistence=e,this.Qr=new Sa(n=>Op(n),Mp),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new jp,this.targetCount=0,this.Kr=Mo.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),te.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Mo(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.zn(n),te.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return te.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),te.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),te.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return te.resolve(s)}containsKey(e,n){return te.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Zh(0),this.zr=!1,this.zr=!0,this.jr=new hI,this.referenceDelegate=e(this),this.Hr=new pI(this),this.indexManager=new JR,this.remoteDocumentCache=function(o){return new fI(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new XR(n),this.Yr=new uI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new dI(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new gI(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return te.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class gI extends $2{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.ti=new jp,this.ni=null}static ri(e){return new zp(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),te.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),te.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.ii,s=>{const o=be.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,Oe.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return te.or([()=>te.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Mh{constructor(e,n){this.persistence=e,this.oi=new Sa(s=>Y2(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=sI(this,n)}static ri(e,n){return new Mh(e,n)}Zr(){}Xr(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return te.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?te.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,d=>this.ar(e,d,n).next(m=>{m||(s++,u.removeEntry(d,Oe.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}ar(e,n,s){return te.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Ge(),o=Ge();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Bp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return h1()?8:K2(dn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new yI;return this._s(e,n,d).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,d,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(Eo()<=Fe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),te.resolve()):(Eo()<=Fe.DEBUG&&me("QueryEngine","Query:",To(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(Eo()<=Fe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(n))):te.resolve())}rs(e,n){if(M0(n))return te.resolve(null);let s=Ui(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=ap(n,null,"F"),s=Ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=Ge(...u);return this.ns.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,d,p.readTime)?this.rs(e,ap(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return M0(n)||o.isEqual(Oe.min())?te.resolve(null):this.ns.getDocuments(e,s).next(u=>{const d=this.cs(n,u);return this.ls(n,d,s,o)?te.resolve(null):(Eo()<=Fe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(n)),this.hs(e,d,n,q2(o,pu)).next(m=>m))})}cs(e,n){let s=new jt(qT(e));return n.forEach((o,u)=>{id(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return Eo()<=Fe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",To(n)),this.ns.getDocumentsMatchingQuery(e,n,ws.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="LocalStore",_I=3e8;class EI{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new _t(je),this.Is=new Sa(u=>Op(u),Mp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function TI(i,e,n,s){return new EI(i,e,n,s)}async function fb(i,e){const n=ke(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let p=Ge();for(const g of o){d.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}for(const g of u){m.push(g.batchId);for(const T of g.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:d,addedBatchIds:m}))})})}function bI(i,e){const n=ke(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,T){const w=g.batch,I=w.keys();let O=te.resolve();return I.forEach(M=>{O=O.next(()=>T.getEntry(p,M)).next(Q=>{const H=g.docVersions.get(M);et(H!==null),Q.version.compareTo(H)<0&&(w.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),T.addEntry(Q)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Ge();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function mb(i){const e=ke(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function wI(i,e){const n=ke(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((T,w)=>{const I=o.get(w);if(!I)return;m.push(n.Hr.removeMatchingKeys(u,T.removedDocuments,w).next(()=>n.Hr.addMatchingKeys(u,T.addedDocuments,w)));let O=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?O=O.withResumeToken(nn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,s)),o=o.insert(w,O),function(Q,H,Y){return Q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=_I?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(I,O,T)&&m.push(n.Hr.updateTargetData(u,O))});let p=Ar(),g=Ge();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(SI(u,d,e.documentUpdates).next(T=>{p=T.Vs,g=T.fs})),!s.isEqual(Oe.min())){const T=n.Hr.getLastRemoteSnapshotVersion(u).next(w=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(T)}return te.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function SI(i,e,n){let s=Ge(),o=Ge();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let d=Ar();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Oe.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):me(qp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:d,fs:o}})}function AI(i,e){const n=ke(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=xp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function RI(i,e){const n=ke(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,te.resolve(o)):n.Hr.allocateTargetId(s).next(d=>(o=new gs(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function hp(i,e,n){const s=ke(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!jo(d))throw d;me(qp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function $0(i,e,n){const s=ke(i);let o=Oe.min(),u=Ge();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,g,T){const w=ke(p),I=w.Is.get(T);return I!==void 0?te.resolve(w.Ts.get(I)):w.Hr.getTargetData(g,T)}(s,d,Ui(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(d,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(d,e,n?o:Oe.min(),n?u:Ge())).next(m=>(II(s,mR(e),m),{documents:m,gs:u})))}function II(i,e,n){let s=i.Es.get(e)||Oe.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class K0{constructor(){this.activeTargetIds=ER()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CI{constructor(){this.ho=new K0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new K0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="ConnectivityMonitor";class Y0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(Q0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(Q0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function dp(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",NI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DI{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===xh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const d=dp(),m=this.bo(e,n.toUriEncodedString());me(km,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(me(km,`Received RPC '${e}' ${d}: `,g),g),g=>{throw xo(km,`RPC '${e}' ${d} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,d){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=NI[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class MI extends DI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=dp();return new Promise((d,m)=>{const p=new gT;p.setWithCredentials(!0),p.listenOnce(yT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case mh.NO_ERROR:const T=p.getResponseJson();me(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case mh.TIMEOUT:me(on,`RPC '${e}' ${u} timed out`),m(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:const w=p.getStatus();if(me(on,`RPC '${e}' ${u} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I==null?void 0:I.error;if(O&&O.status&&O.message){const M=function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Y)>=0?Y:J.UNKNOWN}(O.status);m(new de(M,O.message))}else m(new de(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new de(J.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{me(on,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);me(on,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=dp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=ET(),m=_T(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const T=u.join("");me(on,`Creating RPC '${e}' stream ${o}: ${T}`,p);const w=d.createWebChannel(T,p);let I=!1,O=!1;const M=new OI({Fo:H=>{O?me(on,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(I||(me(on,`Opening RPC '${e}' stream ${o} transport.`),w.open(),I=!0),me(on,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Mo:()=>w.close()}),Q=(H,Y,se)=>{H.listen(Y,ne=>{try{se(ne)}catch(fe){setTimeout(()=>{throw fe},0)}})};return Q(w,tu.EventType.OPEN,()=>{O||(me(on,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),Q(w,tu.EventType.CLOSE,()=>{O||(O=!0,me(on,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),Q(w,tu.EventType.ERROR,H=>{O||(O=!0,xo(on,`RPC '${e}' stream ${o} transport errored:`,H),M.Uo(new de(J.UNAVAILABLE,"The operation could not be completed")))}),Q(w,tu.EventType.MESSAGE,H=>{var Y;if(!O){const se=H.data[0];et(!!se);const ne=se,fe=(ne==null?void 0:ne.error)||((Y=ne[0])===null||Y===void 0?void 0:Y.error);if(fe){me(on,`RPC '${e}' stream ${o} received error:`,fe);const pe=fe.status;let Re=function(R){const N=Dt[R];if(N!==void 0)return tb(N)}(pe),P=fe.message;Re===void 0&&(Re=J.INTERNAL,P="Unknown error status: "+pe+" with message "+fe.message),O=!0,M.Uo(new de(Re,P)),w.close()}else me(on,`RPC '${e}' stream ${o} received:`,se),M.Ko(se)}}),Q(m,vT.STAT_EVENT,H=>{H.stat===Jm.PROXY?me(on,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===Jm.NOPROXY&&me(on,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i){return new LR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="PersistentStream";class gb{constructor(e,n,s,o,u,d,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new pb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new de(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(W0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(me(W0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kI extends gb{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=zR(this.serializer,e),s=function(u){if(!("targetChange"in u))return Oe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Oe.min():d.readTime?ji(d.readTime):Oe.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=cp(this.serializer),n.addTarget=function(u,d){let m;const p=d.target;if(m=rp(p)?{documents:HR(u,p)}:{query:FR(u,p).ht},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=rb(u,d.resumeToken);const g=op(u,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(Oe.min())>0){m.readTime=Oh(u,d.snapshotVersion.toTimestamp());const g=op(u,d.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=$R(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=cp(this.serializer),n.removeTarget=e,this.I_(n)}}class VI extends gb{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=qR(e.writeResults,e.commitTime),s=ji(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=cp(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>BR(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{}class LI extends PI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.So(e,lp(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(J.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Co(e,lp(n,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new de(J.UNKNOWN,d.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class UI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Sr(n),this.N_=!1):me("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="RemoteStore";class jI{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(d=>{s.enqueueAndForget(async()=>{Aa(this)&&(me(ga,"Restarting streams for network reachability change."),await async function(p){const g=ke(p);g.W_.add(4),await Nu(g),g.j_.set("Unknown"),g.W_.delete(4),await ld(g)}(this))})}),this.j_=new UI(s,o)}}async function ld(i){if(Aa(i))for(const e of i.G_)await e(!0)}async function Nu(i){for(const e of i.G_)await e(!1)}function yb(i,e){const n=ke(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),$p(n)?Gp(n):zo(n).c_()&&Fp(n,e))}function Hp(i,e){const n=ke(i),s=zo(n);n.K_.delete(e),s.c_()&&vb(n,e),n.K_.size===0&&(s.c_()?s.P_():Aa(n)&&n.j_.set("Unknown"))}function Fp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(i).y_(e)}function vb(i,e){i.H_.Ne(e),zo(i).w_(e)}function Gp(i){i.H_=new MR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),zo(i).start(),i.j_.B_()}function $p(i){return Aa(i)&&!zo(i).u_()&&i.K_.size>0}function Aa(i){return ke(i).W_.size===0}function _b(i){i.H_=void 0}async function zI(i){i.j_.set("Online")}async function BI(i){i.K_.forEach((e,n)=>{Fp(i,e)})}async function qI(i,e){_b(i),$p(i)?(i.j_.q_(e),Gp(i)):i.j_.set("Unknown")}async function HI(i,e,n){if(i.j_.set("Online"),e instanceof ib&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){me(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await kh(i,s)}else if(e instanceof vh?i.H_.We(e):e instanceof nb?i.H_.Ze(e):i.H_.je(e),!n.isEqual(Oe.min()))try{const s=await mb(i.localStore);n.compareTo(s)>=0&&await function(u,d){const m=u.H_.ot(d);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.K_.get(g);T&&u.K_.set(g,T.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,g)=>{const T=u.K_.get(p);if(!T)return;u.K_.set(p,T.withResumeToken(nn.EMPTY_BYTE_STRING,T.snapshotVersion)),vb(u,p);const w=new gs(T.target,p,g,T.sequenceNumber);Fp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){me(ga,"Failed to raise snapshot:",s),await kh(i,s)}}async function kh(i,e,n){if(!jo(e))throw e;i.W_.add(1),await Nu(i),i.j_.set("Offline"),n||(n=()=>mb(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{me(ga,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await ld(i)})}function Eb(i,e){return e().catch(n=>kh(i,n,e))}async function ud(i){const e=ke(i),n=Is(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:xp;for(;FI(e);)try{const o=await AI(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,GI(e,o)}catch(o){await kh(e,o)}Tb(e)&&bb(e)}function FI(i){return Aa(i)&&i.U_.length<10}function GI(i,e){i.U_.push(e);const n=Is(i);n.c_()&&n.S_&&n.b_(e.mutations)}function Tb(i){return Aa(i)&&!Is(i).u_()&&i.U_.length>0}function bb(i){Is(i).start()}async function $I(i){Is(i).C_()}async function KI(i){const e=Is(i);for(const n of i.U_)e.b_(n.mutations)}async function QI(i,e,n){const s=i.U_.shift(),o=Pp.from(s,e,n);await Eb(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await ud(i)}async function YI(i,e){e&&Is(i).S_&&await async function(s,o){if(function(d){return DR(d)&&d!==J.ABORTED}(o.code)){const u=s.U_.shift();Is(s).h_(),await Eb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await ud(s)}}(i,e),Tb(i)&&bb(i)}async function X0(i,e){const n=ke(i);n.asyncQueue.verifyOperationInProgress(),me(ga,"RemoteStore received new credentials");const s=Aa(n);n.W_.add(3),await Nu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await ld(n)}async function WI(i,e){const n=ke(i);e?(n.W_.delete(2),await ld(n)):e||(n.W_.add(2),await Nu(n),n.j_.set("Unknown"))}function zo(i){return i.J_||(i.J_=function(n,s,o){const u=ke(n);return u.M_(),new kI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:zI.bind(null,i),No:BI.bind(null,i),Lo:qI.bind(null,i),p_:HI.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),$p(i)?Gp(i):i.j_.set("Unknown")):(await i.J_.stop(),_b(i))})),i.J_}function Is(i){return i.Y_||(i.Y_=function(n,s,o){const u=ke(n);return u.M_(),new VI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:$I.bind(null,i),Lo:YI.bind(null,i),D_:KI.bind(null,i),v_:QI.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await ud(i)):(await i.Y_.stop(),i.U_.length>0&&(me(ga,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new Kp(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(i,e){if(Sr("AsyncQueue",`${e}: ${i}`),jo(i))return new de(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||be.comparator(n.key,s.key):(n,s)=>be.comparator(n.key,s.key),this.keyedMap=nu(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ao;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.Z_=new _t(be.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class ko{constructor(e,n,s,o,u,d,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new ko(e,n,Ao.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class ZI{constructor(){this.queries=J0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=ke(n),u=o.queries;o.queries=J0(),u.forEach((d,m)=>{for(const p of m.ta)p.onError(s)})})(this,new de(J.ABORTED,"Firestore shutting down"))}}function J0(){return new Sa(i=>BT(i),nd)}async function Yp(i,e){const n=ke(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new XI,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Qp(d,`Initialization of query '${To(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Xp(n)}async function Wp(i,e){const n=ke(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.ta.indexOf(e);d>=0&&(u.ta.splice(d,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function JI(i,e){const n=ke(i);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.ta)m.oa(o)&&(s=!0);d.ea=o}}s&&Xp(n)}function eC(i,e,n){const s=ke(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Xp(i){i.ia.forEach(e=>{e.next()})}var fp,eE;(eE=fp||(fp={}))._a="default",eE.Cache="cache";class Zp{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ko(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==fp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.key=e}}class Sb{constructor(e){this.key=e}}class tC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ge(),this.mutatedKeys=Ge(),this.ya=qT(e),this.wa=new Ao(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new Z0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,w)=>{const I=o.get(T),O=id(this.query,w)?w:null,M=!!I&&this.mutatedKeys.has(I.key),Q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let H=!1;I&&O?I.data.isEqual(O.data)?M!==Q&&(s.track({type:3,doc:O}),H=!0):this.va(I,O)||(s.track({type:2,doc:O}),H=!0,(p&&this.ya(O,p)>0||g&&this.ya(O,g)<0)&&(m=!0)):!I&&O?(s.track({type:0,doc:O}),H=!0):I&&!O&&(s.track({type:1,doc:I}),H=!0,(p||g)&&(m=!0)),H&&(O?(d=d.add(O),u=Q?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{wa:d,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const d=e.Da.X_();d.sort((T,w)=>function(O,M){const Q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return Q(O)-Q(M)}(T.type,w.type)||this.ya(T.doc,w.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,d.length!==0||g?{snapshot:new ko(this.query,e.wa,u,d,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Z0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ge(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new Sb(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new wb(s))}),n}Oa(e){this.fa=e.gs,this.pa=Ge();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return ko.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Jp="SyncEngine";class nC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class iC{constructor(e){this.key=e,this.Ba=!1}}class rC{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.La={},this.ka=new Sa(m=>BT(m),nd),this.qa=new Map,this.Qa=new Set,this.$a=new _t(be.comparator),this.Ua=new Map,this.Ka=new jp,this.Wa={},this.Ga=new Map,this.za=Mo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function sC(i,e,n=!0){const s=Nb(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Ab(s,e,n,!0),o}async function aC(i,e){const n=Nb(i);await Ab(n,e,!0,!1)}async function Ab(i,e,n,s){const o=await RI(i.localStore,Ui(e)),u=o.targetId,d=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await oC(i,e,u,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&yb(i.remoteStore,o),m}async function oC(i,e,n,s,o){i.Ha=(w,I,O)=>async function(Q,H,Y,se){let ne=H.view.ba(Y);ne.ls&&(ne=await $0(Q.localStore,H.query,!1).then(({documents:P})=>H.view.ba(P,ne)));const fe=se&&se.targetChanges.get(H.targetId),pe=se&&se.targetMismatches.get(H.targetId)!=null,Re=H.view.applyChanges(ne,Q.isPrimaryClient,fe,pe);return nE(Q,H.targetId,Re.Ma),Re.snapshot}(i,w,I,O);const u=await $0(i.localStore,e,!0),d=new tC(e,u.gs),m=d.ba(u.documents),p=xu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=d.applyChanges(m,i.isPrimaryClient,p);nE(i,n,g.Ma);const T=new nC(e,n,d);return i.ka.set(e,T),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function lC(i,e,n){const s=ke(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(d=>!nd(d,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await hp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Hp(s.remoteStore,o.targetId),mp(s,o.targetId)}).catch(Uo)):(mp(s,o.targetId),await hp(s.localStore,o.targetId,!0))}async function uC(i,e){const n=ke(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Hp(n.remoteStore,s.targetId))}async function cC(i,e,n){const s=yC(i);try{const o=await function(d,m){const p=ke(d),g=Ut.now(),T=m.reduce((O,M)=>O.add(M.key),Ge());let w,I;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let M=Ar(),Q=Ge();return p.ds.getEntries(O,T).next(H=>{M=H,M.forEach((Y,se)=>{se.isValidDocument()||(Q=Q.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,M)).next(H=>{w=H;const Y=[];for(const se of m){const ne=RR(se,w.get(se.key).overlayedDocument);ne!=null&&Y.push(new Ns(se.key,ne,MT(ne.value.mapValue),ii.exists(!0)))}return p.mutationQueue.addMutationBatch(O,g,Y,m)}).next(H=>{I=H;const Y=H.applyToLocalDocumentSet(w,Q);return p.documentOverlayCache.saveOverlays(O,H.batchId,Y)})}).then(()=>({batchId:I.batchId,changes:FT(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let g=d.Wa[d.currentUser.toKey()];g||(g=new _t(je)),g=g.insert(m,p),d.Wa[d.currentUser.toKey()]=g}(s,o.batchId,n),await Du(s,o.changes),await ud(s.remoteStore)}catch(o){const u=Qp(o,"Failed to persist write");n.reject(u)}}async function Rb(i,e){const n=ke(i);try{const s=await wI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Ua.get(u);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Ba=!0:o.modifiedDocuments.size>0?et(d.Ba):o.removedDocuments.size>0&&(et(d.Ba),d.Ba=!1))}),await Du(n,s,e)}catch(s){await Uo(s)}}function tE(i,e,n){const s=ke(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,d)=>{const m=d.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=ke(d);p.onlineState=m;let g=!1;p.queries.forEach((T,w)=>{for(const I of w.ta)I.sa(m)&&(g=!0)}),g&&Xp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hC(i,e,n){const s=ke(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let d=new _t(be.comparator);d=d.insert(u,un.newNoDocument(u,Oe.min()));const m=Ge().add(u),p=new ad(Oe.min(),new Map,new _t(je),d,m);await Rb(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),eg(s)}else await hp(s.localStore,e,!1).then(()=>mp(s,e,n)).catch(Uo)}async function dC(i,e){const n=ke(i),s=e.batch.batchId;try{const o=await bI(n.localStore,e);Cb(n,s,null),Ib(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Du(n,o)}catch(o){await Uo(o)}}async function fC(i,e,n){const s=ke(i);try{const o=await function(d,m){const p=ke(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let T;return p.mutationQueue.lookupMutationBatch(g,m).next(w=>(et(w!==null),T=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,T,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,T)).next(()=>p.localDocuments.getDocuments(g,T))})}(s.localStore,e);Cb(s,e,n),Ib(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Du(s,o)}catch(o){await Uo(o)}}function Ib(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Cb(i,e,n){const s=ke(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function mp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||xb(i,s)})}function xb(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(Hp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),eg(i))}function nE(i,e,n){for(const s of n)s instanceof wb?(i.Ka.addReference(s.key,e),mC(i,s)):s instanceof Sb?(me(Jp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||xb(i,s.key)):Ne()}function mC(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(me(Jp,"New document in limbo: "+n),i.Qa.add(s),eg(i))}function eg(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new be(ft.fromString(e)),s=i.za.next();i.Ua.set(s,new iC(n)),i.$a=i.$a.insert(n,s),yb(i.remoteStore,new gs(Ui(td(n.path)),s,"TargetPurposeLimboResolution",Zh.ae))}}async function Du(i,e,n){const s=ke(i),o=[],u=[],d=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{d.push(s.Ha(p,e,n).then(g=>{var T;if((g||n)&&s.isPrimaryClient){const w=g?!g.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(g){o.push(g);const w=Bp.Yi(p.targetId,g);u.push(w)}}))}),await Promise.all(d),s.La.p_(o),await async function(p,g){const T=ke(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>te.forEach(g,I=>te.forEach(I.Hi,O=>T.persistence.referenceDelegate.addReference(w,I.targetId,O)).next(()=>te.forEach(I.Ji,O=>T.persistence.referenceDelegate.removeReference(w,I.targetId,O)))))}catch(w){if(!jo(w))throw w;me(qp,"Failed to update sequence numbers: "+w)}for(const w of g){const I=w.targetId;if(!w.fromCache){const O=T.Ts.get(I),M=O.snapshotVersion,Q=O.withLastLimboFreeSnapshotVersion(M);T.Ts=T.Ts.insert(I,Q)}}}(s.localStore,u))}async function pC(i,e){const n=ke(i);if(!n.currentUser.isEqual(e)){me(Jp,"User change. New user:",e.toKey());const s=await fb(n.localStore,e);n.currentUser=e,function(u,d){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new de(J.CANCELLED,d))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Du(n,s.Rs)}}function gC(i,e){const n=ke(i),s=n.Ua.get(e);if(s&&s.Ba)return Ge().add(s.key);{let o=Ge();const u=n.qa.get(e);if(!u)return o;for(const d of u){const m=n.ka.get(d);o=o.unionWith(m.view.Sa)}return o}}function Nb(i){const e=ke(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hC.bind(null,e),e.La.p_=JI.bind(null,e.eventManager),e.La.Ja=eC.bind(null,e.eventManager),e}function yC(i){const e=ke(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fC.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return TI(this.persistence,new vI,e.initialUser,this.serializer)}Xa(e){return new db(zp.ri,this.serializer)}Za(e){return new CI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class vC extends Vh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){et(this.persistence.referenceDelegate instanceof Mh);const s=this.persistence.referenceDelegate.garbageCollector;return new iI(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new db(s=>Mh.ri(s,n),this.serializer)}}class pp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>tE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pC.bind(null,this.syncEngine),await WI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZI}()}createDatastore(e){const n=od(e.databaseInfo.databaseId),s=function(u){return new MI(u)}(e.databaseInfo);return function(u,d,m,p){return new LI(u,d,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,m){return new jI(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>tE(this.syncEngine,n,0),function(){return Y0.D()?new Y0:new xI}())}createSyncEngine(e,n){return function(o,u,d,m,p,g,T){const w=new rC(o,u,d,m,p,g);return T&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=ke(o);me(ga,"RemoteStore shutting down."),u.W_.add(5),await Nu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pp.provider={build:()=>new pp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class _C{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=wT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{me(Cs,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(me(Cs,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Pm(i,e){i.asyncQueue.verifyOperationInProgress(),me(Cs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await fb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function iE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await EC(i);me(Cs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>X0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>X0(e.remoteStore,o)),i._onlineComponents=e}async function EC(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(Cs,"Using user provided OfflineComponentProvider");try{await Pm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;xo("Error using user provided cache. Falling back to memory cache: "+n),await Pm(i,new Vh)}}else me(Cs,"Using default OfflineComponentProvider"),await Pm(i,new vC(void 0));return i._offlineComponents}async function Db(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(Cs,"Using user provided OnlineComponentProvider"),await iE(i,i._uninitializedComponentsProvider._online)):(me(Cs,"Using default OnlineComponentProvider"),await iE(i,new pp))),i._onlineComponents}function TC(i){return Db(i).then(e=>e.syncEngine)}async function Ph(i){const e=await Db(i),n=e.eventManager;return n.onListen=sC.bind(null,e.syncEngine),n.onUnlisten=lC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=aC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uC.bind(null,e.syncEngine),n}function bC(i,e,n={}){const s=new Er;return i.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const T=new tg({next:I=>{T.su(),d.enqueueAndForget(()=>Wp(u,w));const O=I.docs.has(m);!O&&I.fromCache?g.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&I.fromCache&&p&&p.source==="server"?g.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Zp(td(m.path),T,{includeMetadataChanges:!0,Ta:!0});return Yp(u,w)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}function wC(i,e,n={}){const s=new Er;return i.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,g){const T=new tg({next:I=>{T.su(),d.enqueueAndForget(()=>Wp(u,w)),I.fromCache&&p.source==="server"?g.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),w=new Zp(m,T,{includeMetadataChanges:!0,Ta:!0});return Yp(u,w)}(await Ph(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(i,e,n){if(!n)throw new de(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function SC(i,e,n,s){if(e===!0&&s===!0)throw new de(J.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function sE(i){if(!be.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function aE(i){if(be.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function cd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ne()}function vn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cd(i);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="firestore.googleapis.com",oE=!0;class lE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mb,this.ssl=oE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:oE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tI)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ob((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ou{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new M2;switch(s.type){case"firstParty":return new L2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=rE.get(n);s&&(me("ComponentProvider","Removing Datastore"),rE.delete(n),s.terminate())}(this),Promise.resolve()}}function AC(i,e,n,s={}){var o;const u=(i=vn(i,Ou))._getSettings(),d=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==Mb&&u.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!bs(p,d)&&(i._setSettings(p),s.mockUserToken)){let g,T;if(typeof s.mockUserToken=="string")g=s.mockUserToken,T=ln.MOCK_USER;else{g=s1(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new ln(w)}i._authCredentials=new k2(new TT(g,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class hn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class Ts extends xr{constructor(e,n,s){super(e,n,td(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new be(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function cn(i,e,...n){if(i=wt(i),ng("collection","path",e),i instanceof Ou){const s=ft.fromString(e,...n);return aE(s),new Ts(i,null,s)}{if(!(i instanceof hn||i instanceof Ts))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return aE(s),new Ts(i.firestore,null,s)}}function Lm(i,e){if(i=vn(i,Ou),ng("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xr(i,null,function(s){return new wa(ft.emptyPath(),s)}(e))}function Lt(i,e,...n){if(i=wt(i),arguments.length===1&&(e=wT.newId()),ng("doc","path",e),i instanceof Ou){const s=ft.fromString(e,...n);return sE(s),new hn(i,null,new be(s))}{if(!(i instanceof hn||i instanceof Ts))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return sE(s),new hn(i.firestore,i instanceof Ts?i.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="AsyncQueue";class cE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new pb(this,"async_queue_retry"),this.Su=()=>{const s=Vm();s&&me(uE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Er;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!jo(e))throw e;me(uE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw Sr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=Kp.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function hE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class Rr extends Ou{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new cE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cE(e),this._firestoreClient=void 0,await e}}}function RC(i,e){const n=typeof i=="object"?i:Ip(),s=typeof i=="string"?i:xh,o=ba(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=i1("firestore");u&&AC(o,...u)}return o}function hd(i){if(i._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||IC(i),i._firestoreClient}function IC(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,T){return new Z2(m,p,g,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,Ob(T.experimentalLongPollingOptions),T.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new _C(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(nn.fromBase64String(e))}catch(n){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vo(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=/^__.*__$/;class xC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cu(e,this.data,n,this.fieldTransforms)}}class kb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Vb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class sg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Lh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Vb(this.Lu)&&CC.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class NC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||od(e)}ju(e,n,s,o=!1){return new sg({Lu:e,methodName:n,zu:s,path:tn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(i){const e=i._freezeSettings(),n=od(i._databaseId);return new NC(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Pb(i,e,n,s,o,u={}){const d=i.ju(u.merge||u.mergeFields?2:0,e,n,o);lg("Data must be an object, but it was:",d,s);const m=Lb(s,d);let p,g;if(u.merge)p=new jn(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const w of u.mergeFields){const I=gp(e,w,n);if(!d.contains(I))throw new de(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);jb(T,I)||T.push(I)}p=new jn(T),g=d.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=d.fieldTransforms;return new xC(new Rn(m),p,g)}class md extends Mu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class ag extends Mu{_toFieldTransform(e){return new ZT(e.path,new Eu)}isEqual(e){return e instanceof ag}}class og extends Mu{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new wu(e.serializer,KT(e.serializer,this.Ju));return new ZT(e.path,n)}isEqual(e){return e instanceof og&&this.Ju===e.Ju}}function DC(i,e,n,s){const o=i.ju(1,e,n);lg("Data must be an object, but it was:",o,s);const u=[],d=Rn.empty();xs(s,(p,g)=>{const T=ug(e,p,n);g=wt(g);const w=o.Uu(T);if(g instanceof md)u.push(T);else{const I=ku(g,w);I!=null&&(u.push(T),d.set(T,I))}});const m=new jn(u);return new kb(d,m,o.fieldTransforms)}function OC(i,e,n,s,o,u){const d=i.ju(1,e,n),m=[gp(e,s,n)],p=[o];if(u.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(gp(e,u[I])),p.push(u[I+1]);const g=[],T=Rn.empty();for(let I=m.length-1;I>=0;--I)if(!jb(g,m[I])){const O=m[I];let M=p[I];M=wt(M);const Q=d.Uu(O);if(M instanceof md)g.push(O);else{const H=ku(M,Q);H!=null&&(g.push(O),T.set(O,H))}}const w=new jn(g);return new kb(T,w,d.fieldTransforms)}function MC(i,e,n,s=!1){return ku(n,i.ju(s?4:3,e))}function ku(i,e){if(Ub(i=wt(i)))return lg("Unsupported field value:",e,i),Lb(i,e);if(i instanceof Mu)return function(s,o){if(!Vb(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let p=ku(m,o.Ku(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return KT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ut.fromDate(s);return{timestampValue:Oh(o.serializer,u)}}if(s instanceof Ut){const u=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Oh(o.serializer,u)}}if(s instanceof ig)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Vo)return{bytesValue:rb(o.serializer,s._byteString)};if(s instanceof hn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.Wu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Up(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof rg)return function(d,m){return{mapValue:{fields:{[DT]:{stringValue:OT},[Nh]:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return kp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${cd(s)}`)}(i,e)}function Lb(i,e){const n={};return AT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(i,(s,o)=>{const u=ku(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Ub(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ut||i instanceof ig||i instanceof Vo||i instanceof hn||i instanceof Mu||i instanceof rg)}function lg(i,e,n){if(!Ub(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=cd(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function gp(i,e,n){if((e=wt(e))instanceof dd)return e._internalPath;if(typeof e=="string")return ug(i,e);throw Lh("Field path arguments must be of type string or ",i,!1,void 0,n)}const kC=new RegExp("[~\\*/\\[\\]]");function ug(i,e,n){if(e.search(kC)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new dd(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Lh(i,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new de(J.INVALID_ARGUMENT,m+i+p)}function jb(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VC extends zb{data(){return super.data()}}function pd(i,e){return typeof e=="string"?ug(i,e):e instanceof dd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class qb extends cg{}function ru(i,e,...n){let s=[];e instanceof cg&&s.push(e),s=s.concat(n),function(u){const d=u.filter(p=>p instanceof hg).length,m=u.filter(p=>p instanceof gd).length;if(d>1||d>0&&m>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class gd extends qb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new gd(e,n,s)}_apply(e){const n=this._parse(e);return Fb(e._query,n),new xr(e.firestore,e.converter,sp(e._query,n))}_parse(e){const n=fd(e.firestore);return function(u,d,m,p,g,T,w){let I;if(g.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){fE(w,T);const M=[];for(const Q of w)M.push(dE(p,u,Q));I={arrayValue:{values:M}}}else I=dE(p,u,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||fE(w,T),I=MC(m,d,w,T==="in"||T==="not-in");return Ot.create(g,T,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hh(i,e,n){const s=e,o=pd("where",i);return gd._create(o,s,n)}class hg extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:di.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)Fb(d,p),d=sp(d,p)}(e._query,n),new xr(e.firestore,e.converter,sp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends qb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=function(o,u,d){if(o.startAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(u,d)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new wa(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function Hb(i,e="asc"){const n=e,s=pd("orderBy",i);return dg._create(s,n)}function dE(i,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&n.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ft.fromString(n));if(!be.isDocumentKey(s))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return I0(i,new be(s))}if(n instanceof hn)return I0(i,n._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(n)}.`)}function fE(i,e){if(!Array.isArray(i)||i.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fb(i,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PC{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return xs(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Nh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>It(d.doubleValue));return new rg(u)}convertGeoPoint(e){return new ig(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ed(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ft.fromString(e);et(cb(s));const o=new yu(s.get(1),s.get(3)),u=new be(s.popFirst(5));return o.isEqual(n)||Sr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $b extends zb{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(pd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class _h extends $b{data(e={}){return super.data(e)}}class Kb{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new su(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new _h(this._firestore,this._userDataWriter,s.key,s,new su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new _h(o._firestore,o._userDataWriter,m.doc.key,m.doc,new su(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,T=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:LC(m.type),doc:p,oldIndex:g,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(i){i=vn(i,hn);const e=vn(i.firestore,Rr);return bC(hd(e),i._key).then(n=>Qb(e,i,n))}class fg extends PC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}}function An(i){i=vn(i,xr);const e=vn(i.firestore,Rr),n=hd(e),s=new fg(e);return Bb(i._query),wC(n,i._query).then(o=>new Kb(e,s,i,o))}function Um(i,e,n){i=vn(i,hn);const s=vn(i.firestore,Rr),o=Gb(i.converter,e,n);return yd(s,[Pb(fd(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ii.none())])}function ma(i,e,n,...s){i=vn(i,hn);const o=vn(i.firestore,Rr),u=fd(o);let d;return d=typeof(e=wt(e))=="string"||e instanceof dd?OC(u,"updateDoc",i._key,e,n,s):DC(u,"updateDoc",i._key,e),yd(o,[d.toMutation(i._key,ii.exists(!0))])}function hu(i){return yd(vn(i.firestore,Rr),[new Vp(i._key,ii.none())])}function Uh(i,e){const n=vn(i.firestore,Rr),s=Lt(i),o=Gb(i.converter,e);return yd(n,[Pb(fd(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ii.exists(!1))]).then(()=>s)}function UC(i,...e){var n,s,o;i=wt(i);let u={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||hE(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(hE(e[d])){const w=e[d];e[d]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[d+1]=(s=w.error)===null||s===void 0?void 0:s.bind(w),e[d+2]=(o=w.complete)===null||o===void 0?void 0:o.bind(w)}let p,g,T;if(i instanceof hn)g=vn(i.firestore,Rr),T=td(i._key.path),p={next:w=>{e[d]&&e[d](Qb(g,i,w))},error:e[d+1],complete:e[d+2]};else{const w=vn(i,xr);g=vn(w.firestore,Rr),T=w._query;const I=new fg(g);p={next:O=>{e[d]&&e[d](new Kb(g,I,w,O))},error:e[d+1],complete:e[d+2]},Bb(i._query)}return function(I,O,M,Q){const H=new tg(Q),Y=new Zp(O,H,M);return I.asyncQueue.enqueueAndForget(async()=>Yp(await Ph(I),Y)),()=>{H.su(),I.asyncQueue.enqueueAndForget(async()=>Wp(await Ph(I),Y))}}(hd(g),T,m,p)}function yd(i,e){return function(s,o){const u=new Er;return s.asyncQueue.enqueueAndForget(async()=>cC(await TC(s),o,u)),u.promise}(hd(i),e)}function Qb(i,e,n){const s=n.docs.get(e._key),o=new fg(i);return new $b(i,o,e._key,s,new su(n.hasPendingWrites,n.fromCache),e.converter)}function yp(){return new ag("serverTimestamp")}function vo(i){return new og("increment",i)}(function(e,n=!0){(function(o){Lo=o})(Po),qi(new hi("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Rr(new V2(s.getProvider("auth-internal")),new U2(d,s.getProvider("app-check-internal")),function(g,T){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(g.options.projectId,T)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ni(p0,g0,e),ni(p0,g0,"esm2017")})();const Yb="@firebase/installations",mg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=1e4,Xb=`w:${mg}`,Zb="FIS_v2",jC="https://firebaseinstallations.googleapis.com/v1",zC=60*60*1e3,BC="installations",qC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ya=new Ta(BC,qC,HC);function Jb(i){return i instanceof pi&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew({projectId:i}){return`${jC}/projects/${i}/installations`}function tw(i){return{token:i.token,requestStatus:2,expiresIn:GC(i.expiresIn),creationTime:Date.now()}}async function nw(i,e){const s=(await e.json()).error;return ya.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function iw({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function FC(i,{refreshToken:e}){const n=iw(i);return n.append("Authorization",$C(e)),n}async function rw(i){const e=await i();return e.status>=500&&e.status<600?i():e}function GC(i){return Number(i.replace("s","000"))}function $C(i){return`${Zb} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=ew(i),o=iw(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={fid:n,authVersion:Zb,appId:i.appId,sdkVersion:Xb},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await rw(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:tw(g.authToken)}}else throw await nw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^[cdef][\w-]{21}$/,vp="";function WC(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=XC(i);return YC.test(n)?n:vp}catch{return vp}}function XC(i){return QC(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Map;function ow(i,e){const n=vd(i);lw(n,e),ZC(n,e)}function lw(i,e){const n=aw.get(i);if(n)for(const s of n)s(e)}function ZC(i,e){const n=JC();n&&n.postMessage({key:i,fid:e}),ex()}let fa=null;function JC(){return!fa&&"BroadcastChannel"in self&&(fa=new BroadcastChannel("[Firebase] FID Change"),fa.onmessage=i=>{lw(i.data.key,i.data.fid)}),fa}function ex(){aw.size===0&&fa&&(fa.close(),fa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="firebase-installations-database",nx=1,va="firebase-installations-store";let jm=null;function pg(){return jm||(jm=hT(tx,nx,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(va)}}})),jm}async function jh(i,e){const n=vd(i),o=(await pg()).transaction(va,"readwrite"),u=o.objectStore(va),d=await u.get(n);return await u.put(e,n),await o.done,(!d||d.fid!==e.fid)&&ow(i,e.fid),e}async function uw(i){const e=vd(i),s=(await pg()).transaction(va,"readwrite");await s.objectStore(va).delete(e),await s.done}async function _d(i,e){const n=vd(i),o=(await pg()).transaction(va,"readwrite"),u=o.objectStore(va),d=await u.get(n),m=e(d);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!d||d.fid!==m.fid)&&ow(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(i){let e;const n=await _d(i.appConfig,s=>{const o=ix(s),u=rx(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===vp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ix(i){const e=i||{fid:WC(),registrationStatus:0};return cw(e)}function rx(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ya.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=sx(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ax(i)}:{installationEntry:e}}async function sx(i,e){try{const n=await KC(i,e);return jh(i.appConfig,n)}catch(n){throw Jb(n)&&n.customData.serverCode===409?await uw(i.appConfig):await jh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ax(i){let e=await mE(i.appConfig);for(;e.registrationStatus===1;)await sw(100),e=await mE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await gg(i);return s||n}return e}function mE(i){return _d(i,e=>{if(!e)throw ya.create("installation-not-found");return cw(e)})}function cw(i){return ox(i)?{fid:i.fid,registrationStatus:0}:i}function ox(i){return i.registrationStatus===1&&i.registrationTime+Wb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx({appConfig:i,heartbeatServiceProvider:e},n){const s=ux(i,n),o=FC(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const d={installation:{sdkVersion:Xb,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},p=await rw(()=>fetch(s,m));if(p.ok){const g=await p.json();return tw(g)}else throw await nw("Generate Auth Token",p)}function ux(i,{fid:e}){return`${ew(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(i,e=!1){let n;const s=await _d(i.appConfig,u=>{if(!hw(u))throw ya.create("not-registered");const d=u.authToken;if(!e&&dx(d))return u;if(d.requestStatus===1)return n=cx(i,e),u;{if(!navigator.onLine)throw ya.create("app-offline");const m=mx(u);return n=hx(i,m),m}});return n?await n:s.authToken}async function cx(i,e){let n=await pE(i.appConfig);for(;n.authToken.requestStatus===1;)await sw(100),n=await pE(i.appConfig);const s=n.authToken;return s.requestStatus===0?yg(i,e):s}function pE(i){return _d(i,e=>{if(!hw(e))throw ya.create("not-registered");const n=e.authToken;return px(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function hx(i,e){try{const n=await lx(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await jh(i.appConfig,s),n}catch(n){if(Jb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await uw(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await jh(i.appConfig,s)}throw n}}function hw(i){return i!==void 0&&i.registrationStatus===2}function dx(i){return i.requestStatus===2&&!fx(i)}function fx(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+zC}function mx(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function px(i){return i.requestStatus===1&&i.requestTime+Wb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(i){const e=i,{installationEntry:n,registrationPromise:s}=await gg(e);return s?s.catch(console.error):yg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(i,e=!1){const n=i;return await vx(n),(await yg(n,e)).token}async function vx(i){const{registrationPromise:e}=await gg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(i){if(!i||!i.options)throw zm("App Configuration");if(!i.name)throw zm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw zm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function zm(i){return ya.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="installations",Ex="installations-internal",Tx=i=>{const e=i.getProvider("app").getImmediate(),n=_x(e),s=ba(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},bx=i=>{const e=i.getProvider("app").getImmediate(),n=ba(e,dw).getImmediate();return{getId:()=>gx(n),getToken:o=>yx(n,o)}};function wx(){qi(new hi(dw,Tx,"PUBLIC")),qi(new hi(Ex,bx,"PRIVATE"))}wx();ni(Yb,mg);ni(Yb,mg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="analytics",Sx="firebase_id",Ax="origin",Rx=60*1e3,Ix="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new Xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zn=new Ta("analytics","Analytics",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(i){if(!i.startsWith(vg)){const e=zn.create("invalid-gtag-resource",{gtagURL:i});return In.warn(e.message),""}return i}function fw(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function Nx(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function Dx(i,e){const n=Nx("firebase-js-sdk-policy",{createScriptURL:xx}),s=document.createElement("script"),o=`${vg}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function Ox(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function Mx(i,e,n,s,o,u){const d=s[o];try{if(d)await e[d];else{const p=(await fw(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){In.error(m)}i("config",o,u)}async function kx(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await fw(n);for(const p of d){const g=m.find(w=>w.measurementId===p),T=g&&e[g.appId];if(T)u.push(T);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){In.error(u)}}function Vx(i,e,n,s){async function o(u,...d){try{if(u==="event"){const[m,p]=d;await kx(i,e,n,m,p)}else if(u==="config"){const[m,p]=d;await Mx(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=d;i("consent",m,p)}else if(u==="get"){const[m,p,g]=d;i("get",m,p,g)}else if(u==="set"){const[m]=d;i("set",m)}else i(u,...d)}catch(m){In.error(m)}}return o}function Px(i,e,n,s,o){let u=function(...d){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=Vx(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function Lx(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(vg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=30,jx=1e3;class zx{constructor(e={},n=jx){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const mw=new zx;function Bx(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function qx(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:Bx(s)},u=Ix.replace("{app-id}",n),d=await fetch(u,o);if(d.status!==200&&d.status!==304){let m="";try{const p=await d.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw zn.create("config-fetch-failed",{httpStatus:d.status,responseMessage:m})}return d.json()}async function Hx(i,e=mw,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw zn.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw zn.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new $x;return setTimeout(async()=>{m.abort()},Rx),pw({appId:s,apiKey:o,measurementId:u},d,m,e)}async function pw(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=mw){var u;const{appId:d,measurementId:m}=i;try{await Fx(s,e)}catch(p){if(m)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:d,measurementId:m};throw p}try{const p=await qx(i);return o.deleteThrottleMetadata(d),p}catch(p){const g=p;if(!Gx(g)){if(o.deleteThrottleMetadata(d),m)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:d,measurementId:m};throw p}const T=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?s0(n,o.intervalMillis,Ux):s0(n,o.intervalMillis),w={throttleEndTimeMillis:Date.now()+T,backoffCount:n+1};return o.setThrottleMetadata(d,w),In.debug(`Calling attemptFetch again in ${T} millis`),pw(i,w,s,o)}}function Fx(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Gx(i){if(!(i instanceof pi)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class $x{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Kx(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,d=Object.assign(Object.assign({},s),{send_to:u});i("event",n,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(){if(oT())try{await lT()}catch(i){return In.warn(zn.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return In.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Yx(i,e,n,s,o,u,d){var m;const p=Hx(i);p.then(O=>{n[O.measurementId]=O.appId,i.options.measurementId&&O.measurementId!==i.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>In.error(O)),e.push(p);const g=Qx().then(O=>{if(O)return s.getId()}),[T,w]=await Promise.all([p,g]);Lx(u)||Dx(u,T.measurementId),o("js",new Date);const I=(m=d==null?void 0:d.config)!==null&&m!==void 0?m:{};return I[Ax]="firebase",I.update=!0,w!=null&&(I[Sx]=w),o("config",T.measurementId,I),T.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.app=e}_delete(){return delete du[this.app.options.appId],Promise.resolve()}}let du={},gE=[];const yE={};let Bm="dataLayer",Xx="gtag",vE,gw,_E=!1;function Zx(){const i=[];if(aT()&&i.push("This is a browser extension environment."),d1()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=zn.create("invalid-analytics-context",{errorInfo:e});In.warn(n.message)}}function Jx(i,e,n){Zx();const s=i.options.appId;if(!s)throw zn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zn.create("no-api-key");if(du[s]!=null)throw zn.create("already-exists",{id:s});if(!_E){Ox(Bm);const{wrappedGtag:u,gtagCore:d}=Px(du,gE,yE,Bm,Xx);gw=u,vE=d,_E=!0}return du[s]=Yx(i,gE,yE,e,vE,Bm,n),new Wx(i)}function eN(i=Ip()){i=wt(i);const e=ba(i,zh);return e.isInitialized()?e.getImmediate():tN(i)}function tN(i,e={}){const n=ba(i,zh);if(n.isInitialized()){const o=n.getImmediate();if(bs(e,n.getOptions()))return o;throw zn.create("already-initialized")}return n.initialize({options:e})}function nN(i,e,n,s){i=wt(i),Kx(gw,du[i.app.options.appId],e,n,s).catch(o=>In.error(o))}const EE="@firebase/analytics",TE="0.10.12";function iN(){qi(new hi(zh,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return Jx(s,o,n)},"PUBLIC")),qi(new hi("analytics-internal",i,"PRIVATE")),ni(EE,TE),ni(EE,TE,"esm2017");function i(e){try{const n=e.getProvider(zh).getImmediate();return{logEvent:(s,o,u)=>nN(n,s,o,u)}}catch(n){throw zn.create("interop-component-reg-failed",{reason:n})}}}iN();const rN={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},_g=dT(rN),Be=RC(_g);eN(_g);var Wl={},bE;function sN(){if(bE)return Wl;bE=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.parse=d,Wl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function d(I,O){const M=new u,Q=I.length;if(Q<2)return M;const H=(O==null?void 0:O.decode)||T;let Y=0;do{const se=I.indexOf("=",Y);if(se===-1)break;const ne=I.indexOf(";",Y),fe=ne===-1?Q:ne;if(se>fe){Y=I.lastIndexOf(";",se-1)+1;continue}const pe=m(I,Y,se),Re=p(I,se,pe),P=I.slice(pe,Re);if(M[P]===void 0){let S=m(I,se+1,fe),R=p(I,fe,S);const N=H(I.slice(S,R));M[P]=N}Y=fe+1}while(Y<Q);return M}function m(I,O,M){do{const Q=I.charCodeAt(O);if(Q!==32&&Q!==9)return O}while(++O<M);return M}function p(I,O,M){for(;O>M;){const Q=I.charCodeAt(--O);if(Q!==32&&Q!==9)return O+1}return M}function g(I,O,M){const Q=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(I))throw new TypeError(`argument name is invalid: ${I}`);const H=Q(O);if(!e.test(H))throw new TypeError(`argument val is invalid: ${O}`);let Y=I+"="+H;if(!M)return Y;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);Y+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);Y+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);Y+="; Path="+M.path}if(M.expires){if(!w(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);Y+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(Y+="; HttpOnly"),M.secure&&(Y+="; Secure"),M.partitioned&&(Y+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return Y}function T(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function w(I){return o.call(I)==="[object Date]"}return Wl}sN();var wE="popstate";function aN(i={}){function e(s,o){let{pathname:u,search:d,hash:m}=s.location;return _p("",{pathname:u,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Su(o)}return lN(e,n,null,i)}function gt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function fi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oN(){return Math.random().toString(36).substring(2,10)}function SE(i,e){return{usr:i.state,key:i.key,idx:e}}function _p(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:n,key:e&&e.key||s||oN()}}function Su({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Bo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function lN(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,d=o.history,m="POP",p=null,g=T();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function T(){return(d.state||{idx:null}).idx}function w(){m="POP";let H=T(),Y=H==null?null:H-g;g=H,p&&p({action:m,location:Q.location,delta:Y})}function I(H,Y){m="PUSH";let se=_p(Q.location,H,Y);g=T()+1;let ne=SE(se,g),fe=Q.createHref(se);try{d.pushState(ne,"",fe)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;o.location.assign(fe)}u&&p&&p({action:m,location:Q.location,delta:1})}function O(H,Y){m="REPLACE";let se=_p(Q.location,H,Y);g=T();let ne=SE(se,g),fe=Q.createHref(se);d.replaceState(ne,"",fe),u&&p&&p({action:m,location:Q.location,delta:0})}function M(H){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof H=="string"?H:Su(H);return se=se.replace(/ $/,"%20"),gt(Y,`No window.location.(origin|href) available to create URL for href: ${se}`),new URL(se,Y)}let Q={get action(){return m},get location(){return i(o,d)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(wE,w),p=H,()=>{o.removeEventListener(wE,w),p=null}},createHref(H){return e(o,H)},createURL:M,encodeLocation(H){let Y=M(H);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:I,replace:O,go(H){return d.go(H)}};return Q}function yw(i,e,n="/"){return uN(i,e,n,!1)}function uN(i,e,n,s){let o=typeof e=="string"?Bo(e):e,u=Ir(o.pathname||"/",n);if(u==null)return null;let d=vw(i);cN(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=TN(u);m=_N(d[p],g,s)}return m}function vw(i,e=[],n=[],s=""){let o=(u,d,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=Tr([s,p.relativePath]),T=n.concat(p);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),vw(u.children,e,T,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:yN(g,u.index),routesMeta:T})};return i.forEach((u,d)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,d);else for(let p of _w(u.path))o(u,d,p)}),e}function _w(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let d=_w(s.join("/")),m=[];return m.push(...d.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...d),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function cN(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:vN(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var hN=/^:[\w-]+$/,dN=3,fN=2,mN=1,pN=10,gN=-2,AE=i=>i==="*";function yN(i,e){let n=i.split("/"),s=n.length;return n.some(AE)&&(s+=gN),e&&(s+=fN),n.filter(o=>!AE(o)).reduce((o,u)=>o+(hN.test(u)?dN:u===""?mN:pN),s)}function vN(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function _N(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",d=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,T=u==="/"?e:e.slice(u.length)||"/",w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},T),I=p.route;if(!w&&g&&n&&!s[s.length-1].route.index&&(w=Bh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},T)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:Tr([u,w.pathname]),pathnameBase:AN(Tr([u,w.pathnameBase])),route:I}),w.pathnameBase!=="/"&&(u=Tr([u,w.pathnameBase]))}return d}function Bh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=EN(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:T,isOptional:w},I)=>{if(T==="*"){let M=m[I]||"";d=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const O=m[I];return w&&!O?g[T]=void 0:g[T]=(O||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:i}}function EN(i,e=!1,n=!0){fi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function TN(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ir(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function bN(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Bo(i):i;return{pathname:n?n.startsWith("/")?n:wN(n,e):e,search:RN(s),hash:IN(o)}}function wN(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function qm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SN(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eg(i){let e=SN(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Tg(i,e,n,s=!1){let o;typeof i=="string"?o=Bo(i):(o={...i},gt(!o.pathname||!o.pathname.includes("?"),qm("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),qm("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),qm("#","search","hash",o)));let u=i===""||o.pathname==="",d=u?"/":o.pathname,m;if(d==null)m=n;else{let w=e.length-1;if(!s&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),w-=1;o.pathname=I.join("/")}m=w>=0?e[w]:"/"}let p=bN(o,m),g=d&&d!=="/"&&d.endsWith("/"),T=(u||d===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||T)&&(p.pathname+="/"),p}var Tr=i=>i.join("/").replace(/\/\/+/g,"/"),AN=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),RN=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,IN=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function CN(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Ew=["POST","PUT","PATCH","DELETE"];new Set(Ew);var xN=["GET",...Ew];new Set(xN);var qo=L.createContext(null);qo.displayName="DataRouter";var Ed=L.createContext(null);Ed.displayName="DataRouterState";var Tw=L.createContext({isTransitioning:!1});Tw.displayName="ViewTransition";var NN=L.createContext(new Map);NN.displayName="Fetchers";var DN=L.createContext(null);DN.displayName="Await";var gi=L.createContext(null);gi.displayName="Navigation";var Vu=L.createContext(null);Vu.displayName="Location";var Fi=L.createContext({outlet:null,matches:[],isDataRoute:!1});Fi.displayName="Route";var bg=L.createContext(null);bg.displayName="RouteError";function ON(i,{relative:e}={}){gt(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=L.useContext(gi),{hash:o,pathname:u,search:d}=Pu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Tr([n,u])),s.createHref({pathname:m,search:d,hash:o})}function Ho(){return L.useContext(Vu)!=null}function Ds(){return gt(Ho(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Vu).location}var bw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ww(i){L.useContext(gi).static||L.useLayoutEffect(i)}function Fo(){let{isDataRoute:i}=L.useContext(Fi);return i?GN():MN()}function MN(){gt(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let i=L.useContext(qo),{basename:e,navigator:n}=L.useContext(gi),{matches:s}=L.useContext(Fi),{pathname:o}=Ds(),u=JSON.stringify(Eg(s)),d=L.useRef(!1);return ww(()=>{d.current=!0}),L.useCallback((p,g={})=>{if(fi(d.current,bw),!d.current)return;if(typeof p=="number"){n.go(p);return}let T=Tg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Tr([e,T.pathname])),(g.replace?n.replace:n.push)(T,g.state,g)},[e,n,u,o,i])}L.createContext(null);function Pu(i,{relative:e}={}){let{matches:n}=L.useContext(Fi),{pathname:s}=Ds(),o=JSON.stringify(Eg(n));return L.useMemo(()=>Tg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function kN(i,e){return Sw(i,e)}function Sw(i,e,n,s){var se;gt(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=L.useContext(gi),{matches:d}=L.useContext(Fi),m=d[d.length-1],p=m?m.params:{},g=m?m.pathname:"/",T=m?m.pathnameBase:"/",w=m&&m.route;{let ne=w&&w.path||"";Aw(g,!w||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let I=Ds(),O;if(e){let ne=typeof e=="string"?Bo(e):e;gt(T==="/"||((se=ne.pathname)==null?void 0:se.startsWith(T)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),O=ne}else O=I;let M=O.pathname||"/",Q=M;if(T!=="/"){let ne=T.replace(/^\//,"").split("/");Q="/"+M.replace(/^\//,"").split("/").slice(ne.length).join("/")}let H=!u&&n&&n.matches&&n.matches.length>0?n.matches:yw(i,{pathname:Q});fi(w||H!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),fi(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=jN(H&&H.map(ne=>Object.assign({},ne,{params:Object.assign({},p,ne.params),pathname:Tr([T,o.encodeLocation?o.encodeLocation(ne.pathname).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?T:Tr([T,o.encodeLocation?o.encodeLocation(ne.pathnameBase).pathname:ne.pathnameBase])})),d,n,s);return e&&Y?L.createElement(Vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},Y):Y}function VN(){let i=FN(),e=CN(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:o},n):null,d)}var PN=L.createElement(VN,null),LN=class extends L.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?L.createElement(Fi.Provider,{value:this.props.routeContext},L.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UN({routeContext:i,match:e,children:n}){let s=L.useContext(qo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Fi.Provider,{value:i},n)}function jN(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);gt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:T,errors:w}=n,I=g.route.loader&&!T.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||I){d=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,T)=>{let w,I=!1,O=null,M=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,O=g.route.errorElement||PN,d&&(m<0&&T===0?(Aw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,M=null):m===T&&(I=!0,M=g.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,T+1)),H=()=>{let Y;return w?Y=O:I?Y=M:g.route.Component?Y=L.createElement(g.route.Component,null):g.route.element?Y=g.route.element:Y=p,L.createElement(UN,{match:g,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:Y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||T===0)?L.createElement(LN,{location:n.location,revalidation:n.revalidation,component:O,error:w,children:H(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):H()},null)}function wg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zN(i){let e=L.useContext(qo);return gt(e,wg(i)),e}function BN(i){let e=L.useContext(Ed);return gt(e,wg(i)),e}function qN(i){let e=L.useContext(Fi);return gt(e,wg(i)),e}function Sg(i){let e=qN(i),n=e.matches[e.matches.length-1];return gt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function HN(){return Sg("useRouteId")}function FN(){var s;let i=L.useContext(bg),e=BN("useRouteError"),n=Sg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function GN(){let{router:i}=zN("useNavigate"),e=Sg("useNavigate"),n=L.useRef(!1);return ww(()=>{n.current=!0}),L.useCallback(async(o,u={})=>{fi(n.current,bw),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var RE={};function Aw(i,e,n){!e&&!RE[i]&&(RE[i]=!0,fi(!1,n))}L.memo($N);function $N({routes:i,future:e,state:n}){return Sw(i,void 0,n,e)}function hs({to:i,replace:e,state:n,relative:s}){gt(Ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=L.useContext(gi);fi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=L.useContext(Fi),{pathname:d}=Ds(),m=Fo(),p=Tg(i,Eg(u),d,s==="path"),g=JSON.stringify(p);return L.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function cs(i){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KN({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){gt(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=i.replace(/^\/*/,"/"),m=L.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof n=="string"&&(n=Bo(n));let{pathname:p="/",search:g="",hash:T="",state:w=null,key:I="default"}=n,O=L.useMemo(()=>{let M=Ir(p,d);return M==null?null:{location:{pathname:M,search:g,hash:T,state:w,key:I},navigationType:s}},[d,p,g,T,w,I,s]);return fi(O!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${T}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:L.createElement(gi.Provider,{value:m},L.createElement(Vu.Provider,{children:e,value:O}))}function QN({children:i,location:e}){return kN(Ep(i),e)}function Ep(i,e=[]){let n=[];return L.Children.forEach(i,(s,o)=>{if(!L.isValidElement(s))return;let u=[...e,o];if(s.type===L.Fragment){n.push.apply(n,Ep(s.props.children,u));return}gt(s.type===cs,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Ep(s.props.children,u)),n.push(d)}),n}var Eh="get",Th="application/x-www-form-urlencoded";function Td(i){return i!=null&&typeof i.tagName=="string"}function YN(i){return Td(i)&&i.tagName.toLowerCase()==="button"}function WN(i){return Td(i)&&i.tagName.toLowerCase()==="form"}function XN(i){return Td(i)&&i.tagName.toLowerCase()==="input"}function ZN(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function JN(i,e){return i.button===0&&(!e||e==="_self")&&!ZN(i)}var dh=null;function eD(){if(dh===null)try{new FormData(document.createElement("form"),0),dh=!1}catch{dh=!0}return dh}var tD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hm(i){return i!=null&&!tD.has(i)?(fi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Th}"`),null):i}function nD(i,e){let n,s,o,u,d;if(WN(i)){let m=i.getAttribute("action");s=m?Ir(m,e):null,n=i.getAttribute("method")||Eh,o=Hm(i.getAttribute("enctype"))||Th,u=new FormData(i)}else if(YN(i)||XN(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Ir(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Eh,o=Hm(i.getAttribute("formenctype"))||Hm(m.getAttribute("enctype"))||Th,u=new FormData(m,i),!eD()){let{name:g,type:T,value:w}=i;if(T==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,w)}}else{if(Td(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Eh,s=null,o=Th,d=i}return u&&o==="text/plain"&&(d=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:d}}function Ag(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function iD(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function sD(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await iD(u,n);return d.links?d.links():[]}return[]}));return uD(s.flat(1).filter(rD).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function IE(i,e,n,s,o,u){let d=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var T;return n[g].pathname!==p.pathname||((T=n[g].route.path)==null?void 0:T.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var w;let T=s.routes[p.route.id];if(!T||!T.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function aD(i,e,{includeHydrateFallback:n}={}){return oD(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function oD(i){return[...new Set(i)]}function lD(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function uD(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(lD(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var cD=new Set([100,101,204,205]);function hD(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&Ir(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Rw(){let i=L.useContext(qo);return Ag(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function dD(){let i=L.useContext(Ed);return Ag(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Rg=L.createContext(void 0);Rg.displayName="FrameworkContext";function Iw(){let i=L.useContext(Rg);return Ag(i,"You must render this element inside a <HydratedRouter> element"),i}function fD(i,e){let n=L.useContext(Rg),[s,o]=L.useState(!1),[u,d]=L.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:T,onTouchStart:w}=e,I=L.useRef(null);L.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let Q=Y=>{Y.forEach(se=>{d(se.isIntersecting)})},H=new IntersectionObserver(Q,{threshold:.5});return I.current&&H.observe(I.current),()=>{H.disconnect()}}},[i]),L.useEffect(()=>{if(s){let Q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let O=()=>{o(!0)},M=()=>{o(!1),d(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:Xl(m,O),onBlur:Xl(p,M),onMouseEnter:Xl(g,O),onMouseLeave:Xl(T,M),onTouchStart:Xl(w,O)}]:[!1,I,{}]}function Xl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function mD({page:i,...e}){let{router:n}=Rw(),s=L.useMemo(()=>yw(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?L.createElement(gD,{page:i,matches:s,...e}):null}function pD(i){let{manifest:e,routeModules:n}=Iw(),[s,o]=L.useState([]);return L.useEffect(()=>{let u=!1;return sD(i,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[i,e,n]),s}function gD({page:i,matches:e,...n}){let s=Ds(),{manifest:o,routeModules:u}=Iw(),{basename:d}=Rw(),{loaderData:m,matches:p}=dD(),g=L.useMemo(()=>IE(i,e,p,o,s,"data"),[i,e,p,o,s]),T=L.useMemo(()=>IE(i,e,p,o,s,"assets"),[i,e,p,o,s]),w=L.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let M=new Set,Q=!1;if(e.forEach(Y=>{var ne;let se=o.routes[Y.route.id];!se||!se.hasLoader||(!g.some(fe=>fe.route.id===Y.route.id)&&Y.route.id in m&&((ne=u[Y.route.id])!=null&&ne.shouldRevalidate)||se.hasClientLoader?Q=!0:M.add(Y.route.id))}),M.size===0)return[];let H=hD(i,d);return Q&&M.size>0&&H.searchParams.set("_routes",e.filter(Y=>M.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[H.pathname+H.search]},[d,m,s,o,g,e,i,u]),I=L.useMemo(()=>aD(T,o),[T,o]),O=pD(T);return L.createElement(L.Fragment,null,w.map(M=>L.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),I.map(M=>L.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),O.map(({key:M,link:Q})=>L.createElement("link",{key:M,...Q})))}function yD(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Cw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cw&&(window.__reactRouterVersion="7.5.2")}catch{}function vD({basename:i,children:e,window:n}){let s=L.useRef();s.current==null&&(s.current=aN({window:n,v5Compat:!0}));let o=s.current,[u,d]=L.useState({action:o.action,location:o.location}),m=L.useCallback(p=>{L.startTransition(()=>d(p))},[d]);return L.useLayoutEffect(()=>o.listen(m),[o,m]),L.createElement(KN,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var xw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ig=L.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:d,state:m,target:p,to:g,preventScrollReset:T,viewTransition:w,...I},O){let{basename:M}=L.useContext(gi),Q=typeof g=="string"&&xw.test(g),H,Y=!1;if(typeof g=="string"&&Q&&(H=g,Cw))try{let R=new URL(window.location.href),N=g.startsWith("//")?new URL(R.protocol+g):new URL(g),x=Ir(N.pathname,M);N.origin===R.origin&&x!=null?g=x+N.search+N.hash:Y=!0}catch{fi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=ON(g,{relative:o}),[ne,fe,pe]=fD(s,I),Re=bD(g,{replace:d,state:m,target:p,preventScrollReset:T,relative:o,viewTransition:w});function P(R){e&&e(R),R.defaultPrevented||Re(R)}let S=L.createElement("a",{...I,...pe,href:H||se,onClick:Y||u?e:P,ref:yD(O,fe),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return ne&&!Q?L.createElement(L.Fragment,null,S,L.createElement(mD,{page:se})):S});Ig.displayName="Link";var _D=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:d,viewTransition:m,children:p,...g},T){let w=Pu(d,{relative:g.relative}),I=Ds(),O=L.useContext(Ed),{navigator:M,basename:Q}=L.useContext(gi),H=O!=null&&ID(w)&&m===!0,Y=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,se=I.pathname,ne=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(se=se.toLowerCase(),ne=ne?ne.toLowerCase():null,Y=Y.toLowerCase()),ne&&Q&&(ne=Ir(ne,Q)||ne);const fe=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let pe=se===Y||!o&&se.startsWith(Y)&&se.charAt(fe)==="/",Re=ne!=null&&(ne===Y||!o&&ne.startsWith(Y)&&ne.charAt(Y.length)==="/"),P={isActive:pe,isPending:Re,isTransitioning:H},S=pe?e:void 0,R;typeof s=="function"?R=s(P):R=[s,pe?"active":null,Re?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(P):u;return L.createElement(Ig,{...g,"aria-current":S,className:R,ref:T,style:N,to:d,viewTransition:m},typeof p=="function"?p(P):p)});_D.displayName="NavLink";var ED=L.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:d=Eh,action:m,onSubmit:p,relative:g,preventScrollReset:T,viewTransition:w,...I},O)=>{let M=AD(),Q=RD(m,{relative:g}),H=d.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&xw.test(m),se=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let fe=ne.nativeEvent.submitter,pe=(fe==null?void 0:fe.getAttribute("formmethod"))||d;M(fe||ne.currentTarget,{fetcherKey:e,method:pe,navigate:n,replace:o,state:u,relative:g,preventScrollReset:T,viewTransition:w})};return L.createElement("form",{ref:O,method:H,action:Q,onSubmit:s?p:se,...I,"data-discover":!Y&&i==="render"?"true":void 0})});ED.displayName="Form";function TD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nw(i){let e=L.useContext(qo);return gt(e,TD(i)),e}function bD(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:d}={}){let m=Fo(),p=Ds(),g=Pu(i,{relative:u});return L.useCallback(T=>{if(JN(T,e)){T.preventDefault();let w=n!==void 0?n:Su(p)===Su(g);m(i,{replace:w,state:s,preventScrollReset:o,relative:u,viewTransition:d})}},[p,m,g,n,s,e,i,o,u,d])}var wD=0,SD=()=>`__${String(++wD)}__`;function AD(){let{router:i}=Nw("useSubmit"),{basename:e}=L.useContext(gi),n=HN();return L.useCallback(async(s,o={})=>{let{action:u,method:d,encType:m,formData:p,body:g}=nD(s,e);if(o.navigate===!1){let T=o.fetcherKey||SD();await i.fetch(T,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function RD(i,{relative:e}={}){let{basename:n}=L.useContext(gi),s=L.useContext(Fi);gt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Pu(i||".",{relative:e})},d=Ds();if(i==null){u.search=d.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(T=>T==="")){m.delete("index"),p.filter(w=>w).forEach(w=>m.append("index",w));let T=m.toString();u.search=T?`?${T}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Tr([n,u.pathname])),Su(u)}function ID(i,e={}){let n=L.useContext(Tw);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Nw("useViewTransitionState"),o=Pu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Ir(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=Ir(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Bh(o.pathname,d)!=null||Bh(o.pathname,u)!=null}new TextEncoder;[...cD];var CD=JE();const Fm=ZE(CD);function Cg(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Dw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xD=Dw,Ow=new Ta("auth","Firebase",Dw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Xh("@firebase/auth");function ND(i,...e){qh.logLevel<=Fe.WARN&&qh.warn(`Auth (${Po}): ${i}`,...e)}function bh(i,...e){qh.logLevel<=Fe.ERROR&&qh.error(`Auth (${Po}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(i,...e){throw xg(i,...e)}function zi(i,...e){return xg(i,...e)}function Mw(i,e,n){const s=Object.assign(Object.assign({},xD()),{[e]:n});return new Ta("auth","Firebase",s).create(e,{appName:i.name})}function br(i){return Mw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Ow.create(i,...e)}function Ie(i,e,...n){if(!i)throw xg(e,...n)}function vr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw bh(e),new Error(e)}function Cr(i,e){i||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function DD(){return CE()==="http:"||CE()==="https:"}function CE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DD()||aT()||"connection"in navigator)?navigator.onLine:!0}function MD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cr(n>e,"Short delay should be less than long delay!"),this.isMobile=a1()||u1()}get(){return OD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(i,e){Cr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PD=new Lu(3e4,6e4);function Nr(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Dr(i,e,n,s,o={}){return Vw(i,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=Iu(Object.assign({key:i.config.apiKey},d)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return l1()||(g.referrerPolicy="no-referrer"),kw.fetch()(await Pw(i,i.config.apiHost,n,m),g)})}async function Vw(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},kD),e);try{const o=new UD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw fh(i,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw fh(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw fh(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw fh(i,"user-disabled",d);const T=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Mw(i,T,g);mi(i,T)}}catch(o){if(o instanceof pi)throw o;mi(i,"network-request-failed",{message:String(o)})}}async function Uu(i,e,n,s,o={}){const u=await Dr(i,e,n,s,o);return"mfaPendingCredential"in u&&mi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Pw(i,e,n,s){const o=`${e}${n}?${s}`,u=i,d=u.config.emulator?Ng(i.config,o):`${i.config.apiScheme}://${o}`;return VD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function LD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(zi(this.auth,"network-request-failed")),PD.get())})}}function fh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=zi(i,e,s);return o.customData._tokenResponse=n,o}function xE(i){return i!==void 0&&i.enterprise!==void 0}class jD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zD(i,e){return Dr(i,"GET","/v2/recaptchaConfig",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(i,e){return Dr(i,"POST","/v1/accounts:delete",e)}async function Hh(i,e){return Dr(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qD(i,e=!1){const n=wt(i),s=await n.getIdToken(e),o=Dg(s);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:fu(Gm(o.auth_time)),issuedAtTime:fu(Gm(o.iat)),expirationTime:fu(Gm(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Gm(i){return Number(i)*1e3}function Dg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const o=nT(n);return o?JSON.parse(o):(bh("Failed to decode base64 JWT payload"),null)}catch(o){return bh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NE(i){const e=Dg(i);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof pi&&HD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function HD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Au(i,Hh(n,{idToken:s}));Ie(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Lw(u.providerUserInfo):[],m=$D(i.providerData,d),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),T=p?g:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new bp(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(i,w)}async function GD(i){const e=wt(i);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $D(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Lw(i){return i.map(e=>{var{providerId:n}=e,s=Cg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(i,e){const n=await Vw(i,{},async()=>{const s=Iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,d=await Pw(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",kw.fetch()(d,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QD(i,e){return Dr(i,"POST","/v2/accounts:revokeToken",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await KD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Ro;return s&&(Ie(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Ie(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Ie(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(i,e){Ie(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Cg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new bp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Au(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qD(this,e)}reload(){return GD(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(br(this.auth));const e=await this.getIdToken();return await Au(this,BD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,m,p,g,T;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,I=(o=n.email)!==null&&o!==void 0?o:void 0,O=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(d=n.photoURL)!==null&&d!==void 0?d:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,H=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(g=n.createdAt)!==null&&g!==void 0?g:void 0,se=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:ne,emailVerified:fe,isAnonymous:pe,providerData:Re,stsTokenManager:P}=n;Ie(ne&&P,e,"internal-error");const S=Ro.fromJSON(this.name,P);Ie(typeof ne=="string",e,"internal-error"),us(w,e.name),us(I,e.name),Ie(typeof fe=="boolean",e,"internal-error"),Ie(typeof pe=="boolean",e,"internal-error"),us(O,e.name),us(M,e.name),us(Q,e.name),us(H,e.name),us(Y,e.name),us(se,e.name);const R=new ci({uid:ne,auth:e,email:I,emailVerified:fe,displayName:w,isAnonymous:pe,photoURL:M,phoneNumber:O,tenantId:Q,stsTokenManager:S,createdAt:Y,lastLoginAt:se});return Re&&Array.isArray(Re)&&(R.providerData=Re.map(N=>Object.assign({},N))),H&&(R._redirectEventId=H),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ro;o.updateFromServerResponse(n);const u=new ci({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Fh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Lw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ro;m.updateFromIdToken(s);const p=new ci({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;function _r(i){Cr(i instanceof Function,"Expected a class definition");let e=DE.get(i);return e?(Cr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,DE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Uw.type="NONE";const OE=Uw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(i,e,n){return`firebase:${i}:${e}:${n}`}class Io{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=wh(this.userKey,o.apiKey,u),this.fullPersistenceKey=wh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?ci._fromGetAccountInfoResponse(this.auth,n,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Io(_r(OE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||_r(OE);const d=wh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const T=await g._get(d);if(T){let w;if(typeof T=="string"){const I=await Hh(e,{idToken:T}).catch(()=>{});if(!I)break;w=await ci._fromGetAccountInfoResponse(e,I,T)}else w=ci._fromJSON(e,T);g!==u&&(m=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Io(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new Io(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fw(e))return"Blackberry";if(Gw(e))return"Webos";if(zw(e))return"Safari";if((e.includes("chrome/")||Bw(e))&&!e.includes("edge/"))return"Chrome";if(Hw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function jw(i=dn()){return/firefox\//i.test(i)}function zw(i=dn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bw(i=dn()){return/crios\//i.test(i)}function qw(i=dn()){return/iemobile/i.test(i)}function Hw(i=dn()){return/android/i.test(i)}function Fw(i=dn()){return/blackberry/i.test(i)}function Gw(i=dn()){return/webos/i.test(i)}function Og(i=dn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function YD(i=dn()){var e;return Og(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WD(){return c1()&&document.documentMode===10}function $w(i=dn()){return Og(i)||Hw(i)||Gw(i)||Fw(i)||/windows phone/i.test(i)||qw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(i,e=[]){let n;switch(i){case"Browser":n=ME(dn());break;case"Worker":n=`${ME(dn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(i,e={}){return Dr(i,"GET","/v2/passwordPolicy",Nr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=6;class eO{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:JD,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new XD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),s=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ti(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(br(this));const n=e?wt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZD(this),n=new eO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ta("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await QD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ND(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ra(i){return wt(i)}class kE{constructor(e){this.auth=e,this.observer=null,this.addObserver=y1(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nO(i){bd=i}function Qw(i){return bd.loadJS(i)}function iO(){return bd.recaptchaEnterpriseScript}function rO(){return bd.gapiScript}function sO(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class aO{constructor(){this.enterprise=new oO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class oO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const lO="recaptcha-enterprise",Yw="NO_RECAPTCHA";class uO{constructor(e){this.type=lO,this.auth=Ra(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{zD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new jD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;xE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(Yw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aO().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&xE(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=iO();p.length!==0&&(p+=m),Qw(p).then(()=>{o(m,u,d)}).catch(g=>{d(g)})}}).catch(m=>{d(m)})})}}async function VE(i,e,n,s=!1,o=!1){const u=new uO(i);let d;if(o)d=Yw;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function wp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await VE(i,e,n,n==="getOobCode");return s(i,d)}else return s(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await VE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(i,e){const n=ba(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(bs(u,e??{}))return o;mi(o,"already-initialized")}return n.initialize({options:e})}function hO(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function dO(i,e,n){const s=Ra(i);Ie(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Ww(e),{host:d,port:m}=fO(e),p=m===null?"":`:${m}`,g={url:`${u}//${d}${p}/`},T=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ie(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ie(bs(g,s.config.emulator)&&bs(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,mO()}function Ww(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function fO(i){const e=Ww(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:PE(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:PE(d)}}}function PE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function mO(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function pO(i,e){return Dr(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(i,e){return Uu(i,"POST","/v1/accounts:signInWithPassword",Nr(i,e))}async function yO(i,e){return Dr(i,"POST","/v1/accounts:sendOobCode",Nr(i,e))}async function vO(i,e){return yO(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Nr(i,e))}async function EO(i,e){return Uu(i,"POST","/v1/accounts:signInWithEmailLink",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends Mg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ru(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ru(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",gO);case"emailLink":return _O(e,{email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,s,"signUpPassword",pO);case"emailLink":return EO(e,{idToken:n,email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(i,e){return Uu(i,"POST","/v1/accounts:signInWithIdp",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="http://localhost";class _a extends Mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Cg(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new _a(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Co(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Co(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Co(e,n)}buildRequest(){const e={requestUri:TO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wO(i){const e=Jl(eu(i)).link,n=e?Jl(eu(e)).deep_link_id:null,s=Jl(eu(i)).deep_link_id;return(s?Jl(eu(s)).link:null)||s||n||e||i}class kg{constructor(e){var n,s,o,u,d,m;const p=Jl(eu(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,T=(s=p.oobCode)!==null&&s!==void 0?s:null,w=bO((o=p.mode)!==null&&o!==void 0?o:null);Ie(g&&T&&w,"argument-error"),this.apiKey=g,this.operation=w,this.code=T,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=p.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=wO(e);try{return new kg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,n){return Ru._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=kg.parseLink(n);return Ie(s,"argument-error"),Ru._fromEmailAndCode(e,s.code,s.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends Xw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends ju{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return fs.credential(n,s)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ju{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends ju{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ps.credential(n,s)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(i,e){return Uu(i,"POST","/v1/accounts:signUp",Nr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ci._fromIdTokenResponse(e,s,o),d=LE(s);return new Ea({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=LE(s);return new Ea({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function LE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends pi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Gh(e,n,s,o)}}function Zw(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(i,u,e,s):u})}async function AO(i,e,n=!1){const s=await Au(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ea._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(i,e,n=!1){const{auth:s}=i;if(ti(s.app))return Promise.reject(br(s));const o="reauthenticate";try{const u=await Au(i,Zw(s,o,e,i),n);Ie(u.idToken,s,"internal-error");const d=Dg(u.idToken);Ie(d,s,"internal-error");const{sub:m}=d;return Ie(i.uid===m,s,"user-mismatch"),Ea._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&mi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(i,e,n=!1){if(ti(i.app))return Promise.reject(br(i));const s="signIn",o=await Zw(i,s,e),u=await Ea._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function IO(i,e){return Jw(Ra(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(i){const e=Ra(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CO(i,e,n){if(ti(i.app))return Promise.reject(br(i));const s=Ra(i),d=await wp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&eS(i),p}),m=await Ea._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function xO(i,e,n){return ti(i.app)?Promise.reject(br(i)):IO(wt(i),Go.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&eS(i),s})}async function tS(i,e){const n=wt(i),o={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()},{email:u}=await vO(n.auth,o);u!==i.email&&await i.reload()}function NO(i,e,n,s){return wt(i).onIdTokenChanged(e,n,s)}function DO(i,e,n){return wt(i).beforeAuthStateChanged(e,n)}function OO(i,e,n,s){return wt(i).onAuthStateChanged(e,n,s)}function MO(i){return wt(i).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=1e3,VO=10;class iS extends nS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$w(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);WD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,VO):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},kO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iS.type="LOCAL";const PO=iS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS extends nS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rS.type="SESSION";const sS=rS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new wd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async g=>g(n.origin,u)),p=await LO(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const g=Vg("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(w){const I=w;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function jO(i){Bi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function zO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function qO(){return aS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebaseLocalStorageDb",HO=1,Kh="firebaseLocalStorage",lS="fbase_key";class zu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sd(i,e){return i.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function FO(){const i=indexedDB.deleteDatabase(oS);return new zu(i).toPromise()}function Sp(){const i=indexedDB.open(oS,HO);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Kh,{keyPath:lS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Kh)?e(s):(s.close(),await FO(),e(await Sp()))})})}async function UE(i,e,n){const s=Sd(i,!0).put({[lS]:e,value:n});return new zu(s).toPromise()}async function GO(i,e){const n=Sd(i,!1).get(e),s=await new zu(n).toPromise();return s===void 0?null:s.value}function jE(i,e){const n=Sd(i,!0).delete(e);return new zu(n).toPromise()}const $O=800,KO=3;class uS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>KO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(qO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zO(),!this.activeServiceWorker)return;this.sender=new UO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sp();return await UE(e,$h,"1"),await jE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>UE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>GO(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Sd(o,!1).getAll();return new zu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$O)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uS.type="LOCAL";const QO=uS;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(i,e){return e?_r(e):(Ie(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends Mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WO(i){return Jw(i.auth,new Pg(i),i.bypassAuthState)}function XO(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),RO(n,new Pg(i),i.bypassAuthState)}async function ZO(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),AO(n,new Pg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WO;case"linkViaPopup":case"linkViaRedirect":return ZO;case"reauthViaPopup":case"reauthViaRedirect":return XO;default:mi(this.auth,"internal-error")}}resolve(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=new Lu(2e3,1e4);class So extends cS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Cr(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JO.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="pendingRedirect",Sh=new Map;class t4 extends cS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Sh.get(this.auth._key());if(!e){try{const s=await n4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Sh.set(this.auth._key(),e)}return this.bypassAuthState||Sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n4(i,e){const n=s4(e),s=r4(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function i4(i,e){Sh.set(i._key(),e)}function r4(i){return _r(i._redirectPersistence)}function s4(i){return wh(e4,i.config.apiKey,i.name)}async function a4(i,e,n=!1){if(ti(i.app))return Promise.reject(br(i));const s=Ra(i),o=YO(s,e),d=await new t4(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=10*60*1e3;class l4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!hS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(zi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o4&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(e))}saveEventToCache(e){this.cachedEventUids.add(zE(e)),this.lastProcessedEventTime=Date.now()}}function zE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function hS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function u4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(i,e={}){return Dr(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d4=/^https?/;async function f4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await c4(i);for(const n of e)try{if(m4(n))return}catch{}mi(i,"unauthorized-domain")}function m4(i){const e=Tp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!d4.test(n))return!1;if(h4.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=new Lu(3e4,6e4);function BE(){const i=Bi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function g4(i){return new Promise((e,n)=>{var s,o,u;function d(){BE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BE(),n(zi(i,"network-request-failed"))},timeout:p4.get()})}if(!((o=(s=Bi().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Bi().gapi)===null||u===void 0)&&u.load)d();else{const m=sO("iframefcb");return Bi()[m]=()=>{gapi.load?d():n(zi(i,"network-request-failed"))},Qw(`${rO()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function y4(i){return Ah=Ah||g4(i),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=new Lu(5e3,15e3),_4="__/auth/iframe",E4="emulator/auth/iframe",T4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},b4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function w4(i){const e=i.config;Ie(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ng(e,E4):`https://${i.config.authDomain}/${_4}`,s={apiKey:e.apiKey,appName:i.name,v:Po},o=b4.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Iu(s).slice(1)}`}async function S4(i){const e=await y4(i),n=Bi().gapi;return Ie(n,i,"internal-error"),e.open({where:document.body,url:w4(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T4,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=zi(i,"network-request-failed"),m=Bi().setTimeout(()=>{u(d)},v4.get());function p(){Bi().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},R4=500,I4=600,C4="_blank",x4="http://localhost";class qE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N4(i,e,n,s=R4,o=I4){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},A4),{width:s.toString(),height:o.toString(),top:u,left:d}),g=dn().toLowerCase();n&&(m=Bw(g)?C4:n),jw(g)&&(e=e||x4,p.scrollbars="yes");const T=Object.entries(p).reduce((I,[O,M])=>`${I}${O}=${M},`,"");if(YD(g)&&m!=="_self")return D4(e||"",m),new qE(null);const w=window.open(e||"",m,T);Ie(w,i,"popup-blocked");try{w.focus()}catch{}return new qE(w)}function D4(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="__/auth/handler",M4="emulator/auth/handler",k4=encodeURIComponent("fac");async function HE(i,e,n,s,o,u){Ie(i.config.authDomain,i,"auth-domain-config-required"),Ie(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Po,eventId:o};if(e instanceof Xw){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",g1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,w]of Object.entries({}))d[T]=w}if(e instanceof ju){const T=e.getScopes().filter(w=>w!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const p=await i._getAppCheckToken(),g=p?`#${k4}=${encodeURIComponent(p)}`:"";return`${V4(i)}?${Iu(m).slice(1)}${g}`}function V4({config:i}){return i.emulator?Ng(i,M4):`https://${i.authDomain}/${O4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class P4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sS,this._completeRedirectFn=a4,this._overrideRedirectResult=i4}async _openPopup(e,n,s,o){var u;Cr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await HE(e,n,s,Tp(),o);return N4(e,d,Vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await HE(e,n,s,Tp(),o);return jO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Cr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await S4(e),s=new l4(e);return n.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($m,{type:$m},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[$m];d!==void 0&&n(!!d),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=f4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $w()||zw()||Og()}}const L4=P4;var FE="@firebase/auth",GE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z4(i){qi(new hi("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Ie(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kw(i)},g=new tO(s,o,u,p);return hO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),qi(new hi("auth-internal",e=>{const n=Ra(e.getProvider("auth").getImmediate());return(s=>new U4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(FE,GE,j4(i)),ni(FE,GE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=5*60,q4=sT("authIdTokenMaxAge")||B4;let $E=null;const H4=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>q4)return;const o=n==null?void 0:n.token;$E!==o&&($E=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function F4(i=Ip()){const e=ba(i,"auth");if(e.isInitialized())return e.getImmediate();const n=cO(i,{popupRedirectResolver:L4,persistence:[QO,PO,sS]}),s=sT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=H4(u.toString());DO(n,d,()=>d(n.currentUser)),NO(n,m=>d(m))}}const o=iT("auth");return o&&dO(n,`http://${o}`),n}function G4(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}nO({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=zi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",G4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z4("Browser");const dS=L.createContext();function Or(){return L.useContext(dS)}function $4({children:i}){const[e,n]=L.useState(null),[s,o]=L.useState(!0),u=F4(_g);L.useEffect(()=>OO(u,I=>{n(I),o(!1)}),[u]);const T={currentUser:e,loading:s,signup:(w,I)=>CO(u,w,I),login:(w,I)=>xO(u,w,I),logout:async()=>{await MO(u),n(null)},resendVerificationEmail:async()=>{e&&await tS(e)},emailVerified:(e==null?void 0:e.emailVerified)||!1};return E.jsx(dS.Provider,{value:T,children:!s&&i})}function K4(){const i=L.useRef(),e=L.useRef(),{login:n}=Or(),[s,o]=L.useState(""),[u,d]=L.useState(!1),m=Fo();async function p(g){g.preventDefault(),o(""),d(!0);try{await n(i.current.value,e.current.value),m("/dashboard")}catch(T){o(T.message||"Failed to log in")}d(!1)}return E.jsx("div",{className:"auth-bg",children:E.jsxs("div",{className:"auth-container",children:[E.jsx("div",{className:"auth-logo-row",children:E.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),E.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),E.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&E.jsx("div",{className:"auth-error",children:s}),E.jsxs("form",{className:"auth-form",onSubmit:p,children:[E.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),E.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),E.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),E.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),E.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),E.jsx("div",{className:"auth-link-row",children:E.jsxs("span",{style:{color:"#fff"},children:["Don't have an account? ",E.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function Q4(){const i=L.useRef(),e=L.useRef(),n=L.useRef(),{signup:s}=Or(),[o,u]=L.useState(""),[d,m]=L.useState(!1),p=Fo();async function g(T){if(T.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{const w=await s(i.current.value,e.current.value);await tS(w.user),m(!1),p("/verify-email")}catch(w){u(w.message||"Failed to create an account")}m(!1)}return E.jsx("div",{className:"auth-bg",children:E.jsxs("div",{className:"auth-container",children:[E.jsx("div",{className:"auth-logo-row",children:E.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),E.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),E.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&E.jsx("div",{className:"auth-error",children:o}),E.jsxs("form",{className:"auth-form",onSubmit:g,children:[E.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),E.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),E.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),E.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),E.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),E.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),E.jsx("button",{disabled:d,type:"submit",className:"auth-btn",children:"Sign Up"})]}),E.jsx("div",{className:"auth-link-row",children:E.jsxs("span",{style:{color:"#fff"},children:["Already have an account? ",E.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function Y4({children:i}){const{currentUser:e}=Or();return e?i:E.jsx(hs,{to:"/login"})}function W4({show:i}){const[e,n]=L.useState(!1),[s,o]=L.useState([]),[u,d]=L.useState(null),[m,p]=L.useState([]),[g,T]=L.useState(!1),[w,I]=L.useState(""),O=async()=>{if(!e&&i.tmdbId){T(!0),I("");try{const Q=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,Y=await(await fetch(Q)).json();o(Y.seasons||[]),Y.seasons&&Y.seasons.length>0&&d(Y.seasons[0].season_number)}catch{I("Failed to load seasons.")}T(!1)}n(M=>!M)};return L.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){T(!0),I("");try{const H=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,se=await(await fetch(H)).json();p(se.episodes||[])}catch{I("Failed to load episodes.")}T(!1)}})()},[i.tmdbId,u]),E.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[E.jsx("button",{onClick:O,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":" Show Episodes"}),e&&E.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?E.jsx("div",{children:"Loading..."}):w?E.jsx("div",{style:{color:"red"},children:w}):E.jsxs(E.Fragment,{children:[s.length>0&&E.jsxs("div",{style:{marginBottom:10},children:[E.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),E.jsx("select",{id:"season-select",value:u||"",onChange:M=>d(Number(M.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(M=>E.jsx("option",{value:M.season_number,children:M.name||`Season ${M.season_number}`},M.id||M.season_number))})]}),m.length>0?E.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(M=>E.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[E.jsxs("strong",{children:["Ep ",M.episode_number,":"]})," ",M.name," ",M.air_date?E.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",M.air_date,")"]}):""]},M.id||M.episode_number))}):E.jsx("div",{children:"No episodes found."})]})})]})}function X4({users:i,onSelectUser:e}){return E.jsxs("table",{className:"admin-user-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Email"}),E.jsx("th",{children:"Display Name"}),E.jsx("th",{children:"Status"}),E.jsx("th",{children:"Roles"}),E.jsx("th",{children:"Stats"}),E.jsx("th",{children:"Actions"})]})}),E.jsx("tbody",{children:i.map(n=>{var s,o;return E.jsxs("tr",{children:[E.jsx("td",{children:n.email}),E.jsx("td",{children:n.displayName}),E.jsx("td",{children:n.disabled?"Inactive":"Active"}),E.jsx("td",{children:n.roles?n.roles.join(", "):""}),E.jsxs("td",{children:["Diary: ",((s=n.stats)==null?void 0:s.diaryCount)||0,E.jsx("br",{}),"Comments: ",((o=n.stats)==null?void 0:o.commentCount)||0]}),E.jsx("td",{children:E.jsx("button",{onClick:()=>e(n),children:"Manage"})})]},n.uid)})})]})}function Z4({user:i,onClose:e,onDisable:n,onEnable:s,onDelete:o,onSendMessage:u,diaryEntries:d,comments:m,onDeleteDiary:p,onDeleteComment:g}){var T,w;return i?E.jsx("div",{className:"admin-modal-bg",children:E.jsxs("div",{className:"admin-modal",style:{maxWidth:1200,width:"90vw",minWidth:320,padding:"2.2rem 2.5rem",borderRadius:18,background:"#fff",boxShadow:"0 4px 32px #205a7a22",margin:"0 auto"},children:[E.jsx("button",{className:"close-btn",onClick:e,style:{position:"absolute",top:18,right:24,fontSize:28,color:"#205a7a",background:"none",border:"none",cursor:"pointer"},children:""}),E.jsxs("h2",{style:{color:"#205a7a",fontWeight:900,fontSize:"2rem",marginBottom:12},children:["User: ",E.jsx("span",{style:{color:"#25609c"},children:i.displayName||i.email})]}),E.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,flexWrap:"wrap"},children:[E.jsxs("div",{children:["Status: ",E.jsx("b",{style:{color:i.disabled?"#d32f2f":"#35b36b"},children:i.disabled?"Inactive":"Active"})]}),E.jsxs("div",{children:["Roles: ",E.jsx("span",{style:{color:"#25609c"},children:i.roles?i.roles.join(", "):"-"})]}),E.jsxs("div",{children:["Email: ",E.jsx("span",{style:{color:"#333"},children:i.email})]}),E.jsxs("div",{children:["Stats: ",E.jsxs("span",{style:{color:"#25609c"},children:["Diary ",((T=i.stats)==null?void 0:T.diaryCount)||0,", Comments ",((w=i.stats)==null?void 0:w.commentCount)||0]})]})]}),E.jsxs("div",{style:{margin:"1.2em 0",display:"flex",gap:12,flexWrap:"wrap"},children:[i.disabled?E.jsx("button",{onClick:()=>s(i.uid),style:{background:"#35b36b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Enable"}):E.jsx("button",{onClick:()=>n(i.uid),style:{background:"#ffe066",color:"#205a7a",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Disable"}),E.jsx("button",{onClick:()=>o(i.uid),style:{background:"#ff6b6b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Delete"}),E.jsx("button",{onClick:()=>u(i.uid),style:{background:"#25609c",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Message"})]}),E.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:24,marginBottom:12,fontSize:"1.2rem"},children:"Diary Entries"}),E.jsx("div",{style:{maxHeight:180,overflowY:"auto",marginBottom:18,background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:d.length===0?E.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No diary entries."}):E.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:d.map(I=>E.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[E.jsx("span",{style:{fontWeight:600,color:"#205a7a"},children:I.title}),E.jsx("button",{onClick:()=>p(I.docId),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.docId))})}),E.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:18,marginBottom:10,fontSize:"1.2rem"},children:"Comments"}),E.jsx("div",{style:{maxHeight:140,overflowY:"auto",background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:m.length===0?E.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No comments."}):E.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:m.map(I=>E.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[E.jsxs("span",{style:{color:"#333",fontWeight:500,maxWidth:290,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[I.text,I.entryTitle&&E.jsxs("span",{style:{color:"#25609c",fontWeight:400,marginLeft:10,fontSize:13},children:["[on: ",I.entryTitle,"]"]})]}),E.jsx("button",{onClick:()=>g(I.id),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.id))})})]})}):null}function J4({onSend:i,onClose:e}){const[n,s]=L.useState("");return E.jsx("div",{className:"admin-modal-bg",children:E.jsxs("div",{className:"admin-modal",children:[E.jsx("button",{className:"close-btn",onClick:e,children:""}),E.jsx("h2",{children:"Send Message to All Users"}),E.jsx("textarea",{value:n,onChange:o=>s(o.target.value),rows:6,style:{width:"100%"}}),E.jsx("button",{onClick:()=>i(n),style:{marginTop:12},children:"Send"})]})})}function eM(){async function i(){try{const e=await An(cn(Be,"users"));console.log("User docs:",e.docs.map(n=>n.data()))}catch(e){console.error("Direct test error:",e)}}return E.jsx("button",{onClick:i,style:{marginBottom:12},children:"Test Firestore Read"})}async function tM(i){const n=(await An(cn(Be,"users"))).docs.map(s=>Uh(cn(Be,`users/${s.id}/notifications`),{...i,read:!1,createdAt:yp()}));await Promise.all(n)}function nM(){const[i,e]=L.useState(""),[n,s]=L.useState(""),[o,u]=L.useState("info"),[d,m]=L.useState(!1),[p,g]=L.useState(""),[T,w]=L.useState("");async function I(O){O.preventDefault(),m(!0),w(""),g("");try{await tM({title:i,message:n,type:o}),g("Notification sent to all users!"),e(""),s("")}catch{w("Failed to send notification.")}m(!1)}return E.jsxs("form",{className:"admin-notification-form",onSubmit:I,style:{marginBottom:"2rem"},children:[E.jsx("h3",{children:"Send Notification to All Users"}),E.jsx("input",{value:i,onChange:O=>e(O.target.value),placeholder:"Title",required:!0}),E.jsx("textarea",{value:n,onChange:O=>s(O.target.value),placeholder:"Message",required:!0}),E.jsxs("select",{value:o,onChange:O=>u(O.target.value),children:[E.jsx("option",{value:"info",children:"Info"}),E.jsx("option",{value:"warning",children:"Warning"}),E.jsx("option",{value:"error",children:"Error"})]}),E.jsx("button",{type:"submit",disabled:d,children:d?"Sending...":"Send Notification"}),p&&E.jsx("div",{style:{color:"green",marginTop:8},children:p}),T&&E.jsx("div",{style:{color:"red",marginTop:8},children:T})]})}function iM(){const{currentUser:i}=Or(),[e,n]=L.useState([]),[s,o]=L.useState(null),[u,d]=L.useState([]),[m,p]=L.useState([]),[g,T]=L.useState(!0),[w,I]=L.useState(""),[O,M]=L.useState(!1);L.useEffect(()=>{async function S(){T(!0),I("");try{console.log("Fetching users...");const R=await An(cn(Be,"users"));console.log("Fetched users:",R.size),console.log("Fetching diary...");const N=await An(cn(Be,"diary"));console.log("Fetched diary:",N.size),console.log("Fetching comments...");const x=await An(Lm(Be,"comments"));console.log("Fetched comments:",x.size);const k={},C={};N.docs.forEach(De=>{const Me=De.data().uid;k[Me]=(k[Me]||0)+1}),x.docs.forEach(De=>{const Me=De.data().authorUid;C[Me]=(C[Me]||0)+1}),n(R.docs.map(De=>({uid:De.id,...De.data(),stats:{diaryCount:k[De.id]||0,commentCount:C[De.id]||0}})))}catch(R){console.error("AdminDashboard Firestore error:",R),I("Failed to load users.")}T(!1)}S()},[]);async function Q(S){console.log("Fetching diary entries for user...");const R=await An(cn(Be,"diary"));console.log("Fetched diary entries:",R.size);const N=R.docs.filter(C=>C.data().uid===S.uid).map(C=>({docId:C.id,...C.data()}));d(N),console.log("Fetching comments for user...");const x=await An(Lm(Be,"comments"));console.log("Fetched comments:",x.size);const k=x.docs.filter(C=>C.data().authorUid===S.uid).map(C=>{const Me=C.ref.path.split("/")[1],W=R.docs.find(Le=>String(Le.data().id)===Me),oe=W&&(W.data().title||W.data().desc)||"",ve={id:C.id,entryId:Me,entryTitle:oe,...C.data()};return console.log("AdminDashboard userComment:",ve),ve});p(k),o(S)}async function H(S){await ma(Lt(Be,"users",S),{disabled:!0}),n(e.map(R=>R.uid===S?{...R,disabled:!0}:R)),o(R=>R&&R.uid===S?{...R,disabled:!0}:R)}async function Y(S){await ma(Lt(Be,"users",S),{disabled:!1}),n(e.map(R=>R.uid===S?{...R,disabled:!1}:R)),o(R=>R&&R.uid===S?{...R,disabled:!1}:R)}async function se(S){await hu(Lt(Be,"users",S)),n(e.filter(R=>R.uid!==S)),o(null)}async function ne(S){if(!S||typeof S!="string"){I("Cannot delete diary entry: invalid id.");return}await hu(Lt(Be,"diary",S)),d(u.filter(R=>R.docId!==S)),await pe()}async function fe(S){const R=m.find(x=>x.id===S);if(!R)return;const N=R.entryId||R.entry_id||R.diaryId||R.parentEntryId;if(!N){I("Cannot delete: missing entryId for comment.");return}await hu(Lt(Be,`discussions/${N}/comments`,S)),p(m.filter(x=>x.id!==S)),await pe()}async function pe(){console.log("Refreshing user stats...");const S=await An(cn(Be,"diary"));console.log("Fetched diary:",S.size);const R=await An(Lm(Be,"comments"));console.log("Fetched comments:",R.size);const N={},x={};S.docs.forEach(k=>{const C=k.data().uid;N[C]=(N[C]||0)+1}),R.docs.forEach(k=>{const C=k.data().authorUid;x[C]=(x[C]||0)+1}),n(k=>k.map(C=>({...C,stats:{diaryCount:N[C.uid]||0,commentCount:x[C.uid]||0}})))}async function Re(S){await An(cn(Be,"users")).then(R=>{R.forEach(N=>{ma(Lt(Be,"users",N.id),{lastAdminMessage:S})})}),M(!1),alert("Message sent to all users!")}function P(S){M(!0)}return E.jsxs("div",{className:"admin-dashboard-container",children:[E.jsx("h2",{className:"admin-dashboard-title",children:"Admin Dashboard"}),E.jsx(nM,{}),E.jsx(eM,{}),E.jsx("div",{className:"admin-dashboard-actions",children:E.jsx("button",{className:"admin-dashboard-message-btn",onClick:()=>M(!0),children:"Message All Users"})}),w&&E.jsx("div",{className:"admin-dashboard-error",children:w}),g?E.jsx("div",{className:"admin-dashboard-loading",children:"Loading users..."}):E.jsx(X4,{users:e,onSelectUser:Q}),s&&E.jsx(Z4,{user:s,diaryEntries:u,comments:m,onClose:()=>o(null),onDelete:se,onDisable:H,onEnable:Y,onSendMessage:P,onDeleteDiary:ne,onDeleteComment:fe}),O&&E.jsx(J4,{onSend:Re,onClose:()=>M(!1)})]})}const rM=[{icon:E.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:E.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:E.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:E.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:E.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:E.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:E.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:E.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],sM=[{icon:E.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:E.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:E.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],aM="https://image.tmdb.org/t/p/w500";function oM(){const{currentUser:i}=Or(),[e,n]=L.useState([]),[s,o]=L.useState(!0),[u,d]=L.useState("");return L.useEffect(()=>{async function m(){o(!0),d("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{d("Could not load trending movies.")}o(!1)}m()},[]),i?E.jsx(hs,{to:"/dashboard"}):E.jsx("div",{className:"sw-bg",children:E.jsxs("div",{className:"sw-container",children:[E.jsxs("div",{className:"sw-header-box sw-header-custom",children:[E.jsx("div",{className:"sw-logo-row",children:E.jsx("div",{className:"sw-header-logo-bg",children:E.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),E.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),E.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover Whats Next."}),E.jsx(Ig,{to:"/login",children:E.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),E.jsxs("div",{className:"sw-section",children:[E.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),E.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:rM.map((m,p)=>E.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[E.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),E.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),E.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),E.jsxs("div",{className:"sw-section",children:[E.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),E.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:sM.map((m,p)=>E.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[E.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),E.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),E.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),E.jsxs("div",{className:"sw-section",children:[E.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),E.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?E.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?E.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?E.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>E.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[E.jsx("img",{src:m.poster_path?`${aM}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),E.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),E.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function lM({entryId:i}){console.log("entryId:",i);const{currentUser:e}=Or(),[n,s]=L.useState([]),[o,u]=L.useState(!0),[d,m]=L.useState(""),[p,g]=L.useState(null),[T,w]=L.useState(""),[I,O]=L.useState({}),[M,Q]=L.useState(!0),H=L.useRef(null);async function Y(S){if(!S)return"Anonymous";try{const R=await au(Lt(Be,"users",S.uid));if(R&&R.exists())return R.data().displayName||S.displayName||(S.email?S.email.split("@")[0]:S.uid)}catch{}return S.displayName||(S.email?S.email.split("@")[0]:S.uid)}L.useEffect(()=>{const S=ru(cn(Be,`discussions/${i}/comments`),Hb("timestamp","asc")),R=UC(S,N=>{const x=N.docs.map(k=>({id:k.id,...k.data(),votes:k.data().votes||{}}));if(console.log("Fetched comments:",x),s(x),e){const k={};x.forEach(C=>{C.votes&&C.votes[e.uid]&&(k[C.id]=C.votes[e.uid])}),O(k)}u(!1)});return()=>R()},[i,e]);const se=async S=>{if(S.preventDefault(),!d.trim())return;const R=await Y(e);await Uh(cn(Be,`discussions/${i}/comments`),{text:d,author:R,authorUid:e?e.uid:null,timestamp:yp(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),H.current&&H.current.focus()},ne=async S=>{if(!T.trim())return;const R=await Y(e);await Uh(cn(Be,`discussions/${i}/comments`),{text:T,author:R,authorUid:e?e.uid:null,timestamp:yp(),parentId:S,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),w("")},fe=async(S,R)=>{if(!e)return;const N=Lt(Be,`discussions/${i}/comments`,S),x=n.find(De=>De.id===S);if(!x)return;const k=x.votes?x.votes[e.uid]:void 0;let C={};R==="up"?C={upvotes:vo(k==="up"?0:1),...k==="down"?{downvotes:vo(-1)}:{},[`votes.${e.uid}`]:"up"}:R==="down"&&(C={downvotes:vo(k==="down"?0:1),...k==="up"?{upvotes:vo(-1)}:{},[`votes.${e.uid}`]:"down"}),O(De=>({...De,[S]:R})),await ma(N,C)},pe=async S=>{if(!e)return;const R=n.find(x=>x.id===S);if(!R||R.authorUid!==e.uid)return;const N=async x=>{const k=n.filter(De=>De.parentId===x);for(const De of k)De.authorUid===e.uid&&await N(De.id);const C=n.find(De=>De.id===x);C&&C.authorUid===e.uid&&await hu(Lt(Be,`discussions/${i}/comments`,x))};await N(S)};function Re({commentId:S,level:R,childrenCount:N,render:x,showCount:k=1}){const[C,De]=L.useState(!1),Me=x(S,R+1);return!Me||Me.length===0?null:C?E.jsxs("div",{children:[Me,N>k&&E.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>De(!1),children:"Hide Replies"})]}):E.jsxs("div",{children:[Me.slice(0,k),N>k&&E.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>De(!0),children:["View ",N-k+1," more repl",N-k+1===1?"y":"ies"]})]})}const P=(S=null,R=0)=>n.filter(x=>x.parentId===S).map(x=>{var C,De,Me,W;const k=n.filter(oe=>oe.parentId===x.id);return E.jsxs("div",{className:`discussion-comment${R>0?" discussion-reply":""}`,style:{marginLeft:R*18},children:[E.jsxs("div",{className:"discussion-header",children:[E.jsx("span",{className:"discussion-author",children:x.author}),E.jsx("span",{className:"discussion-date",children:((W=(De=(C=x.timestamp)==null?void 0:C.toDate)==null?void 0:(Me=De.call(C)).toLocaleString)==null?void 0:W.call(Me))||""})]}),E.jsx("div",{className:"discussion-body",children:x.text}),E.jsxs("div",{className:"discussion-actions",children:[E.jsxs("button",{className:`discussion-vote${I[x.id]==="up"?" voted":""}`,onClick:()=>fe(x.id,"up"),title:"Thumbs up",disabled:I[x.id]==="up",children:[" ",x.upvotes||0]}),E.jsxs("button",{className:`discussion-vote${I[x.id]==="down"?" voted":""}`,onClick:()=>fe(x.id,"down"),title:"Thumbs down",disabled:I[x.id]==="down",children:[" ",x.downvotes||0]}),E.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(x.id),children:"Reply"}),x.authorUid===(e==null?void 0:e.uid)&&E.jsx("button",{className:"discussion-delete-btn",onClick:()=>pe(x.id),title:"Delete",children:""})]}),p===x.id&&E.jsxs("div",{className:"discussion-reply-form",children:[E.jsx("input",{type:"text",value:T,onChange:oe=>w(oe.target.value),placeholder:"Write a reply...",autoFocus:!0}),E.jsx("button",{onClick:()=>ne(x.id),children:"Send"}),E.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),E.jsx(Re,{commentId:x.id,level:R,childrenCount:k.length,render:P,showCount:1})]},x.id)});return E.jsxs("div",{className:"discussion-section",children:[E.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Q(S=>!S),style:{marginBottom:M?0:10},children:M?"Show Discussion":"Hide Discussion"}),!M&&E.jsxs(E.Fragment,{children:[E.jsx("h4",{children:"Discussion"}),E.jsxs("form",{onSubmit:se,className:"discussion-form",children:[E.jsx("input",{type:"text",ref:H,value:d,onChange:S=>m(S.target.value),placeholder:"Add a comment..."}),E.jsx("button",{type:"submit",children:"Send"})]}),E.jsx("div",{className:"discussion-comments",children:o?E.jsx("div",{children:"Loading..."}):P()})]})]})}var fS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KE=ys.createContext&&ys.createContext(fS),uM=["attr","size","title"];function cM(i,e){if(i==null)return{};var n=hM(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function hM(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Qh(){return Qh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Qh.apply(this,arguments)}function QE(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Yh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QE(Object(n),!0).forEach(function(s){dM(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function dM(i,e,n){return e=fM(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function fM(i){var e=mM(i,"string");return typeof e=="symbol"?e:e+""}function mM(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function mS(i){return i&&i.map((e,n)=>ys.createElement(e.tag,Yh({key:n},e.attr),mS(e.child)))}function Cn(i){return e=>ys.createElement(pM,Qh({attr:Yh({},i.attr)},e),mS(i.child))}function pM(i){var e=n=>{var{attr:s,size:o,title:u}=i,d=cM(i,uM),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),ys.createElement("svg",Qh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,d,{className:p,style:Yh(Yh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&ys.createElement("title",null,u),i.children)};return KE!==void 0?ys.createElement(KE.Consumer,null,n=>e(n)):e(fS)}function gM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"},child:[]}]})(i)}function yM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(i)}function vM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function YE(i){return Cn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function _M(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(i)}function WE(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function EM(i){return Cn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(i)}function TM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(i)}function bM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(i)}function wM(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(i)}function XE(i){return Cn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(i)}function SM(i){return Cn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function AM(i){return Cn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"},child:[]}]})(i)}function RM(i){return Cn({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(i)}function IM(){return E.jsxs("div",{style:{textAlign:"center",margin:"2rem 0"},children:[E.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block"},children:E.jsx("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/stacked-blue-5c3c7c3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c7e6f2a2e4e6e1f3c.svg",alt:"TMDb Logo",style:{height:48,marginBottom:8}})}),E.jsxs("div",{style:{fontSize:"0.95rem",color:"#888"},children:["This product uses the"," ",E.jsx("a",{href:"https://www.themoviedb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb API"})," ","but is not endorsed or certified by TMDb."]})]})}function CM({notification:i,onDismiss:e}){const{title:n,message:s,type:o="info"}=i;let u=E.jsx(TM,{color:"#25609c",size:22});return o==="warning"&&(u=E.jsx(EM,{color:"#f59e42",size:22})),o==="error"&&(u=E.jsx(XE,{color:"#dc2626",size:22})),E.jsxs("div",{className:`notification-banner notification-${o}`,children:[E.jsx("span",{className:"notification-icon",children:u}),E.jsxs("div",{className:"notification-content",children:[E.jsx("strong",{children:n}),E.jsx("div",{children:s})]}),E.jsx("button",{className:"notification-dismiss",onClick:e,title:"Dismiss notification",children:E.jsx(XE,{size:20})})]})}const _o="ca9a91468bb700f84faf986252bc3fe6",Zl="https://api.themoviedb.org/3",Km="US";function xM(){const{currentUser:i,logout:e}=Or(),n=Fo(),[s,o]=L.useState("movie"),[u,d]=L.useState(""),[m,p]=L.useState([]),[g,T]=L.useState(!1),[w,I]=L.useState(""),[O,M]=L.useState([]),[Q,H]=L.useState({}),Y=L.useRef(null),se=L.useRef(""),[ne,fe]=L.useState(null),[pe,Re]=L.useState(""),P=L.useRef({}),[S,R]=L.useState(!1),[N,x]=L.useState(null),[k,C]=L.useState(!1),[De,Me]=L.useState(""),[W,oe]=L.useState(!1),[ve,Le]=L.useState(""),[V,ie]=L.useState(!1),[ue,re]=L.useState(""),[ge,Pe]=L.useState("movie"),[we,Et]=L.useState([]),[at,_n]=L.useState(!0),[ri,xn]=L.useState(""),[yi,vi]=L.useState(1),[Gi,Os]=L.useState(!1);L.useEffect(()=>{async function j(){if(!i)return;const ae=await au(Lt(Be,"users",i.uid));if(ae.exists()){const _e=ae.data();Os(Array.isArray(_e.roles)&&_e.roles.includes("admin"))}}j()},[i]),L.useEffect(()=>{Et([]),vi(1),_n(!0),xn("")},[ge]),L.useEffect(()=>{let j=!0;async function ae(_e=1){_n(!0),xn("");try{const ce=await fetch(`https://api.themoviedb.org/3/trending/${ge}/week?api_key=${_o}&page=${_e}`);if(!ce.ok)throw new Error("Failed to fetch trending");const he=await ce.json();j&&Et(_e===1?he.results:Ee=>{const tt=new Set(Ee.map(Bt=>Bt.id));return[...Ee,...he.results.filter(Bt=>!tt.has(Bt.id))]})}catch{j&&xn("Could not load trending.")}j&&_n(!1)}return ae(yi),()=>{j=!1}},[ge,yi]),L.useEffect(()=>{we.filter(ae=>!O.some(_e=>_e.id===ae.id&&_e.media_type===ge)).length<12&&we.length<100&&vi(ae=>ae+1)},[we,O,ge]),L.useEffect(()=>{if(!i)return;async function j(){const ae=ru(cn(Be,"diary"),hh("uid","==",i.uid));let ce=(await An(ae)).docs.map(he=>({...he.data(),docId:he.id}));ce=ce.sort((he,Ee)=>new Date(Ee.createdAt)-new Date(he.createdAt)),M(ce);for(const he of ce)Ms(he)}j()},[i]),L.useEffect(()=>{if(!i){Me(""),Le("");return}let j=!1;async function ae(){const _e=await au(Lt(Be,"users",i.uid));let ce="";_e.exists()?ce=_e.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):ce=i.displayName||(i.email?i.email.split("@")[0]:i.uid),j||(Me(ce),Le(ce))}return ae(),()=>{j=!0}},[i&&i.uid]);async function Ms(j){var _e,ce,he,Ee;if(Q[j.id])return;const ae=Lt(Be,"tmdbProvidersCache",`${j.media_type}_${j.id}`);try{const tt=await au(ae),Bt=Date.now();if(tt.exists()){const Ce=tt.data();if(Ce.providers&&(Ce.providers.flatrate=Array.isArray(Ce.providers.flatrate)?Ce.providers.flatrate:[],Ce.providers.rent=Array.isArray(Ce.providers.rent)?Ce.providers.rent:[],Ce.providers.buy=Array.isArray(Ce.providers.buy)?Ce.providers.buy:[]),Ce.timestamp&&Bt-Ce.timestamp<24*60*60*1e3){H(it=>({...it,[j.id]:Ce.providers}));return}}let rn="";j.media_type==="movie"?rn=`${Zl}/movie/${j.id}/watch/providers?api_key=${_o}`:rn=`${Zl}/tv/${j.id}/watch/providers?api_key=${_o}`;const yt=await fetch(rn);if(yt.status===404){H(Ce=>({...Ce,[j.id]:{}})),await Um(ae,{providers:{},timestamp:Bt});return}const Nn=await yt.json(),nt=((_e=Nn.results)==null?void 0:_e[Km])||((ce=Nn.results)==null?void 0:ce[0]),Hn=(Ee=(he=nt==null?void 0:nt.release_dates)==null?void 0:he.find(Ce=>Ce.certification))==null?void 0:Ee.certification;nt.flatrate=Array.isArray(nt.flatrate)?nt.flatrate:[],nt.rent=Array.isArray(nt.rent)?nt.rent:[],nt.buy=Array.isArray(nt.buy)?nt.buy:[],H(Ce=>({...Ce,[j.id]:nt})),await Um(ae,{providers:nt,timestamp:Bt})}catch{H(Bt=>({...Bt,[j.id]:{}}))}}async function fn(j,ae){if(!j.trim()){p([]),I(""),T(!1);return}T(!0),I(""),p([]);try{const ce=`${Zl}${ae==="movie"?"/search/movie":"/search/tv"}?api_key=${_o}&query=${encodeURIComponent(j)}`,Ee=await(await fetch(ce)).json();Ee.results?p(Ee.results):(p([]),I("No results found."))}catch{I("Failed to fetch results.")}T(!1)}L.useEffect(()=>{if(!(u.trim()===""||u===se.current))return Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{fn(u,s)},400),()=>clearTimeout(Y.current)},[u,s]);async function $o(j){j.preventDefault(),se.current=u,await fn(u,s)}async function Mr(j){if(!i||O.some(Ee=>Ee.id===j.id&&Ee.media_type===(j.media_type||s)))return;const ae={uid:i.uid,id:j.id,title:j.title||j.name,date:(j.release_date||j.first_air_date||"").slice(0,10),poster:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",desc:j.overview||"No description.",watched:!1,archived:!1,media_type:j.media_type||s,createdAt:new Date().toISOString()};await Uh(cn(Be,"diary"),ae);const _e=ru(cn(Be,"diary"),hh("uid","==",i.uid));let he=(await An(_e)).docs.map(Ee=>({...Ee.data(),docId:Ee.id}));he=he.sort((Ee,tt)=>new Date(tt.createdAt)-new Date(Ee.createdAt)),M(he),Ms(ae),p([]),d("")}async function kr(j){M(ae=>ae.filter(_e=>_e.docId!==j)),fe(null);try{await hu(Lt(Be,"diary",j));const ae=ru(cn(Be,"diary"),hh("uid","==",i.uid));let ce=(await An(ae)).docs.map(he=>({...he.data(),docId:he.id}));ce=ce.sort((he,Ee)=>new Date(Ee.createdAt)-new Date(he.createdAt)),M(ce)}catch{window.alert("Failed to remove entry. Please try again.")}}async function $i(j,ae){const _e=!ae,ce=_e;M(he=>he.map(Ee=>Ee.docId===j?{...Ee,watched:_e,archived:ce}:Ee)),fe(he=>he&&he.docId===j?{...he,watched:_e,archived:ce}:he);try{await ma(Lt(Be,"diary",j),{watched:_e,archived:ce})}catch{M(Ee=>Ee.map(tt=>tt.docId===j?{...tt,watched:ae,archived:ae}:tt)),fe(Ee=>Ee&&Ee.docId===j?{...Ee,watched:ae,archived:ae}:Ee),window.alert("Failed to update watched status. Please try again.")}}async function Ko(j,ae){M(_e=>_e.map(ce=>ce.docId===j?{...ce,archived:!ae}:ce)),fe(_e=>_e&&_e.docId===j?{..._e,archived:!ae}:_e);try{await ma(Lt(Be,"diary",j),{archived:!ae})}catch{M(ce=>ce.map(he=>he.docId===j?{...he,archived:ae}:he)),fe(ce=>ce&&ce.docId===j?{...ce,archived:ae}:ce),window.alert("Failed to update archive status. Please try again.")}}function Vr(j){window.alert(`Share this: ${j.title}`)}async function ks(){if(!ve.trim()){re("Display name cannot be empty.");return}ie(!0),re("");try{await Um(Lt(Be,"users",i.uid),{displayName:ve.trim()},{merge:!0}),Me(ve.trim()),oe(!1);const j=await au(Lt(Be,"users",i.uid));if(j.exists()){const ae=j.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);Me(ae),Le(ae)}}catch{re("Failed to update display name.")}ie(!1)}function Ia(){Le(De),oe(!0),re("")}function mt(){oe(!1),re("")}async function Xe(j){var ae,_e,ce,he,Ee,tt;if(!j)return"";try{if(j.media_type==="movie"){const rn=await(await fetch(`${Zl}/movie/${j.id}/release_dates?api_key=${_o}`)).json(),yt=((ae=rn.results)==null?void 0:ae.find(nt=>nt.iso_3166_1===Km))||((_e=rn.results)==null?void 0:_e[0]);return((he=(ce=yt==null?void 0:yt.release_dates)==null?void 0:ce.find(nt=>nt.certification))==null?void 0:he.certification)||""}else if(j.media_type==="tv"){const rn=await(await fetch(`${Zl}/tv/${j.id}/content_ratings?api_key=${_o}`)).json(),yt=((Ee=rn.results)==null?void 0:Ee.find(Nn=>Nn.iso_3166_1===Km))||((tt=rn.results)==null?void 0:tt[0]);return(yt==null?void 0:yt.rating)||""}}catch{return""}return""}function Qt(j){fe(j),Re(""),Xe(j).then(ae=>Re(ae||""))}function zt({entry:j,providersMap:ae,onClose:_e,onShare:ce,onToggleWatched:he,onRemove:Ee,onArchiveToggle:tt,diary:Bt,contentRating:rn}){if(!j)return null;const yt=ae[j.id]||{},Nn=yt.flatrate||[],nt=yt.rent||[],Hn=yt.buy||[],Ce=j;return Fm.createPortal(E.jsx("div",{className:"dashboard-modal-overlay",onClick:_e,children:E.jsxs("div",{className:"dashboard-modal-content",onClick:it=>it.stopPropagation(),style:{background:"#23242a"},children:[E.jsx("button",{className:"dashboard-modal-close",onClick:_e,"aria-label":"Close modal",type:"button",children:""}),E.jsxs("div",{className:"dashboard-modal-body",children:[E.jsx("img",{className:"dashboard-diary-poster",src:Ce.poster_path?`https://image.tmdb.org/t/p/w300${Ce.poster_path}`:Ce.poster||"https://placehold.co/120x170?text=No+Image",alt:Ce.title,style:{marginBottom:"1rem"}}),E.jsx("div",{className:"dashboard-diary-movie-title",children:Ce.title}),E.jsxs("div",{className:"dashboard-diary-date",children:[Ce.release_date?Ce.release_date.slice(0,4):Ce.date||"",rn&&E.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:rn})]}),E.jsx("div",{className:"dashboard-diary-desc",children:Ce.overview||Ce.desc||""}),E.jsxs("div",{className:"dashboard-diary-providers-modal",children:[E.jsxs("div",{className:"dashboard-diary-providers-group",children:[E.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),E.jsx("div",{className:"dashboard-diary-providers-icons",children:Nn.length===0?E.jsx("span",{style:{color:"#888"},children:"N/A"}):Nn.map(it=>E.jsx("img",{src:`https://image.tmdb.org/t/p/w45${it.logo_path}`,alt:it.provider_name,title:it.provider_name,className:"dashboard-provider-icon-sm"},it.provider_id))})]}),E.jsxs("div",{className:"dashboard-diary-providers-group",children:[E.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),E.jsx("div",{className:"dashboard-diary-providers-icons",children:nt.length===0?E.jsx("span",{style:{color:"#888"},children:"N/A"}):nt.map(it=>E.jsx("img",{src:`https://image.tmdb.org/t/p/w45${it.logo_path}`,alt:it.provider_name,title:it.provider_name,className:"dashboard-provider-icon-sm"},it.provider_id))})]}),E.jsxs("div",{className:"dashboard-diary-providers-group",children:[E.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),E.jsx("div",{className:"dashboard-diary-providers-icons",children:Hn.length===0?E.jsx("span",{style:{color:"#888"},children:"N/A"}):Hn.map(it=>E.jsx("img",{src:`https://image.tmdb.org/t/p/w45${it.logo_path}`,alt:it.provider_name,title:it.provider_name,className:"dashboard-provider-icon-sm"},it.provider_id))})]})]}),j.media_type==="tv"&&(j.tmdbId||j.id)&&E.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:E.jsx(W4,{show:{...j,tmdbId:j.tmdbId||j.id}})}),E.jsxs("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:[E.jsx("button",{className:"dashboard-diary-share",onClick:()=>ce(Ce),title:"Share this diary entry with friends via link or social media",children:"SHARE"}),E.jsx("button",{className:Ce.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>he(Ce.docId,Ce.watched),title:Ce.watched?"Mark as not watched":"Mark as watched",children:Ce.watched?"WATCHED":"UNWATCHED"}),E.jsx("button",{className:"dashboard-diary-archive",style:{background:j.archived?"#b2b2b2":"#25609c",color:j.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>tt(j.docId,j.archived),title:j.archived?"Move this entry back to active diary":"Archive this entry (hide from main diary)",children:j.archived?"Unarchive":"Archive"}),E.jsx("button",{className:"dashboard-diary-remove",onClick:()=>Ee(Ce.docId),title:"Remove this diary entry permanently",children:"REMOVE"})]}),E.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[E.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),E.jsx(lM,{entryId:Ce.id})]})]})]})}),document.getElementById("modal-root"))}const Ca=ys.memo(zt);function Qo(){const j={};return O.filter(ae=>ae.media_type===s).forEach(ae=>{const _e=Q[ae.id];_e&&[..._e.flatrate||[],..._e.rent||[],..._e.buy||[]].forEach(ce=>{j[ce.provider_id]=ce})}),Object.values(j)}const _i=N?O.filter(j=>{if(j.media_type!==s||j.archived)return!1;const ae=Q[j.id];return ae?[...ae.flatrate||[],...ae.rent||[],...ae.buy||[]].some(_e=>_e.provider_id===N.provider_id):!1}):O.filter(j=>j.media_type===s&&!j.archived);function Ki({open:j,onClose:ae,providers:_e,onSelect:ce}){return j?Fm.createPortal(E.jsx("div",{className:"dashboard-modal-overlay",onClick:ae,children:E.jsxs("div",{className:"dashboard-modal-content",onClick:he=>he.stopPropagation(),style:{maxWidth:440,padding:24},children:[E.jsx("button",{className:"dashboard-modal-close",onClick:ae,"aria-label":"Close modal",type:"button",children:""}),E.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"Click to View Streaming Providers"}),E.jsx("div",{style:{margin:"0 0 12px 0",color:"#8fc7ff",fontSize:"1.02rem",textAlign:"center",fontWeight:500},children:"View all providers. Click on a provider icon below to filter your diary and see which shows can be watched for that provider."}),E.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:_e.map(he=>E.jsx("img",{src:`https://image.tmdb.org/t/p/w45${he.logo_path}`,alt:he.provider_name,title:he.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:N&&N.provider_id===he.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>{ce(he),x(he)}},he.provider_id))}),N&&E.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>x(null),children:"Show All Entries"}),E.jsx("div",{style:{marginTop:24},children:_i.length===0?E.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):E.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:_i.map(he=>E.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0003",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center",cursor:"pointer"},onClick:()=>{Qt(he),ae()},children:[E.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:E.jsx("img",{src:he.poster,alt:he.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),E.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:he.title})]},he.docId))})})]})}),document.getElementById("modal-root")):null}const Ei=O.filter(j=>!j.archived&&j.media_type===s),En=O.filter(j=>j.archived&&j.media_type===s);function Qi(j){Pe(j)}function Yi(j){Mr({id:j.id,title:j.title||j.name,poster_path:j.poster_path,release_date:j.release_date||j.first_air_date,overview:j.overview,media_type:ge}),Et(ae=>ae.filter(_e=>_e.id!==j.id))}function Vs(){const[j,ae]=L.useState(!1);L.useEffect(()=>{function ce(){ae(window.scrollY>300)}return window.addEventListener("scroll",ce),()=>window.removeEventListener("scroll",ce)},[]);const _e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return j?E.jsx("button",{onClick:_e,style:{position:"fixed",right:18,bottom:28,zIndex:9999,background:"rgba(37,96,156,0.93)",color:"#fff",border:"none",borderRadius:"50%",width:54,height:54,boxShadow:"0 3px 12px #0005",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,cursor:"pointer",touchAction:"manipulation"},"aria-label":"Back to top",className:"back-to-top-btn",children:E.jsx("span",{style:{fontSize:45,marginTop:-2},children:""})}):null}const[Pr,Lr]=L.useState([]),[Ti,Bn]=L.useState(!0);L.useEffect(()=>{let j=!1;async function ae(){if(!i)return;Bn(!0);const _e=ru(cn(Be,`users/${i.uid}/notifications`),hh("read","==",!1),Hb("createdAt","desc")),he=(await An(_e)).docs.map(Ee=>({id:Ee.id,...Ee.data()}));j||(Lr(he),Bn(!1))}return ae(),()=>{j=!0}},[i,Be]);async function Ps(j){i&&(await ma(Lt(Be,`users/${i.uid}/notifications`,j),{read:!0}),Lr(Pr.filter(ae=>ae.id!==j)))}const[qn,Ur]=L.useState(!1);function bi({open:j,onClose:ae}){return j?Fm.createPortal(E.jsx("div",{className:"dashboard-modal-overlay",onClick:ae,children:E.jsxs("div",{className:"dashboard-modal-content dashboard-instructions-modal",onClick:_e=>_e.stopPropagation(),style:{maxWidth:780,padding:36,background:"#23242a",color:"#e8f0fe",borderRadius:18,boxShadow:"0 4px 32px #205a7a22"},children:[E.jsx("button",{className:"dashboard-modal-close",onClick:ae,"aria-label":"Close modal",type:"button",children:""}),E.jsx("h2",{style:{color:"#8fc7ff",textAlign:"center",marginBottom:24,fontWeight:700,fontSize:"2rem"},children:"How to Use This Dashboard"}),E.jsxs("div",{className:"dashboard-instructions-grid",children:[E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(wM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"Search for a Show or Movie"}),E.jsx("div",{className:"dashboard-instruction-desc",children:"Use the search bar at the top to find movies or TV shows. Results come from TMDb."})]}),E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(bM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"Add to Your Diary"}),E.jsx("div",{className:"dashboard-instruction-desc",children:"Click on a result to add it to your diary. Track what youve watched or want to watch."})]}),E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(yM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"Mark as Watched/Unwatched"}),E.jsx("div",{className:"dashboard-instruction-desc",children:"Toggle the watched status for each diary entry to keep your list up to date."})]}),E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(WE,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"Edit or Remove Entries"}),E.jsx("div",{className:"dashboard-instruction-desc",children:"Click a diary entry to view details, edit notes, or remove it from your diary."})]}),E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(AM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"View Streaming Providers"}),E.jsx("div",{className:"dashboard-instruction-desc",children:"See where you can stream each show or movie (US region by default)."})]}),E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(_M,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"Join Discussions"}),E.jsx("div",{className:"dashboard-instruction-desc",children:"Add comments or replies to discuss shows with others. Upvote or downvote comments."})]}),E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(RM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"Manage Your Profile"}),E.jsx("div",{className:"dashboard-instruction-desc",children:"Update your display name and view your activity stats at the top of the dashboard."})]}),E.jsxs("div",{className:"dashboard-instruction-card",children:[E.jsx(gM,{size:30,style:{color:"#8fc7ff",marginBottom:8}}),E.jsx("div",{className:"dashboard-instruction-title",children:"Archive Entries"}),E.jsx("div",{className:"dashboard-instruction-desc",children:'Archive shows/movies youve finished or want to hide from your main list. Toggle "Show Archived" to view them.'})]})]}),E.jsx("hr",{style:{border:"none",borderTop:"1px solid #355a7a",margin:"30px 0 18px 0"}}),E.jsxs("div",{style:{textAlign:"center",color:"#b8c6e4",fontSize:"1.08rem"},children:["Need more help? ",E.jsx("a",{href:"#",style:{color:"#8fc7ff",fontWeight:600,textDecoration:"underline"},children:"Contact support"})," or ",E.jsx("a",{href:"#",style:{color:"#8fc7ff",fontWeight:600,textDecoration:"underline"},children:"check the FAQ"})]}),E.jsx("style",{children:`
            .dashboard-instructions-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 28px 32px;
              margin-bottom: 0;
            }
            .dashboard-instruction-card {
              background: rgba(37,96,156,0.13);
              border-radius: 14px;
              padding: 22px 18px 18px 18px;
              box-shadow: 0 2px 12px #0002;
              display: flex;
              flex-direction: column;
              align-items: flex-start;
              min-height: 120px;
              transition: box-shadow 0.18s;
            }
            .dashboard-instruction-title {
              font-weight: 700;
              font-size: 1.14rem;
              margin-bottom: 6px;
              color: #e8f0fe;
            }
            .dashboard-instruction-desc {
              font-size: 1.07rem;
              color: #b8c6e4;
              font-weight: 400;
            }
            @media (max-width: 800px) {
              .dashboard-instructions-grid {
                grid-template-columns: 1fr;
                gap: 18px 0;
              }
            }
          `})]})}),document.getElementById("modal-root")):null}return E.jsxs("div",{style:{background:"#23242a",minHeight:"100vh",width:"100vw"},children:[Pr.map(j=>E.jsx(CM,{notification:j,onDismiss:()=>Ps(j.id)},j.id)),E.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:20,marginBottom:8},children:E.jsx("button",{className:"dashboard-toggle",style:{fontSize:"1.07rem",padding:"0.6rem 1.5rem",fontWeight:700,background:"#25609c",color:"#fff",border:"none",borderRadius:7,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",letterSpacing:1},onClick:()=>Ur(!0),children:"Show Instructions"})}),E.jsx(bi,{open:qn,onClose:()=>Ur(!1)}),E.jsxs("div",{className:"dashboard-bg",children:[E.jsx("style",{children:`
            .dashboard-trending-movie-title {
              display: -webkit-box;
              -webkit-line-clamp: 2;
              -webkit-box-orient: vertical;
              overflow: hidden;
              min-height: 2.7em;
              max-height: 2.7em;
              line-height: 1.35em;
              font-size: 1.07rem;
              font-weight: 600;
              color: #fff;
              margin: 0.7em 0 0.2em 0;
              text-align: center;
            }
            .dashboard-trending-desc {
              display: -webkit-box;
              -webkit-line-clamp: 5;
              -webkit-box-orient: vertical;
              overflow: hidden;
              min-height: 6.75em;
              max-height: 6.75em;
              line-height: 1.35em;
              font-size: 0.98rem;
              color: #c7d0e0;
              margin-bottom: 1em;
              text-align: center;
            }
          `}),E.jsxs("div",{className:"dashboard-content-wrapper",children:[E.jsx("div",{className:"dashboard-banner",children:E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[E.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),W?E.jsxs(E.Fragment,{children:[E.jsx("input",{type:"text",value:ve,onChange:j=>Le(j.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:V,autoFocus:!0}),E.jsx("button",{onClick:ks,disabled:V,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:E.jsx(vM,{})}),E.jsx("button",{onClick:mt,disabled:V,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:E.jsx(SM,{})})]}):E.jsxs(E.Fragment,{children:[E.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:De}),E.jsx("button",{onClick:Ia,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:E.jsx(WE,{})})]})]}),ue&&E.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:ue}),E.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[E.jsx("button",{className:"dashboard-signout",onClick:async()=>{try{await e(),window.localStorage.clear(),window.sessionStorage.clear(),n("/"),window.location.reload()}catch{alert("Failed to sign out")}},style:{background:"#2a1b1b",color:"#ffb3b3",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},children:"Sign Out"}),Gi&&E.jsx("button",{className:"dashboard-admin-btn",style:{background:"#25609c",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s",marginBottom:"1.5rem",marginTop:"0.5rem",float:"right",zIndex:1e3,minWidth:180,width:220,maxWidth:260},onClick:()=>n("/admin"),children:"Admin Dashboard"})]})]})}),E.jsxs("div",{className:"dashboard-search-section",children:[E.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),E.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),E.jsx("div",{className:"dashboard-search-instructions",children:"NEED INSTRUCTIONS?"}),E.jsxs("div",{className:"dashboard-search-toggle-row",children:[E.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),E.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),E.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:$o,children:[E.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows*",value:u,onChange:j=>d(j.target.value)}),E.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),E.jsxs("div",{className:"dashboard-search-results",children:[w&&E.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:w}),!w&&m.length>0&&E.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(j=>E.jsxs("div",{className:"dashboard-trending-card",children:[E.jsx("img",{src:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:j.title||j.name,className:"dashboard-trending-poster"}),E.jsx("div",{className:"dashboard-trending-movie-title",children:j.title||j.name}),E.jsx("div",{className:"dashboard-trending-year",children:(j.release_date||j.first_air_date||"").slice(0,4)}),E.jsx("div",{className:"dashboard-trending-desc",children:j.overview?j.overview.slice(0,90)+(j.overview.length>90?"":""):"No description."}),E.jsx("button",{className:"dashboard-trending-add",onClick:()=>Mr(j),children:O.some(ae=>ae.id===j.id)?"IN DIARY":"ADD TO DIARY"})]},j.id))})]})]}),E.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"1.5rem 0"},children:E.jsx("ins",{className:"adsbygoogle",style:{display:"block",width:"100%",maxWidth:728,minHeight:90},"data-ad-client":"ca-pub-5502818698237515","data-ad-slot":"1749671682","data-ad-format":"auto"})}),E.jsxs("div",{className:"dashboard-diary-section",children:[E.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),E.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[E.jsx("button",{className:`dashboard-toggle${k?"":" active"}`,onClick:()=>C(!1),children:"My Diary"}),E.jsx("button",{className:`dashboard-toggle${k?" active":""}`,onClick:()=>C(!0),children:"Archived"})]}),E.jsx("div",{className:"dashboard-diary-providers-row",children:E.jsx("button",{className:"dashboard-providers-btn",onClick:()=>R(!0),title:"View all providers. Click on a provider icon to see which shows can be watched for that provider.",children:"Click to View Streaming Providers"})}),k?En.length===0?E.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No archived entries."}):E.jsx("div",{className:"dashboard-diary-cards-row",children:En.map(j=>(P.current[j.docId]||(P.current[j.docId]=L.createRef()),E.jsxs("section",{ref:ae=>P.current[j.docId]=ae,className:"dashboard-diary-card collapsed",children:[E.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:E.jsx("img",{src:j.poster,alt:j.title,className:"dashboard-diary-poster collapsed"})}),E.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:j.title}),E.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Qt(j),children:["Show More ",E.jsx(YE,{})]})]},j.docId)))}):Ei.length===0?E.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):E.jsx("div",{className:"dashboard-diary-cards-row",children:Ei.map(j=>(P.current[j.docId]||(P.current[j.docId]=L.createRef()),E.jsxs("section",{ref:ae=>P.current[j.docId]=ae,className:"dashboard-diary-card collapsed",children:[E.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:E.jsx("img",{src:j.poster,alt:j.title,className:"dashboard-diary-poster collapsed"})}),E.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:j.title}),E.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Qt(j),children:["Show More ",E.jsx(YE,{})]})]},j.docId)))})]}),E.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),E.jsxs("div",{className:"dashboard-trending-section",children:[E.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",ge==="movie"?"Movies":"TV Shows"]}),E.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[E.jsx("button",{className:ge==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Qi("movie"),children:"Movies"}),E.jsx("button",{className:ge==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Qi("tv"),children:"TV Shows"})]}),E.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:at?E.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading"}):ri?E.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:ri}):we.filter(j=>!O.some(ae=>ae.id===j.id&&ae.media_type===ge)).slice(0,10).map(j=>E.jsxs("div",{className:"dashboard-trending-card",children:[E.jsx("img",{src:j.poster_path?`https://image.tmdb.org/t/p/w200${j.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:j.title||j.name,className:"dashboard-trending-poster"}),E.jsx("div",{className:"dashboard-trending-movie-title",children:j.title||j.name}),E.jsx("div",{className:"dashboard-trending-year",children:(j.release_date||j.first_air_date||"").slice(0,4)}),E.jsx("div",{className:"dashboard-trending-desc",children:j.overview?j.overview.slice(0,90)+(j.overview.length>90?"":""):"No description."}),E.jsx("button",{className:"dashboard-trending-add",onClick:()=>Yi(j),children:"ADD TO DIARY"})]},j.id))})]})]})]}),ne&&E.jsx(Ca,{entry:ne,providersMap:Q,onClose:()=>fe(null),onShare:Vr,onToggleWatched:$i,onRemove:kr,onArchiveToggle:Ko,diary:O,contentRating:pe}),E.jsx(Ki,{open:S,onClose:()=>{R(!1),x(null)},providers:Qo(),onSelect:j=>x(j)}),E.jsx(Vs,{}),E.jsx(IM,{})]})}function NM(){const{currentUser:i,resendVerificationEmail:e,logout:n}=Or(),[s,o]=L.useState(!1),[u,d]=L.useState(""),[m,p]=L.useState(!1),[g,T]=L.useState(!1),w=Fo(),I=async()=>{d("");try{await e(),o(!0)}catch{d("Failed to resend verification email.")}},O=async()=>{await n(),w("/login")},M=async()=>{p(!0),d("");try{await i.reload(),T(!0),i.emailVerified&&window.location.reload()}catch{d("Could not refresh status.")}p(!1)};return E.jsxs("div",{className:"verify-email-page",children:[E.jsxs("div",{className:"verify-branding",children:[E.jsx("img",{src:QA,alt:"Site Logo",className:"verify-logo"}),E.jsx("h2",{children:"Welcome to ShowsWatched!"})]}),E.jsxs("div",{className:"verify-card",children:[E.jsx("h3",{children:"Verify Your Email"}),E.jsxs("p",{children:["We have sent a verification link to ",E.jsx("b",{children:i==null?void 0:i.email}),".",E.jsx("br",{}),"Please check your inbox and click the link to verify your email address."]}),s&&E.jsx("p",{style:{color:"green"},children:"Verification email sent!"}),u&&E.jsx("p",{style:{color:"red"},children:u}),E.jsx("button",{onClick:I,disabled:m,children:"Resend Verification Email"}),E.jsx("button",{onClick:M,disabled:m,style:{marginLeft:"1rem"},children:m?"Checking...":"Refresh Status"}),E.jsx("button",{onClick:O,style:{marginLeft:"1rem",background:"#eee",color:"#333"},children:"Log Out"}),g&&!i.emailVerified&&E.jsx("p",{style:{color:"orange",marginTop:"1rem"},children:"Still not verified. Please try again after clicking the link in your email."})]})]})}function DM(){const{currentUser:i,emailVerified:e}=Or();return E.jsxs(QN,{children:[E.jsx(cs,{path:"/login",element:E.jsx(K4,{})}),E.jsx(cs,{path:"/signup",element:E.jsx(Q4,{})}),E.jsx(cs,{path:"/verify-email",element:E.jsx(NM,{})}),E.jsx(cs,{path:"/admin",element:E.jsx(Y4,{children:i&&!e?E.jsx(hs,{to:"/verify-email",replace:!0}):E.jsx(iM,{})})}),E.jsx(cs,{path:"/dashboard",element:i&&!e?E.jsx(hs,{to:"/verify-email",replace:!0}):E.jsx(xM,{})}),E.jsx(cs,{path:"/",element:i?e?E.jsx(hs,{to:"/dashboard",replace:!0}):E.jsx(hs,{to:"/verify-email",replace:!0}):E.jsx(oM,{})}),E.jsx(cs,{path:"*",element:i&&!e?E.jsx(hs,{to:"/verify-email",replace:!0}):E.jsx(hs,{to:"/",replace:!0})})]})}KA.createRoot(document.getElementById("root")).render(E.jsx(L.StrictMode,{children:E.jsx(vD,{basename:"/showswatched2",children:E.jsx($4,{children:E.jsx(DM,{})})})}));
