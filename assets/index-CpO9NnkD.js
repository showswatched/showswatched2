(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function YE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var _m={exports:{}},ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function VA(){if(F_)return ql;F_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return ql.Fragment=e,ql.jsx=n,ql.jsxs=n,ql}var G_;function kA(){return G_||(G_=1,_m.exports=VA()),_m.exports}var b=kA(),Em={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function PA(){if(K_)return Ve;K_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function I(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Y={};function F(V,ie,ue){this.props=V,this.context=ie,this.refs=Y,this.updater=ue||P}F.prototype.isReactComponent={},F.prototype.setState=function(V,ie){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ie,"setState")},F.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Q(){}Q.prototype=F.prototype;function se(V,ie,ue){this.props=V,this.context=ie,this.refs=Y,this.updater=ue||P}var ne=se.prototype=new Q;ne.constructor=se,M(ne,F.prototype),ne.isPureReactComponent=!0;var he=Array.isArray,me={H:null,A:null,T:null,S:null,V:null},Ae=Object.prototype.hasOwnProperty;function k(V,ie,ue,re,pe,ke){return ue=ke.ref,{$$typeof:i,type:V,key:ie,ref:ue!==void 0?ue:null,props:ke}}function w(V,ie){return k(V.type,ie,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function D(V){var ie={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ue){return ie[ue]})}var N=/\/+/g;function O(V,ie){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):ie.toString(36)}function C(){}function Ie(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(ie){V.status==="pending"&&(V.status="fulfilled",V.value=ie)},function(ie){V.status==="pending"&&(V.status="rejected",V.reason=ie)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Oe(V,ie,ue,re,pe){var ke=typeof V;(ke==="undefined"||ke==="boolean")&&(V=null);var be=!1;if(V===null)be=!0;else switch(ke){case"bigint":case"string":case"number":be=!0;break;case"object":switch(V.$$typeof){case i:case e:be=!0;break;case E:return be=V._init,Oe(be(V._payload),ie,ue,re,pe)}}if(be)return pe=pe(V),be=re===""?"."+O(V,0):re,he(pe)?(ue="",be!=null&&(ue=be.replace(N,"$&/")+"/"),Oe(pe,ie,ue,"",function(_n){return _n})):pe!=null&&(R(pe)&&(pe=w(pe,ue+(pe.key==null||V&&V.key===pe.key?"":(""+pe.key).replace(N,"$&/")+"/")+be)),ie.push(pe)),1;be=0;var Et=re===""?".":re+":";if(he(V))for(var rt=0;rt<V.length;rt++)re=V[rt],ke=Et+O(re,rt),be+=Oe(re,ie,ue,ke,pe);else if(rt=I(V),typeof rt=="function")for(V=rt.call(V),rt=0;!(re=V.next()).done;)re=re.value,ke=Et+O(re,rt++),be+=Oe(re,ie,ue,ke,pe);else if(ke==="object"){if(typeof V.then=="function")return Oe(Ie(V),ie,ue,re,pe);throw ie=String(V),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return be}function X(V,ie,ue){if(V==null)return V;var re=[],pe=0;return Oe(V,re,"","",function(ke){return ie.call(ue,ke,pe++)}),re}function ae(V){if(V._status===-1){var ie=V._result;ie=ie(),ie.then(function(ue){(V._status===0||V._status===-1)&&(V._status=1,V._result=ue)},function(ue){(V._status===0||V._status===-1)&&(V._status=2,V._result=ue)}),V._status===-1&&(V._status=0,V._result=ie)}if(V._status===1)return V._result.default;throw V._result}var ve=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function je(){}return Ve.Children={map:X,forEach:function(V,ie,ue){X(V,function(){ie.apply(this,arguments)},ue)},count:function(V){var ie=0;return X(V,function(){ie++}),ie},toArray:function(V){return X(V,function(ie){return ie})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ve.Component=F,Ve.Fragment=n,Ve.Profiler=o,Ve.PureComponent=se,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(V){return me.H.useMemoCache(V)}},Ve.cache=function(V){return function(){return V.apply(null,arguments)}},Ve.cloneElement=function(V,ie,ue){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var re=M({},V.props),pe=V.key,ke=void 0;if(ie!=null)for(be in ie.ref!==void 0&&(ke=void 0),ie.key!==void 0&&(pe=""+ie.key),ie)!Ae.call(ie,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ie.ref===void 0||(re[be]=ie[be]);var be=arguments.length-2;if(be===1)re.children=ue;else if(1<be){for(var Et=Array(be),rt=0;rt<be;rt++)Et[rt]=arguments[rt+2];re.children=Et}return k(V.type,pe,void 0,void 0,ke,re)},Ve.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Ve.createElement=function(V,ie,ue){var re,pe={},ke=null;if(ie!=null)for(re in ie.key!==void 0&&(ke=""+ie.key),ie)Ae.call(ie,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(pe[re]=ie[re]);var be=arguments.length-2;if(be===1)pe.children=ue;else if(1<be){for(var Et=Array(be),rt=0;rt<be;rt++)Et[rt]=arguments[rt+2];pe.children=Et}if(V&&V.defaultProps)for(re in be=V.defaultProps,be)pe[re]===void 0&&(pe[re]=be[re]);return k(V,ke,void 0,void 0,null,pe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:m,render:V}},Ve.isValidElement=R,Ve.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:ae}},Ve.memo=function(V,ie){return{$$typeof:g,type:V,compare:ie===void 0?null:ie}},Ve.startTransition=function(V){var ie=me.T,ue={};me.T=ue;try{var re=V(),pe=me.S;pe!==null&&pe(ue,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(je,ve)}catch(ke){ve(ke)}finally{me.T=ie}},Ve.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()},Ve.use=function(V){return me.H.use(V)},Ve.useActionState=function(V,ie,ue){return me.H.useActionState(V,ie,ue)},Ve.useCallback=function(V,ie){return me.H.useCallback(V,ie)},Ve.useContext=function(V){return me.H.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V,ie){return me.H.useDeferredValue(V,ie)},Ve.useEffect=function(V,ie,ue){var re=me.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(V,ie)},Ve.useId=function(){return me.H.useId()},Ve.useImperativeHandle=function(V,ie,ue){return me.H.useImperativeHandle(V,ie,ue)},Ve.useInsertionEffect=function(V,ie){return me.H.useInsertionEffect(V,ie)},Ve.useLayoutEffect=function(V,ie){return me.H.useLayoutEffect(V,ie)},Ve.useMemo=function(V,ie){return me.H.useMemo(V,ie)},Ve.useOptimistic=function(V,ie){return me.H.useOptimistic(V,ie)},Ve.useReducer=function(V,ie,ue){return me.H.useReducer(V,ie,ue)},Ve.useRef=function(V){return me.H.useRef(V)},Ve.useState=function(V){return me.H.useState(V)},Ve.useSyncExternalStore=function(V,ie,ue){return me.H.useSyncExternalStore(V,ie,ue)},Ve.useTransition=function(){return me.H.useTransition()},Ve.version="19.1.0",Ve}var $_;function Tp(){return $_||($_=1,Em.exports=PA()),Em.exports}var U=Tp();const ls=YE(U);var Tm={exports:{}},Hl={},bm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function LA(){return Q_||(Q_=1,function(i){function e(X,ae){var ve=X.length;X.push(ae);e:for(;0<ve;){var je=ve-1>>>1,V=X[je];if(0<o(V,ae))X[je]=ae,X[ve]=V,ve=je;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ae=X[0],ve=X.pop();if(ve!==ae){X[0]=ve;e:for(var je=0,V=X.length,ie=V>>>1;je<ie;){var ue=2*(je+1)-1,re=X[ue],pe=ue+1,ke=X[pe];if(0>o(re,ve))pe<V&&0>o(ke,re)?(X[je]=ke,X[pe]=ve,je=pe):(X[je]=re,X[ue]=ve,je=ue);else if(pe<V&&0>o(ke,ve))X[je]=ke,X[pe]=ve,je=pe;else break e}}return ae}function o(X,ae){var ve=X.sortIndex-ae.sortIndex;return ve!==0?ve:X.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,A=null,I=3,P=!1,M=!1,Y=!1,F=!1,Q=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function he(X){for(var ae=n(g);ae!==null;){if(ae.callback===null)s(g);else if(ae.startTime<=X)s(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(g)}}function me(X){if(Y=!1,he(X),!M)if(n(p)!==null)M=!0,Ae||(Ae=!0,O());else{var ae=n(g);ae!==null&&Oe(me,ae.startTime-X)}}var Ae=!1,k=-1,w=5,R=-1;function D(){return F?!0:!(i.unstable_now()-R<w)}function N(){if(F=!1,Ae){var X=i.unstable_now();R=X;var ae=!0;try{e:{M=!1,Y&&(Y=!1,se(k),k=-1),P=!0;var ve=I;try{t:{for(he(X),A=n(p);A!==null&&!(A.expirationTime>X&&D());){var je=A.callback;if(typeof je=="function"){A.callback=null,I=A.priorityLevel;var V=je(A.expirationTime<=X);if(X=i.unstable_now(),typeof V=="function"){A.callback=V,he(X),ae=!0;break t}A===n(p)&&s(p),he(X)}else s(p);A=n(p)}if(A!==null)ae=!0;else{var ie=n(g);ie!==null&&Oe(me,ie.startTime-X),ae=!1}}break e}finally{A=null,I=ve,P=!1}ae=void 0}}finally{ae?O():Ae=!1}}}var O;if(typeof ne=="function")O=function(){ne(N)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ie=C.port2;C.port1.onmessage=N,O=function(){Ie.postMessage(null)}}else O=function(){Q(N,0)};function Oe(X,ae){k=Q(function(){X(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return I},i.unstable_next=function(X){switch(I){case 1:case 2:case 3:var ae=3;break;default:ae=I}var ve=I;I=ae;try{return X()}finally{I=ve}},i.unstable_requestPaint=function(){F=!0},i.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ve=I;I=X;try{return ae()}finally{I=ve}},i.unstable_scheduleCallback=function(X,ae,ve){var je=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?je+ve:je):ve=je,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ve+V,X={id:E++,callback:ae,priorityLevel:X,startTime:ve,expirationTime:V,sortIndex:-1},ve>je?(X.sortIndex=ve,e(g,X),n(p)===null&&X===n(g)&&(Y?(se(k),k=-1):Y=!0,Oe(me,ve-je))):(X.sortIndex=V,e(p,X),M||P||(M=!0,Ae||(Ae=!0,O()))),X},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(X){var ae=I;return function(){var ve=I;I=ae;try{return X.apply(this,arguments)}finally{I=ve}}}}(wm)),wm}var Y_;function UA(){return Y_||(Y_=1,bm.exports=LA()),bm.exports}var Sm={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function jA(){if(X_)return an;X_=1;var i=Tp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:g,implementation:E}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,an.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},an.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},an.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},an.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},an.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,A=m(E,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,P=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:I,fetchPriority:P}):E==="script"&&s.d.X(p,{crossOrigin:A,integrity:I,fetchPriority:P,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},an.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},an.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,A=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},an.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},an.requestFormReset=function(p){s.d.r(p)},an.unstable_batchedUpdates=function(p,g){return p(g)},an.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},an.useFormStatus=function(){return f.H.useHostTransitionStatus()},an.version="19.1.0",an}var W_;function XE(){if(W_)return Sm.exports;W_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=jA(),Sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function zA(){if(Z_)return Hl;Z_=1;var i=UA(),e=Tp(),n=XE();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,l=d;break}if(T===l){_=!0,l=h,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=h;break}if(T===l){_=!0,l=d,a=h;break}T=T.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case F:return"Profiler";case Y:return"StrictMode";case me:return"Suspense";case Ae:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case he:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:Ie(t.type)||"Memo";case w:r=t._payload,t=t._init;try{return Ie(t(r))}catch{}}return null}var Oe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},je=[],V=-1;function ie(t){return{current:t}}function ue(t){0>V||(t.current=je[V],je[V]=null,V--)}function re(t,r){V++,je[V]=t.current,t.current=r}var pe=ie(null),ke=ie(null),be=ie(null),Et=ie(null);function rt(t,r){switch(re(be,r),re(ke,t),re(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?v_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=v_(r),t=__(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(pe),re(pe,t)}function _n(){ue(pe),ue(ke),ue(be)}function ei(t){t.memoizedState!==null&&re(Et,t);var r=pe.current,a=__(r,t.type);r!==a&&(re(ke,t),re(pe,a))}function In(t){ke.current===t&&(ue(pe),ue(ke)),Et.current===t&&(ue(Et),Ll._currentValue=ve)}var mi=Object.prototype.hasOwnProperty,pi=i.unstable_scheduleCallback,Bi=i.unstable_cancelCallback,Rs=i.unstable_shouldYield,Is=i.unstable_requestPaint,fn=i.unstable_now,zo=i.unstable_getCurrentPriorityLevel,Ir=i.unstable_ImmediatePriority,Cr=i.unstable_UserBlockingPriority,qi=i.unstable_NormalPriority,Bo=i.unstable_LowPriority,Nr=i.unstable_IdlePriority,Cs=i.log,Ta=i.unstable_setDisableYieldValue,mt=null,Ye=null;function dn(t){if(typeof Cs=="function"&&Ta(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(mt,t)}catch{}}var Vt=Math.clz32?Math.clz32:Hi,ba=Math.log,qo=Math.LN2;function Hi(t){return t>>>=0,t===0?32:31-(ba(t)/qo|0)|0}var gi=256,Fi=4194304;function En(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gi(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=En(l):(_&=T,_!==0?h=En(_):a||(a=T&~t,a!==0&&(h=En(a))))):(T=l&~d,T!==0?h=En(T):_!==0?h=En(_):a||(a=l&~t,a!==0&&(h=En(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function yi(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ns(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xs(){var t=gi;return gi<<=1,(gi&4194048)===0&&(gi=256),t}function z(){var t=Fi;return Fi<<=1,(Fi&62914560)===0&&(Fi=4194304),t}function le(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function fe(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _e(t,r,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,x=t.expirationTimes,H=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-Vt(a),ee=1<<W;T[W]=0,x[W]=-1;var G=H[W];if(G!==null)for(H[W]=null,W=0;W<G.length;W++){var K=G[W];K!==null&&(K.lane&=-536870913)}a&=~ee}l!==0&&ge(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~r))}function ge(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Vt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Me(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Vt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function dt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Cn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function $t(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:U_(t.type))}function rn(t,r){var a=ae.p;try{return ae.p=t,r()}finally{ae.p=a}}var Je=Math.random().toString(36).slice(2),ct="__reactFiber$"+Je,yt="__reactProps$"+Je,Xe="__reactContainer$"+Je,Tt="__reactEvents$"+Je,bf="__reactListeners$"+Je,xr="__reactHandles$"+Je,ku="__reactResources$"+Je,Ds="__reactMarker$"+Je;function Dr(t){delete t[ct],delete t[yt],delete t[Tt],delete t[bf],delete t[xr]}function Ki(t){var r=t[ct];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Xe]||a[ct]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=w_(t);t!==null;){if(a=t[ct])return a;t=w_(t)}return r}t=a,a=t.parentNode}return null}function vi(t){if(t=t[ct]||t[Xe]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function _i(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function mn(t){var r=t[ku];return r||(r=t[ku]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function St(t){t[Ds]=!0}var Ho=new Set,wa={};function ti(t,r){$i(t,r),$i(t+"Capture",r)}function $i(t,r){for(wa[t]=r,t=0;t<r.length;t++)Ho.add(r[t])}var Pu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lu={},Os={};function Uu(t){return mi.call(Os,t)?!0:mi.call(Lu,t)?!1:Pu.test(t)?Os[t]=!0:(Lu[t]=!0,!1)}function Or(t,r,a){if(Uu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Ei(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Qt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var Ms,ju;function Qi(t){if(Ms===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ms=r&&r[1]||"",ju=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ms+t+ju}var Sa=!1;function Aa(t,r){if(!t||Sa)return"";Sa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var G=K}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(K){G=K}t.call(ee.prototype)}}else{try{throw Error()}catch(K){G=K}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var x=_.split(`
`),H=T.split(`
`);for(h=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===x.length||h===H.length)for(l=x.length-1,h=H.length-1;1<=l&&0<=h&&x[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(x[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||x[l]!==H[h]){var W=`
`+x[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{Sa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Qi(a):""}function Fo(t){switch(t.tag){case 26:case 27:case 5:return Qi(t.type);case 16:return Qi("Lazy");case 13:return Qi("Suspense");case 19:return Qi("SuspenseList");case 0:case 15:return Aa(t.type,!1);case 11:return Aa(t.type.render,!1);case 1:return Aa(t.type,!0);case 31:return Qi("Activity");default:return""}}function Ra(t){try{var r="";do r+=Fo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Go(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wf(t){var r=Go(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ia(t){t._valueTracker||(t._valueTracker=wf(t))}function Ko(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Go(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Sf=/[\n"\\]/g;function Nt(t){return t.replace(Sf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Nn(t,r,a,l,h,d,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+pn(r)):t.value!==""+pn(r)&&(t.value=""+pn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?Mr(t,_,pn(r)):a!=null?Mr(t,_,pn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+pn(T):t.removeAttribute("name")}function ks(t,r,a,l,h,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+pn(a):"",r=r!=null?""+pn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Mr(t,r,a){r==="number"&&Vs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Yi(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+pn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function st(t,r,a){if(r!=null&&(r=""+pn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+pn(a):""}function Ps(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Oe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=pn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function jn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Ls=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Ls.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function $o(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&zu(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&zu(t,d,r[d])}function Qo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(t){return Rf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Xi=null;function zn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wi=null,Zi=null;function Yo(t){var r=vi(t);if(r&&(t=r.stateNode)){var a=t[yt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Nn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[yt]||null;if(!h)throw Error(s(90));Nn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Ko(l)}break e;case"textarea":st(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Yi(t,!!a.multiple,r,!1)}}}var Ti=!1;function Bu(t,r,a){if(Ti)return t(r,a);Ti=!0;try{var l=t(r);return l}finally{if(Ti=!1,(Wi!==null||Zi!==null)&&(Vc(),Wi&&(r=Wi,t=Zi,Zi=Wi=null,Yo(r),t)))for(r=0;r<t.length;r++)Yo(t[r])}}function Us(t,r){var a=t.stateNode;if(a===null)return null;var l=a[yt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bn=!1;if(ni)try{var js={};Object.defineProperty(js,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Bn=!1}var bi=null,Vr=null,Ji=null;function Xo(){if(Ji)return Ji;var t,r=Vr,a=r.length,l,h="value"in bi?bi.value:bi.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===h[d-l];l++);return Ji=h.slice(t,1<l?1-l:void 0)}function wi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Si(){return!0}function Wo(){return!1}function Bt(t){function r(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Si:Wo,this.isPropagationStopped=Wo,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),r}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Bt(et),zs=E({},et,{view:0,detail:0}),qu=Bt(zs),xa,Da,Ai,Bs=E({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ai&&(Ai&&t.type==="mousemove"?(xa=t.screenX-Ai.screenX,Da=t.screenY-Ai.screenY):Da=xa=0,Ai=t),xa)},movementY:function(t){return"movementY"in t?t.movementY:Da}}),qn=Bt(Bs),Hu=E({},Bs,{dataTransfer:0}),If=Bt(Hu),qs=E({},zs,{relatedTarget:0}),Oa=Bt(qs),Zo=E({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),Ma=Bt(Zo),Fu=E({},et,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Va=Bt(Fu),Cf=E({},et,{data:0}),Jo=Bt(Cf),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function el(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ku[t])?!!r[t]:!1}function Fs(){return el}var $u=E({},zs,{key:function(t){if(t.key){var r=Hs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=wi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(t){return t.type==="keypress"?wi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ka=Bt($u),Qu=E({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tl=Bt(Qu),er=E({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),Yu=Bt(er),Xu=E({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wu=Bt(Xu),Zu=E({},Bs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pa=Bt(Zu),gn=E({},et,{newState:0,oldState:0}),Ju=Bt(gn),ec=[9,13,27,32],Ri=ni&&"CompositionEvent"in window,c=null;ni&&"documentMode"in document&&(c=document.documentMode);var y=ni&&"TextEvent"in window&&!c,v=ni&&(!Ri||c&&8<c&&11>=c),S=" ",B=!1;function $(t,r){switch(t){case"keyup":return ec.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fe=!1;function kt(t,r){switch(t){case"compositionend":return oe(r);case"keypress":return r.which!==32?null:(B=!0,S);case"textInput":return t=r.data,t===S&&B?null:t;default:return null}}function Ge(t,r){if(Fe)return t==="compositionend"||!Ri&&$(t,r)?(t=Xo(),Ji=Vr=bi=null,Fe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var qt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!qt[t.type]:r==="textarea"}function tr(t,r,a,l){Wi?Zi?Zi.push(l):Zi=[l]:Wi=l,r=zc(r,"onChange"),0<r.length&&(a=new Na("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Yt=null,Ii=null;function nl(t){d_(t,0)}function tc(t){var r=_i(t);if(Ko(r))return t}function Vg(t,r){if(t==="change")return r}var kg=!1;if(ni){var Nf;if(ni){var xf="oninput"in document;if(!xf){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),xf=typeof Pg.oninput=="function"}Nf=xf}else Nf=!1;kg=Nf&&(!document.documentMode||9<document.documentMode)}function Lg(){Yt&&(Yt.detachEvent("onpropertychange",Ug),Ii=Yt=null)}function Ug(t){if(t.propertyName==="value"&&tc(Ii)){var r=[];tr(r,Ii,t,zn(t)),Bu(nl,r)}}function cS(t,r,a){t==="focusin"?(Lg(),Yt=r,Ii=a,Yt.attachEvent("onpropertychange",Ug)):t==="focusout"&&Lg()}function hS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tc(Ii)}function fS(t,r){if(t==="click")return tc(r)}function dS(t,r){if(t==="input"||t==="change")return tc(r)}function mS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var xn=typeof Object.is=="function"?Object.is:mS;function il(t,r){if(xn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!mi.call(r,h)||!xn(t[h],r[h]))return!1}return!0}function jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,r){var a=jg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jg(a)}}function Bg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Bg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function qg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Vs(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Vs(t.document)}return r}function Df(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var pS=ni&&"documentMode"in document&&11>=document.documentMode,La=null,Of=null,rl=null,Mf=!1;function Hg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Mf||La==null||La!==Vs(l)||(l=La,"selectionStart"in l&&Df(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),rl&&il(rl,l)||(rl=l,l=zc(Of,"onSelect"),0<l.length&&(r=new Na("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=La)))}function Gs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Ua={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},Vf={},Fg={};ni&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Ks(t){if(Vf[t])return Vf[t];if(!Ua[t])return t;var r=Ua[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Fg)return Vf[t]=r[a];return t}var Gg=Ks("animationend"),Kg=Ks("animationiteration"),$g=Ks("animationstart"),gS=Ks("transitionrun"),yS=Ks("transitionstart"),vS=Ks("transitioncancel"),Qg=Ks("transitionend"),Yg=new Map,kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kf.push("scrollEnd");function ii(t,r){Yg.set(t,r),ti(r,[t])}var Xg=new WeakMap;function Hn(t,r){if(typeof t=="object"&&t!==null){var a=Xg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Ra(r)},Xg.set(t,r),r)}return{value:t,source:r,stack:Ra(r)}}var Fn=[],ja=0,Pf=0;function nc(){for(var t=ja,r=Pf=ja=0;r<t;){var a=Fn[r];Fn[r++]=null;var l=Fn[r];Fn[r++]=null;var h=Fn[r];Fn[r++]=null;var d=Fn[r];if(Fn[r++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Wg(a,h,d)}}function ic(t,r,a,l){Fn[ja++]=t,Fn[ja++]=r,Fn[ja++]=a,Fn[ja++]=l,Pf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Lf(t,r,a,l){return ic(t,r,a,l),rc(t)}function za(t,r){return ic(t,null,null,r),rc(t)}function Wg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Vt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function rc(t){if(50<Nl)throw Nl=0,Hd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ba={};function _S(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,r,a,l){return new _S(t,r,a,l)}function Uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nr(t,r){var a=t.alternate;return a===null?(a=Dn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Zg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function sc(t,r,a,l,h,d){var _=0;if(l=t,typeof t=="function")Uf(t)&&(_=1);else if(typeof t=="string")_=TA(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Dn(31,a,r,h),t.elementType=R,t.lanes=d,t;case M:return $s(a.children,h,d,r);case Y:_=8,h|=24;break;case F:return t=Dn(12,a,r,h|2),t.elementType=F,t.lanes=d,t;case me:return t=Dn(13,a,r,h),t.elementType=me,t.lanes=d,t;case Ae:return t=Dn(19,a,r,h),t.elementType=Ae,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:case ne:_=10;break e;case se:_=9;break e;case he:_=11;break e;case k:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Dn(_,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function $s(t,r,a,l){return t=Dn(7,t,l,r),t.lanes=a,t}function jf(t,r,a){return t=Dn(6,t,null,r),t.lanes=a,t}function zf(t,r,a){return r=Dn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var qa=[],Ha=0,ac=null,oc=0,Gn=[],Kn=0,Qs=null,ir=1,rr="";function Ys(t,r){qa[Ha++]=oc,qa[Ha++]=ac,ac=t,oc=r}function Jg(t,r,a){Gn[Kn++]=ir,Gn[Kn++]=rr,Gn[Kn++]=Qs,Qs=t;var l=ir;t=rr;var h=32-Vt(l)-1;l&=~(1<<h),a+=1;var d=32-Vt(r)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,ir=1<<32-Vt(r)+h|a<<h|l,rr=d+t}else ir=1<<d|a<<h|l,rr=t}function Bf(t){t.return!==null&&(Ys(t,1),Jg(t,1,0))}function qf(t){for(;t===ac;)ac=qa[--Ha],qa[Ha]=null,oc=qa[--Ha],qa[Ha]=null;for(;t===Qs;)Qs=Gn[--Kn],Gn[Kn]=null,rr=Gn[--Kn],Gn[Kn]=null,ir=Gn[--Kn],Gn[Kn]=null}var yn=null,bt=null,We=!1,Xs=null,Ci=!1,Hf=Error(s(519));function Ws(t){var r=Error(s(418,""));throw ol(Hn(r,t)),Hf}function ey(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[ct]=t,r[yt]=l,a){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(a=0;a<Dl.length;a++)Be(Dl[a],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),ks(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ia(r);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),Ps(r,l.value,l.defaultValue,l.children),Ia(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||y_(r.textContent,a)?(l.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),l.onScroll!=null&&Be("scroll",r),l.onScrollEnd!=null&&Be("scrollend",r),l.onClick!=null&&(r.onclick=Bc),r=!0):r=!1,r||Ws(t)}function ty(t){for(yn=t.return;yn;)switch(yn.tag){case 5:case 13:Ci=!1;return;case 27:case 3:Ci=!0;return;default:yn=yn.return}}function sl(t){if(t!==yn)return!1;if(!We)return ty(t),We=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||sm(t.type,t.memoizedProps)),a=!a),a&&bt&&Ws(t),ty(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){bt=si(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}bt=null}}else r===27?(r=bt,Xr(t.type)?(t=um,um=null,bt=t):bt=r):bt=yn?si(t.stateNode.nextSibling):null;return!0}function al(){bt=yn=null,We=!1}function ny(){var t=Xs;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),Xs=null),t}function ol(t){Xs===null?Xs=[t]:Xs.push(t)}var Ff=ie(null),Zs=null,sr=null;function kr(t,r,a){re(Ff,r._currentValue),r._currentValue=a}function ar(t){t._currentValue=Ff.current,ue(Ff)}function Gf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Kf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var x=0;x<r.length;x++)if(T.context===r[x]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Gf(d.return,a,t),l||(_=null);break e}d=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Gf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ll(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var T=h.type;xn(h.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(h===Et.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ll):t=[Ll])}h=h.return}t!==null&&Kf(r,t,a,l),r.flags|=262144}function lc(t){for(t=t.firstContext;t!==null;){if(!xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Js(t){Zs=t,sr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return iy(Zs,t)}function uc(t,r){return Zs===null&&Js(t),iy(t,r)}function iy(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},sr===null){if(t===null)throw Error(s(308));sr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else sr=sr.next=r;return a}var ES=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},TS=i.unstable_scheduleCallback,bS=i.unstable_NormalPriority,Lt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new ES,data:new Map,refCount:0}}function ul(t){t.refCount--,t.refCount===0&&TS(bS,function(){t.controller.abort()})}var cl=null,Qf=0,Fa=0,Ga=null;function wS(t,r){if(cl===null){var a=cl=[];Qf=0,Fa=Xd(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Qf++,r.then(ry,ry),r}function ry(){if(--Qf===0&&cl!==null){Ga!==null&&(Ga.status="fulfilled");var t=cl;cl=null,Fa=0,Ga=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function SS(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var sy=X.S;X.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&wS(t,r),sy!==null&&sy(t,r)};var ea=ie(null);function Yf(){var t=ea.current;return t!==null?t:ht.pooledCache}function cc(t,r){r===null?re(ea,ea.current):re(ea,r.pool)}function ay(){var t=Yf();return t===null?null:{parent:Lt._currentValue,pool:t}}var hl=Error(s(460)),oy=Error(s(474)),hc=Error(s(542)),Xf={then:function(){}};function ly(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fc(){}function uy(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(fc,fc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,hy(t),t;default:if(typeof r.status=="string")r.then(fc,fc);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,hy(t),t}throw fl=r,hl}}var fl=null;function cy(){if(fl===null)throw Error(s(459));var t=fl;return fl=null,t}function hy(t){if(t===hl||t===hc)throw Error(s(483))}var Pr=!1;function Wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Lr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ur(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(nt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=rc(t),Wg(t,null,a),r}return ic(t,l,r,a),rc(t)}function dl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Me(t,a)}}function Jf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var ed=!1;function ml(){if(ed){var t=Ga;if(t!==null)throw t}}function pl(t,r,a,l){ed=!1;var h=t.updateQueue;Pr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var x=T,H=x.next;x.next=null,_===null?d=H:_.next=H,_=x;var W=t.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=H:T.next=H,W.lastBaseUpdate=x))}if(d!==null){var ee=h.baseState;_=0,W=H=x=null,T=d;do{var G=T.lane&-536870913,K=G!==T.lane;if(K?(Ke&G)===G:(l&G)===G){G!==0&&G===Fa&&(ed=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ce=t,we=T;G=r;var lt=a;switch(we.tag){case 1:if(Ce=we.payload,typeof Ce=="function"){ee=Ce.call(lt,ee,G);break e}ee=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=we.payload,G=typeof Ce=="function"?Ce.call(lt,ee,G):Ce,G==null)break e;ee=E({},ee,G);break e;case 2:Pr=!0}}G=T.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[G]:K.push(G))}else K={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(H=W=K,x=ee):W=W.next=K,_|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;K=T,T=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);W===null&&(x=ee),h.baseState=x,h.firstBaseUpdate=H,h.lastBaseUpdate=W,d===null&&(h.shared.lanes=0),Kr|=_,t.lanes=_,t.memoizedState=ee}}function fy(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function dy(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)fy(a[t],r)}var Ka=ie(null),dc=ie(0);function my(t,r){t=dr,re(dc,t),re(Ka,r),dr=t|r.baseLanes}function td(){re(dc,dr),re(Ka,Ka.current)}function nd(){dr=dc.current,ue(Ka),ue(dc)}var jr=0,Pe=null,at=null,xt=null,mc=!1,$a=!1,ta=!1,pc=0,gl=0,Qa=null,AS=0;function At(){throw Error(s(321))}function id(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!xn(t[a],r[a]))return!1;return!0}function rd(t,r,a,l,h,d){return jr=d,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=t===null||t.memoizedState===null?Wy:Zy,ta=!1,d=a(l,h),ta=!1,$a&&(d=gy(r,a,l,h)),py(t),d}function py(t){X.H=Tc;var r=at!==null&&at.next!==null;if(jr=0,xt=at=Pe=null,mc=!1,gl=0,Qa=null,r)throw Error(s(300));t===null||Ht||(t=t.dependencies,t!==null&&lc(t)&&(Ht=!0))}function gy(t,r,a,l){Pe=t;var h=0;do{if($a&&(Qa=null),gl=0,$a=!1,25<=h)throw Error(s(301));if(h+=1,xt=at=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=OS,d=r(a,l)}while($a);return d}function RS(){var t=X.H,r=t.useState()[0];return r=typeof r.then=="function"?yl(r):r,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(Pe.flags|=1024),r}function sd(){var t=pc!==0;return pc=0,t}function ad(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function od(t){if(mc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}mc=!1}jr=0,xt=at=Pe=null,$a=!1,gl=pc=0,Qa=null}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Pe.memoizedState=xt=t:xt=xt.next=t,xt}function Dt(){if(at===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var r=xt===null?Pe.memoizedState:xt.next;if(r!==null)xt=r,at=t;else{if(t===null)throw Pe.alternate===null?Error(s(467)):Error(s(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},xt===null?Pe.memoizedState=xt=t:xt=xt.next=t}return xt}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(t){var r=gl;return gl+=1,Qa===null&&(Qa=[]),t=uy(Qa,t,r),r=Pe,(xt===null?r.memoizedState:xt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Wy:Zy),t}function gc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yl(t);if(t.$$typeof===ne)return sn(t)}throw Error(s(438,String(t)))}function ud(t){var r=null,a=Pe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=ld(),Pe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=D;return r.index++,a}function or(t,r){return typeof r=="function"?r(t):r}function yc(t){var r=Dt();return cd(r,at,t)}function cd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var T=_=null,x=null,H=r,W=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(Ke&ee)===ee:(jr&ee)===ee){var G=H.revertLane;if(G===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===Fa&&(W=!0);else if((jr&G)===G){H=H.next,G===Fa&&(W=!0);continue}else ee={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},x===null?(T=x=ee,_=d):x=x.next=ee,Pe.lanes|=G,Kr|=G;ee=H.action,ta&&a(d,ee),d=H.hasEagerState?H.eagerState:a(d,ee)}else G={lane:ee,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},x===null?(T=x=G,_=d):x=x.next=G,Pe.lanes|=ee,Kr|=ee;H=H.next}while(H!==null&&H!==r);if(x===null?_=d:x.next=T,!xn(d,t.memoizedState)&&(Ht=!0,W&&(a=Ga,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=x,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function hd(t){var r=Dt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);xn(d,r.memoizedState)||(Ht=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function yy(t,r,a){var l=Pe,h=Dt(),d=We;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!xn((at||h).memoizedState,a);_&&(h.memoizedState=a,Ht=!0),h=h.queue;var T=Ey.bind(null,l,h,t);if(vl(2048,8,T,[t]),h.getSnapshot!==r||_||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,Ya(9,vc(),_y.bind(null,l,h,a,r),null),ht===null)throw Error(s(349));d||(jr&124)!==0||vy(l,r,a)}return a}function vy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Pe.updateQueue,r===null?(r=ld(),Pe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function _y(t,r,a,l){r.value=a,r.getSnapshot=l,Ty(r)&&by(t)}function Ey(t,r,a){return a(function(){Ty(r)&&by(t)})}function Ty(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!xn(t,a)}catch{return!0}}function by(t){var r=za(t,2);r!==null&&Pn(r,t,2)}function fd(t){var r=Tn();if(typeof t=="function"){var a=t;if(t=a(),ta){dn(!0);try{a()}finally{dn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:t},r}function wy(t,r,a,l){return t.baseState=a,cd(t,at,typeof l=="function"?l:or)}function IS(t,r,a,l,h){if(Ec(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,Sy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Sy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=X.T,_={};X.T=_;try{var T=a(h,l),x=X.S;x!==null&&x(_,T),Ay(t,r,T)}catch(H){dd(t,r,H)}finally{X.T=d}}else try{d=a(h,l),Ay(t,r,d)}catch(H){dd(t,r,H)}}function Ay(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Ry(t,r,l)},function(l){return dd(t,r,l)}):Ry(t,r,a)}function Ry(t,r,a){r.status="fulfilled",r.value=a,Iy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,Sy(t,a)))}function dd(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Iy(r),r=r.next;while(r!==l)}t.action=null}function Iy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Cy(t,r){return r}function Ny(t,r){if(We){var a=ht.formState;if(a!==null){e:{var l=Pe;if(We){if(bt){t:{for(var h=bt,d=Ci;h.nodeType!==8;){if(!d){h=null;break t}if(h=si(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){bt=si(h.nextSibling),l=h.data==="F!";break e}}Ws(l)}l=!1}l&&(r=a[0])}}return a=Tn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cy,lastRenderedState:r},a.queue=l,a=Qy.bind(null,Pe,l),l.dispatch=a,l=fd(!1),d=vd.bind(null,Pe,!1,l.queue),l=Tn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=IS.bind(null,Pe,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function xy(t){var r=Dt();return Dy(r,at,t)}function Dy(t,r,a){if(r=cd(t,r,Cy)[0],t=yc(or)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=yl(r)}catch(_){throw _===hl?hc:_}else l=r;r=Dt();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(Pe.flags|=2048,Ya(9,vc(),CS.bind(null,h,a),null)),[l,d,t]}function CS(t,r){t.action=r}function Oy(t){var r=Dt(),a=at;if(a!==null)return Dy(r,a,t);Dt(),r=r.memoizedState,a=Dt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function Ya(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=ld(),Pe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function vc(){return{destroy:void 0,resource:void 0}}function My(){return Dt().memoizedState}function _c(t,r,a,l){var h=Tn();l=l===void 0?null:l,Pe.flags|=t,h.memoizedState=Ya(1|r,vc(),a,l)}function vl(t,r,a,l){var h=Dt();l=l===void 0?null:l;var d=h.memoizedState.inst;at!==null&&l!==null&&id(l,at.memoizedState.deps)?h.memoizedState=Ya(r,d,a,l):(Pe.flags|=t,h.memoizedState=Ya(1|r,d,a,l))}function Vy(t,r){_c(8390656,8,t,r)}function ky(t,r){vl(2048,8,t,r)}function Py(t,r){return vl(4,2,t,r)}function Ly(t,r){return vl(4,4,t,r)}function Uy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function jy(t,r,a){a=a!=null?a.concat([t]):null,vl(4,4,Uy.bind(null,r,t),a)}function md(){}function zy(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&id(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function By(t,r){var a=Dt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&id(r,l[1]))return l[0];if(l=t(),ta){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[l,r],l}function pd(t,r,a){return a===void 0||(jr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Fv(),Pe.lanes|=t,Kr|=t,a)}function qy(t,r,a,l){return xn(a,r)?a:Ka.current!==null?(t=pd(t,a,l),xn(t,r)||(Ht=!0),t):(jr&42)===0?(Ht=!0,t.memoizedState=a):(t=Fv(),Pe.lanes|=t,Kr|=t,r)}function Hy(t,r,a,l,h){var d=ae.p;ae.p=d!==0&&8>d?d:8;var _=X.T,T={};X.T=T,vd(t,!1,r,a);try{var x=h(),H=X.S;if(H!==null&&H(T,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var W=SS(x,l);_l(t,r,W,kn(t))}else _l(t,r,l,kn(t))}catch(ee){_l(t,r,{then:function(){},status:"rejected",reason:ee},kn())}finally{ae.p=d,X.T=_}}function NS(){}function gd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Fy(t).queue;Hy(t,h,r,ve,a===null?NS:function(){return Gy(t),a(l)})}function Fy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Gy(t){var r=Fy(t).next.queue;_l(t,r,{},kn())}function yd(){return sn(Ll)}function Ky(){return Dt().memoizedState}function $y(){return Dt().memoizedState}function xS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=kn();t=Lr(a);var l=Ur(r,t,a);l!==null&&(Pn(l,r,a),dl(l,r,a)),r={cache:$f()},t.payload=r;return}r=r.return}}function DS(t,r,a){var l=kn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ec(t)?Yy(r,a):(a=Lf(t,r,a,l),a!==null&&(Pn(a,t,l),Xy(a,r,l)))}function Qy(t,r,a){var l=kn();_l(t,r,a,l)}function _l(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ec(t))Yy(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,T=d(_,a);if(h.hasEagerState=!0,h.eagerState=T,xn(T,_))return ic(t,r,h,0),ht===null&&nc(),!1}catch{}finally{}if(a=Lf(t,r,h,l),a!==null)return Pn(a,t,l),Xy(a,r,l),!0}return!1}function vd(t,r,a,l){if(l={lane:2,revertLane:Xd(),action:l,hasEagerState:!1,eagerState:null,next:null},Ec(t)){if(r)throw Error(s(479))}else r=Lf(t,a,l,2),r!==null&&Pn(r,t,2)}function Ec(t){var r=t.alternate;return t===Pe||r!==null&&r===Pe}function Yy(t,r){$a=mc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Xy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Me(t,a)}}var Tc={readContext:sn,use:gc,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Wy={readContext:sn,use:gc,useCallback:function(t,r){return Tn().memoizedState=[t,r===void 0?null:r],t},useContext:sn,useEffect:Vy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,_c(4194308,4,Uy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return _c(4194308,4,t,r)},useInsertionEffect:function(t,r){_c(4,2,t,r)},useMemo:function(t,r){var a=Tn();r=r===void 0?null:r;var l=t();if(ta){dn(!0);try{t()}finally{dn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Tn();if(a!==void 0){var h=a(r);if(ta){dn(!0);try{a(r)}finally{dn(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=DS.bind(null,Pe,t),[l.memoizedState,t]},useRef:function(t){var r=Tn();return t={current:t},r.memoizedState=t},useState:function(t){t=fd(t);var r=t.queue,a=Qy.bind(null,Pe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:md,useDeferredValue:function(t,r){var a=Tn();return pd(a,t,r)},useTransition:function(){var t=fd(!1);return t=Hy.bind(null,Pe,t.queue,!0,!1),Tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Pe,h=Tn();if(We){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ht===null)throw Error(s(349));(Ke&124)!==0||vy(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Vy(Ey.bind(null,l,d,t),[t]),l.flags|=2048,Ya(9,vc(),_y.bind(null,l,d,a,r),null),a},useId:function(){var t=Tn(),r=ht.identifierPrefix;if(We){var a=rr,l=ir;a=(l&~(1<<32-Vt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=pc++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=AS++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:yd,useFormState:Ny,useActionState:Ny,useOptimistic:function(t){var r=Tn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=vd.bind(null,Pe,!0,a),a.dispatch=r,[t,r]},useMemoCache:ud,useCacheRefresh:function(){return Tn().memoizedState=xS.bind(null,Pe)}},Zy={readContext:sn,use:gc,useCallback:zy,useContext:sn,useEffect:ky,useImperativeHandle:jy,useInsertionEffect:Py,useLayoutEffect:Ly,useMemo:By,useReducer:yc,useRef:My,useState:function(){return yc(or)},useDebugValue:md,useDeferredValue:function(t,r){var a=Dt();return qy(a,at.memoizedState,t,r)},useTransition:function(){var t=yc(or)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:yy,useId:Ky,useHostTransitionStatus:yd,useFormState:xy,useActionState:xy,useOptimistic:function(t,r){var a=Dt();return wy(a,at,t,r)},useMemoCache:ud,useCacheRefresh:$y},OS={readContext:sn,use:gc,useCallback:zy,useContext:sn,useEffect:ky,useImperativeHandle:jy,useInsertionEffect:Py,useLayoutEffect:Ly,useMemo:By,useReducer:hd,useRef:My,useState:function(){return hd(or)},useDebugValue:md,useDeferredValue:function(t,r){var a=Dt();return at===null?pd(a,t,r):qy(a,at.memoizedState,t,r)},useTransition:function(){var t=hd(or)[0],r=Dt().memoizedState;return[typeof t=="boolean"?t:yl(t),r]},useSyncExternalStore:yy,useId:Ky,useHostTransitionStatus:yd,useFormState:Oy,useActionState:Oy,useOptimistic:function(t,r){var a=Dt();return at!==null?wy(a,at,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ud,useCacheRefresh:$y},Xa=null,El=0;function bc(t){var r=El;return El+=1,Xa===null&&(Xa=[]),uy(Xa,t,r)}function Tl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function wc(t,r){throw r.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Jy(t){var r=t._init;return r(t._payload)}function ev(t){function r(j,L){if(t){var q=j.deletions;q===null?(j.deletions=[L],j.flags|=16):q.push(L)}}function a(j,L){if(!t)return null;for(;L!==null;)r(j,L),L=L.sibling;return null}function l(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function h(j,L){return j=nr(j,L),j.index=0,j.sibling=null,j}function d(j,L,q){return j.index=q,t?(q=j.alternate,q!==null?(q=q.index,q<L?(j.flags|=67108866,L):q):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,L,q,Z){return L===null||L.tag!==6?(L=jf(q,j.mode,Z),L.return=j,L):(L=h(L,q),L.return=j,L)}function x(j,L,q,Z){var ye=q.type;return ye===M?W(j,L,q.props.children,Z,q.key):L!==null&&(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===w&&Jy(ye)===L.type)?(L=h(L,q.props),Tl(L,q),L.return=j,L):(L=sc(q.type,q.key,q.props,null,j.mode,Z),Tl(L,q),L.return=j,L)}function H(j,L,q,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=zf(q,j.mode,Z),L.return=j,L):(L=h(L,q.children||[]),L.return=j,L)}function W(j,L,q,Z,ye){return L===null||L.tag!==7?(L=$s(q,j.mode,Z,ye),L.return=j,L):(L=h(L,q),L.return=j,L)}function ee(j,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=jf(""+L,j.mode,q),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return q=sc(L.type,L.key,L.props,null,j.mode,q),Tl(q,L),q.return=j,q;case P:return L=zf(L,j.mode,q),L.return=j,L;case w:var Z=L._init;return L=Z(L._payload),ee(j,L,q)}if(Oe(L)||O(L))return L=$s(L,j.mode,q,null),L.return=j,L;if(typeof L.then=="function")return ee(j,bc(L),q);if(L.$$typeof===ne)return ee(j,uc(j,L),q);wc(j,L)}return null}function G(j,L,q,Z){var ye=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:T(j,L,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case I:return q.key===ye?x(j,L,q,Z):null;case P:return q.key===ye?H(j,L,q,Z):null;case w:return ye=q._init,q=ye(q._payload),G(j,L,q,Z)}if(Oe(q)||O(q))return ye!==null?null:W(j,L,q,Z,null);if(typeof q.then=="function")return G(j,L,bc(q),Z);if(q.$$typeof===ne)return G(j,L,uc(j,q),Z);wc(j,q)}return null}function K(j,L,q,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(q)||null,T(L,j,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return j=j.get(Z.key===null?q:Z.key)||null,x(L,j,Z,ye);case P:return j=j.get(Z.key===null?q:Z.key)||null,H(L,j,Z,ye);case w:var Ue=Z._init;return Z=Ue(Z._payload),K(j,L,q,Z,ye)}if(Oe(Z)||O(Z))return j=j.get(q)||null,W(L,j,Z,ye,null);if(typeof Z.then=="function")return K(j,L,q,bc(Z),ye);if(Z.$$typeof===ne)return K(j,L,q,uc(L,Z),ye);wc(L,Z)}return null}function Ce(j,L,q,Z){for(var ye=null,Ue=null,Ee=L,Se=L=0,Gt=null;Ee!==null&&Se<q.length;Se++){Ee.index>Se?(Gt=Ee,Ee=null):Gt=Ee.sibling;var Qe=G(j,Ee,q[Se],Z);if(Qe===null){Ee===null&&(Ee=Gt);break}t&&Ee&&Qe.alternate===null&&r(j,Ee),L=d(Qe,L,Se),Ue===null?ye=Qe:Ue.sibling=Qe,Ue=Qe,Ee=Gt}if(Se===q.length)return a(j,Ee),We&&Ys(j,Se),ye;if(Ee===null){for(;Se<q.length;Se++)Ee=ee(j,q[Se],Z),Ee!==null&&(L=d(Ee,L,Se),Ue===null?ye=Ee:Ue.sibling=Ee,Ue=Ee);return We&&Ys(j,Se),ye}for(Ee=l(Ee);Se<q.length;Se++)Gt=K(Ee,j,Se,q[Se],Z),Gt!==null&&(t&&Gt.alternate!==null&&Ee.delete(Gt.key===null?Se:Gt.key),L=d(Gt,L,Se),Ue===null?ye=Gt:Ue.sibling=Gt,Ue=Gt);return t&&Ee.forEach(function(ts){return r(j,ts)}),We&&Ys(j,Se),ye}function we(j,L,q,Z){if(q==null)throw Error(s(151));for(var ye=null,Ue=null,Ee=L,Se=L=0,Gt=null,Qe=q.next();Ee!==null&&!Qe.done;Se++,Qe=q.next()){Ee.index>Se?(Gt=Ee,Ee=null):Gt=Ee.sibling;var ts=G(j,Ee,Qe.value,Z);if(ts===null){Ee===null&&(Ee=Gt);break}t&&Ee&&ts.alternate===null&&r(j,Ee),L=d(ts,L,Se),Ue===null?ye=ts:Ue.sibling=ts,Ue=ts,Ee=Gt}if(Qe.done)return a(j,Ee),We&&Ys(j,Se),ye;if(Ee===null){for(;!Qe.done;Se++,Qe=q.next())Qe=ee(j,Qe.value,Z),Qe!==null&&(L=d(Qe,L,Se),Ue===null?ye=Qe:Ue.sibling=Qe,Ue=Qe);return We&&Ys(j,Se),ye}for(Ee=l(Ee);!Qe.done;Se++,Qe=q.next())Qe=K(Ee,j,Se,Qe.value,Z),Qe!==null&&(t&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Se:Qe.key),L=d(Qe,L,Se),Ue===null?ye=Qe:Ue.sibling=Qe,Ue=Qe);return t&&Ee.forEach(function(MA){return r(j,MA)}),We&&Ys(j,Se),ye}function lt(j,L,q,Z){if(typeof q=="object"&&q!==null&&q.type===M&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case I:e:{for(var ye=q.key;L!==null;){if(L.key===ye){if(ye=q.type,ye===M){if(L.tag===7){a(j,L.sibling),Z=h(L,q.props.children),Z.return=j,j=Z;break e}}else if(L.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===w&&Jy(ye)===L.type){a(j,L.sibling),Z=h(L,q.props),Tl(Z,q),Z.return=j,j=Z;break e}a(j,L);break}else r(j,L);L=L.sibling}q.type===M?(Z=$s(q.props.children,j.mode,Z,q.key),Z.return=j,j=Z):(Z=sc(q.type,q.key,q.props,null,j.mode,Z),Tl(Z,q),Z.return=j,j=Z)}return _(j);case P:e:{for(ye=q.key;L!==null;){if(L.key===ye)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){a(j,L.sibling),Z=h(L,q.children||[]),Z.return=j,j=Z;break e}else{a(j,L);break}else r(j,L);L=L.sibling}Z=zf(q,j.mode,Z),Z.return=j,j=Z}return _(j);case w:return ye=q._init,q=ye(q._payload),lt(j,L,q,Z)}if(Oe(q))return Ce(j,L,q,Z);if(O(q)){if(ye=O(q),typeof ye!="function")throw Error(s(150));return q=ye.call(q),we(j,L,q,Z)}if(typeof q.then=="function")return lt(j,L,bc(q),Z);if(q.$$typeof===ne)return lt(j,L,uc(j,q),Z);wc(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(a(j,L.sibling),Z=h(L,q),Z.return=j,j=Z):(a(j,L),Z=jf(q,j.mode,Z),Z.return=j,j=Z),_(j)):a(j,L)}return function(j,L,q,Z){try{El=0;var ye=lt(j,L,q,Z);return Xa=null,ye}catch(Ee){if(Ee===hl||Ee===hc)throw Ee;var Ue=Dn(29,Ee,null,j.mode);return Ue.lanes=Z,Ue.return=j,Ue}finally{}}}var Wa=ev(!0),tv=ev(!1),$n=ie(null),Ni=null;function zr(t){var r=t.alternate;re(Ut,Ut.current&1),re($n,t),Ni===null&&(r===null||Ka.current!==null||r.memoizedState!==null)&&(Ni=t)}function nv(t){if(t.tag===22){if(re(Ut,Ut.current),re($n,t),Ni===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ni=t)}}else Br()}function Br(){re(Ut,Ut.current),re($n,$n.current)}function lr(t){ue($n),Ni===t&&(Ni=null),ue(Ut)}var Ut=ie(0);function Sc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||lm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function _d(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ed={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Lr(l);h.payload=r,a!=null&&(h.callback=a),r=Ur(t,h,l),r!==null&&(Pn(r,t,l),dl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=kn(),h=Lr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=Ur(t,h,l),r!==null&&(Pn(r,t,l),dl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=kn(),l=Lr(a);l.tag=2,r!=null&&(l.callback=r),r=Ur(t,l,a),r!==null&&(Pn(r,t,a),dl(r,t,a))}};function iv(t,r,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):r.prototype&&r.prototype.isPureReactComponent?!il(a,l)||!il(h,d):!0}function rv(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&Ed.enqueueReplaceState(r,r.state,null)}function na(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Ac=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function sv(t){Ac(t)}function av(t){console.error(t)}function ov(t){Ac(t)}function Rc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function lv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Td(t,r,a){return a=Lr(a),a.tag=3,a.payload={element:null},a.callback=function(){Rc(t,r)},a}function uv(t){return t=Lr(t),t.tag=3,t}function cv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){lv(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){lv(r,a,l),typeof h!="function"&&($r===null?$r=new Set([this]):$r.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function MS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ll(r,a,h,!0),a=$n.current,a!==null){switch(a.tag){case 13:return Ni===null?Gd():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Xf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),$d(t,l,h)),!1;case 22:return a.flags|=65536,l===Xf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),$d(t,l,h)),!1}throw Error(s(435,a.tag))}return $d(t,l,h),Gd(),!1}if(We)return r=$n.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Hf&&(t=Error(s(422),{cause:l}),ol(Hn(t,a)))):(l!==Hf&&(r=Error(s(423),{cause:l}),ol(Hn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Hn(l,a),h=Td(t.stateNode,l,h),Jf(t,h),wt!==4&&(wt=2)),!1;var d=Error(s(520),{cause:l});if(d=Hn(d,a),Cl===null?Cl=[d]:Cl.push(d),wt!==4&&(wt=2),r===null)return!0;l=Hn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Td(a.stateNode,l,t),Jf(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&($r===null||!$r.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=uv(h),cv(h,t,a,l),Jf(a,h),!1}a=a.return}while(a!==null);return!1}var hv=Error(s(461)),Ht=!1;function Xt(t,r,a,l){r.child=t===null?tv(r,null,a,l):Wa(r,t.child,a,l)}function fv(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Js(r),l=rd(t,r,a,_,d,h),T=sd(),t!==null&&!Ht?(ad(t,r,h),ur(t,r,h)):(We&&T&&Bf(r),r.flags|=1,Xt(t,r,l,h),r.child)}function dv(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Uf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,mv(t,r,d,l,h)):(t=sc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!Nd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:il,a(_,l)&&t.ref===r.ref)return ur(t,r,h)}return r.flags|=1,t=nr(d,l),t.ref=r.ref,t.return=r,r.child=t}function mv(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(il(d,l)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=l=d,Nd(t,h))(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,ur(t,r,h)}return bd(t,r,a,l,h)}function pv(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return gv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&cc(r,d!==null?d.cachePool:null),d!==null?my(r,d):td(),nv(r);else return r.lanes=r.childLanes=536870912,gv(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(cc(r,d.cachePool),my(r,d),Br(),r.memoizedState=null):(t!==null&&cc(r,null),td(),Br());return Xt(t,r,h,a),r.child}function gv(t,r,a,l){var h=Yf();return h=h===null?null:{parent:Lt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&cc(r,null),td(),nv(r),t!==null&&ll(t,r,l,!0),null}function Ic(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function bd(t,r,a,l,h){return Js(r),a=rd(t,r,a,l,void 0,h),l=sd(),t!==null&&!Ht?(ad(t,r,h),ur(t,r,h)):(We&&l&&Bf(r),r.flags|=1,Xt(t,r,a,h),r.child)}function yv(t,r,a,l,h,d){return Js(r),r.updateQueue=null,a=gy(r,l,a,h),py(t),l=sd(),t!==null&&!Ht?(ad(t,r,d),ur(t,r,d)):(We&&l&&Bf(r),r.flags|=1,Xt(t,r,a,d),r.child)}function vv(t,r,a,l,h){if(Js(r),r.stateNode===null){var d=Ba,_=a.contextType;typeof _=="object"&&_!==null&&(d=sn(_)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ed,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Wf(r),_=a.contextType,d.context=typeof _=="object"&&_!==null?sn(_):Ba,d.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(_d(r,a,_,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Ed.enqueueReplaceState(d,d.state,null),pl(r,l,d,h),ml(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var T=r.memoizedProps,x=na(a,T);d.props=x;var H=d.context,W=a.contextType;_=Ba,typeof W=="object"&&W!==null&&(_=sn(W));var ee=a.getDerivedStateFromProps;W=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||H!==_)&&rv(r,d,l,_),Pr=!1;var G=r.memoizedState;d.state=G,pl(r,l,d,h),ml(),H=r.memoizedState,T||G!==H||Pr?(typeof ee=="function"&&(_d(r,a,ee,l),H=r.memoizedState),(x=Pr||iv(r,a,x,l,G,H,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=H),d.props=l,d.state=H,d.context=_,l=x):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Zf(t,r),_=r.memoizedProps,W=na(a,_),d.props=W,ee=r.pendingProps,G=d.context,H=a.contextType,x=Ba,typeof H=="object"&&H!==null&&(x=sn(H)),T=a.getDerivedStateFromProps,(H=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==ee||G!==x)&&rv(r,d,l,x),Pr=!1,G=r.memoizedState,d.state=G,pl(r,l,d,h),ml();var K=r.memoizedState;_!==ee||G!==K||Pr||t!==null&&t.dependencies!==null&&lc(t.dependencies)?(typeof T=="function"&&(_d(r,a,T,l),K=r.memoizedState),(W=Pr||iv(r,a,W,l,G,K,x)||t!==null&&t.dependencies!==null&&lc(t.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,x),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,x)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),d.props=l,d.state=K,d.context=x,l=W):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,Ic(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Wa(r,t.child,null,h),r.child=Wa(r,null,a,h)):Xt(t,r,a,h),r.memoizedState=d.state,t=r.child):t=ur(t,r,h),t}function _v(t,r,a,l){return al(),r.flags|=256,Xt(t,r,a,l),r.child}var wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sd(t){return{baseLanes:t,cachePool:ay()}}function Ad(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Qn),t}function Ev(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(We){if(h?zr(r):Br(),We){var T=bt,x;if(x=T){e:{for(x=T,T=Ci;x.nodeType!==8;){if(!T){T=null;break e}if(x=si(x.nextSibling),x===null){T=null;break e}}T=x}T!==null?(r.memoizedState={dehydrated:T,treeContext:Qs!==null?{id:ir,overflow:rr}:null,retryLane:536870912,hydrationErrors:null},x=Dn(18,null,null,0),x.stateNode=T,x.return=r,r.child=x,yn=r,bt=null,x=!0):x=!1}x||Ws(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return lm(T)?r.lanes=32:r.lanes=536870912,null;lr(r)}return T=l.children,l=l.fallback,h?(Br(),h=r.mode,T=Cc({mode:"hidden",children:T},h),l=$s(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=Sd(a),h.childLanes=Ad(t,_,a),r.memoizedState=wd,l):(zr(r),Rd(r,T))}if(x=t.memoizedState,x!==null&&(T=x.dehydrated,T!==null)){if(d)r.flags&256?(zr(r),r.flags&=-257,r=Id(t,r,a)):r.memoizedState!==null?(Br(),r.child=t.child,r.flags|=128,r=null):(Br(),h=l.fallback,T=r.mode,l=Cc({mode:"visible",children:l.children},T),h=$s(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Wa(r,t.child,null,a),l=r.child,l.memoizedState=Sd(a),l.childLanes=Ad(t,_,a),r.memoizedState=wd,r=h);else if(zr(r),lm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var H=_.dgst;_=H,l=Error(s(419)),l.stack="",l.digest=_,ol({value:l,source:null,stack:null}),r=Id(t,r,a)}else if(Ht||ll(t,r,a,!1),_=(a&t.childLanes)!==0,Ht||_){if(_=ht,_!==null&&(l=a&-a,l=(l&42)!==0?1:dt(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,za(t,l),Pn(_,t,l),hv;T.data==="$?"||Gd(),r=Id(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=x.treeContext,bt=si(T.nextSibling),yn=r,We=!0,Xs=null,Ci=!1,t!==null&&(Gn[Kn++]=ir,Gn[Kn++]=rr,Gn[Kn++]=Qs,ir=t.id,rr=t.overflow,Qs=r),r=Rd(r,l.children),r.flags|=4096);return r}return h?(Br(),h=l.fallback,T=r.mode,x=t.child,H=x.sibling,l=nr(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,H!==null?h=nr(H,h):(h=$s(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=Sd(a):(x=T.cachePool,x!==null?(H=Lt._currentValue,x=x.parent!==H?{parent:H,pool:H}:x):x=ay(),T={baseLanes:T.baseLanes|a,cachePool:x}),h.memoizedState=T,h.childLanes=Ad(t,_,a),r.memoizedState=wd,l):(zr(r),a=t.child,t=a.sibling,a=nr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function Rd(t,r){return r=Cc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Cc(t,r){return t=Dn(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Id(t,r,a){return Wa(r,t.child,null,a),t=Rd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Tv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Gf(t.return,r,a)}function Cd(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function bv(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(Xt(t,r,l.children,a),l=Ut.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tv(t,a,r);else if(t.tag===19)Tv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(re(Ut,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Sc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Cd(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Sc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Cd(r,!0,a,null,d);break;case"together":Cd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ur(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Kr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ll(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=nr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=nr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function Nd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&lc(t)))}function VS(t,r,a){switch(r.tag){case 3:rt(r,r.stateNode.containerInfo),kr(r,Lt,t.memoizedState.cache),al();break;case 27:case 5:ei(r);break;case 4:rt(r,r.stateNode.containerInfo);break;case 10:kr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(zr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Ev(t,r,a):(zr(r),t=ur(t,r,a),t!==null?t.sibling:null);zr(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ll(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return bv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Ut,Ut.current),l)break;return null;case 22:case 23:return r.lanes=0,pv(t,r,a);case 24:kr(r,Lt,t.memoizedState.cache)}return ur(t,r,a)}function wv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ht=!0;else{if(!Nd(t,a)&&(r.flags&128)===0)return Ht=!1,VS(t,r,a);Ht=(t.flags&131072)!==0}else Ht=!1,We&&(r.flags&1048576)!==0&&Jg(r,oc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Uf(l)?(t=na(l,t),r.tag=1,r=vv(null,r,l,t,a)):(r.tag=0,r=bd(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===he){r.tag=11,r=fv(null,r,l,t,a);break e}else if(h===k){r.tag=14,r=dv(null,r,l,t,a);break e}}throw r=Ie(l)||l,Error(s(306,r,""))}}return r;case 0:return bd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=na(l,r.pendingProps),vv(t,r,l,h,a);case 3:e:{if(rt(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,Zf(t,r),pl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,kr(r,Lt,l),l!==d.cache&&Kf(r,[Lt],a,!0),ml(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=_v(t,r,l,a);break e}else if(l!==h){h=Hn(Error(s(424)),r),ol(h),r=_v(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=si(t.firstChild),yn=r,We=!0,Xs=null,Ci=!0,a=tv(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(al(),l===h){r=ur(t,r,a);break e}Xt(t,r,l,a)}r=r.child}return r;case 26:return Ic(t,r),t===null?(a=I_(r.type,null,r.pendingProps,null))?r.memoizedState=a:We||(a=r.type,t=r.pendingProps,l=qc(be.current).createElement(a),l[ct]=r,l[yt]=t,Zt(l,a,t),St(l),r.stateNode=l):r.memoizedState=I_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ei(r),t===null&&We&&(l=r.stateNode=S_(r.type,r.pendingProps,be.current),yn=r,Ci=!0,h=bt,Xr(r.type)?(um=h,bt=si(l.firstChild)):bt=h),Xt(t,r,r.pendingProps.children,a),Ic(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&We&&((h=l=bt)&&(l=lA(l,r.type,r.pendingProps,Ci),l!==null?(r.stateNode=l,yn=r,bt=si(l.firstChild),Ci=!1,h=!0):h=!1),h||Ws(r)),ei(r),h=r.type,d=r.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,sm(h,d)?l=null:_!==null&&sm(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=rd(t,r,RS,null,null,a),Ll._currentValue=h),Ic(t,r),Xt(t,r,l,a),r.child;case 6:return t===null&&We&&((t=a=bt)&&(a=uA(a,r.pendingProps,Ci),a!==null?(r.stateNode=a,yn=r,bt=null,t=!0):t=!1),t||Ws(r)),null;case 13:return Ev(t,r,a);case 4:return rt(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Wa(r,null,l,a):Xt(t,r,l,a),r.child;case 11:return fv(t,r,r.type,r.pendingProps,a);case 7:return Xt(t,r,r.pendingProps,a),r.child;case 8:return Xt(t,r,r.pendingProps.children,a),r.child;case 12:return Xt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,kr(r,r.type,l.value),Xt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Js(r),h=sn(h),l=l(h),r.flags|=1,Xt(t,r,l,a),r.child;case 14:return dv(t,r,r.type,r.pendingProps,a);case 15:return mv(t,r,r.type,r.pendingProps,a);case 19:return bv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Cc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=nr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return pv(t,r,a);case 24:return Js(r),l=sn(Lt),t===null?(h=Yf(),h===null&&(h=ht,d=$f(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},Wf(r),kr(r,Lt,h)):((t.lanes&a)!==0&&(Zf(t,r),pl(r,null,null,a),ml()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),kr(r,Lt,l)):(l=d.cache,kr(r,Lt,l),l!==h.cache&&Kf(r,[Lt],a,!0))),Xt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function cr(t){t.flags|=4}function Sv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!O_(r)){if(r=$n.current,r!==null&&((Ke&4194048)===Ke?Ni!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||r!==Ni))throw fl=Xf,oy;t.flags|=8192}}function Nc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?z():536870912,t.lanes|=r,to|=r)}function bl(t,r){if(!We)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function vt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function kS(t,r,a){var l=r.pendingProps;switch(qf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(r),null;case 1:return vt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ar(Lt),_n(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(sl(r)?cr(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ny())),vt(r),null;case 26:return a=r.memoizedState,t===null?(cr(r),a!==null?(vt(r),Sv(r,a)):(vt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(cr(r),vt(r),Sv(r,a)):(vt(r),r.flags&=-16777217):(t.memoizedProps!==l&&cr(r),vt(r),r.flags&=-16777217),null;case 27:In(r),a=be.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&cr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return vt(r),null}t=pe.current,sl(r)?ey(r):(t=S_(h,l,a),r.stateNode=t,cr(r))}return vt(r),null;case 5:if(In(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&cr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return vt(r),null}if(t=pe.current,sl(r))ey(r);else{switch(h=qc(be.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[ct]=r,t[yt]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&cr(r)}}return vt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&cr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=be.current,sl(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=yn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[ct]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||y_(t.nodeValue,a)),t||Ws(r)}else t=qc(t).createTextNode(l),t[ct]=r,r.stateNode=t}return vt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=sl(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ct]=r}else al(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;vt(r),h=!1}else h=ny(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(lr(r),r):(lr(r),null)}if(lr(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Nc(r,r.updateQueue),vt(r),null;case 4:return _n(),t===null&&em(r.stateNode.containerInfo),vt(r),null;case 10:return ar(r.type),vt(r),null;case 19:if(ue(Ut),h=r.memoizedState,h===null)return vt(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)bl(h,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Sc(t),d!==null){for(r.flags|=128,bl(h,!1),t=d.updateQueue,r.updateQueue=t,Nc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Zg(a,t),a=a.sibling;return re(Ut,Ut.current&1|2),r.child}t=t.sibling}h.tail!==null&&fn()>Oc&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304)}else{if(!l)if(t=Sc(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Nc(r,t),bl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!We)return vt(r),null}else 2*fn()-h.renderingStartTime>Oc&&a!==536870912&&(r.flags|=128,l=!0,bl(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=fn(),r.sibling=null,t=Ut.current,re(Ut,l?t&1|2:t&1),r):(vt(r),null);case 22:case 23:return lr(r),nd(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(vt(r),r.subtreeFlags&6&&(r.flags|=8192)):vt(r),a=r.updateQueue,a!==null&&Nc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&ue(ea),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ar(Lt),vt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function PS(t,r){switch(qf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ar(Lt),_n(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return In(r),null;case 13:if(lr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));al()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ue(Ut),null;case 4:return _n(),null;case 10:return ar(r.type),null;case 22:case 23:return lr(r),nd(),t!==null&&ue(ea),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ar(Lt),null;case 25:return null;default:return null}}function Av(t,r){switch(qf(r),r.tag){case 3:ar(Lt),_n();break;case 26:case 27:case 5:In(r);break;case 4:_n();break;case 13:lr(r);break;case 19:ue(Ut);break;case 10:ar(r.type);break;case 22:case 23:lr(r),nd(),t!==null&&ue(ea);break;case 24:ar(Lt)}}function wl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(T){ut(r,r.return,T)}}function qr(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=r;var x=a,H=T;try{H()}catch(W){ut(h,x,W)}}}l=l.next}while(l!==d)}}catch(W){ut(r,r.return,W)}}function Rv(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{dy(r,a)}catch(l){ut(t,t.return,l)}}}function Iv(t,r,a){a.props=na(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ut(t,r,l)}}function Sl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ut(t,r,h)}}function xi(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ut(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(t,r,h)}else a.current=null}function Cv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ut(t,t.return,h)}}function xd(t,r,a){try{var l=t.stateNode;iA(l,t.type,a,r),l[yt]=r}catch(h){ut(t,t.return,h)}}function Nv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xr(t.type)||t.tag===4}function Dd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Od(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Bc));else if(l!==4&&(l===27&&Xr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Od(t,r,a),t=t.sibling;t!==null;)Od(t,r,a),t=t.sibling}function xc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Xr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(xc(t,r,a),t=t.sibling;t!==null;)xc(t,r,a),t=t.sibling}function xv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Zt(r,l,a),r[ct]=t,r[yt]=a}catch(d){ut(t,t.return,d)}}var hr=!1,Rt=!1,Md=!1,Dv=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function LS(t,r){if(t=t.containerInfo,im=Qc,t=qg(t),Df(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,x=-1,H=0,W=0,ee=t,G=null;t:for(;;){for(var K;ee!==a||h!==0&&ee.nodeType!==3||(T=_+h),ee!==d||l!==0&&ee.nodeType!==3||(x=_+l),ee.nodeType===3&&(_+=ee.nodeValue.length),(K=ee.firstChild)!==null;)G=ee,ee=K;for(;;){if(ee===t)break t;if(G===a&&++H===h&&(T=_),G===d&&++W===l&&(x=_),(K=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=K}a=T===-1||x===-1?null:{start:T,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(rm={focusedElem:t,selectionRange:a},Qc=!1,Ft=r;Ft!==null;)if(r=Ft,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ft=t;else for(;Ft!==null;){switch(r=Ft,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ce=na(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ce,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){ut(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)om(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,Ft=t;break}Ft=r.return}}function Ov(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Hr(t,a),l&4&&wl(5,a);break;case 1:if(Hr(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){ut(a,a.return,_)}else{var h=na(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ut(a,a.return,_)}}l&64&&Rv(a),l&512&&Sl(a,a.return);break;case 3:if(Hr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{dy(t,r)}catch(_){ut(a,a.return,_)}}break;case 27:r===null&&l&4&&xv(a);case 26:case 5:Hr(t,a),r===null&&l&4&&Cv(a),l&512&&Sl(a,a.return);break;case 12:Hr(t,a);break;case 13:Hr(t,a),l&4&&kv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=KS.bind(null,a),cA(t,a))));break;case 22:if(l=a.memoizedState!==null||hr,!l){r=r!==null&&r.memoizedState!==null||Rt,h=hr;var d=Rt;hr=l,(Rt=r)&&!d?Fr(t,a,(a.subtreeFlags&8772)!==0):Hr(t,a),hr=h,Rt=d}break;case 30:break;default:Hr(t,a)}}function Mv(t){var r=t.alternate;r!==null&&(t.alternate=null,Mv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Dr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,bn=!1;function fr(t,r,a){for(a=a.child;a!==null;)Vv(t,r,a),a=a.sibling}function Vv(t,r,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(mt,a)}catch{}switch(a.tag){case 26:Rt||xi(a,r),fr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Rt||xi(a,r);var l=pt,h=bn;Xr(a.type)&&(pt=a.stateNode,bn=!1),fr(t,r,a),Ml(a.stateNode),pt=l,bn=h;break;case 5:Rt||xi(a,r);case 6:if(l=pt,h=bn,pt=null,fr(t,r,a),pt=l,bn=h,pt!==null)if(bn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(d){ut(a,r,d)}else try{pt.removeChild(a.stateNode)}catch(d){ut(a,r,d)}break;case 18:pt!==null&&(bn?(t=pt,b_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Bl(t)):b_(pt,a.stateNode));break;case 4:l=pt,h=bn,pt=a.stateNode.containerInfo,bn=!0,fr(t,r,a),pt=l,bn=h;break;case 0:case 11:case 14:case 15:Rt||qr(2,a,r),Rt||qr(4,a,r),fr(t,r,a);break;case 1:Rt||(xi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Iv(a,r,l)),fr(t,r,a);break;case 21:fr(t,r,a);break;case 22:Rt=(l=Rt)||a.memoizedState!==null,fr(t,r,a),Rt=l;break;default:fr(t,r,a)}}function kv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Bl(t)}catch(a){ut(r,r.return,a)}}function US(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Dv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Dv),r;default:throw Error(s(435,t.tag))}}function Vd(t,r){var a=US(t);r.forEach(function(l){var h=$S.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function On(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Xr(T.type)){pt=T.stateNode,bn=!1;break e}break;case 5:pt=T.stateNode,bn=!1;break e;case 3:case 4:pt=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(pt===null)throw Error(s(160));Vv(d,_,h),pt=null,bn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Pv(r,t),r=r.sibling}var ri=null;function Pv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Mn(t),l&4&&(qr(3,t,t.return),wl(3,t),qr(5,t,t.return));break;case 1:On(r,t),Mn(t),l&512&&(Rt||a===null||xi(a,a.return)),l&64&&hr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ri;if(On(r,t),Mn(t),l&512&&(Rt||a===null||xi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ds]||d[ct]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Zt(d,l,a),d[ct]=t,St(d),l=d;break e;case"link":var _=x_("link","href",h).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=h.createElement(l),Zt(d,l,a),h.head.appendChild(d);break;case"meta":if(_=x_("meta","content",h).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=h.createElement(l),Zt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[ct]=t,St(d),l=d}t.stateNode=l}else D_(h,t.type,t.stateNode);else t.stateNode=N_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?D_(h,t.type,t.stateNode):N_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&xd(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(r,t),Mn(t),l&512&&(Rt||a===null||xi(a,a.return)),a!==null&&l&4&&xd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(r,t),Mn(t),l&512&&(Rt||a===null||xi(a,a.return)),t.flags&32){h=t.stateNode;try{jn(h,"")}catch(K){ut(t,t.return,K)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,xd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Md=!0);break;case 6:if(On(r,t),Mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(K){ut(t,t.return,K)}}break;case 3:if(Gc=null,h=ri,ri=Hc(r.containerInfo),On(r,t),ri=h,Mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Bl(r.containerInfo)}catch(K){ut(t,t.return,K)}Md&&(Md=!1,Lv(t));break;case 4:l=ri,ri=Hc(t.stateNode.containerInfo),On(r,t),Mn(t),ri=l;break;case 12:On(r,t),Mn(t);break;case 13:On(r,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zd=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 22:h=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,H=hr,W=Rt;if(hr=H||h,Rt=W||x,On(r,t),Rt=W,hr=H,Mn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||x||hr||Rt||ia(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){x=a=r;try{if(d=x.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=x.stateNode;var ee=x.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){ut(x,x.return,K)}}}else if(r.tag===6){if(a===null){x=r;try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(K){ut(x,x.return,K)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vd(t,a))));break;case 19:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 30:break;case 21:break;default:On(r,t),Mn(t)}}function Mn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Nv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Dd(t);xc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(jn(_,""),a.flags&=-33);var T=Dd(t);xc(t,T,_);break;case 3:case 4:var x=a.stateNode.containerInfo,H=Dd(t);Od(t,H,x);break;default:throw Error(s(161))}}catch(W){ut(t,t.return,W)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Lv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Lv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Hr(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ov(t,r.alternate,r),r=r.sibling}function ia(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:qr(4,r,r.return),ia(r);break;case 1:xi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Iv(r,r.return,a),ia(r);break;case 27:Ml(r.stateNode);case 26:case 5:xi(r,r.return),ia(r);break;case 22:r.memoizedState===null&&ia(r);break;case 30:ia(r);break;default:ia(r)}t=t.sibling}}function Fr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,_=d.flags;switch(d.tag){case 0:case 11:case 15:Fr(h,d,a),wl(4,d);break;case 1:if(Fr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ut(l,l.return,H)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var x=h.shared.hiddenCallbacks;if(x!==null)for(h.shared.hiddenCallbacks=null,h=0;h<x.length;h++)fy(x[h],T)}catch(H){ut(l,l.return,H)}}a&&_&64&&Rv(d),Sl(d,d.return);break;case 27:xv(d);case 26:case 5:Fr(h,d,a),a&&l===null&&_&4&&Cv(d),Sl(d,d.return);break;case 12:Fr(h,d,a);break;case 13:Fr(h,d,a),a&&_&4&&kv(h,d);break;case 22:d.memoizedState===null&&Fr(h,d,a),Sl(d,d.return);break;case 30:break;default:Fr(h,d,a)}r=r.sibling}}function kd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ul(a))}function Pd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ul(t))}function Di(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Uv(t,r,a,l),r=r.sibling}function Uv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Di(t,r,a,l),h&2048&&wl(9,r);break;case 1:Di(t,r,a,l);break;case 3:Di(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ul(t)));break;case 12:if(h&2048){Di(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){ut(r,r.return,x)}}else Di(t,r,a,l);break;case 13:Di(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,_=r.alternate,r.memoizedState!==null?d._visibility&2?Di(t,r,a,l):Al(t,r):d._visibility&2?Di(t,r,a,l):(d._visibility|=2,Za(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&kd(_,r);break;case 24:Di(t,r,a,l),h&2048&&Pd(r.alternate,r);break;default:Di(t,r,a,l)}}function Za(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,_=r,T=a,x=l,H=_.flags;switch(_.tag){case 0:case 11:case 15:Za(d,_,T,x,h),wl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?Za(d,_,T,x,h):Al(d,_):(W._visibility|=2,Za(d,_,T,x,h)),h&&H&2048&&kd(_.alternate,_);break;case 24:Za(d,_,T,x,h),h&&H&2048&&Pd(_.alternate,_);break;default:Za(d,_,T,x,h)}r=r.sibling}}function Al(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:Al(a,l),h&2048&&kd(l.alternate,l);break;case 24:Al(a,l),h&2048&&Pd(l.alternate,l);break;default:Al(a,l)}r=r.sibling}}var Rl=8192;function Ja(t){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)jv(t),t=t.sibling}function jv(t){switch(t.tag){case 26:Ja(t),t.flags&Rl&&t.memoizedState!==null&&wA(ri,t.memoizedState,t.memoizedProps);break;case 5:Ja(t);break;case 3:case 4:var r=ri;ri=Hc(t.stateNode.containerInfo),Ja(t),ri=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Rl,Rl=16777216,Ja(t),Rl=r):Ja(t));break;default:Ja(t)}}function zv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Il(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,qv(l,t)}zv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Bv(t),t=t.sibling}function Bv(t){switch(t.tag){case 0:case 11:case 15:Il(t),t.flags&2048&&qr(9,t,t.return);break;case 3:Il(t);break;case 12:Il(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Dc(t)):Il(t);break;default:Il(t)}}function Dc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Ft=l,qv(l,t)}zv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:qr(8,r,r.return),Dc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Dc(r));break;default:Dc(r)}t=t.sibling}}function qv(t,r){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:qr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=t;Ft!==null;){l=Ft;var h=l.sibling,d=l.return;if(Mv(l),l===a){Ft=null;break e}if(h!==null){h.return=d,Ft=h;break e}Ft=d}}}var jS={getCacheForType:function(t){var r=sn(Lt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},zS=typeof WeakMap=="function"?WeakMap:Map,nt=0,ht=null,ze=null,Ke=0,it=0,Vn=null,Gr=!1,eo=!1,Ld=!1,dr=0,wt=0,Kr=0,ra=0,Ud=0,Qn=0,to=0,Cl=null,wn=null,jd=!1,zd=0,Oc=1/0,Mc=null,$r=null,Wt=0,Qr=null,no=null,io=0,Bd=0,qd=null,Hv=null,Nl=0,Hd=null;function kn(){if((nt&2)!==0&&Ke!==0)return Ke&-Ke;if(X.T!==null){var t=Fa;return t!==0?t:Xd()}return $t()}function Fv(){Qn===0&&(Qn=(Ke&536870912)===0||We?xs():536870912);var t=$n.current;return t!==null&&(t.flags|=32),Qn}function Pn(t,r,a){(t===ht&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(ro(t,0),Yr(t,Ke,Qn,!1)),fe(t,a),((nt&2)===0||t!==ht)&&(t===ht&&((nt&2)===0&&(ra|=a),wt===4&&Yr(t,Ke,Qn,!1)),Oi(t))}function Gv(t,r,a){if((nt&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||yi(t,r),h=l?HS(t,r):Kd(t,r,!0),d=l;do{if(h===0){eo&&!l&&Yr(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!BS(a)){h=Kd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var T=t;h=Cl;var x=T.current.memoizedState.isDehydrated;if(x&&(ro(T,_).flags|=256),_=Kd(T,_,!1),_!==2){if(Ld&&!x){T.errorRecoveryDisabledLanes|=d,ra|=d,h=4;break e}d=wn,wn=h,d!==null&&(wn===null?wn=d:wn.push.apply(wn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){ro(t,0),Yr(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Yr(l,r,Qn,!Gr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=zd+300-fn(),10<h)){if(Yr(l,r,Qn,!Gr),Gi(l,0,!0)!==0)break e;l.timeoutHandle=E_(Kv.bind(null,l,a,wn,Mc,jd,r,Qn,ra,to,Gr,d,2,-0,0),h);break e}Kv(l,a,wn,Mc,jd,r,Qn,ra,to,Gr,d,0,-0,0)}}break}while(!0);Oi(t)}function Kv(t,r,a,l,h,d,_,T,x,H,W,ee,G,K){if(t.timeoutHandle=-1,ee=r.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:bA},jv(r),ee=SA(),ee!==null)){t.cancelPendingCommit=ee(Jv.bind(null,t,r,d,a,l,h,_,T,x,W,1,G,K)),Yr(t,d,_,!H);return}Jv(t,r,d,a,l,h,_,T,x)}function BS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!xn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Yr(t,r,a,l){r&=~Ud,r&=~ra,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Vt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&ge(t,a,r)}function Vc(){return(nt&6)===0?(xl(0),!1):!0}function Fd(){if(ze!==null){if(it===0)var t=ze.return;else t=ze,sr=Zs=null,od(t),Xa=null,El=0,t=ze;for(;t!==null;)Av(t.alternate,t),t=t.return;ze=null}}function ro(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,sA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Fd(),ht=t,ze=a=nr(t.current,null),Ke=r,it=0,Vn=null,Gr=!1,eo=yi(t,r),Ld=!1,to=Qn=Ud=ra=Kr=wt=0,wn=Cl=null,jd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Vt(l),d=1<<h;r|=t[h],l&=~d}return dr=r,nc(),a}function $v(t,r){Pe=null,X.H=Tc,r===hl||r===hc?(r=cy(),it=3):r===oy?(r=cy(),it=4):it=r===hv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Vn=r,ze===null&&(wt=1,Rc(t,Hn(r,t.current)))}function Qv(){var t=X.H;return X.H=Tc,t===null?Tc:t}function Yv(){var t=X.A;return X.A=jS,t}function Gd(){wt=4,Gr||(Ke&4194048)!==Ke&&$n.current!==null||(eo=!0),(Kr&134217727)===0&&(ra&134217727)===0||ht===null||Yr(ht,Ke,Qn,!1)}function Kd(t,r,a){var l=nt;nt|=2;var h=Qv(),d=Yv();(ht!==t||Ke!==r)&&(Mc=null,ro(t,r)),r=!1;var _=wt;e:do try{if(it!==0&&ze!==null){var T=ze,x=Vn;switch(it){case 8:Fd(),_=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(r=!0);var H=it;if(it=0,Vn=null,so(t,T,x,H),a&&eo){_=0;break e}break;default:H=it,it=0,Vn=null,so(t,T,x,H)}}qS(),_=wt;break}catch(W){$v(t,W)}while(!0);return r&&t.shellSuspendCounter++,sr=Zs=null,nt=l,X.H=h,X.A=d,ze===null&&(ht=null,Ke=0,nc()),_}function qS(){for(;ze!==null;)Xv(ze)}function HS(t,r){var a=nt;nt|=2;var l=Qv(),h=Yv();ht!==t||Ke!==r?(Mc=null,Oc=fn()+500,ro(t,r)):eo=yi(t,r);e:do try{if(it!==0&&ze!==null){r=ze;var d=Vn;t:switch(it){case 1:it=0,Vn=null,so(t,r,d,1);break;case 2:case 9:if(ly(d)){it=0,Vn=null,Wv(r);break}r=function(){it!==2&&it!==9||ht!==t||(it=7),Oi(t)},d.then(r,r);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:ly(d)?(it=0,Vn=null,Wv(r)):(it=0,Vn=null,so(t,r,d,7));break;case 5:var _=null;switch(ze.tag){case 26:_=ze.memoizedState;case 5:case 27:var T=ze;if(!_||O_(_)){it=0,Vn=null;var x=T.sibling;if(x!==null)ze=x;else{var H=T.return;H!==null?(ze=H,kc(H)):ze=null}break t}}it=0,Vn=null,so(t,r,d,5);break;case 6:it=0,Vn=null,so(t,r,d,6);break;case 8:Fd(),wt=6;break e;default:throw Error(s(462))}}FS();break}catch(W){$v(t,W)}while(!0);return sr=Zs=null,X.H=l,X.A=h,nt=a,ze!==null?0:(ht=null,Ke=0,nc(),wt)}function FS(){for(;ze!==null&&!Rs();)Xv(ze)}function Xv(t){var r=wv(t.alternate,t,dr);t.memoizedProps=t.pendingProps,r===null?kc(t):ze=r}function Wv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=yv(a,r,r.pendingProps,r.type,void 0,Ke);break;case 11:r=yv(a,r,r.pendingProps,r.type.render,r.ref,Ke);break;case 5:od(r);default:Av(a,r),r=ze=Zg(r,dr),r=wv(a,r,dr)}t.memoizedProps=t.pendingProps,r===null?kc(t):ze=r}function so(t,r,a,l){sr=Zs=null,od(r),Xa=null,El=0;var h=r.return;try{if(MS(t,h,r,a,Ke)){wt=1,Rc(t,Hn(a,t.current)),ze=null;return}}catch(d){if(h!==null)throw ze=h,d;wt=1,Rc(t,Hn(a,t.current)),ze=null;return}r.flags&32768?(We||l===1?t=!0:eo||(Ke&536870912)!==0?t=!1:(Gr=t=!0,(l===2||l===9||l===3||l===6)&&(l=$n.current,l!==null&&l.tag===13&&(l.flags|=16384))),Zv(r,t)):kc(r)}function kc(t){var r=t;do{if((r.flags&32768)!==0){Zv(r,Gr);return}t=r.return;var a=kS(r.alternate,r,dr);if(a!==null){ze=a;return}if(r=r.sibling,r!==null){ze=r;return}ze=r=t}while(r!==null);wt===0&&(wt=5)}function Zv(t,r){do{var a=PS(t.alternate,t);if(a!==null){a.flags&=32767,ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){ze=t;return}ze=t=a}while(t!==null);wt=6,ze=null}function Jv(t,r,a,l,h,d,_,T,x){t.cancelPendingCommit=null;do Pc();while(Wt!==0);if((nt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Pf,_e(t,a,d,_,T,x),t===ht&&(ze=ht=null,Ke=0),no=r,Qr=t,io=a,Bd=d,qd=h,Hv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,QS(qi,function(){return r_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=ae.p,ae.p=2,_=nt,nt|=4;try{LS(t,r,a)}finally{nt=_,ae.p=h,X.T=l}}Wt=1,e_(),t_(),n_()}}function e_(){if(Wt===1){Wt=0;var t=Qr,r=no,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var h=nt;nt|=4;try{Pv(r,t);var d=rm,_=qg(t.containerInfo),T=d.focusedElem,x=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Bg(T.ownerDocument.documentElement,T)){if(x!==null&&Df(T)){var H=x.start,W=x.end;if(W===void 0&&(W=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(W,T.value.length);else{var ee=T.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var K=G.getSelection(),Ce=T.textContent.length,we=Math.min(x.start,Ce),lt=x.end===void 0?we:Math.min(x.end,Ce);!K.extend&&we>lt&&(_=lt,lt=we,we=_);var j=zg(T,we),L=zg(T,lt);if(j&&L&&(K.rangeCount!==1||K.anchorNode!==j.node||K.anchorOffset!==j.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var q=ee.createRange();q.setStart(j.node,j.offset),K.removeAllRanges(),we>lt?(K.addRange(q),K.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),K.addRange(q))}}}}for(ee=[],K=T;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Qc=!!im,rm=im=null}finally{nt=h,ae.p=l,X.T=a}}t.current=r,Wt=2}}function t_(){if(Wt===2){Wt=0;var t=Qr,r=no,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var h=nt;nt|=4;try{Ov(t,r.alternate,r)}finally{nt=h,ae.p=l,X.T=a}}Wt=3}}function n_(){if(Wt===4||Wt===3){Wt=0,Is();var t=Qr,r=no,a=io,l=Hv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Wt=5:(Wt=0,no=Qr=null,i_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&($r=null),Cn(a),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(mt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=X.T,h=ae.p,ae.p=2,X.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{X.T=r,ae.p=h}}(io&3)!==0&&Pc(),Oi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Hd?Nl++:(Nl=0,Hd=t):Nl=0,xl(0)}}function i_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ul(r)))}function Pc(t){return e_(),t_(),n_(),r_()}function r_(){if(Wt!==5)return!1;var t=Qr,r=Bd;Bd=0;var a=Cn(io),l=X.T,h=ae.p;try{ae.p=32>a?32:a,X.T=null,a=qd,qd=null;var d=Qr,_=io;if(Wt=0,no=Qr=null,io=0,(nt&6)!==0)throw Error(s(331));var T=nt;if(nt|=4,Bv(d.current),Uv(d,d.current,_,a),nt=T,xl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(mt,d)}catch{}return!0}finally{ae.p=h,X.T=l,i_(t,r)}}function s_(t,r,a){r=Hn(a,r),r=Td(t.stateNode,r,2),t=Ur(t,r,2),t!==null&&(fe(t,2),Oi(t))}function ut(t,r,a){if(t.tag===3)s_(t,t,a);else for(;r!==null;){if(r.tag===3){s_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($r===null||!$r.has(l))){t=Hn(a,t),a=uv(2),l=Ur(r,a,2),l!==null&&(cv(a,l,r,t),fe(l,2),Oi(l));break}}r=r.return}}function $d(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new zS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(Ld=!0,h.add(a),t=GS.bind(null,t,r,a),r.then(t,t))}function GS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ht===t&&(Ke&a)===a&&(wt===4||wt===3&&(Ke&62914560)===Ke&&300>fn()-zd?(nt&2)===0&&ro(t,0):Ud|=a,to===Ke&&(to=0)),Oi(t)}function a_(t,r){r===0&&(r=z()),t=za(t,r),t!==null&&(fe(t,r),Oi(t))}function KS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),a_(t,a)}function $S(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),a_(t,a)}function QS(t,r){return pi(t,r)}var Lc=null,ao=null,Qd=!1,Uc=!1,Yd=!1,sa=0;function Oi(t){t!==ao&&t.next===null&&(ao===null?Lc=ao=t:ao=ao.next=t),Uc=!0,Qd||(Qd=!0,XS())}function xl(t,r){if(!Yd&&Uc){Yd=!0;do for(var a=!1,l=Lc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Vt(42|t)+1)-1,d&=h&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,c_(l,d))}else d=Ke,d=Gi(l,l===ht?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||yi(l,d)||(a=!0,c_(l,d));l=l.next}while(a);Yd=!1}}function YS(){o_()}function o_(){Uc=Qd=!1;var t=0;sa!==0&&(rA()&&(t=sa),sa=0);for(var r=fn(),a=null,l=Lc;l!==null;){var h=l.next,d=l_(l,r);d===0?(l.next=null,a===null?Lc=h:a.next=h,h===null&&(ao=a)):(a=l,(t!==0||(d&3)!==0)&&(Uc=!0)),l=h}xl(t)}function l_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-Vt(d),T=1<<_,x=h[_];x===-1?((T&a)===0||(T&l)!==0)&&(h[_]=Ns(T,r)):x<=r&&(t.expiredLanes|=T),d&=~T}if(r=ht,a=Ke,a=Gi(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(it===2||it===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Bi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||yi(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Bi(l),Cn(a)){case 2:case 8:a=Cr;break;case 32:a=qi;break;case 268435456:a=Nr;break;default:a=qi}return l=u_.bind(null,t),a=pi(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Bi(l),t.callbackPriority=2,t.callbackNode=null,2}function u_(t,r){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Pc()&&t.callbackNode!==a)return null;var l=Ke;return l=Gi(t,t===ht?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Gv(t,l,r),l_(t,fn()),t.callbackNode!=null&&t.callbackNode===a?u_.bind(null,t):null)}function c_(t,r){if(Pc())return null;Gv(t,r,!0)}function XS(){aA(function(){(nt&6)!==0?pi(Ir,YS):o_()})}function Xd(){return sa===0&&(sa=xs()),sa}function h_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ca(""+t)}function f_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function WS(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=h_((h[yt]||null).action),_=l.submitter;_&&(r=(r=_[yt]||null)?h_(r.formAction):_.getAttribute("formAction"),r!==null&&(d=r,_=null));var T=new Na("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sa!==0){var x=_?f_(h,_):new FormData(h);gd(a,{pending:!0,data:x,method:h.method,action:d},null,x)}}else typeof d=="function"&&(T.preventDefault(),x=_?f_(h,_):new FormData(h),gd(a,{pending:!0,data:x,method:h.method,action:d},d,x))},currentTarget:h}]})}}for(var Wd=0;Wd<kf.length;Wd++){var Zd=kf[Wd],ZS=Zd.toLowerCase(),JS=Zd[0].toUpperCase()+Zd.slice(1);ii(ZS,"on"+JS)}ii(Gg,"onAnimationEnd"),ii(Kg,"onAnimationIteration"),ii($g,"onAnimationStart"),ii("dblclick","onDoubleClick"),ii("focusin","onFocus"),ii("focusout","onBlur"),ii(gS,"onTransitionRun"),ii(yS,"onTransitionStart"),ii(vS,"onTransitionCancel"),ii(Qg,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dl));function d_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var _=l.length-1;0<=_;_--){var T=l[_],x=T.instance,H=T.currentTarget;if(T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=H;try{d(h)}catch(W){Ac(W)}h.currentTarget=null,d=x}else for(_=0;_<l.length;_++){if(T=l[_],x=T.instance,H=T.currentTarget,T=T.listener,x!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=H;try{d(h)}catch(W){Ac(W)}h.currentTarget=null,d=x}}}}function Be(t,r){var a=r[Tt];a===void 0&&(a=r[Tt]=new Set);var l=t+"__bubble";a.has(l)||(m_(r,t,2,!1),a.add(l))}function Jd(t,r,a){var l=0;r&&(l|=4),m_(a,t,l,r)}var jc="_reactListening"+Math.random().toString(36).slice(2);function em(t){if(!t[jc]){t[jc]=!0,Ho.forEach(function(a){a!=="selectionchange"&&(eA.has(a)||Jd(a,!1,t),Jd(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[jc]||(r[jc]=!0,Jd("selectionchange",!1,r))}}function m_(t,r,a,l){switch(U_(r)){case 2:var h=IA;break;case 8:h=CA;break;default:h=mm}a=h.bind(null,r,a,t),h=void 0,!Bn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function tm(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var x=_.tag;if((x===3||x===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=Ki(T),_===null)return;if(x=_.tag,x===5||x===6||x===26||x===27){l=d=_;continue e}T=T.parentNode}}l=l.return}Bu(function(){var H=d,W=zn(a),ee=[];e:{var G=Yg.get(t);if(G!==void 0){var K=Na,Ce=t;switch(t){case"keypress":if(wi(a)===0)break e;case"keydown":case"keyup":K=ka;break;case"focusin":Ce="focus",K=Oa;break;case"focusout":Ce="blur",K=Oa;break;case"beforeblur":case"afterblur":K=Oa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=If;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Yu;break;case Gg:case Kg:case $g:K=Ma;break;case Qg:K=Wu;break;case"scroll":case"scrollend":K=qu;break;case"wheel":K=Pa;break;case"copy":case"cut":case"paste":K=Va;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=tl;break;case"toggle":case"beforetoggle":K=Ju}var we=(r&4)!==0,lt=!we&&(t==="scroll"||t==="scrollend"),j=we?G!==null?G+"Capture":null:G;we=[];for(var L=H,q;L!==null;){var Z=L;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||j===null||(Z=Us(L,j),Z!=null&&we.push(Ol(L,Z,q))),lt)break;L=L.return}0<we.length&&(G=new K(G,Ce,null,a,W),ee.push({event:G,listeners:we}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==Xi&&(Ce=a.relatedTarget||a.fromElement)&&(Ki(Ce)||Ce[Xe]))break e;if((K||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,K?(Ce=a.relatedTarget||a.toElement,K=H,Ce=Ce?Ki(Ce):null,Ce!==null&&(lt=u(Ce),we=Ce.tag,Ce!==lt||we!==5&&we!==27&&we!==6)&&(Ce=null)):(K=null,Ce=H),K!==Ce)){if(we=qn,Z="onMouseLeave",j="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(we=tl,Z="onPointerLeave",j="onPointerEnter",L="pointer"),lt=K==null?G:_i(K),q=Ce==null?G:_i(Ce),G=new we(Z,L+"leave",K,a,W),G.target=lt,G.relatedTarget=q,Z=null,Ki(W)===H&&(we=new we(j,L+"enter",Ce,a,W),we.target=q,we.relatedTarget=lt,Z=we),lt=Z,K&&Ce)t:{for(we=K,j=Ce,L=0,q=we;q;q=oo(q))L++;for(q=0,Z=j;Z;Z=oo(Z))q++;for(;0<L-q;)we=oo(we),L--;for(;0<q-L;)j=oo(j),q--;for(;L--;){if(we===j||j!==null&&we===j.alternate)break t;we=oo(we),j=oo(j)}we=null}else we=null;K!==null&&p_(ee,G,K,we,!1),Ce!==null&&lt!==null&&p_(ee,lt,Ce,we,!0)}}e:{if(G=H?_i(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var ye=Vg;else if(Pt(G))if(kg)ye=dS;else{ye=hS;var Ue=cS}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Qo(H.elementType)&&(ye=Vg):ye=fS;if(ye&&(ye=ye(t,H))){tr(ee,ye,a,W);break e}Ue&&Ue(t,G,H),t==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Mr(G,"number",G.value)}switch(Ue=H?_i(H):window,t){case"focusin":(Pt(Ue)||Ue.contentEditable==="true")&&(La=Ue,Of=H,rl=null);break;case"focusout":rl=Of=La=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,Hg(ee,a,W);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":Hg(ee,a,W)}var Ee;if(Ri)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Fe?$(t,a)&&(Se="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(v&&a.locale!=="ko"&&(Fe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Fe&&(Ee=Xo()):(bi=W,Vr="value"in bi?bi.value:bi.textContent,Fe=!0)),Ue=zc(H,Se),0<Ue.length&&(Se=new Jo(Se,t,null,a,W),ee.push({event:Se,listeners:Ue}),Ee?Se.data=Ee:(Ee=oe(a),Ee!==null&&(Se.data=Ee)))),(Ee=y?kt(t,a):Ge(t,a))&&(Se=zc(H,"onBeforeInput"),0<Se.length&&(Ue=new Jo("onBeforeInput","beforeinput",null,a,W),ee.push({event:Ue,listeners:Se}),Ue.data=Ee)),WS(ee,t,H,a,W)}d_(ee,r)})}function Ol(t,r,a){return{instance:t,listener:r,currentTarget:a}}function zc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Us(t,a),h!=null&&l.unshift(Ol(t,h,d)),h=Us(t,r),h!=null&&l.push(Ol(t,h,d))),t.tag===3)return l;t=t.return}return[]}function oo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function p_(t,r,a,l,h){for(var d=r._reactName,_=[];a!==null&&a!==l;){var T=a,x=T.alternate,H=T.stateNode;if(T=T.tag,x!==null&&x===l)break;T!==5&&T!==26&&T!==27||H===null||(x=H,h?(H=Us(a,d),H!=null&&_.unshift(Ol(a,H,x))):h||(H=Us(a,d),H!=null&&_.push(Ol(a,H,x)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var tA=/\r\n?/g,nA=/\u0000|\uFFFD/g;function g_(t){return(typeof t=="string"?t:""+t).replace(tA,`
`).replace(nA,"")}function y_(t,r){return r=g_(r),g_(t)===r}function Bc(){}function ot(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||jn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&jn(t,""+l);break;case"className":Ei(t,"class",l);break;case"tabIndex":Ei(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(t,a,l);break;case"style":$o(t,l,d);break;case"data":if(r!=="object"){Ei(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&ot(t,r,"name",h.name,h,null),ot(t,r,"formEncType",h.formEncType,h,null),ot(t,r,"formMethod",h.formMethod,h,null),ot(t,r,"formTarget",h.formTarget,h,null)):(ot(t,r,"encType",h.encType,h,null),ot(t,r,"method",h.method,h,null),ot(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ca(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Bc);break;case"onScroll":l!=null&&Be("scroll",t);break;case"onScrollEnd":l!=null&&Be("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ca(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Be("beforetoggle",t),Be("toggle",t),Or(t,"popover",l);break;case"xlinkActuate":Qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Or(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Af.get(a)||a,Or(t,a,l))}}function nm(t,r,a,l,h,d){switch(a){case"style":$o(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?jn(t,l):(typeof l=="number"||typeof l=="bigint")&&jn(t,""+l);break;case"onScroll":l!=null&&Be("scroll",t);break;case"onScrollEnd":l!=null&&Be("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Bc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[yt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Or(t,a,l)}}}function Zt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",t),Be("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(t,r,d,_,a,null)}}h&&ot(t,r,"srcSet",a.srcSet,a,null),l&&ot(t,r,"src",a.src,a,null);return;case"input":Be("invalid",t);var T=d=_=h=null,x=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":_=W;break;case"checked":x=W;break;case"defaultChecked":H=W;break;case"value":d=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:ot(t,r,l,W,a,null)}}ks(t,d,T,x,H,_,h,!1),Ia(t);return;case"select":Be("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:ot(t,r,h,T,a,null)}r=d,a=_,t.multiple=!!l,r!=null?Yi(t,!!l,r,!1):a!=null&&Yi(t,!!l,a,!0);return;case"textarea":Be("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:ot(t,r,_,T,a,null)}Ps(t,l,h,d),Ia(t);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ot(t,r,x,l,a,null)}return;case"dialog":Be("beforetoggle",t),Be("toggle",t),Be("cancel",t),Be("close",t);break;case"iframe":case"object":Be("load",t);break;case"video":case"audio":for(l=0;l<Dl.length;l++)Be(Dl[l],t);break;case"image":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"embed":case"source":case"link":Be("error",t),Be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(t,r,H,l,a,null)}return;default:if(Qo(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&nm(t,r,W,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&ot(t,r,T,l,a,null))}function iA(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,T=null,x=null,H=null,W=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":x=ee;default:l.hasOwnProperty(K)||ot(t,r,K,null,l,ee)}}for(var G in l){var K=l[G];if(ee=a[G],l.hasOwnProperty(G)&&(K!=null||ee!=null))switch(G){case"type":d=K;break;case"name":h=K;break;case"checked":H=K;break;case"defaultChecked":W=K;break;case"value":_=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==ee&&ot(t,r,G,K,l,ee)}}Nn(t,_,T,x,H,W,d,h);return;case"select":K=_=T=G=null;for(d in a)if(x=a[d],a.hasOwnProperty(d)&&x!=null)switch(d){case"value":break;case"multiple":K=x;default:l.hasOwnProperty(d)||ot(t,r,d,null,l,x)}for(h in l)if(d=l[h],x=a[h],l.hasOwnProperty(h)&&(d!=null||x!=null))switch(h){case"value":G=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==x&&ot(t,r,h,d,l,x)}r=T,a=_,l=K,G!=null?Yi(t,!!a,G,!1):!!l!=!!a&&(r!=null?Yi(t,!!a,r,!0):Yi(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ot(t,r,T,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":G=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ot(t,r,_,h,l,d)}st(t,G,K);return;case"option":for(var Ce in a)if(G=a[Ce],a.hasOwnProperty(Ce)&&G!=null&&!l.hasOwnProperty(Ce))switch(Ce){case"selected":t.selected=!1;break;default:ot(t,r,Ce,null,l,G)}for(x in l)if(G=l[x],K=a[x],l.hasOwnProperty(x)&&G!==K&&(G!=null||K!=null))switch(x){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ot(t,r,x,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we)&&ot(t,r,we,null,l,G);for(H in l)if(G=l[H],K=a[H],l.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:ot(t,r,H,G,l,K)}return;default:if(Qo(r)){for(var lt in a)G=a[lt],a.hasOwnProperty(lt)&&G!==void 0&&!l.hasOwnProperty(lt)&&nm(t,r,lt,void 0,l,G);for(W in l)G=l[W],K=a[W],!l.hasOwnProperty(W)||G===K||G===void 0&&K===void 0||nm(t,r,W,G,l,K);return}}for(var j in a)G=a[j],a.hasOwnProperty(j)&&G!=null&&!l.hasOwnProperty(j)&&ot(t,r,j,null,l,G);for(ee in l)G=l[ee],K=a[ee],!l.hasOwnProperty(ee)||G===K||G==null&&K==null||ot(t,r,ee,G,l,K)}var im=null,rm=null;function qc(t){return t.nodeType===9?t:t.ownerDocument}function v_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function __(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function sm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var am=null;function rA(){var t=window.event;return t&&t.type==="popstate"?t===am?!1:(am=t,!0):(am=null,!1)}var E_=typeof setTimeout=="function"?setTimeout:void 0,sA=typeof clearTimeout=="function"?clearTimeout:void 0,T_=typeof Promise=="function"?Promise:void 0,aA=typeof queueMicrotask=="function"?queueMicrotask:typeof T_<"u"?function(t){return T_.resolve(null).then(t).catch(oA)}:E_;function oA(t){setTimeout(function(){throw t})}function Xr(t){return t==="head"}function b_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&Ml(_.documentElement),a&2&&Ml(_.body),a&4)for(a=_.head,Ml(a),_=a.firstChild;_;){var T=_.nextSibling,x=_.nodeName;_[Ds]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=T}}if(h===0){t.removeChild(d),Bl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Bl(r)}function om(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":om(a),Dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function lA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ds])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function uA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=si(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function cA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function si(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var um=null;function w_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function S_(t,r,a){switch(r=qc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ml(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Dr(t)}var Yn=new Map,A_=new Set;function Hc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var mr=ae.d;ae.d={f:hA,r:fA,D:dA,C:mA,L:pA,m:gA,X:vA,S:yA,M:_A};function hA(){var t=mr.f(),r=Vc();return t||r}function fA(t){var r=vi(t);r!==null&&r.tag===5&&r.type==="form"?Gy(r):mr.r(t)}var lo=typeof document>"u"?null:document;function R_(t,r,a){var l=lo;if(l&&typeof r=="string"&&r){var h=Nt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),A_.has(h)||(A_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Zt(r,"link",t),St(r),l.head.appendChild(r)))}}function dA(t){mr.D(t),R_("dns-prefetch",t,null)}function mA(t,r){mr.C(t,r),R_("preconnect",t,r)}function pA(t,r,a){mr.L(t,r,a);var l=lo;if(l&&t&&r){var h='link[rel="preload"][as="'+Nt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Nt(a.imageSizes)+'"]')):h+='[href="'+Nt(t)+'"]';var d=h;switch(r){case"style":d=uo(t);break;case"script":d=co(t)}Yn.has(d)||(t=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Yn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Vl(d))||r==="script"&&l.querySelector(kl(d))||(r=l.createElement("link"),Zt(r,"link",t),St(r),l.head.appendChild(r)))}}function gA(t,r){mr.m(t,r);var a=lo;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Nt(l)+'"][href="'+Nt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=co(t)}if(!Yn.has(d)&&(t=E({rel:"modulepreload",href:t},r),Yn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(kl(d)))return}l=a.createElement("link"),Zt(l,"link",t),St(l),a.head.appendChild(l)}}}function yA(t,r,a){mr.S(t,r,a);var l=lo;if(l&&t){var h=mn(l).hoistableStyles,d=uo(t);r=r||"default";var _=h.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Vl(d)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Yn.get(d))&&cm(t,a);var x=_=l.createElement("link");St(x),Zt(x,"link",t),x._p=new Promise(function(H,W){x.onload=H,x.onerror=W}),x.addEventListener("load",function(){T.loading|=1}),x.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(d,_)}}}function vA(t,r){mr.X(t,r);var a=lo;if(a&&t){var l=mn(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=E({src:t,async:!0},r),(r=Yn.get(h))&&hm(t,r),d=a.createElement("script"),St(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function _A(t,r){mr.M(t,r);var a=lo;if(a&&t){var l=mn(a).hoistableScripts,h=co(t),d=l.get(h);d||(d=a.querySelector(kl(h)),d||(t=E({src:t,async:!0,type:"module"},r),(r=Yn.get(h))&&hm(t,r),d=a.createElement("script"),St(d),Zt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function I_(t,r,a,l){var h=(h=be.current)?Hc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=uo(a.href),a=mn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=uo(a.href);var d=mn(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Vl(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Yn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(t,a),d||EA(h,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=co(a),a=mn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function uo(t){return'href="'+Nt(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function C_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function EA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Zt(r,"link",a),St(r),t.head.appendChild(r))}function co(t){return'[src="'+Nt(t)+'"]'}function kl(t){return"script[async]"+t}function N_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(l)return r.instance=l,St(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),St(l),Zt(l,"style",h),Fc(l,a.precedence,t),r.instance=l;case"stylesheet":h=uo(a.href);var d=t.querySelector(Vl(h));if(d)return r.state.loading|=4,r.instance=d,St(d),d;l=C_(a),(h=Yn.get(h))&&cm(l,h),d=(t.ownerDocument||t).createElement("link"),St(d);var _=d;return _._p=new Promise(function(T,x){_.onload=T,_.onerror=x}),Zt(d,"link",l),r.state.loading|=4,Fc(d,a.precedence,t),r.instance=d;case"script":return d=co(a.src),(h=t.querySelector(kl(d)))?(r.instance=h,St(h),h):(l=a,(h=Yn.get(d))&&(l=E({},a),hm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),St(h),Zt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Fc(l,a.precedence,t));return r.instance}function Fc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===r)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function cm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function hm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Gc=null;function x_(t,r,a){if(Gc===null){var l=new Map,h=Gc=new Map;h.set(a,l)}else h=Gc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ds]||d[ct]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(r)||"";_=t+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function D_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function TA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function O_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Pl=null;function bA(){}function wA(t,r,a){if(Pl===null)throw Error(s(475));var l=Pl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=uo(a.href),d=t.querySelector(Vl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Kc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,St(d);return}d=t.ownerDocument||t,a=C_(a),(h=Yn.get(h))&&cm(a,h),d=d.createElement("link"),St(d);var _=d;_._p=new Promise(function(T,x){_.onload=T,_.onerror=x}),Zt(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Kc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function SA(){if(Pl===null)throw Error(s(475));var t=Pl;return t.stylesheets&&t.count===0&&fm(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&fm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Kc(){if(this.count--,this.count===0){if(this.stylesheets)fm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $c=null;function fm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$c=new Map,r.forEach(AA,t),$c=null,Kc.call(t))}function AA(t,r){if(!(r.state.loading&4)){var a=$c.get(t);if(a)var l=a.get(null);else{a=new Map,$c.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=r.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Kc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Ll={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function RA(t,r,a,l,h,d,_,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=le(0),this.hiddenUpdates=le(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function M_(t,r,a,l,h,d,_,T,x,H,W,ee){return t=new RA(t,r,a,_,T,x,H,ee),r=1,d===!0&&(r|=24),d=Dn(3,null,null,r),t.current=d,d.stateNode=t,r=$f(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Wf(d),t}function V_(t){return t?(t=Ba,t):Ba}function k_(t,r,a,l,h,d){h=V_(h),l.context===null?l.context=h:l.pendingContext=h,l=Lr(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ur(t,l,r),a!==null&&(Pn(a,t,r),dl(a,t,r))}function P_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function dm(t,r){P_(t,r),(t=t.alternate)&&P_(t,r)}function L_(t){if(t.tag===13){var r=za(t,67108864);r!==null&&Pn(r,t,67108864),dm(t,67108864)}}var Qc=!0;function IA(t,r,a,l){var h=X.T;X.T=null;var d=ae.p;try{ae.p=2,mm(t,r,a,l)}finally{ae.p=d,X.T=h}}function CA(t,r,a,l){var h=X.T;X.T=null;var d=ae.p;try{ae.p=8,mm(t,r,a,l)}finally{ae.p=d,X.T=h}}function mm(t,r,a,l){if(Qc){var h=pm(l);if(h===null)tm(t,r,l,Yc,a),j_(t,l);else if(xA(h,t,r,a,l))l.stopPropagation();else if(j_(t,l),r&4&&-1<NA.indexOf(t)){for(;h!==null;){var d=vi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=En(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var x=1<<31-Vt(_);T.entanglements[1]|=x,_&=~x}Oi(d),(nt&6)===0&&(Oc=fn()+500,xl(0))}}break;case 13:T=za(d,2),T!==null&&Pn(T,d,2),Vc(),dm(d,2)}if(d=pm(l),d===null&&tm(t,r,l,Yc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else tm(t,r,l,null,a)}}function pm(t){return t=zn(t),gm(t)}var Yc=null;function gm(t){if(Yc=null,t=Ki(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Yc=t,null}function U_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zo()){case Ir:return 2;case Cr:return 8;case qi:case Bo:return 32;case Nr:return 268435456;default:return 32}default:return 32}}var ym=!1,Wr=null,Zr=null,Jr=null,Ul=new Map,jl=new Map,es=[],NA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j_(t,r){switch(t){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Ul.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(r.pointerId)}}function zl(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=vi(r),r!==null&&L_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function xA(t,r,a,l,h){switch(r){case"focusin":return Wr=zl(Wr,t,r,a,l,h),!0;case"dragenter":return Zr=zl(Zr,t,r,a,l,h),!0;case"mouseover":return Jr=zl(Jr,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ul.set(d,zl(Ul.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,jl.set(d,zl(jl.get(d)||null,t,r,a,l,h)),!0}return!1}function z_(t){var r=Ki(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,rn(t.priority,function(){if(a.tag===13){var l=kn();l=dt(l);var h=za(a,l);h!==null&&Pn(h,a,l),dm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=pm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xi=l,a.target.dispatchEvent(l),Xi=null}else return r=vi(a),r!==null&&L_(r),t.blockedOn=a,!1;r.shift()}return!0}function B_(t,r,a){Xc(t)&&a.delete(r)}function DA(){ym=!1,Wr!==null&&Xc(Wr)&&(Wr=null),Zr!==null&&Xc(Zr)&&(Zr=null),Jr!==null&&Xc(Jr)&&(Jr=null),Ul.forEach(B_),jl.forEach(B_)}function Wc(t,r){t.blockedOn===r&&(t.blockedOn=null,ym||(ym=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,DA)))}var Zc=null;function q_(t){Zc!==t&&(Zc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zc===t&&(Zc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(gm(l||a)===null)continue;break}var d=vi(a);d!==null&&(t.splice(r,3),r-=3,gd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Bl(t){function r(x){return Wc(x,t)}Wr!==null&&Wc(Wr,t),Zr!==null&&Wc(Zr,t),Jr!==null&&Wc(Jr,t),Ul.forEach(r),jl.forEach(r);for(var a=0;a<es.length;a++){var l=es[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<es.length&&(a=es[0],a.blockedOn===null);)z_(a),a.blockedOn===null&&es.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[yt]||null;if(typeof d=="function")_||q_(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[yt]||null)T=_.formAction;else if(gm(h)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),q_(a)}}}function vm(t){this._internalRoot=t}Jc.prototype.render=vm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=kn();k_(a,l,t,r,null,null)},Jc.prototype.unmount=vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;k_(t.current,2,null,t,null,null),Vc(),r[Xe]=null}};function Jc(t){this._internalRoot=t}Jc.prototype.unstable_scheduleHydration=function(t){if(t){var r=$t();t={blockedOn:null,target:t,priority:r};for(var a=0;a<es.length&&r!==0&&r<es[a].priority;a++);es.splice(a,0,t),a===0&&z_(t)}};var H_=e.version;if(H_!=="19.1.0")throw Error(s(527,H_,"19.1.0"));ae.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var OA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{mt=eh.inject(OA),Ye=eh}catch{}}return Hl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=sv,d=av,_=ov,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=M_(t,1,!1,null,null,a,l,h,d,_,T,null),t[Xe]=r.current,em(t),new vm(r)},Hl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=sv,_=av,T=ov,x=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),r=M_(t,1,!0,r,a??null,l,h,d,_,T,x,H),r.context=V_(null),a=r.current,l=kn(),l=dt(l),h=Lr(l),h.callback=null,Ur(a,h,l),a=l,r.current.lanes=a,fe(r,a),Oi(r),t[Xe]=r.current,em(t),new Jc(r)},Hl.version="19.1.0",Hl}var J_;function BA(){if(J_)return Tm.exports;J_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Tm.exports=zA(),Tm.exports}var qA=BA();const HA=()=>{};var e0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},FA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},ZE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,E=u>>2,A=(u&3)<<4|m>>4;let I=(m&15)<<2|g>>6,P=g&63;p||(P=64,f||(I=64)),s.push(n[E],n[A],n[I],n[P])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(WE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):FA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||A==null)throw new GA;const I=u<<2|m>>4;if(s.push(I),g!==64){const P=m<<4&240|g>>2;if(s.push(P),A!==64){const M=g<<6&192|A;s.push(M)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class GA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KA=function(i){const e=WE(i);return ZE.encodeByteArray(e,!0)},wh=function(i){return KA(i).replace(/\./g,"")},JE=function(i){try{return ZE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=()=>$A().__FIREBASE_DEFAULTS__,YA=()=>{if(typeof process>"u"||typeof e0>"u")return;const i=e0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},XA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&JE(i[1]);return e&&JSON.parse(e)},Kh=()=>{try{return HA()||QA()||YA()||XA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},eT=i=>{var e,n;return(n=(e=Kh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},WA=i=>{const e=eT(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},tT=()=>{var i;return(i=Kh())===null||i===void 0?void 0:i.config},nT=i=>{var e;return(e=Kh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[wh(JSON.stringify(n)),wh(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function tR(){var i;const e=(i=Kh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function iR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rR(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rT(){try{return typeof indexedDB=="object"}catch{return!1}}function sT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function aR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="FirebaseError";class fi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=oR,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pa.prototype.create)}}class pa{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?lR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new fi(o,m,s)}}function lR(i,e){return i.replace(uR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const uR=/\{\$([^}]+)}/g;function cR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ds(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(t0(u)&&t0(f)){if(!ds(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function t0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function $l(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Ql(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function hR(i,e){const n=new fR(i,e);return n.subscribe.bind(n)}class fR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");dR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Am),o.error===void 0&&(o.error=Am),o.complete===void 0&&(o.complete=Am);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dR(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Am(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1e3,pR=2,gR=4*60*60*1e3,yR=.5;function n0(i,e=mR,n=pR){const s=e*Math.pow(n,i),o=Math.round(yR*s*(Math.random()-.5)*2);return Math.min(gR,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(i){return i&&i._delegate?i._delegate:i}class li{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new ZA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ER(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_R(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _R(i){return i===aa?void 0:i}function ER(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new vR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(qe||(qe={}));const bR={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},wR=qe.INFO,SR={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},AR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=SR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $h{constructor(e){this.name=e,this._logLevel=wR,this._logHandler=AR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const RR=(i,e)=>e.some(n=>i instanceof n);let i0,r0;function IR(){return i0||(i0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CR(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aT=new WeakMap,Fm=new WeakMap,oT=new WeakMap,Rm=new WeakMap,bp=new WeakMap;function NR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(us(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&aT.set(n,i)}).catch(()=>{}),bp.set(e,i),e}function xR(i){if(Fm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Fm.set(i,e)}let Gm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Fm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||oT.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function DR(i){Gm=i(Gm)}function OR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Im(this),e,...n);return oT.set(s,e.sort?e.sort():[e]),us(s)}:CR().includes(i)?function(...e){return i.apply(Im(this),e),us(aT.get(this))}:function(...e){return us(i.apply(Im(this),e))}}function MR(i){return typeof i=="function"?OR(i):(i instanceof IDBTransaction&&xR(i),RR(i,IR())?new Proxy(i,Gm):i)}function us(i){if(i instanceof IDBRequest)return NR(i);if(Rm.has(i))return Rm.get(i);const e=MR(i);return e!==i&&(Rm.set(i,e),bp.set(e,i)),e}const Im=i=>bp.get(i);function lT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=us(f);return s&&f.addEventListener("upgradeneeded",p=>{s(us(f.result),p.oldVersion,p.newVersion,us(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const VR=["get","getKey","getAll","getAllKeys","count"],kR=["put","add","delete","clear"],Cm=new Map;function s0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=kR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||VR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return Cm.set(e,u),u}DR(i=>({...i,get:(e,n,s)=>s0(e,n)||i.get(e,n,s),has:(e,n)=>!!s0(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function LR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Km="@firebase/app",a0="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new $h("@firebase/app"),UR="@firebase/app-compat",jR="@firebase/analytics-compat",zR="@firebase/analytics",BR="@firebase/app-check-compat",qR="@firebase/app-check",HR="@firebase/auth",FR="@firebase/auth-compat",GR="@firebase/database",KR="@firebase/data-connect",$R="@firebase/database-compat",QR="@firebase/functions",YR="@firebase/functions-compat",XR="@firebase/installations",WR="@firebase/installations-compat",ZR="@firebase/messaging",JR="@firebase/messaging-compat",eI="@firebase/performance",tI="@firebase/performance-compat",nI="@firebase/remote-config",iI="@firebase/remote-config-compat",rI="@firebase/storage",sI="@firebase/storage-compat",aI="@firebase/firestore",oI="@firebase/vertexai",lI="@firebase/firestore-compat",uI="firebase",cI="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="[DEFAULT]",hI={[Km]:"fire-core",[UR]:"fire-core-compat",[zR]:"fire-analytics",[jR]:"fire-analytics-compat",[qR]:"fire-app-check",[BR]:"fire-app-check-compat",[HR]:"fire-auth",[FR]:"fire-auth-compat",[GR]:"fire-rtdb",[KR]:"fire-data-connect",[$R]:"fire-rtdb-compat",[QR]:"fire-fn",[YR]:"fire-fn-compat",[XR]:"fire-iid",[WR]:"fire-iid-compat",[ZR]:"fire-fcm",[JR]:"fire-fcm-compat",[eI]:"fire-perf",[tI]:"fire-perf-compat",[nI]:"fire-rc",[iI]:"fire-rc-compat",[rI]:"fire-gcs",[sI]:"fire-gcs-compat",[aI]:"fire-fst",[lI]:"fire-fst-compat",[oI]:"fire-vertex","fire-js":"fire-js",[uI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh=new Map,fI=new Map,Qm=new Map;function o0(i,e){try{i.container.addComponent(e)}catch(n){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ui(i){const e=i.name;if(Qm.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;Qm.set(e,i);for(const n of Sh.values())o0(n,i);for(const n of fI.values())o0(n,i);return!0}function ga(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Xn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new pa("app","Firebase",dI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=cI;function uT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:$m,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(n||(n=tT()),!n)throw cs.create("no-options");const u=Sh.get(o);if(u){if(ds(n,u.options)&&ds(s,u.config))return u;throw cs.create("duplicate-app",{appName:o})}const f=new TR(o);for(const p of Qm.values())f.addComponent(p);const m=new mI(n,s,f);return Sh.set(o,m),m}function wp(i=$m){const e=Sh.get(i);if(!e&&i===$m&&tT())return uT();if(!e)throw cs.create("no-app",{appName:i});return e}function Zn(i,e,n){var s;let o=(s=hI[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(m.join(" "));return}Ui(new li(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="firebase-heartbeat-database",gI=1,au="firebase-heartbeat-store";let Nm=null;function cT(){return Nm||(Nm=lT(pI,gI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(i=>{throw cs.create("idb-open",{originalErrorMessage:i.message})})),Nm}async function yI(i){try{const n=(await cT()).transaction(au),s=await n.objectStore(au).get(hT(i));return await n.done,s}catch(e){if(e instanceof fi)Er.warn(e.message);else{const n=cs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}async function l0(i,e){try{const s=(await cT()).transaction(au,"readwrite");await s.objectStore(au).put(e,hT(i)),await s.done}catch(n){if(n instanceof fi)Er.warn(n.message);else{const s=cs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Er.warn(s.message)}}}function hT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=1024,_I=30;class EI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=u0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>_I){const f=wI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Er.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u0(),{heartbeatsToSend:s,unsentEntries:o}=TI(this._heartbeatsCache.heartbeats),u=wh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Er.warn(n),""}}}function u0(){return new Date().toISOString().substring(0,10)}function TI(i,e=vI){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),c0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),c0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class bI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rT()?sT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return l0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return l0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function c0(i){return wh(JSON.stringify({version:2,heartbeats:i})).length}function wI(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(i){Ui(new li("platform-logger",e=>new PR(e),"PRIVATE")),Ui(new li("heartbeat",e=>new EI(e),"PRIVATE")),Zn(Km,a0,i),Zn(Km,a0,"esm2017"),Zn("fire-js","")}SI("");var AI="firebase",RI="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(AI,RI,"app");var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,fT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function R(){}R.prototype=w.prototype,k.D=w.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(D,N,O){for(var C=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)C[Ie-2]=arguments[Ie];return w.prototype[N].apply(D,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,w,R){R||(R=0);var D=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)D[N]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(N=0;16>N;++N)D[N]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=k.g[0],R=k.g[1],N=k.g[2];var O=k.g[3],C=w+(O^R&(N^O))+D[0]+3614090360&4294967295;w=R+(C<<7&4294967295|C>>>25),C=O+(N^w&(R^N))+D[1]+3905402710&4294967295,O=w+(C<<12&4294967295|C>>>20),C=N+(R^O&(w^R))+D[2]+606105819&4294967295,N=O+(C<<17&4294967295|C>>>15),C=R+(w^N&(O^w))+D[3]+3250441966&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(O^R&(N^O))+D[4]+4118548399&4294967295,w=R+(C<<7&4294967295|C>>>25),C=O+(N^w&(R^N))+D[5]+1200080426&4294967295,O=w+(C<<12&4294967295|C>>>20),C=N+(R^O&(w^R))+D[6]+2821735955&4294967295,N=O+(C<<17&4294967295|C>>>15),C=R+(w^N&(O^w))+D[7]+4249261313&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(O^R&(N^O))+D[8]+1770035416&4294967295,w=R+(C<<7&4294967295|C>>>25),C=O+(N^w&(R^N))+D[9]+2336552879&4294967295,O=w+(C<<12&4294967295|C>>>20),C=N+(R^O&(w^R))+D[10]+4294925233&4294967295,N=O+(C<<17&4294967295|C>>>15),C=R+(w^N&(O^w))+D[11]+2304563134&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(O^R&(N^O))+D[12]+1804603682&4294967295,w=R+(C<<7&4294967295|C>>>25),C=O+(N^w&(R^N))+D[13]+4254626195&4294967295,O=w+(C<<12&4294967295|C>>>20),C=N+(R^O&(w^R))+D[14]+2792965006&4294967295,N=O+(C<<17&4294967295|C>>>15),C=R+(w^N&(O^w))+D[15]+1236535329&4294967295,R=N+(C<<22&4294967295|C>>>10),C=w+(N^O&(R^N))+D[1]+4129170786&4294967295,w=R+(C<<5&4294967295|C>>>27),C=O+(R^N&(w^R))+D[6]+3225465664&4294967295,O=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(O^w))+D[11]+643717713&4294967295,N=O+(C<<14&4294967295|C>>>18),C=R+(O^w&(N^O))+D[0]+3921069994&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(N^O&(R^N))+D[5]+3593408605&4294967295,w=R+(C<<5&4294967295|C>>>27),C=O+(R^N&(w^R))+D[10]+38016083&4294967295,O=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(O^w))+D[15]+3634488961&4294967295,N=O+(C<<14&4294967295|C>>>18),C=R+(O^w&(N^O))+D[4]+3889429448&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(N^O&(R^N))+D[9]+568446438&4294967295,w=R+(C<<5&4294967295|C>>>27),C=O+(R^N&(w^R))+D[14]+3275163606&4294967295,O=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(O^w))+D[3]+4107603335&4294967295,N=O+(C<<14&4294967295|C>>>18),C=R+(O^w&(N^O))+D[8]+1163531501&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(N^O&(R^N))+D[13]+2850285829&4294967295,w=R+(C<<5&4294967295|C>>>27),C=O+(R^N&(w^R))+D[2]+4243563512&4294967295,O=w+(C<<9&4294967295|C>>>23),C=N+(w^R&(O^w))+D[7]+1735328473&4294967295,N=O+(C<<14&4294967295|C>>>18),C=R+(O^w&(N^O))+D[12]+2368359562&4294967295,R=N+(C<<20&4294967295|C>>>12),C=w+(R^N^O)+D[5]+4294588738&4294967295,w=R+(C<<4&4294967295|C>>>28),C=O+(w^R^N)+D[8]+2272392833&4294967295,O=w+(C<<11&4294967295|C>>>21),C=N+(O^w^R)+D[11]+1839030562&4294967295,N=O+(C<<16&4294967295|C>>>16),C=R+(N^O^w)+D[14]+4259657740&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(R^N^O)+D[1]+2763975236&4294967295,w=R+(C<<4&4294967295|C>>>28),C=O+(w^R^N)+D[4]+1272893353&4294967295,O=w+(C<<11&4294967295|C>>>21),C=N+(O^w^R)+D[7]+4139469664&4294967295,N=O+(C<<16&4294967295|C>>>16),C=R+(N^O^w)+D[10]+3200236656&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(R^N^O)+D[13]+681279174&4294967295,w=R+(C<<4&4294967295|C>>>28),C=O+(w^R^N)+D[0]+3936430074&4294967295,O=w+(C<<11&4294967295|C>>>21),C=N+(O^w^R)+D[3]+3572445317&4294967295,N=O+(C<<16&4294967295|C>>>16),C=R+(N^O^w)+D[6]+76029189&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(R^N^O)+D[9]+3654602809&4294967295,w=R+(C<<4&4294967295|C>>>28),C=O+(w^R^N)+D[12]+3873151461&4294967295,O=w+(C<<11&4294967295|C>>>21),C=N+(O^w^R)+D[15]+530742520&4294967295,N=O+(C<<16&4294967295|C>>>16),C=R+(N^O^w)+D[2]+3299628645&4294967295,R=N+(C<<23&4294967295|C>>>9),C=w+(N^(R|~O))+D[0]+4096336452&4294967295,w=R+(C<<6&4294967295|C>>>26),C=O+(R^(w|~N))+D[7]+1126891415&4294967295,O=w+(C<<10&4294967295|C>>>22),C=N+(w^(O|~R))+D[14]+2878612391&4294967295,N=O+(C<<15&4294967295|C>>>17),C=R+(O^(N|~w))+D[5]+4237533241&4294967295,R=N+(C<<21&4294967295|C>>>11),C=w+(N^(R|~O))+D[12]+1700485571&4294967295,w=R+(C<<6&4294967295|C>>>26),C=O+(R^(w|~N))+D[3]+2399980690&4294967295,O=w+(C<<10&4294967295|C>>>22),C=N+(w^(O|~R))+D[10]+4293915773&4294967295,N=O+(C<<15&4294967295|C>>>17),C=R+(O^(N|~w))+D[1]+2240044497&4294967295,R=N+(C<<21&4294967295|C>>>11),C=w+(N^(R|~O))+D[8]+1873313359&4294967295,w=R+(C<<6&4294967295|C>>>26),C=O+(R^(w|~N))+D[15]+4264355552&4294967295,O=w+(C<<10&4294967295|C>>>22),C=N+(w^(O|~R))+D[6]+2734768916&4294967295,N=O+(C<<15&4294967295|C>>>17),C=R+(O^(N|~w))+D[13]+1309151649&4294967295,R=N+(C<<21&4294967295|C>>>11),C=w+(N^(R|~O))+D[4]+4149444226&4294967295,w=R+(C<<6&4294967295|C>>>26),C=O+(R^(w|~N))+D[11]+3174756917&4294967295,O=w+(C<<10&4294967295|C>>>22),C=N+(w^(O|~R))+D[2]+718787259&4294967295,N=O+(C<<15&4294967295|C>>>17),C=R+(O^(N|~w))+D[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+O&4294967295}s.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var R=w-this.blockSize,D=this.B,N=this.h,O=0;O<w;){if(N==0)for(;O<=R;)o(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<w;)if(D[N++]=k.charCodeAt(O++),N==this.blockSize){o(this,D),N=0;break}}else for(;O<w;)if(D[N++]=k[O++],N==this.blockSize){o(this,D),N=0;break}}this.h=N,this.o+=w},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var R=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=R&255,R/=256;for(this.u(k),k=Array(16),w=R=0;4>w;++w)for(var D=0;32>D;D+=8)k[R++]=this.g[w]>>>D&255;return k};function u(k,w){var R=m;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=w(k)}function f(k,w){this.h=w;for(var R=[],D=!0,N=k.length-1;0<=N;N--){var O=k[N]|0;D&&O==w||(R[N]=O,D=!1)}this.g=R}var m={};function p(k){return-128<=k&&128>k?u(k,function(w){return new f([w|0],0>w?-1:0)}):new f([k|0],0>k?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return A;if(0>k)return F(g(-k));for(var w=[],R=1,D=0;k>=R;D++)w[D]=k/R|0,R*=4294967296;return new f(w,0)}function E(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return F(E(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(w,8)),D=A,N=0;N<k.length;N+=8){var O=Math.min(8,k.length-N),C=parseInt(k.substring(N,N+O),w);8>O?(O=g(Math.pow(w,O)),D=D.j(O).add(g(C))):(D=D.j(R),D=D.add(g(C)))}return D}var A=p(0),I=p(1),P=p(16777216);i=f.prototype,i.m=function(){if(Y(this))return-F(this).m();for(var k=0,w=1,R=0;R<this.g.length;R++){var D=this.i(R);k+=(0<=D?D:4294967296+D)*w,w*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(M(this))return"0";if(Y(this))return"-"+F(this).toString(k);for(var w=g(Math.pow(k,6)),R=this,D="";;){var N=he(R,w).g;R=Q(R,N.j(w));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=N,M(R))return O+D;for(;6>O.length;)O="0"+O;D=O+D}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function M(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function Y(k){return k.h==-1}i.l=function(k){return k=Q(this,k),Y(k)?-1:M(k)?0:1};function F(k){for(var w=k.g.length,R=[],D=0;D<w;D++)R[D]=~k.g[D];return new f(R,~k.h).add(I)}i.abs=function(){return Y(this)?F(this):this},i.add=function(k){for(var w=Math.max(this.g.length,k.g.length),R=[],D=0,N=0;N<=w;N++){var O=D+(this.i(N)&65535)+(k.i(N)&65535),C=(O>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);D=C>>>16,O&=65535,C&=65535,R[N]=C<<16|O}return new f(R,R[R.length-1]&-2147483648?-1:0)};function Q(k,w){return k.add(F(w))}i.j=function(k){if(M(this)||M(k))return A;if(Y(this))return Y(k)?F(this).j(F(k)):F(F(this).j(k));if(Y(k))return F(this.j(F(k)));if(0>this.l(P)&&0>k.l(P))return g(this.m()*k.m());for(var w=this.g.length+k.g.length,R=[],D=0;D<2*w;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(var N=0;N<k.g.length;N++){var O=this.i(D)>>>16,C=this.i(D)&65535,Ie=k.i(N)>>>16,Oe=k.i(N)&65535;R[2*D+2*N]+=C*Oe,se(R,2*D+2*N),R[2*D+2*N+1]+=O*Oe,se(R,2*D+2*N+1),R[2*D+2*N+1]+=C*Ie,se(R,2*D+2*N+1),R[2*D+2*N+2]+=O*Ie,se(R,2*D+2*N+2)}for(D=0;D<w;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=w;D<2*w;D++)R[D]=0;return new f(R,0)};function se(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function ne(k,w){this.g=k,this.h=w}function he(k,w){if(M(w))throw Error("division by zero");if(M(k))return new ne(A,A);if(Y(k))return w=he(F(k),w),new ne(F(w.g),F(w.h));if(Y(w))return w=he(k,F(w)),new ne(F(w.g),w.h);if(30<k.g.length){if(Y(k)||Y(w))throw Error("slowDivide_ only works with positive integers.");for(var R=I,D=w;0>=D.l(k);)R=me(R),D=me(D);var N=Ae(R,1),O=Ae(D,1);for(D=Ae(D,2),R=Ae(R,2);!M(D);){var C=O.add(D);0>=C.l(k)&&(N=N.add(R),O=C),D=Ae(D,1),R=Ae(R,1)}return w=Q(k,N.j(w)),new ne(N,w)}for(N=A;0<=k.l(w);){for(R=Math.max(1,Math.floor(k.m()/w.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),O=g(R),C=O.j(w);Y(C)||0<C.l(k);)R-=D,O=g(R),C=O.j(w);M(O)&&(O=I),N=N.add(O),k=Q(k,C)}return new ne(N,k)}i.A=function(k){return he(this,k).h},i.and=function(k){for(var w=Math.max(this.g.length,k.g.length),R=[],D=0;D<w;D++)R[D]=this.i(D)&k.i(D);return new f(R,this.h&k.h)},i.or=function(k){for(var w=Math.max(this.g.length,k.g.length),R=[],D=0;D<w;D++)R[D]=this.i(D)|k.i(D);return new f(R,this.h|k.h)},i.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),R=[],D=0;D<w;D++)R[D]=this.i(D)^k.i(D);return new f(R,this.h^k.h)};function me(k){for(var w=k.g.length+1,R=[],D=0;D<w;D++)R[D]=k.i(D)<<1|k.i(D-1)>>>31;return new f(R,k.h)}function Ae(k,w){var R=w>>5;w%=32;for(var D=k.g.length-R,N=[],O=0;O<D;O++)N[O]=0<w?k.i(O+R)>>>w|k.i(O+R+1)<<32-w:k.i(O+R);return new f(N,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,fT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,hs=f}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dT,Yl,mT,uh,Ym,pT,gT,yT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var B=c[S];if(!(B in v))break e;v=v[B]}c=c[c.length-1],S=v[c],y=y(S),y!=S&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,S=!1,B={next:function(){if(!S&&v<c.length){var $=v++;return{value:y($,c[$]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,v){return c.call.apply(c.bind,arguments)}function A(c,y,v){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function I(c,y,v){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,I.apply(null,arguments)}function P(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(S,B,$){for(var oe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)oe[Fe-2]=arguments[Fe];return y.prototype[B].apply(S,oe)}}function Y(c){const y=c.length;if(0<y){const v=Array(y);for(let S=0;S<y;S++)v[S]=c[S];return v}return[]}function F(c,y){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(p(S)){const B=c.length||0,$=S.length||0;c.length=B+$;for(let oe=0;oe<$;oe++)c[B+oe]=S[oe]}else c.push(S)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var me=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Ae(c,y,v){for(const S in c)y.call(v,c[S],S,c)}function k(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function w(c){const y={};for(const v in c)y[v]=c[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,y){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)c[v]=S[v];for(let $=0;$<R.length;$++)v=R[$],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function N(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function O(c){m.setTimeout(()=>{throw c},0)}function C(){var c=je;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,v){const S=Oe.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var Oe=new Q(()=>new X,c=>c.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ve=!1,je=new Ie,V=()=>{const c=m.Promise.resolve(void 0);ae=()=>{c.then(ie)}};var ie=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){O(v)}var y=Oe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ve=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function ke(c,y){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(me){e:{try{he(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:be[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ke.aa.h.call(this)}}M(ke,re);var be={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),rt=0;function _n(c,y,v,S,B){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=B,this.key=++rt,this.da=this.fa=!1}function ei(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function In(c){this.src=c,this.g={},this.h=0}In.prototype.add=function(c,y,v,S,B){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var oe=pi(c,y,S,B);return-1<oe?(y=c[oe],v||(y.fa=!1)):(y=new _n(y,this.src,$,!!S,B),y.fa=v,c.push(y)),y};function mi(c,y){var v=y.type;if(v in c.g){var S=c.g[v],B=Array.prototype.indexOf.call(S,y,void 0),$;($=0<=B)&&Array.prototype.splice.call(S,B,1),$&&(ei(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function pi(c,y,v,S){for(var B=0;B<c.length;++B){var $=c[B];if(!$.da&&$.listener==y&&$.capture==!!v&&$.ha==S)return B}return-1}var Bi="closure_lm_"+(1e6*Math.random()|0),Rs={};function Is(c,y,v,S,B){if(Array.isArray(y)){for(var $=0;$<y.length;$++)Is(c,y[$],v,S,B);return null}return v=Ta(v),c&&c[Et]?c.K(y,v,g(S)?!!S.capture:!1,B):fn(c,y,v,!1,S,B)}function fn(c,y,v,S,B,$){if(!y)throw Error("Invalid event type");var oe=g(B)?!!B.capture:!!B,Fe=Nr(c);if(Fe||(c[Bi]=Fe=new In(c)),v=Fe.add(y,v,S,oe,$),v.proxy)return v;if(S=zo(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)pe||(B=oe),B===void 0&&(B=!1),c.addEventListener(y.toString(),S,B);else if(c.attachEvent)c.attachEvent(qi(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function zo(){function c(v){return y.call(c.src,c.listener,v)}const y=Bo;return c}function Ir(c,y,v,S,B){if(Array.isArray(y))for(var $=0;$<y.length;$++)Ir(c,y[$],v,S,B);else S=g(S)?!!S.capture:!!S,v=Ta(v),c&&c[Et]?(c=c.i,y=String(y).toString(),y in c.g&&($=c.g[y],v=pi($,v,S,B),-1<v&&(ei($[v]),Array.prototype.splice.call($,v,1),$.length==0&&(delete c.g[y],c.h--)))):c&&(c=Nr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=pi(y,v,S,B)),(v=-1<c?y[c]:null)&&Cr(v))}function Cr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Et])mi(y.i,c);else{var v=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(v,S,c.capture):y.detachEvent?y.detachEvent(qi(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Nr(y))?(mi(v,c),v.h==0&&(v.src=null,y[Bi]=null)):ei(c)}}}function qi(c){return c in Rs?Rs[c]:Rs[c]="on"+c}function Bo(c,y){if(c.da)c=!0;else{y=new ke(y,this);var v=c.listener,S=c.ha||c.src;c.fa&&Cr(c),c=v.call(S,y)}return c}function Nr(c){return c=c[Bi],c instanceof In?c:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ta(c){return typeof c=="function"?c:(c[Cs]||(c[Cs]=function(y){return c.handleEvent(y)}),c[Cs])}function mt(){ue.call(this),this.i=new In(this),this.M=this,this.F=null}M(mt,ue),mt.prototype[Et]=!0,mt.prototype.removeEventListener=function(c,y,v,S){Ir(this,c,y,v,S)};function Ye(c,y){var v,S=c.F;if(S)for(v=[];S;S=S.F)v.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new re(y,c);else if(y instanceof re)y.target=y.target||c;else{var B=y;y=new re(S,c),D(y,B)}if(B=!0,v)for(var $=v.length-1;0<=$;$--){var oe=y.g=v[$];B=dn(oe,S,!0,y)&&B}if(oe=y.g=c,B=dn(oe,S,!0,y)&&B,B=dn(oe,S,!1,y)&&B,v)for($=0;$<v.length;$++)oe=y.g=v[$],B=dn(oe,S,!1,y)&&B}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],S=0;S<v.length;S++)ei(v[S]);delete c.g[y],c.h--}}this.F=null},mt.prototype.K=function(c,y,v,S){return this.i.add(String(c),y,!1,v,S)},mt.prototype.L=function(c,y,v,S){return this.i.add(String(c),y,!0,v,S)};function dn(c,y,v,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,$=0;$<y.length;++$){var oe=y[$];if(oe&&!oe.da&&oe.capture==v){var Fe=oe.listener,kt=oe.ha||oe.src;oe.fa&&mi(c.i,oe),B=Fe.call(kt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Vt(c,y,v){if(typeof c=="function")v&&(c=I(c,v));else if(c&&typeof c.handleEvent=="function")c=I(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function ba(c){c.g=Vt(()=>{c.g=null,c.i&&(c.i=!1,ba(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class qo extends ue{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ba(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(c){ue.call(this),this.h=c,this.g={}}M(Hi,ue);var gi=[];function Fi(c){Ae(c.g,function(y,v){this.g.hasOwnProperty(v)&&Cr(y)},c),c.g={}}Hi.prototype.N=function(){Hi.aa.N.call(this),Fi(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var En=m.JSON.stringify,Gi=m.JSON.parse,yi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Ns(){}Ns.prototype.h=null;function xs(c){return c.h||(c.h=c.i())}function z(){}var le={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fe(){re.call(this,"d")}M(fe,re);function _e(){re.call(this,"c")}M(_e,re);var ge={},Me=null;function dt(){return Me=Me||new mt}ge.La="serverreachability";function Cn(c){re.call(this,ge.La,c)}M(Cn,re);function $t(c){const y=dt();Ye(y,new Cn(y))}ge.STAT_EVENT="statevent";function rn(c,y){re.call(this,ge.STAT_EVENT,c),this.stat=y}M(rn,re);function Je(c){const y=dt();Ye(y,new rn(y,c))}ge.Ma="timingevent";function ct(c,y){re.call(this,ge.Ma,c),this.size=y}M(ct,re);function yt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function Xe(){this.g=!0}Xe.prototype.xa=function(){this.g=!1};function Tt(c,y,v,S,B,$){c.info(function(){if(c.g)if($)for(var oe="",Fe=$.split("&"),kt=0;kt<Fe.length;kt++){var Ge=Fe[kt].split("=");if(1<Ge.length){var qt=Ge[0];Ge=Ge[1];var Pt=qt.split("_");oe=2<=Pt.length&&Pt[1]=="type"?oe+(qt+"="+Ge+"&"):oe+(qt+"=redacted&")}}else oe=null;else oe=$;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+`
`+v+`
`+oe})}function bf(c,y,v,S,B,$,oe){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+`
`+v+`
`+$+" "+oe})}function xr(c,y,v,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ds(c,v)+(S?" "+S:"")})}function ku(c,y){c.info(function(){return"TIMEOUT: "+y})}Xe.prototype.info=function(){};function Ds(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var S=v[c];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var oe=1;oe<B.length;oe++)B[oe]=""}}}}return En(v)}catch{return y}}var Dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ki={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vi;function _i(){}M(_i,Ns),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},vi=new _i;function mn(c,y,v,S){this.j=c,this.i=y,this.l=v,this.R=S||1,this.U=new Hi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new St}function St(){this.i=null,this.g="",this.h=!1}var Ho={},wa={};function ti(c,y,v){c.L=1,c.v=Ps(Nn(y)),c.m=v,c.P=!0,$i(c,null)}function $i(c,y){c.F=Date.now(),Os(c),c.A=Nn(c.v);var v=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Yo(v.i,"t",S),c.C=0,v=c.j.J,c.h=new St,c.g=Wu(c.j,v?y:null,!c.m),0<c.O&&(c.M=new qo(I(c.Y,c,c.g),c.O)),y=c.U,v=c.g,S=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(gi[0]=B.toString()),B=gi);for(var $=0;$<B.length;$++){var oe=Is(v,B[$],S||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),$t(),Tt(c.i,c.u,c.A,c.l,c.R,c.m)}mn.prototype.ca=function(c){c=c.target;const y=this.M;y&&qn(c)==3?y.j():this.Y(c)},mn.prototype.Y=function(c){try{if(c==this.g)e:{const Pt=qn(this.g);var y=this.g.Ba();const tr=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Hu(this.g)))){this.J||Pt!=4||y==7||(y==8||0>=tr?$t(3):$t(2)),Or(this);var v=this.g.Z();this.X=v;t:if(Pu(this)){var S=Hu(this.g);c="";var B=S.length,$=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),Ei(this);var oe="";break t}this.h.i=new m.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!($&&y==B-1)});S.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=v==200,bf(this.i,this.u,this.A,this.l,this.R,Pt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,kt=this.g;if((Fe=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Fe)){var Ge=Fe;break t}}Ge=null}if(v=Ge)xr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,v);else{this.o=!1,this.s=3,Je(12),Qt(this),Ei(this);break e}}if(this.P){v=!0;let Yt;for(;!this.J&&this.C<oe.length;)if(Yt=Lu(this,oe),Yt==wa){Pt==4&&(this.s=4,Je(14),v=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Ho){this.s=4,Je(15),xr(this.i,this.l,oe,"[Invalid Chunk]"),v=!1;break}else xr(this.i,this.l,Yt,null),Ms(this,Yt);if(Pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||oe.length!=0||this.h.h||(this.s=1,Je(16),v=!1),this.o=this.o&&v,!v)xr(this.i,this.l,oe,"[Invalid Chunked Response]"),Qt(this),Ei(this);else if(0<oe.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Fs(qt),qt.M=!0,Je(11))}}else xr(this.i,this.l,oe,null),Ms(this,oe);Pt==4&&Qt(this),this.o&&!this.J&&(Pt==4?Qu(this.j,this):(this.o=!1,Os(this)))}else If(this.g),v==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),Qt(this),Ei(this)}}}catch{}finally{}};function Pu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Lu(c,y){var v=c.C,S=y.indexOf(`
`,v);return S==-1?wa:(v=Number(y.substring(v,S)),isNaN(v)?Ho:(S+=1,S+v>y.length?wa:(y=y.slice(S,S+v),c.C=S+v,y)))}mn.prototype.cancel=function(){this.J=!0,Qt(this)};function Os(c){c.S=Date.now()+c.I,Uu(c,c.I)}function Uu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yt(I(c.ba,c),y)}function Or(c){c.B&&(m.clearTimeout(c.B),c.B=null)}mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ku(this.i,this.A),this.L!=2&&($t(),Je(17)),Qt(this),this.s=2,Ei(this)):Uu(this,this.S-c)};function Ei(c){c.j.G==0||c.J||Qu(c.j,c)}function Qt(c){Or(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Fi(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Ms(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||Fo(v.h,c))){if(!c.K&&Fo(v.h,c)&&v.G==3){try{var S=v.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)ka(v),Ma(v);else break e;el(v),Je(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=yt(I(v.Za,v),6e3));if(1>=Aa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else er(v,11)}else if((c.K||v.g==c)&&ka(v),!se(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Ge=B[y];if(v.T=Ge[0],Ge=Ge[1],v.G==2)if(Ge[0]=="c"){v.K=Ge[1],v.ia=Ge[2];const qt=Ge[3];qt!=null&&(v.la=qt,v.j.info("VER="+v.la));const Pt=Ge[4];Pt!=null&&(v.Aa=Pt,v.j.info("SVER="+v.Aa));const tr=Ge[5];tr!=null&&typeof tr=="number"&&0<tr&&(S=1.5*tr,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Yt=c.g;if(Yt){const Ii=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ii){var $=S.h;$.g||Ii.indexOf("spdy")==-1&&Ii.indexOf("quic")==-1&&Ii.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ra($,$.h),$.h=null))}if(S.D){const nl=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(S.ya=nl,st(S.I,S.D,nl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var oe=c;if(S.qa=Xu(S,S.J?S.ia:null,S.W),oe.K){pn(S.h,oe);var Fe=oe,kt=S.L;kt&&(Fe.I=kt),Fe.B&&(Or(Fe),Os(Fe)),S.g=oe}else Ku(S);0<v.i.length&&Va(v)}else Ge[0]!="stop"&&Ge[0]!="close"||er(v,7);else v.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?er(v,7):Zo(v):Ge[0]!="noop"&&v.l&&v.l.ta(Ge),v.v=0)}}$t(4)}catch{}}var ju=class{constructor(c,y){this.g=c,this.map=y}};function Qi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Aa(c){return c.h?1:c.g?c.g.size:0}function Fo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ra(c,y){c.g?c.g.add(y):c.h=y}function pn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Qi.prototype.cancel=function(){if(this.i=Go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Go(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Y(c.i)}function wf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,S=0;S<v;S++)y.push(c[S]);return y}y=[],v=0;for(S in c)y[v++]=c[S];return y}function Ia(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const S in c)y[v++]=S;return y}}}function Ko(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Ia(c),S=wf(c),B=S.length,$=0;$<B;$++)y.call(void 0,S[$],v&&v[$],c)}var Vs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sf(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var S=c[v].indexOf("="),B=null;if(0<=S){var $=c[v].substring(0,S);B=c[v].substring(S+1)}else $=c[v];y($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Nt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Nt){this.h=c.h,ks(this,c.j),this.o=c.o,this.g=c.g,Mr(this,c.s),this.l=c.l;var y=c.i,v=new Xi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Yi(this,v),this.m=c.m}else c&&(y=String(c).match(Vs))?(this.h=!1,ks(this,y[1]||"",!0),this.o=jn(y[2]||""),this.g=jn(y[3]||"",!0),Mr(this,y[4]),this.l=jn(y[5]||"",!0),Yi(this,y[6]||"",!0),this.m=jn(y[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}Nt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Ls(y,$o,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ls(y,$o,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ls(v,v.charAt(0)=="/"?Af:Qo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ls(v,Ca)),c.join("")};function Nn(c){return new Nt(c)}function ks(c,y,v){c.j=v?jn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Mr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Yi(c,y,v){y instanceof Xi?(c.i=y,Bu(c.i,c.h)):(v||(y=Ls(y,Rf)),c.i=new Xi(y,c.h))}function st(c,y,v){c.i.set(y,v)}function Ps(c){return st(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function jn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ls(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,zu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function zu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $o=/[#\/\?@]/g,Qo=/[#\?:]/g,Af=/[#\?]/g,Rf=/[#\?@]/g,Ca=/#/g;function Xi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function zn(c){c.g||(c.g=new Map,c.h=0,c.i&&Sf(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Xi.prototype,i.add=function(c,y){zn(this),this.i=null,c=Ti(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Wi(c,y){zn(c),y=Ti(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Zi(c,y){return zn(c),y=Ti(c,y),c.g.has(y)}i.forEach=function(c,y){zn(this),this.g.forEach(function(v,S){v.forEach(function(B){c.call(y,B,S,this)},this)},this)},i.na=function(){zn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let S=0;S<y.length;S++){const B=c[S];for(let $=0;$<B.length;$++)v.push(y[S])}return v},i.V=function(c){zn(this);let y=[];if(typeof c=="string")Zi(this,c)&&(y=y.concat(this.g.get(Ti(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return zn(this),this.i=null,c=Ti(this,c),Zi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Yo(c,y,v){Wi(c,y),0<v.length&&(c.i=null,c.g.set(Ti(c,y),Y(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var S=y[v];const $=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var B=$;oe[S]!==""&&(B+="="+encodeURIComponent(String(oe[S]))),c.push(B)}}return this.i=c.join("&")};function Ti(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Bu(c,y){y&&!c.j&&(zn(c),c.i=null,c.g.forEach(function(v,S){var B=S.toLowerCase();S!=B&&(Wi(this,S),Yo(this,B,v))},c)),c.j=y}function Us(c,y){const v=new Xe;if(m.Image){const S=new Image;S.onload=P(Bn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=P(Bn,v,"TestLoadImage: error",!1,y,S),S.onabort=P(Bn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=P(Bn,v,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function ni(c,y){const v=new Xe,S=new AbortController,B=setTimeout(()=>{S.abort(),Bn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then($=>{clearTimeout(B),$.ok?Bn(v,"TestPingServer: ok",!0,y):Bn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Bn(v,"TestPingServer: error",!1,y)})}function Bn(c,y,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function js(){this.g=new yi}function bi(c,y,v){const S=v||"";try{Ko(c,function(B,$){let oe=B;g(B)&&(oe=En(B)),y.push(S+$+"="+encodeURIComponent(oe))})}catch(B){throw y.push(S+"type="+encodeURIComponent("_badmap")),B}}function Vr(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Vr,Ns),Vr.prototype.g=function(){return new Ji(this.l,this.j)},Vr.prototype.i=function(c){return function(){return c}}({});function Ji(c,y){mt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ji,mt),i=Ji.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Si(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?wi(this):Si(this),this.readyState==3&&Xo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,wi(this))},i.Qa=function(c){this.g&&(this.response=c,wi(this))},i.ga=function(){this.g&&wi(this)};function wi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Si(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function Si(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Wo(c){let y="";return Ae(c,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Bt(c,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Wo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):st(c,y,v))}function et(c){mt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(et,mt);var Na=/^https?$/i,zs=["POST","PUT"];i=et.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vi.g(),this.v=this.o?xs(this.o):xs(vi),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch($){qu(this,$);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())v.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find($=>$.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(zs,y,void 0))||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,oe]of v)this.g.setRequestHeader($,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bs(this),this.u=!0,this.g.send(c),this.u=!1}catch($){qu(this,$)}};function qu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,xa(c),Ai(c)}function xa(c){c.A||(c.A=!0,Ye(c,"complete"),Ye(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ye(this,"complete"),Ye(this,"abort"),Ai(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),et.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},i.bb=function(){Da(this)};function Da(c){if(c.h&&typeof f<"u"&&(!c.v[1]||qn(c)!=4||c.Z()!=2)){if(c.u&&qn(c)==4)Vt(c.Ea,0,c);else if(Ye(c,"readystatechange"),qn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=oe===0){var B=String(c.D).match(Vs)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),S=!Na.test(B?B.toLowerCase():"")}v=S}if(v)Ye(c,"complete"),Ye(c,"success");else{c.m=6;try{var $=2<qn(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",xa(c)}}finally{Ai(c)}}}}function Ai(c,y){if(c.g){Bs(c);const v=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ye(c,"ready");try{v.onreadystatechange=S}catch{}}}function Bs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function qn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Gi(y)}};function Hu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function If(c){const y={};c=(c.g&&2<=qn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(se(c[S]))continue;var v=N(c[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const $=y[B]||[];y[B]=$,$.push(v)}k(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Oa(c){this.Aa=0,this.i=[],this.j=new Xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,c),this.cb=qs("retryDelaySeedMs",1e4,c),this.Wa=qs("forwardChannelMaxRetries",2,c),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Qi(c&&c.concurrentRequestLimit),this.Da=new js,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Oa.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,S){Je(0),this.W=c,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=Xu(this,null,this.W),Va(this)};function Zo(c){if(Fu(c),c.G==3){var y=c.U++,v=Nn(c.I);if(st(v,"SID",c.K),st(v,"RID",y),st(v,"TYPE","terminate"),Hs(c,v),y=new mn(c,c.j,y),y.L=2,y.v=Ps(Nn(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=Wu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Os(y)}Yu(c)}function Ma(c){c.g&&(Fs(c),c.g.cancel(),c.g=null)}function Fu(c){Ma(c),c.u&&(m.clearTimeout(c.u),c.u=null),ka(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Va(c){if(!Sa(c.h)&&!c.s){c.s=!0;var y=c.Ga;ae||V(),ve||(ae(),ve=!0),je.add(y,c),c.B=0}}function Cf(c,y){return Aa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yt(I(c.Ga,c,y),tl(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new mn(this,this.j,c);let $=this.o;if(this.S&&($?($=w($),D($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Gu(this,B,y),v=Nn(this.I),st(v,"RID",c),st(v,"CVER",22),this.D&&st(v,"X-HTTP-Session-Id",this.D),Hs(this,v),$&&(this.O?y="headers="+encodeURIComponent(String(Wo($)))+"&"+y:this.m&&Bt(v,this.m,$)),Ra(this.h,B),this.Ua&&st(v,"TYPE","init"),this.P?(st(v,"$req",y),st(v,"SID","null"),B.T=!0,ti(B,v,null)):ti(B,v,y),this.G=2}}else this.G==3&&(c?Jo(this,c):this.i.length==0||Sa(this.h)||Jo(this))};function Jo(c,y){var v;y?v=y.l:v=c.U++;const S=Nn(c.I);st(S,"SID",c.K),st(S,"RID",v),st(S,"AID",c.T),Hs(c,S),c.m&&c.o&&Bt(S,c.m,c.o),v=new mn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Gu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ra(c.h,v),ti(v,S,y)}function Hs(c,y){c.H&&Ae(c.H,function(v,S){st(y,S,v)}),c.l&&Ko({},function(v,S){st(y,S,v)})}function Gu(c,y,v){v=Math.min(c.i.length,v);var S=c.l?I(c.l.Na,c.l,c):null;e:{var B=c.i;let $=-1;for(;;){const oe=["count="+v];$==-1?0<v?($=B[0].g,oe.push("ofs="+$)):$=0:oe.push("ofs="+$);let Fe=!0;for(let kt=0;kt<v;kt++){let Ge=B[kt].g;const qt=B[kt].map;if(Ge-=$,0>Ge)$=Math.max(0,B[kt].g-100),Fe=!1;else try{bi(qt,oe,"req"+Ge+"_")}catch{S&&S(qt)}}if(Fe){S=oe.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,S}function Ku(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;ae||V(),ve||(ae(),ve=!0),je.add(y,c),c.v=0}}function el(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yt(I(c.Fa,c),tl(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yt(I(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),Ma(this),$u(this))};function Fs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function $u(c){c.g=new mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Nn(c.qa);st(y,"RID","rpc"),st(y,"SID",c.K),st(y,"AID",c.T),st(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&st(y,"TO",c.ja),st(y,"TYPE","xmlhttp"),Hs(c,y),c.m&&c.o&&Bt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Ps(Nn(y)),v.m=null,v.P=!0,$i(v,c)}i.Za=function(){this.C!=null&&(this.C=null,Ma(this),el(this),Je(19))};function ka(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Qu(c,y){var v=null;if(c.g==y){ka(c),Fs(c),c.g=null;var S=2}else if(Fo(c.h,y))v=y.D,pn(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;S=dt(),Ye(S,new ct(S,v)),Va(c)}else Ku(c);else if(B=y.s,B==3||B==0&&0<y.X||!(S==1&&Cf(c,y)||S==2&&el(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),B){case 1:er(c,5);break;case 4:er(c,10);break;case 3:er(c,6);break;default:er(c,2)}}}function tl(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function er(c,y){if(c.j.info("Error code "+y),y==2){var v=I(c.fb,c),S=c.Xa;const B=!S;S=new Nt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ks(S,"https"),Ps(S),B?Us(S.toString(),v):ni(S.toString(),v)}else Je(2);c.G=0,c.l&&c.l.sa(y),Yu(c),Fu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function Yu(c){if(c.G=0,c.ka=[],c.l){const y=Go(c.h);(y.length!=0||c.i.length!=0)&&(F(c.ka,y),F(c.ka,c.i),c.h.i.length=0,Y(c.i),c.i.length=0),c.l.ra()}}function Xu(c,y,v){var S=v instanceof Nt?Nn(v):new Nt(v);if(S.g!="")y&&(S.g=y+"."+S.g),Mr(S,S.s);else{var B=m.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var $=new Nt(null);S&&ks($,S),y&&($.g=y),B&&Mr($,B),v&&($.l=v),S=$}return v=c.D,y=c.ya,v&&y&&st(S,v,y),st(S,"VER",c.la),Hs(c,S),S}function Wu(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new et(new Vr({eb:v})):new et(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}i=Zu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Pa(){}Pa.prototype.g=function(c,y){return new gn(c,y)};function gn(c,y){mt.call(this),this.g=new Oa(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!se(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Ri(this)}M(gn,mt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Zo(this.g)},gn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=En(c),c=v);y.i.push(new ju(y.Ya++,c)),y.G==3&&Va(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,gn.aa.N.call(this)};function Ju(c){fe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(Ju,fe);function ec(){_e.call(this),this.status=1}M(ec,_e);function Ri(c){this.g=c}M(Ri,Zu),Ri.prototype.ua=function(){Ye(this.g,"a")},Ri.prototype.ta=function(c){Ye(this.g,new Ju(c))},Ri.prototype.sa=function(c){Ye(this.g,new ec)},Ri.prototype.ra=function(){Ye(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,yT=function(){return new Pa},gT=function(){return dt()},pT=ge,Ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,uh=Dr,Ki.COMPLETE="complete",mT=Ki,z.EventType=le,le.OPEN="a",le.CLOSE="b",le.ERROR="c",le.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Yl=z,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,dT=et}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});const f0="@firebase/firestore",d0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new $h("@firebase/firestore");function fo(){return ua.logLevel}function de(i,...e){if(ua.logLevel<=qe.DEBUG){const n=e.map(Sp);ua.debug(`Firestore (${Oo}): ${i}`,...n)}}function Tr(i,...e){if(ua.logLevel<=qe.ERROR){const n=e.map(Sp);ua.error(`Firestore (${Oo}): ${i}`,...n)}}function So(i,...e){if(ua.logLevel<=qe.WARN){const n=e.map(Sp);ua.warn(`Firestore (${Oo}): ${i}`,...n)}}function Sp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(i="Unexpected state"){const e=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: `+i;throw Tr(e),new Error(e)}function tt(i,e){i||Ne()}function De(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class II{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class CI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NI{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new yr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new yr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tt(typeof s.accessToken=="string"),new vT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string"),new ln(e)}}class xI{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class DI{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new xI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OI{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Xn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){tt(this.o===void 0);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,de("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new m0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string"),this.R=n.token,new m0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=MI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Le(i,e){return i<e?-1:i>e?1:0}function Xm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Le(s,o);{const u=_T(),f=VI(u.encode(p0(i,n)),u.encode(p0(e,n)));return f!==0?f:Le(s,o)}}n+=s>65535?2:1}return Le(i.length,e.length)}function p0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function VI(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Le(i[n],e[n]);return Le(i.length,e.length)}function Ao(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=-62135596800,y0=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*y0);return new jt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<g0)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/y0}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-g0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new jt(0,0))}static max(){return new xe(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="__name__";class Mi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ne(),s===void 0?s=e.length-n:s>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Mi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Le(e.length,n.length)}static compareSegments(e,n){const s=Mi.isNumericId(e),o=Mi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Mi.extractNumericId(e).compare(Mi.extractNumericId(n)):Xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class ft extends Mi{construct(e,n,s){return new ft(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ft(n)}static emptyPath(){return new ft([])}}const kI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Mi{construct(e,n,s){return new tn(e,n,s)}static isValidIdentifier(e){return kI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v0}static keyField(){return new tn([v0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ft.fromString(e))}static fromName(e){return new Te(ft.fromString(e).popFirst(5))}static empty(){return new Te(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ft.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;function PI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new jt(n+1,0):new jt(n,s));return new ms(o,Te.empty(),e)}function LI(i){return new ms(i.readTime,i.key,ou)}class ms{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ms(xe.min(),Te.empty(),ou)}static max(){return new ms(xe.max(),Te.empty(),ou)}}function UI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(i.documentKey,e.documentKey),n!==0?n:Le(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==jI)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,s)=>{n(e)})}static reject(e){return new te((n,s)=>{s(e)})}static waitFor(e){return new te((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=te.resolve(!1);for(const s of e)n=n.next(o=>o?te.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new te((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{f[g]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new te((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function BI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Qh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=-1;function Yh(i){return i==null}function Ah(i){return i===0&&1/i==-1/0}function qI(i){return typeof i=="number"&&Number.isInteger(i)&&!Ah(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="";function HI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=_0(e)),e=FI(i.get(n),e);return _0(e)}function FI(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case TT:n+="";break;default:n+=u}}return n}function _0(i){return i+TT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Es(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function bT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=u??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Jt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new T0(this.data.getIterator())}getIteratorFrom(e){return new T0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new zt(this.comparator);return n.data=e,n}}class T0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new zt(tn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new wT("Invalid base64 string: "+u):u}}(e);return new nn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const GI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(i){if(tt(!!i),typeof i=="string"){let e=0;const n=GI.exec(i);if(tt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(i.seconds),nanos:It(i.nanos)}}function It(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function gs(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="server_timestamp",AT="__type__",RT="__previous_value__",IT="__local_write_time__";function Rp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[AT])===null||n===void 0?void 0:n.stringValue)===ST}function Xh(i){const e=i.mapValue.fields[RT];return Rp(e)?Xh(e):e}function lu(i){const e=ps(i.mapValue.fields[IT].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,s,o,u,f,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const Rh="(default)";class uu{constructor(e,n){this.projectId=e,this.database=n||Rh}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===Rh}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="__type__",$I="__max__",ih={mapValue:{}},NT="__vector__",Ih="value";function ys(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Rp(i)?4:YI(i)?9007199254740991:QI(i)?10:11:Ne()}function ji(i,e){if(i===e)return!0;const n=ys(i);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return lu(i).isEqual(lu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ps(o.timestampValue),m=ps(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return gs(o.bytesValue).isEqual(gs(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return It(o.geoPointValue.latitude)===It(u.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return It(o.integerValue)===It(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=It(o.doubleValue),m=It(u.doubleValue);return f===m?Ah(f)===Ah(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return Ao(i.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(E0(f)!==E0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!ji(f[p],m[p])))return!1;return!0}(i,e);default:return Ne()}}function cu(i,e){return(i.values||[]).find(n=>ji(n,e))!==void 0}function Ro(i,e){if(i===e)return 0;const n=ys(i),s=ys(e);if(n!==s)return Le(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(i.booleanValue,e.booleanValue);case 2:return function(u,f){const m=It(u.integerValue||u.doubleValue),p=It(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return b0(i.timestampValue,e.timestampValue);case 4:return b0(lu(i),lu(e));case 5:return Xm(i.stringValue,e.stringValue);case 6:return function(u,f){const m=gs(u),p=gs(f);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=Le(m[g],p[g]);if(E!==0)return E}return Le(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Le(It(u.latitude),It(f.latitude));return m!==0?m:Le(It(u.longitude),It(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return w0(i.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,E;const A=u.fields||{},I=f.fields||{},P=(m=A[Ih])===null||m===void 0?void 0:m.arrayValue,M=(p=I[Ih])===null||p===void 0?void 0:p.arrayValue,Y=Le(((g=P==null?void 0:P.values)===null||g===void 0?void 0:g.length)||0,((E=M==null?void 0:M.values)===null||E===void 0?void 0:E.length)||0);return Y!==0?Y:w0(P,M)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===ih.mapValue&&f===ih.mapValue)return 0;if(u===ih.mapValue)return 1;if(f===ih.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let A=0;A<p.length&&A<E.length;++A){const I=Xm(p[A],E[A]);if(I!==0)return I;const P=Ro(m[p[A]],g[E[A]]);if(P!==0)return P}return Le(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Ne()}}function b0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Le(i,e);const n=ps(i),s=ps(e),o=Le(n.seconds,s.seconds);return o!==0?o:Le(n.nanos,s.nanos)}function w0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ro(n[o],s[o]);if(u)return u}return Le(n.length,s.length)}function Io(i){return Wm(i)}function Wm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ps(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return gs(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Te.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Wm(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Wm(n.fields[f])}`;return o+"}"}(i.mapValue):Ne()}function ch(i){switch(ys(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xh(i);return e?16+ch(e):16;case 5:return 2*i.stringValue.length;case 6:return gs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+ch(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return Es(s.fields,(u,f)=>{o+=u.length+ch(f)}),o}(i.mapValue);default:throw Ne()}}function S0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Zm(i){return!!i&&"integerValue"in i}function Ip(i){return!!i&&"arrayValue"in i}function A0(i){return!!i&&"nullValue"in i}function R0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function hh(i){return!!i&&"mapValue"in i}function QI(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[CT])===null||n===void 0?void 0:n.stringValue)===NT}function Jl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Es(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Jl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function YI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===$I}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(n)}setAll(e){let n=tn.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Jl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];hh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Es(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new An(Jl(this.value))}}function xT(i){const e=[];return Es(i.fields,(n,s)=>{const o=new tn([n]);if(hh(s)){const u=xT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new un(e,0,xe.min(),xe.min(),xe.min(),An.empty(),0)}static newFoundDocument(e,n,s,o){return new un(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new un(e,2,n,xe.min(),xe.min(),An.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,xe.min(),xe.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.position=e,this.inclusive=n}}function I0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(f.referenceValue),n.key):s=Ro(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function C0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ji(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function XI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class Mt extends DT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new ZI(e,n,s):n==="array-contains"?new t1(e,s):n==="in"?new n1(e,s):n==="not-in"?new i1(e,s):n==="array-contains-any"?new r1(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new JI(e,s):new e1(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ro(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends DT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new ui(e,n)}matches(e){return OT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function OT(i){return i.op==="and"}function MT(i){return WI(i)&&OT(i)}function WI(i){for(const e of i.filters)if(e instanceof ui)return!1;return!0}function Jm(i){if(i instanceof Mt)return i.field.canonicalString()+i.op.toString()+Io(i.value);if(MT(i))return i.filters.map(e=>Jm(e)).join(",");{const e=i.filters.map(n=>Jm(n)).join(",");return`${i.op}(${e})`}}function VT(i,e){return i instanceof Mt?function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&ji(s.value,o.value)}(i,e):i instanceof ui?function(s,o){return o instanceof ui&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&VT(f,o.filters[m]),!0):!1}(i,e):void Ne()}function kT(i){return i instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Io(n.value)}`}(i):i instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(kT).join(" ,")+"}"}(i):"Filter"}class ZI extends Mt{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class JI extends Mt{constructor(e,n){super(e,"in",n),this.keys=PT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class e1 extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=PT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Te.fromName(s.referenceValue))}class t1 extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ip(n)&&cu(n.arrayValue,this.value)}}class n1 extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}}class i1 extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cu(this.value.arrayValue,n)}}class r1 extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>cu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function N0(i,e=null,n=[],s=[],o=null,u=null,f=null){return new s1(i,e,n,s,o,u,f)}function Cp(i){const e=De(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Jm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Io(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Io(s)).join(",")),e.le=n}return e.le}function Np(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!XI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!VT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!C0(i.startAt,e.startAt)&&C0(i.endAt,e.endAt)}function ep(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function a1(i,e,n,s,o,u,f,m){return new ya(i,e,n,s,o,u,f,m)}function Wh(i){return new ya(i)}function x0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function LT(i){return i.collectionGroup!==null}function eu(i){const e=De(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new zt(tn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new hu(u,s))}),n.has(tn.keyField().canonicalString())||e.he.push(new hu(tn.keyField(),s))}return e.he}function Vi(i){const e=De(i);return e.Pe||(e.Pe=o1(e,eu(i))),e.Pe}function o1(i,e){if(i.limitType==="F")return N0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new hu(o.field,u)});const n=i.endAt?new Ch(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Ch(i.startAt.position,i.startAt.inclusive):null;return N0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function tp(i,e){const n=i.filters.concat([e]);return new ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function np(i,e,n){return new ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Zh(i,e){return Np(Vi(i),Vi(e))&&i.limitType===e.limitType}function UT(i){return`${Cp(Vi(i))}|lt:${i.limitType}`}function mo(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>kT(o)).join(", ")}]`),Yh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Io(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Io(o)).join(",")),`Target(${s})`}(Vi(i))}; limitType=${i.limitType})`}function Jh(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of eu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=I0(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,eu(s),o)||s.endAt&&!function(f,m,p){const g=I0(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,eu(s),o))}(i,e)}function l1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function jT(i){return(e,n)=>{let s=!1;for(const o of eu(i)){const u=u1(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function u1(i,e,n){const s=i.field.isKeyField()?Te.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?Ro(p,g):Ne()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return bT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new _t(Te.comparator);function br(){return c1}const zT=new _t(Te.comparator);function Xl(...i){let e=zT;for(const n of i)e=e.insert(n.key,n);return e}function BT(i){let e=zT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function oa(){return tu()}function qT(){return tu()}function tu(){return new va(i=>i.toString(),(i,e)=>i.isEqual(e))}const h1=new _t(Te.comparator),f1=new zt(Te.comparator);function He(...i){let e=f1;for(const n of i)e=e.add(n);return e}const d1=new zt(Le);function m1(){return d1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function HT(i){return{integerValue:""+i}}function FT(i,e){return qI(e)?HT(e):xp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this._=void 0}}function p1(i,e,n){return i instanceof fu?function(o,u){const f={fields:{[AT]:{stringValue:ST},[IT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Rp(u)&&(u=Xh(u)),u&&(f.fields[RT]=u),{mapValue:f}}(n,e):i instanceof du?KT(i,e):i instanceof mu?$T(i,e):function(o,u){const f=GT(o,u),m=D0(f)+D0(o.Ie);return Zm(f)&&Zm(o.Ie)?HT(m):xp(o.serializer,m)}(i,e)}function g1(i,e,n){return i instanceof du?KT(i,e):i instanceof mu?$T(i,e):n}function GT(i,e){return i instanceof pu?function(s){return Zm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class fu extends ef{}class du extends ef{constructor(e){super(),this.elements=e}}function KT(i,e){const n=QT(e);for(const s of i.elements)n.some(o=>ji(o,s))||n.push(s);return{arrayValue:{values:n}}}class mu extends ef{constructor(e){super(),this.elements=e}}function $T(i,e){let n=QT(e);for(const s of i.elements)n=n.filter(o=>!ji(o,s));return{arrayValue:{values:n}}}class pu extends ef{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function D0(i){return It(i.integerValue||i.doubleValue)}function QT(i){return Ip(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.field=e,this.transform=n}}function y1(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof du&&o instanceof du||s instanceof mu&&o instanceof mu?Ao(s.elements,o.elements,ji):s instanceof pu&&o instanceof pu?ji(s.Ie,o.Ie):s instanceof fu&&o instanceof fu}(i.transform,e.transform)}class v1{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class tf{}function XT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Dp(i.key,Jn.none()):new Eu(i.key,i.data,Jn.none());{const n=i.data,s=An.empty();let o=new zt(tn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Ts(i.key,s,new Ln(o.toArray()),Jn.none())}}function _1(i,e,n){i instanceof Eu?function(o,u,f){const m=o.value.clone(),p=M0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Ts?function(o,u,f){if(!fh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=M0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(WT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function nu(i,e,n,s){return i instanceof Eu?function(u,f,m,p){if(!fh(u.precondition,f))return m;const g=u.value.clone(),E=V0(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof Ts?function(u,f,m,p){if(!fh(u.precondition,f))return m;const g=V0(u.fieldTransforms,p,f),E=f.data;return E.setAll(WT(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(i,e,n,s):function(u,f,m){return fh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function E1(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=GT(s.transform,o||null);u!=null&&(n===null&&(n=An.empty()),n.set(s.field,u))}return n||null}function O0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ao(s,o,(u,f)=>y1(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Eu extends tf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends tf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function WT(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function M0(i,e,n){const s=new Map;tt(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,g1(f,m,n[o]))}return s}function V0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,p1(u,f,e))}return s}class Dp extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T1 extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&_1(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=qT();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=XT(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(xe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(n,s)=>O0(n,s))&&Ao(this.baseMutations,e.baseMutations,(n,s)=>O0(n,s))}}class Op{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){tt(e.mutations.length===s.length);let o=function(){return h1}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Op(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,$e;function A1(i){switch(i){case J.OK:return Ne();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ne()}}function ZT(i){if(i===void 0)return Tr("GRPC error has no .code"),J.UNKNOWN;switch(i){case Ot.OK:return J.OK;case Ot.CANCELLED:return J.CANCELLED;case Ot.UNKNOWN:return J.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return J.INTERNAL;case Ot.UNAVAILABLE:return J.UNAVAILABLE;case Ot.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ot.NOT_FOUND:return J.NOT_FOUND;case Ot.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ot.ABORTED:return J.ABORTED;case Ot.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ot.DATA_LOSS:return J.DATA_LOSS;default:return Ne()}}($e=Ot||(Ot={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new hs([4294967295,4294967295],0);function k0(i){const e=_T().encode(i),n=new fT;return n.update(e),new Uint8Array(n.digest())}function P0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new hs([n,s],0),new hs([o,u],0)]}class Mp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Wl(`Invalid padding: ${n}`);if(s<0)throw new Wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=hs.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(hs.fromNumber(s)));return o.compare(R1)===1&&(o=new hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=k0(e),[s,o]=P0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Mp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const n=k0(e),[s,o]=P0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nf(xe.min(),o,new _t(Le),br(),He())}}class Tu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Tu(s,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class JT{constructor(e,n){this.targetId=e,this.ge=n}}class eb{constructor(e,n,s=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class L0{constructor(){this.pe=0,this.ye=U0(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=He(),n=He(),s=He();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ne()}}),new Tu(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=U0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,tt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class I1{constructor(e){this.ke=e,this.qe=new Map,this.Qe=br(),this.$e=rh(),this.Ue=rh(),this.Ke=new _t(Le)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(ep(u))if(s===0){const f=new Te(u.path);this.ze(n,f,un.newNoDocument(f,xe.min()))}else tt(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(e),p=m?this.nt(m,e,f):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=gs(s).toUint8Array()}catch(p){if(p instanceof wT)return So("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Mp(f,o,u)}catch(p){return So(p instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&ep(m.target)){const p=new Te(m.target.path);this._t(p).has(f)||this.ut(f,p)||this.ze(f,p,un.newNoDocument(p,e))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=He();this.Ue.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new nf(e,n,this.Ke,this.Qe,s);return this.Qe=br(),this.$e=rh(),this.Ue=rh(),this.Ke=new _t(Le),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new L0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new zt(Le),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new zt(Le),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new L0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function rh(){return new _t(Te.comparator)}function U0(){return new _t(Te.comparator)}const C1={asc:"ASCENDING",desc:"DESCENDING"},N1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x1={and:"AND",or:"OR"};class D1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ip(i,e){return i.useProto3Json||Yh(e)?e:{value:e}}function Nh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tb(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function O1(i,e){return Nh(i,e.toTimestamp())}function ki(i){return tt(!!i),xe.fromTimestamp(function(n){const s=ps(n);return new jt(s.seconds,s.nanos)}(i))}function Vp(i,e){return rp(i,e).canonicalString()}function rp(i,e){const n=function(o){return new ft(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function nb(i){const e=ft.fromString(i);return tt(ob(e)),e}function sp(i,e){return Vp(i.databaseId,e.path)}function xm(i,e){const n=nb(e);if(n.get(1)!==i.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(rb(n))}function ib(i,e){return Vp(i.databaseId,e)}function M1(i){const e=nb(i);return e.length===4?ft.emptyPath():rb(e)}function ap(i){return new ft(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function rb(i){return tt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function j0(i,e,n){return{name:sp(i,e),fields:n.value.mapValue.fields}}function V1(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(tt(E===void 0||typeof E=="string"),nn.fromBase64String(E||"")):(tt(E===void 0||E instanceof Buffer||E instanceof Uint8Array),nn.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const E=g.code===void 0?J.UNKNOWN:ZT(g.code);return new ce(E,g.message||"")}(f);n=new eb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=xm(i,s.document.name),u=ki(s.document.updateTime),f=s.document.createTime?ki(s.document.createTime):xe.min(),m=new An({mapValue:{fields:s.document.fields}}),p=un.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new dh(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=xm(i,s.document),u=s.readTime?ki(s.readTime):xe.min(),f=un.newNoDocument(o,u),m=s.removedTargetIds||[];n=new dh([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=xm(i,s.document),u=s.removedTargetIds||[];n=new dh([],u,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new S1(o,u),m=s.targetId;n=new JT(m,f)}}return n}function k1(i,e){let n;if(e instanceof Eu)n={update:j0(i,e.key,e.value)};else if(e instanceof Dp)n={delete:sp(i,e.key)};else if(e instanceof Ts)n={update:j0(i,e.key,e.data),updateMask:F1(e.fieldMask)};else{if(!(e instanceof T1))return Ne();n={verify:sp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof fu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof du)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof mu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof pu)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Ne()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:O1(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ne()}(i,e.precondition)),n}function P1(i,e){return i&&i.length>0?(tt(e!==void 0),i.map(n=>function(o,u){let f=o.updateTime?ki(o.updateTime):ki(u);return f.isEqual(xe.min())&&(f=ki(u)),new v1(f,o.transformResults||[])}(n,e))):[]}function L1(i,e){return{documents:[ib(i,e.path)]}}function U1(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ib(i,o);const u=function(g){if(g.length!==0)return ab(ui.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(E=>function(I){return{field:po(I.field),direction:B1(I.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=ip(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function j1(i){let e=M1(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){tt(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(A){const I=sb(A);return I instanceof ui&&MT(I)?I.getFilters():[I]}(n.where));let f=[];n.orderBy&&(f=function(A){return A.map(I=>function(M){return new hu(go(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(I))}(n.orderBy));let m=null;n.limit&&(m=function(A){let I;return I=typeof A=="object"?A.value:A,Yh(I)?null:I}(n.limit));let p=null;n.startAt&&(p=function(A){const I=!!A.before,P=A.values||[];return new Ch(P,I)}(n.startAt));let g=null;return n.endAt&&(g=function(A){const I=!A.before,P=A.values||[];return new Ch(P,I)}(n.endAt)),a1(e,o,f,u,m,"F",p,g)}function z1(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sb(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=go(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=go(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=go(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=go(n.unaryFilter.field);return Mt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(i):i.fieldFilter!==void 0?function(n){return Mt.create(go(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(s=>sb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(i):Ne()}function B1(i){return C1[i]}function q1(i){return N1[i]}function H1(i){return x1[i]}function po(i){return{fieldPath:i.canonicalString()}}function go(i){return tn.fromServerFormat(i.fieldPath)}function ab(i){return i instanceof Mt?function(n){if(n.op==="=="){if(R0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(A0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(R0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(A0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:q1(n.op),value:n.value}}}(i):i instanceof ui?function(n){const s=n.getFilters().map(o=>ab(o));return s.length===1?s[0]:{compositeFilter:{op:H1(n.op),filters:s}}}(i):Ne()}function F1(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ob(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,s,o,u=xe.min(),f=xe.min(),m=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.Tt=e}}function K1(i){const e=j1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?np(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.Tn=new Q1}addToCollectionParentIndex(e,n){return this.Tn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(ms.min())}updateCollectionGroup(e,n,s){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class Q1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new zt(ft.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lb=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(lb,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Co(0)}static Kn(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="LruGarbageCollector",Y1=1048576;function q0([i,e],[n,s]){const o=Le(i,n);return o===0?Le(e,s):o}class X1{constructor(e){this.Hn=e,this.buffer=new zt(q0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();q0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class W1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){de(B0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vo(n)?de(B0,"Ignoring IndexedDB error during garbage collection: ",n):await Mo(n)}await this.er(3e5)})}}class Z1{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Qh.ae);const s=new X1(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(z0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,m=Date.now(),this.removeTargets(e,s,n))).next(A=>(u=A,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(g=Date.now(),fo()<=qe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${A} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}function J1(i,e){return new Z1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.changes=new va(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?te.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&nu(s.mutation,o,Ln.empty(),jt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,He()).next(()=>s))}getLocalViewOfDocuments(e,n,s=He()){const o=oa();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Xl();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=oa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,He()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=br();const f=tu(),m=function(){return tu()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Ts)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),nu(E.mutation,g,E.mutation.getFieldMask(),jt.now())):f.set(g.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>f.set(g,E)),n.forEach((g,E)=>{var A;return m.set(g,new tC(E,(A=f.get(g))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,n){const s=tu();let o=new _t((f,m)=>f-m),u=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Ln.empty();E=m.applyToLocalView(g,E),s.set(p,E);const A=(o.get(m.batchId)||He()).add(p);o=o.insert(m.batchId,A)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,A=qT();E.forEach(I=>{if(!u.has(I)){const P=XT(n.get(I),s.get(I));P!==null&&A.set(I,P),u=u.add(I)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,A))}return te.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):te.resolve(oa());let m=ou,p=u;return f.next(g=>te.forEach(g,(E,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(E)?te.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{p=p.insert(E,I)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,He())).next(E=>({batchId:m,changes:BT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(s=>{let o=Xl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Xl();return this.indexManager.getCollectionParents(e,u).next(m=>te.forEach(m,p=>{const g=function(A,I){return new ya(I,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((A,I)=>{f=f.insert(A,I)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,un.newInvalidDocument(E)))});let m=Xl();return f.forEach((p,g)=>{const E=u.get(p);E!==void 0&&nu(E.mutation,g,Ln.empty(),jt.now()),Jh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return te.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:K1(o.bundledQuery),readTime:ki(o.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.overlays=new _t(Te.comparator),this.Rr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const s=oa();return te.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),te.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),te.resolve()}getOverlaysForCollection(e,n,s){const o=oa(),u=n.length+1,f=new Te(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new _t((g,E)=>g-E);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=oa(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=oa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return te.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new w1(n,s));let u=this.Rr.get(n);u===void 0&&(u=He(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.Vr=new zt(Kt.mr),this.gr=new zt(Kt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Kt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Kt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new Te(new ft([])),s=new Kt(n,e),o=new Kt(n,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Te(new ft([])),s=new Kt(n,e),o=new Kt(n,e+1);let u=He();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Kt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Kt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Te.comparator(e.key,n.key)||Le(e.Cr,n.Cr)}static pr(e,n){return Le(e.Cr,n.Cr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new zt(Kt.mr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new b1(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(f)}lookupMutationBatch(e,n){return te.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Ap:this.Fr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Kt(n,0),o=new Kt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new zt(Le);return n.forEach(o=>{const u=new Kt(o,0),f=new Kt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),te.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const f=new Kt(new Te(u),0);let m=new zt(Le);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},f),te.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){tt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return te.forEach(n.mutations,o=>{const u=new Kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Kt(n,0),o=this.Mr.firstAfterOrEqual(s);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.kr=e,this.docs=function(){return new _t(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return te.resolve(s?s.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let s=br();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():un.newInvalidDocument(o))}),te.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=br();const f=n.path,m=new Te(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||UI(LI(E),s)<=0||(o.has(E.key)||Jh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return te.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ne()}qr(e,n){return te.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new lC(this)}getSize(e){return te.resolve(this.size)}}class lC extends eC{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),te.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.persistence=e,this.Qr=new va(n=>Cp(n),Np),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.$r=0,this.Ur=new kp,this.targetCount=0,this.Kr=Co.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),te.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Co(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.zn(n),te.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return te.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),te.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),te.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return te.resolve(s)}containsKey(e,n){return te.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Qh(0),this.zr=!1,this.zr=!0,this.jr=new sC,this.referenceDelegate=e(this),this.Hr=new uC(this),this.indexManager=new $1,this.remoteDocumentCache=function(o){return new oC(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new G1(n),this.Yr=new iC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new aC(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){de("MemoryPersistence","Starting transaction:",e);const o=new cC(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return te.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class cC extends zI{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.ti=new kp,this.ni=null}static ri(e){return new Pp(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),te.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),te.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.ii,s=>{const o=Te.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,xe.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return te.or([()=>te.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class xh{constructor(e,n){this.persistence=e,this.oi=new va(s=>HI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=J1(this,n)}static ri(e,n){return new xh(e,n)}Zr(){}Xr(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return te.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?te.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,n).next(m=>{m||(s++,u.removeEntry(f,xe.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),te.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ch(e.data.value)),n}ar(e,n,s){return te.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=He(),o=He();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Lp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return sR()?8:BI(hn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new hC;return this._s(e,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,f,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(fo()<=qe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),te.resolve()):(fo()<=qe.DEBUG&&de("QueryEngine","Query:",mo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(fo()<=qe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):te.resolve())}rs(e,n){if(x0(n))return te.resolve(null);let s=Vi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=np(n,null,"F"),s=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=He(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,f,p.readTime)?this.rs(e,np(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return x0(n)||o.isEqual(xe.min())?te.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?te.resolve(null):(fo()<=qe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(n)),this.hs(e,f,n,PI(o,ou)).next(m=>m))})}cs(e,n){let s=new zt(jT(e));return n.forEach((o,u)=>{Jh(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return fo()<=qe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ns.getDocumentsMatchingQuery(e,n,ms.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="LocalStore",dC=3e8;class mC{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new _t(Le),this.Is=new va(u=>Cp(u),Np),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nC(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function pC(i,e,n,s){return new mC(i,e,n,s)}async function cb(i,e){const n=De(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=He();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:f,addedBatchIds:m}))})})}function gC(i,e){const n=De(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const A=g.batch,I=A.keys();let P=te.resolve();return I.forEach(M=>{P=P.next(()=>E.getEntry(p,M)).next(Y=>{const F=g.docVersions.get(M);tt(F!==null),Y.version.compareTo(F)<0&&(A.applyToRemoteDocument(Y,g),Y.isValidDocument()&&(Y.setReadTime(g.commitVersion),E.addEntry(Y)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(p,A))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=He();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function hb(i){const e=De(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function yC(i,e){const n=De(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((E,A)=>{const I=o.get(A);if(!I)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,A).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,A)));let P=I.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?P=P.withResumeToken(nn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(A,P),function(Y,F,Q){return Y.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=dC?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0}(I,P,E)&&m.push(n.Hr.updateTargetData(u,P))});let p=br(),g=He();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(vC(u,f,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(xe.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(A=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return te.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function vC(i,e,n){let s=He(),o=He();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let f=br();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):de(Up,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:f,fs:o}})}function _C(i,e){const n=De(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Ap),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function EC(i,e){const n=De(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,te.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new os(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function op(i,e,n){const s=De(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Vo(f))throw f;de(Up,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function H0(i,e,n){const s=De(i);let o=xe.min(),u=He();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,E){const A=De(p),I=A.Is.get(E);return I!==void 0?te.resolve(A.Ts.get(I)):A.Hr.getTargetData(g,E)}(s,f,Vi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,n?o:xe.min(),n?u:He())).next(m=>(TC(s,l1(e),m),{documents:m,gs:u})))}function TC(i,e,n){let s=i.Es.get(e)||xe.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class F0{constructor(){this.activeTargetIds=m1()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bC{constructor(){this.ho=new F0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new F0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="ConnectivityMonitor";class K0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){de(G0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){de(G0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh=null;function lp(){return sh===null?sh=function(){return 268435456+Math.round(2147483648*Math.random())}():sh++,"0x"+sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",SC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AC{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===Rh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const f=lp(),m=this.bo(e,n.toUriEncodedString());de(Dm,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(de(Dm,`Received RPC '${e}' ${f}: `,g),g),g=>{throw So(Dm,`RPC '${e}' ${f} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,f){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=SC[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class IC extends AC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=lp();return new Promise((f,m)=>{const p=new dT;p.setWithCredentials(!0),p.listenOnce(mT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case uh.NO_ERROR:const E=p.getResponseJson();de(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case uh.TIMEOUT:de(on,`RPC '${e}' ${u} timed out`),m(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const A=p.getStatus();if(de(on,`RPC '${e}' ${u} failed with status:`,A,"response text:",p.getResponseText()),A>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const M=function(F){const Q=F.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Q)>=0?Q:J.UNKNOWN}(P.status);m(new ce(M,P.message))}else m(new ce(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{de(on,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);de(on,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=lp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=yT(),m=gT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");de(on,`Creating RPC '${e}' stream ${o}: ${E}`,p);const A=f.createWebChannel(E,p);let I=!1,P=!1;const M=new RC({Fo:F=>{P?de(on,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(I||(de(on,`Opening RPC '${e}' stream ${o} transport.`),A.open(),I=!0),de(on,`RPC '${e}' stream ${o} sending:`,F),A.send(F))},Mo:()=>A.close()}),Y=(F,Q,se)=>{F.listen(Q,ne=>{try{se(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return Y(A,Yl.EventType.OPEN,()=>{P||(de(on,`RPC '${e}' stream ${o} transport opened.`),M.Qo())}),Y(A,Yl.EventType.CLOSE,()=>{P||(P=!0,de(on,`RPC '${e}' stream ${o} transport closed`),M.Uo())}),Y(A,Yl.EventType.ERROR,F=>{P||(P=!0,So(on,`RPC '${e}' stream ${o} transport errored:`,F),M.Uo(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),Y(A,Yl.EventType.MESSAGE,F=>{var Q;if(!P){const se=F.data[0];tt(!!se);const ne=se,he=(ne==null?void 0:ne.error)||((Q=ne[0])===null||Q===void 0?void 0:Q.error);if(he){de(on,`RPC '${e}' stream ${o} received error:`,he);const me=he.status;let Ae=function(R){const D=Ot[R];if(D!==void 0)return ZT(D)}(me),k=he.message;Ae===void 0&&(Ae=J.INTERNAL,k="Unknown error status: "+me+" with message "+he.message),P=!0,M.Uo(new ce(Ae,k)),A.close()}else de(on,`RPC '${e}' stream ${o} received:`,se),M.Ko(se)}}),Y(m,pT.STAT_EVENT,F=>{F.stat===Ym.PROXY?de(on,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Ym.NOPROXY&&de(on,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}}function Om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(i){return new D1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="PersistentStream";class db{constructor(e,n,s,o,u,f,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new fb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return de($0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(de($0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CC extends db{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=V1(this.serializer,e),s=function(u){if(!("targetChange"in u))return xe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?xe.min():f.readTime?ki(f.readTime):xe.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=ap(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=ep(p)?{documents:L1(u,p)}:{query:U1(u,p).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=tb(u,f.resumeToken);const g=ip(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(xe.min())>0){m.readTime=Nh(u,f.snapshotVersion.toTimestamp());const g=ip(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=z1(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=ap(this.serializer),n.removeTarget=e,this.I_(n)}}class NC extends db{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return tt(!!e.streamToken),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=P1(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=ap(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>k1(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{}class DC extends xC{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,rp(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,rp(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(J.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class OC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Tr(n),this.N_=!1):de("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RemoteStore";class MC{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{_a(this)&&(de(ca,"Restarting streams for network reachability change."),await async function(p){const g=De(p);g.W_.add(4),await bu(g),g.j_.set("Unknown"),g.W_.delete(4),await sf(g)}(this))})}),this.j_=new OC(s,o)}}async function sf(i){if(_a(i))for(const e of i.G_)await e(!0)}async function bu(i){for(const e of i.G_)await e(!1)}function mb(i,e){const n=De(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),qp(n)?Bp(n):ko(n).c_()&&zp(n,e))}function jp(i,e){const n=De(i),s=ko(n);n.K_.delete(e),s.c_()&&pb(n,e),n.K_.size===0&&(s.c_()?s.P_():_a(n)&&n.j_.set("Unknown"))}function zp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ko(i).y_(e)}function pb(i,e){i.H_.Ne(e),ko(i).w_(e)}function Bp(i){i.H_=new I1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),ko(i).start(),i.j_.B_()}function qp(i){return _a(i)&&!ko(i).u_()&&i.K_.size>0}function _a(i){return De(i).W_.size===0}function gb(i){i.H_=void 0}async function VC(i){i.j_.set("Online")}async function kC(i){i.K_.forEach((e,n)=>{zp(i,e)})}async function PC(i,e){gb(i),qp(i)?(i.j_.q_(e),Bp(i)):i.j_.set("Unknown")}async function LC(i,e,n){if(i.j_.set("Online"),e instanceof eb&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){de(ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Dh(i,s)}else if(e instanceof dh?i.H_.We(e):e instanceof JT?i.H_.Ze(e):i.H_.je(e),!n.isEqual(xe.min()))try{const s=await hb(i.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.K_.get(g);E&&u.K_.set(g,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const E=u.K_.get(p);if(!E)return;u.K_.set(p,E.withResumeToken(nn.EMPTY_BYTE_STRING,E.snapshotVersion)),pb(u,p);const A=new os(E.target,p,g,E.sequenceNumber);zp(u,A)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){de(ca,"Failed to raise snapshot:",s),await Dh(i,s)}}async function Dh(i,e,n){if(!Vo(e))throw e;i.W_.add(1),await bu(i),i.j_.set("Offline"),n||(n=()=>hb(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{de(ca,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await sf(i)})}function yb(i,e){return e().catch(n=>Dh(i,n,e))}async function af(i){const e=De(i),n=vs(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:Ap;for(;UC(e);)try{const o=await _C(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,jC(e,o)}catch(o){await Dh(e,o)}vb(e)&&_b(e)}function UC(i){return _a(i)&&i.U_.length<10}function jC(i,e){i.U_.push(e);const n=vs(i);n.c_()&&n.S_&&n.b_(e.mutations)}function vb(i){return _a(i)&&!vs(i).u_()&&i.U_.length>0}function _b(i){vs(i).start()}async function zC(i){vs(i).C_()}async function BC(i){const e=vs(i);for(const n of i.U_)e.b_(n.mutations)}async function qC(i,e,n){const s=i.U_.shift(),o=Op.from(s,e,n);await yb(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await af(i)}async function HC(i,e){e&&vs(i).S_&&await async function(s,o){if(function(f){return A1(f)&&f!==J.ABORTED}(o.code)){const u=s.U_.shift();vs(s).h_(),await yb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await af(s)}}(i,e),vb(i)&&_b(i)}async function Q0(i,e){const n=De(i);n.asyncQueue.verifyOperationInProgress(),de(ca,"RemoteStore received new credentials");const s=_a(n);n.W_.add(3),await bu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await sf(n)}async function FC(i,e){const n=De(i);e?(n.W_.delete(2),await sf(n)):e||(n.W_.add(2),await bu(n),n.j_.set("Unknown"))}function ko(i){return i.J_||(i.J_=function(n,s,o){const u=De(n);return u.M_(),new CC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:VC.bind(null,i),No:kC.bind(null,i),Lo:PC.bind(null,i),p_:LC.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),qp(i)?Bp(i):i.j_.set("Unknown")):(await i.J_.stop(),gb(i))})),i.J_}function vs(i){return i.Y_||(i.Y_=function(n,s,o){const u=De(n);return u.M_(),new NC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:zC.bind(null,i),Lo:HC.bind(null,i),D_:BC.bind(null,i),v_:qC.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await af(i)):(await i.Y_.stop(),i.U_.length>0&&(de(ca,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new Hp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fp(i,e){if(Tr("AsyncQueue",`${e}: ${i}`),Vo(i))return new ce(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Xl(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new _o;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.Z_=new _t(Te.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class No{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new No(e,n,_o.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class KC{constructor(){this.queries=X0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=De(n),u=o.queries;o.queries=X0(),u.forEach((f,m)=>{for(const p of m.ta)p.onError(s)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function X0(){return new va(i=>UT(i),Zh)}async function Gp(i,e){const n=De(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new GC,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Fp(f,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&$p(n)}async function Kp(i,e){const n=De(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function $C(i,e){const n=De(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&$p(n)}function QC(i,e,n){const s=De(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function $p(i){i.ia.forEach(e=>{e.next()})}var up,W0;(W0=up||(up={}))._a="default",W0.Cache="cache";class Qp{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new No(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.key=e}}class Tb{constructor(e){this.key=e}}class YC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=He(),this.mutatedKeys=He(),this.ya=jT(e),this.wa=new _o(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new Y0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,A)=>{const I=o.get(E),P=Jh(this.query,A)?A:null,M=!!I&&this.mutatedKeys.has(I.key),Y=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let F=!1;I&&P?I.data.isEqual(P.data)?M!==Y&&(s.track({type:3,doc:P}),F=!0):this.va(I,P)||(s.track({type:2,doc:P}),F=!0,(p&&this.ya(P,p)>0||g&&this.ya(P,g)<0)&&(m=!0)):!I&&P?(s.track({type:0,doc:P}),F=!0):I&&!P&&(s.track({type:1,doc:I}),F=!0,(p||g)&&(m=!0)),F&&(P?(f=f.add(P),u=Y?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((E,A)=>function(P,M){const Y=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return Y(P)-Y(M)}(E.type,A.type)||this.ya(E.doc,A.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,f.length!==0||g?{snapshot:new No(this.query,e.wa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Y0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=He(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new Tb(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new Eb(s))}),n}Oa(e){this.fa=e.gs,this.pa=He();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return No.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Yp="SyncEngine";class XC{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class WC{constructor(e){this.key=e,this.Ba=!1}}class ZC{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new va(m=>UT(m),Zh),this.qa=new Map,this.Qa=new Set,this.$a=new _t(Te.comparator),this.Ua=new Map,this.Ka=new kp,this.Wa={},this.Ga=new Map,this.za=Co.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function JC(i,e,n=!0){const s=Ib(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await bb(s,e,n,!0),o}async function e2(i,e){const n=Ib(i);await bb(n,e,!0,!1)}async function bb(i,e,n,s){const o=await EC(i.localStore,Vi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await t2(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&mb(i.remoteStore,o),m}async function t2(i,e,n,s,o){i.Ha=(A,I,P)=>async function(Y,F,Q,se){let ne=F.view.ba(Q);ne.ls&&(ne=await H0(Y.localStore,F.query,!1).then(({documents:k})=>F.view.ba(k,ne)));const he=se&&se.targetChanges.get(F.targetId),me=se&&se.targetMismatches.get(F.targetId)!=null,Ae=F.view.applyChanges(ne,Y.isPrimaryClient,he,me);return J0(Y,F.targetId,Ae.Ma),Ae.snapshot}(i,A,I,P);const u=await H0(i.localStore,e,!0),f=new YC(e,u.gs),m=f.ba(u.documents),p=Tu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,p);J0(i,n,g.Ma);const E=new XC(e,n,f);return i.ka.set(e,E),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function n2(i,e,n){const s=De(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!Zh(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await op(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&jp(s.remoteStore,o.targetId),cp(s,o.targetId)}).catch(Mo)):(cp(s,o.targetId),await op(s.localStore,o.targetId,!0))}async function i2(i,e){const n=De(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),jp(n.remoteStore,s.targetId))}async function r2(i,e,n){const s=h2(i);try{const o=await function(f,m){const p=De(f),g=jt.now(),E=m.reduce((P,M)=>P.add(M.key),He());let A,I;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let M=br(),Y=He();return p.ds.getEntries(P,E).next(F=>{M=F,M.forEach((Q,se)=>{se.isValidDocument()||(Y=Y.add(Q))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,M)).next(F=>{A=F;const Q=[];for(const se of m){const ne=E1(se,A.get(se.key).overlayedDocument);ne!=null&&Q.push(new Ts(se.key,ne,xT(ne.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,g,Q,m)}).next(F=>{I=F;const Q=F.applyToLocalDocumentSet(A,Y);return p.documentOverlayCache.saveOverlays(P,F.batchId,Q)})}).then(()=>({batchId:I.batchId,changes:BT(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Wa[f.currentUser.toKey()];g||(g=new _t(Le)),g=g.insert(m,p),f.Wa[f.currentUser.toKey()]=g}(s,o.batchId,n),await wu(s,o.changes),await af(s.remoteStore)}catch(o){const u=Fp(o,"Failed to persist write");n.reject(u)}}async function wb(i,e){const n=De(i);try{const s=await yC(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Ua.get(u);f&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?tt(f.Ba):o.removedDocuments.size>0&&(tt(f.Ba),f.Ba=!1))}),await wu(n,s,e)}catch(s){await Mo(s)}}function Z0(i,e,n){const s=De(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=De(f);p.onlineState=m;let g=!1;p.queries.forEach((E,A)=>{for(const I of A.ta)I.sa(m)&&(g=!0)}),g&&$p(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function s2(i,e,n){const s=De(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let f=new _t(Te.comparator);f=f.insert(u,un.newNoDocument(u,xe.min()));const m=He().add(u),p=new nf(xe.min(),new Map,new _t(Le),f,m);await wb(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),Xp(s)}else await op(s.localStore,e,!1).then(()=>cp(s,e,n)).catch(Mo)}async function a2(i,e){const n=De(i),s=e.batch.batchId;try{const o=await gC(n.localStore,e);Ab(n,s,null),Sb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wu(n,o)}catch(o){await Mo(o)}}async function o2(i,e,n){const s=De(i);try{const o=await function(f,m){const p=De(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(A=>(tt(A!==null),E=A.keys(),p.mutationQueue.removeMutationBatch(g,A))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);Ab(s,e,n),Sb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wu(s,o)}catch(o){await Mo(o)}}function Sb(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Ab(i,e,n){const s=De(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function cp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Rb(i,s)})}function Rb(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(jp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Xp(i))}function J0(i,e,n){for(const s of n)s instanceof Eb?(i.Ka.addReference(s.key,e),l2(i,s)):s instanceof Tb?(de(Yp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Rb(i,s.key)):Ne()}function l2(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(de(Yp,"New document in limbo: "+n),i.Qa.add(s),Xp(i))}function Xp(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new Te(ft.fromString(e)),s=i.za.next();i.Ua.set(s,new WC(n)),i.$a=i.$a.insert(n,s),mb(i.remoteStore,new os(Vi(Wh(n.path)),s,"TargetPurposeLimboResolution",Qh.ae))}}async function wu(i,e,n){const s=De(i),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{f.push(s.Ha(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const A=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(g){o.push(g);const A=Lp.Yi(p.targetId,g);u.push(A)}}))}),await Promise.all(f),s.La.p_(o),await async function(p,g){const E=De(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>te.forEach(g,I=>te.forEach(I.Hi,P=>E.persistence.referenceDelegate.addReference(A,I.targetId,P)).next(()=>te.forEach(I.Ji,P=>E.persistence.referenceDelegate.removeReference(A,I.targetId,P)))))}catch(A){if(!Vo(A))throw A;de(Up,"Failed to update sequence numbers: "+A)}for(const A of g){const I=A.targetId;if(!A.fromCache){const P=E.Ts.get(I),M=P.snapshotVersion,Y=P.withLastLimboFreeSnapshotVersion(M);E.Ts=E.Ts.insert(I,Y)}}}(s.localStore,u))}async function u2(i,e){const n=De(i);if(!n.currentUser.isEqual(e)){de(Yp,"User change. New user:",e.toKey());const s=await cb(n.localStore,e);n.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new ce(J.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wu(n,s.Rs)}}function c2(i,e){const n=De(i),s=n.Ua.get(e);if(s&&s.Ba)return He().add(s.key);{let o=He();const u=n.qa.get(e);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function Ib(i){const e=De(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=wb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s2.bind(null,e),e.La.p_=$C.bind(null,e.eventManager),e.La.Ja=QC.bind(null,e.eventManager),e}function h2(i){const e=De(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o2.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return pC(this.persistence,new fC,e.initialUser,this.serializer)}Xa(e){return new ub(Pp.ri,this.serializer)}Za(e){return new bC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class f2 extends Oh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){tt(this.persistence.referenceDelegate instanceof xh);const s=this.persistence.referenceDelegate.garbageCollector;return new W1(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new ub(s=>xh.ri(s,n),this.serializer)}}class hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Z0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=u2.bind(null,this.syncEngine),await FC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KC}()}createDatastore(e){const n=rf(e.databaseInfo.databaseId),s=function(u){return new IC(u)}(e.databaseInfo);return function(u,f,m,p){return new DC(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new MC(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Z0(this.syncEngine,n,0),function(){return K0.D()?new K0:new wC}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,E){const A=new ZC(o,u,f,m,p,g);return E&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=De(o);de(ca,"RemoteStore shutting down."),u.W_.add(5),await bu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hp.provider={build:()=>new hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class d2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=ln.UNAUTHENTICATED,this.clientId=ET.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{de(_s,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(de(_s,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Mm(i,e){i.asyncQueue.verifyOperationInProgress(),de(_s,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await cb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function eE(i,e){i.asyncQueue.verifyOperationInProgress();const n=await m2(i);de(_s,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Q0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>Q0(e.remoteStore,o)),i._onlineComponents=e}async function m2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(_s,"Using user provided OfflineComponentProvider");try{await Mm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;So("Error using user provided cache. Falling back to memory cache: "+n),await Mm(i,new Oh)}}else de(_s,"Using default OfflineComponentProvider"),await Mm(i,new f2(void 0));return i._offlineComponents}async function Cb(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(_s,"Using user provided OnlineComponentProvider"),await eE(i,i._uninitializedComponentsProvider._online)):(de(_s,"Using default OnlineComponentProvider"),await eE(i,new hp))),i._onlineComponents}function p2(i){return Cb(i).then(e=>e.syncEngine)}async function Mh(i){const e=await Cb(i),n=e.eventManager;return n.onListen=JC.bind(null,e.syncEngine),n.onUnlisten=n2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=e2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=i2.bind(null,e.syncEngine),n}function g2(i,e,n={}){const s=new yr;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new Wp({next:I=>{E.su(),f.enqueueAndForget(()=>Kp(u,A));const P=I.docs.has(m);!P&&I.fromCache?g.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&p&&p.source==="server"?g.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),A=new Qp(Wh(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Gp(u,A)}(await Mh(i),i.asyncQueue,e,n,s)),s.promise}function y2(i,e,n={}){const s=new yr;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new Wp({next:I=>{E.su(),f.enqueueAndForget(()=>Kp(u,A)),I.fromCache&&p.source==="server"?g.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(I)},error:I=>g.reject(I)}),A=new Qp(m,E,{includeMetadataChanges:!0,Ta:!0});return Gp(u,A)}(await Mh(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(i,e,n){if(!n)throw new ce(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function v2(i,e,n,s){if(e===!0&&s===!0)throw new ce(J.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function nE(i){if(!Te.isDocumentKey(i))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function iE(i){if(Te.isDocumentKey(i))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function of(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ne()}function vn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(i);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firestore.googleapis.com",rE=!0;class sE{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xb,this.ssl=rE}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:rE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y1)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Su{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new II;switch(s.type){case"firstParty":return new DI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=tE.get(n);s&&(de("ComponentProvider","Removing Datastore"),tE.delete(n),s.terminate())}(this),Promise.resolve()}}function _2(i,e,n,s={}){var o;const u=(i=vn(i,Su))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==xb&&u.host!==m&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!ds(p,f)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=ln.MOCK_USER;else{g=JA(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ln(A)}i._authCredentials=new CI(new vT(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class cn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class fs extends Rr{constructor(e,n,s){super(e,n,Wh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Te(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function Wn(i,e,...n){if(i=Ct(i),Zp("collection","path",e),i instanceof Su){const s=ft.fromString(e,...n);return iE(s),new fs(i,null,s)}{if(!(i instanceof cn||i instanceof fs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return iE(s),new fs(i.firestore,null,s)}}function Vm(i,e){if(i=vn(i,Su),Zp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rr(i,null,function(s){return new ya(ft.emptyPath(),s)}(e))}function en(i,e,...n){if(i=Ct(i),arguments.length===1&&(e=ET.newId()),Zp("doc","path",e),i instanceof Su){const s=ft.fromString(e,...n);return nE(s),new cn(i,null,new Te(s))}{if(!(i instanceof cn||i instanceof fs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ft.fromString(e,...n));return nE(s),new cn(i.firestore,i instanceof fs?i.converter:null,new Te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="AsyncQueue";class oE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new fb(this,"async_queue_retry"),this.Su=()=>{const s=Om();s&&de(aE,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new yr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Vo(e))throw e;de(aE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw Tr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=Hp.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function lE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class wr extends Su{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new oE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new oE(e),this._firestoreClient=void 0,await e}}}function E2(i,e){const n=typeof i=="object"?i:wp(),s=typeof i=="string"?i:Rh,o=ga(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=WA("firestore");u&&_2(o,...u)}return o}function lf(i){if(i._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||T2(i),i._firestoreClient}function T2(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,E){return new KI(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Nb(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new d2(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(nn.fromBase64String(e))}catch(n){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xo(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=/^__.*__$/;class w2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class Db{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ob(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class tg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Vh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Ob(this.Lu)&&b2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class S2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||rf(e)}ju(e,n,s,o=!1){return new tg({Lu:e,methodName:n,zu:s,path:tn.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cf(i){const e=i._freezeSettings(),n=rf(i._databaseId);return new S2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Mb(i,e,n,s,o,u={}){const f=i.ju(u.merge||u.mergeFields?2:0,e,n,o);rg("Data must be an object, but it was:",f,s);const m=Vb(s,f);let p,g;if(u.merge)p=new Ln(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const I=fp(e,A,n);if(!f.contains(I))throw new ce(J.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);Pb(E,I)||E.push(I)}p=new Ln(E),g=f.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,g=f.fieldTransforms;return new w2(new An(m),p,g)}class hf extends Au{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}class ng extends Au{_toFieldTransform(e){return new YT(e.path,new fu)}isEqual(e){return e instanceof ng}}class ig extends Au{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new pu(e.serializer,FT(e.serializer,this.Ju));return new YT(e.path,n)}isEqual(e){return e instanceof ig&&this.Ju===e.Ju}}function A2(i,e,n,s){const o=i.ju(1,e,n);rg("Data must be an object, but it was:",o,s);const u=[],f=An.empty();Es(s,(p,g)=>{const E=sg(e,p,n);g=Ct(g);const A=o.Uu(E);if(g instanceof hf)u.push(E);else{const I=Ru(g,A);I!=null&&(u.push(E),f.set(E,I))}});const m=new Ln(u);return new Db(f,m,o.fieldTransforms)}function R2(i,e,n,s,o,u){const f=i.ju(1,e,n),m=[fp(e,s,n)],p=[o];if(u.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push(fp(e,u[I])),p.push(u[I+1]);const g=[],E=An.empty();for(let I=m.length-1;I>=0;--I)if(!Pb(g,m[I])){const P=m[I];let M=p[I];M=Ct(M);const Y=f.Uu(P);if(M instanceof hf)g.push(P);else{const F=Ru(M,Y);F!=null&&(g.push(P),E.set(P,F))}}const A=new Ln(g);return new Db(E,A,f.fieldTransforms)}function I2(i,e,n,s=!1){return Ru(n,i.ju(s?4:3,e))}function Ru(i,e){if(kb(i=Ct(i)))return rg("Unsupported field value:",e,i),Vb(i,e);if(i instanceof Au)return function(s,o){if(!Ob(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=Ru(m,o.Ku(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=Ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return FT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=jt.fromDate(s);return{timestampValue:Nh(o.serializer,u)}}if(s instanceof jt){const u=new jt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nh(o.serializer,u)}}if(s instanceof Jp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof xo)return{bytesValue:tb(o.serializer,s._byteString)};if(s instanceof cn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Vp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof eg)return function(f,m){return{mapValue:{fields:{[CT]:{stringValue:NT},[Ih]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return xp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${of(s)}`)}(i,e)}function Vb(i,e){const n={};return bT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(i,(s,o)=>{const u=Ru(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function kb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof jt||i instanceof Jp||i instanceof xo||i instanceof cn||i instanceof Au||i instanceof eg)}function rg(i,e,n){if(!kb(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=of(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function fp(i,e,n){if((e=Ct(e))instanceof uf)return e._internalPath;if(typeof e=="string")return sg(i,e);throw Vh("Field path arguments must be of type string or ",i,!1,void 0,n)}const C2=new RegExp("[~\\*/\\[\\]]");function sg(i,e,n){if(e.search(C2)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new uf(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Vh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new ce(J.INVALID_ARGUMENT,m+i+p)}function Pb(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N2 extends Lb{data(){return super.data()}}function ff(i,e){return typeof e=="string"?sg(i,e):e instanceof uf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ag{}class jb extends ag{}function mh(i,e,...n){let s=[];e instanceof ag&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof og).length,m=u.filter(p=>p instanceof df).length;if(f>1||f>0&&m>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class df extends jb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new df(e,n,s)}_apply(e){const n=this._parse(e);return zb(e._query,n),new Rr(e.firestore,e.converter,tp(e._query,n))}_parse(e){const n=cf(e.firestore);return function(u,f,m,p,g,E,A){let I;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){cE(A,E);const M=[];for(const Y of A)M.push(uE(p,u,Y));I={arrayValue:{values:M}}}else I=uE(p,u,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||cE(A,E),I=I2(m,f,A,E==="in"||E==="not-in");return Mt.create(g,E,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function km(i,e,n){const s=e,o=ff("where",i);return df._create(o,s,n)}class og extends ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new og(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ui.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)zb(f,p),f=tp(f,p)}(e._query,n),new Rr(e.firestore,e.converter,tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lg extends jb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lg(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hu(u,f)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new ya(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function x2(i,e="asc"){const n=e,s=ff("orderBy",i);return lg._create(s,n)}function uE(i,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LT(e)&&n.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ft.fromString(n));if(!Te.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return S0(i,new Te(s))}if(n instanceof cn)return S0(i,n._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${of(n)}.`)}function cE(i,e){if(!Array.isArray(i)||i.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zb(i,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class D2{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Es(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Ih].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>It(f.doubleValue));return new eg(u)}convertGeoPoint(e){return new Jp(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Xh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const n=ps(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ft.fromString(e);tt(ob(s));const o=new uu(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(n)||Tr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qb extends Lb{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ff("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ph extends qb{data(e={}){return super.data(e)}}class Hb{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Zl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ph(this._firestore,this._userDataWriter,s.key,s,new Zl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new ph(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new ph(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Zl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:O2(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function O2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i){i=vn(i,cn);const e=vn(i.firestore,wr);return g2(lf(e),i._key).then(n=>Fb(e,i,n))}class ug extends D2{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,n)}}function ai(i){i=vn(i,Rr);const e=vn(i.firestore,wr),n=lf(e),s=new ug(e);return Ub(i._query),y2(n,i._query).then(o=>new Hb(e,s,i,o))}function M2(i,e,n){i=vn(i,cn);const s=vn(i.firestore,wr),o=Bb(i.converter,e,n);return mf(s,[Mb(cf(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Jn.none())])}function Eo(i,e,n,...s){i=vn(i,cn);const o=vn(i.firestore,wr),u=cf(o);let f;return f=typeof(e=Ct(e))=="string"||e instanceof uf?R2(u,"updateDoc",i._key,e,n,s):A2(u,"updateDoc",i._key,e),mf(o,[f.toMutation(i._key,Jn.exists(!0))])}function iu(i){return mf(vn(i.firestore,wr),[new Dp(i._key,Jn.none())])}function dp(i,e){const n=vn(i.firestore,wr),s=en(i),o=Bb(i.converter,e);return mf(n,[Mb(cf(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then(()=>s)}function V2(i,...e){var n,s,o;i=Ct(i);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||lE(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(lE(e[f])){const A=e[f];e[f]=(n=A.next)===null||n===void 0?void 0:n.bind(A),e[f+1]=(s=A.error)===null||s===void 0?void 0:s.bind(A),e[f+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let p,g,E;if(i instanceof cn)g=vn(i.firestore,wr),E=Wh(i._key.path),p={next:A=>{e[f]&&e[f](Fb(g,i,A))},error:e[f+1],complete:e[f+2]};else{const A=vn(i,Rr);g=vn(A.firestore,wr),E=A._query;const I=new ug(g);p={next:P=>{e[f]&&e[f](new Hb(g,I,A,P))},error:e[f+1],complete:e[f+2]},Ub(i._query)}return function(I,P,M,Y){const F=new Wp(Y),Q=new Qp(P,F,M);return I.asyncQueue.enqueueAndForget(async()=>Gp(await Mh(I),Q)),()=>{F.su(),I.asyncQueue.enqueueAndForget(async()=>Kp(await Mh(I),Q))}}(lf(g),E,m,p)}function mf(i,e){return function(s,o){const u=new yr;return s.asyncQueue.enqueueAndForget(async()=>r2(await p2(s),o,u)),u.promise}(lf(i),e)}function Fb(i,e,n){const s=n.docs.get(e._key),o=new ug(i);return new qb(i,o,e._key,s,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}function hE(){return new ng("serverTimestamp")}function ah(i){return new ig("increment",i)}(function(e,n=!0){(function(o){Oo=o})(Do),Ui(new li("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new wr(new NI(s.getProvider("auth-internal")),new OI(f,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(g.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Zn(f0,d0,e),Zn(f0,d0,"esm2017")})();const Gb="@firebase/installations",cg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=1e4,$b=`w:${cg}`,Qb="FIS_v2",k2="https://firebaseinstallations.googleapis.com/v1",P2=60*60*1e3,L2="installations",U2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ha=new pa(L2,U2,j2);function Yb(i){return i instanceof fi&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb({projectId:i}){return`${k2}/projects/${i}/installations`}function Wb(i){return{token:i.token,requestStatus:2,expiresIn:B2(i.expiresIn),creationTime:Date.now()}}async function Zb(i,e){const s=(await e.json()).error;return ha.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Jb({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function z2(i,{refreshToken:e}){const n=Jb(i);return n.append("Authorization",q2(e)),n}async function ew(i){const e=await i();return e.status>=500&&e.status<600?i():e}function B2(i){return Number(i.replace("s","000"))}function q2(i){return`${Qb} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H2({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=Xb(i),o=Jb(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={fid:n,authVersion:Qb,appId:i.appId,sdkVersion:$b},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await ew(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:Wb(g.authToken)}}else throw await Zb("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=/^[cdef][\w-]{21}$/,mp="";function K2(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=$2(i);return G2.test(n)?n:mp}catch{return mp}}function $2(i){return F2(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=new Map;function iw(i,e){const n=pf(i);rw(n,e),Q2(n,e)}function rw(i,e){const n=nw.get(i);if(n)for(const s of n)s(e)}function Q2(i,e){const n=Y2();n&&n.postMessage({key:i,fid:e}),X2()}let la=null;function Y2(){return!la&&"BroadcastChannel"in self&&(la=new BroadcastChannel("[Firebase] FID Change"),la.onmessage=i=>{rw(i.data.key,i.data.fid)}),la}function X2(){nw.size===0&&la&&(la.close(),la=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="firebase-installations-database",Z2=1,fa="firebase-installations-store";let Pm=null;function hg(){return Pm||(Pm=lT(W2,Z2,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(fa)}}})),Pm}async function kh(i,e){const n=pf(i),o=(await hg()).transaction(fa,"readwrite"),u=o.objectStore(fa),f=await u.get(n);return await u.put(e,n),await o.done,(!f||f.fid!==e.fid)&&iw(i,e.fid),e}async function sw(i){const e=pf(i),s=(await hg()).transaction(fa,"readwrite");await s.objectStore(fa).delete(e),await s.done}async function gf(i,e){const n=pf(i),o=(await hg()).transaction(fa,"readwrite"),u=o.objectStore(fa),f=await u.get(n),m=e(f);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!f||f.fid!==m.fid)&&iw(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fg(i){let e;const n=await gf(i.appConfig,s=>{const o=J2(s),u=eN(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===mp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function J2(i){const e=i||{fid:K2(),registrationStatus:0};return aw(e)}function eN(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ha.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=tN(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:nN(i)}:{installationEntry:e}}async function tN(i,e){try{const n=await H2(i,e);return kh(i.appConfig,n)}catch(n){throw Yb(n)&&n.customData.serverCode===409?await sw(i.appConfig):await kh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function nN(i){let e=await fE(i.appConfig);for(;e.registrationStatus===1;)await tw(100),e=await fE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await fg(i);return s||n}return e}function fE(i){return gf(i,e=>{if(!e)throw ha.create("installation-not-found");return aw(e)})}function aw(i){return iN(i)?{fid:i.fid,registrationStatus:0}:i}function iN(i){return i.registrationStatus===1&&i.registrationTime+Kb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN({appConfig:i,heartbeatServiceProvider:e},n){const s=sN(i,n),o=z2(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={installation:{sdkVersion:$b,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await ew(()=>fetch(s,m));if(p.ok){const g=await p.json();return Wb(g)}else throw await Zb("Generate Auth Token",p)}function sN(i,{fid:e}){return`${Xb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dg(i,e=!1){let n;const s=await gf(i.appConfig,u=>{if(!ow(u))throw ha.create("not-registered");const f=u.authToken;if(!e&&lN(f))return u;if(f.requestStatus===1)return n=aN(i,e),u;{if(!navigator.onLine)throw ha.create("app-offline");const m=cN(u);return n=oN(i,m),m}});return n?await n:s.authToken}async function aN(i,e){let n=await dE(i.appConfig);for(;n.authToken.requestStatus===1;)await tw(100),n=await dE(i.appConfig);const s=n.authToken;return s.requestStatus===0?dg(i,e):s}function dE(i){return gf(i,e=>{if(!ow(e))throw ha.create("not-registered");const n=e.authToken;return hN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oN(i,e){try{const n=await rN(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await kh(i.appConfig,s),n}catch(n){if(Yb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sw(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await kh(i.appConfig,s)}throw n}}function ow(i){return i!==void 0&&i.registrationStatus===2}function lN(i){return i.requestStatus===2&&!uN(i)}function uN(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+P2}function cN(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function hN(i){return i.requestStatus===1&&i.requestTime+Kb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(i){const e=i,{installationEntry:n,registrationPromise:s}=await fg(e);return s?s.catch(console.error):dg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(i,e=!1){const n=i;return await mN(n),(await dg(n,e)).token}async function mN(i){const{registrationPromise:e}=await fg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(i){if(!i||!i.options)throw Lm("App Configuration");if(!i.name)throw Lm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Lm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Lm(i){return ha.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="installations",gN="installations-internal",yN=i=>{const e=i.getProvider("app").getImmediate(),n=pN(e),s=ga(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},vN=i=>{const e=i.getProvider("app").getImmediate(),n=ga(e,lw).getImmediate();return{getId:()=>fN(n),getToken:o=>dN(n,o)}};function _N(){Ui(new li(lw,yN,"PUBLIC")),Ui(new li(gN,vN,"PRIVATE"))}_N();Zn(Gb,cg);Zn(Gb,cg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="analytics",EN="firebase_id",TN="origin",bN=60*1e3,wN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new $h("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Un=new pa("analytics","Analytics",SN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(i){if(!i.startsWith(mg)){const e=Un.create("invalid-gtag-resource",{gtagURL:i});return Rn.warn(e.message),""}return i}function uw(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function RN(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function IN(i,e){const n=RN("firebase-js-sdk-policy",{createScriptURL:AN}),s=document.createElement("script"),o=`${mg}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function CN(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function NN(i,e,n,s,o,u){const f=s[o];try{if(f)await e[f];else{const p=(await uw(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){Rn.error(m)}i("config",o,u)}async function xN(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const m=await uw(n);for(const p of f){const g=m.find(A=>A.measurementId===p),E=g&&e[g.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){Rn.error(u)}}function DN(i,e,n,s){async function o(u,...f){try{if(u==="event"){const[m,p]=f;await xN(i,e,n,m,p)}else if(u==="config"){const[m,p]=f;await NN(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=f;i("consent",m,p)}else if(u==="get"){const[m,p,g]=f;i("get",m,p,g)}else if(u==="set"){const[m]=f;i("set",m)}else i(u,...f)}catch(m){Rn.error(m)}}return o}function ON(i,e,n,s,o){let u=function(...f){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=DN(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function MN(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(mg)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=30,kN=1e3;class PN{constructor(e={},n=kN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const cw=new PN;function LN(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function UN(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:LN(s)},u=wN.replace("{app-id}",n),f=await fetch(u,o);if(f.status!==200&&f.status!==304){let m="";try{const p=await f.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:f.status,responseMessage:m})}return f.json()}async function jN(i,e=cw,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw Un.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw Un.create("no-api-key")}const f=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new qN;return setTimeout(async()=>{m.abort()},bN),hw({appId:s,apiKey:o,measurementId:u},f,m,e)}async function hw(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=cw){var u;const{appId:f,measurementId:m}=i;try{await zN(s,e)}catch(p){if(m)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:f,measurementId:m};throw p}try{const p=await UN(i);return o.deleteThrottleMetadata(f),p}catch(p){const g=p;if(!BN(g)){if(o.deleteThrottleMetadata(f),m)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:f,measurementId:m};throw p}const E=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?n0(n,o.intervalMillis,VN):n0(n,o.intervalMillis),A={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(f,A),Rn.debug(`Calling attemptFetch again in ${E} millis`),hw(i,A,s,o)}}function zN(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function BN(i){if(!(i instanceof fi)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class qN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function HN(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,f=Object.assign(Object.assign({},s),{send_to:u});i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(){if(rT())try{await sT()}catch(i){return Rn.warn(Un.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return Rn.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GN(i,e,n,s,o,u,f){var m;const p=jN(i);p.then(P=>{n[P.measurementId]=P.appId,i.options.measurementId&&P.measurementId!==i.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${P.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(P=>Rn.error(P)),e.push(p);const g=FN().then(P=>{if(P)return s.getId()}),[E,A]=await Promise.all([p,g]);MN(u)||IN(u,E.measurementId),o("js",new Date);const I=(m=f==null?void 0:f.config)!==null&&m!==void 0?m:{};return I[TN]="firebase",I.update=!0,A!=null&&(I[EN]=A),o("config",E.measurementId,I),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.app=e}_delete(){return delete ru[this.app.options.appId],Promise.resolve()}}let ru={},mE=[];const pE={};let Um="dataLayer",$N="gtag",gE,fw,yE=!1;function QN(){const i=[];if(iT()&&i.push("This is a browser extension environment."),aR()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=Un.create("invalid-analytics-context",{errorInfo:e});Rn.warn(n.message)}}function YN(i,e,n){QN();const s=i.options.appId;if(!s)throw Un.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Un.create("no-api-key");if(ru[s]!=null)throw Un.create("already-exists",{id:s});if(!yE){CN(Um);const{wrappedGtag:u,gtagCore:f}=ON(ru,mE,pE,Um,$N);fw=u,gE=f,yE=!0}return ru[s]=GN(i,mE,pE,e,gE,Um,n),new KN(i)}function XN(i=wp()){i=Ct(i);const e=ga(i,Ph);return e.isInitialized()?e.getImmediate():WN(i)}function WN(i,e={}){const n=ga(i,Ph);if(n.isInitialized()){const o=n.getImmediate();if(ds(e,n.getOptions()))return o;throw Un.create("already-initialized")}return n.initialize({options:e})}function ZN(i,e,n,s){i=Ct(i),HN(fw,ru[i.app.options.appId],e,n,s).catch(o=>Rn.error(o))}const vE="@firebase/analytics",_E="0.10.12";function JN(){Ui(new li(Ph,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return YN(s,o,n)},"PUBLIC")),Ui(new li("analytics-internal",i,"PRIVATE")),Zn(vE,_E),Zn(vE,_E,"esm2017");function i(e){try{const n=e.getProvider(Ph).getImmediate();return{logEvent:(s,o,u)=>ZN(n,s,o,u)}}catch(n){throw Un.create("interop-component-reg-failed",{reason:n})}}}JN();const ex={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},pg=uT(ex),Ze=E2(pg);XN(pg);var Fl={},EE;function tx(){if(EE)return Fl;EE=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.parse=f,Fl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const I=function(){};return I.prototype=Object.create(null),I})();function f(I,P){const M=new u,Y=I.length;if(Y<2)return M;const F=(P==null?void 0:P.decode)||E;let Q=0;do{const se=I.indexOf("=",Q);if(se===-1)break;const ne=I.indexOf(";",Q),he=ne===-1?Y:ne;if(se>he){Q=I.lastIndexOf(";",se-1)+1;continue}const me=m(I,Q,se),Ae=p(I,se,me),k=I.slice(me,Ae);if(M[k]===void 0){let w=m(I,se+1,he),R=p(I,he,w);const D=F(I.slice(w,R));M[k]=D}Q=he+1}while(Q<Y);return M}function m(I,P,M){do{const Y=I.charCodeAt(P);if(Y!==32&&Y!==9)return P}while(++P<M);return M}function p(I,P,M){for(;P>M;){const Y=I.charCodeAt(--P);if(Y!==32&&Y!==9)return P+1}return M}function g(I,P,M){const Y=(M==null?void 0:M.encode)||encodeURIComponent;if(!i.test(I))throw new TypeError(`argument name is invalid: ${I}`);const F=Y(P);if(!e.test(F))throw new TypeError(`argument val is invalid: ${P}`);let Q=I+"="+F;if(!M)return Q;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);Q+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);Q+="; Domain="+M.domain}if(M.path){if(!s.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);Q+="; Path="+M.path}if(M.expires){if(!A(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);Q+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(Q+="; HttpOnly"),M.secure&&(Q+="; Secure"),M.partitioned&&(Q+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return Q}function E(I){if(I.indexOf("%")===-1)return I;try{return decodeURIComponent(I)}catch{return I}}function A(I){return o.call(I)==="[object Date]"}return Fl}tx();var TE="popstate";function nx(i={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return pp("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:gu(o)}return rx(e,n,null,i)}function gt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ci(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ix(){return Math.random().toString(36).substring(2,10)}function bE(i,e){return{usr:i.state,key:i.key,idx:e}}function pp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Po(e):e,state:n,key:e&&e.key||s||ix()}}function gu({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Po(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function rx(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function A(){m="POP";let F=E(),Q=F==null?null:F-g;g=F,p&&p({action:m,location:Y.location,delta:Q})}function I(F,Q){m="PUSH";let se=pp(Y.location,F,Q);g=E()+1;let ne=bE(se,g),he=Y.createHref(se);try{f.pushState(ne,"",he)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(he)}u&&p&&p({action:m,location:Y.location,delta:1})}function P(F,Q){m="REPLACE";let se=pp(Y.location,F,Q);g=E();let ne=bE(se,g),he=Y.createHref(se);f.replaceState(ne,"",he),u&&p&&p({action:m,location:Y.location,delta:0})}function M(F){let Q=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof F=="string"?F:gu(F);return se=se.replace(/ $/,"%20"),gt(Q,`No window.location.(origin|href) available to create URL for href: ${se}`),new URL(se,Q)}let Y={get action(){return m},get location(){return i(o,f)},listen(F){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(TE,A),p=F,()=>{o.removeEventListener(TE,A),p=null}},createHref(F){return e(o,F)},createURL:M,encodeLocation(F){let Q=M(F);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:I,replace:P,go(F){return f.go(F)}};return Y}function dw(i,e,n="/"){return sx(i,e,n,!1)}function sx(i,e,n,s){let o=typeof e=="string"?Po(e):e,u=Sr(o.pathname||"/",n);if(u==null)return null;let f=mw(i);ax(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=yx(u);m=px(f[p],g,s)}return m}function mw(i,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(gt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=vr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(gt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),mw(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:dx(g,u.index),routesMeta:E})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of pw(u.path))o(u,f,p)}),e}function pw(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=pw(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function ax(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:mx(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var ox=/^:[\w-]+$/,lx=3,ux=2,cx=1,hx=10,fx=-2,wE=i=>i==="*";function dx(i,e){let n=i.split("/"),s=n.length;return n.some(wE)&&(s+=fx),e&&(s+=ux),n.filter(o=>!wE(o)).reduce((o,u)=>o+(ox.test(u)?lx:u===""?cx:hx),s)}function mx(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function px(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",A=Lh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),I=p.route;if(!A&&g&&n&&!s[s.length-1].route.index&&(A=Lh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!A)return null;Object.assign(o,A.params),f.push({params:o,pathname:vr([u,A.pathname]),pathnameBase:Tx(vr([u,A.pathnameBase])),route:I}),A.pathnameBase!=="/"&&(u=vr([u,A.pathnameBase]))}return f}function Lh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=gx(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:A},I)=>{if(E==="*"){let M=m[I]||"";f=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const P=m[I];return A&&!P?g[E]=void 0:g[E]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function gx(i,e=!1,n=!0){ci(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function yx(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ci(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Sr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function vx(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Po(i):i;return{pathname:n?n.startsWith("/")?n:_x(n,e):e,search:bx(s),hash:wx(o)}}function _x(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function jm(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ex(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gg(i){let e=Ex(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function yg(i,e,n,s=!1){let o;typeof i=="string"?o=Po(i):(o={...i},gt(!o.pathname||!o.pathname.includes("?"),jm("?","pathname","search",o)),gt(!o.pathname||!o.pathname.includes("#"),jm("#","pathname","hash",o)),gt(!o.search||!o.search.includes("#"),jm("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let A=e.length-1;if(!s&&f.startsWith("..")){let I=f.split("/");for(;I[0]==="..";)I.shift(),A-=1;o.pathname=I.join("/")}m=A>=0?e[A]:"/"}let p=vx(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var vr=i=>i.join("/").replace(/\/\/+/g,"/"),Tx=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),bx=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,wx=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function Sx(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var gw=["POST","PUT","PATCH","DELETE"];new Set(gw);var Ax=["GET",...gw];new Set(Ax);var Lo=U.createContext(null);Lo.displayName="DataRouter";var yf=U.createContext(null);yf.displayName="DataRouterState";var yw=U.createContext({isTransitioning:!1});yw.displayName="ViewTransition";var Rx=U.createContext(new Map);Rx.displayName="Fetchers";var Ix=U.createContext(null);Ix.displayName="Await";var di=U.createContext(null);di.displayName="Navigation";var Iu=U.createContext(null);Iu.displayName="Location";var zi=U.createContext({outlet:null,matches:[],isDataRoute:!1});zi.displayName="Route";var vg=U.createContext(null);vg.displayName="RouteError";function Cx(i,{relative:e}={}){gt(Uo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=U.useContext(di),{hash:o,pathname:u,search:f}=Nu(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:vr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function Uo(){return U.useContext(Iu)!=null}function bs(){return gt(Uo(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Iu).location}var vw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _w(i){U.useContext(di).static||U.useLayoutEffect(i)}function Cu(){let{isDataRoute:i}=U.useContext(zi);return i?Bx():Nx()}function Nx(){gt(Uo(),"useNavigate() may be used only in the context of a <Router> component.");let i=U.useContext(Lo),{basename:e,navigator:n}=U.useContext(di),{matches:s}=U.useContext(zi),{pathname:o}=bs(),u=JSON.stringify(gg(s)),f=U.useRef(!1);return _w(()=>{f.current=!0}),U.useCallback((p,g={})=>{if(ci(f.current,vw),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=yg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:vr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}U.createContext(null);function Nu(i,{relative:e}={}){let{matches:n}=U.useContext(zi),{pathname:s}=bs(),o=JSON.stringify(gg(n));return U.useMemo(()=>yg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function xx(i,e){return Ew(i,e)}function Ew(i,e,n,s){var se;gt(Uo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=U.useContext(di),{matches:f}=U.useContext(zi),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",A=m&&m.route;{let ne=A&&A.path||"";Tw(g,!A||ne.endsWith("*")||ne.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ne}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ne}"> to <Route path="${ne==="/"?"*":`${ne}/*`}">.`)}let I=bs(),P;if(e){let ne=typeof e=="string"?Po(e):e;gt(E==="/"||((se=ne.pathname)==null?void 0:se.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${ne.pathname}" was given in the \`location\` prop.`),P=ne}else P=I;let M=P.pathname||"/",Y=M;if(E!=="/"){let ne=E.replace(/^\//,"").split("/");Y="/"+M.replace(/^\//,"").split("/").slice(ne.length).join("/")}let F=!u&&n&&n.matches&&n.matches.length>0?n.matches:dw(i,{pathname:Y});ci(A||F!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),ci(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=kx(F&&F.map(ne=>Object.assign({},ne,{params:Object.assign({},p,ne.params),pathname:vr([E,o.encodeLocation?o.encodeLocation(ne.pathname).pathname:ne.pathname]),pathnameBase:ne.pathnameBase==="/"?E:vr([E,o.encodeLocation?o.encodeLocation(ne.pathnameBase).pathname:ne.pathnameBase])})),f,n,s);return e&&Q?U.createElement(Iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},Q):Q}function Dx(){let i=zx(),e=Sx(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:u},"ErrorBoundary")," or"," ",U.createElement("code",{style:u},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:o},n):null,f)}var Ox=U.createElement(Dx,null),Mx=class extends U.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?U.createElement(zi.Provider,{value:this.props.routeContext},U.createElement(vg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vx({routeContext:i,match:e,children:n}){let s=U.useContext(Lo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(zi.Provider,{value:i},n)}function kx(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);gt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:A}=n,I=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||I){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let A,I=!1,P=null,M=null;n&&(A=u&&g.route.id?u[g.route.id]:void 0,P=g.route.errorElement||Ox,f&&(m<0&&E===0?(Tw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,M=null):m===E&&(I=!0,M=g.route.hydrateFallbackElement||null)));let Y=e.concat(o.slice(0,E+1)),F=()=>{let Q;return A?Q=P:I?Q=M:g.route.Component?Q=U.createElement(g.route.Component,null):g.route.element?Q=g.route.element:Q=p,U.createElement(Vx,{match:g,routeContext:{outlet:p,matches:Y,isDataRoute:n!=null},children:Q})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?U.createElement(Mx,{location:n.location,revalidation:n.revalidation,component:P,error:A,children:F(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):F()},null)}function _g(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Px(i){let e=U.useContext(Lo);return gt(e,_g(i)),e}function Lx(i){let e=U.useContext(yf);return gt(e,_g(i)),e}function Ux(i){let e=U.useContext(zi);return gt(e,_g(i)),e}function Eg(i){let e=Ux(i),n=e.matches[e.matches.length-1];return gt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function jx(){return Eg("useRouteId")}function zx(){var s;let i=U.useContext(vg),e=Lx("useRouteError"),n=Eg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function Bx(){let{router:i}=Px("useNavigate"),e=Eg("useNavigate"),n=U.useRef(!1);return _w(()=>{n.current=!0}),U.useCallback(async(o,u={})=>{ci(n.current,vw),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var SE={};function Tw(i,e,n){!e&&!SE[i]&&(SE[i]=!0,ci(!1,n))}U.memo(qx);function qx({routes:i,future:e,state:n}){return Ew(i,void 0,n,e)}function Tg({to:i,replace:e,state:n,relative:s}){gt(Uo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=U.useContext(di);ci(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=U.useContext(zi),{pathname:f}=bs(),m=Cu(),p=yg(i,gg(u),f,s==="path"),g=JSON.stringify(p);return U.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function yo(i){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hx({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){gt(!Uo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=U.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=Po(n));let{pathname:p="/",search:g="",hash:E="",state:A=null,key:I="default"}=n,P=U.useMemo(()=>{let M=Sr(p,f);return M==null?null:{location:{pathname:M,search:g,hash:E,state:A,key:I},navigationType:s}},[f,p,g,E,A,I,s]);return ci(P!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:U.createElement(di.Provider,{value:m},U.createElement(Iu.Provider,{children:e,value:P}))}function Fx({children:i,location:e}){return xx(gp(i),e)}function gp(i,e=[]){let n=[];return U.Children.forEach(i,(s,o)=>{if(!U.isValidElement(s))return;let u=[...e,o];if(s.type===U.Fragment){n.push.apply(n,gp(s.props.children,u));return}gt(s.type===yo,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=gp(s.props.children,u)),n.push(f)}),n}var yh="get",vh="application/x-www-form-urlencoded";function vf(i){return i!=null&&typeof i.tagName=="string"}function Gx(i){return vf(i)&&i.tagName.toLowerCase()==="button"}function Kx(i){return vf(i)&&i.tagName.toLowerCase()==="form"}function $x(i){return vf(i)&&i.tagName.toLowerCase()==="input"}function Qx(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Yx(i,e){return i.button===0&&(!e||e==="_self")&&!Qx(i)}var oh=null;function Xx(){if(oh===null)try{new FormData(document.createElement("form"),0),oh=!1}catch{oh=!0}return oh}var Wx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zm(i){return i!=null&&!Wx.has(i)?(ci(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vh}"`),null):i}function Zx(i,e){let n,s,o,u,f;if(Kx(i)){let m=i.getAttribute("action");s=m?Sr(m,e):null,n=i.getAttribute("method")||yh,o=zm(i.getAttribute("enctype"))||vh,u=new FormData(i)}else if(Gx(i)||$x(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?Sr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||yh,o=zm(i.getAttribute("formenctype"))||zm(m.getAttribute("enctype"))||vh,u=new FormData(m,i),!Xx()){let{name:g,type:E,value:A}=i;if(E==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,A)}}else{if(vf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yh,s=null,o=vh,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function bg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function Jx(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function tD(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await Jx(u,n);return f.links?f.links():[]}return[]}));return sD(s.flat(1).filter(eD).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function AE(i,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var A;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let I=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((A=n[0])==null?void 0:A.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function nD(i,e,{includeHydrateFallback:n}={}){return iD(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function iD(i){return[...new Set(i)]}function rD(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function sD(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(rD(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var aD=new Set([100,101,204,205]);function oD(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&Sr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function bw(){let i=U.useContext(Lo);return bg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function lD(){let i=U.useContext(yf);return bg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var wg=U.createContext(void 0);wg.displayName="FrameworkContext";function ww(){let i=U.useContext(wg);return bg(i,"You must render this element inside a <HydratedRouter> element"),i}function uD(i,e){let n=U.useContext(wg),[s,o]=U.useState(!1),[u,f]=U.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:A}=e,I=U.useRef(null);U.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let Y=Q=>{Q.forEach(se=>{f(se.isIntersecting)})},F=new IntersectionObserver(Y,{threshold:.5});return I.current&&F.observe(I.current),()=>{F.disconnect()}}},[i]),U.useEffect(()=>{if(s){let Y=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Y)}}},[s]);let P=()=>{o(!0)},M=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,I,{}]:[u,I,{onFocus:Gl(m,P),onBlur:Gl(p,M),onMouseEnter:Gl(g,P),onMouseLeave:Gl(E,M),onTouchStart:Gl(A,P)}]:[!1,I,{}]}function Gl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function cD({page:i,...e}){let{router:n}=bw(),s=U.useMemo(()=>dw(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?U.createElement(fD,{page:i,matches:s,...e}):null}function hD(i){let{manifest:e,routeModules:n}=ww(),[s,o]=U.useState([]);return U.useEffect(()=>{let u=!1;return tD(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function fD({page:i,matches:e,...n}){let s=bs(),{manifest:o,routeModules:u}=ww(),{basename:f}=bw(),{loaderData:m,matches:p}=lD(),g=U.useMemo(()=>AE(i,e,p,o,s,"data"),[i,e,p,o,s]),E=U.useMemo(()=>AE(i,e,p,o,s,"assets"),[i,e,p,o,s]),A=U.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let M=new Set,Y=!1;if(e.forEach(Q=>{var ne;let se=o.routes[Q.route.id];!se||!se.hasLoader||(!g.some(he=>he.route.id===Q.route.id)&&Q.route.id in m&&((ne=u[Q.route.id])!=null&&ne.shouldRevalidate)||se.hasClientLoader?Y=!0:M.add(Q.route.id))}),M.size===0)return[];let F=oD(i,f);return Y&&M.size>0&&F.searchParams.set("_routes",e.filter(Q=>M.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[F.pathname+F.search]},[f,m,s,o,g,e,i,u]),I=U.useMemo(()=>nD(E,o),[E,o]),P=hD(E);return U.createElement(U.Fragment,null,A.map(M=>U.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),I.map(M=>U.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),P.map(({key:M,link:Y})=>U.createElement("link",{key:M,...Y})))}function dD(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Sw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sw&&(window.__reactRouterVersion="7.5.2")}catch{}function mD({basename:i,children:e,window:n}){let s=U.useRef();s.current==null&&(s.current=nx({window:n,v5Compat:!0}));let o=s.current,[u,f]=U.useState({action:o.action,location:o.location}),m=U.useCallback(p=>{U.startTransition(()=>f(p))},[f]);return U.useLayoutEffect(()=>o.listen(m),[o,m]),U.createElement(Hx,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Aw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sg=U.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:A,...I},P){let{basename:M}=U.useContext(di),Y=typeof g=="string"&&Aw.test(g),F,Q=!1;if(typeof g=="string"&&Y&&(F=g,Sw))try{let R=new URL(window.location.href),D=g.startsWith("//")?new URL(R.protocol+g):new URL(g),N=Sr(D.pathname,M);D.origin===R.origin&&N!=null?g=N+D.search+D.hash:Q=!0}catch{ci(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=Cx(g,{relative:o}),[ne,he,me]=uD(s,I),Ae=vD(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:A});function k(R){e&&e(R),R.defaultPrevented||Ae(R)}let w=U.createElement("a",{...I,...me,href:F||se,onClick:Q||u?e:k,ref:dD(P,he),target:p,"data-discover":!Y&&n==="render"?"true":void 0});return ne&&!Y?U.createElement(U.Fragment,null,w,U.createElement(cD,{page:se})):w});Sg.displayName="Link";var pD=U.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let A=Nu(f,{relative:g.relative}),I=bs(),P=U.useContext(yf),{navigator:M,basename:Y}=U.useContext(di),F=P!=null&&wD(A)&&m===!0,Q=M.encodeLocation?M.encodeLocation(A).pathname:A.pathname,se=I.pathname,ne=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(se=se.toLowerCase(),ne=ne?ne.toLowerCase():null,Q=Q.toLowerCase()),ne&&Y&&(ne=Sr(ne,Y)||ne);const he=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let me=se===Q||!o&&se.startsWith(Q)&&se.charAt(he)==="/",Ae=ne!=null&&(ne===Q||!o&&ne.startsWith(Q)&&ne.charAt(Q.length)==="/"),k={isActive:me,isPending:Ae,isTransitioning:F},w=me?e:void 0,R;typeof s=="function"?R=s(k):R=[s,me?"active":null,Ae?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(k):u;return U.createElement(Sg,{...g,"aria-current":w,className:R,ref:E,style:D,to:f,viewTransition:m},typeof p=="function"?p(k):p)});pD.displayName="NavLink";var gD=U.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=yh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:A,...I},P)=>{let M=TD(),Y=bD(m,{relative:g}),F=f.toLowerCase()==="get"?"get":"post",Q=typeof m=="string"&&Aw.test(m),se=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let he=ne.nativeEvent.submitter,me=(he==null?void 0:he.getAttribute("formmethod"))||f;M(he||ne.currentTarget,{fetcherKey:e,method:me,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:A})};return U.createElement("form",{ref:P,method:F,action:Y,onSubmit:s?p:se,...I,"data-discover":!Q&&i==="render"?"true":void 0})});gD.displayName="Form";function yD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rw(i){let e=U.useContext(Lo);return gt(e,yD(i)),e}function vD(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=Cu(),p=bs(),g=Nu(i,{relative:u});return U.useCallback(E=>{if(Yx(E,e)){E.preventDefault();let A=n!==void 0?n:gu(p)===gu(g);m(i,{replace:A,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,i,o,u,f])}var _D=0,ED=()=>`__${String(++_D)}__`;function TD(){let{router:i}=Rw("useSubmit"),{basename:e}=U.useContext(di),n=jx();return U.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=Zx(s,e);if(o.navigate===!1){let E=o.fetcherKey||ED();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function bD(i,{relative:e}={}){let{basename:n}=U.useContext(di),s=U.useContext(zi);gt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Nu(i||".",{relative:e})},f=bs();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(A=>A).forEach(A=>m.append("index",A));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:vr([n,u.pathname])),gu(u)}function wD(i,e={}){let n=U.useContext(yw);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Rw("useViewTransitionState"),o=Nu(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=Sr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Sr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Lh(o.pathname,f)!=null||Lh(o.pathname,u)!=null}new TextEncoder;[...aD];var SD=XE();const RE=YE(SD);function Ag(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function Iw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AD=Iw,Cw=new pa("auth","Firebase",Iw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new $h("@firebase/auth");function RD(i,...e){Uh.logLevel<=qe.WARN&&Uh.warn(`Auth (${Do}): ${i}`,...e)}function _h(i,...e){Uh.logLevel<=qe.ERROR&&Uh.error(`Auth (${Do}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(i,...e){throw Rg(i,...e)}function Pi(i,...e){return Rg(i,...e)}function Nw(i,e,n){const s=Object.assign(Object.assign({},AD()),{[e]:n});return new pa("auth","Firebase",s).create(e,{appName:i.name})}function _r(i){return Nw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rg(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Cw.create(i,...e)}function Re(i,e,...n){if(!i)throw Rg(e,...n)}function pr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw _h(e),new Error(e)}function Ar(i,e){i||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function ID(){return IE()==="http:"||IE()==="https:"}function IE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ID()||iT()||"connection"in navigator)?navigator.onLine:!0}function ND(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=eR()||iR()}get(){return CD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(i,e){Ar(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OD=new xu(3e4,6e4);function ws(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Ss(i,e,n,s,o={}){return Dw(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=_u(Object.assign({key:i.config.apiKey},f)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return nR()||(g.referrerPolicy="no-referrer"),xw.fetch()(await Ow(i,i.config.apiHost,n,m),g)})}async function Dw(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},xD),e);try{const o=new VD(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw lh(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw lh(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw lh(i,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Nw(i,E,g);hi(i,E)}}catch(o){if(o instanceof fi)throw o;hi(i,"network-request-failed",{message:String(o)})}}async function Du(i,e,n,s,o={}){const u=await Ss(i,e,n,s,o);return"mfaPendingCredential"in u&&hi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ow(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Ig(i.config,o):`${i.config.apiScheme}://${o}`;return DD.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function MD(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Pi(this.auth,"network-request-failed")),OD.get())})}}function lh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Pi(i,e,s);return o.customData._tokenResponse=n,o}function CE(i){return i!==void 0&&i.enterprise!==void 0}class kD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PD(i,e){return Ss(i,"GET","/v2/recaptchaConfig",ws(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(i,e){return Ss(i,"POST","/v1/accounts:delete",e)}async function jh(i,e){return Ss(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UD(i,e=!1){const n=Ct(i),s=await n.getIdToken(e),o=Cg(s);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:su(Bm(o.auth_time)),issuedAtTime:su(Bm(o.iat)),expirationTime:su(Bm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Bm(i){return Number(i)*1e3}function Cg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const o=JE(n);return o?JSON.parse(o):(_h("Failed to decode base64 JWT payload"),null)}catch(o){return _h("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NE(i){const e=Cg(i);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fi&&jD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function jD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(i){var e;const n=i.auth,s=await i.getIdToken(),o=await yu(i,jh(n,{idToken:s}));Re(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Mw(u.providerUserInfo):[],m=qD(i.providerData,f),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new vp(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,A)}async function BD(i){const e=Ct(i);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qD(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Mw(i){return i.map(e=>{var{providerId:n}=e,s=Ag(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(i,e){const n=await Dw(i,{},async()=>{const s=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Ow(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",xw.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FD(i,e){return Ss(i,"POST","/v2/accounts:revokeToken",ws(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=NE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await HD(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new To;return s&&(Re(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Re(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(i,e){Re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class oi{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=Ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new vp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await yu(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UD(this,e)}reload(){return BD(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await zh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await yu(this,LD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,E;const A=(s=n.displayName)!==null&&s!==void 0?s:void 0,I=(o=n.email)!==null&&o!==void 0?o:void 0,P=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,M=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Y=(m=n.tenantId)!==null&&m!==void 0?m:void 0,F=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Q=(g=n.createdAt)!==null&&g!==void 0?g:void 0,se=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:he,isAnonymous:me,providerData:Ae,stsTokenManager:k}=n;Re(ne&&k,e,"internal-error");const w=To.fromJSON(this.name,k);Re(typeof ne=="string",e,"internal-error"),ns(A,e.name),ns(I,e.name),Re(typeof he=="boolean",e,"internal-error"),Re(typeof me=="boolean",e,"internal-error"),ns(P,e.name),ns(M,e.name),ns(Y,e.name),ns(F,e.name),ns(Q,e.name),ns(se,e.name);const R=new oi({uid:ne,auth:e,email:I,emailVerified:he,displayName:A,isAnonymous:me,photoURL:M,phoneNumber:P,tenantId:Y,stsTokenManager:w,createdAt:Q,lastLoginAt:se});return Ae&&Array.isArray(Ae)&&(R.providerData=Ae.map(D=>Object.assign({},D))),F&&(R._redirectEventId=F),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new To;o.updateFromServerResponse(n);const u=new oi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await zh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Mw(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new To;m.updateFromIdToken(s);const p=new oi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new vp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;function gr(i){Ar(i instanceof Function,"Expected a class definition");let e=xE.get(i);return e?(Ar(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,xE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Vw.type="NONE";const DE=Vw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i,e,n){return`firebase:${i}:${e}:${n}`}class bo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Eh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Eh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jh(this.auth,{idToken:e}).catch(()=>{});return n?oi._fromGetAccountInfoResponse(this.auth,n,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new bo(gr(DE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||gr(DE);const f=Eh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let A;if(typeof E=="string"){const I=await jh(e,{idToken:E}).catch(()=>{});if(!I)break;A=await oi._fromGetAccountInfoResponse(e,I,E)}else A=oi._fromJSON(e,E);g!==u&&(m=A),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new bo(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new bo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zw(e))return"Blackberry";if(Bw(e))return"Webos";if(Pw(e))return"Safari";if((e.includes("chrome/")||Lw(e))&&!e.includes("edge/"))return"Chrome";if(jw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function kw(i=hn()){return/firefox\//i.test(i)}function Pw(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lw(i=hn()){return/crios\//i.test(i)}function Uw(i=hn()){return/iemobile/i.test(i)}function jw(i=hn()){return/android/i.test(i)}function zw(i=hn()){return/blackberry/i.test(i)}function Bw(i=hn()){return/webos/i.test(i)}function Ng(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function GD(i=hn()){var e;return Ng(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KD(){return rR()&&document.documentMode===10}function qw(i=hn()){return Ng(i)||jw(i)||Bw(i)||zw(i)||/windows phone/i.test(i)||Uw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(i,e=[]){let n;switch(i){case"Browser":n=OE(hn());break;case"Worker":n=`${OE(hn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Do}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(i,e={}){return Ss(i,"GET","/v2/passwordPolicy",ws(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=6;class XD{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:YD,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ME(this),this.idTokenSubscription=new ME(this),this.beforeStateQueue=new $D(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jh(this,{idToken:e}),s=await oi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ND()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(_r(this));const n=e?Ct(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QD(this),n=new XD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pa("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await FD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&RD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ea(i){return Ct(i)}class ME{constructor(e){this.auth=e,this.observer=null,this.addObserver=hR(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZD(i){_f=i}function Fw(i){return _f.loadJS(i)}function JD(){return _f.recaptchaEnterpriseScript}function eO(){return _f.gapiScript}function tO(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class nO{constructor(){this.enterprise=new iO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class iO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const rO="recaptcha-enterprise",Gw="NO_RECAPTCHA";class sO{constructor(e){this.type=rO,this.auth=Ea(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{PD(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new kD(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;CE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(Gw)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nO().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&CE(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=JD();p.length!==0&&(p+=m),Fw(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function VE(i,e,n,s=!1,o=!1){const u=new sO(i);let f;if(o)f=Gw;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function _p(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await VE(i,e,n,n==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await VE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(i,e){const n=ga(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ds(u,e??{}))return o;hi(o,"already-initialized")}return n.initialize({options:e})}function oO(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function lO(i,e,n){const s=Ea(i);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=Kw(e),{host:f,port:m}=uO(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(ds(g,s.config.emulator)&&ds(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,cO()}function Kw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function uO(i){const e=Kw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:kE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:kE(f)}}}function kE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function cO(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function hO(i,e){return Ss(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(i,e){return Du(i,"POST","/v1/accounts:signInWithPassword",ws(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(i,e){return Du(i,"POST","/v1/accounts:signInWithEmailLink",ws(i,e))}async function mO(i,e){return Du(i,"POST","/v1/accounts:signInWithEmailLink",ws(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends xg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new vu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new vu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,n,"signInWithPassword",fO);case"emailLink":return dO(e,{email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _p(e,s,"signUpPassword",hO);case"emailLink":return mO(e,{idToken:n,email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(i,e){return Du(i,"POST","/v1/accounts:signInWithIdp",ws(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="http://localhost";class da extends xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=Ag(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new da(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return wo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,wo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wo(e,n)}buildRequest(){const e={requestUri:pO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_u(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yO(i){const e=$l(Ql(i)).link,n=e?$l(Ql(e)).deep_link_id:null,s=$l(Ql(i)).deep_link_id;return(s?$l(Ql(s)).link:null)||s||n||e||i}class Dg{constructor(e){var n,s,o,u,f,m;const p=$l(Ql(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,A=gO((o=p.mode)!==null&&o!==void 0?o:null);Re(g&&E&&A,"argument-error"),this.apiKey=g,this.operation=A,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=yO(e);try{return new Dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.providerId=jo.PROVIDER_ID}static credential(e,n){return vu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Dg.parseLink(n);return Re(s,"argument-error"),vu._fromEmailAndCode(e,s.code,s.tenantId)}}jo.PROVIDER_ID="password";jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends $w{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Ou{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return da._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return rs.credential(n,s)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Ou{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Ou{constructor(){super("twitter.com")}static credential(e,n){return da._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return as.credential(n,s)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(i,e){return Du(i,"POST","/v1/accounts:signUp",ws(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await oi._fromIdTokenResponse(e,s,o),f=PE(s);return new ma({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=PE(s);return new ma({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function PE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends fi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Bh(e,n,s,o)}}function Qw(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(i,u,e,s):u})}async function _O(i,e,n=!1){const s=await yu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ma._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(i,e,n=!1){const{auth:s}=i;if(Xn(s.app))return Promise.reject(_r(s));const o="reauthenticate";try{const u=await yu(i,Qw(s,o,e,i),n);Re(u.idToken,s,"internal-error");const f=Cg(u.idToken);Re(f,s,"internal-error");const{sub:m}=f;return Re(i.uid===m,s,"user-mismatch"),ma._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&hi(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(i,e,n=!1){if(Xn(i.app))return Promise.reject(_r(i));const s="signIn",o=await Qw(i,s,e),u=await ma._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function TO(i,e){return Yw(Ea(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(i){const e=Ea(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bO(i,e,n){if(Xn(i.app))return Promise.reject(_r(i));const s=Ea(i),f=await _p(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Xw(i),p}),m=await ma._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function wO(i,e,n){return Xn(i.app)?Promise.reject(_r(i)):TO(Ct(i),jo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Xw(i),s})}function SO(i,e,n,s){return Ct(i).onIdTokenChanged(e,n,s)}function AO(i,e,n){return Ct(i).beforeAuthStateChanged(e,n)}function RO(i,e,n,s){return Ct(i).onAuthStateChanged(e,n,s)}function IO(i){return Ct(i).signOut()}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=1e3,NO=10;class Zw extends Ww{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);KD()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,NO):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},CO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zw.type="LOCAL";const xO=Zw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Ww{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Jw.type="SESSION";const eS=Jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Ef(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await DO(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Og("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(A){const I=A;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function MO(i){Li().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function VO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function PO(){return tS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebaseLocalStorageDb",LO=1,Hh="firebaseLocalStorage",iS="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tf(i,e){return i.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function UO(){const i=indexedDB.deleteDatabase(nS);return new Mu(i).toPromise()}function Ep(){const i=indexedDB.open(nS,LO);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Hh,{keyPath:iS})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Hh)?e(s):(s.close(),await UO(),e(await Ep()))})})}async function LE(i,e,n){const s=Tf(i,!0).put({[iS]:e,value:n});return new Mu(s).toPromise()}async function jO(i,e){const n=Tf(i,!1).get(e),s=await new Mu(n).toPromise();return s===void 0?null:s.value}function UE(i,e){const n=Tf(i,!0).delete(e);return new Mu(n).toPromise()}const zO=800,BO=3;class rS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ep(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>BO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ef._getInstance(PO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VO(),!this.activeServiceWorker)return;this.sender=new OO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ep();return await LE(e,qh,"1"),await UE(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>LE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>jO(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>UE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Tf(o,!1).getAll();return new Mu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rS.type="LOCAL";const qO=rS;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(i,e){return e?gr(e):(Re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function FO(i){return Yw(i.auth,new Mg(i),i.bypassAuthState)}function GO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),EO(n,new Mg(i),i.bypassAuthState)}async function KO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),_O(n,new Mg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FO;case"linkViaPopup":case"linkViaRedirect":return KO;case"reauthViaPopup":case"reauthViaRedirect":return GO;default:hi(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new xu(2e3,1e4);class vo extends sS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=Og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$O.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="pendingRedirect",Th=new Map;class YO extends sS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const s=await XO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XO(i,e){const n=JO(e),s=ZO(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function WO(i,e){Th.set(i._key(),e)}function ZO(i){return gr(i._redirectPersistence)}function JO(i){return Eh(QO,i.config.apiKey,i.name)}async function eM(i,e,n=!1){if(Xn(i.app))return Promise.reject(_r(i));const s=Ea(i),o=HO(s,e),f=await new YO(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=10*60*1e3;class nM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!aS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tM&&this.cachedEventUids.clear(),this.cachedEventUids.has(jE(e))}saveEventToCache(e){this.cachedEventUids.add(jE(e)),this.lastProcessedEventTime=Date.now()}}function jE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function aS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iM(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(i,e={}){return Ss(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aM=/^https?/;async function oM(i){if(i.config.emulator)return;const{authorizedDomains:e}=await rM(i);for(const n of e)try{if(lM(n))return}catch{}hi(i,"unauthorized-domain")}function lM(i){const e=yp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!aM.test(n))return!1;if(sM.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new xu(3e4,6e4);function zE(){const i=Li().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function cM(i){return new Promise((e,n)=>{var s,o,u;function f(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),n(Pi(i,"network-request-failed"))},timeout:uM.get()})}if(!((o=(s=Li().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Li().gapi)===null||u===void 0)&&u.load)f();else{const m=tO("iframefcb");return Li()[m]=()=>{gapi.load?f():n(Pi(i,"network-request-failed"))},Fw(`${eO()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw bh=null,e})}let bh=null;function hM(i){return bh=bh||cM(i),bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=new xu(5e3,15e3),dM="__/auth/iframe",mM="emulator/auth/iframe",pM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yM(i){const e=i.config;Re(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ig(e,mM):`https://${i.config.authDomain}/${dM}`,s={apiKey:e.apiKey,appName:i.name,v:Do},o=gM.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${_u(s).slice(1)}`}async function vM(i){const e=await hM(i),n=Li().gapi;return Re(n,i,"internal-error"),e.open({where:document.body,url:yM(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pM,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Pi(i,"network-request-failed"),m=Li().setTimeout(()=>{u(f)},fM.get());function p(){Li().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EM=500,TM=600,bM="_blank",wM="http://localhost";class BE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SM(i,e,n,s=EM,o=TM){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},_M),{width:s.toString(),height:o.toString(),top:u,left:f}),g=hn().toLowerCase();n&&(m=Lw(g)?bM:n),kw(g)&&(e=e||wM,p.scrollbars="yes");const E=Object.entries(p).reduce((I,[P,M])=>`${I}${P}=${M},`,"");if(GD(g)&&m!=="_self")return AM(e||"",m),new BE(null);const A=window.open(e||"",m,E);Re(A,i,"popup-blocked");try{A.focus()}catch{}return new BE(A)}function AM(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="__/auth/handler",IM="emulator/auth/handler",CM=encodeURIComponent("fac");async function qE(i,e,n,s,o,u){Re(i.config.authDomain,i,"auth-domain-config-required"),Re(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Do,eventId:o};if(e instanceof $w){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",cR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))f[E]=A}if(e instanceof Ou){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(f.scopes=E.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),g=p?`#${CM}=${encodeURIComponent(p)}`:"";return`${NM(i)}?${_u(m).slice(1)}${g}`}function NM({config:i}){return i.emulator?Ig(i,IM):`https://${i.authDomain}/${RM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="webStorageSupport";class xM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eS,this._completeRedirectFn=eM,this._overrideRedirectResult=WO}async _openPopup(e,n,s,o){var u;Ar((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await qE(e,n,s,yp(),o);return SM(e,f,Og())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await qE(e,n,s,yp(),o);return MO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ar(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await vM(e),s=new nM(e);return n.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qm,{type:qm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[qm];f!==void 0&&n(!!f),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qw()||Pw()||Ng()}}const DM=xM;var HE="@firebase/auth",FE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VM(i){Ui(new li("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Re(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hw(i)},g=new WD(s,o,u,p);return oO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ui(new li("auth-internal",e=>{const n=Ea(e.getProvider("auth").getImmediate());return(s=>new OM(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(HE,FE,MM(i)),Zn(HE,FE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=5*60,PM=nT("authIdTokenMaxAge")||kM;let GE=null;const LM=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>PM)return;const o=n==null?void 0:n.token;GE!==o&&(GE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function UM(i=wp()){const e=ga(i,"auth");if(e.isInitialized())return e.getImmediate();const n=aO(i,{popupRedirectResolver:DM,persistence:[qO,xO,eS]}),s=nT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=LM(u.toString());AO(n,f,()=>f(n.currentUser)),SO(n,m=>f(m))}}const o=eT("auth");return o&&lO(n,`http://${o}`),n}function jM(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}ZD({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Pi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",jM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VM("Browser");const oS=U.createContext();function As(){return U.useContext(oS)}function zM({children:i}){const[e,n]=U.useState(null),[s,o]=U.useState(!0),u=UM(pg);U.useEffect(()=>RO(u,A=>{n(A),o(!1)}),[u]);const g={currentUser:e,signup:(E,A)=>bO(u,E,A),login:(E,A)=>wO(u,E,A),logout:()=>IO(u)};return b.jsx(oS.Provider,{value:g,children:!s&&i})}function BM(){const i=U.useRef(),e=U.useRef(),{login:n}=As(),[s,o]=U.useState(""),[u,f]=U.useState(!1),m=Cu();async function p(g){g.preventDefault(),o(""),f(!0);try{await n(i.current.value,e.current.value),m("/dashboard")}catch(E){o(E.message||"Failed to log in")}f(!1)}return b.jsx("div",{className:"auth-bg",children:b.jsxs("div",{className:"auth-container",children:[b.jsx("div",{className:"auth-logo-row",children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),b.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),b.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&b.jsx("div",{className:"auth-error",children:s}),b.jsxs("form",{className:"auth-form",onSubmit:p,children:[b.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),b.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),b.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),b.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),b.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),b.jsx("div",{className:"auth-link-row",children:b.jsxs("span",{children:["Don't have an account? ",b.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function qM(){const i=U.useRef(),e=U.useRef(),n=U.useRef(),{signup:s}=As(),[o,u]=U.useState(""),[f,m]=U.useState(!1),p=Cu();async function g(E){if(E.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{await s(i.current.value,e.current.value),p("/dashboard",{replace:!0})}catch(A){u(A.message||"Failed to create an account")}m(!1)}return b.jsx("div",{className:"auth-bg",children:b.jsxs("div",{className:"auth-container",children:[b.jsx("div",{className:"auth-logo-row",children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),b.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),b.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&b.jsx("div",{className:"auth-error",children:o}),b.jsxs("form",{className:"auth-form",onSubmit:g,children:[b.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),b.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),b.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),b.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),b.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),b.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),b.jsx("button",{disabled:f,type:"submit",className:"auth-btn",children:"Sign Up"})]}),b.jsx("div",{className:"auth-link-row",children:b.jsxs("span",{children:["Already have an account? ",b.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function HM({children:i}){const{currentUser:e}=As();return e?i:b.jsx(Tg,{to:"/login"})}function FM({show:i}){const[e,n]=U.useState(!1),[s,o]=U.useState([]),[u,f]=U.useState(null),[m,p]=U.useState([]),[g,E]=U.useState(!1),[A,I]=U.useState(""),P=async()=>{if(!e&&i.tmdbId){E(!0),I("");try{const Y=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,Q=await(await fetch(Y)).json();o(Q.seasons||[]),Q.seasons&&Q.seasons.length>0&&f(Q.seasons[0].season_number)}catch{I("Failed to load seasons.")}E(!1)}n(M=>!M)};return U.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){E(!0),I("");try{const F=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,se=await(await fetch(F)).json();p(se.episodes||[])}catch{I("Failed to load episodes.")}E(!1)}})()},[i.tmdbId,u]),b.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[b.jsx("button",{onClick:P,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":" Show Episodes"}),e&&b.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?b.jsx("div",{children:"Loading..."}):A?b.jsx("div",{style:{color:"red"},children:A}):b.jsxs(b.Fragment,{children:[s.length>0&&b.jsxs("div",{style:{marginBottom:10},children:[b.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),b.jsx("select",{id:"season-select",value:u||"",onChange:M=>f(Number(M.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(M=>b.jsx("option",{value:M.season_number,children:M.name||`Season ${M.season_number}`},M.id||M.season_number))})]}),m.length>0?b.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(M=>b.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[b.jsxs("strong",{children:["Ep ",M.episode_number,":"]})," ",M.name," ",M.air_date?b.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",M.air_date,")"]}):""]},M.id||M.episode_number))}):b.jsx("div",{children:"No episodes found."})]})})]})}function GM({users:i,onSelectUser:e}){return b.jsxs("table",{className:"admin-user-table",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{children:"Email"}),b.jsx("th",{children:"Display Name"}),b.jsx("th",{children:"Status"}),b.jsx("th",{children:"Roles"}),b.jsx("th",{children:"Stats"}),b.jsx("th",{children:"Actions"})]})}),b.jsx("tbody",{children:i.map(n=>{var s,o;return b.jsxs("tr",{children:[b.jsx("td",{children:n.email}),b.jsx("td",{children:n.displayName}),b.jsx("td",{children:n.disabled?"Inactive":"Active"}),b.jsx("td",{children:n.roles?n.roles.join(", "):""}),b.jsxs("td",{children:["Diary: ",((s=n.stats)==null?void 0:s.diaryCount)||0,b.jsx("br",{}),"Comments: ",((o=n.stats)==null?void 0:o.commentCount)||0]}),b.jsx("td",{children:b.jsx("button",{onClick:()=>e(n),children:"Manage"})})]},n.uid)})})]})}function KM({user:i,onClose:e,onDisable:n,onEnable:s,onDelete:o,onSendMessage:u,diaryEntries:f,comments:m,onDeleteDiary:p,onDeleteComment:g}){var E,A;return i?b.jsx("div",{className:"admin-modal-bg",children:b.jsxs("div",{className:"admin-modal",style:{maxWidth:1200,width:"90vw",minWidth:320,padding:"2.2rem 2.5rem",borderRadius:18,background:"#fff",boxShadow:"0 4px 32px #205a7a22",margin:"0 auto"},children:[b.jsx("button",{className:"close-btn",onClick:e,style:{position:"absolute",top:18,right:24,fontSize:28,color:"#205a7a",background:"none",border:"none",cursor:"pointer"},children:""}),b.jsxs("h2",{style:{color:"#205a7a",fontWeight:900,fontSize:"2rem",marginBottom:12},children:["User: ",b.jsx("span",{style:{color:"#25609c"},children:i.displayName||i.email})]}),b.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12,flexWrap:"wrap"},children:[b.jsxs("div",{children:["Status: ",b.jsx("b",{style:{color:i.disabled?"#d32f2f":"#35b36b"},children:i.disabled?"Inactive":"Active"})]}),b.jsxs("div",{children:["Roles: ",b.jsx("span",{style:{color:"#25609c"},children:i.roles?i.roles.join(", "):"-"})]}),b.jsxs("div",{children:["Email: ",b.jsx("span",{style:{color:"#333"},children:i.email})]}),b.jsxs("div",{children:["Stats: ",b.jsxs("span",{style:{color:"#25609c"},children:["Diary ",((E=i.stats)==null?void 0:E.diaryCount)||0,", Comments ",((A=i.stats)==null?void 0:A.commentCount)||0]})]})]}),b.jsxs("div",{style:{margin:"1.2em 0",display:"flex",gap:12,flexWrap:"wrap"},children:[i.disabled?b.jsx("button",{onClick:()=>s(i.uid),style:{background:"#35b36b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Enable"}):b.jsx("button",{onClick:()=>n(i.uid),style:{background:"#ffe066",color:"#205a7a",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Disable"}),b.jsx("button",{onClick:()=>o(i.uid),style:{background:"#ff6b6b",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Delete"}),b.jsx("button",{onClick:()=>u(i.uid),style:{background:"#25609c",color:"#fff",border:"none",borderRadius:7,padding:"7px 22px",fontWeight:700},children:"Message"})]}),b.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:24,marginBottom:12,fontSize:"1.2rem"},children:"Diary Entries"}),b.jsx("div",{style:{maxHeight:180,overflowY:"auto",marginBottom:18,background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:f.length===0?b.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No diary entries."}):b.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:f.map(I=>b.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[b.jsx("span",{style:{fontWeight:600,color:"#205a7a"},children:I.title}),b.jsx("button",{onClick:()=>p(I.id),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.id))})}),b.jsx("h3",{style:{color:"#205a7a",fontWeight:800,marginTop:18,marginBottom:10,fontSize:"1.2rem"},children:"Comments"}),b.jsx("div",{style:{maxHeight:140,overflowY:"auto",background:"#f7fafd",borderRadius:8,padding:"8px 10px"},children:m.length===0?b.jsx("div",{style:{color:"#888",fontStyle:"italic"},children:"No comments."}):b.jsx("ul",{style:{margin:0,padding:0,listStyle:"none"},children:m.map(I=>b.jsxs("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0",borderBottom:"1px solid #e6f0fa"},children:[b.jsx("span",{style:{color:"#333",fontWeight:500,maxWidth:290,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:I.text}),b.jsx("button",{onClick:()=>g(I.id),style:{color:"#ff6b6b",background:"none",border:"none",fontWeight:700,fontSize:15,cursor:"pointer",marginLeft:16},children:"Delete"})]},I.id))})})]})}):null}function $M({onSend:i,onClose:e}){const[n,s]=U.useState("");return b.jsx("div",{className:"admin-modal-bg",children:b.jsxs("div",{className:"admin-modal",children:[b.jsx("button",{className:"close-btn",onClick:e,children:""}),b.jsx("h2",{children:"Send Message to All Users"}),b.jsx("textarea",{value:n,onChange:o=>s(o.target.value),rows:6,style:{width:"100%"}}),b.jsx("button",{onClick:()=>i(n),style:{marginTop:12},children:"Send"})]})})}function QM(){const{currentUser:i}=As(),[e,n]=U.useState([]),[s,o]=U.useState(null),[u,f]=U.useState([]),[m,p]=U.useState([]),[g,E]=U.useState(!0),[A,I]=U.useState(""),[P,M]=U.useState(!1);U.useEffect(()=>{async function w(){E(!0),I("");try{const R=await ai(Wn(Ze,"users")),D=await ai(Wn(Ze,"diary")),N=await ai(Vm(Ze,"comments")),O={},C={};D.docs.forEach(Ie=>{const Oe=Ie.data().uid;O[Oe]=(O[Oe]||0)+1}),N.docs.forEach(Ie=>{const Oe=Ie.data().authorUid;C[Oe]=(C[Oe]||0)+1}),n(R.docs.map(Ie=>({uid:Ie.id,...Ie.data(),stats:{diaryCount:O[Ie.id]||0,commentCount:C[Ie.id]||0}})))}catch{I("Failed to load users.")}E(!1)}w()},[]);async function Y(w){const R=await ai(Wn(Ze,"diary"));f(R.docs.filter(O=>O.data().uid===w.uid).map(O=>({id:O.id,...O.data()})));const N=(await ai(Vm(Ze,"comments"))).docs.filter(O=>O.data().authorUid===w.uid).map(O=>{const Ie=O.ref.path.split("/")[1];return{id:O.id,entryId:Ie,...O.data()}});p(N),o(w)}async function F(w){await Eo(en(Ze,"users",w),{disabled:!0}),n(e.map(R=>R.uid===w?{...R,disabled:!0}:R)),o(R=>R&&R.uid===w?{...R,disabled:!0}:R)}async function Q(w){await Eo(en(Ze,"users",w),{disabled:!1}),n(e.map(R=>R.uid===w?{...R,disabled:!1}:R)),o(R=>R&&R.uid===w?{...R,disabled:!1}:R)}async function se(w){await iu(en(Ze,"users",w)),n(e.filter(R=>R.uid!==w)),o(null)}async function ne(w){if(!w||typeof w!="string"){I("Cannot delete diary entry: invalid id.");return}await iu(en(Ze,"diary",w)),f(u.filter(R=>R.id!==w)),await me()}async function he(w){const R=m.find(N=>N.id===w);if(!R)return;const D=R.entryId||R.entry_id||R.diaryId||R.parentEntryId;if(!D){I("Cannot delete: missing entryId for comment.");return}await iu(en(Ze,`discussions/${D}/comments`,w)),p(m.filter(N=>N.id!==w)),await me()}async function me(){const w=await ai(Wn(Ze,"diary")),R=await ai(Vm(Ze,"comments")),D={},N={};w.docs.forEach(O=>{const C=O.data().uid;D[C]=(D[C]||0)+1}),R.docs.forEach(O=>{const C=O.data().authorUid;N[C]=(N[C]||0)+1}),n(O=>O.map(C=>({...C,stats:{diaryCount:D[C.uid]||0,commentCount:N[C.uid]||0}})))}async function Ae(w){await ai(Wn(Ze,"users")).then(R=>{R.forEach(D=>{Eo(en(Ze,"users",D.id),{lastAdminMessage:w})})}),M(!1),alert("Message sent to all users!")}function k(w){M(!0)}return b.jsxs("div",{className:"admin-dashboard-container",children:[b.jsx("h2",{className:"admin-dashboard-title",children:"Admin Dashboard"}),b.jsx("div",{className:"admin-dashboard-actions",children:b.jsx("button",{className:"admin-dashboard-message-btn",onClick:()=>M(!0),children:"Message All Users"})}),A&&b.jsx("div",{className:"admin-dashboard-error",children:A}),g?b.jsx("div",{className:"admin-dashboard-loading",children:"Loading users..."}):b.jsx(GM,{users:e,onSelectUser:Y}),s&&b.jsx(KM,{user:s,diaryEntries:u,comments:m,onClose:()=>o(null),onDelete:se,onDisable:F,onEnable:Q,onSendMessage:k,onDeleteDiary:ne,onDeleteComment:he}),P&&b.jsx($M,{onSend:Ae,onClose:()=>M(!1)})]})}const YM=[{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:b.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],XM=[{icon:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:b.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],WM="https://image.tmdb.org/t/p/w500";function ZM(){const{currentUser:i}=As(),[e,n]=U.useState([]),[s,o]=U.useState(!0),[u,f]=U.useState("");return U.useEffect(()=>{async function m(){o(!0),f("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{f("Could not load trending movies.")}o(!1)}m()},[]),i?b.jsx(Tg,{to:"/dashboard"}):b.jsx("div",{className:"sw-bg",children:b.jsxs("div",{className:"sw-container",children:[b.jsxs("div",{className:"sw-header-box sw-header-custom",children:[b.jsx("div",{className:"sw-logo-row",children:b.jsx("div",{className:"sw-header-logo-bg",children:b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),b.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),b.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover Whats Next."}),b.jsx(Sg,{to:"/login",children:b.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),b.jsxs("div",{className:"sw-section",children:[b.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),b.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:YM.map((m,p)=>b.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[b.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),b.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),b.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),b.jsxs("div",{className:"sw-section",children:[b.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),b.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:XM.map((m,p)=>b.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[b.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),b.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),b.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),b.jsxs("div",{className:"sw-section",children:[b.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),b.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?b.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?b.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?b.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>b.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[b.jsx("img",{src:m.poster_path?`${WM}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),b.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),b.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function JM({entryId:i}){console.log("entryId:",i);const{currentUser:e}=As(),[n,s]=U.useState([]),[o,u]=U.useState(!0),[f,m]=U.useState(""),[p,g]=U.useState(null),[E,A]=U.useState(""),[I,P]=U.useState({}),[M,Y]=U.useState(!0),F=U.useRef(null);async function Q(w){if(!w)return"Anonymous";try{const R=await gh(en(Ze,"users",w.uid));if(R&&R.exists())return R.data().displayName||w.displayName||(w.email?w.email.split("@")[0]:w.uid)}catch{}return w.displayName||(w.email?w.email.split("@")[0]:w.uid)}U.useEffect(()=>{const w=mh(Wn(Ze,`discussions/${i}/comments`),x2("timestamp","asc")),R=V2(w,D=>{const N=D.docs.map(O=>({id:O.id,...O.data(),votes:O.data().votes||{}}));if(console.log("Fetched comments:",N),s(N),e){const O={};N.forEach(C=>{C.votes&&C.votes[e.uid]&&(O[C.id]=C.votes[e.uid])}),P(O)}u(!1)});return()=>R()},[i,e]);const se=async w=>{if(w.preventDefault(),!f.trim())return;const R=await Q(e);await dp(Wn(Ze,`discussions/${i}/comments`),{text:f,author:R,authorUid:e?e.uid:null,timestamp:hE(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),F.current&&F.current.focus()},ne=async w=>{if(!E.trim())return;const R=await Q(e);await dp(Wn(Ze,`discussions/${i}/comments`),{text:E,author:R,authorUid:e?e.uid:null,timestamp:hE(),parentId:w,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),A("")},he=async(w,R)=>{if(!e)return;const D=en(Ze,`discussions/${i}/comments`,w),N=n.find(Ie=>Ie.id===w);if(!N)return;const O=N.votes?N.votes[e.uid]:void 0;if(O===R)return;let C={};R==="up"?C={upvotes:ah(1),...O==="down"?{downvotes:ah(-1)}:{},[`votes.${e.uid}`]:"up"}:R==="down"&&(C={downvotes:ah(1),...O==="up"?{upvotes:ah(-1)}:{},[`votes.${e.uid}`]:"down"}),P(Ie=>({...Ie,[w]:R})),await Eo(D,C)},me=async w=>{if(!e)return;const R=n.find(N=>N.id===w);if(!R||R.authorUid!==e.uid)return;const D=async N=>{const O=n.filter(Ie=>Ie.parentId===N);for(const Ie of O)Ie.authorUid===e.uid&&await D(Ie.id);const C=n.find(Ie=>Ie.id===N);C&&C.authorUid===e.uid&&await iu(en(Ze,`discussions/${i}/comments`,N))};await D(w)};function Ae({commentId:w,level:R,childrenCount:D,render:N,showCount:O=1}){const[C,Ie]=U.useState(!1),Oe=N(w,R+1);return!Oe||Oe.length===0?null:C?b.jsxs("div",{children:[Oe,D>O&&b.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ie(!1),children:"Hide Replies"})]}):b.jsxs("div",{children:[Oe.slice(0,O),D>O&&b.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>Ie(!0),children:["View ",D-O+1," more repl",D-O+1===1?"y":"ies"]})]})}const k=(w=null,R=0)=>n.filter(N=>N.parentId===w).map(N=>{var C,Ie,Oe,X;const O=n.filter(ae=>ae.parentId===N.id);return b.jsxs("div",{className:`discussion-comment${R>0?" discussion-reply":""}`,style:{marginLeft:R*18},children:[b.jsxs("div",{className:"discussion-header",children:[b.jsx("span",{className:"discussion-author",children:N.author}),b.jsx("span",{className:"discussion-date",children:((X=(Ie=(C=N.timestamp)==null?void 0:C.toDate)==null?void 0:(Oe=Ie.call(C)).toLocaleString)==null?void 0:X.call(Oe))||""})]}),b.jsx("div",{className:"discussion-body",children:N.text}),b.jsxs("div",{className:"discussion-actions",children:[b.jsxs("button",{className:`discussion-vote${I[N.id]==="up"?" voted":""}`,onClick:()=>he(N.id,"up"),title:"Thumbs up",disabled:I[N.id]==="up",children:[" ",N.upvotes||0]}),b.jsxs("button",{className:`discussion-vote${I[N.id]==="down"?" voted":""}`,onClick:()=>he(N.id,"down"),title:"Thumbs down",disabled:I[N.id]==="down",children:[" ",N.downvotes||0]}),b.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(N.id),children:"Reply"}),N.authorUid===(e==null?void 0:e.uid)&&b.jsx("button",{className:"discussion-delete-btn",onClick:()=>me(N.id),title:"Delete",children:""})]}),p===N.id&&b.jsxs("div",{className:"discussion-reply-form",children:[b.jsx("input",{type:"text",value:E,onChange:ae=>A(ae.target.value),placeholder:"Write a reply...",autoFocus:!0}),b.jsx("button",{onClick:()=>ne(N.id),children:"Send"}),b.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),b.jsx(Ae,{commentId:N.id,level:R,childrenCount:O.length,render:k,showCount:1})]},N.id)});return b.jsxs("div",{className:"discussion-section",children:[b.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Y(w=>!w),style:{marginBottom:M?0:10},children:M?"Show Discussion":"Hide Discussion"}),!M&&b.jsxs(b.Fragment,{children:[b.jsx("h4",{children:"Discussion"}),b.jsxs("form",{onSubmit:se,className:"discussion-form",children:[b.jsx("input",{type:"text",ref:F,value:f,onChange:w=>m(w.target.value),placeholder:"Add a comment..."}),b.jsx("button",{type:"submit",children:"Send"})]}),b.jsx("div",{className:"discussion-comments",children:o?b.jsx("div",{children:"Loading..."}):k()})]})]})}var lS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KE=ls.createContext&&ls.createContext(lS),eV=["attr","size","title"];function tV(i,e){if(i==null)return{};var n=nV(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function nV(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function Fh(){return Fh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Fh.apply(this,arguments)}function $E(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function Gh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$E(Object(n),!0).forEach(function(s){iV(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function iV(i,e,n){return e=rV(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function rV(i){var e=sV(i,"string");return typeof e=="symbol"?e:e+""}function sV(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function uS(i){return i&&i.map((e,n)=>ls.createElement(e.tag,Gh({key:n},e.attr),uS(e.child)))}function Vu(i){return e=>ls.createElement(aV,Fh({attr:Gh({},i.attr)},e),uS(i.child))}function aV(i){var e=n=>{var{attr:s,size:o,title:u}=i,f=tV(i,eV),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),ls.createElement("svg",Fh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,f,{className:p,style:Gh(Gh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&ls.createElement("title",null,u),i.children)};return KE!==void 0?ls.createElement(KE.Consumer,null,n=>e(n)):e(lS)}function oV(i){return Vu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function QE(i){return Vu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function lV(i){return Vu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function uV(i){return Vu({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function cV(i){return Vu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(i)}const ho="ca9a91468bb700f84faf986252bc3fe6",Kl="https://api.themoviedb.org/3",Hm="US";function hV(){const{currentUser:i,logout:e}=As(),n=Cu(),[s,o]=U.useState("movie"),[u,f]=U.useState(""),[m,p]=U.useState([]),[g,E]=U.useState(!1),[A,I]=U.useState(""),[P,M]=U.useState([]),[Y,F]=U.useState({}),Q=U.useRef(null),se=U.useRef(""),[ne,he]=U.useState(null),[me,Ae]=U.useState(""),k=U.useRef({}),[w,R]=U.useState(!1),[D,N]=U.useState(null),[O,C]=U.useState(!1),[Ie,Oe]=U.useState(""),[X,ae]=U.useState(!1),[ve,je]=U.useState(""),[V,ie]=U.useState(!1),[ue,re]=U.useState(""),[pe,ke]=U.useState("movie"),[be,Et]=U.useState([]),[rt,_n]=U.useState(!0),[ei,In]=U.useState(""),[mi,pi]=U.useState(1),[Bi,Rs]=U.useState(!1);U.useEffect(()=>{async function z(){if(!i)return;const le=await gh(en(Ze,"users",i.uid));if(le.exists()){const fe=le.data();console.log("[ADMIN CHECK] Firestore user doc for UID",i.uid,fe),console.log("[ADMIN CHECK] roles field value:",fe.roles,"type:",typeof fe.roles,Array.isArray(fe.roles)),Rs(Array.isArray(fe.roles)&&fe.roles.includes("admin"))}else console.log("[ADMIN CHECK] No Firestore user doc found for UID",i.uid)}z()},[i]),U.useEffect(()=>{Et([]),pi(1),_n(!0),In("")},[pe]),U.useEffect(()=>{let z=!0;async function le(fe=1){_n(!0),In("");try{const _e=await fetch(`https://api.themoviedb.org/3/trending/${pe}/week?api_key=${ho}&page=${fe}`);if(!_e.ok)throw new Error("Failed to fetch trending");const ge=await _e.json();z&&Et(fe===1?ge.results:Me=>{const dt=new Set(Me.map(Cn=>Cn.id));return[...Me,...ge.results.filter(Cn=>!dt.has(Cn.id))]})}catch{z&&In("Could not load trending.")}z&&_n(!1)}return le(mi),()=>{z=!1}},[pe,mi]),U.useEffect(()=>{be.filter(le=>!P.some(fe=>fe.id===le.id&&fe.media_type===pe)).length<12&&be.length<100&&pi(le=>le+1)},[be,P,pe]),U.useEffect(()=>{if(!i)return;async function z(){const le=mh(Wn(Ze,"diary"),km("uid","==",i.uid));let _e=(await ai(le)).docs.map(ge=>({...ge.data(),docId:ge.id}));_e=_e.sort((ge,Me)=>new Date(Me.createdAt)-new Date(ge.createdAt)),M(_e);for(const ge of _e)Is(ge)}z()},[i]),U.useEffect(()=>{if(!i){Oe(""),je("");return}let z=!1;async function le(){const fe=await gh(en(Ze,"users",i.uid));let _e="";fe.exists()?_e=fe.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):_e=i.displayName||(i.email?i.email.split("@")[0]:i.uid),z||(Oe(_e),je(_e))}return le(),()=>{z=!0}},[i&&i.uid]);async function Is(z){var fe;if(Y[z.id])return;let le="";z.media_type==="movie"?le=`${Kl}/movie/${z.id}/watch/providers?api_key=${ho}`:le=`${Kl}/tv/${z.id}/watch/providers?api_key=${ho}`;try{const _e=await fetch(le);if(_e.status===404){F(dt=>({...dt,[z.id]:{}}));return}const Me=((fe=(await _e.json()).results)==null?void 0:fe[Hm])||{};F(dt=>({...dt,[z.id]:Me}))}catch{F(ge=>({...ge,[z.id]:{}}))}}async function fn(z,le){if(!z.trim()){p([]),I(""),E(!1);return}E(!0),I(""),p([]);try{const _e=`${Kl}${le==="movie"?"/search/movie":"/search/tv"}?api_key=${ho}&query=${encodeURIComponent(z)}`,Me=await(await fetch(_e)).json();Me.results?p(Me.results):(p([]),I("No results found."))}catch{I("Failed to fetch results.")}E(!1)}U.useEffect(()=>{if(!(u.trim()===""||u===se.current))return Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{fn(u,s)},400),()=>clearTimeout(Q.current)},[u,s]);async function zo(z){z.preventDefault(),se.current=u,await fn(u,s)}async function Ir(z){if(!i||P.some(Me=>Me.id===z.id&&Me.media_type===(z.media_type||s)))return;const le={uid:i.uid,id:z.id,title:z.title||z.name,date:(z.release_date||z.first_air_date||"").slice(0,10),poster:z.poster_path?`https://image.tmdb.org/t/p/w200${z.poster_path}`:"https://placehold.co/120x170?text=No+Image",desc:z.overview||"No description.",watched:!1,archived:!1,media_type:z.media_type||s,createdAt:new Date().toISOString()};await dp(Wn(Ze,"diary"),le);const fe=mh(Wn(Ze,"diary"),km("uid","==",i.uid));let ge=(await ai(fe)).docs.map(Me=>({...Me.data(),docId:Me.id}));ge=ge.sort((Me,dt)=>new Date(dt.createdAt)-new Date(Me.createdAt)),M(ge),Is(le),p([]),f("")}async function Cr(z){M(le=>le.filter(fe=>fe.docId!==z)),he(null);try{await iu(en(Ze,"diary",z));const le=mh(Wn(Ze,"diary"),km("uid","==",i.uid));let _e=(await ai(le)).docs.map(ge=>({...ge.data(),docId:ge.id}));_e=_e.sort((ge,Me)=>new Date(Me.createdAt)-new Date(ge.createdAt)),M(_e)}catch{window.alert("Failed to remove entry. Please try again.")}}async function qi(z,le){const fe=!le,_e=fe;M(ge=>ge.map(Me=>Me.docId===z?{...Me,watched:fe,archived:_e}:Me)),he(ge=>ge&&ge.docId===z?{...ge,watched:fe,archived:_e}:ge);try{await Eo(en(Ze,"diary",z),{watched:fe,archived:_e})}catch{M(Me=>Me.map(dt=>dt.docId===z?{...dt,watched:le,archived:le}:dt)),he(Me=>Me&&Me.docId===z?{...Me,watched:le,archived:le}:Me),window.alert("Failed to update watched status. Please try again.")}}async function Bo(z,le){M(fe=>fe.map(_e=>_e.docId===z?{..._e,archived:!le}:_e)),he(fe=>fe&&fe.docId===z?{...fe,archived:!le}:fe);try{await Eo(en(Ze,"diary",z),{archived:!le})}catch{M(_e=>_e.map(ge=>ge.docId===z?{...ge,archived:le}:ge)),he(_e=>_e&&_e.docId===z?{..._e,archived:le}:_e),window.alert("Failed to update archive status. Please try again.")}}function Nr(z){window.alert(`Share this: ${z.title}`)}async function Cs(){try{await e(),n("/")}catch{alert("Failed to sign out")}}async function Ta(){if(!ve.trim()){re("Display name cannot be empty.");return}ie(!0),re("");try{await M2(en(Ze,"users",i.uid),{displayName:ve.trim()},{merge:!0}),Oe(ve.trim()),ae(!1);const z=await gh(en(Ze,"users",i.uid));if(z.exists()){const le=z.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);Oe(le),je(le)}}catch{re("Failed to update display name.")}ie(!1)}function mt(){je(Ie),ae(!0),re("")}function Ye(){ae(!1),re("")}async function dn(z){var le,fe,_e,ge,Me,dt;if(!z)return"";try{if(z.media_type==="movie"){const $t=await(await fetch(`${Kl}/movie/${z.id}/release_dates?api_key=${ho}`)).json(),rn=((le=$t.results)==null?void 0:le.find(ct=>ct.iso_3166_1===Hm))||((fe=$t.results)==null?void 0:fe[0]);return((ge=(_e=rn==null?void 0:rn.release_dates)==null?void 0:_e.find(ct=>ct.certification))==null?void 0:ge.certification)||""}else if(z.media_type==="tv"){const $t=await(await fetch(`${Kl}/tv/${z.id}/content_ratings?api_key=${ho}`)).json(),rn=((Me=$t.results)==null?void 0:Me.find(Je=>Je.iso_3166_1===Hm))||((dt=$t.results)==null?void 0:dt[0]);return(rn==null?void 0:rn.rating)||""}}catch{return""}return""}function Vt(z){he(z),Ae(""),dn(z).then(le=>Ae(le||""))}function ba({entry:z,providersMap:le,onClose:fe,onShare:_e,onToggleWatched:ge,onRemove:Me,onArchiveToggle:dt,diary:Cn,contentRating:$t}){if(!z)return null;const rn=le[z.id]||{},Je=rn.flatrate||[],ct=rn.rent||[],yt=rn.buy||[],Xe=z;return RE.createPortal(b.jsx("div",{className:"dashboard-modal-overlay",onClick:fe,children:b.jsxs("div",{className:"dashboard-modal-content",onClick:Tt=>Tt.stopPropagation(),children:[b.jsx("button",{className:"dashboard-modal-close",onClick:fe,"aria-label":"Close modal",type:"button",children:""}),b.jsxs("div",{className:"dashboard-modal-body",children:[b.jsx("img",{className:"dashboard-diary-poster",src:Xe.poster_path?`https://image.tmdb.org/t/p/w300${Xe.poster_path}`:Xe.poster||"https://placehold.co/120x170?text=No+Image",alt:Xe.title,style:{marginBottom:"1rem"}}),b.jsx("div",{className:"dashboard-diary-movie-title",children:Xe.title}),b.jsxs("div",{className:"dashboard-diary-date",children:[Xe.release_date?Xe.release_date.slice(0,4):Xe.date||"",$t&&b.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:$t})]}),b.jsx("div",{className:"dashboard-diary-desc",children:Xe.overview||Xe.desc||""}),b.jsxs("div",{className:"dashboard-diary-providers-modal",children:[b.jsxs("div",{className:"dashboard-diary-providers-group",children:[b.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),b.jsx("div",{className:"dashboard-diary-providers-icons",children:Je.length===0?b.jsx("span",{style:{color:"#888"},children:"N/A"}):Je.map(Tt=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Tt.logo_path}`,alt:Tt.provider_name,title:Tt.provider_name,className:"dashboard-provider-icon-sm"},Tt.provider_id))})]}),b.jsxs("div",{className:"dashboard-diary-providers-group",children:[b.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),b.jsx("div",{className:"dashboard-diary-providers-icons",children:ct.length===0?b.jsx("span",{style:{color:"#888"},children:"N/A"}):ct.map(Tt=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Tt.logo_path}`,alt:Tt.provider_name,title:Tt.provider_name,className:"dashboard-provider-icon-sm"},Tt.provider_id))})]}),b.jsxs("div",{className:"dashboard-diary-providers-group",children:[b.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),b.jsx("div",{className:"dashboard-diary-providers-icons",children:yt.length===0?b.jsx("span",{style:{color:"#888"},children:"N/A"}):yt.map(Tt=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Tt.logo_path}`,alt:Tt.provider_name,title:Tt.provider_name,className:"dashboard-provider-icon-sm"},Tt.provider_id))})]})]}),z.media_type==="tv"&&(z.tmdbId||z.id)&&b.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:b.jsx(FM,{show:{...z,tmdbId:z.tmdbId||z.id}})}),b.jsxs("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:[b.jsx("button",{className:"dashboard-diary-share",onClick:()=>_e(Xe),title:"Share this diary entry with friends via link or social media",children:"SHARE"}),b.jsx("button",{className:Xe.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>ge(Xe.docId,Xe.watched),title:Xe.watched?"Mark as not watched":"Mark as watched",children:Xe.watched?"WATCHED":"UNWATCHED"}),b.jsx("button",{className:"dashboard-diary-archive",style:{background:z.archived?"#b2b2b2":"#25609c",color:z.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>dt(z.docId,z.archived),title:z.archived?"Move this entry back to active diary":"Archive this entry (hide from main diary)",children:z.archived?"Unarchive":"Archive"}),b.jsx("button",{className:"dashboard-diary-remove",onClick:()=>Me(Xe.docId),title:"Remove this diary entry permanently",children:"REMOVE"})]}),b.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[b.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),b.jsx(JM,{entryId:Xe.id})]})]})]})}),document.getElementById("modal-root"))}const qo=ls.memo(ba);function Hi(){const z={};return P.filter(le=>le.media_type===s).forEach(le=>{const fe=Y[le.id];fe&&[...fe.flatrate||[],...fe.rent||[],...fe.buy||[]].forEach(_e=>{z[_e.provider_id]=_e})}),Object.values(z)}const gi=D?P.filter(z=>{if(z.media_type!==s)return!1;const le=Y[z.id];return le?[...le.flatrate||[],...le.rent||[],...le.buy||[]].some(fe=>fe.provider_id===D.provider_id):!1}):P.filter(z=>z.media_type===s);function Fi({open:z,onClose:le,providers:fe,onSelect:_e}){return z?RE.createPortal(b.jsx("div",{className:"dashboard-modal-overlay",onClick:le,children:b.jsxs("div",{className:"dashboard-modal-content",onClick:ge=>ge.stopPropagation(),style:{maxWidth:440,padding:24},children:[b.jsx("button",{className:"dashboard-modal-close",onClick:le,"aria-label":"Close modal",type:"button",children:""}),b.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"All Providers"}),b.jsx("div",{style:{margin:"0 0 12px 0",color:"#8fc7ff",fontSize:"1.02rem",textAlign:"center",fontWeight:500},children:"View all providers. Click on a provider icon below to filter your diary and see which shows can be watched for that provider."}),b.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:fe.map(ge=>b.jsx("img",{src:`https://image.tmdb.org/t/p/w45${ge.logo_path}`,alt:ge.provider_name,title:ge.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:D&&D.provider_id===ge.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>_e(ge)},ge.provider_id))}),D&&b.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>N(null),children:"Show All Entries"}),b.jsx("div",{style:{marginTop:24},children:gi.length===0?b.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):b.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:gi.map(ge=>b.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0003",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center"},children:[b.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:b.jsx("img",{src:ge.poster,alt:ge.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),b.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:ge.title})]},ge.docId))})})]})}),document.getElementById("modal-root")):null}const En=P.filter(z=>!z.archived&&z.media_type===s),Gi=P.filter(z=>z.archived&&z.media_type===s);function yi(z){ke(z)}function Ns(z){Ir({id:z.id,title:z.title||z.name,poster_path:z.poster_path,release_date:z.release_date||z.first_air_date,overview:z.overview,media_type:pe}),Et(le=>le.filter(fe=>fe.id!==z.id))}function xs(){const[z,le]=U.useState(!1);U.useEffect(()=>{function _e(){le(window.scrollY>300)}return window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)},[]);const fe=()=>{window.scrollTo({top:0,behavior:"smooth"})};return z?b.jsx("button",{onClick:fe,style:{position:"fixed",right:18,bottom:28,zIndex:9999,background:"rgba(37,96,156,0.93)",color:"#fff",border:"none",borderRadius:"50%",width:54,height:54,boxShadow:"0 3px 12px #0005",display:"flex",alignItems:"center",justifyContent:"center",fontSize:32,cursor:"pointer",touchAction:"manipulation"},"aria-label":"Back to top",className:"back-to-top-btn",children:b.jsx("span",{style:{fontSize:45,marginTop:-2},children:""})}):null}return b.jsxs("div",{className:"dashboard-bg",children:[b.jsx("style",{children:`
          .dashboard-trending-movie-title {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 2.7em;
            max-height: 2.7em;
            line-height: 1.35em;
            font-size: 1.07rem;
            font-weight: 600;
            color: #fff;
            margin: 0.7em 0 0.2em 0;
            text-align: center;
          }
          .dashboard-trending-desc {
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 6.75em;
            max-height: 6.75em;
            line-height: 1.35em;
            font-size: 0.98rem;
            color: #c7d0e0;
            margin-bottom: 1em;
            text-align: center;
          }
        `}),b.jsxs("div",{className:"dashboard-content-wrapper",children:[b.jsx("div",{className:"dashboard-banner",children:b.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[b.jsx(cV,{size:48,style:{color:"#fff",marginBottom:12}}),b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[b.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),X?b.jsxs(b.Fragment,{children:[b.jsx("input",{type:"text",value:ve,onChange:z=>je(z.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:V,autoFocus:!0}),b.jsx("button",{onClick:Ta,disabled:V,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:b.jsx(oV,{})}),b.jsx("button",{onClick:Ye,disabled:V,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:b.jsx(uV,{})})]}):b.jsxs(b.Fragment,{children:[b.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:Ie}),b.jsx("button",{onClick:mt,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:b.jsx(lV,{})})]})]}),ue&&b.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:ue}),b.jsxs("div",{style:{display:"flex",gap:12,marginTop:12},children:[b.jsx("button",{onClick:Cs,style:{background:"#fff",color:"#18191d",fontWeight:700,fontSize:"1.1rem",borderRadius:8,border:"none",padding:"10px 32px",boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s"},children:"LOG OUT"}),Bi&&b.jsx("button",{className:"dashboard-admin-btn",style:{background:"#25609c",color:"#fff",border:"none",borderRadius:8,padding:"10px 32px",fontWeight:700,fontSize:"1.1rem",letterSpacing:1,boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s"},onClick:()=>n("/admin"),children:"Admin Dashboard"})]})]})}),b.jsxs("div",{className:"dashboard-search-section",children:[b.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),b.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),b.jsx("div",{className:"dashboard-search-instructions",children:"NEED INSTRUCTIONS?"}),b.jsxs("div",{className:"dashboard-search-toggle-row",children:[b.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),b.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),b.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:zo,children:[b.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows*",value:u,onChange:z=>f(z.target.value)}),b.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),b.jsxs("div",{className:"dashboard-search-results",children:[A&&b.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:A}),!A&&m.length>0&&b.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(z=>b.jsxs("div",{className:"dashboard-trending-card",children:[b.jsx("img",{src:z.poster_path?`https://image.tmdb.org/t/p/w200${z.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:z.title||z.name,className:"dashboard-trending-poster"}),b.jsx("div",{className:"dashboard-trending-movie-title",children:z.title||z.name}),b.jsx("div",{className:"dashboard-trending-year",children:(z.release_date||z.first_air_date||"").slice(0,4)}),b.jsx("div",{className:"dashboard-trending-desc",children:z.overview?z.overview.slice(0,90)+(z.overview.length>90?"":""):"No description."}),b.jsx("button",{className:"dashboard-trending-add",onClick:()=>Ir(z),children:P.some(le=>le.id===z.id)?"IN DIARY":"ADD TO DIARY"})]},z.id))})]})]}),b.jsxs("div",{className:"dashboard-diary-section",children:[b.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),b.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[b.jsx("button",{className:`dashboard-toggle${O?"":" active"}`,onClick:()=>C(!1),children:"My Diary"}),b.jsx("button",{className:`dashboard-toggle${O?" active":""}`,onClick:()=>C(!0),children:"Archived"})]}),b.jsx("div",{className:"dashboard-diary-providers-row",children:b.jsx("button",{className:"dashboard-providers-btn",onClick:()=>R(!0),title:"View all providers. Click on a provider icon to see which shows can be watched for that provider.",children:"ALL PROVIDERS"})}),O?Gi.length===0?b.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No archived entries."}):b.jsx("div",{className:"dashboard-diary-cards-row",children:Gi.map(z=>(k.current[z.docId]||(k.current[z.docId]=U.createRef()),b.jsxs("section",{ref:le=>k.current[z.docId]=le,className:"dashboard-diary-card collapsed",children:[b.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:b.jsx("img",{src:z.poster,alt:z.title,className:"dashboard-diary-poster collapsed"})}),b.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:z.title}),b.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Vt(z),children:["Show More ",b.jsx(QE,{})]})]},z.docId)))}):En.length===0?b.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):b.jsx("div",{className:"dashboard-diary-cards-row",children:En.map(z=>(k.current[z.docId]||(k.current[z.docId]=U.createRef()),b.jsxs("section",{ref:le=>k.current[z.docId]=le,className:"dashboard-diary-card collapsed",children:[b.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:b.jsx("img",{src:z.poster,alt:z.title,className:"dashboard-diary-poster collapsed"})}),b.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:z.title}),b.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Vt(z),children:["Show More ",b.jsx(QE,{})]})]},z.docId)))})]}),b.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),b.jsxs("div",{className:"dashboard-trending-section",children:[b.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",pe==="movie"?"Movies":"TV Shows"]}),b.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[b.jsx("button",{className:pe==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>yi("movie"),children:"Movies"}),b.jsx("button",{className:pe==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>yi("tv"),children:"TV Shows"})]}),b.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:rt?b.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading"}):ei?b.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:ei}):be.filter(z=>!P.some(le=>le.id===z.id&&le.media_type===pe)).slice(0,10).map(z=>b.jsxs("div",{className:"dashboard-trending-card",children:[b.jsx("img",{src:z.poster_path?`https://image.tmdb.org/t/p/w200${z.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:z.title||z.name,className:"dashboard-trending-poster"}),b.jsx("div",{className:"dashboard-trending-movie-title",children:z.title||z.name}),b.jsx("div",{className:"dashboard-trending-year",children:(z.release_date||z.first_air_date||"").slice(0,4)}),b.jsx("div",{className:"dashboard-trending-desc",children:z.overview?z.overview.slice(0,90)+(z.overview.length>90?"":""):"No description."}),b.jsx("button",{className:"dashboard-trending-add",onClick:()=>Ns(z),children:"ADD TO DIARY"})]},z.id))})]})]}),ne&&b.jsx(qo,{entry:ne,providersMap:Y,onClose:()=>he(null),onShare:Nr,onToggleWatched:qi,onRemove:Cr,onArchiveToggle:Bo,diary:P,contentRating:me}),b.jsx(Fi,{open:w,onClose:()=>{R(!1),N(null)},providers:Hi(),onSelect:z=>N(z)}),b.jsx(xs,{})]})}function fV(){const{currentUser:i}=As();return b.jsxs(Fx,{children:[b.jsx(yo,{path:"/login",element:b.jsx(BM,{})}),b.jsx(yo,{path:"/signup",element:b.jsx(qM,{})}),b.jsx(yo,{path:"/admin",element:b.jsx(HM,{children:b.jsx(QM,{})})}),b.jsx(yo,{path:"/dashboard",element:b.jsx(hV,{})}),b.jsx(yo,{path:"/",element:i?b.jsx(Tg,{to:"/dashboard"}):b.jsx(ZM,{})})]})}qA.createRoot(document.getElementById("root")).render(b.jsx(U.StrictMode,{children:b.jsx(mD,{basename:"/showswatched2",children:b.jsx(zM,{children:b.jsx(fV,{})})})}));
