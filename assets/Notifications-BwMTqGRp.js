import{b as _,c as A,r as b,u as W,e as H,_ as u,a6 as ro,f as T,j as l,s as z,h as f,i as G,a7 as xo,v as Oo,E as Co,F as $o,q as N,m as Po,n as Ro,o as Io,Y as To,Z as Bo,$ as Mo,a as to,a0 as No,a1 as jo,a5 as Lo,d as _o}from"./index-D6zfUZPM.js";import{r as zo}from"./createSvgIcon-BiptPAxs.js";import{u as lo}from"./usePreviousProps-DMnl1WJZ.js";import{L as q,M as ko}from"./Menu-B3Z5FY19.js";import{d as ao}from"./dividerClasses-D2MR5PwJ.js";import{T as j}from"./Typography-CDEwC3Sn.js";function Do(o){const{badgeContent:t,invisible:r=!1,max:a=99,showZero:i=!1}=o,c=lo({badgeContent:t,max:a});let e=r;r===!1&&t===0&&!i&&(e=!0);const{badgeContent:d,max:s=a}=e?c:o,n=d&&Number(d)>s?`${s}+`:d;return{badgeContent:d,invisible:e,max:s,displayValue:n}}function Fo(o){return A("MuiBadge",o)}const C=_("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),So=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],V=10,U=4,Eo=o=>{const{color:t,anchorOrigin:r,invisible:a,overlap:i,variant:c,classes:e={}}=o,d={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${f(r.vertical)}${f(r.horizontal)}`,`anchorOrigin${f(r.vertical)}${f(r.horizontal)}${f(i)}`,`overlap${f(i)}`,t!=="default"&&`color${f(t)}`]};return G(d,Fo,e)},Vo=z("span",{name:"MuiBadge",slot:"Root",overridesResolver:(o,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Uo=z("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(o,t)=>{const{ownerState:r}=o;return[t.badge,t[r.variant],t[`anchorOrigin${f(r.anchorOrigin.vertical)}${f(r.anchorOrigin.horizontal)}${f(r.overlap)}`],r.color!=="default"&&t[`color${f(r.color)}`],r.invisible&&t.invisible]}})(({theme:o})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.pxToRem(12),minWidth:V*2,lineHeight:1,padding:"0 6px",height:V*2,borderRadius:V,zIndex:1,transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=o.vars)!=null?t:o).palette).filter(r=>{var a,i;return((a=o.vars)!=null?a:o).palette[r].main&&((i=o.vars)!=null?i:o).palette[r].contrastText}).map(r=>({props:{color:r},style:{backgroundColor:(o.vars||o).palette[r].main,color:(o.vars||o).palette[r].contrastText}})),{props:{variant:"dot"},style:{borderRadius:U,height:U*2,minWidth:U*2,padding:0}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${C.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.leavingScreen})}}]}}),qo=b.forwardRef(function(t,r){var a,i,c,e,d,s;const n=W({props:t,name:"MuiBadge"}),{anchorOrigin:p={vertical:"top",horizontal:"right"},className:y,component:x,components:g={},componentsProps:m={},children:v,overlap:h="rectangular",color:O="default",invisible:$=!1,max:k=99,badgeContent:P,slots:B,slotProps:M,showZero:Z=!1,variant:D="standard"}=n,co=H(n,So),{badgeContent:J,invisible:po,max:uo,displayValue:go}=Do({max:k,invisible:$,badgeContent:P,showZero:Z}),mo=lo({anchorOrigin:p,color:O,overlap:h,variant:D,badgeContent:P}),Y=po||J==null&&D!=="dot",{color:vo=O,overlap:fo=h,anchorOrigin:bo=p,variant:K=D}=Y?mo:n,Q=K!=="dot"?go:void 0,F=u({},n,{badgeContent:J,invisible:Y,max:uo,displayValue:Q,showZero:Z,anchorOrigin:bo,color:vo,overlap:fo,variant:K}),X=Eo(F),w=(a=(i=B==null?void 0:B.root)!=null?i:g.Root)!=null?a:Vo,oo=(c=(e=B==null?void 0:B.badge)!=null?e:g.Badge)!=null?c:Uo,S=(d=M==null?void 0:M.root)!=null?d:m.root,E=(s=M==null?void 0:M.badge)!=null?s:m.badge,yo=ro({elementType:w,externalSlotProps:S,externalForwardedProps:co,additionalProps:{ref:r,as:x},ownerState:F,className:T(S==null?void 0:S.className,X.root,y)}),ho=ro({elementType:oo,externalSlotProps:E,ownerState:F,className:T(X.badge,E==null?void 0:E.className)});return l.jsxs(w,u({},yo,{children:[v,l.jsx(oo,u({},ho,{children:Q}))]}))}),eo=_("MuiListItemIcon",["root","alignItemsFlexStart"]);function Ao(o){return A("MuiListItemText",o)}const L=_("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Wo=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Ho=o=>{const{classes:t,inset:r,primary:a,secondary:i,dense:c}=o;return G({root:["root",r&&"inset",c&&"dense",a&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Ao,t)},Go=z("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:r}=o;return[{[`& .${L.primary}`]:t.primary},{[`& .${L.secondary}`]:t.secondary},t.root,r.inset&&t.inset,r.primary&&r.secondary&&t.multiline,r.dense&&t.dense]}})(({ownerState:o})=>u({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},o.primary&&o.secondary&&{marginTop:6,marginBottom:6},o.inset&&{paddingLeft:56})),no=b.forwardRef(function(t,r){const a=W({props:t,name:"MuiListItemText"}),{children:i,className:c,disableTypography:e=!1,inset:d=!1,primary:s,primaryTypographyProps:n,secondary:p,secondaryTypographyProps:y}=a,x=H(a,Wo),{dense:g}=b.useContext(q);let m=s??i,v=p;const h=u({},a,{disableTypography:e,inset:d,primary:!!m,secondary:!!v,dense:g}),O=Ho(h);return m!=null&&m.type!==j&&!e&&(m=l.jsx(j,u({variant:g?"body2":"body1",className:O.primary,component:n!=null&&n.variant?void 0:"span",display:"block"},n,{children:m}))),v!=null&&v.type!==j&&!e&&(v=l.jsx(j,u({variant:"body2",className:O.secondary,color:"text.secondary",display:"block"},y,{children:v}))),l.jsxs(Go,u({className:T(O.root,c),ownerState:h,ref:r},x,{children:[m,v]}))});function Zo(o){return A("MuiMenuItem",o)}const R=_("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Jo=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Yo=(o,t)=>{const{ownerState:r}=o;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},Ko=o=>{const{disabled:t,dense:r,divider:a,disableGutters:i,selected:c,classes:e}=o,s=G({root:["root",r&&"dense",t&&"disabled",!i&&"gutters",a&&"divider",c&&"selected"]},Zo,e);return u({},e,s)},Qo=z(Co,{shouldForwardProp:o=>$o(o)||o==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Yo})(({theme:o,ownerState:t})=>u({},o.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(o.vars||o).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(o.vars||o).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${R.selected}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / ${o.vars.palette.action.selectedOpacity})`:N.alpha(o.palette.primary.main,o.palette.action.selectedOpacity),[`&.${R.focusVisible}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.focusOpacity}))`:N.alpha(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.focusOpacity)}},[`&.${R.selected}:hover`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.hoverOpacity}))`:N.alpha(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / ${o.vars.palette.action.selectedOpacity})`:N.alpha(o.palette.primary.main,o.palette.action.selectedOpacity)}},[`&.${R.focusVisible}`]:{backgroundColor:(o.vars||o).palette.action.focus},[`&.${R.disabled}`]:{opacity:(o.vars||o).palette.action.disabledOpacity},[`& + .${ao.root}`]:{marginTop:o.spacing(1),marginBottom:o.spacing(1)},[`& + .${ao.inset}`]:{marginLeft:52},[`& .${L.root}`]:{marginTop:0,marginBottom:0},[`& .${L.inset}`]:{paddingLeft:36},[`& .${eo.root}`]:{minWidth:36}},!t.dense&&{[o.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&u({minHeight:32,paddingTop:4,paddingBottom:4},o.typography.body2,{[`& .${eo.root} svg`]:{fontSize:"1.25rem"}}))),io=b.forwardRef(function(t,r){const a=W({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:c="li",dense:e=!1,divider:d=!1,disableGutters:s=!1,focusVisibleClassName:n,role:p="menuitem",tabIndex:y,className:x}=a,g=H(a,Jo),m=b.useContext(q),v=b.useMemo(()=>({dense:e||m.dense||!1,disableGutters:s}),[m.dense,e,s]),h=b.useRef(null);xo(()=>{i&&h.current&&h.current.focus()},[i]);const O=u({},a,{dense:v.dense,divider:d,disableGutters:s}),$=Ko(a),k=Oo(h,r);let P;return a.disabled||(P=y!==void 0?y:-1),l.jsx(q.Provider,{value:v,children:l.jsx(Qo,u({ref:k,role:p,tabIndex:P,component:c,focusVisibleClassName:T($.focusVisible,n),className:T($.root,x)},g,{ownerState:O,classes:$}))})});var I={},so;function Xo(){if(so)return I;so=1;var o=Po();Object.defineProperty(I,"__esModule",{value:!0}),I.default=void 0;var t=o(zo()),r=Ro();return I.default=(0,t.default)((0,r.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),I}var wo=Xo();const or=Io(wo);function sr({user:o}){const[t,r]=b.useState(null),[a,i]=b.useState([]),[c,e]=b.useState(0);b.useEffect(()=>{if(!o||!o.uid)return;const n=To(Mo(to,"users",o.uid,"notifications"),Bo("createdAt","desc")),p=No(n,y=>{const x=y.docs.map(g=>({id:g.id,...g.data()}));i(x),e(x.filter(g=>!g.read).length)},y=>{});return()=>p()},[o&&o.uid]);const d=n=>{r(n.currentTarget),a.filter(p=>!p.read).forEach(p=>{Lo(_o(to,"users",o.uid,"notifications",p.id),{read:!0})}),e(0)},s=()=>r(null);return l.jsxs(l.Fragment,{children:[l.jsx(jo,{color:"inherit",onClick:d,sx:{ml:1},disabled:!o,children:l.jsx(qo,{badgeContent:c,color:"error",children:l.jsx(or,{})})}),l.jsx(ko,{anchorEl:t,open:!!t,onClose:s,children:a.length===0?l.jsx(io,{disabled:!0,children:l.jsx(no,{primary:"No notifications"})}):a.slice(0,10).map(n=>{var p;return l.jsx(io,{selected:!n.read,children:l.jsx(no,{primary:n.text,secondary:(p=n.createdAt)!=null&&p.toDate?n.createdAt.toDate().toLocaleString():""})},n.id)})})]})}export{sr as default};
