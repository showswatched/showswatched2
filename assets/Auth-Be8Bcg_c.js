import{b as N,c as U,p as D,q as I,r as m,u as V,e as M,t as O,v as $,_ as j,j as e,s as z,f as q,h as R,i as H,w as G,B as E,L as K,P as X,A as Y,x as J,y as Q,z as Z,C as S}from"./index-D6zfUZPM.js";import{l as ee}from"./logo-jV6IYJtX.js";import{c as re}from"./Discussion-BQNA3lkv.js";import{C as te}from"./Container-xRgET2_O.js";import{T as w}from"./Typography-CDEwC3Sn.js";import{G as f,C as se}from"./Grid-B-oyCY_7.js";import{T as L}from"./Delete-LWAT4-uP.js";import{B as oe}from"./Button-CfJaqulS.js";import"./createSvgIcon-BiptPAxs.js";import"./Menu-B3Z5FY19.js";function ne(t){return U("MuiLink",t)}const ae=N("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),F={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ie=t=>F[t]||t,le=({theme:t,ownerState:r})=>{const s=ie(r.color),n=D(t,`palette.${s}`,!1)||r.color,a=D(t,`palette.${s}Channel`);return"vars"in t&&a?`rgba(${a} / 0.4)`:I.alpha(n,.4)},ce=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ue=t=>{const{classes:r,component:s,focusVisible:n,underline:a}=t,i={root:["root",`underline${R(a)}`,s==="button"&&"button",n&&"focusVisible"]};return H(i,ne,r)},de=z(w,{name:"MuiLink",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:s}=t;return[r.root,r[`underline${R(s.underline)}`],s.component==="button"&&r.button]}})(({theme:t,ownerState:r})=>j({},r.underline==="none"&&{textDecoration:"none"},r.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},r.underline==="always"&&j({textDecoration:"underline"},r.color!=="inherit"&&{textDecorationColor:le({theme:t,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),r.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ae.focusVisible}`]:{outline:"auto"}})),me=m.forwardRef(function(r,s){const n=V({props:r,name:"MuiLink"}),{className:a,color:i="primary",component:l="a",onBlur:p,onFocus:x,TypographyClasses:o,underline:c="always",variant:g="inherit",sx:y}=n,A=M(n,ce),{isFocusVisibleRef:v,onBlur:u,onFocus:h,ref:d}=O(),[C,P]=m.useState(!1),T=$(s,d),W=b=>{u(b),v.current===!1&&P(!1),p&&p(b)},_=b=>{h(b),v.current===!0&&P(!0),x&&x(b)},k=j({},n,{color:i,component:l,focusVisible:C,underline:c,variant:g}),B=ue(k);return e.jsx(de,j({color:i,className:q(B.root,a),classes:o,component:l,onBlur:W,onFocus:_,ref:T,ownerState:k,variant:g,sx:[...Object.keys(F).includes(i)?[]:[{color:i}],...Array.isArray(y)?y:[y]]},A))});function Ae({onLogin:t,onLogoClick:r}){const[s,n]=m.useState(!1),[a,i]=m.useState(""),[l,p]=m.useState(""),[x,o]=m.useState(null),[c,g]=m.useState(!1);G();const y=()=>!a||!l?(o("Please fill in all fields"),!1):/\S+@\S+\.\S+/.test(a)?l.length<6?(o("Password must be at least 6 characters long"),!1):!0:(o("Please enter a valid email address"),!1),A=async u=>{if(u.preventDefault(),!!y()){o(null),g(!0);try{const d=await(s?J:Q)(Z,a,l);if(!d.user)throw new Error("No user data received");if(s)try{await re(d.user.uid,{text:"Welcome to Shows Watched! Start by adding your first show or movie.",createdAt:new Date,read:!1})}catch(C){console.warn("[Auth] Failed to create welcome notification:",C)}t({email:d.user.email,uid:d.user.uid,displayName:d.user.email.split("@")[0],photoURL:null})}catch(h){switch(console.error("Auth error:",h),h.code){case S.EMAIL_EXISTS:o("Email is already in use. Please sign in or use a different email.");break;case S.WEAK_PASSWORD:o("Password should be at least 6 characters long.");break;case S.USER_DELETED:o("No account found with this email. Please sign up."),n(!0);break;case S.INVALID_PASSWORD:o("Invalid password. Please try again.");break;default:o("An error occurred. Please try again."),console.error("Detailed error:",h)}}finally{g(!1)}}},v=()=>{n(!s),o(null)};return e.jsxs(te,{maxWidth:"sm",children:[e.jsxs(E,{sx:{mt:8,mb:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(K,{to:"/",onClick:()=>{i(""),p(""),o(null),n(!1),typeof r=="function"&&r()},children:e.jsx("img",{src:ee,alt:"ShowsWatched Logo",style:{height:90,marginBottom:12,cursor:"pointer"}})}),e.jsx(w,{variant:"h6",align:"center",color:"textSecondary",gutterBottom:!0,children:"Track your favorite shows and movies"})]}),e.jsx(X,{elevation:3,sx:{p:4},children:e.jsx("form",{onSubmit:A,children:e.jsxs(f,{container:!0,spacing:3,children:[e.jsx(f,{item:!0,xs:12,children:e.jsx(w,{variant:"h5",gutterBottom:!0,children:s?"Create Account":"Sign In"})}),x&&e.jsx(f,{item:!0,xs:12,children:e.jsx(Y,{severity:"error",children:x})}),e.jsx(f,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Email",type:"email",value:a,onChange:u=>i(u.target.value),disabled:c,required:!0})}),e.jsx(f,{item:!0,xs:12,children:e.jsx(L,{fullWidth:!0,label:"Password",type:"password",value:l,onChange:u=>p(u.target.value),disabled:c,required:!0})}),e.jsxs(f,{item:!0,xs:12,children:[e.jsx(oe,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:c,sx:{mb:2},children:c?e.jsx(se,{size:24,color:"inherit"}):s?"Sign Up":"Sign In"}),e.jsx(E,{textAlign:"center",children:e.jsx(me,{component:"button",variant:"body2",onClick:v,disabled:c,children:s?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})})]})}export{Ae as default};
