(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function BE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var dm={exports:{}},zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function DA(){if(L_)return zl;L_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var U_;function xA(){return U_||(U_=1,dm.exports=DA()),dm.exports}var S=xA(),mm={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j_;function OA(){if(j_)return Oe;j_=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,Q={};function H(O,te,le){this.props=O,this.context=te,this.refs=Q,this.updater=le||P}H.prototype.isReactComponent={},H.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},H.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Y(){}Y.prototype=H.prototype;function se(O,te,le){this.props=O,this.context=te,this.refs=Q,this.updater=le||P}var ie=se.prototype=new Y;ie.constructor=se,V(ie,H.prototype),ie.isPureReactComponent=!0;var pe=Array.isArray,de={H:null,A:null,T:null,S:null,V:null},be=Object.prototype.hasOwnProperty;function x(O,te,le,re,Te,De){return le=De.ref,{$$typeof:i,type:O,key:te,ref:le!==void 0?le:null,props:De}}function R(O,te){return x(O.type,te,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function N(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(le){return te[le]})}var M=/\/+/g;function L(O,te){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):te.toString(36)}function C(){}function et(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(C,C):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function it(O,te,le,re,Te){var De=typeof O;(De==="undefined"||De==="boolean")&&(O=null);var _e=!1;if(O===null)_e=!0;else switch(De){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(O.$$typeof){case i:case e:_e=!0;break;case E:return _e=O._init,it(_e(O._payload),te,le,re,Te)}}if(_e)return Te=Te(O),_e=re===""?"."+L(O,0):re,pe(Te)?(le="",_e!=null&&(le=_e.replace(M,"$&/")+"/"),it(Te,te,le,"",function(pn){return pn})):Te!=null&&(I(Te)&&(Te=R(Te,le+(Te.key==null||O&&O.key===Te.key?"":(""+Te.key).replace(M,"$&/")+"/")+_e)),te.push(Te)),1;_e=0;var At=re===""?".":re+":";if(pe(O))for(var Qe=0;Qe<O.length;Qe++)re=O[Qe],De=At+L(re,Qe),_e+=it(re,te,le,De,Te);else if(Qe=A(O),typeof Qe=="function")for(O=Qe.call(O),Qe=0;!(re=O.next()).done;)re=re.value,De=At+L(re,Qe++),_e+=it(re,te,le,De,Te);else if(De==="object"){if(typeof O.then=="function")return it(et(O),te,le,re,Te);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return _e}function X(O,te,le){if(O==null)return O;var re=[],Te=0;return it(O,re,"","",function(De){return te.call(le,De,Te++)}),re}function oe(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(le){(O._status===0||O._status===-1)&&(O._status=1,O._result=le)},function(le){(O._status===0||O._status===-1)&&(O._status=2,O._result=le)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var ve=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function qe(){}return Oe.Children={map:X,forEach:function(O,te,le){X(O,function(){te.apply(this,arguments)},le)},count:function(O){var te=0;return X(O,function(){te++}),te},toArray:function(O){return X(O,function(te){return te})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Oe.Component=H,Oe.Fragment=n,Oe.Profiler=o,Oe.PureComponent=se,Oe.StrictMode=s,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=de,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return de.H.useMemoCache(O)}},Oe.cache=function(O){return function(){return O.apply(null,arguments)}},Oe.cloneElement=function(O,te,le){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var re=V({},O.props),Te=O.key,De=void 0;if(te!=null)for(_e in te.ref!==void 0&&(De=void 0),te.key!==void 0&&(Te=""+te.key),te)!be.call(te,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&te.ref===void 0||(re[_e]=te[_e]);var _e=arguments.length-2;if(_e===1)re.children=le;else if(1<_e){for(var At=Array(_e),Qe=0;Qe<_e;Qe++)At[Qe]=arguments[Qe+2];re.children=At}return x(O.type,Te,void 0,void 0,De,re)},Oe.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Oe.createElement=function(O,te,le){var re,Te={},De=null;if(te!=null)for(re in te.key!==void 0&&(De=""+te.key),te)be.call(te,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Te[re]=te[re]);var _e=arguments.length-2;if(_e===1)Te.children=le;else if(1<_e){for(var At=Array(_e),Qe=0;Qe<_e;Qe++)At[Qe]=arguments[Qe+2];Te.children=At}if(O&&O.defaultProps)for(re in _e=O.defaultProps,_e)Te[re]===void 0&&(Te[re]=_e[re]);return x(O,De,void 0,void 0,null,Te)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(O){return{$$typeof:m,render:O}},Oe.isValidElement=I,Oe.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:oe}},Oe.memo=function(O,te){return{$$typeof:g,type:O,compare:te===void 0?null:te}},Oe.startTransition=function(O){var te=de.T,le={};de.T=le;try{var re=O(),Te=de.S;Te!==null&&Te(le,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(qe,ve)}catch(De){ve(De)}finally{de.T=te}},Oe.unstable_useCacheRefresh=function(){return de.H.useCacheRefresh()},Oe.use=function(O){return de.H.use(O)},Oe.useActionState=function(O,te,le){return de.H.useActionState(O,te,le)},Oe.useCallback=function(O,te){return de.H.useCallback(O,te)},Oe.useContext=function(O){return de.H.useContext(O)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(O,te){return de.H.useDeferredValue(O,te)},Oe.useEffect=function(O,te,le){var re=de.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(O,te)},Oe.useId=function(){return de.H.useId()},Oe.useImperativeHandle=function(O,te,le){return de.H.useImperativeHandle(O,te,le)},Oe.useInsertionEffect=function(O,te){return de.H.useInsertionEffect(O,te)},Oe.useLayoutEffect=function(O,te){return de.H.useLayoutEffect(O,te)},Oe.useMemo=function(O,te){return de.H.useMemo(O,te)},Oe.useOptimistic=function(O,te){return de.H.useOptimistic(O,te)},Oe.useReducer=function(O,te,le){return de.H.useReducer(O,te,le)},Oe.useRef=function(O){return de.H.useRef(O)},Oe.useState=function(O){return de.H.useState(O)},Oe.useSyncExternalStore=function(O,te,le){return de.H.useSyncExternalStore(O,te,le)},Oe.useTransition=function(){return de.H.useTransition()},Oe.version="19.1.0",Oe}var z_;function gp(){return z_||(z_=1,mm.exports=OA()),mm.exports}var U=gp();const as=BE(U);var pm={exports:{}},Bl={},gm={exports:{}},ym={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_;function MA(){return B_||(B_=1,function(i){function e(X,oe){var ve=X.length;X.push(oe);e:for(;0<ve;){var qe=ve-1>>>1,O=X[qe];if(0<o(O,oe))X[qe]=oe,X[ve]=O,ve=qe;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var oe=X[0],ve=X.pop();if(ve!==oe){X[0]=ve;e:for(var qe=0,O=X.length,te=O>>>1;qe<te;){var le=2*(qe+1)-1,re=X[le],Te=le+1,De=X[Te];if(0>o(re,ve))Te<O&&0>o(De,re)?(X[qe]=De,X[Te]=ve,qe=Te):(X[qe]=re,X[le]=ve,qe=le);else if(Te<O&&0>o(De,ve))X[qe]=De,X[Te]=ve,qe=Te;else break e}}return oe}function o(X,oe){var ve=X.sortIndex-oe.sortIndex;return ve!==0?ve:X.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var p=[],g=[],E=1,b=null,A=3,P=!1,V=!1,Q=!1,H=!1,Y=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function pe(X){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=X)s(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=n(g)}}function de(X){if(Q=!1,pe(X),!V)if(n(p)!==null)V=!0,be||(be=!0,L());else{var oe=n(g);oe!==null&&it(de,oe.startTime-X)}}var be=!1,x=-1,R=5,I=-1;function N(){return H?!0:!(i.unstable_now()-I<R)}function M(){if(H=!1,be){var X=i.unstable_now();I=X;var oe=!0;try{e:{V=!1,Q&&(Q=!1,se(x),x=-1),P=!0;var ve=A;try{t:{for(pe(X),b=n(p);b!==null&&!(b.expirationTime>X&&N());){var qe=b.callback;if(typeof qe=="function"){b.callback=null,A=b.priorityLevel;var O=qe(b.expirationTime<=X);if(X=i.unstable_now(),typeof O=="function"){b.callback=O,pe(X),oe=!0;break t}b===n(p)&&s(p),pe(X)}else s(p);b=n(p)}if(b!==null)oe=!0;else{var te=n(g);te!==null&&it(de,te.startTime-X),oe=!1}}break e}finally{b=null,A=ve,P=!1}oe=void 0}}finally{oe?L():be=!1}}}var L;if(typeof ie=="function")L=function(){ie(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,et=C.port2;C.port1.onmessage=M,L=function(){et.postMessage(null)}}else L=function(){Y(M,0)};function it(X,oe){x=Y(function(){X(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(X){switch(A){case 1:case 2:case 3:var oe=3;break;default:oe=A}var ve=A;A=oe;try{return X()}finally{A=ve}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ve=A;A=X;try{return oe()}finally{A=ve}},i.unstable_scheduleCallback=function(X,oe,ve){var qe=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?qe+ve:qe):ve=qe,X){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ve+O,X={id:E++,callback:oe,priorityLevel:X,startTime:ve,expirationTime:O,sortIndex:-1},ve>qe?(X.sortIndex=ve,e(g,X),n(p)===null&&X===n(g)&&(Q?(se(x),x=-1):Q=!0,it(de,ve-qe))):(X.sortIndex=O,e(p,X),V||P||(V=!0,be||(be=!0,L()))),X},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(X){var oe=A;return function(){var ve=A;A=oe;try{return X.apply(this,arguments)}finally{A=ve}}}}(ym)),ym}var q_;function VA(){return q_||(q_=1,gm.exports=MA()),gm.exports}var vm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function PA(){if(H_)return nn;H_=1;var i=gp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,E){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:E}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(p,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,E)},nn.flushSync=function(p){var g=f.T,E=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=g,s.p=E,s.d.f()}},nn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},nn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},nn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,P=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;E==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:P}):E==="script"&&s.d.X(p,{crossOrigin:b,integrity:A,fetchPriority:P,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},nn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var E=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},nn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var E=g.as,b=m(E,g.crossOrigin);s.d.L(p,E,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},nn.preloadModule=function(p,g){if(typeof p=="string")if(g){var E=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},nn.requestFormReset=function(p){s.d.r(p)},nn.unstable_batchedUpdates=function(p,g){return p(g)},nn.useFormState=function(p,g,E){return f.H.useFormState(p,g,E)},nn.useFormStatus=function(){return f.H.useHostTransitionStatus()},nn.version="19.1.0",nn}var F_;function qE(){if(F_)return vm.exports;F_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),vm.exports=PA(),vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function kA(){if(G_)return Bl;G_=1;var i=VA(),e=gp(),n=qE();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function f(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,l=d;break}if(T===l){_=!0,l=h,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=h;break}if(T===l){_=!0,l=d,a=h;break}T=T.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case H:return"Profiler";case Q:return"StrictMode";case de:return"Suspense";case be:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case ie:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case pe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return r=t.displayName||null,r!==null?r:et(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return et(t(r))}catch{}}return null}var it=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},qe=[],O=-1;function te(t){return{current:t}}function le(t){0>O||(t.current=qe[O],qe[O]=null,O--)}function re(t,r){O++,qe[O]=t.current,t.current=r}var Te=te(null),De=te(null),_e=te(null),At=te(null);function Qe(t,r){switch(re(_e,r),re(De,t),re(Te,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?h_(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=h_(r),t=f_(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}le(Te),re(Te,t)}function pn(){le(Te),le(De),le(_e)}function fi(t){t.memoizedState!==null&&re(At,t);var r=Te.current,a=f_(r,t.type);r!==a&&(re(De,t),re(Te,a))}function Sn(t){De.current===t&&(le(Te),le(De)),At.current===t&&(le(At),Pl._currentValue=ve)}var di=Object.prototype.hasOwnProperty,Zn=i.unstable_scheduleCallback,mi=i.unstable_cancelCallback,Sr=i.unstable_shouldYield,Is=i.unstable_requestPaint,ln=i.unstable_now,Lo=i.unstable_getCurrentPriorityLevel,Ar=i.unstable_ImmediatePriority,Rr=i.unstable_UserBlockingPriority,zi=i.unstable_NormalPriority,Uo=i.unstable_LowPriority,Ir=i.unstable_IdlePriority,Cs=i.log,va=i.unstable_setDisableYieldValue,ft=null,Ye=null;function un(t){if(typeof Cs=="function"&&va(t),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ft,t)}catch{}}var Lt=Math.clz32?Math.clz32:Bi,_a=Math.log,jo=Math.LN2;function Bi(t){return t>>>=0,t===0?32:31-(_a(t)/jo|0)|0}var pi=256,qi=4194304;function gn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Hi(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=gn(l):(_&=T,_!==0?h=gn(_):a||(a=T&~t,a!==0&&(h=gn(a))))):(T=l&~d,T!==0?h=gn(T):_!==0?h=gn(_):a||(a=l&~t,a!==0&&(h=gn(a)))),h===0?0:r!==0&&r!==h&&(r&d)===0&&(d=h&-h,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:h}function Fi(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function q(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var t=pi;return pi<<=1,(pi&4194048)===0&&(pi=256),t}function ye(){var t=qi;return qi<<=1,(qi&62914560)===0&&(qi=4194304),t}function he(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function ge(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function We(t,r,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var W=31-Lt(a),J=1<<W;T[W]=0,D[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var $=G[W];$!==null&&($.lane&=-536870913)}a&=~J}l!==0&&pt(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~r))}function pt(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Lt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Pn(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Lt(a),h=1<<l;h&r|t[l]&r&&(t[l]|=r),a&=~h}}function $t(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ut(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yn(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:x_(t.type))}function Jn(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var lt=Math.random().toString(36).slice(2),ke="__reactFiber$"+lt,Le="__reactProps$"+lt,kn="__reactContainer$"+lt,zo="__reactEvents$"+lt,gf="__reactListeners$"+lt,Cr="__reactHandles$"+lt,Ou="__reactResources$"+lt,Ns="__reactMarker$"+lt;function Nr(t){delete t[ke],delete t[Le],delete t[zo],delete t[gf],delete t[Cr]}function Gi(t){var r=t[ke];if(r)return r;for(var a=t.parentNode;a;){if(r=a[kn]||a[ke]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=g_(t);t!==null;){if(a=t[ke])return a;t=g_(t)}return r}t=a,a=t.parentNode}return null}function gi(t){if(t=t[ke]||t[kn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function yi(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function cn(t){var r=t[Ou];return r||(r=t[Ou]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Et(t){t[Ns]=!0}var Bo=new Set,Ea={};function ei(t,r){$i(t,r),$i(t+"Capture",r)}function $i(t,r){for(Ea[t]=r,t=0;t<r.length;t++)Bo.add(r[t])}var Mu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vu={},Ds={};function Pu(t){return di.call(Ds,t)?!0:di.call(Vu,t)?!1:Mu.test(t)?Ds[t]=!0:(Vu[t]=!0,!1)}function Dr(t,r,a){if(Pu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function vi(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Kt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var xs,ku;function Ki(t){if(xs===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);xs=r&&r[1]||"",ku=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+t+ku}var Ta=!1;function wa(t,r){if(!t||Ta)return"";Ta=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch($){var G=$}Reflect.construct(t,[],J)}else{try{J.call()}catch($){G=$}t.call(J.prototype)}}else{try{throw Error()}catch($){G=$}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var D=_.split(`
`),F=T.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var W=`
`+D[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{Ta=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ki(a):""}function qo(t){switch(t.tag){case 26:case 27:case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 15:return wa(t.type,!1);case 11:return wa(t.type.render,!1);case 1:return wa(t.type,!0);case 31:return Ki("Activity");default:return""}}function ba(t){try{var r="";do r+=qo(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function hn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ho(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yf(t){var r=Ho(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Sa(t){t._valueTracker||(t._valueTracker=yf(t))}function Fo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ho(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Os(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var vf=/[\n"\\]/g;function Rt(t){return t.replace(vf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function An(t,r,a,l,h,d,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+hn(r)):t.value!==""+hn(r)&&(t.value=""+hn(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?xr(t,_,hn(r)):a!=null?xr(t,_,hn(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+hn(T):t.removeAttribute("name")}function Ms(t,r,a,l,h,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+hn(a):"",r=r!=null?""+hn(r):a,T||r===t.value||(t.value=r),t.defaultValue=r}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function xr(t,r,a){r==="number"&&Os(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Qi(t,r,a,l){if(t=t.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=r.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+hn(a),r=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function rt(t,r,a){if(r!=null&&(r=""+hn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+hn(a):""}function Vs(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(it(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=hn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Ln(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var Ps=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lu(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||Ps.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function Go(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in r)l=r[h],r.hasOwnProperty(h)&&a[h]!==l&&Lu(t,h,l)}else for(var d in r)r.hasOwnProperty(d)&&Lu(t,d,r[d])}function $o(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _f=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ef=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(t){return Ef.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Yi=null;function Un(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xi=null,Wi=null;function Ko(t){var r=gi(t);if(r&&(t=r.stateNode)){var a=t[Le]||null;e:switch(t=r.stateNode,r.type){case"input":if(An(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Rt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var h=l[Le]||null;if(!h)throw Error(s(90));An(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Fo(l)}break e;case"textarea":rt(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Qi(t,!!a.multiple,r,!1)}}}var _i=!1;function Uu(t,r,a){if(_i)return t(r,a);_i=!0;try{var l=t(r);return l}finally{if(_i=!1,(Xi!==null||Wi!==null)&&(xc(),Xi&&(r=Xi,t=Wi,Wi=Xi=null,Ko(r),t)))for(r=0;r<t.length;r++)Ko(t[r])}}function ks(t,r){var a=t.stateNode;if(a===null)return null;var l=a[Le]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jn=!1;if(ti)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){jn=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{jn=!1}var Ei=null,Or=null,Zi=null;function Qo(){if(Zi)return Zi;var t,r=Or,a=r.length,l,h="value"in Ei?Ei.value:Ei.textContent,d=h.length;for(t=0;t<a&&r[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&r[a-l]===h[d-l];l++);return Zi=h.slice(t,1<l?1-l:void 0)}function Ti(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function wi(){return!0}function Yo(){return!1}function jt(t){function r(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?wi:Yo,this.isPropagationStopped=Yo,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),r}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ra=jt(Ze),Us=E({},Ze,{view:0,detail:0}),ju=jt(Us),Ia,Ca,bi,js=E({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(Ia=t.screenX-bi.screenX,Ca=t.screenY-bi.screenY):Ca=Ia=0,bi=t),Ia)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),zn=jt(js),zu=E({},js,{dataTransfer:0}),Tf=jt(zu),zs=E({},Us,{relatedTarget:0}),Na=jt(zs),Xo=E({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),Da=jt(Xo),Bu=E({},Ze,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xa=jt(Bu),wf=E({},Ze,{data:0}),Wo=jt(wf),Bs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zo(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Hu[t])?!!r[t]:!1}function qs(){return Zo}var Fu=E({},Us,{key:function(t){if(t.key){var r=Bs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ti(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qs,charCode:function(t){return t.type==="keypress"?Ti(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ti(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Oa=jt(Fu),Gu=E({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=jt(Gu),Ji=E({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qs}),$u=jt(Ji),Ku=E({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qu=jt(Ku),Yu=E({},js,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ma=jt(Yu),fn=E({},Ze,{newState:0,oldState:0}),Xu=jt(fn),Wu=[9,13,27,32],Si=ti&&"CompositionEvent"in window,c=null;ti&&"documentMode"in document&&(c=document.documentMode);var y=ti&&"TextEvent"in window&&!c,v=ti&&(!Si||c&&8<c&&11>=c),w=" ",z=!1;function K(t,r){switch(t){case"keyup":return Wu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var He=!1;function xt(t,r){switch(t){case"compositionend":return ae(r);case"keypress":return r.which!==32?null:(z=!0,w);case"textInput":return t=r.data,t===w&&z?null:t;default:return null}}function Fe(t,r){if(He)return t==="compositionend"||!Si&&K(t,r)?(t=Qo(),Zi=Or=Ei=null,He=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return v&&r.locale!=="ko"?null:r.data;default:return null}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!zt[t.type]:r==="textarea"}function er(t,r,a,l){Xi?Wi?Wi.push(l):Wi=[l]:Xi=l,r=Lc(r,"onChange"),0<r.length&&(a=new Ra("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var Qt=null,Ai=null;function el(t){a_(t,0)}function Zu(t){var r=yi(t);if(Fo(r))return t}function Ig(t,r){if(t==="change")return r}var Cg=!1;if(ti){var bf;if(ti){var Sf="oninput"in document;if(!Sf){var Ng=document.createElement("div");Ng.setAttribute("oninput","return;"),Sf=typeof Ng.oninput=="function"}bf=Sf}else bf=!1;Cg=bf&&(!document.documentMode||9<document.documentMode)}function Dg(){Qt&&(Qt.detachEvent("onpropertychange",xg),Ai=Qt=null)}function xg(t){if(t.propertyName==="value"&&Zu(Ai)){var r=[];er(r,Ai,t,Un(t)),Uu(el,r)}}function aS(t,r,a){t==="focusin"?(Dg(),Qt=r,Ai=a,Qt.attachEvent("onpropertychange",xg)):t==="focusout"&&Dg()}function oS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(Ai)}function lS(t,r){if(t==="click")return Zu(r)}function uS(t,r){if(t==="input"||t==="change")return Zu(r)}function cS(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Rn=typeof Object.is=="function"?Object.is:cS;function tl(t,r){if(Rn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!di.call(r,h)||!Rn(t[h],r[h]))return!1}return!0}function Og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mg(t,r){var a=Og(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Og(a)}}function Vg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Vg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Pg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Os(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Os(t.document)}return r}function Af(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var hS=ti&&"documentMode"in document&&11>=document.documentMode,Va=null,Rf=null,nl=null,If=!1;function kg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;If||Va==null||Va!==Os(l)||(l=Va,"selectionStart"in l&&Af(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),nl&&tl(nl,l)||(nl=l,l=Lc(Rf,"onSelect"),0<l.length&&(r=new Ra("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Va)))}function Hs(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Pa={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},Cf={},Lg={};ti&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Fs(t){if(Cf[t])return Cf[t];if(!Pa[t])return t;var r=Pa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Lg)return Cf[t]=r[a];return t}var Ug=Fs("animationend"),jg=Fs("animationiteration"),zg=Fs("animationstart"),fS=Fs("transitionrun"),dS=Fs("transitionstart"),mS=Fs("transitioncancel"),Bg=Fs("transitionend"),qg=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function ni(t,r){qg.set(t,r),ei(r,[t])}var Hg=new WeakMap;function Bn(t,r){if(typeof t=="object"&&t!==null){var a=Hg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:ba(r)},Hg.set(t,r),r)}return{value:t,source:r,stack:ba(r)}}var qn=[],ka=0,Df=0;function Ju(){for(var t=ka,r=Df=ka=0;r<t;){var a=qn[r];qn[r++]=null;var l=qn[r];qn[r++]=null;var h=qn[r];qn[r++]=null;var d=qn[r];if(qn[r++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Fg(a,h,d)}}function ec(t,r,a,l){qn[ka++]=t,qn[ka++]=r,qn[ka++]=a,qn[ka++]=l,Df|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xf(t,r,a,l){return ec(t,r,a,l),tc(t)}function La(t,r){return ec(t,null,null,r),tc(t)}function Fg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&r!==null&&(h=31-Lt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[r]:l.push(r),r.lane=a|536870912),d):null}function tc(t){if(50<Il)throw Il=0,Ld=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ua={};function pS(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,r,a,l){return new pS(t,r,a,l)}function Of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tr(t,r){var a=t.alternate;return a===null?(a=In(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Gg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function nc(t,r,a,l,h,d){var _=0;if(l=t,typeof t=="function")Of(t)&&(_=1);else if(typeof t=="string")_=yA(t,a,Te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=In(31,a,r,h),t.elementType=I,t.lanes=d,t;case V:return Gs(a.children,h,d,r);case Q:_=8,h|=24;break;case H:return t=In(12,a,r,h|2),t.elementType=H,t.lanes=d,t;case de:return t=In(13,a,r,h),t.elementType=de,t.lanes=d,t;case be:return t=In(19,a,r,h),t.elementType=be,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case ie:_=10;break e;case se:_=9;break e;case pe:_=11;break e;case x:_=14;break e;case R:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=In(_,a,r,h),r.elementType=t,r.type=l,r.lanes=d,r}function Gs(t,r,a,l){return t=In(7,t,l,r),t.lanes=a,t}function Mf(t,r,a){return t=In(6,t,null,r),t.lanes=a,t}function Vf(t,r,a){return r=In(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var ja=[],za=0,ic=null,rc=0,Hn=[],Fn=0,$s=null,nr=1,ir="";function Ks(t,r){ja[za++]=rc,ja[za++]=ic,ic=t,rc=r}function $g(t,r,a){Hn[Fn++]=nr,Hn[Fn++]=ir,Hn[Fn++]=$s,$s=t;var l=nr;t=ir;var h=32-Lt(l)-1;l&=~(1<<h),a+=1;var d=32-Lt(r)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,nr=1<<32-Lt(r)+h|a<<h|l,ir=d+t}else nr=1<<d|a<<h|l,ir=t}function Pf(t){t.return!==null&&(Ks(t,1),$g(t,1,0))}function kf(t){for(;t===ic;)ic=ja[--za],ja[za]=null,rc=ja[--za],ja[za]=null;for(;t===$s;)$s=Hn[--Fn],Hn[Fn]=null,ir=Hn[--Fn],Hn[Fn]=null,nr=Hn[--Fn],Hn[Fn]=null}var dn=null,vt=null,Xe=!1,Qs=null,Ri=!1,Lf=Error(s(519));function Ys(t){var r=Error(s(418,""));throw sl(Bn(r,t)),Lf}function Kg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[ke]=t,r[Le]=l,a){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(a=0;a<Nl.length;a++)je(Nl[a],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":je("invalid",r),Ms(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Sa(r);break;case"select":je("invalid",r);break;case"textarea":je("invalid",r),Vs(r,l.value,l.defaultValue,l.children),Sa(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||c_(r.textContent,a)?(l.popover!=null&&(je("beforetoggle",r),je("toggle",r)),l.onScroll!=null&&je("scroll",r),l.onScrollEnd!=null&&je("scrollend",r),l.onClick!=null&&(r.onclick=Uc),r=!0):r=!1,r||Ys(t)}function Qg(t){for(dn=t.return;dn;)switch(dn.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:dn=dn.return}}function il(t){if(t!==dn)return!1;if(!Xe)return Qg(t),Xe=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Jd(t.type,t.memoizedProps)),a=!a),a&&vt&&Ys(t),Qg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){vt=ri(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}vt=null}}else r===27?(r=vt,Qr(t.type)?(t=im,im=null,vt=t):vt=r):vt=dn?ri(t.stateNode.nextSibling):null;return!0}function rl(){vt=dn=null,Xe=!1}function Yg(){var t=Qs;return t!==null&&(En===null?En=t:En.push.apply(En,t),Qs=null),t}function sl(t){Qs===null?Qs=[t]:Qs.push(t)}var Uf=te(null),Xs=null,rr=null;function Mr(t,r,a){re(Uf,r._currentValue),r._currentValue=a}function sr(t){t._currentValue=Uf.current,le(Uf)}function jf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function zf(t,r,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var D=0;D<r.length;D++)if(T.context===r[D]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),jf(d.return,a,t),l||(_=null);break e}d=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),jf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function al(t,r,a,l){t=null;for(var h=r,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var T=h.type;Rn(h.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(h===At.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}h=h.return}t!==null&&zf(r,t,a,l),r.flags|=262144}function sc(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ws(t){Xs=t,rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function tn(t){return Xg(Xs,t)}function ac(t,r){return Xs===null&&Ws(t),Xg(t,r)}function Xg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},rr===null){if(t===null)throw Error(s(308));rr=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else rr=rr.next=r;return a}var gS=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},yS=i.unstable_scheduleCallback,vS=i.unstable_NormalPriority,Mt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new gS,data:new Map,refCount:0}}function ol(t){t.refCount--,t.refCount===0&&yS(vS,function(){t.controller.abort()})}var ll=null,qf=0,Ba=0,qa=null;function _S(t,r){if(ll===null){var a=ll=[];qf=0,Ba=Fd(),qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return qf++,r.then(Wg,Wg),r}function Wg(){if(--qf===0&&ll!==null){qa!==null&&(qa.status="fulfilled");var t=ll;ll=null,Ba=0,qa=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function ES(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var h=0;h<a.length;h++)(0,a[h])(r)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Zg=X.S;X.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&_S(t,r),Zg!==null&&Zg(t,r)};var Zs=te(null);function Hf(){var t=Zs.current;return t!==null?t:ct.pooledCache}function oc(t,r){r===null?re(Zs,Zs.current):re(Zs,r.pool)}function Jg(){var t=Hf();return t===null?null:{parent:Mt._currentValue,pool:t}}var ul=Error(s(460)),ey=Error(s(474)),lc=Error(s(542)),Ff={then:function(){}};function ty(t){return t=t.status,t==="fulfilled"||t==="rejected"}function uc(){}function ny(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(uc,uc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ry(t),t;default:if(typeof r.status=="string")r.then(uc,uc);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=l}},function(l){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ry(t),t}throw cl=r,ul}}var cl=null;function iy(){if(cl===null)throw Error(s(459));var t=cl;return cl=null,t}function ry(t){if(t===ul||t===lc)throw Error(s(483))}var Vr=!1;function Gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Pr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function kr(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(tt&2)!==0){var h=l.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r,r=tc(t),Fg(t,null,a),r}return ec(t,l,r,a),tc(t)}function hl(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pn(t,a)}}function Kf(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=r:d=d.next=r}else h=d=r;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Qf=!1;function fl(){if(Qf){var t=qa;if(t!==null)throw t}}function dl(t,r,a,l){Qf=!1;var h=t.updateQueue;Vr=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var D=T,F=D.next;D.next=null,_===null?d=F:_.next=F,_=D;var W=t.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=F:T.next=F,W.lastBaseUpdate=D))}if(d!==null){var J=h.baseState;_=0,W=F=D=null,T=d;do{var G=T.lane&-536870913,$=G!==T.lane;if($?(Ge&G)===G:(l&G)===G){G!==0&&G===Ba&&(Qf=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ie=t,Se=T;G=r;var ot=a;switch(Se.tag){case 1:if(Ie=Se.payload,typeof Ie=="function"){J=Ie.call(ot,J,G);break e}J=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Se.payload,G=typeof Ie=="function"?Ie.call(ot,J,G):Ie,G==null)break e;J=E({},J,G);break e;case 2:Vr=!0}}G=T.callback,G!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[G]:$.push(G))}else $={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(F=W=$,D=J):W=W.next=$,_|=G;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;$=T,T=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);W===null&&(D=J),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=W,d===null&&(h.shared.lanes=0),Fr|=_,t.lanes=_,t.memoizedState=J}}function sy(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function ay(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)sy(a[t],r)}var Ha=te(null),cc=te(0);function oy(t,r){t=fr,re(cc,t),re(Ha,r),fr=t|r.baseLanes}function Yf(){re(cc,fr),re(Ha,Ha.current)}function Xf(){fr=cc.current,le(Ha),le(cc)}var Lr=0,Me=null,st=null,It=null,hc=!1,Fa=!1,Js=!1,fc=0,ml=0,Ga=null,TS=0;function Tt(){throw Error(s(321))}function Wf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!Rn(t[a],r[a]))return!1;return!0}function Zf(t,r,a,l,h,d){return Lr=d,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=t===null||t.memoizedState===null?Fy:Gy,Js=!1,d=a(l,h),Js=!1,Fa&&(d=uy(r,a,l,h)),ly(t),d}function ly(t){X.H=vc;var r=st!==null&&st.next!==null;if(Lr=0,It=st=Me=null,hc=!1,ml=0,Ga=null,r)throw Error(s(300));t===null||Bt||(t=t.dependencies,t!==null&&sc(t)&&(Bt=!0))}function uy(t,r,a,l){Me=t;var h=0;do{if(Fa&&(Ga=null),ml=0,Fa=!1,25<=h)throw Error(s(301));if(h+=1,It=st=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=CS,d=r(a,l)}while(Fa);return d}function wS(){var t=X.H,r=t.useState()[0];return r=typeof r.then=="function"?pl(r):r,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(Me.flags|=1024),r}function Jf(){var t=fc!==0;return fc=0,t}function ed(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function td(t){if(hc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}hc=!1}Lr=0,It=st=Me=null,Fa=!1,ml=fc=0,Ga=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Me.memoizedState=It=t:It=It.next=t,It}function Ct(){if(st===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var r=It===null?Me.memoizedState:It.next;if(r!==null)It=r,st=t;else{if(t===null)throw Me.alternate===null?Error(s(467)):Error(s(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},It===null?Me.memoizedState=It=t:It=It.next=t}return It}function nd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(t){var r=ml;return ml+=1,Ga===null&&(Ga=[]),t=ny(Ga,t,r),r=Me,(It===null?r.memoizedState:It.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Fy:Gy),t}function dc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pl(t);if(t.$$typeof===ie)return tn(t)}throw Error(s(438,String(t)))}function id(t){var r=null,a=Me.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=nd(),Me.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=N;return r.index++,a}function ar(t,r){return typeof r=="function"?r(t):r}function mc(t){var r=Ct();return rd(r,st,t)}function rd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}r.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{r=h.next;var T=_=null,D=null,F=r,W=!1;do{var J=F.lane&-536870913;if(J!==F.lane?(Ge&J)===J:(Lr&J)===J){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),J===Ba&&(W=!0);else if((Lr&G)===G){F=F.next,G===Ba&&(W=!0);continue}else J={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=J,_=d):D=D.next=J,Me.lanes|=G,Fr|=G;J=F.action,Js&&a(d,J),d=F.hasEagerState?F.eagerState:a(d,J)}else G={lane:J,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=G,_=d):D=D.next=G,Me.lanes|=J,Fr|=J;F=F.next}while(F!==null&&F!==r);if(D===null?_=d:D.next=T,!Rn(d,t.memoizedState)&&(Bt=!0,W&&(a=qa,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=D,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function sd(t){var r=Ct(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);Rn(d,r.memoizedState)||(Bt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function cy(t,r,a){var l=Me,h=Ct(),d=Xe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var _=!Rn((st||h).memoizedState,a);_&&(h.memoizedState=a,Bt=!0),h=h.queue;var T=dy.bind(null,l,h,t);if(gl(2048,8,T,[t]),h.getSnapshot!==r||_||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,$a(9,pc(),fy.bind(null,l,h,a,r),null),ct===null)throw Error(s(349));d||(Lr&124)!==0||hy(l,r,a)}return a}function hy(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=Me.updateQueue,r===null?(r=nd(),Me.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function fy(t,r,a,l){r.value=a,r.getSnapshot=l,my(r)&&py(t)}function dy(t,r,a){return a(function(){my(r)&&py(t)})}function my(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!Rn(t,a)}catch{return!0}}function py(t){var r=La(t,2);r!==null&&On(r,t,2)}function ad(t){var r=vn();if(typeof t=="function"){var a=t;if(t=a(),Js){un(!0);try{a()}finally{un(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:t},r}function gy(t,r,a,l){return t.baseState=a,rd(t,st,typeof l=="function"?l:ar)}function bS(t,r,a,l,h){if(yc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,yy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function yy(t,r){var a=r.action,l=r.payload,h=t.state;if(r.isTransition){var d=X.T,_={};X.T=_;try{var T=a(h,l),D=X.S;D!==null&&D(_,T),vy(t,r,T)}catch(F){od(t,r,F)}finally{X.T=d}}else try{d=a(h,l),vy(t,r,d)}catch(F){od(t,r,F)}}function vy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){_y(t,r,l)},function(l){return od(t,r,l)}):_y(t,r,a)}function _y(t,r,a){r.status="fulfilled",r.value=a,Ey(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,yy(t,a)))}function od(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Ey(r),r=r.next;while(r!==l)}t.action=null}function Ey(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Ty(t,r){return r}function wy(t,r){if(Xe){var a=ct.formState;if(a!==null){e:{var l=Me;if(Xe){if(vt){t:{for(var h=vt,d=Ri;h.nodeType!==8;){if(!d){h=null;break t}if(h=ri(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){vt=ri(h.nextSibling),l=h.data==="F!";break e}}Ys(l)}l=!1}l&&(r=a[0])}}return a=vn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ty,lastRenderedState:r},a.queue=l,a=By.bind(null,Me,l),l.dispatch=a,l=ad(!1),d=fd.bind(null,Me,!1,l.queue),l=vn(),h={state:r,dispatch:null,action:t,pending:null},l.queue=h,a=bS.bind(null,Me,h,d,a),h.dispatch=a,l.memoizedState=t,[r,a,!1]}function by(t){var r=Ct();return Sy(r,st,t)}function Sy(t,r,a){if(r=rd(t,r,Ty)[0],t=mc(ar)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=pl(r)}catch(_){throw _===ul?lc:_}else l=r;r=Ct();var h=r.queue,d=h.dispatch;return a!==r.memoizedState&&(Me.flags|=2048,$a(9,pc(),SS.bind(null,h,a),null)),[l,d,t]}function SS(t,r){t.action=r}function Ay(t){var r=Ct(),a=st;if(a!==null)return Sy(r,a,t);Ct(),r=r.memoizedState,a=Ct();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function $a(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=Me.updateQueue,r===null&&(r=nd(),Me.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function pc(){return{destroy:void 0,resource:void 0}}function Ry(){return Ct().memoizedState}function gc(t,r,a,l){var h=vn();l=l===void 0?null:l,Me.flags|=t,h.memoizedState=$a(1|r,pc(),a,l)}function gl(t,r,a,l){var h=Ct();l=l===void 0?null:l;var d=h.memoizedState.inst;st!==null&&l!==null&&Wf(l,st.memoizedState.deps)?h.memoizedState=$a(r,d,a,l):(Me.flags|=t,h.memoizedState=$a(1|r,d,a,l))}function Iy(t,r){gc(8390656,8,t,r)}function Cy(t,r){gl(2048,8,t,r)}function Ny(t,r){return gl(4,2,t,r)}function Dy(t,r){return gl(4,4,t,r)}function xy(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Oy(t,r,a){a=a!=null?a.concat([t]):null,gl(4,4,xy.bind(null,r,t),a)}function ld(){}function My(t,r){var a=Ct();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Wf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Vy(t,r){var a=Ct();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Wf(r,l[1]))return l[0];if(l=t(),Js){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,r],l}function ud(t,r,a){return a===void 0||(Lr&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=Lv(),Me.lanes|=t,Fr|=t,a)}function Py(t,r,a,l){return Rn(a,r)?a:Ha.current!==null?(t=ud(t,a,l),Rn(t,r)||(Bt=!0),t):(Lr&42)===0?(Bt=!0,t.memoizedState=a):(t=Lv(),Me.lanes|=t,Fr|=t,r)}function ky(t,r,a,l,h){var d=oe.p;oe.p=d!==0&&8>d?d:8;var _=X.T,T={};X.T=T,fd(t,!1,r,a);try{var D=h(),F=X.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=ES(D,l);yl(t,r,W,xn(t))}else yl(t,r,l,xn(t))}catch(J){yl(t,r,{then:function(){},status:"rejected",reason:J},xn())}finally{oe.p=d,X.T=_}}function AS(){}function cd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var h=Ly(t).queue;ky(t,h,r,ve,a===null?AS:function(){return Uy(t),a(l)})}function Ly(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Uy(t){var r=Ly(t).next.queue;yl(t,r,{},xn())}function hd(){return tn(Pl)}function jy(){return Ct().memoizedState}function zy(){return Ct().memoizedState}function RS(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=xn();t=Pr(a);var l=kr(r,t,a);l!==null&&(On(l,r,a),hl(l,r,a)),r={cache:Bf()},t.payload=r;return}r=r.return}}function IS(t,r,a){var l=xn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},yc(t)?qy(r,a):(a=xf(t,r,a,l),a!==null&&(On(a,t,l),Hy(a,r,l)))}function By(t,r,a){var l=xn();yl(t,r,a,l)}function yl(t,r,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(yc(t))qy(r,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var _=r.lastRenderedState,T=d(_,a);if(h.hasEagerState=!0,h.eagerState=T,Rn(T,_))return ec(t,r,h,0),ct===null&&Ju(),!1}catch{}finally{}if(a=xf(t,r,h,l),a!==null)return On(a,t,l),Hy(a,r,l),!0}return!1}function fd(t,r,a,l){if(l={lane:2,revertLane:Fd(),action:l,hasEagerState:!1,eagerState:null,next:null},yc(t)){if(r)throw Error(s(479))}else r=xf(t,a,l,2),r!==null&&On(r,t,2)}function yc(t){var r=t.alternate;return t===Me||r!==null&&r===Me}function qy(t,r){Fa=hc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function Hy(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,Pn(t,a)}}var vc={readContext:tn,use:dc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},Fy={readContext:tn,use:dc,useCallback:function(t,r){return vn().memoizedState=[t,r===void 0?null:r],t},useContext:tn,useEffect:Iy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,gc(4194308,4,xy.bind(null,r,t),a)},useLayoutEffect:function(t,r){return gc(4194308,4,t,r)},useInsertionEffect:function(t,r){gc(4,2,t,r)},useMemo:function(t,r){var a=vn();r=r===void 0?null:r;var l=t();if(Js){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=vn();if(a!==void 0){var h=a(r);if(Js){un(!0);try{a(r)}finally{un(!1)}}}else h=r;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=IS.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var r=vn();return t={current:t},r.memoizedState=t},useState:function(t){t=ad(t);var r=t.queue,a=By.bind(null,Me,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:ld,useDeferredValue:function(t,r){var a=vn();return ud(a,t,r)},useTransition:function(){var t=ad(!1);return t=ky.bind(null,Me,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=Me,h=vn();if(Xe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ct===null)throw Error(s(349));(Ge&124)!==0||hy(l,r,a)}h.memoizedState=a;var d={value:a,getSnapshot:r};return h.queue=d,Iy(dy.bind(null,l,d,t),[t]),l.flags|=2048,$a(9,pc(),fy.bind(null,l,d,a,r),null),a},useId:function(){var t=vn(),r=ct.identifierPrefix;if(Xe){var a=ir,l=nr;a=(l&~(1<<32-Lt(l)-1)).toString(32)+a,r=""+r+"R"+a,a=fc++,0<a&&(r+="H"+a.toString(32)),r+=""}else a=TS++,r=""+r+"r"+a.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:hd,useFormState:wy,useActionState:wy,useOptimistic:function(t){var r=vn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=fd.bind(null,Me,!0,a),a.dispatch=r,[t,r]},useMemoCache:id,useCacheRefresh:function(){return vn().memoizedState=RS.bind(null,Me)}},Gy={readContext:tn,use:dc,useCallback:My,useContext:tn,useEffect:Cy,useImperativeHandle:Oy,useInsertionEffect:Ny,useLayoutEffect:Dy,useMemo:Vy,useReducer:mc,useRef:Ry,useState:function(){return mc(ar)},useDebugValue:ld,useDeferredValue:function(t,r){var a=Ct();return Py(a,st.memoizedState,t,r)},useTransition:function(){var t=mc(ar)[0],r=Ct().memoizedState;return[typeof t=="boolean"?t:pl(t),r]},useSyncExternalStore:cy,useId:jy,useHostTransitionStatus:hd,useFormState:by,useActionState:by,useOptimistic:function(t,r){var a=Ct();return gy(a,st,t,r)},useMemoCache:id,useCacheRefresh:zy},CS={readContext:tn,use:dc,useCallback:My,useContext:tn,useEffect:Cy,useImperativeHandle:Oy,useInsertionEffect:Ny,useLayoutEffect:Dy,useMemo:Vy,useReducer:sd,useRef:Ry,useState:function(){return sd(ar)},useDebugValue:ld,useDeferredValue:function(t,r){var a=Ct();return st===null?ud(a,t,r):Py(a,st.memoizedState,t,r)},useTransition:function(){var t=sd(ar)[0],r=Ct().memoizedState;return[typeof t=="boolean"?t:pl(t),r]},useSyncExternalStore:cy,useId:jy,useHostTransitionStatus:hd,useFormState:Ay,useActionState:Ay,useOptimistic:function(t,r){var a=Ct();return st!==null?gy(a,st,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:id,useCacheRefresh:zy},Ka=null,vl=0;function _c(t){var r=vl;return vl+=1,Ka===null&&(Ka=[]),ny(Ka,t,r)}function _l(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Ec(t,r){throw r.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function $y(t){var r=t._init;return r(t._payload)}function Ky(t){function r(j,k){if(t){var B=j.deletions;B===null?(j.deletions=[k],j.flags|=16):B.push(k)}}function a(j,k){if(!t)return null;for(;k!==null;)r(j,k),k=k.sibling;return null}function l(j){for(var k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function h(j,k){return j=tr(j,k),j.index=0,j.sibling=null,j}function d(j,k,B){return j.index=B,t?(B=j.alternate,B!==null?(B=B.index,B<k?(j.flags|=67108866,k):B):(j.flags|=67108866,k)):(j.flags|=1048576,k)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,k,B,Z){return k===null||k.tag!==6?(k=Mf(B,j.mode,Z),k.return=j,k):(k=h(k,B),k.return=j,k)}function D(j,k,B,Z){var me=B.type;return me===V?W(j,k,B.props.children,Z,B.key):k!==null&&(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&$y(me)===k.type)?(k=h(k,B.props),_l(k,B),k.return=j,k):(k=nc(B.type,B.key,B.props,null,j.mode,Z),_l(k,B),k.return=j,k)}function F(j,k,B,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==B.containerInfo||k.stateNode.implementation!==B.implementation?(k=Vf(B,j.mode,Z),k.return=j,k):(k=h(k,B.children||[]),k.return=j,k)}function W(j,k,B,Z,me){return k===null||k.tag!==7?(k=Gs(B,j.mode,Z,me),k.return=j,k):(k=h(k,B),k.return=j,k)}function J(j,k,B){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Mf(""+k,j.mode,B),k.return=j,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return B=nc(k.type,k.key,k.props,null,j.mode,B),_l(B,k),B.return=j,B;case P:return k=Vf(k,j.mode,B),k.return=j,k;case R:var Z=k._init;return k=Z(k._payload),J(j,k,B)}if(it(k)||L(k))return k=Gs(k,j.mode,B,null),k.return=j,k;if(typeof k.then=="function")return J(j,_c(k),B);if(k.$$typeof===ie)return J(j,ac(j,k),B);Ec(j,k)}return null}function G(j,k,B,Z){var me=k!==null?k.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return me!==null?null:T(j,k,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case A:return B.key===me?D(j,k,B,Z):null;case P:return B.key===me?F(j,k,B,Z):null;case R:return me=B._init,B=me(B._payload),G(j,k,B,Z)}if(it(B)||L(B))return me!==null?null:W(j,k,B,Z,null);if(typeof B.then=="function")return G(j,k,_c(B),Z);if(B.$$typeof===ie)return G(j,k,ac(j,B),Z);Ec(j,B)}return null}function $(j,k,B,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return j=j.get(B)||null,T(k,j,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return j=j.get(Z.key===null?B:Z.key)||null,D(k,j,Z,me);case P:return j=j.get(Z.key===null?B:Z.key)||null,F(k,j,Z,me);case R:var Pe=Z._init;return Z=Pe(Z._payload),$(j,k,B,Z,me)}if(it(Z)||L(Z))return j=j.get(B)||null,W(k,j,Z,me,null);if(typeof Z.then=="function")return $(j,k,B,_c(Z),me);if(Z.$$typeof===ie)return $(j,k,B,ac(k,Z),me);Ec(k,Z)}return null}function Ie(j,k,B,Z){for(var me=null,Pe=null,Ee=k,Ae=k=0,Ht=null;Ee!==null&&Ae<B.length;Ae++){Ee.index>Ae?(Ht=Ee,Ee=null):Ht=Ee.sibling;var Ke=G(j,Ee,B[Ae],Z);if(Ke===null){Ee===null&&(Ee=Ht);break}t&&Ee&&Ke.alternate===null&&r(j,Ee),k=d(Ke,k,Ae),Pe===null?me=Ke:Pe.sibling=Ke,Pe=Ke,Ee=Ht}if(Ae===B.length)return a(j,Ee),Xe&&Ks(j,Ae),me;if(Ee===null){for(;Ae<B.length;Ae++)Ee=J(j,B[Ae],Z),Ee!==null&&(k=d(Ee,k,Ae),Pe===null?me=Ee:Pe.sibling=Ee,Pe=Ee);return Xe&&Ks(j,Ae),me}for(Ee=l(Ee);Ae<B.length;Ae++)Ht=$(Ee,j,Ae,B[Ae],Z),Ht!==null&&(t&&Ht.alternate!==null&&Ee.delete(Ht.key===null?Ae:Ht.key),k=d(Ht,k,Ae),Pe===null?me=Ht:Pe.sibling=Ht,Pe=Ht);return t&&Ee.forEach(function(Jr){return r(j,Jr)}),Xe&&Ks(j,Ae),me}function Se(j,k,B,Z){if(B==null)throw Error(s(151));for(var me=null,Pe=null,Ee=k,Ae=k=0,Ht=null,Ke=B.next();Ee!==null&&!Ke.done;Ae++,Ke=B.next()){Ee.index>Ae?(Ht=Ee,Ee=null):Ht=Ee.sibling;var Jr=G(j,Ee,Ke.value,Z);if(Jr===null){Ee===null&&(Ee=Ht);break}t&&Ee&&Jr.alternate===null&&r(j,Ee),k=d(Jr,k,Ae),Pe===null?me=Jr:Pe.sibling=Jr,Pe=Jr,Ee=Ht}if(Ke.done)return a(j,Ee),Xe&&Ks(j,Ae),me;if(Ee===null){for(;!Ke.done;Ae++,Ke=B.next())Ke=J(j,Ke.value,Z),Ke!==null&&(k=d(Ke,k,Ae),Pe===null?me=Ke:Pe.sibling=Ke,Pe=Ke);return Xe&&Ks(j,Ae),me}for(Ee=l(Ee);!Ke.done;Ae++,Ke=B.next())Ke=$(Ee,j,Ae,Ke.value,Z),Ke!==null&&(t&&Ke.alternate!==null&&Ee.delete(Ke.key===null?Ae:Ke.key),k=d(Ke,k,Ae),Pe===null?me=Ke:Pe.sibling=Ke,Pe=Ke);return t&&Ee.forEach(function(NA){return r(j,NA)}),Xe&&Ks(j,Ae),me}function ot(j,k,B,Z){if(typeof B=="object"&&B!==null&&B.type===V&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case A:e:{for(var me=B.key;k!==null;){if(k.key===me){if(me=B.type,me===V){if(k.tag===7){a(j,k.sibling),Z=h(k,B.props.children),Z.return=j,j=Z;break e}}else if(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&$y(me)===k.type){a(j,k.sibling),Z=h(k,B.props),_l(Z,B),Z.return=j,j=Z;break e}a(j,k);break}else r(j,k);k=k.sibling}B.type===V?(Z=Gs(B.props.children,j.mode,Z,B.key),Z.return=j,j=Z):(Z=nc(B.type,B.key,B.props,null,j.mode,Z),_l(Z,B),Z.return=j,j=Z)}return _(j);case P:e:{for(me=B.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===B.containerInfo&&k.stateNode.implementation===B.implementation){a(j,k.sibling),Z=h(k,B.children||[]),Z.return=j,j=Z;break e}else{a(j,k);break}else r(j,k);k=k.sibling}Z=Vf(B,j.mode,Z),Z.return=j,j=Z}return _(j);case R:return me=B._init,B=me(B._payload),ot(j,k,B,Z)}if(it(B))return Ie(j,k,B,Z);if(L(B)){if(me=L(B),typeof me!="function")throw Error(s(150));return B=me.call(B),Se(j,k,B,Z)}if(typeof B.then=="function")return ot(j,k,_c(B),Z);if(B.$$typeof===ie)return ot(j,k,ac(j,B),Z);Ec(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,k!==null&&k.tag===6?(a(j,k.sibling),Z=h(k,B),Z.return=j,j=Z):(a(j,k),Z=Mf(B,j.mode,Z),Z.return=j,j=Z),_(j)):a(j,k)}return function(j,k,B,Z){try{vl=0;var me=ot(j,k,B,Z);return Ka=null,me}catch(Ee){if(Ee===ul||Ee===lc)throw Ee;var Pe=In(29,Ee,null,j.mode);return Pe.lanes=Z,Pe.return=j,Pe}finally{}}}var Qa=Ky(!0),Qy=Ky(!1),Gn=te(null),Ii=null;function Ur(t){var r=t.alternate;re(Vt,Vt.current&1),re(Gn,t),Ii===null&&(r===null||Ha.current!==null||r.memoizedState!==null)&&(Ii=t)}function Yy(t){if(t.tag===22){if(re(Vt,Vt.current),re(Gn,t),Ii===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ii=t)}}else jr()}function jr(){re(Vt,Vt.current),re(Gn,Gn.current)}function or(t){le(Gn),Ii===t&&(Ii=null),le(Vt)}var Vt=te(0);function Tc(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||nm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function dd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:E({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var md={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=xn(),h=Pr(l);h.payload=r,a!=null&&(h.callback=a),r=kr(t,h,l),r!==null&&(On(r,t,l),hl(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=xn(),h=Pr(l);h.tag=1,h.payload=r,a!=null&&(h.callback=a),r=kr(t,h,l),r!==null&&(On(r,t,l),hl(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=xn(),l=Pr(a);l.tag=2,r!=null&&(l.callback=r),r=kr(t,l,a),r!==null&&(On(r,t,a),hl(r,t,a))}};function Xy(t,r,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):r.prototype&&r.prototype.isPureReactComponent?!tl(a,l)||!tl(h,d):!0}function Wy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&md.enqueueReplaceState(r,r.state,null)}function ea(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var wc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Zy(t){wc(t)}function Jy(t){console.error(t)}function ev(t){wc(t)}function bc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function tv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function pd(t,r,a){return a=Pr(a),a.tag=3,a.payload={element:null},a.callback=function(){bc(t,r)},a}function nv(t){return t=Pr(t),t.tag=3,t}function iv(t,r,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){tv(r,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){tv(r,a,l),typeof h!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function NS(t,r,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&al(r,a,h,!0),a=Gn.current,a!==null){switch(a.tag){case 13:return Ii===null?jd():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Ff?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Bd(t,l,h)),!1;case 22:return a.flags|=65536,l===Ff?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Bd(t,l,h)),!1}throw Error(s(435,a.tag))}return Bd(t,l,h),jd(),!1}if(Xe)return r=Gn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,l!==Lf&&(t=Error(s(422),{cause:l}),sl(Bn(t,a)))):(l!==Lf&&(r=Error(s(423),{cause:l}),sl(Bn(r,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Bn(l,a),h=pd(t.stateNode,l,h),Kf(t,h),_t!==4&&(_t=2)),!1;var d=Error(s(520),{cause:l});if(d=Bn(d,a),Rl===null?Rl=[d]:Rl.push(d),_t!==4&&(_t=2),r===null)return!0;l=Bn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=pd(a.stateNode,l,t),Kf(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Gr===null||!Gr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=nv(h),iv(h,t,a,l),Kf(a,h),!1}a=a.return}while(a!==null);return!1}var rv=Error(s(461)),Bt=!1;function Yt(t,r,a,l){r.child=t===null?Qy(r,null,a,l):Qa(r,t.child,a,l)}function sv(t,r,a,l,h){a=a.render;var d=r.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Ws(r),l=Zf(t,r,a,_,d,h),T=Jf(),t!==null&&!Bt?(ed(t,r,h),lr(t,r,h)):(Xe&&T&&Pf(r),r.flags|=1,Yt(t,r,l,h),r.child)}function av(t,r,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Of(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,ov(t,r,d,l,h)):(t=nc(a.type,null,l,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!bd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:tl,a(_,l)&&t.ref===r.ref)return lr(t,r,h)}return r.flags|=1,t=tr(d,l),t.ref=r.ref,t.return=r,r.child=t}function ov(t,r,a,l,h){if(t!==null){var d=t.memoizedProps;if(tl(d,l)&&t.ref===r.ref)if(Bt=!1,r.pendingProps=l=d,bd(t,h))(t.flags&131072)!==0&&(Bt=!0);else return r.lanes=t.lanes,lr(t,r,h)}return gd(t,r,a,l,h)}function lv(t,r,a){var l=r.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=r.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return uv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&oc(r,d!==null?d.cachePool:null),d!==null?oy(r,d):Yf(),Yy(r);else return r.lanes=r.childLanes=536870912,uv(t,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(oc(r,d.cachePool),oy(r,d),jr(),r.memoizedState=null):(t!==null&&oc(r,null),Yf(),jr());return Yt(t,r,h,a),r.child}function uv(t,r,a,l){var h=Hf();return h=h===null?null:{parent:Mt._currentValue,pool:h},r.memoizedState={baseLanes:a,cachePool:h},t!==null&&oc(r,null),Yf(),Yy(r),t!==null&&al(t,r,l,!0),null}function Sc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function gd(t,r,a,l,h){return Ws(r),a=Zf(t,r,a,l,void 0,h),l=Jf(),t!==null&&!Bt?(ed(t,r,h),lr(t,r,h)):(Xe&&l&&Pf(r),r.flags|=1,Yt(t,r,a,h),r.child)}function cv(t,r,a,l,h,d){return Ws(r),r.updateQueue=null,a=uy(r,l,a,h),ly(t),l=Jf(),t!==null&&!Bt?(ed(t,r,d),lr(t,r,d)):(Xe&&l&&Pf(r),r.flags|=1,Yt(t,r,a,d),r.child)}function hv(t,r,a,l,h){if(Ws(r),r.stateNode===null){var d=Ua,_=a.contextType;typeof _=="object"&&_!==null&&(d=tn(_)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=md,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Gf(r),_=a.contextType,d.context=typeof _=="object"&&_!==null?tn(_):Ua,d.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(dd(r,a,_,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&md.enqueueReplaceState(d,d.state,null),dl(r,l,d,h),fl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var T=r.memoizedProps,D=ea(a,T);d.props=D;var F=d.context,W=a.contextType;_=Ua,typeof W=="object"&&W!==null&&(_=tn(W));var J=a.getDerivedStateFromProps;W=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,W||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||F!==_)&&Wy(r,d,l,_),Vr=!1;var G=r.memoizedState;d.state=G,dl(r,l,d,h),fl(),F=r.memoizedState,T||G!==F||Vr?(typeof J=="function"&&(dd(r,a,J,l),F=r.memoizedState),(D=Vr||Xy(r,a,D,l,G,F,_))?(W||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),d.props=l,d.state=F,d.context=_,l=D):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,$f(t,r),_=r.memoizedProps,W=ea(a,_),d.props=W,J=r.pendingProps,G=d.context,F=a.contextType,D=Ua,typeof F=="object"&&F!==null&&(D=tn(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==J||G!==D)&&Wy(r,d,l,D),Vr=!1,G=r.memoizedState,d.state=G,dl(r,l,d,h),fl();var $=r.memoizedState;_!==J||G!==$||Vr||t!==null&&t.dependencies!==null&&sc(t.dependencies)?(typeof T=="function"&&(dd(r,a,T,l),$=r.memoizedState),(W=Vr||Xy(r,a,W,l,G,$,D)||t!==null&&t.dependencies!==null&&sc(t.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,D)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),d.props=l,d.state=$,d.context=D,l=W):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&G===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,Sc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=Qa(r,t.child,null,h),r.child=Qa(r,null,a,h)):Yt(t,r,a,h),r.memoizedState=d.state,t=r.child):t=lr(t,r,h),t}function fv(t,r,a,l){return rl(),r.flags|=256,Yt(t,r,a,l),r.child}var yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vd(t){return{baseLanes:t,cachePool:Jg()}}function _d(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=$n),t}function dv(t,r,a){var l=r.pendingProps,h=!1,d=(r.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if(Xe){if(h?Ur(r):jr(),Xe){var T=vt,D;if(D=T){e:{for(D=T,T=Ri;D.nodeType!==8;){if(!T){T=null;break e}if(D=ri(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(r.memoizedState={dehydrated:T,treeContext:$s!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},D=In(18,null,null,0),D.stateNode=T,D.return=r,r.child=D,dn=r,vt=null,D=!0):D=!1}D||Ys(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return nm(T)?r.lanes=32:r.lanes=536870912,null;or(r)}return T=l.children,l=l.fallback,h?(jr(),h=r.mode,T=Ac({mode:"hidden",children:T},h),l=Gs(l,h,a,null),T.return=r,l.return=r,T.sibling=l,r.child=T,h=r.child,h.memoizedState=vd(a),h.childLanes=_d(t,_,a),r.memoizedState=yd,l):(Ur(r),Ed(r,T))}if(D=t.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(d)r.flags&256?(Ur(r),r.flags&=-257,r=Td(t,r,a)):r.memoizedState!==null?(jr(),r.child=t.child,r.flags|=128,r=null):(jr(),h=l.fallback,T=r.mode,l=Ac({mode:"visible",children:l.children},T),h=Gs(h,T,a,null),h.flags|=2,l.return=r,h.return=r,l.sibling=h,r.child=l,Qa(r,t.child,null,a),l=r.child,l.memoizedState=vd(a),l.childLanes=_d(t,_,a),r.memoizedState=yd,r=h);else if(Ur(r),nm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,sl({value:l,source:null,stack:null}),r=Td(t,r,a)}else if(Bt||al(t,r,a,!1),_=(a&t.childLanes)!==0,Bt||_){if(_=ct,_!==null&&(l=a&-a,l=(l&42)!==0?1:$t(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,La(t,l),On(_,t,l),rv;T.data==="$?"||jd(),r=Td(t,r,a)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,vt=ri(T.nextSibling),dn=r,Xe=!0,Qs=null,Ri=!1,t!==null&&(Hn[Fn++]=nr,Hn[Fn++]=ir,Hn[Fn++]=$s,nr=t.id,ir=t.overflow,$s=r),r=Ed(r,l.children),r.flags|=4096);return r}return h?(jr(),h=l.fallback,T=r.mode,D=t.child,F=D.sibling,l=tr(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?h=tr(F,h):(h=Gs(h,T,a,null),h.flags|=2),h.return=r,l.return=r,l.sibling=h,r.child=l,l=h,h=r.child,T=t.child.memoizedState,T===null?T=vd(a):(D=T.cachePool,D!==null?(F=Mt._currentValue,D=D.parent!==F?{parent:F,pool:F}:D):D=Jg(),T={baseLanes:T.baseLanes|a,cachePool:D}),h.memoizedState=T,h.childLanes=_d(t,_,a),r.memoizedState=yd,l):(Ur(r),a=t.child,t=a.sibling,a=tr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=a,r.memoizedState=null,a)}function Ed(t,r){return r=Ac({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ac(t,r){return t=In(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Td(t,r,a){return Qa(r,t.child,null,a),t=Ed(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function mv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),jf(t.return,r,a)}function wd(t,r,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function pv(t,r,a){var l=r.pendingProps,h=l.revealOrder,d=l.tail;if(Yt(t,r,l.children,a),l=Vt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mv(t,a,r);else if(t.tag===19)mv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(re(Vt,l),h){case"forwards":for(a=r.child,h=null;a!==null;)t=a.alternate,t!==null&&Tc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),wd(r,!1,h,a,d);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Tc(t)===null){r.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}wd(r,!0,a,null,d);break;case"together":wd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function lr(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),Fr|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(al(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=tr(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=tr(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function bd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&sc(t)))}function DS(t,r,a){switch(r.tag){case 3:Qe(r,r.stateNode.containerInfo),Mr(r,Mt,t.memoizedState.cache),rl();break;case 27:case 5:fi(r);break;case 4:Qe(r,r.stateNode.containerInfo);break;case 10:Mr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Ur(r),r.flags|=128,null):(a&r.child.childLanes)!==0?dv(t,r,a):(Ur(r),t=lr(t,r,a),t!==null?t.sibling:null);Ur(r);break;case 19:var h=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(al(t,r,a,!1),l=(a&r.childLanes)!==0),h){if(l)return pv(t,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Vt,Vt.current),l)break;return null;case 22:case 23:return r.lanes=0,lv(t,r,a);case 24:Mr(r,Mt,t.memoizedState.cache)}return lr(t,r,a)}function gv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Bt=!0;else{if(!bd(t,a)&&(r.flags&128)===0)return Bt=!1,DS(t,r,a);Bt=(t.flags&131072)!==0}else Bt=!1,Xe&&(r.flags&1048576)!==0&&$g(r,rc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,h=l._init;if(l=h(l._payload),r.type=l,typeof l=="function")Of(l)?(t=ea(l,t),r.tag=1,r=hv(null,r,l,t,a)):(r.tag=0,r=gd(null,r,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===pe){r.tag=11,r=sv(null,r,l,t,a);break e}else if(h===x){r.tag=14,r=av(null,r,l,t,a);break e}}throw r=et(l)||l,Error(s(306,r,""))}}return r;case 0:return gd(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,h=ea(l,r.pendingProps),hv(t,r,l,h,a);case 3:e:{if(Qe(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;h=d.element,$f(t,r),dl(r,l,null,a);var _=r.memoizedState;if(l=_.cache,Mr(r,Mt,l),l!==d.cache&&zf(r,[Mt],a,!0),fl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=fv(t,r,l,a);break e}else if(l!==h){h=Bn(Error(s(424)),r),sl(h),r=fv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=ri(t.firstChild),dn=r,Xe=!0,Qs=null,Ri=!0,a=Qy(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(rl(),l===h){r=lr(t,r,a);break e}Yt(t,r,l,a)}r=r.child}return r;case 26:return Sc(t,r),t===null?(a=E_(r.type,null,r.pendingProps,null))?r.memoizedState=a:Xe||(a=r.type,t=r.pendingProps,l=jc(_e.current).createElement(a),l[ke]=r,l[Le]=t,Wt(l,a,t),Et(l),r.stateNode=l):r.memoizedState=E_(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return fi(r),t===null&&Xe&&(l=r.stateNode=y_(r.type,r.pendingProps,_e.current),dn=r,Ri=!0,h=vt,Qr(r.type)?(im=h,vt=ri(l.firstChild)):vt=h),Yt(t,r,r.pendingProps.children,a),Sc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Xe&&((h=l=vt)&&(l=rA(l,r.type,r.pendingProps,Ri),l!==null?(r.stateNode=l,dn=r,vt=ri(l.firstChild),Ri=!1,h=!0):h=!1),h||Ys(r)),fi(r),h=r.type,d=r.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,Jd(h,d)?l=null:_!==null&&Jd(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=Zf(t,r,wS,null,null,a),Pl._currentValue=h),Sc(t,r),Yt(t,r,l,a),r.child;case 6:return t===null&&Xe&&((t=a=vt)&&(a=sA(a,r.pendingProps,Ri),a!==null?(r.stateNode=a,dn=r,vt=null,t=!0):t=!1),t||Ys(r)),null;case 13:return dv(t,r,a);case 4:return Qe(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=Qa(r,null,l,a):Yt(t,r,l,a),r.child;case 11:return sv(t,r,r.type,r.pendingProps,a);case 7:return Yt(t,r,r.pendingProps,a),r.child;case 8:return Yt(t,r,r.pendingProps.children,a),r.child;case 12:return Yt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Mr(r,r.type,l.value),Yt(t,r,l.children,a),r.child;case 9:return h=r.type._context,l=r.pendingProps.children,Ws(r),h=tn(h),l=l(h),r.flags|=1,Yt(t,r,l,a),r.child;case 14:return av(t,r,r.type,r.pendingProps,a);case 15:return ov(t,r,r.type,r.pendingProps,a);case 19:return pv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=Ac(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=tr(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return lv(t,r,a);case 24:return Ws(r),l=tn(Mt),t===null?(h=Hf(),h===null&&(h=ct,d=Bf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),r.memoizedState={parent:l,cache:h},Gf(r),Mr(r,Mt,h)):((t.lanes&a)!==0&&($f(t,r),dl(r,null,null,a),fl()),h=t.memoizedState,d=r.memoizedState,h.parent!==l?(h={parent:l,cache:l},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),Mr(r,Mt,l)):(l=d.cache,Mr(r,Mt,l),l!==h.cache&&zf(r,[Mt],a,!0))),Yt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ur(t){t.flags|=4}function yv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!A_(r)){if(r=Gn.current,r!==null&&((Ge&4194048)===Ge?Ii!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==Ii))throw cl=Ff,ey;t.flags|=8192}}function Rc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ye():536870912,t.lanes|=r,Za|=r)}function El(t,r){if(!Xe)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function gt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function xS(t,r,a){var l=r.pendingProps;switch(kf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(r),null;case 1:return gt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),sr(Mt),pn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(il(r)?ur(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Yg())),gt(r),null;case 26:return a=r.memoizedState,t===null?(ur(r),a!==null?(gt(r),yv(r,a)):(gt(r),r.flags&=-16777217)):a?a!==t.memoizedState?(ur(r),gt(r),yv(r,a)):(gt(r),r.flags&=-16777217):(t.memoizedProps!==l&&ur(r),gt(r),r.flags&=-16777217),null;case 27:Sn(r),a=_e.current;var h=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return gt(r),null}t=Te.current,il(r)?Kg(r):(t=y_(h,l,a),r.stateNode=t,ur(r))}return gt(r),null;case 5:if(Sn(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return gt(r),null}if(t=Te.current,il(r))Kg(r);else{switch(h=jc(_e.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[ke]=r,t[Le]=l;e:for(h=r.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r.stateNode=t;e:switch(Wt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ur(r)}}return gt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&ur(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=_e.current,il(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,h=dn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[ke]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||c_(t.nodeValue,a)),t||Ys(r)}else t=jc(t).createTextNode(l),t[ke]=r,r.stateNode=t}return gt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=il(r),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ke]=r}else rl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),h=!1}else h=Yg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(or(r),r):(or(r),null)}if(or(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),Rc(r,r.updateQueue),gt(r),null;case 4:return pn(),t===null&&Qd(r.stateNode.containerInfo),gt(r),null;case 10:return sr(r.type),gt(r),null;case 19:if(le(Vt),h=r.memoizedState,h===null)return gt(r),null;if(l=(r.flags&128)!==0,d=h.rendering,d===null)if(l)El(h,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Tc(t),d!==null){for(r.flags|=128,El(h,!1),t=d.updateQueue,r.updateQueue=t,Rc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Gg(a,t),a=a.sibling;return re(Vt,Vt.current&1|2),r.child}t=t.sibling}h.tail!==null&&ln()>Nc&&(r.flags|=128,l=!0,El(h,!1),r.lanes=4194304)}else{if(!l)if(t=Tc(d),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,Rc(r,t),El(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Xe)return gt(r),null}else 2*ln()-h.renderingStartTime>Nc&&a!==536870912&&(r.flags|=128,l=!0,El(h,!1),r.lanes=4194304);h.isBackwards?(d.sibling=r.child,r.child=d):(t=h.last,t!==null?t.sibling=d:r.child=d,h.last=d)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=ln(),r.sibling=null,t=Vt.current,re(Vt,l?t&1|2:t&1),r):(gt(r),null);case 22:case 23:return or(r),Xf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(gt(r),r.subtreeFlags&6&&(r.flags|=8192)):gt(r),a=r.updateQueue,a!==null&&Rc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&le(Zs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),sr(Mt),gt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function OS(t,r){switch(kf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return sr(Mt),pn(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Sn(r),null;case 13:if(or(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));rl()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return le(Vt),null;case 4:return pn(),null;case 10:return sr(r.type),null;case 22:case 23:return or(r),Xf(),t!==null&&le(Zs),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return sr(Mt),null;case 25:return null;default:return null}}function vv(t,r){switch(kf(r),r.tag){case 3:sr(Mt),pn();break;case 26:case 27:case 5:Sn(r);break;case 4:pn();break;case 13:or(r);break;case 19:le(Vt);break;case 10:sr(r.type);break;case 22:case 23:or(r),Xf(),t!==null&&le(Zs);break;case 24:sr(Mt)}}function Tl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(T){ut(r,r.return,T)}}function zr(t,r,a){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=r;var D=a,F=T;try{F()}catch(W){ut(h,D,W)}}}l=l.next}while(l!==d)}}catch(W){ut(r,r.return,W)}}function _v(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{ay(r,a)}catch(l){ut(t,t.return,l)}}}function Ev(t,r,a){a.props=ea(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ut(t,r,l)}}function wl(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ut(t,r,h)}}function Ci(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ut(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ut(t,r,h)}else a.current=null}function Tv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ut(t,t.return,h)}}function Sd(t,r,a){try{var l=t.stateNode;JS(l,t.type,a,r),l[Le]=r}catch(h){ut(t,t.return,h)}}function wv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qr(t.type)||t.tag===4}function Ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Uc));else if(l!==4&&(l===27&&Qr(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Rd(t,r,a),t=t.sibling;t!==null;)Rd(t,r,a),t=t.sibling}function Ic(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&Qr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ic(t,r,a),t=t.sibling;t!==null;)Ic(t,r,a),t=t.sibling}function bv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);Wt(r,l,a),r[ke]=t,r[Le]=a}catch(d){ut(t,t.return,d)}}var cr=!1,wt=!1,Id=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,qt=null;function MS(t,r){if(t=t.containerInfo,Wd=Gc,t=Pg(t),Af(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,T=-1,D=-1,F=0,W=0,J=t,G=null;t:for(;;){for(var $;J!==a||h!==0&&J.nodeType!==3||(T=_+h),J!==d||l!==0&&J.nodeType!==3||(D=_+l),J.nodeType===3&&(_+=J.nodeValue.length),($=J.firstChild)!==null;)G=J,J=$;for(;;){if(J===t)break t;if(G===a&&++F===h&&(T=_),G===d&&++W===l&&(D=_),($=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=$}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zd={focusedElem:t,selectionRange:a},Gc=!1,qt=r;qt!==null;)if(r=qt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,qt=t;else for(;qt!==null;){switch(r=qt,d=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Ie=ea(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Ie,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){ut(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)tm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":tm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,qt=t;break}qt=r.return}}function Av(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Br(t,a),l&4&&Tl(5,a);break;case 1:if(Br(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(_){ut(a,a.return,_)}else{var h=ea(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ut(a,a.return,_)}}l&64&&_v(a),l&512&&wl(a,a.return);break;case 3:if(Br(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ay(t,r)}catch(_){ut(a,a.return,_)}}break;case 27:r===null&&l&4&&bv(a);case 26:case 5:Br(t,a),r===null&&l&4&&Tv(a),l&512&&wl(a,a.return);break;case 12:Br(t,a);break;case 13:Br(t,a),l&4&&Cv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=qS.bind(null,a),aA(t,a))));break;case 22:if(l=a.memoizedState!==null||cr,!l){r=r!==null&&r.memoizedState!==null||wt,h=cr;var d=wt;cr=l,(wt=r)&&!d?qr(t,a,(a.subtreeFlags&8772)!==0):Br(t,a),cr=h,wt=d}break;case 30:break;default:Br(t,a)}}function Rv(t){var r=t.alternate;r!==null&&(t.alternate=null,Rv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Nr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,_n=!1;function hr(t,r,a){for(a=a.child;a!==null;)Iv(t,r,a),a=a.sibling}function Iv(t,r,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:wt||Ci(a,r),hr(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||Ci(a,r);var l=dt,h=_n;Qr(a.type)&&(dt=a.stateNode,_n=!1),hr(t,r,a),xl(a.stateNode),dt=l,_n=h;break;case 5:wt||Ci(a,r);case 6:if(l=dt,h=_n,dt=null,hr(t,r,a),dt=l,_n=h,dt!==null)if(_n)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(d){ut(a,r,d)}else try{dt.removeChild(a.stateNode)}catch(d){ut(a,r,d)}break;case 18:dt!==null&&(_n?(t=dt,p_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),jl(t)):p_(dt,a.stateNode));break;case 4:l=dt,h=_n,dt=a.stateNode.containerInfo,_n=!0,hr(t,r,a),dt=l,_n=h;break;case 0:case 11:case 14:case 15:wt||zr(2,a,r),wt||zr(4,a,r),hr(t,r,a);break;case 1:wt||(Ci(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Ev(a,r,l)),hr(t,r,a);break;case 21:hr(t,r,a);break;case 22:wt=(l=wt)||a.memoizedState!==null,hr(t,r,a),wt=l;break;default:hr(t,r,a)}}function Cv(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{jl(t)}catch(a){ut(r,r.return,a)}}function VS(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Sv),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Sv),r;default:throw Error(s(435,t.tag))}}function Cd(t,r){var a=VS(t);r.forEach(function(l){var h=HS.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function Cn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Qr(T.type)){dt=T.stateNode,_n=!1;break e}break;case 5:dt=T.stateNode,_n=!1;break e;case 3:case 4:dt=T.stateNode.containerInfo,_n=!0;break e}T=T.return}if(dt===null)throw Error(s(160));Iv(d,_,h),dt=null,_n=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Nv(r,t),r=r.sibling}var ii=null;function Nv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cn(r,t),Nn(t),l&4&&(zr(3,t,t.return),Tl(3,t),zr(5,t,t.return));break;case 1:Cn(r,t),Nn(t),l&512&&(wt||a===null||Ci(a,a.return)),l&64&&cr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ii;if(Cn(r,t),Nn(t),l&512&&(wt||a===null||Ci(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ns]||d[ke]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Wt(d,l,a),d[ke]=t,Et(d),l=d;break e;case"link":var _=b_("link","href",h).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}d=h.createElement(l),Wt(d,l,a),h.head.appendChild(d);break;case"meta":if(_=b_("meta","content",h).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}d=h.createElement(l),Wt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[ke]=t,Et(d),l=d}t.stateNode=l}else S_(h,t.type,t.stateNode);else t.stateNode=w_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?S_(h,t.type,t.stateNode):w_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Sd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Cn(r,t),Nn(t),l&512&&(wt||a===null||Ci(a,a.return)),a!==null&&l&4&&Sd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Cn(r,t),Nn(t),l&512&&(wt||a===null||Ci(a,a.return)),t.flags&32){h=t.stateNode;try{Ln(h,"")}catch($){ut(t,t.return,$)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Sd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Id=!0);break;case 6:if(Cn(r,t),Nn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch($){ut(t,t.return,$)}}break;case 3:if(qc=null,h=ii,ii=zc(r.containerInfo),Cn(r,t),ii=h,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{jl(r.containerInfo)}catch($){ut(t,t.return,$)}Id&&(Id=!1,Dv(t));break;case 4:l=ii,ii=zc(t.stateNode.containerInfo),Cn(r,t),Nn(t),ii=l;break;case 12:Cn(r,t),Nn(t);break;case 13:Cn(r,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vd=ln()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cd(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=cr,W=wt;if(cr=F||h,wt=W||D,Cn(r,t),wt=W,cr=F,Nn(t),l&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(a===null||D||cr||wt||ta(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(d=D.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var J=D.memoizedProps.style,G=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){ut(D,D.return,$)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch($){ut(D,D.return,$)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Cd(t,a))));break;case 19:Cn(r,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cd(t,l)));break;case 30:break;case 21:break;default:Cn(r,t),Nn(t)}}function Nn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(wv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Ad(t);Ic(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Ln(_,""),a.flags&=-33);var T=Ad(t);Ic(t,T,_);break;case 3:case 4:var D=a.stateNode.containerInfo,F=Ad(t);Rd(t,F,D);break;default:throw Error(s(161))}}catch(W){ut(t,t.return,W)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Dv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Dv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Br(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Av(t,r.alternate,r),r=r.sibling}function ta(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:zr(4,r,r.return),ta(r);break;case 1:Ci(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Ev(r,r.return,a),ta(r);break;case 27:xl(r.stateNode);case 26:case 5:Ci(r,r.return),ta(r);break;case 22:r.memoizedState===null&&ta(r);break;case 30:ta(r);break;default:ta(r)}t=t.sibling}}function qr(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,h=t,d=r,_=d.flags;switch(d.tag){case 0:case 11:case 15:qr(h,d,a),Tl(4,d);break;case 1:if(qr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){ut(l,l.return,F)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)sy(D[h],T)}catch(F){ut(l,l.return,F)}}a&&_&64&&_v(d),wl(d,d.return);break;case 27:bv(d);case 26:case 5:qr(h,d,a),a&&l===null&&_&4&&Tv(d),wl(d,d.return);break;case 12:qr(h,d,a);break;case 13:qr(h,d,a),a&&_&4&&Cv(h,d);break;case 22:d.memoizedState===null&&qr(h,d,a),wl(d,d.return);break;case 30:break;default:qr(h,d,a)}r=r.sibling}}function Nd(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ol(a))}function Dd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ol(t))}function Ni(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)xv(t,r,a,l),r=r.sibling}function xv(t,r,a,l){var h=r.flags;switch(r.tag){case 0:case 11:case 15:Ni(t,r,a,l),h&2048&&Tl(9,r);break;case 1:Ni(t,r,a,l);break;case 3:Ni(t,r,a,l),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ol(t)));break;case 12:if(h&2048){Ni(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ut(r,r.return,D)}}else Ni(t,r,a,l);break;case 13:Ni(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,_=r.alternate,r.memoizedState!==null?d._visibility&2?Ni(t,r,a,l):bl(t,r):d._visibility&2?Ni(t,r,a,l):(d._visibility|=2,Ya(t,r,a,l,(r.subtreeFlags&10256)!==0)),h&2048&&Nd(_,r);break;case 24:Ni(t,r,a,l),h&2048&&Dd(r.alternate,r);break;default:Ni(t,r,a,l)}}function Ya(t,r,a,l,h){for(h=h&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=t,_=r,T=a,D=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:Ya(d,_,T,D,h),Tl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?Ya(d,_,T,D,h):bl(d,_):(W._visibility|=2,Ya(d,_,T,D,h)),h&&F&2048&&Nd(_.alternate,_);break;case 24:Ya(d,_,T,D,h),h&&F&2048&&Dd(_.alternate,_);break;default:Ya(d,_,T,D,h)}r=r.sibling}}function bl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,h=l.flags;switch(l.tag){case 22:bl(a,l),h&2048&&Nd(l.alternate,l);break;case 24:bl(a,l),h&2048&&Dd(l.alternate,l);break;default:bl(a,l)}r=r.sibling}}var Sl=8192;function Xa(t){if(t.subtreeFlags&Sl)for(t=t.child;t!==null;)Ov(t),t=t.sibling}function Ov(t){switch(t.tag){case 26:Xa(t),t.flags&Sl&&t.memoizedState!==null&&_A(ii,t.memoizedState,t.memoizedProps);break;case 5:Xa(t);break;case 3:case 4:var r=ii;ii=zc(t.stateNode.containerInfo),Xa(t),ii=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Sl,Sl=16777216,Xa(t),Sl=r):Xa(t));break;default:Xa(t)}}function Mv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Al(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,Pv(l,t)}Mv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vv(t),t=t.sibling}function Vv(t){switch(t.tag){case 0:case 11:case 15:Al(t),t.flags&2048&&zr(9,t,t.return);break;case 3:Al(t);break;case 12:Al(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Cc(t)):Al(t);break;default:Al(t)}}function Cc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];qt=l,Pv(l,t)}Mv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:zr(8,r,r.return),Cc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Cc(r));break;default:Cc(r)}t=t.sibling}}function Pv(t,r){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:zr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ol(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qt=l;else e:for(a=t;qt!==null;){l=qt;var h=l.sibling,d=l.return;if(Rv(l),l===a){qt=null;break e}if(h!==null){h.return=d,qt=h;break e}qt=d}}}var PS={getCacheForType:function(t){var r=tn(Mt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},kS=typeof WeakMap=="function"?WeakMap:Map,tt=0,ct=null,Ue=null,Ge=0,nt=0,Dn=null,Hr=!1,Wa=!1,xd=!1,fr=0,_t=0,Fr=0,na=0,Od=0,$n=0,Za=0,Rl=null,En=null,Md=!1,Vd=0,Nc=1/0,Dc=null,Gr=null,Xt=0,$r=null,Ja=null,eo=0,Pd=0,kd=null,kv=null,Il=0,Ld=null;function xn(){if((tt&2)!==0&&Ge!==0)return Ge&-Ge;if(X.T!==null){var t=Ba;return t!==0?t:Fd()}return yn()}function Lv(){$n===0&&($n=(Ge&536870912)===0||Xe?ue():536870912);var t=Gn.current;return t!==null&&(t.flags|=32),$n}function On(t,r,a){(t===ct&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(to(t,0),Kr(t,Ge,$n,!1)),ge(t,a),((tt&2)===0||t!==ct)&&(t===ct&&((tt&2)===0&&(na|=a),_t===4&&Kr(t,Ge,$n,!1)),Di(t))}function Uv(t,r,a){if((tt&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||Fi(t,r),h=l?jS(t,r):zd(t,r,!0),d=l;do{if(h===0){Wa&&!l&&Kr(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!LS(a)){h=zd(t,r,!1),d=!1;continue}if(h===2){if(d=r,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var T=t;h=Rl;var D=T.current.memoizedState.isDehydrated;if(D&&(to(T,_).flags|=256),_=zd(T,_,!1),_!==2){if(xd&&!D){T.errorRecoveryDisabledLanes|=d,na|=d,h=4;break e}d=En,En=h,d!==null&&(En===null?En=d:En.push.apply(En,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){to(t,0),Kr(t,r,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Kr(l,r,$n,!Hr);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(h=Vd+300-ln(),10<h)){if(Kr(l,r,$n,!Hr),Hi(l,0,!0)!==0)break e;l.timeoutHandle=d_(jv.bind(null,l,a,En,Dc,Md,r,$n,na,Za,Hr,d,2,-0,0),h);break e}jv(l,a,En,Dc,Md,r,$n,na,Za,Hr,d,0,-0,0)}}break}while(!0);Di(t)}function jv(t,r,a,l,h,d,_,T,D,F,W,J,G,$){if(t.timeoutHandle=-1,J=r.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(Vl={stylesheets:null,count:0,unsuspend:vA},Ov(r),J=EA(),J!==null)){t.cancelPendingCommit=J($v.bind(null,t,r,d,a,l,h,_,T,D,W,1,G,$)),Kr(t,d,_,!F);return}$v(t,r,d,a,l,h,_,T,D)}function LS(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Rn(d(),h))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Kr(t,r,a,l){r&=~Od,r&=~na,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var h=r;0<h;){var d=31-Lt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&pt(t,a,r)}function xc(){return(tt&6)===0?(Cl(0),!1):!0}function Ud(){if(Ue!==null){if(nt===0)var t=Ue.return;else t=Ue,rr=Xs=null,td(t),Ka=null,vl=0,t=Ue;for(;t!==null;)vv(t.alternate,t),t=t.return;Ue=null}}function to(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,tA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ud(),ct=t,Ue=a=tr(t.current,null),Ge=r,nt=0,Dn=null,Hr=!1,Wa=Fi(t,r),xd=!1,Za=$n=Od=na=Fr=_t=0,En=Rl=null,Md=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var h=31-Lt(l),d=1<<h;r|=t[h],l&=~d}return fr=r,Ju(),a}function zv(t,r){Me=null,X.H=vc,r===ul||r===lc?(r=iy(),nt=3):r===ey?(r=iy(),nt=4):nt=r===rv?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Dn=r,Ue===null&&(_t=1,bc(t,Bn(r,t.current)))}function Bv(){var t=X.H;return X.H=vc,t===null?vc:t}function qv(){var t=X.A;return X.A=PS,t}function jd(){_t=4,Hr||(Ge&4194048)!==Ge&&Gn.current!==null||(Wa=!0),(Fr&134217727)===0&&(na&134217727)===0||ct===null||Kr(ct,Ge,$n,!1)}function zd(t,r,a){var l=tt;tt|=2;var h=Bv(),d=qv();(ct!==t||Ge!==r)&&(Dc=null,to(t,r)),r=!1;var _=_t;e:do try{if(nt!==0&&Ue!==null){var T=Ue,D=Dn;switch(nt){case 8:Ud(),_=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(r=!0);var F=nt;if(nt=0,Dn=null,no(t,T,D,F),a&&Wa){_=0;break e}break;default:F=nt,nt=0,Dn=null,no(t,T,D,F)}}US(),_=_t;break}catch(W){zv(t,W)}while(!0);return r&&t.shellSuspendCounter++,rr=Xs=null,tt=l,X.H=h,X.A=d,Ue===null&&(ct=null,Ge=0,Ju()),_}function US(){for(;Ue!==null;)Hv(Ue)}function jS(t,r){var a=tt;tt|=2;var l=Bv(),h=qv();ct!==t||Ge!==r?(Dc=null,Nc=ln()+500,to(t,r)):Wa=Fi(t,r);e:do try{if(nt!==0&&Ue!==null){r=Ue;var d=Dn;t:switch(nt){case 1:nt=0,Dn=null,no(t,r,d,1);break;case 2:case 9:if(ty(d)){nt=0,Dn=null,Fv(r);break}r=function(){nt!==2&&nt!==9||ct!==t||(nt=7),Di(t)},d.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:ty(d)?(nt=0,Dn=null,Fv(r)):(nt=0,Dn=null,no(t,r,d,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var T=Ue;if(!_||A_(_)){nt=0,Dn=null;var D=T.sibling;if(D!==null)Ue=D;else{var F=T.return;F!==null?(Ue=F,Oc(F)):Ue=null}break t}}nt=0,Dn=null,no(t,r,d,5);break;case 6:nt=0,Dn=null,no(t,r,d,6);break;case 8:Ud(),_t=6;break e;default:throw Error(s(462))}}zS();break}catch(W){zv(t,W)}while(!0);return rr=Xs=null,X.H=l,X.A=h,tt=a,Ue!==null?0:(ct=null,Ge=0,Ju(),_t)}function zS(){for(;Ue!==null&&!Sr();)Hv(Ue)}function Hv(t){var r=gv(t.alternate,t,fr);t.memoizedProps=t.pendingProps,r===null?Oc(t):Ue=r}function Fv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=cv(a,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=cv(a,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:td(r);default:vv(a,r),r=Ue=Gg(r,fr),r=gv(a,r,fr)}t.memoizedProps=t.pendingProps,r===null?Oc(t):Ue=r}function no(t,r,a,l){rr=Xs=null,td(r),Ka=null,vl=0;var h=r.return;try{if(NS(t,h,r,a,Ge)){_t=1,bc(t,Bn(a,t.current)),Ue=null;return}}catch(d){if(h!==null)throw Ue=h,d;_t=1,bc(t,Bn(a,t.current)),Ue=null;return}r.flags&32768?(Xe||l===1?t=!0:Wa||(Ge&536870912)!==0?t=!1:(Hr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Gn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Gv(r,t)):Oc(r)}function Oc(t){var r=t;do{if((r.flags&32768)!==0){Gv(r,Hr);return}t=r.return;var a=xS(r.alternate,r,fr);if(a!==null){Ue=a;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=t}while(r!==null);_t===0&&(_t=5)}function Gv(t,r){do{var a=OS(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);_t=6,Ue=null}function $v(t,r,a,l,h,d,_,T,D){t.cancelPendingCommit=null;do Mc();while(Xt!==0);if((tt&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Df,We(t,a,d,_,T,D),t===ct&&(Ue=ct=null,Ge=0),Ja=r,$r=t,eo=a,Pd=d,kd=h,kv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,FS(zi,function(){return Wv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,h=oe.p,oe.p=2,_=tt,tt|=4;try{MS(t,r,a)}finally{tt=_,oe.p=h,X.T=l}}Xt=1,Kv(),Qv(),Yv()}}function Kv(){if(Xt===1){Xt=0;var t=$r,r=Ja,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=oe.p;oe.p=2;var h=tt;tt|=4;try{Nv(r,t);var d=Zd,_=Pg(t.containerInfo),T=d.focusedElem,D=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Vg(T.ownerDocument.documentElement,T)){if(D!==null&&Af(T)){var F=D.start,W=D.end;if(W===void 0&&(W=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(W,T.value.length);else{var J=T.ownerDocument||document,G=J&&J.defaultView||window;if(G.getSelection){var $=G.getSelection(),Ie=T.textContent.length,Se=Math.min(D.start,Ie),ot=D.end===void 0?Se:Math.min(D.end,Ie);!$.extend&&Se>ot&&(_=ot,ot=Se,Se=_);var j=Mg(T,Se),k=Mg(T,ot);if(j&&k&&($.rangeCount!==1||$.anchorNode!==j.node||$.anchorOffset!==j.offset||$.focusNode!==k.node||$.focusOffset!==k.offset)){var B=J.createRange();B.setStart(j.node,j.offset),$.removeAllRanges(),Se>ot?($.addRange(B),$.extend(k.node,k.offset)):(B.setEnd(k.node,k.offset),$.addRange(B))}}}}for(J=[],$=T;$=$.parentNode;)$.nodeType===1&&J.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var Z=J[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Gc=!!Wd,Zd=Wd=null}finally{tt=h,oe.p=l,X.T=a}}t.current=r,Xt=2}}function Qv(){if(Xt===2){Xt=0;var t=$r,r=Ja,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=oe.p;oe.p=2;var h=tt;tt|=4;try{Av(t,r.alternate,r)}finally{tt=h,oe.p=l,X.T=a}}Xt=3}}function Yv(){if(Xt===4||Xt===3){Xt=0,Is();var t=$r,r=Ja,a=eo,l=kv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Xt=5:(Xt=0,Ja=$r=null,Xv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Gr=null),Ut(a),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ft,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=X.T,h=oe.p,oe.p=2,X.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{X.T=r,oe.p=h}}(eo&3)!==0&&Mc(),Di(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Ld?Il++:(Il=0,Ld=t):Il=0,Cl(0)}}function Xv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ol(r)))}function Mc(t){return Kv(),Qv(),Yv(),Wv()}function Wv(){if(Xt!==5)return!1;var t=$r,r=Pd;Pd=0;var a=Ut(eo),l=X.T,h=oe.p;try{oe.p=32>a?32:a,X.T=null,a=kd,kd=null;var d=$r,_=eo;if(Xt=0,Ja=$r=null,eo=0,(tt&6)!==0)throw Error(s(331));var T=tt;if(tt|=4,Vv(d.current),xv(d,d.current,_,a),tt=T,Cl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ft,d)}catch{}return!0}finally{oe.p=h,X.T=l,Xv(t,r)}}function Zv(t,r,a){r=Bn(a,r),r=pd(t.stateNode,r,2),t=kr(t,r,2),t!==null&&(ge(t,2),Di(t))}function ut(t,r,a){if(t.tag===3)Zv(t,t,a);else for(;r!==null;){if(r.tag===3){Zv(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Gr===null||!Gr.has(l))){t=Bn(a,t),a=nv(2),l=kr(r,a,2),l!==null&&(iv(a,l,r,t),ge(l,2),Di(l));break}}r=r.return}}function Bd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new kS;var h=new Set;l.set(r,h)}else h=l.get(r),h===void 0&&(h=new Set,l.set(r,h));h.has(a)||(xd=!0,h.add(a),t=BS.bind(null,t,r,a),r.then(t,t))}function BS(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(Ge&a)===a&&(_t===4||_t===3&&(Ge&62914560)===Ge&&300>ln()-Vd?(tt&2)===0&&to(t,0):Od|=a,Za===Ge&&(Za=0)),Di(t)}function Jv(t,r){r===0&&(r=ye()),t=La(t,r),t!==null&&(ge(t,r),Di(t))}function qS(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),Jv(t,a)}function HS(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Jv(t,a)}function FS(t,r){return Zn(t,r)}var Vc=null,io=null,qd=!1,Pc=!1,Hd=!1,ia=0;function Di(t){t!==io&&t.next===null&&(io===null?Vc=io=t:io=io.next=t),Pc=!0,qd||(qd=!0,$S())}function Cl(t,r){if(!Hd&&Pc){Hd=!0;do for(var a=!1,l=Vc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Lt(42|t)+1)-1,d&=h&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,i_(l,d))}else d=Ge,d=Hi(l,l===ct?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Fi(l,d)||(a=!0,i_(l,d));l=l.next}while(a);Hd=!1}}function GS(){e_()}function e_(){Pc=qd=!1;var t=0;ia!==0&&(eA()&&(t=ia),ia=0);for(var r=ln(),a=null,l=Vc;l!==null;){var h=l.next,d=t_(l,r);d===0?(l.next=null,a===null?Vc=h:a.next=h,h===null&&(io=a)):(a=l,(t!==0||(d&3)!==0)&&(Pc=!0)),l=h}Cl(t)}function t_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-Lt(d),T=1<<_,D=h[_];D===-1?((T&a)===0||(T&l)!==0)&&(h[_]=q(T,r)):D<=r&&(t.expiredLanes|=T),d&=~T}if(r=ct,a=Ge,a=Hi(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&mi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Fi(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&mi(l),Ut(a)){case 2:case 8:a=Rr;break;case 32:a=zi;break;case 268435456:a=Ir;break;default:a=zi}return l=n_.bind(null,t),a=Zn(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&mi(l),t.callbackPriority=2,t.callbackNode=null,2}function n_(t,r){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Mc()&&t.callbackNode!==a)return null;var l=Ge;return l=Hi(t,t===ct?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Uv(t,l,r),t_(t,ln()),t.callbackNode!=null&&t.callbackNode===a?n_.bind(null,t):null)}function i_(t,r){if(Mc())return null;Uv(t,r,!0)}function $S(){nA(function(){(tt&6)!==0?Zn(Ar,GS):e_()})}function Fd(){return ia===0&&(ia=ue()),ia}function r_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Aa(""+t)}function s_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function KS(t,r,a,l,h){if(r==="submit"&&a&&a.stateNode===h){var d=r_((h[Le]||null).action),_=l.submitter;_&&(r=(r=_[Le]||null)?r_(r.formAction):_.getAttribute("formAction"),r!==null&&(d=r,_=null));var T=new Ra("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ia!==0){var D=_?s_(h,_):new FormData(h);cd(a,{pending:!0,data:D,method:h.method,action:d},null,D)}}else typeof d=="function"&&(T.preventDefault(),D=_?s_(h,_):new FormData(h),cd(a,{pending:!0,data:D,method:h.method,action:d},d,D))},currentTarget:h}]})}}for(var Gd=0;Gd<Nf.length;Gd++){var $d=Nf[Gd],QS=$d.toLowerCase(),YS=$d[0].toUpperCase()+$d.slice(1);ni(QS,"on"+YS)}ni(Ug,"onAnimationEnd"),ni(jg,"onAnimationIteration"),ni(zg,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(fS,"onTransitionRun"),ni(dS,"onTransitionStart"),ni(mS,"onTransitionCancel"),ni(Bg,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function a_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var _=l.length-1;0<=_;_--){var T=l[_],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=F;try{d(h)}catch(W){wc(W)}h.currentTarget=null,d=D}else for(_=0;_<l.length;_++){if(T=l[_],D=T.instance,F=T.currentTarget,T=T.listener,D!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=F;try{d(h)}catch(W){wc(W)}h.currentTarget=null,d=D}}}}function je(t,r){var a=r[zo];a===void 0&&(a=r[zo]=new Set);var l=t+"__bubble";a.has(l)||(o_(r,t,2,!1),a.add(l))}function Kd(t,r,a){var l=0;r&&(l|=4),o_(a,t,l,r)}var kc="_reactListening"+Math.random().toString(36).slice(2);function Qd(t){if(!t[kc]){t[kc]=!0,Bo.forEach(function(a){a!=="selectionchange"&&(XS.has(a)||Kd(a,!1,t),Kd(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[kc]||(r[kc]=!0,Kd("selectionchange",!1,r))}}function o_(t,r,a,l){switch(x_(r)){case 2:var h=bA;break;case 8:h=SA;break;default:h=lm}a=h.bind(null,r,a,t),h=void 0,!jn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(r,a,{capture:!0,passive:h}):t.addEventListener(r,a,!0):h!==void 0?t.addEventListener(r,a,{passive:h}):t.addEventListener(r,a,!1)}function Yd(t,r,a,l,h){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=Gi(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){l=d=_;continue e}T=T.parentNode}}l=l.return}Uu(function(){var F=d,W=Un(a),J=[];e:{var G=qg.get(t);if(G!==void 0){var $=Ra,Ie=t;switch(t){case"keypress":if(Ti(a)===0)break e;case"keydown":case"keyup":$=Oa;break;case"focusin":Ie="focus",$=Na;break;case"focusout":Ie="blur",$=Na;break;case"beforeblur":case"afterblur":$=Na;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=zn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Tf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=$u;break;case Ug:case jg:case zg:$=Da;break;case Bg:$=Qu;break;case"scroll":case"scrollend":$=ju;break;case"wheel":$=Ma;break;case"copy":case"cut":case"paste":$=xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Jo;break;case"toggle":case"beforetoggle":$=Xu}var Se=(r&4)!==0,ot=!Se&&(t==="scroll"||t==="scrollend"),j=Se?G!==null?G+"Capture":null:G;Se=[];for(var k=F,B;k!==null;){var Z=k;if(B=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||B===null||j===null||(Z=ks(k,j),Z!=null&&Se.push(Dl(k,Z,B))),ot)break;k=k.return}0<Se.length&&(G=new $(G,Ie,null,a,W),J.push({event:G,listeners:Se}))}}if((r&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",G&&a!==Yi&&(Ie=a.relatedTarget||a.fromElement)&&(Gi(Ie)||Ie[kn]))break e;if(($||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,$?(Ie=a.relatedTarget||a.toElement,$=F,Ie=Ie?Gi(Ie):null,Ie!==null&&(ot=u(Ie),Se=Ie.tag,Ie!==ot||Se!==5&&Se!==27&&Se!==6)&&(Ie=null)):($=null,Ie=F),$!==Ie)){if(Se=zn,Z="onMouseLeave",j="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(Se=Jo,Z="onPointerLeave",j="onPointerEnter",k="pointer"),ot=$==null?G:yi($),B=Ie==null?G:yi(Ie),G=new Se(Z,k+"leave",$,a,W),G.target=ot,G.relatedTarget=B,Z=null,Gi(W)===F&&(Se=new Se(j,k+"enter",Ie,a,W),Se.target=B,Se.relatedTarget=ot,Z=Se),ot=Z,$&&Ie)t:{for(Se=$,j=Ie,k=0,B=Se;B;B=ro(B))k++;for(B=0,Z=j;Z;Z=ro(Z))B++;for(;0<k-B;)Se=ro(Se),k--;for(;0<B-k;)j=ro(j),B--;for(;k--;){if(Se===j||j!==null&&Se===j.alternate)break t;Se=ro(Se),j=ro(j)}Se=null}else Se=null;$!==null&&l_(J,G,$,Se,!1),Ie!==null&&ot!==null&&l_(J,ot,Ie,Se,!0)}}e:{if(G=F?yi(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var me=Ig;else if(Ot(G))if(Cg)me=uS;else{me=oS;var Pe=aS}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&$o(F.elementType)&&(me=Ig):me=lS;if(me&&(me=me(t,F))){er(J,me,a,W);break e}Pe&&Pe(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&xr(G,"number",G.value)}switch(Pe=F?yi(F):window,t){case"focusin":(Ot(Pe)||Pe.contentEditable==="true")&&(Va=Pe,Rf=F,nl=null);break;case"focusout":nl=Rf=Va=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,kg(J,a,W);break;case"selectionchange":if(hS)break;case"keydown":case"keyup":kg(J,a,W)}var Ee;if(Si)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else He?K(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(v&&a.locale!=="ko"&&(He||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&He&&(Ee=Qo()):(Ei=W,Or="value"in Ei?Ei.value:Ei.textContent,He=!0)),Pe=Lc(F,Ae),0<Pe.length&&(Ae=new Wo(Ae,t,null,a,W),J.push({event:Ae,listeners:Pe}),Ee?Ae.data=Ee:(Ee=ae(a),Ee!==null&&(Ae.data=Ee)))),(Ee=y?xt(t,a):Fe(t,a))&&(Ae=Lc(F,"onBeforeInput"),0<Ae.length&&(Pe=new Wo("onBeforeInput","beforeinput",null,a,W),J.push({event:Pe,listeners:Ae}),Pe.data=Ee)),KS(J,t,F,a,W)}a_(J,r)})}function Dl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Lc(t,r){for(var a=r+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ks(t,a),h!=null&&l.unshift(Dl(t,h,d)),h=ks(t,r),h!=null&&l.push(Dl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function l_(t,r,a,l,h){for(var d=r._reactName,_=[];a!==null&&a!==l;){var T=a,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||F===null||(D=F,h?(F=ks(a,d),F!=null&&_.unshift(Dl(a,F,D))):h||(F=ks(a,d),F!=null&&_.push(Dl(a,F,D)))),a=a.return}_.length!==0&&t.push({event:r,listeners:_})}var WS=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function u_(t){return(typeof t=="string"?t:""+t).replace(WS,`
`).replace(ZS,"")}function c_(t,r){return r=u_(r),u_(t)===r}function Uc(){}function at(t,r,a,l,h,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Ln(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Ln(t,""+l);break;case"className":vi(t,"class",l);break;case"tabIndex":vi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(t,a,l);break;case"style":Go(t,l,d);break;case"data":if(r!=="object"){vi(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&at(t,r,"name",h.name,h,null),at(t,r,"formEncType",h.formEncType,h,null),at(t,r,"formMethod",h.formMethod,h,null),at(t,r,"formTarget",h.formTarget,h,null)):(at(t,r,"encType",h.encType,h,null),at(t,r,"method",h.method,h,null),at(t,r,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Aa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Uc);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Aa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Dr(t,"popover",l);break;case"xlinkActuate":Kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Kt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Kt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Kt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Kt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Dr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_f.get(a)||a,Dr(t,a,l))}}function Xd(t,r,a,l,h,d){switch(a){case"style":Go(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Ln(t,l):(typeof l=="number"||typeof l=="bigint")&&Ln(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ea.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),r=a.slice(2,h?a.length-7:void 0),d=t[Le]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Dr(t,a,l)}}}function Wt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(t,r,d,_,a,null)}}h&&at(t,r,"srcSet",a.srcSet,a,null),l&&at(t,r,"src",a.src,a,null);return;case"input":je("invalid",t);var T=d=_=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":_=W;break;case"checked":D=W;break;case"defaultChecked":F=W;break;case"value":d=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:at(t,r,l,W,a,null)}}Ms(t,d,T,D,F,_,h,!1),Sa(t);return;case"select":je("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:at(t,r,h,T,a,null)}r=d,a=_,t.multiple=!!l,r!=null?Qi(t,!!l,r,!1):a!=null&&Qi(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:at(t,r,_,T,a,null)}Vs(t,l,h,d),Sa(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,r,D,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Nl.length;l++)je(Nl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(t,r,F,l,a,null)}return;default:if($o(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Xd(t,r,W,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&at(t,r,T,l,a,null))}function JS(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,T=null,D=null,F=null,W=null;for($ in a){var J=a[$];if(a.hasOwnProperty($)&&J!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=J;default:l.hasOwnProperty($)||at(t,r,$,null,l,J)}}for(var G in l){var $=l[G];if(J=a[G],l.hasOwnProperty(G)&&($!=null||J!=null))switch(G){case"type":d=$;break;case"name":h=$;break;case"checked":F=$;break;case"defaultChecked":W=$;break;case"value":_=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==J&&at(t,r,G,$,l,J)}}An(t,_,T,D,F,W,d,h);return;case"select":$=_=T=G=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(d)||at(t,r,d,null,l,D)}for(h in l)if(d=l[h],D=a[h],l.hasOwnProperty(h)&&(d!=null||D!=null))switch(h){case"value":G=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==D&&at(t,r,h,d,l,D)}r=T,a=_,l=$,G!=null?Qi(t,!!a,G,!1):!!l!=!!a&&(r!=null?Qi(t,!!a,r,!0):Qi(t,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:at(t,r,T,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":G=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&at(t,r,_,h,l,d)}rt(t,G,$);return;case"option":for(var Ie in a)if(G=a[Ie],a.hasOwnProperty(Ie)&&G!=null&&!l.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:at(t,r,Ie,null,l,G)}for(D in l)if(G=l[D],$=a[D],l.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:at(t,r,D,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se)&&at(t,r,Se,null,l,G);for(F in l)if(G=l[F],$=a[F],l.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:at(t,r,F,G,l,$)}return;default:if($o(r)){for(var ot in a)G=a[ot],a.hasOwnProperty(ot)&&G!==void 0&&!l.hasOwnProperty(ot)&&Xd(t,r,ot,void 0,l,G);for(W in l)G=l[W],$=a[W],!l.hasOwnProperty(W)||G===$||G===void 0&&$===void 0||Xd(t,r,W,G,l,$);return}}for(var j in a)G=a[j],a.hasOwnProperty(j)&&G!=null&&!l.hasOwnProperty(j)&&at(t,r,j,null,l,G);for(J in l)G=l[J],$=a[J],!l.hasOwnProperty(J)||G===$||G==null&&$==null||at(t,r,J,G,l,$)}var Wd=null,Zd=null;function jc(t){return t.nodeType===9?t:t.ownerDocument}function h_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f_(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Jd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var em=null;function eA(){var t=window.event;return t&&t.type==="popstate"?t===em?!1:(em=t,!0):(em=null,!1)}var d_=typeof setTimeout=="function"?setTimeout:void 0,tA=typeof clearTimeout=="function"?clearTimeout:void 0,m_=typeof Promise=="function"?Promise:void 0,nA=typeof queueMicrotask=="function"?queueMicrotask:typeof m_<"u"?function(t){return m_.resolve(null).then(t).catch(iA)}:d_;function iA(t){setTimeout(function(){throw t})}function Qr(t){return t==="head"}function p_(t,r){var a=r,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&xl(_.documentElement),a&2&&xl(_.body),a&4)for(a=_.head,xl(a),_=a.firstChild;_;){var T=_.nextSibling,D=_.nodeName;_[Ns]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=T}}if(h===0){t.removeChild(d),jl(r);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);jl(r)}function tm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":tm(a),Nr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function rA(t,r,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ns])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=ri(t.nextSibling),t===null)break}return null}function sA(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ri(t.nextSibling),t===null))return null;return t}function nm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function aA(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ri(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var im=null;function g_(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function y_(t,r,a){switch(r=jc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function xl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Nr(t)}var Kn=new Map,v_=new Set;function zc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var dr=oe.d;oe.d={f:oA,r:lA,D:uA,C:cA,L:hA,m:fA,X:mA,S:dA,M:pA};function oA(){var t=dr.f(),r=xc();return t||r}function lA(t){var r=gi(t);r!==null&&r.tag===5&&r.type==="form"?Uy(r):dr.r(t)}var so=typeof document>"u"?null:document;function __(t,r,a){var l=so;if(l&&typeof r=="string"&&r){var h=Rt(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),v_.has(h)||(v_.add(h),t={rel:t,crossOrigin:a,href:r},l.querySelector(h)===null&&(r=l.createElement("link"),Wt(r,"link",t),Et(r),l.head.appendChild(r)))}}function uA(t){dr.D(t),__("dns-prefetch",t,null)}function cA(t,r){dr.C(t,r),__("preconnect",t,r)}function hA(t,r,a){dr.L(t,r,a);var l=so;if(l&&t&&r){var h='link[rel="preload"][as="'+Rt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Rt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Rt(a.imageSizes)+'"]')):h+='[href="'+Rt(t)+'"]';var d=h;switch(r){case"style":d=ao(t);break;case"script":d=oo(t)}Kn.has(d)||(t=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Kn.set(d,t),l.querySelector(h)!==null||r==="style"&&l.querySelector(Ol(d))||r==="script"&&l.querySelector(Ml(d))||(r=l.createElement("link"),Wt(r,"link",t),Et(r),l.head.appendChild(r)))}}function fA(t,r){dr.m(t,r);var a=so;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Rt(l)+'"][href="'+Rt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=oo(t)}if(!Kn.has(d)&&(t=E({rel:"modulepreload",href:t},r),Kn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ml(d)))return}l=a.createElement("link"),Wt(l,"link",t),Et(l),a.head.appendChild(l)}}}function dA(t,r,a){dr.S(t,r,a);var l=so;if(l&&t){var h=cn(l).hoistableStyles,d=ao(t);r=r||"default";var _=h.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Ol(d)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Kn.get(d))&&rm(t,a);var D=_=l.createElement("link");Et(D),Wt(D,"link",t),D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Bc(_,r,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(d,_)}}}function mA(t,r){dr.X(t,r);var a=so;if(a&&t){var l=cn(a).hoistableScripts,h=oo(t),d=l.get(h);d||(d=a.querySelector(Ml(h)),d||(t=E({src:t,async:!0},r),(r=Kn.get(h))&&sm(t,r),d=a.createElement("script"),Et(d),Wt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function pA(t,r){dr.M(t,r);var a=so;if(a&&t){var l=cn(a).hoistableScripts,h=oo(t),d=l.get(h);d||(d=a.querySelector(Ml(h)),d||(t=E({src:t,async:!0,type:"module"},r),(r=Kn.get(h))&&sm(t,r),d=a.createElement("script"),Et(d),Wt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function E_(t,r,a,l){var h=(h=_e.current)?zc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=ao(a.href),a=cn(h).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ao(a.href);var d=cn(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Ol(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Kn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Kn.set(t,a),d||gA(h,t,a,_.state))),r&&l===null)throw Error(s(528,""));return _}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=oo(a),a=cn(h).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ao(t){return'href="'+Rt(t)+'"'}function Ol(t){return'link[rel="stylesheet"]['+t+"]"}function T_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function gA(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Wt(r,"link",a),Et(r),t.head.appendChild(r))}function oo(t){return'[src="'+Rt(t)+'"]'}function Ml(t){return"script[async]"+t}function w_(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Rt(a.href)+'"]');if(l)return r.instance=l,Et(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Et(l),Wt(l,"style",h),Bc(l,a.precedence,t),r.instance=l;case"stylesheet":h=ao(a.href);var d=t.querySelector(Ol(h));if(d)return r.state.loading|=4,r.instance=d,Et(d),d;l=T_(a),(h=Kn.get(h))&&rm(l,h),d=(t.ownerDocument||t).createElement("link"),Et(d);var _=d;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Wt(d,"link",l),r.state.loading|=4,Bc(d,a.precedence,t),r.instance=d;case"script":return d=oo(a.src),(h=t.querySelector(Ml(d)))?(r.instance=h,Et(h),h):(l=a,(h=Kn.get(d))&&(l=E({},a),sm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Et(h),Wt(h,"link",l),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Bc(l,a.precedence,t));return r.instance}function Bc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===r)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function rm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function sm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var qc=null;function b_(t,r,a){if(qc===null){var l=new Map,h=qc=new Map;h.set(a,l)}else h=qc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Ns]||d[ke]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(r)||"";_=t+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function S_(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function yA(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function A_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Vl=null;function vA(){}function _A(t,r,a){if(Vl===null)throw Error(s(475));var l=Vl;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=ao(a.href),d=t.querySelector(Ol(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Hc.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=d,Et(d);return}d=t.ownerDocument||t,a=T_(a),(h=Kn.get(h))&&rm(a,h),d=d.createElement("link"),Et(d);var _=d;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Wt(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Hc.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function EA(){if(Vl===null)throw Error(s(475));var t=Vl;return t.stylesheets&&t.count===0&&am(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&am(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Hc(){if(this.count--,this.count===0){if(this.stylesheets)am(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Fc=null;function am(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Fc=new Map,r.forEach(TA,t),Fc=null,Hc.call(t))}function TA(t,r){if(!(r.state.loading&4)){var a=Fc.get(t);if(a)var l=a.get(null);else{a=new Map,Fc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=r.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Hc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Pl={$$typeof:ie,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function wA(t,r,a,l,h,d,_,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=he(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=he(0),this.hiddenUpdates=he(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function R_(t,r,a,l,h,d,_,T,D,F,W,J){return t=new wA(t,r,a,_,T,D,F,J),r=1,d===!0&&(r|=24),d=In(3,null,null,r),t.current=d,d.stateNode=t,r=Bf(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Gf(d),t}function I_(t){return t?(t=Ua,t):Ua}function C_(t,r,a,l,h,d){h=I_(h),l.context===null?l.context=h:l.pendingContext=h,l=Pr(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=kr(t,l,r),a!==null&&(On(a,t,r),hl(a,t,r))}function N_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function om(t,r){N_(t,r),(t=t.alternate)&&N_(t,r)}function D_(t){if(t.tag===13){var r=La(t,67108864);r!==null&&On(r,t,67108864),om(t,67108864)}}var Gc=!0;function bA(t,r,a,l){var h=X.T;X.T=null;var d=oe.p;try{oe.p=2,lm(t,r,a,l)}finally{oe.p=d,X.T=h}}function SA(t,r,a,l){var h=X.T;X.T=null;var d=oe.p;try{oe.p=8,lm(t,r,a,l)}finally{oe.p=d,X.T=h}}function lm(t,r,a,l){if(Gc){var h=um(l);if(h===null)Yd(t,r,l,$c,a),O_(t,l);else if(RA(h,t,r,a,l))l.stopPropagation();else if(O_(t,l),r&4&&-1<AA.indexOf(t)){for(;h!==null;){var d=gi(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=gn(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-Lt(_);T.entanglements[1]|=D,_&=~D}Di(d),(tt&6)===0&&(Nc=ln()+500,Cl(0))}}break;case 13:T=La(d,2),T!==null&&On(T,d,2),xc(),om(d,2)}if(d=um(l),d===null&&Yd(t,r,l,$c,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Yd(t,r,l,null,a)}}function um(t){return t=Un(t),cm(t)}var $c=null;function cm(t){if($c=null,t=Gi(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=f(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return $c=t,null}function x_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lo()){case Ar:return 2;case Rr:return 8;case zi:case Uo:return 32;case Ir:return 268435456;default:return 32}default:return 32}}var hm=!1,Yr=null,Xr=null,Wr=null,kl=new Map,Ll=new Map,Zr=[],AA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(t,r){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":kl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(r.pointerId)}}function Ul(t,r,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},r!==null&&(r=gi(r),r!==null&&D_(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function RA(t,r,a,l,h){switch(r){case"focusin":return Yr=Ul(Yr,t,r,a,l,h),!0;case"dragenter":return Xr=Ul(Xr,t,r,a,l,h),!0;case"mouseover":return Wr=Ul(Wr,t,r,a,l,h),!0;case"pointerover":var d=h.pointerId;return kl.set(d,Ul(kl.get(d)||null,t,r,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ll.set(d,Ul(Ll.get(d)||null,t,r,a,l,h)),!0}return!1}function M_(t){var r=Gi(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=f(a),r!==null){t.blockedOn=r,Jn(t.priority,function(){if(a.tag===13){var l=xn();l=$t(l);var h=La(a,l);h!==null&&On(h,a,l),om(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=um(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Yi=l,a.target.dispatchEvent(l),Yi=null}else return r=gi(a),r!==null&&D_(r),t.blockedOn=a,!1;r.shift()}return!0}function V_(t,r,a){Kc(t)&&a.delete(r)}function IA(){hm=!1,Yr!==null&&Kc(Yr)&&(Yr=null),Xr!==null&&Kc(Xr)&&(Xr=null),Wr!==null&&Kc(Wr)&&(Wr=null),kl.forEach(V_),Ll.forEach(V_)}function Qc(t,r){t.blockedOn===r&&(t.blockedOn=null,hm||(hm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,IA)))}var Yc=null;function P_(t){Yc!==t&&(Yc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Yc===t&&(Yc=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],h=t[r+2];if(typeof l!="function"){if(cm(l||a)===null)continue;break}var d=gi(a);d!==null&&(t.splice(r,3),r-=3,cd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function jl(t){function r(D){return Qc(D,t)}Yr!==null&&Qc(Yr,t),Xr!==null&&Qc(Xr,t),Wr!==null&&Qc(Wr,t),kl.forEach(r),Ll.forEach(r);for(var a=0;a<Zr.length;a++){var l=Zr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Zr.length&&(a=Zr[0],a.blockedOn===null);)M_(a),a.blockedOn===null&&Zr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[Le]||null;if(typeof d=="function")_||P_(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Le]||null)T=_.formAction;else if(cm(h)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),P_(a)}}}function fm(t){this._internalRoot=t}Xc.prototype.render=fm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=xn();C_(a,l,t,r,null,null)},Xc.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;C_(t.current,2,null,t,null,null),xc(),r[kn]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var r=yn();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Zr.length&&r!==0&&r<Zr[a].priority;a++);Zr.splice(a,0,t),a===0&&M_(t)}};var k_=e.version;if(k_!=="19.1.0")throw Error(s(527,k_,"19.1.0"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var CA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{ft=Wc.inject(CA),Ye=Wc}catch{}}return Bl.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",h=Zy,d=Jy,_=ev,T=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=R_(t,1,!1,null,null,a,l,h,d,_,T,null),t[kn]=r.current,Qd(t),new fm(r)},Bl.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Zy,_=Jy,T=ev,D=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=R_(t,1,!0,r,a??null,l,h,d,_,T,D,F),r.context=I_(null),a=r.current,l=xn(),l=$t(l),h=Pr(l),h.callback=null,kr(a,h,l),a=l,r.current.lanes=a,ge(r,a),Di(r),t[kn]=r.current,Qd(t),new Xc(r)},Bl.version="19.1.0",Bl}var $_;function LA(){if($_)return pm.exports;$_=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),pm.exports=kA(),pm.exports}var UA=LA();const jA=()=>{};var K_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},zA=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},FE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,E=u>>2,b=(u&3)<<4|m>>4;let A=(m&15)<<2|g>>6,P=g&63;p||(P=64,f||(A=64)),s.push(n[E],n[b],n[A],n[P])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(HE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):zA(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||b==null)throw new BA;const A=u<<2|m>>4;if(s.push(A),g!==64){const P=m<<4&240|g>>2;if(s.push(P),b!==64){const V=g<<6&192|b;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class BA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qA=function(i){const e=HE(i);return FE.encodeByteArray(e,!0)},_h=function(i){return qA(i).replace(/\./g,"")},GE=function(i){try{return FE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=()=>HA().__FIREBASE_DEFAULTS__,GA=()=>{if(typeof process>"u"||typeof K_>"u")return;const i=K_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},$A=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&GE(i[1]);return e&&JSON.parse(e)},Bh=()=>{try{return jA()||FA()||GA()||$A()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},$E=i=>{var e,n;return(n=(e=Bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},KA=i=>{const e=$E(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},KE=()=>{var i;return(i=Bh())===null||i===void 0?void 0:i.config},QE=i=>{var e;return(e=Bh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[_h(JSON.stringify(n)),_h(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function WA(){var i;const e=(i=Bh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YE(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function JA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eR(){const i=on();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function tR(){return!WA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XE(){try{return typeof indexedDB=="object"}catch{return!1}}function WE(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function nR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="FirebaseError";class ci extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=iR,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,da.prototype.create)}}class da{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?rR(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new ci(o,m,s)}}function rR(i,e){return i.replace(sR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const sR=/\{\$([^}]+)}/g;function aR(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fs(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(Q_(u)&&Q_(f)){if(!fs(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Q_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Gl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function $l(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function oR(i,e){const n=new lR(i,e);return n.subscribe.bind(n)}class lR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");uR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=_m),o.error===void 0&&(o.error=_m),o.complete===void 0&&(o.complete=_m);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uR(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function _m(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1e3,hR=2,fR=4*60*60*1e3,dR=.5;function Y_(i,e=cR,n=hR){const s=e*Math.pow(n,i),o=Math.round(dR*s*(Math.random()-.5)*2);return Math.min(fR,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(i){return i&&i._delegate?i._delegate:i}class ai{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new QA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:pR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pR(i){return i===ra?void 0:i}function gR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ze||(ze={}));const vR={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},_R=ze.INFO,ER={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},TR=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=ER[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qh{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=TR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const wR=(i,e)=>e.some(n=>i instanceof n);let X_,W_;function bR(){return X_||(X_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SR(){return W_||(W_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZE=new WeakMap,Lm=new WeakMap,JE=new WeakMap,Em=new WeakMap,yp=new WeakMap;function AR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(os(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&ZE.set(n,i)}).catch(()=>{}),yp.set(e,i),e}function RR(i){if(Lm.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Lm.set(i,e)}let Um={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Lm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||JE.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function IR(i){Um=i(Um)}function CR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Tm(this),e,...n);return JE.set(s,e.sort?e.sort():[e]),os(s)}:SR().includes(i)?function(...e){return i.apply(Tm(this),e),os(ZE.get(this))}:function(...e){return os(i.apply(Tm(this),e))}}function NR(i){return typeof i=="function"?CR(i):(i instanceof IDBTransaction&&RR(i),wR(i,bR())?new Proxy(i,Um):i)}function os(i){if(i instanceof IDBRequest)return AR(i);if(Em.has(i))return Em.get(i);const e=NR(i);return e!==i&&(Em.set(i,e),yp.set(e,i)),e}const Tm=i=>yp.get(i);function eT(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=os(f);return s&&f.addEventListener("upgradeneeded",p=>{s(os(f.result),p.oldVersion,p.newVersion,os(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const DR=["get","getKey","getAll","getAllKeys","count"],xR=["put","add","delete","clear"],wm=new Map;function Z_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=xR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||DR.includes(n)))return;const u=async function(f,...m){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return wm.set(e,u),u}IR(i=>({...i,get:(e,n,s)=>Z_(e,n)||i.get(e,n,s),has:(e,n)=>!!Z_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function MR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jm="@firebase/app",J_="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new qh("@firebase/app"),VR="@firebase/app-compat",PR="@firebase/analytics-compat",kR="@firebase/analytics",LR="@firebase/app-check-compat",UR="@firebase/app-check",jR="@firebase/auth",zR="@firebase/auth-compat",BR="@firebase/database",qR="@firebase/data-connect",HR="@firebase/database-compat",FR="@firebase/functions",GR="@firebase/functions-compat",$R="@firebase/installations",KR="@firebase/installations-compat",QR="@firebase/messaging",YR="@firebase/messaging-compat",XR="@firebase/performance",WR="@firebase/performance-compat",ZR="@firebase/remote-config",JR="@firebase/remote-config-compat",eI="@firebase/storage",tI="@firebase/storage-compat",nI="@firebase/firestore",iI="@firebase/vertexai",rI="@firebase/firestore-compat",sI="firebase",aI="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="[DEFAULT]",oI={[jm]:"fire-core",[VR]:"fire-core-compat",[kR]:"fire-analytics",[PR]:"fire-analytics-compat",[UR]:"fire-app-check",[LR]:"fire-app-check-compat",[jR]:"fire-auth",[zR]:"fire-auth-compat",[BR]:"fire-rtdb",[qR]:"fire-data-connect",[HR]:"fire-rtdb-compat",[FR]:"fire-fn",[GR]:"fire-fn-compat",[$R]:"fire-iid",[KR]:"fire-iid-compat",[QR]:"fire-fcm",[YR]:"fire-fcm-compat",[XR]:"fire-perf",[WR]:"fire-perf-compat",[ZR]:"fire-rc",[JR]:"fire-rc-compat",[eI]:"fire-gcs",[tI]:"fire-gcs-compat",[nI]:"fire-fst",[rI]:"fire-fst-compat",[iI]:"fire-vertex","fire-js":"fire-js",[sI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new Map,lI=new Map,Bm=new Map;function e0(i,e){try{i.container.addComponent(e)}catch(n){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Li(i){const e=i.name;if(Bm.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,i);for(const n of Eh.values())e0(n,i);for(const n of lI.values())e0(n,i);return!0}function ma(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Qn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new da("app","Firebase",uI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=aI;function tT(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:zm,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw ls.create("bad-app-name",{appName:String(o)});if(n||(n=KE()),!n)throw ls.create("no-options");const u=Eh.get(o);if(u){if(fs(n,u.options)&&fs(s,u.config))return u;throw ls.create("duplicate-app",{appName:o})}const f=new yR(o);for(const p of Bm.values())f.addComponent(p);const m=new cI(n,s,f);return Eh.set(o,m),m}function vp(i=zm){const e=Eh.get(i);if(!e&&i===zm&&KE())return tT();if(!e)throw ls.create("no-app",{appName:i});return e}function Yn(i,e,n){var s;let o=(s=oI[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(m.join(" "));return}Li(new ai(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="firebase-heartbeat-database",fI=1,ru="firebase-heartbeat-store";let bm=null;function nT(){return bm||(bm=eT(hI,fI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(i=>{throw ls.create("idb-open",{originalErrorMessage:i.message})})),bm}async function dI(i){try{const n=(await nT()).transaction(ru),s=await n.objectStore(ru).get(iT(i));return await n.done,s}catch(e){if(e instanceof ci)_r.warn(e.message);else{const n=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_r.warn(n.message)}}}async function t0(i,e){try{const s=(await nT()).transaction(ru,"readwrite");await s.objectStore(ru).put(e,iT(i)),await s.done}catch(n){if(n instanceof ci)_r.warn(n.message);else{const s=ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_r.warn(s.message)}}}function iT(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=1024,pI=30;class gI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=n0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>pI){const f=_I(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){_r.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=n0(),{heartbeatsToSend:s,unsentEntries:o}=yI(this._heartbeatsCache.heartbeats),u=_h(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return _r.warn(n),""}}}function n0(){return new Date().toISOString().substring(0,10)}function yI(i,e=mI){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),i0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),i0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class vI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XE()?WE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return t0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return t0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function i0(i){return _h(JSON.stringify({version:2,heartbeats:i})).length}function _I(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(i){Li(new ai("platform-logger",e=>new OR(e),"PRIVATE")),Li(new ai("heartbeat",e=>new gI(e),"PRIVATE")),Yn(jm,J_,i),Yn(jm,J_,"esm2017"),Yn("fire-js","")}EI("");var TI="firebase",wI="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(TI,wI,"app");var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,rT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,R){function I(){}I.prototype=R.prototype,x.D=R.prototype,x.prototype=new I,x.prototype.constructor=x,x.C=function(N,M,L){for(var C=Array(arguments.length-2),et=2;et<arguments.length;et++)C[et-2]=arguments[et];return R.prototype[M].apply(N,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,I){I||(I=0);var N=Array(16);if(typeof R=="string")for(var M=0;16>M;++M)N[M]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(M=0;16>M;++M)N[M]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=x.g[0],I=x.g[1],M=x.g[2];var L=x.g[3],C=R+(L^I&(M^L))+N[0]+3614090360&4294967295;R=I+(C<<7&4294967295|C>>>25),C=L+(M^R&(I^M))+N[1]+3905402710&4294967295,L=R+(C<<12&4294967295|C>>>20),C=M+(I^L&(R^I))+N[2]+606105819&4294967295,M=L+(C<<17&4294967295|C>>>15),C=I+(R^M&(L^R))+N[3]+3250441966&4294967295,I=M+(C<<22&4294967295|C>>>10),C=R+(L^I&(M^L))+N[4]+4118548399&4294967295,R=I+(C<<7&4294967295|C>>>25),C=L+(M^R&(I^M))+N[5]+1200080426&4294967295,L=R+(C<<12&4294967295|C>>>20),C=M+(I^L&(R^I))+N[6]+2821735955&4294967295,M=L+(C<<17&4294967295|C>>>15),C=I+(R^M&(L^R))+N[7]+4249261313&4294967295,I=M+(C<<22&4294967295|C>>>10),C=R+(L^I&(M^L))+N[8]+1770035416&4294967295,R=I+(C<<7&4294967295|C>>>25),C=L+(M^R&(I^M))+N[9]+2336552879&4294967295,L=R+(C<<12&4294967295|C>>>20),C=M+(I^L&(R^I))+N[10]+4294925233&4294967295,M=L+(C<<17&4294967295|C>>>15),C=I+(R^M&(L^R))+N[11]+2304563134&4294967295,I=M+(C<<22&4294967295|C>>>10),C=R+(L^I&(M^L))+N[12]+1804603682&4294967295,R=I+(C<<7&4294967295|C>>>25),C=L+(M^R&(I^M))+N[13]+4254626195&4294967295,L=R+(C<<12&4294967295|C>>>20),C=M+(I^L&(R^I))+N[14]+2792965006&4294967295,M=L+(C<<17&4294967295|C>>>15),C=I+(R^M&(L^R))+N[15]+1236535329&4294967295,I=M+(C<<22&4294967295|C>>>10),C=R+(M^L&(I^M))+N[1]+4129170786&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^M&(R^I))+N[6]+3225465664&4294967295,L=R+(C<<9&4294967295|C>>>23),C=M+(R^I&(L^R))+N[11]+643717713&4294967295,M=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(M^L))+N[0]+3921069994&4294967295,I=M+(C<<20&4294967295|C>>>12),C=R+(M^L&(I^M))+N[5]+3593408605&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^M&(R^I))+N[10]+38016083&4294967295,L=R+(C<<9&4294967295|C>>>23),C=M+(R^I&(L^R))+N[15]+3634488961&4294967295,M=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(M^L))+N[4]+3889429448&4294967295,I=M+(C<<20&4294967295|C>>>12),C=R+(M^L&(I^M))+N[9]+568446438&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^M&(R^I))+N[14]+3275163606&4294967295,L=R+(C<<9&4294967295|C>>>23),C=M+(R^I&(L^R))+N[3]+4107603335&4294967295,M=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(M^L))+N[8]+1163531501&4294967295,I=M+(C<<20&4294967295|C>>>12),C=R+(M^L&(I^M))+N[13]+2850285829&4294967295,R=I+(C<<5&4294967295|C>>>27),C=L+(I^M&(R^I))+N[2]+4243563512&4294967295,L=R+(C<<9&4294967295|C>>>23),C=M+(R^I&(L^R))+N[7]+1735328473&4294967295,M=L+(C<<14&4294967295|C>>>18),C=I+(L^R&(M^L))+N[12]+2368359562&4294967295,I=M+(C<<20&4294967295|C>>>12),C=R+(I^M^L)+N[5]+4294588738&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^M)+N[8]+2272392833&4294967295,L=R+(C<<11&4294967295|C>>>21),C=M+(L^R^I)+N[11]+1839030562&4294967295,M=L+(C<<16&4294967295|C>>>16),C=I+(M^L^R)+N[14]+4259657740&4294967295,I=M+(C<<23&4294967295|C>>>9),C=R+(I^M^L)+N[1]+2763975236&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^M)+N[4]+1272893353&4294967295,L=R+(C<<11&4294967295|C>>>21),C=M+(L^R^I)+N[7]+4139469664&4294967295,M=L+(C<<16&4294967295|C>>>16),C=I+(M^L^R)+N[10]+3200236656&4294967295,I=M+(C<<23&4294967295|C>>>9),C=R+(I^M^L)+N[13]+681279174&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^M)+N[0]+3936430074&4294967295,L=R+(C<<11&4294967295|C>>>21),C=M+(L^R^I)+N[3]+3572445317&4294967295,M=L+(C<<16&4294967295|C>>>16),C=I+(M^L^R)+N[6]+76029189&4294967295,I=M+(C<<23&4294967295|C>>>9),C=R+(I^M^L)+N[9]+3654602809&4294967295,R=I+(C<<4&4294967295|C>>>28),C=L+(R^I^M)+N[12]+3873151461&4294967295,L=R+(C<<11&4294967295|C>>>21),C=M+(L^R^I)+N[15]+530742520&4294967295,M=L+(C<<16&4294967295|C>>>16),C=I+(M^L^R)+N[2]+3299628645&4294967295,I=M+(C<<23&4294967295|C>>>9),C=R+(M^(I|~L))+N[0]+4096336452&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~M))+N[7]+1126891415&4294967295,L=R+(C<<10&4294967295|C>>>22),C=M+(R^(L|~I))+N[14]+2878612391&4294967295,M=L+(C<<15&4294967295|C>>>17),C=I+(L^(M|~R))+N[5]+4237533241&4294967295,I=M+(C<<21&4294967295|C>>>11),C=R+(M^(I|~L))+N[12]+1700485571&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~M))+N[3]+2399980690&4294967295,L=R+(C<<10&4294967295|C>>>22),C=M+(R^(L|~I))+N[10]+4293915773&4294967295,M=L+(C<<15&4294967295|C>>>17),C=I+(L^(M|~R))+N[1]+2240044497&4294967295,I=M+(C<<21&4294967295|C>>>11),C=R+(M^(I|~L))+N[8]+1873313359&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~M))+N[15]+4264355552&4294967295,L=R+(C<<10&4294967295|C>>>22),C=M+(R^(L|~I))+N[6]+2734768916&4294967295,M=L+(C<<15&4294967295|C>>>17),C=I+(L^(M|~R))+N[13]+1309151649&4294967295,I=M+(C<<21&4294967295|C>>>11),C=R+(M^(I|~L))+N[4]+4149444226&4294967295,R=I+(C<<6&4294967295|C>>>26),C=L+(I^(R|~M))+N[11]+3174756917&4294967295,L=R+(C<<10&4294967295|C>>>22),C=M+(R^(L|~I))+N[2]+718787259&4294967295,M=L+(C<<15&4294967295|C>>>17),C=I+(L^(M|~R))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+M&4294967295,x.g[3]=x.g[3]+L&4294967295}s.prototype.u=function(x,R){R===void 0&&(R=x.length);for(var I=R-this.blockSize,N=this.B,M=this.h,L=0;L<R;){if(M==0)for(;L<=I;)o(this,x,L),L+=this.blockSize;if(typeof x=="string"){for(;L<R;)if(N[M++]=x.charCodeAt(L++),M==this.blockSize){o(this,N),M=0;break}}else for(;L<R;)if(N[M++]=x[L++],M==this.blockSize){o(this,N),M=0;break}}this.h=M,this.o+=R},s.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;var I=8*this.o;for(R=x.length-8;R<x.length;++R)x[R]=I&255,I/=256;for(this.u(x),x=Array(16),R=I=0;4>R;++R)for(var N=0;32>N;N+=8)x[I++]=this.g[R]>>>N&255;return x};function u(x,R){var I=m;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=R(x)}function f(x,R){this.h=R;for(var I=[],N=!0,M=x.length-1;0<=M;M--){var L=x[M]|0;N&&L==R||(I[M]=L,N=!1)}this.g=I}var m={};function p(x){return-128<=x&&128>x?u(x,function(R){return new f([R|0],0>R?-1:0)}):new f([x|0],0>x?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return b;if(0>x)return H(g(-x));for(var R=[],I=1,N=0;x>=I;N++)R[N]=x/I|0,I*=4294967296;return new f(R,0)}function E(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return H(E(x.substring(1),R));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(R,8)),N=b,M=0;M<x.length;M+=8){var L=Math.min(8,x.length-M),C=parseInt(x.substring(M,M+L),R);8>L?(L=g(Math.pow(R,L)),N=N.j(L).add(g(C))):(N=N.j(I),N=N.add(g(C)))}return N}var b=p(0),A=p(1),P=p(16777216);i=f.prototype,i.m=function(){if(Q(this))return-H(this).m();for(var x=0,R=1,I=0;I<this.g.length;I++){var N=this.i(I);x+=(0<=N?N:4294967296+N)*R,R*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V(this))return"0";if(Q(this))return"-"+H(this).toString(x);for(var R=g(Math.pow(x,6)),I=this,N="";;){var M=pe(I,R).g;I=Y(I,M.j(R));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(x);if(I=M,V(I))return L+N;for(;6>L.length;)L="0"+L;N=L+N}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function V(x){if(x.h!=0)return!1;for(var R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function Q(x){return x.h==-1}i.l=function(x){return x=Y(this,x),Q(x)?-1:V(x)?0:1};function H(x){for(var R=x.g.length,I=[],N=0;N<R;N++)I[N]=~x.g[N];return new f(I,~x.h).add(A)}i.abs=function(){return Q(this)?H(this):this},i.add=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],N=0,M=0;M<=R;M++){var L=N+(this.i(M)&65535)+(x.i(M)&65535),C=(L>>>16)+(this.i(M)>>>16)+(x.i(M)>>>16);N=C>>>16,L&=65535,C&=65535,I[M]=C<<16|L}return new f(I,I[I.length-1]&-2147483648?-1:0)};function Y(x,R){return x.add(H(R))}i.j=function(x){if(V(this)||V(x))return b;if(Q(this))return Q(x)?H(this).j(H(x)):H(H(this).j(x));if(Q(x))return H(this.j(H(x)));if(0>this.l(P)&&0>x.l(P))return g(this.m()*x.m());for(var R=this.g.length+x.g.length,I=[],N=0;N<2*R;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<x.g.length;M++){var L=this.i(N)>>>16,C=this.i(N)&65535,et=x.i(M)>>>16,it=x.i(M)&65535;I[2*N+2*M]+=C*it,se(I,2*N+2*M),I[2*N+2*M+1]+=L*it,se(I,2*N+2*M+1),I[2*N+2*M+1]+=C*et,se(I,2*N+2*M+1),I[2*N+2*M+2]+=L*et,se(I,2*N+2*M+2)}for(N=0;N<R;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=R;N<2*R;N++)I[N]=0;return new f(I,0)};function se(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function ie(x,R){this.g=x,this.h=R}function pe(x,R){if(V(R))throw Error("division by zero");if(V(x))return new ie(b,b);if(Q(x))return R=pe(H(x),R),new ie(H(R.g),H(R.h));if(Q(R))return R=pe(x,H(R)),new ie(H(R.g),R.h);if(30<x.g.length){if(Q(x)||Q(R))throw Error("slowDivide_ only works with positive integers.");for(var I=A,N=R;0>=N.l(x);)I=de(I),N=de(N);var M=be(I,1),L=be(N,1);for(N=be(N,2),I=be(I,2);!V(N);){var C=L.add(N);0>=C.l(x)&&(M=M.add(I),L=C),N=be(N,1),I=be(I,1)}return R=Y(x,M.j(R)),new ie(M,R)}for(M=b;0<=x.l(R);){for(I=Math.max(1,Math.floor(x.m()/R.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),L=g(I),C=L.j(R);Q(C)||0<C.l(x);)I-=N,L=g(I),C=L.j(R);V(L)&&(L=A),M=M.add(L),x=Y(x,C)}return new ie(M,x)}i.A=function(x){return pe(this,x).h},i.and=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)&x.i(N);return new f(I,this.h&x.h)},i.or=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)|x.i(N);return new f(I,this.h|x.h)},i.xor=function(x){for(var R=Math.max(this.g.length,x.g.length),I=[],N=0;N<R;N++)I[N]=this.i(N)^x.i(N);return new f(I,this.h^x.h)};function de(x){for(var R=x.g.length+1,I=[],N=0;N<R;N++)I[N]=x.i(N)<<1|x.i(N-1)>>>31;return new f(I,x.h)}function be(x,R){var I=R>>5;R%=32;for(var N=x.g.length-I,M=[],L=0;L<N;L++)M[L]=0<R?x.i(L+I)>>>R|x.i(L+I+1)<<32-R:x.i(L+I);return new f(M,x.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,rT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=E,us=f}).apply(typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{});var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sT,Kl,aT,ah,qm,oT,lT,uT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zc=="object"&&Zc];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var v=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var z=c[w];if(!(z in v))break e;v=v[z]}c=c[c.length-1],w=v[c],y=y(w),y!=w&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,w=!1,z={next:function(){if(!w&&v<c.length){var K=v++;return{value:y(K,c[K]),done:!1}}return w=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function E(c,y,v){return c.call.apply(c.bind,arguments)}function b(c,y,v){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,w),c.apply(y,z)}}return function(){return c.apply(y,arguments)}}function A(c,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:b,A.apply(null,arguments)}function P(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function V(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(w,z,K){for(var ae=Array(arguments.length-2),He=2;He<arguments.length;He++)ae[He-2]=arguments[He];return y.prototype[z].apply(w,ae)}}function Q(c){const y=c.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=c[w];return v}return[]}function H(c,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(p(w)){const z=c.length||0,K=w.length||0;c.length=z+K;for(let ae=0;ae<K;ae++)c[z+ae]=w[ae]}else c.push(w)}}class Y{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function se(c){return/^[\s\xa0]*$/.test(c)}function ie(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function pe(c){return pe[" "](c),c}pe[" "]=function(){};var de=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function be(c,y,v){for(const w in c)y.call(v,c[w],w,c)}function x(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function R(c){const y={};for(const v in c)y[v]=c[v];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,y){let v,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(v in w)c[v]=w[v];for(let K=0;K<I.length;K++)v=I[K],Object.prototype.hasOwnProperty.call(w,v)&&(c[v]=w[v])}}function M(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function L(c){m.setTimeout(()=>{throw c},0)}function C(){var c=qe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class et{constructor(){this.h=this.g=null}add(y,v){const w=it.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var it=new Y(()=>new X,c=>c.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ve=!1,qe=new et,O=()=>{const c=m.Promise.resolve(void 0);oe=()=>{c.then(te)}};var te=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(v){L(v)}var y=it;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ve=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};m.addEventListener("test",v,y),m.removeEventListener("test",v,y)}catch{}return c}();function De(c,y){if(re.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(de){e:{try{pe(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&De.aa.h.call(this)}}V(De,re);var _e={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var At="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function pn(c,y,v,w,z){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=z,this.key=++Qe,this.da=this.fa=!1}function fi(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Sn(c){this.src=c,this.g={},this.h=0}Sn.prototype.add=function(c,y,v,w,z){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var ae=Zn(c,y,w,z);return-1<ae?(y=c[ae],v||(y.fa=!1)):(y=new pn(y,this.src,K,!!w,z),y.fa=v,c.push(y)),y};function di(c,y){var v=y.type;if(v in c.g){var w=c.g[v],z=Array.prototype.indexOf.call(w,y,void 0),K;(K=0<=z)&&Array.prototype.splice.call(w,z,1),K&&(fi(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Zn(c,y,v,w){for(var z=0;z<c.length;++z){var K=c[z];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==w)return z}return-1}var mi="closure_lm_"+(1e6*Math.random()|0),Sr={};function Is(c,y,v,w,z){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Is(c,y[K],v,w,z);return null}return v=va(v),c&&c[At]?c.K(y,v,g(w)?!!w.capture:!1,z):ln(c,y,v,!1,w,z)}function ln(c,y,v,w,z,K){if(!y)throw Error("Invalid event type");var ae=g(z)?!!z.capture:!!z,He=Ir(c);if(He||(c[mi]=He=new Sn(c)),v=He.add(y,v,w,ae,K),v.proxy)return v;if(w=Lo(),v.proxy=w,w.src=c,w.listener=v,c.addEventListener)Te||(z=ae),z===void 0&&(z=!1),c.addEventListener(y.toString(),w,z);else if(c.attachEvent)c.attachEvent(zi(y.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Lo(){function c(v){return y.call(c.src,c.listener,v)}const y=Uo;return c}function Ar(c,y,v,w,z){if(Array.isArray(y))for(var K=0;K<y.length;K++)Ar(c,y[K],v,w,z);else w=g(w)?!!w.capture:!!w,v=va(v),c&&c[At]?(c=c.i,y=String(y).toString(),y in c.g&&(K=c.g[y],v=Zn(K,v,w,z),-1<v&&(fi(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete c.g[y],c.h--)))):c&&(c=Ir(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Zn(y,v,w,z)),(v=-1<c?y[c]:null)&&Rr(v))}function Rr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[At])di(y.i,c);else{var v=c.type,w=c.proxy;y.removeEventListener?y.removeEventListener(v,w,c.capture):y.detachEvent?y.detachEvent(zi(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=Ir(y))?(di(v,c),v.h==0&&(v.src=null,y[mi]=null)):fi(c)}}}function zi(c){return c in Sr?Sr[c]:Sr[c]="on"+c}function Uo(c,y){if(c.da)c=!0;else{y=new De(y,this);var v=c.listener,w=c.ha||c.src;c.fa&&Rr(c),c=v.call(w,y)}return c}function Ir(c){return c=c[mi],c instanceof Sn?c:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function va(c){return typeof c=="function"?c:(c[Cs]||(c[Cs]=function(y){return c.handleEvent(y)}),c[Cs])}function ft(){le.call(this),this.i=new Sn(this),this.M=this,this.F=null}V(ft,le),ft.prototype[At]=!0,ft.prototype.removeEventListener=function(c,y,v,w){Ar(this,c,y,v,w)};function Ye(c,y){var v,w=c.F;if(w)for(v=[];w;w=w.F)v.push(w);if(c=c.M,w=y.type||y,typeof y=="string")y=new re(y,c);else if(y instanceof re)y.target=y.target||c;else{var z=y;y=new re(w,c),N(y,z)}if(z=!0,v)for(var K=v.length-1;0<=K;K--){var ae=y.g=v[K];z=un(ae,w,!0,y)&&z}if(ae=y.g=c,z=un(ae,w,!0,y)&&z,z=un(ae,w,!1,y)&&z,v)for(K=0;K<v.length;K++)ae=y.g=v[K],z=un(ae,w,!1,y)&&z}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],w=0;w<v.length;w++)fi(v[w]);delete c.g[y],c.h--}}this.F=null},ft.prototype.K=function(c,y,v,w){return this.i.add(String(c),y,!1,v,w)},ft.prototype.L=function(c,y,v,w){return this.i.add(String(c),y,!0,v,w)};function un(c,y,v,w){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,K=0;K<y.length;++K){var ae=y[K];if(ae&&!ae.da&&ae.capture==v){var He=ae.listener,xt=ae.ha||ae.src;ae.fa&&di(c.i,ae),z=He.call(xt,w)!==!1&&z}}return z&&!w.defaultPrevented}function Lt(c,y,v){if(typeof c=="function")v&&(c=A(c,v));else if(c&&typeof c.handleEvent=="function")c=A(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function _a(c){c.g=Lt(()=>{c.g=null,c.i&&(c.i=!1,_a(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class jo extends le{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:_a(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(c){le.call(this),this.h=c,this.g={}}V(Bi,le);var pi=[];function qi(c){be(c.g,function(y,v){this.g.hasOwnProperty(v)&&Rr(y)},c),c.g={}}Bi.prototype.N=function(){Bi.aa.N.call(this),qi(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=m.JSON.stringify,Hi=m.JSON.parse,Fi=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function q(){}q.prototype.h=null;function ue(c){return c.h||(c.h=c.i())}function ye(){}var he={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){re.call(this,"d")}V(ge,re);function We(){re.call(this,"c")}V(We,re);var pt={},Pn=null;function $t(){return Pn=Pn||new ft}pt.La="serverreachability";function Ut(c){re.call(this,pt.La,c)}V(Ut,re);function yn(c){const y=$t();Ye(y,new Ut(y))}pt.STAT_EVENT="statevent";function Jn(c,y){re.call(this,pt.STAT_EVENT,c),this.stat=y}V(Jn,re);function lt(c){const y=$t();Ye(y,new Jn(y,c))}pt.Ma="timingevent";function ke(c,y){re.call(this,pt.Ma,c),this.size=y}V(ke,re);function Le(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function zo(c,y,v,w,z,K){c.info(function(){if(c.g)if(K)for(var ae="",He=K.split("&"),xt=0;xt<He.length;xt++){var Fe=He[xt].split("=");if(1<Fe.length){var zt=Fe[0];Fe=Fe[1];var Ot=zt.split("_");ae=2<=Ot.length&&Ot[1]=="type"?ae+(zt+"="+Fe+"&"):ae+(zt+"=redacted&")}}else ae=null;else ae=K;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+y+`
`+v+`
`+ae})}function gf(c,y,v,w,z,K,ae){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+y+`
`+v+`
`+K+" "+ae})}function Cr(c,y,v,w){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ns(c,v)+(w?" "+w:"")})}function Ou(c,y){c.info(function(){return"TIMEOUT: "+y})}kn.prototype.info=function(){};function Ns(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var w=v[c];if(!(2>w.length)){var z=w[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ae=1;ae<z.length;ae++)z[ae]=""}}}}return gn(v)}catch{return y}}var Nr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function yi(){}V(yi,q),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},gi=new yi;function cn(c,y,v,w){this.j=c,this.i=y,this.l=v,this.R=w||1,this.U=new Bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}var Bo={},Ea={};function ei(c,y,v){c.L=1,c.v=Vs(An(y)),c.m=v,c.P=!0,$i(c,null)}function $i(c,y){c.F=Date.now(),Ds(c),c.A=An(c.v);var v=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Ko(v.i,"t",w),c.C=0,v=c.j.J,c.h=new Et,c.g=Qu(c.j,v?y:null,!c.m),0<c.O&&(c.M=new jo(A(c.Y,c,c.g),c.O)),y=c.U,v=c.g,w=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(pi[0]=z.toString()),z=pi);for(var K=0;K<z.length;K++){var ae=Is(v,z[K],w||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),yn(),zo(c.i,c.u,c.A,c.l,c.R,c.m)}cn.prototype.ca=function(c){c=c.target;const y=this.M;y&&zn(c)==3?y.j():this.Y(c)},cn.prototype.Y=function(c){try{if(c==this.g)e:{const Ot=zn(this.g);var y=this.g.Ba();const er=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||zu(this.g)))){this.J||Ot!=4||y==7||(y==8||0>=er?yn(3):yn(2)),Dr(this);var v=this.g.Z();this.X=v;t:if(Mu(this)){var w=zu(this.g);c="";var z=w.length,K=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),vi(this);var ae="";break t}this.h.i=new m.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,c+=this.h.i.decode(w[y],{stream:!(K&&y==z-1)});w.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=v==200,gf(this.i,this.u,this.A,this.l,this.R,Ot,v),this.o){if(this.T&&!this.K){t:{if(this.g){var He,xt=this.g;if((He=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(He)){var Fe=He;break t}}Fe=null}if(v=Fe)Cr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,v);else{this.o=!1,this.s=3,lt(12),Kt(this),vi(this);break e}}if(this.P){v=!0;let Qt;for(;!this.J&&this.C<ae.length;)if(Qt=Vu(this,ae),Qt==Ea){Ot==4&&(this.s=4,lt(14),v=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Bo){this.s=4,lt(15),Cr(this.i,this.l,ae,"[Invalid Chunk]"),v=!1;break}else Cr(this.i,this.l,Qt,null),xs(this,Qt);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||ae.length!=0||this.h.h||(this.s=1,lt(16),v=!1),this.o=this.o&&v,!v)Cr(this.i,this.l,ae,"[Invalid Chunked Response]"),Kt(this),vi(this);else if(0<ae.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),qs(zt),zt.M=!0,lt(11))}}else Cr(this.i,this.l,ae,null),xs(this,ae);Ot==4&&Kt(this),this.o&&!this.J&&(Ot==4?Gu(this.j,this):(this.o=!1,Ds(this)))}else Tf(this.g),v==400&&0<ae.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Kt(this),vi(this)}}}catch{}finally{}};function Mu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Vu(c,y){var v=c.C,w=y.indexOf(`
`,v);return w==-1?Ea:(v=Number(y.substring(v,w)),isNaN(v)?Bo:(w+=1,w+v>y.length?Ea:(y=y.slice(w,w+v),c.C=w+v,y)))}cn.prototype.cancel=function(){this.J=!0,Kt(this)};function Ds(c){c.S=Date.now()+c.I,Pu(c,c.I)}function Pu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Le(A(c.ba,c),y)}function Dr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}cn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ou(this.i,this.A),this.L!=2&&(yn(),lt(17)),Kt(this),this.s=2,vi(this)):Pu(this,this.S-c)};function vi(c){c.j.G==0||c.J||Gu(c.j,c)}function Kt(c){Dr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,qi(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function xs(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||qo(v.h,c))){if(!c.K&&qo(v.h,c)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Oa(v),Da(v);else break e;Zo(v),lt(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Le(A(v.Za,v),6e3));if(1>=wa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ji(v,11)}else if((c.K||v.g==c)&&Oa(v),!se(y))for(z=v.Da.g.parse(y),y=0;y<z.length;y++){let Fe=z[y];if(v.T=Fe[0],Fe=Fe[1],v.G==2)if(Fe[0]=="c"){v.K=Fe[1],v.ia=Fe[2];const zt=Fe[3];zt!=null&&(v.la=zt,v.j.info("VER="+v.la));const Ot=Fe[4];Ot!=null&&(v.Aa=Ot,v.j.info("SVER="+v.Aa));const er=Fe[5];er!=null&&typeof er=="number"&&0<er&&(w=1.5*er,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Qt=c.g;if(Qt){const Ai=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ai){var K=w.h;K.g||Ai.indexOf("spdy")==-1&&Ai.indexOf("quic")==-1&&Ai.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ba(K,K.h),K.h=null))}if(w.D){const el=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(w.ya=el,rt(w.I,w.D,el))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ae=c;if(w.qa=Ku(w,w.J?w.ia:null,w.W),ae.K){hn(w.h,ae);var He=ae,xt=w.L;xt&&(He.I=xt),He.B&&(Dr(He),Ds(He)),w.g=ae}else Hu(w);0<v.i.length&&xa(v)}else Fe[0]!="stop"&&Fe[0]!="close"||Ji(v,7);else v.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Ji(v,7):Xo(v):Fe[0]!="noop"&&v.l&&v.l.ta(Fe),v.v=0)}}yn(4)}catch{}}var ku=class{constructor(c,y){this.g=c,this.map=y}};function Ki(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ta(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wa(c){return c.h?1:c.g?c.g.size:0}function qo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function ba(c,y){c.g?c.g.add(y):c.h=y}function hn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ki.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ho(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Q(c.i)}function yf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,w=0;w<v;w++)y.push(c[w]);return y}y=[],v=0;for(w in c)y[v++]=c[w];return y}function Sa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const w in c)y[v++]=w;return y}}}function Fo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Sa(c),w=yf(c),z=w.length,K=0;K<z;K++)y.call(void 0,w[K],v&&v[K],c)}var Os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vf(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var w=c[v].indexOf("="),z=null;if(0<=w){var K=c[v].substring(0,w);z=c[v].substring(w+1)}else K=c[v];y(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Rt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Rt){this.h=c.h,Ms(this,c.j),this.o=c.o,this.g=c.g,xr(this,c.s),this.l=c.l;var y=c.i,v=new Yi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Qi(this,v),this.m=c.m}else c&&(y=String(c).match(Os))?(this.h=!1,Ms(this,y[1]||"",!0),this.o=Ln(y[2]||""),this.g=Ln(y[3]||"",!0),xr(this,y[4]),this.l=Ln(y[5]||"",!0),Qi(this,y[6]||"",!0),this.m=Ln(y[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}Rt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Ps(y,Go,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Ps(y,Go,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Ps(v,v.charAt(0)=="/"?_f:$o,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Ps(v,Aa)),c.join("")};function An(c){return new Rt(c)}function Ms(c,y,v){c.j=v?Ln(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function xr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Qi(c,y,v){y instanceof Yi?(c.i=y,Uu(c.i,c.h)):(v||(y=Ps(y,Ef)),c.i=new Yi(y,c.h))}function rt(c,y,v){c.i.set(y,v)}function Vs(c){return rt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ln(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ps(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Lu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Lu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Go=/[#\/\?@]/g,$o=/[#\?:]/g,_f=/[#\?]/g,Ef=/[#\?@]/g,Aa=/#/g;function Yi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Un(c){c.g||(c.g=new Map,c.h=0,c.i&&vf(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=Yi.prototype,i.add=function(c,y){Un(this),this.i=null,c=_i(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Xi(c,y){Un(c),y=_i(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Wi(c,y){return Un(c),y=_i(c,y),c.g.has(y)}i.forEach=function(c,y){Un(this),this.g.forEach(function(v,w){v.forEach(function(z){c.call(y,z,w,this)},this)},this)},i.na=function(){Un(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const z=c[w];for(let K=0;K<z.length;K++)v.push(y[w])}return v},i.V=function(c){Un(this);let y=[];if(typeof c=="string")Wi(this,c)&&(y=y.concat(this.g.get(_i(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},i.set=function(c,y){return Un(this),this.i=null,c=_i(this,c),Wi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Ko(c,y,v){Xi(c,y),0<v.length&&(c.i=null,c.g.set(_i(c,y),Q(v)),c.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const K=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var z=K;ae[w]!==""&&(z+="="+encodeURIComponent(String(ae[w]))),c.push(z)}}return this.i=c.join("&")};function _i(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Uu(c,y){y&&!c.j&&(Un(c),c.i=null,c.g.forEach(function(v,w){var z=w.toLowerCase();w!=z&&(Xi(this,w),Ko(this,z,v))},c)),c.j=y}function ks(c,y){const v=new kn;if(m.Image){const w=new Image;w.onload=P(jn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=P(jn,v,"TestLoadImage: error",!1,y,w),w.onabort=P(jn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=P(jn,v,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else y(!1)}function ti(c,y){const v=new kn,w=new AbortController,z=setTimeout(()=>{w.abort(),jn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:w.signal}).then(K=>{clearTimeout(z),K.ok?jn(v,"TestPingServer: ok",!0,y):jn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),jn(v,"TestPingServer: error",!1,y)})}function jn(c,y,v,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(v)}catch{}}function Ls(){this.g=new Fi}function Ei(c,y,v){const w=v||"";try{Fo(c,function(z,K){let ae=z;g(z)&&(ae=gn(z)),y.push(w+K+"="+encodeURIComponent(ae))})}catch(z){throw y.push(w+"type="+encodeURIComponent("_badmap")),z}}function Or(c){this.l=c.Ub||null,this.j=c.eb||!1}V(Or,q),Or.prototype.g=function(){return new Zi(this.l,this.j)},Or.prototype.i=function(c){return function(){return c}}({});function Zi(c,y){ft.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Zi,ft),i=Zi.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,wi(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ti(this):wi(this),this.readyState==3&&Qo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ti(this))},i.Qa=function(c){this.g&&(this.response=c,Ti(this))},i.ga=function(){this.g&&Ti(this)};function Ti(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wi(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function wi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yo(c){let y="";return be(c,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function jt(c,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Yo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):rt(c,y,v))}function Ze(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Ze,ft);var Ra=/^https?$/i,Us=["POST","PUT"];i=Ze.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?ue(this.o):ue(gi),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(K){ju(this,K);return}if(c=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)v.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const K of w.keys())v.set(K,w.get(K));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),z=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Us,y,void 0))||w||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of v)this.g.setRequestHeader(K,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{js(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){ju(this,K)}};function ju(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Ia(c),bi(c)}function Ia(c){c.A||(c.A=!0,Ye(c,"complete"),Ye(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ye(this,"complete"),Ye(this,"abort"),bi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),Ze.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ca(this):this.bb())},i.bb=function(){Ca(this)};function Ca(c){if(c.h&&typeof f<"u"&&(!c.v[1]||zn(c)!=4||c.Z()!=2)){if(c.u&&zn(c)==4)Lt(c.Ea,0,c);else if(Ye(c,"readystatechange"),zn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=ae===0){var z=String(c.D).match(Os)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),w=!Ra.test(z?z.toLowerCase():"")}v=w}if(v)Ye(c,"complete"),Ye(c,"success");else{c.m=6;try{var K=2<zn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Ia(c)}}finally{bi(c)}}}}function bi(c,y){if(c.g){js(c);const v=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Ye(c,"ready");try{v.onreadystatechange=w}catch{}}}function js(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function zn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Hi(y)}};function zu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Tf(c){const y={};c=(c.g&&2<=zn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(se(c[w]))continue;var v=M(c[w]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[z]||[];y[z]=K,K.push(v)}x(y,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Na(c){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,c),this.cb=zs("retryDelaySeedMs",1e4,c),this.Wa=zs("forwardChannelMaxRetries",2,c),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ki(c&&c.concurrentRequestLimit),this.Da=new Ls,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Na.prototype,i.la=8,i.G=1,i.connect=function(c,y,v,w){lt(0),this.W=c,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Ku(this,null,this.W),xa(this)};function Xo(c){if(Bu(c),c.G==3){var y=c.U++,v=An(c.I);if(rt(v,"SID",c.K),rt(v,"RID",y),rt(v,"TYPE","terminate"),Bs(c,v),y=new cn(c,c.j,y),y.L=2,y.v=Vs(An(v)),v=!1,m.navigator&&m.navigator.sendBeacon)try{v=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&m.Image&&(new Image().src=y.v,v=!0),v||(y.g=Qu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ds(y)}$u(c)}function Da(c){c.g&&(qs(c),c.g.cancel(),c.g=null)}function Bu(c){Da(c),c.u&&(m.clearTimeout(c.u),c.u=null),Oa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function xa(c){if(!Ta(c.h)&&!c.s){c.s=!0;var y=c.Ga;oe||O(),ve||(oe(),ve=!0),qe.add(y,c),c.B=0}}function wf(c,y){return wa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Le(A(c.Ga,c,y),Jo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new cn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=R(K),N(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=qu(this,z,y),v=An(this.I),rt(v,"RID",c),rt(v,"CVER",22),this.D&&rt(v,"X-HTTP-Session-Id",this.D),Bs(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(Yo(K)))+"&"+y:this.m&&jt(v,this.m,K)),ba(this.h,z),this.Ua&&rt(v,"TYPE","init"),this.P?(rt(v,"$req",y),rt(v,"SID","null"),z.T=!0,ei(z,v,null)):ei(z,v,y),this.G=2}}else this.G==3&&(c?Wo(this,c):this.i.length==0||Ta(this.h)||Wo(this))};function Wo(c,y){var v;y?v=y.l:v=c.U++;const w=An(c.I);rt(w,"SID",c.K),rt(w,"RID",v),rt(w,"AID",c.T),Bs(c,w),c.m&&c.o&&jt(w,c.m,c.o),v=new cn(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=qu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ba(c.h,v),ei(v,w,y)}function Bs(c,y){c.H&&be(c.H,function(v,w){rt(y,w,v)}),c.l&&Fo({},function(v,w){rt(y,w,v)})}function qu(c,y,v){v=Math.min(c.i.length,v);var w=c.l?A(c.l.Na,c.l,c):null;e:{var z=c.i;let K=-1;for(;;){const ae=["count="+v];K==-1?0<v?(K=z[0].g,ae.push("ofs="+K)):K=0:ae.push("ofs="+K);let He=!0;for(let xt=0;xt<v;xt++){let Fe=z[xt].g;const zt=z[xt].map;if(Fe-=K,0>Fe)K=Math.max(0,z[xt].g-100),He=!1;else try{Ei(zt,ae,"req"+Fe+"_")}catch{w&&w(zt)}}if(He){w=ae.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,w}function Hu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;oe||O(),ve||(oe(),ve=!0),qe.add(y,c),c.v=0}}function Zo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Le(A(c.Fa,c),Jo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Le(A(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Da(this),Fu(this))};function qs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Fu(c){c.g=new cn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=An(c.qa);rt(y,"RID","rpc"),rt(y,"SID",c.K),rt(y,"AID",c.T),rt(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&rt(y,"TO",c.ja),rt(y,"TYPE","xmlhttp"),Bs(c,y),c.m&&c.o&&jt(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Vs(An(y)),v.m=null,v.P=!0,$i(v,c)}i.Za=function(){this.C!=null&&(this.C=null,Da(this),Zo(this),lt(19))};function Oa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Gu(c,y){var v=null;if(c.g==y){Oa(c),qs(c),c.g=null;var w=2}else if(qo(c.h,y))v=y.D,hn(c.h,y),w=1;else return;if(c.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var z=c.B;w=$t(),Ye(w,new ke(w,v)),xa(c)}else Hu(c);else if(z=y.s,z==3||z==0&&0<y.X||!(w==1&&wf(c,y)||w==2&&Zo(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),z){case 1:Ji(c,5);break;case 4:Ji(c,10);break;case 3:Ji(c,6);break;default:Ji(c,2)}}}function Jo(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Ji(c,y){if(c.j.info("Error code "+y),y==2){var v=A(c.fb,c),w=c.Xa;const z=!w;w=new Rt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ms(w,"https"),Vs(w),z?ks(w.toString(),v):ti(w.toString(),v)}else lt(2);c.G=0,c.l&&c.l.sa(y),$u(c),Bu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function $u(c){if(c.G=0,c.ka=[],c.l){const y=Ho(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ka,y),H(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function Ku(c,y,v){var w=v instanceof Rt?An(v):new Rt(v);if(w.g!="")y&&(w.g=y+"."+w.g),xr(w,w.s);else{var z=m.location;w=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var K=new Rt(null);w&&Ms(K,w),y&&(K.g=y),z&&xr(K,z),v&&(K.l=v),w=K}return v=c.D,y=c.ya,v&&y&&rt(w,v,y),rt(w,"VER",c.la),Bs(c,w),w}function Qu(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new Ze(new Or({eb:v})):new Ze(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yu(){}i=Yu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ma(){}Ma.prototype.g=function(c,y){return new fn(c,y)};function fn(c,y){ft.call(this),this.g=new Na(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!se(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!se(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new Si(this)}V(fn,ft),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Xo(this.g)},fn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=gn(c),c=v);y.i.push(new ku(y.Ya++,c)),y.G==3&&xa(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,fn.aa.N.call(this)};function Xu(c){ge.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}V(Xu,ge);function Wu(){We.call(this),this.status=1}V(Wu,We);function Si(c){this.g=c}V(Si,Yu),Si.prototype.ua=function(){Ye(this.g,"a")},Si.prototype.ta=function(c){Ye(this.g,new Xu(c))},Si.prototype.sa=function(c){Ye(this.g,new Wu)},Si.prototype.ra=function(){Ye(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,uT=function(){return new Ma},lT=function(){return $t()},oT=pt,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,ah=Nr,Gi.COMPLETE="complete",aT=Gi,ye.EventType=he,he.OPEN="a",he.CLOSE="b",he.ERROR="c",he.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Kl=ye,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,sT=Ze}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});const s0="@firebase/firestore",a0="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new qh("@firebase/firestore");function uo(){return oa.logLevel}function ce(i,...e){if(oa.logLevel<=ze.DEBUG){const n=e.map(_p);oa.debug(`Firestore (${Co}): ${i}`,...n)}}function Er(i,...e){if(oa.logLevel<=ze.ERROR){const n=e.map(_p);oa.error(`Firestore (${Co}): ${i}`,...n)}}function Eo(i,...e){if(oa.logLevel<=ze.WARN){const n=e.map(_p);oa.warn(`Firestore (${Co}): ${i}`,...n)}}function _p(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(i="Unexpected state"){const e=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: `+i;throw Er(e),new Error(e)}function Je(i,e){i||Ce()}function xe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class SI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AI{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new cs,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new cs)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string"),new cT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new sn(e)}}class RI{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class II{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new RI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class o0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CI{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Qn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Je(this.o===void 0);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.R;return this.R=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new o0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Je(typeof n.token=="string"),this.R=n.token,new o0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=NI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ve(i,e){return i<e?-1:i>e?1:0}function Hm(i,e){let n=0;for(;n<i.length&&n<e.length;){const s=i.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ve(s,o);{const u=hT(),f=DI(u.encode(l0(i,n)),u.encode(l0(e,n)));return f!==0?f:Ve(s,o)}}n+=s>65535?2:1}return Ve(i.length,e.length)}function l0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function DI(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return Ve(i[n],e[n]);return Ve(i.length,e.length)}function To(i,e,n){return i.length===e.length&&i.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=-62135596800,c0=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*c0);return new Pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<u0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c0}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-u0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Pt(0,0))}static max(){return new Ne(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__name__";class xi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ce(),s===void 0?s=e.length-n:s>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return xi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=xi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ve(e.length,n.length)}static compareSegments(e,n){const s=xi.isNumericId(e),o=xi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?xi.extractNumericId(e).compare(xi.extractNumericId(n)):Hm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class ht extends xi{construct(e,n,s){return new ht(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ht(n)}static emptyPath(){return new ht([])}}const xI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends xi{construct(e,n,s){return new Jt(e,n,s)}static isValidIdentifier(e){return xI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h0}static keyField(){return new Jt([h0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(ht.fromString(e))}static fromName(e){return new we(ht.fromString(e).popFirst(5))}static empty(){return new we(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ht(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function OI(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new Pt(n+1,0):new Pt(n,s));return new ds(o,we.empty(),e)}function MI(i){return new ds(i.readTime,i.key,su)}class ds{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ds(Ne.min(),we.empty(),su)}static max(){return new ds(Ne.max(),we.empty(),su)}}function VI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(i.documentKey,e.documentKey),n!==0?n:Ve(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==PI)throw i;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,s)=>{n(e)})}static reject(e){return new ee((n,s)=>{s(e)})}static waitFor(e){return new ee((n,s)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},p=>s(p))}),f=!0,u===o&&n()})}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next(o=>o?ee.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ee((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(E=>{f[g]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(e,n){return new ee((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function LI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Do(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Hh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=-1;function Fh(i){return i==null}function Th(i){return i===0&&1/i==-1/0}function UI(i){return typeof i=="number"&&Number.isInteger(i)&&!Th(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="";function jI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=f0(e)),e=zI(i.get(n),e);return f0(e)}function zI(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case dT:n+="";break;default:n+=u}}return n}function f0(i){return i+dT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Es(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function mT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Zt.RED,this.left=o??Zt.EMPTY,this.right=u??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Zt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,s,o,u){return this}insert(e,n,s){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new m0(this.data.getIterator())}getIteratorFrom(e){return new m0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class m0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new kt(Jt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new pT("Invalid base64 string: "+u):u}}(e);return new en(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const BI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(Je(!!i),typeof i=="string"){let e=0;const n=BI.exec(i);if(Je(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(i.seconds),nanos:bt(i.nanos)}}function bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ps(i){return typeof i=="string"?en.fromBase64String(i):en.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="server_timestamp",yT="__type__",vT="__previous_value__",_T="__local_write_time__";function Tp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[yT])===null||n===void 0?void 0:n.stringValue)===gT}function Gh(i){const e=i.mapValue.fields[vT];return Tp(e)?Gh(e):e}function au(i){const e=ms(i.mapValue.fields[_T].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,s,o,u,f,m,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g}}const wh="(default)";class ou{constructor(e,n){this.projectId=e,this.database=n||wh}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===wh}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="__type__",HI="__max__",eh={mapValue:{}},TT="__vector__",bh="value";function gs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Tp(i)?4:GI(i)?9007199254740991:FI(i)?10:11:Ce()}function Ui(i,e){if(i===e)return!0;const n=gs(i);if(n!==gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return au(i).isEqual(au(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ms(o.timestampValue),m=ms(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ps(o.bytesValue).isEqual(ps(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return bt(o.geoPointValue.latitude)===bt(u.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return bt(o.integerValue)===bt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=bt(o.doubleValue),m=bt(u.doubleValue);return f===m?Th(f)===Th(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return To(i.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(d0(f)!==d0(m))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(m[p]===void 0||!Ui(f[p],m[p])))return!1;return!0}(i,e);default:return Ce()}}function lu(i,e){return(i.values||[]).find(n=>Ui(n,e))!==void 0}function wo(i,e){if(i===e)return 0;const n=gs(i),s=gs(e);if(n!==s)return Ve(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(i.booleanValue,e.booleanValue);case 2:return function(u,f){const m=bt(u.integerValue||u.doubleValue),p=bt(f.integerValue||f.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return p0(i.timestampValue,e.timestampValue);case 4:return p0(au(i),au(e));case 5:return Hm(i.stringValue,e.stringValue);case 6:return function(u,f){const m=ps(u),p=ps(f);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),p=f.split("/");for(let g=0;g<m.length&&g<p.length;g++){const E=Ve(m[g],p[g]);if(E!==0)return E}return Ve(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Ve(bt(u.latitude),bt(f.latitude));return m!==0?m:Ve(bt(u.longitude),bt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return g0(i.arrayValue,e.arrayValue);case 10:return function(u,f){var m,p,g,E;const b=u.fields||{},A=f.fields||{},P=(m=b[bh])===null||m===void 0?void 0:m.arrayValue,V=(p=A[bh])===null||p===void 0?void 0:p.arrayValue,Q=Ve(((g=P==null?void 0:P.values)===null||g===void 0?void 0:g.length)||0,((E=V==null?void 0:V.values)===null||E===void 0?void 0:E.length)||0);return Q!==0?Q:g0(P,V)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===eh.mapValue&&f===eh.mapValue)return 0;if(u===eh.mapValue)return 1;if(f===eh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=f.fields||{},E=Object.keys(g);p.sort(),E.sort();for(let b=0;b<p.length&&b<E.length;++b){const A=Hm(p[b],E[b]);if(A!==0)return A;const P=wo(m[p[b]],g[E[b]]);if(P!==0)return P}return Ve(p.length,E.length)}(i.mapValue,e.mapValue);default:throw Ce()}}function p0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ve(i,e);const n=ms(i),s=ms(e),o=Ve(n.seconds,s.seconds);return o!==0?o:Ve(n.nanos,s.nanos)}function g0(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=wo(n[o],s[o]);if(u)return u}return Ve(n.length,s.length)}function bo(i){return Fm(i)}function Fm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ms(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ps(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return we.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Fm(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Fm(n.fields[f])}`;return o+"}"}(i.mapValue):Ce()}function oh(i){switch(gs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gh(i);return e?16+oh(e):16;case 5:return 2*i.stringValue.length;case 6:return ps(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+oh(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return Es(s.fields,(u,f)=>{o+=u.length+oh(f)}),o}(i.mapValue);default:throw Ce()}}function y0(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Gm(i){return!!i&&"integerValue"in i}function wp(i){return!!i&&"arrayValue"in i}function v0(i){return!!i&&"nullValue"in i}function _0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function lh(i){return!!i&&"mapValue"in i}function FI(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[ET])===null||n===void 0?void 0:n.stringValue)===TT}function Wl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Es(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Wl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wl(i.arrayValue.values[n]);return e}return Object.assign({},i)}function GI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===HI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(n)}setAll(e){let n=Jt.emptyPath(),s={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Wl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Es(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new wn(Wl(this.value))}}function wT(i){const e=[];return Es(i.fields,(n,s)=>{const o=new Jt([n]);if(lh(s)){const u=wT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new an(e,0,Ne.min(),Ne.min(),Ne.min(),wn.empty(),0)}static newFoundDocument(e,n,s,o){return new an(e,1,n,Ne.min(),s,o,0)}static newNoDocument(e,n){return new an(e,2,n,Ne.min(),Ne.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Ne.min(),Ne.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.position=e,this.inclusive=n}}function E0(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=we.comparator(we.fromName(f.referenceValue),n.key):s=wo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function T0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ui(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function $I(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{}class Dt extends bT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new QI(e,n,s):n==="array-contains"?new WI(e,s):n==="in"?new ZI(e,s):n==="not-in"?new JI(e,s):n==="array-contains-any"?new e1(e,s):new Dt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new YI(e,s):new XI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wo(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends bT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new oi(e,n)}matches(e){return ST(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function ST(i){return i.op==="and"}function AT(i){return KI(i)&&ST(i)}function KI(i){for(const e of i.filters)if(e instanceof oi)return!1;return!0}function $m(i){if(i instanceof Dt)return i.field.canonicalString()+i.op.toString()+bo(i.value);if(AT(i))return i.filters.map(e=>$m(e)).join(",");{const e=i.filters.map(n=>$m(n)).join(",");return`${i.op}(${e})`}}function RT(i,e){return i instanceof Dt?function(s,o){return o instanceof Dt&&s.op===o.op&&s.field.isEqual(o.field)&&Ui(s.value,o.value)}(i,e):i instanceof oi?function(s,o){return o instanceof oi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&RT(f,o.filters[m]),!0):!1}(i,e):void Ce()}function IT(i){return i instanceof Dt?function(n){return`${n.field.canonicalString()} ${n.op} ${bo(n.value)}`}(i):i instanceof oi?function(n){return n.op.toString()+" {"+n.getFilters().map(IT).join(" ,")+"}"}(i):"Filter"}class QI extends Dt{constructor(e,n,s){super(e,n,s),this.key=we.fromName(s.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class YI extends Dt{constructor(e,n){super(e,"in",n),this.keys=CT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XI extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=CT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CT(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>we.fromName(s.referenceValue))}class WI extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wp(n)&&lu(n.arrayValue,this.value)}}class ZI extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lu(this.value.arrayValue,n)}}class JI extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!lu(this.value.arrayValue,n)}}class e1 extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>lu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.le=null}}function w0(i,e=null,n=[],s=[],o=null,u=null,f=null){return new t1(i,e,n,s,o,u,f)}function bp(i){const e=xe(i);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>$m(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>bo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>bo(s)).join(",")),e.le=n}return e.le}function Sp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!$I(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!RT(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!T0(i.startAt,e.startAt)&&T0(i.endAt,e.endAt)}function Km(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function n1(i,e,n,s,o,u,f,m){return new xo(i,e,n,s,o,u,f,m)}function Ap(i){return new xo(i)}function b0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function NT(i){return i.collectionGroup!==null}function Zl(i){const e=xe(i);if(e.he===null){e.he=[];const n=new Set;for(const u of e.explicitOrderBy)e.he.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new kt(Jt.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.he.push(new uu(u,s))}),n.has(Jt.keyField().canonicalString())||e.he.push(new uu(Jt.keyField(),s))}return e.he}function Mi(i){const e=xe(i);return e.Pe||(e.Pe=i1(e,Zl(i))),e.Pe}function i1(i,e){if(i.limitType==="F")return w0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new uu(o.field,u)});const n=i.endAt?new Sh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Sh(i.startAt.position,i.startAt.inclusive):null;return w0(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Qm(i,e){const n=i.filters.concat([e]);return new xo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Ym(i,e,n){return new xo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function $h(i,e){return Sp(Mi(i),Mi(e))&&i.limitType===e.limitType}function DT(i){return`${bp(Mi(i))}|lt:${i.limitType}`}function co(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>IT(o)).join(", ")}]`),Fh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>bo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>bo(o)).join(",")),`Target(${s})`}(Mi(i))}; limitType=${i.limitType})`}function Kh(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):we.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of Zl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(f,m,p){const g=E0(f,m,p);return f.inclusive?g<=0:g<0}(s.startAt,Zl(s),o)||s.endAt&&!function(f,m,p){const g=E0(f,m,p);return f.inclusive?g>=0:g>0}(s.endAt,Zl(s),o))}(i,e)}function r1(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function xT(i){return(e,n)=>{let s=!1;for(const o of Zl(i)){const u=s1(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function s1(i,e,n){const s=i.field.isKeyField()?we.comparator(e.key,n.key):function(u,f,m){const p=f.data.field(u),g=m.data.field(u);return p!==null&&g!==null?wo(p,g):Ce()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return mT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new yt(we.comparator);function Tr(){return a1}const OT=new yt(we.comparator);function Ql(...i){let e=OT;for(const n of i)e=e.insert(n.key,n);return e}function MT(i){let e=OT;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function sa(){return Jl()}function VT(){return Jl()}function Jl(){return new pa(i=>i.toString(),(i,e)=>i.isEqual(e))}const o1=new yt(we.comparator),l1=new kt(we.comparator);function Be(...i){let e=l1;for(const n of i)e=e.add(n);return e}const u1=new kt(Ve);function c1(){return u1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function PT(i){return{integerValue:""+i}}function kT(i,e){return UI(e)?PT(e):Rp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this._=void 0}}function h1(i,e,n){return i instanceof cu?function(o,u){const f={fields:{[yT]:{stringValue:gT},[_T]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Tp(u)&&(u=Gh(u)),u&&(f.fields[vT]=u),{mapValue:f}}(n,e):i instanceof hu?UT(i,e):i instanceof fu?jT(i,e):function(o,u){const f=LT(o,u),m=S0(f)+S0(o.Ie);return Gm(f)&&Gm(o.Ie)?PT(m):Rp(o.serializer,m)}(i,e)}function f1(i,e,n){return i instanceof hu?UT(i,e):i instanceof fu?jT(i,e):n}function LT(i,e){return i instanceof du?function(s){return Gm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class cu extends Qh{}class hu extends Qh{constructor(e){super(),this.elements=e}}function UT(i,e){const n=zT(e);for(const s of i.elements)n.some(o=>Ui(o,s))||n.push(s);return{arrayValue:{values:n}}}class fu extends Qh{constructor(e){super(),this.elements=e}}function jT(i,e){let n=zT(e);for(const s of i.elements)n=n.filter(o=>!Ui(o,s));return{arrayValue:{values:n}}}class du extends Qh{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function S0(i){return bt(i.integerValue||i.doubleValue)}function zT(i){return wp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.field=e,this.transform=n}}function d1(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof hu&&o instanceof hu||s instanceof fu&&o instanceof fu?To(s.elements,o.elements,Ui):s instanceof du&&o instanceof du?Ui(s.Ie,o.Ie):s instanceof cu&&o instanceof cu}(i.transform,e.transform)}class m1{constructor(e,n){this.version=e,this.transformResults=n}}class Xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Yh{}function qT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ip(i.key,Xn.none()):new vu(i.key,i.data,Xn.none());{const n=i.data,s=wn.empty();let o=new kt(Jt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Ts(i.key,s,new Mn(o.toArray()),Xn.none())}}function p1(i,e,n){i instanceof vu?function(o,u,f){const m=o.value.clone(),p=R0(o.fieldTransforms,u,f.transformResults);m.setAll(p),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Ts?function(o,u,f){if(!uh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=R0(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(HT(o)),p.setAll(m),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function eu(i,e,n,s){return i instanceof vu?function(u,f,m,p){if(!uh(u.precondition,f))return m;const g=u.value.clone(),E=I0(u.fieldTransforms,p,f);return g.setAll(E),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(i,e,n,s):i instanceof Ts?function(u,f,m,p){if(!uh(u.precondition,f))return m;const g=I0(u.fieldTransforms,p,f),E=f.data;return E.setAll(HT(u)),E.setAll(g),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(b=>b.field))}(i,e,n,s):function(u,f,m){return uh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function g1(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=LT(s.transform,o||null);u!=null&&(n===null&&(n=wn.empty()),n.set(s.field,u))}return n||null}function A0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&To(s,o,(u,f)=>d1(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class vu extends Yh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ts extends Yh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function HT(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function R0(i,e,n){const s=new Map;Je(i.length===n.length);for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,f1(f,m,n[o]))}return s}function I0(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,h1(u,f,e))}return s}class Ip extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y1 extends Yh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&p1(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=eu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=eu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=VT();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const p=qT(f,m);p!==null&&s.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Ne.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(n,s)=>A0(n,s))&&To(this.baseMutations,e.baseMutations,(n,s)=>A0(n,s))}}class Cp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Je(e.mutations.length===s.length);let o=function(){return o1}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Cp(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,$e;function T1(i){switch(i){case ne.OK:return Ce();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ce()}}function FT(i){if(i===void 0)return Er("GRPC error has no .code"),ne.UNKNOWN;switch(i){case Nt.OK:return ne.OK;case Nt.CANCELLED:return ne.CANCELLED;case Nt.UNKNOWN:return ne.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ne.INTERNAL;case Nt.UNAVAILABLE:return ne.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ne.NOT_FOUND;case Nt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Nt.ABORTED:return ne.ABORTED;case Nt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Nt.DATA_LOSS:return ne.DATA_LOSS;default:return Ce()}}($e=Nt||(Nt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=new us([4294967295,4294967295],0);function C0(i){const e=hT().encode(i),n=new rT;return n.update(e),new Uint8Array(n.digest())}function N0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new us([n,s],0),new us([o,u],0)]}class Np{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(s<0)throw new Yl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=us.fromNumber(this.Ee)}Ae(e,n,s){let o=e.add(n.multiply(us.fromNumber(s)));return o.compare(w1)===1&&(o=new us([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=C0(e),[s,o]=N0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);if(!this.Re(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Np(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Ee===0)return;const n=C0(e),[s,o]=N0(n);for(let u=0;u<this.hashCount;u++){const f=this.Ae(s,o,u);this.Ve(f)}}Ve(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Xh(Ne.min(),o,new yt(Ve),Tr(),Be())}}class _u{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new _u(s,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,s,o){this.me=e,this.removedTargetIds=n,this.key=s,this.fe=o}}class GT{constructor(e,n){this.targetId=e,this.ge=n}}class $T{constructor(e,n,s=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class D0{constructor(){this.pe=0,this.ye=x0(),this.we=en.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Be(),n=Be(),s=Be();return this.ye.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ce()}}),new _u(this.we,this.Se,e,n,s)}Me(){this.be=!1,this.ye=x0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Je(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class b1{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Tr(),this.$e=th(),this.Ue=th(),this.Ke=new yt(Ve)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const s=this.He(n);switch(e.state){case 0:this.Je(n)&&s.Ce(e.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(e.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((s,o)=>{this.Je(o)&&n(o)})}Ze(e){const n=e.targetId,s=e.ge.count,o=this.Xe(n);if(o){const u=o.target;if(Km(u))if(s===0){const f=new we(u.path);this.ze(n,f,an.newNoDocument(f,Ne.min()))}else Je(s===1);else{const f=this.et(n);if(f!==s){const m=this.tt(e),p=m?this.nt(m,e,f):1;if(p!==0){this.Ye(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,g)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ps(s).toUint8Array()}catch(p){if(p instanceof pT)return Eo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Np(f,o,u)}catch(p){return Eo(p instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.Ee===0?null:m}nt(e,n,s){return n.ge.count===s-this.st(e,n.targetId)?0:2}st(e,n){const s=this.ke.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ke.it(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.ze(n,u,null),o++)}),o}ot(e){const n=new Map;this.qe.forEach((u,f)=>{const m=this.Xe(f);if(m){if(u.current&&Km(m.target)){const p=new we(m.target.path);this._t(p).has(f)||this.ut(f,p)||this.ze(f,p,an.newNoDocument(p,e))}u.ve&&(n.set(f,u.Fe()),u.Me())}});let s=Be();this.Ue.forEach((u,f)=>{let m=!0;f.forEachWhile(p=>{const g=this.Xe(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.Qe.forEach((u,f)=>f.setReadTime(e));const o=new Xh(e,n,this.Ke,this.Qe,s);return this.Qe=Tr(),this.$e=th(),this.Ue=th(),this.Ke=new yt(Ve),o}Ge(e,n){if(!this.Je(e))return;const s=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,s){if(!this.Je(e))return;const o=this.He(e);this.ut(e,n)?o.xe(n,1):o.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new D0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new kt(Ve),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new kt(Ve),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new D0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function th(){return new yt(we.comparator)}function x0(){return new yt(we.comparator)}const S1={asc:"ASCENDING",desc:"DESCENDING"},A1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},R1={and:"AND",or:"OR"};class I1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xm(i,e){return i.useProto3Json||Fh(e)?e:{value:e}}function Ah(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function C1(i,e){return Ah(i,e.toTimestamp())}function Vi(i){return Je(!!i),Ne.fromTimestamp(function(n){const s=ms(n);return new Pt(s.seconds,s.nanos)}(i))}function Dp(i,e){return Wm(i,e).canonicalString()}function Wm(i,e){const n=function(o){return new ht(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function QT(i){const e=ht.fromString(i);return Je(JT(e)),e}function Zm(i,e){return Dp(i.databaseId,e.path)}function Sm(i,e){const n=QT(e);if(n.get(1)!==i.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new we(XT(n))}function YT(i,e){return Dp(i.databaseId,e)}function N1(i){const e=QT(i);return e.length===4?ht.emptyPath():XT(e)}function Jm(i){return new ht(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function XT(i){return Je(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function O0(i,e,n){return{name:Zm(i,e),fields:n.value.mapValue.fields}}function D1(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,E){return g.useProto3Json?(Je(E===void 0||typeof E=="string"),en.fromBase64String(E||"")):(Je(E===void 0||E instanceof Buffer||E instanceof Uint8Array),en.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(g){const E=g.code===void 0?ne.UNKNOWN:FT(g.code);return new fe(E,g.message||"")}(f);n=new $T(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Sm(i,s.document.name),u=Vi(s.document.updateTime),f=s.document.createTime?Vi(s.document.createTime):Ne.min(),m=new wn({mapValue:{fields:s.document.fields}}),p=an.newFoundDocument(o,u,f,m),g=s.targetIds||[],E=s.removedTargetIds||[];n=new ch(g,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Sm(i,s.document),u=s.readTime?Vi(s.readTime):Ne.min(),f=an.newNoDocument(o,u),m=s.removedTargetIds||[];n=new ch([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Sm(i,s.document),u=s.removedTargetIds||[];n=new ch([],u,o,null)}else{if(!("filter"in e))return Ce();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new E1(o,u),m=s.targetId;n=new GT(m,f)}}return n}function x1(i,e){let n;if(e instanceof vu)n={update:O0(i,e.key,e.value)};else if(e instanceof Ip)n={delete:Zm(i,e.key)};else if(e instanceof Ts)n={update:O0(i,e.key,e.data),updateMask:z1(e.fieldMask)};else{if(!(e instanceof y1))return Ce();n={verify:Zm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof cu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof hu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof du)return{fieldPath:f.field.canonicalString(),increment:m.Ie};throw Ce()}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:C1(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ce()}(i,e.precondition)),n}function O1(i,e){return i&&i.length>0?(Je(e!==void 0),i.map(n=>function(o,u){let f=o.updateTime?Vi(o.updateTime):Vi(u);return f.isEqual(Ne.min())&&(f=Vi(u)),new m1(f,o.transformResults||[])}(n,e))):[]}function M1(i,e){return{documents:[YT(i,e.path)]}}function V1(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=YT(i,o);const u=function(g){if(g.length!==0)return ZT(oi.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(E=>function(A){return{field:ho(A.field),direction:L1(A.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Xm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ht:n,parent:o}}function P1(i){let e=N1(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Je(s===1);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(b){const A=WT(b);return A instanceof oi&&AT(A)?A.getFilters():[A]}(n.where));let f=[];n.orderBy&&(f=function(b){return b.map(A=>function(V){return new uu(fo(V.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(A))}(n.orderBy));let m=null;n.limit&&(m=function(b){let A;return A=typeof b=="object"?b.value:b,Fh(A)?null:A}(n.limit));let p=null;n.startAt&&(p=function(b){const A=!!b.before,P=b.values||[];return new Sh(P,A)}(n.startAt));let g=null;return n.endAt&&(g=function(b){const A=!b.before,P=b.values||[];return new Sh(P,A)}(n.endAt)),n1(e,o,f,u,m,"F",p,g)}function k1(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WT(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=fo(n.unaryFilter.field);return Dt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=fo(n.unaryFilter.field);return Dt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=fo(n.unaryFilter.field);return Dt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(i):i.fieldFilter!==void 0?function(n){return Dt.create(fo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return oi.create(n.compositeFilter.filters.map(s=>WT(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(i):Ce()}function L1(i){return S1[i]}function U1(i){return A1[i]}function j1(i){return R1[i]}function ho(i){return{fieldPath:i.canonicalString()}}function fo(i){return Jt.fromServerFormat(i.fieldPath)}function ZT(i){return i instanceof Dt?function(n){if(n.op==="=="){if(_0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(v0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(v0(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:U1(n.op),value:n.value}}}(i):i instanceof oi?function(n){const s=n.getFilters().map(o=>ZT(o));return s.length===1?s[0]:{compositeFilter:{op:j1(n.op),filters:s}}}(i):Ce()}function z1(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JT(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,s,o,u=Ne.min(),f=Ne.min(),m=en.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.Tt=e}}function q1(i){const e=P1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.Tn=new F1}addToCollectionParentIndex(e,n){return this.Tn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(ds.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class F1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new kt(ht.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ew=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(ew,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new So(0)}static Kn(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="LruGarbageCollector",G1=1048576;function P0([i,e],[n,s]){const o=Ve(i,n);return o===0?Ve(e,s):o}class $1{constructor(e){this.Hn=e,this.buffer=new kt(P0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();P0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class K1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ce(V0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Do(n)?ce(V0,"Ignoring IndexedDB error during garbage collection: ",n):await No(n)}await this.er(3e5)})}}class Q1{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Hh.ae);const s=new $1(n);return this.tr.forEachTarget(e,o=>s.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>s.Zn(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.tr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(M0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let s,o,u,f,m,p,g;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,f=Date.now(),this.nthSequenceNumber(e,o))).next(b=>(s=b,m=Date.now(),this.removeTargets(e,s,n))).next(b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(b=>(g=Date.now(),uo()<=ze.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(g-p)+`ms
Total Duration: ${g-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b})))}}function Y1(i,e){return new Q1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.changes=new pa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&eu(s.mutation,o,Mn.empty(),Pt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Be()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Be()){const o=sa();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=Ql();return u.forEach((m,p)=>{f=f.insert(m,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=sa();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Be()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,o){let u=Tr();const f=Jl(),m=function(){return Jl()}();return n.forEach((p,g)=>{const E=s.get(g.key);o.has(g.key)&&(E===void 0||E.mutation instanceof Ts)?u=u.insert(g.key,g):E!==void 0?(f.set(g.key,E.mutation.getFieldMask()),eu(E.mutation,g,E.mutation.getFieldMask(),Pt.now())):f.set(g.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,E)=>f.set(g,E)),n.forEach((g,E)=>{var b;return m.set(g,new W1(E,(b=f.get(g))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Jl();let o=new yt((f,m)=>f-m),u=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let E=s.get(p)||Mn.empty();E=m.applyToLocalView(g,E),s.set(p,E);const b=(o.get(m.batchId)||Be()).add(p);o=o.insert(m.batchId,b)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,E=p.value,b=VT();E.forEach(A=>{if(!u.has(A)){const P=qT(n.get(A),s.get(A));P!==null&&b.set(A,P),u=u.add(A)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,b))}return ee.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return we.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ee.resolve(sa());let m=su,p=u;return f.next(g=>ee.forEach(g,(E,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{p=p.insert(E,A)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Be())).next(E=>({batchId:m,changes:MT(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(s=>{let o=Ql();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Ql();return this.indexManager.getCollectionParents(e,u).next(m=>ee.forEach(m,p=>{const g=function(b,A){return new xo(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(E=>{E.forEach((b,A)=>{f=f.insert(b,A)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((p,g)=>{const E=g.getKey();f.get(E)===null&&(f=f.insert(E,an.newInvalidDocument(E)))});let m=Ql();return f.forEach((p,g)=>{const E=u.get(p);E!==void 0&&eu(E.mutation,g,Mn.empty(),Pt.now()),Kh(n,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return ee.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Vi(o.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(o){return{name:o.name,query:q1(o.bundledQuery),readTime:Vi(o.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.overlays=new yt(we.comparator),this.Rr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=sa();return ee.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.Et(e,n,u)}),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Rr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=sa(),u=n.length+1,f=new we(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new yt((g,E)=>g-E);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let E=u.get(g.largestBatchId);E===null&&(E=sa(),u=u.insert(g.largestBatchId,E)),E.set(g.getKey(),g)}}const m=sa(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,E)=>m.set(g,E)),!(m.size()>=o)););return ee.resolve(m)}Et(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Rr.get(o.largestBatchId).delete(s.key);this.Rr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new _1(n,s));let u=this.Rr.get(n);u===void 0&&(u=Be(),this.Rr.set(n,u)),this.Rr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this.Vr=new kt(Gt.mr),this.gr=new kt(Gt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const s=new Gt(e,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.wr(new Gt(e,n))}Sr(e,n){e.forEach(s=>this.removeReference(s,n))}br(e){const n=new we(new ht([])),s=new Gt(n,e),o=new Gt(n,e+1),u=[];return this.gr.forEachInRange([s,o],f=>{this.wr(f),u.push(f.key)}),u}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new we(new ht([])),s=new Gt(n,e),o=new Gt(n,e+1);let u=Be();return this.gr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Gt(e,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return we.comparator(e.key,n.key)||Ve(e.Cr,n.Cr)}static pr(e,n){return Ve(e.Cr,n.Cr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new kt(Gt.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new v1(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Mr=this.Mr.add(new Gt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(f)}lookupMutationBatch(e,n){return ee.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Nr(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Ep:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Gt(n,0),o=new Gt(n,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([s,o],f=>{const m=this.Or(f.Cr);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new kt(Ve);return n.forEach(o=>{const u=new Gt(o,0),f=new Gt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,f],m=>{s=s.add(m.Cr)})}),ee.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;we.isDocumentKey(u)||(u=u.child(""));const f=new Gt(new we(u),0);let m=new kt(Ve);return this.Mr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Cr)),!0)},f),ee.resolve(this.Br(m))}Br(e){const n=[];return e.forEach(s=>{const o=this.Or(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Je(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return ee.forEach(n.mutations,o=>{const u=new Gt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=s})}qn(e){}containsKey(e,n){const s=new Gt(n,0),o=this.Mr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.kr=e,this.docs=function(){return new yt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let s=Tr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():an.newInvalidDocument(o))}),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Tr();const f=n.path,m=new we(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:E}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||VI(MI(E),s)<=0||(o.has(E.key)||Kh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ce()}qr(e,n){return ee.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new rC(this)}getSize(e){return ee.resolve(this.size)}}class rC extends X1{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(s)}),ee.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.persistence=e,this.Qr=new pa(n=>bp(n),Sp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.$r=0,this.Ur=new xp,this.targetCount=0,this.Kr=So.Un()}forEachTarget(e,n){return this.Qr.forEach((s,o)=>n(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),ee.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new So(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.zn(n),ee.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.Qr.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Qr.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.Qr.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this.Ur.yr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this.Ur.Sr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ur.vr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Hh(0),this.zr=!1,this.zr=!0,this.jr=new tC,this.referenceDelegate=e(this),this.Hr=new sC(this),this.indexManager=new H1,this.remoteDocumentCache=function(o){return new iC(o)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new B1(n),this.Yr=new J1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Wr[e.toKey()];return s||(s=new nC(n,this.referenceDelegate),this.Wr[e.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const o=new aC(this.Gr.next());return this.referenceDelegate.Zr(),s(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(e,n){return ee.or(Object.values(this.Wr).map(s=>()=>s.containsKey(e,n)))}}class aC extends kI{constructor(e){super(),this.currentSequenceNumber=e}}class Op{constructor(e){this.persistence=e,this.ti=new xp,this.ni=null}static ri(e){return new Op(e)}get ii(){if(this.ni)return this.ni;throw Ce()}addReference(e,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),ee.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(o=>this.ii.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,s=>{const o=we.fromPath(s);return this.si(e,o).next(u=>{u||n.removeEntry(o,Ne.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return ee.or([()=>ee.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Rh{constructor(e,n){this.persistence=e,this.oi=new pa(s=>jI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=Y1(this,n)}static ri(e,n){return new Rh(e,n)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}sr(e){let n=0;return this.rr(e,s=>{n++}).next(()=>n)}rr(e,n){return ee.forEach(this.oi,(s,o)=>this.ar(e,s,o).next(u=>u?ee.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(e,f=>this.ar(e,f,n).next(m=>{m||(s++,u.removeEntry(f,Ne.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.oi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),ee.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}ar(e,n,s){return ee.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.oi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Hi=s,this.Ji=o}static Yi(e,n){let s=Be(),o=Be();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Mp(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return tR()?8:LI(on())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.rs(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new oC;return this._s(e,n,f).next(m=>{if(u.result=m,this.Xi)return this.us(e,n,f,m.size)})}).next(()=>u.result)}us(e,n,s,o){return s.documentReadCount<this.es?(uo()<=ze.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(uo()<=ze.DEBUG&&ce("QueryEngine","Query:",co(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ts*o?(uo()<=ze.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(n))):ee.resolve())}rs(e,n){if(b0(n))return ee.resolve(null);let s=Mi(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Ym(n,null,"F"),s=Mi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=Be(...u);return this.ns.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.cs(n,m);return this.ls(n,g,f,p.readTime)?this.rs(e,Ym(n,null,"F")):this.hs(e,g,n,p)}))})))}ss(e,n,s,o){return b0(n)||o.isEqual(Ne.min())?ee.resolve(null):this.ns.getDocuments(e,s).next(u=>{const f=this.cs(n,u);return this.ls(n,f,s,o)?ee.resolve(null):(uo()<=ze.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),co(n)),this.hs(e,f,n,OI(o,su)).next(m=>m))})}cs(e,n){let s=new kt(xT(e));return n.forEach((o,u)=>{Kh(e,u)&&(s=s.add(u))}),s}ls(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(e,n,s){return uo()<=ze.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",co(n)),this.ns.getDocumentsMatchingQuery(e,n,ds.min(),s)}hs(e,n,s,o){return this.ns.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="LocalStore",uC=3e8;class cC{constructor(e,n,s,o){this.persistence=e,this.Ps=n,this.serializer=o,this.Ts=new yt(Ve),this.Is=new pa(u=>bp(u),Sp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(s)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function hC(i,e,n,s){return new cC(i,e,n,s)}async function nw(i,e){const n=xe(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.As(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let p=Be();for(const g of o){f.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}for(const g of u){m.push(g.batchId);for(const E of g.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(g=>({Rs:g,removedBatchIds:f,addedBatchIds:m}))})})}function fC(i,e){const n=xe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.ds.newChangeBuffer({trackRemovals:!0});return function(m,p,g,E){const b=g.batch,A=b.keys();let P=ee.resolve();return A.forEach(V=>{P=P.next(()=>E.getEntry(p,V)).next(Q=>{const H=g.docVersions.get(V);Je(H!==null),Q.version.compareTo(H)<0&&(b.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),E.addEntry(Q)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(p,b))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Be();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function iw(i){const e=xe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function dC(i,e){const n=xe(i),s=e.snapshotVersion;let o=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.ds.newChangeBuffer({trackRemovals:!0});o=n.Ts;const m=[];e.targetChanges.forEach((E,b)=>{const A=o.get(b);if(!A)return;m.push(n.Hr.removeMatchingKeys(u,E.removedDocuments,b).next(()=>n.Hr.addMatchingKeys(u,E.addedDocuments,b)));let P=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?P=P.withResumeToken(en.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(b,P),function(Q,H,Y){return Q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=uC?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(A,P,E)&&m.push(n.Hr.updateTargetData(u,P))});let p=Tr(),g=Be();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(mC(u,f,e.documentUpdates).next(E=>{p=E.Vs,g=E.fs})),!s.isEqual(Ne.min())){const E=n.Hr.getLastRemoteSnapshotVersion(u).next(b=>n.Hr.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return ee.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ts=o,u))}function mC(i,e,n){let s=Be(),o=Be();return n.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let f=Tr();return n.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Ne.min())?(e.removeEntry(m,p.readTime),f=f.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(m,p)):ce(Vp,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{Vs:f,fs:o}})}function pC(i,e){const n=xe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Ep),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function gC(i,e){const n=xe(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Hr.getTargetData(s,e).next(u=>u?(o=u,ee.resolve(o)):n.Hr.allocateTargetId(s).next(f=>(o=new ss(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ts.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(e,s.targetId)),s})}async function ep(i,e,n){const s=xe(i),o=s.Ts.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Do(f))throw f;ce(Vp,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ts=s.Ts.remove(e),s.Is.delete(o.target)}function k0(i,e,n){const s=xe(i);let o=Ne.min(),u=Be();return s.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,E){const b=xe(p),A=b.Is.get(E);return A!==void 0?ee.resolve(b.Ts.get(A)):b.Hr.getTargetData(g,E)}(s,f,Mi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(f,m.targetId).next(p=>{u=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(f,e,n?o:Ne.min(),n?u:Be())).next(m=>(yC(s,r1(e),m),{documents:m,gs:u})))}function yC(i,e,n){let s=i.Es.get(e)||Ne.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Es.set(e,s)}class L0{constructor(){this.activeTargetIds=c1()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vC{constructor(){this.ho=new L0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,s){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new L0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="ConnectivityMonitor";class j0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ce(U0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ce(U0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh=null;function tp(){return nh===null?nh=function(){return 268435456+Math.round(2147483648*Math.random())}():nh++,"0x"+nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="RestConnection",EC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TC{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${s}/databases/${o}`,this.wo=this.databaseId.database===wh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}So(e,n,s,o,u){const f=tp(),m=this.bo(e,n.toUriEncodedString());ce(Am,`Sending RPC '${e}' ${f}:`,m,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,u),this.vo(e,m,p,s).then(g=>(ce(Am,`Received RPC '${e}' ${f}: `,g),g),g=>{throw Eo(Am,`RPC '${e}' ${f} failed with error: `,g,"url: ",m,"request:",s),g})}Co(e,n,s,o,u,f){return this.So(e,n,s,o,u)}Do(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Co}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}bo(e,n){const s=EC[e];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class bC extends TC{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,s,o){const u=tp();return new Promise((f,m)=>{const p=new sT;p.setWithCredentials(!0),p.listenOnce(aT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ah.NO_ERROR:const E=p.getResponseJson();ce(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case ah.TIMEOUT:ce(rn,`RPC '${e}' ${u} timed out`),m(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const b=p.getStatus();if(ce(rn,`RPC '${e}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const P=A==null?void 0:A.error;if(P&&P.status&&P.message){const V=function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Y)>=0?Y:ne.UNKNOWN}(P.status);m(new fe(V,P.message))}else m(new fe(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{ce(rn,`RPC '${e}' ${u} completed.`)}});const g=JSON.stringify(o);ce(rn,`RPC '${e}' ${u} sending request:`,o),p.send(n,"POST",g,s,15)})}Wo(e,n,s){const o=tp(),u=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=uT(),m=lT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ce(rn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const b=f.createWebChannel(E,p);let A=!1,P=!1;const V=new wC({Fo:H=>{P?ce(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(A||(ce(rn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),ce(rn,`RPC '${e}' stream ${o} sending:`,H),b.send(H))},Mo:()=>b.close()}),Q=(H,Y,se)=>{H.listen(Y,ie=>{try{se(ie)}catch(pe){setTimeout(()=>{throw pe},0)}})};return Q(b,Kl.EventType.OPEN,()=>{P||(ce(rn,`RPC '${e}' stream ${o} transport opened.`),V.Qo())}),Q(b,Kl.EventType.CLOSE,()=>{P||(P=!0,ce(rn,`RPC '${e}' stream ${o} transport closed`),V.Uo())}),Q(b,Kl.EventType.ERROR,H=>{P||(P=!0,Eo(rn,`RPC '${e}' stream ${o} transport errored:`,H),V.Uo(new fe(ne.UNAVAILABLE,"The operation could not be completed")))}),Q(b,Kl.EventType.MESSAGE,H=>{var Y;if(!P){const se=H.data[0];Je(!!se);const ie=se,pe=(ie==null?void 0:ie.error)||((Y=ie[0])===null||Y===void 0?void 0:Y.error);if(pe){ce(rn,`RPC '${e}' stream ${o} received error:`,pe);const de=pe.status;let be=function(I){const N=Nt[I];if(N!==void 0)return FT(N)}(de),x=pe.message;be===void 0&&(be=ne.INTERNAL,x="Unknown error status: "+de+" with message "+pe.message),P=!0,V.Uo(new fe(be,x)),b.close()}else ce(rn,`RPC '${e}' stream ${o} received:`,se),V.Ko(se)}}),Q(m,oT.STAT_EVENT,H=>{H.stat===qm.PROXY?ce(rn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===qm.NOPROXY&&ce(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{V.$o()},0),V}}function Rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(i){return new I1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ti=e,this.timerId=n,this.Go=s,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),o=Math.max(0,n-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="PersistentStream";class sw{constructor(e,n,s,o,u,f,m,p){this.Ti=e,this.n_=s,this.r_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new rw(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.i_===n&&this.V_(s,o)},s=>{e(()=>{const o=new fe(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(o)})})}V_(e,n){const s=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{s(()=>this.m_(o))}),this.stream.onMessage(o=>{s(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ce(z0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ce(z0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SC extends sw{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=D1(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ne.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ne.min():f.readTime?Vi(f.readTime):Ne.min()}(e);return this.listener.p_(n,s)}y_(e){const n={};n.database=Jm(this.serializer),n.addTarget=function(u,f){let m;const p=f.target;if(m=Km(p)?{documents:M1(u,p)}:{query:V1(u,p).ht},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=KT(u,f.resumeToken);const g=Xm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Ne.min())>0){m.readTime=Ah(u,f.snapshotVersion.toTimestamp());const g=Xm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=k1(this.serializer,e);s&&(n.labels=s),this.I_(n)}w_(e){const n={};n.database=Jm(this.serializer),n.removeTarget=e,this.I_(n)}}class AC extends sw{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=O1(e.writeResults,e.commitTime),s=Vi(e.commitTime);return this.listener.v_(s,n)}C_(){const e={};e.database=Jm(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>x1(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{}class IC extends RC{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.So(e,Wm(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ne.UNKNOWN,u.toString())})}Co(e,n,s,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Co(e,Wm(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new fe(ne.UNKNOWN,f.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class CC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Er(n),this.N_=!1):ce("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="RemoteStore";class NC{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(f=>{s.enqueueAndForget(async()=>{ga(this)&&(ce(la,"Restarting streams for network reachability change."),await async function(p){const g=xe(p);g.W_.add(4),await Eu(g),g.j_.set("Unknown"),g.W_.delete(4),await Zh(g)}(this))})}),this.j_=new CC(s,o)}}async function Zh(i){if(ga(i))for(const e of i.G_)await e(!0)}async function Eu(i){for(const e of i.G_)await e(!1)}function aw(i,e){const n=xe(i);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Up(n)?Lp(n):Oo(n).c_()&&kp(n,e))}function Pp(i,e){const n=xe(i),s=Oo(n);n.K_.delete(e),s.c_()&&ow(n,e),n.K_.size===0&&(s.c_()?s.P_():ga(n)&&n.j_.set("Unknown"))}function kp(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(i).y_(e)}function ow(i,e){i.H_.Ne(e),Oo(i).w_(e)}function Lp(i){i.H_=new b1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Oo(i).start(),i.j_.B_()}function Up(i){return ga(i)&&!Oo(i).u_()&&i.K_.size>0}function ga(i){return xe(i).W_.size===0}function lw(i){i.H_=void 0}async function DC(i){i.j_.set("Online")}async function xC(i){i.K_.forEach((e,n)=>{kp(i,e)})}async function OC(i,e){lw(i),Up(i)?(i.j_.q_(e),Lp(i)):i.j_.set("Unknown")}async function MC(i,e,n){if(i.j_.set("Online"),e instanceof $T&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.K_.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.K_.delete(m),o.H_.removeTarget(m))}(i,e)}catch(s){ce(la,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ih(i,s)}else if(e instanceof ch?i.H_.We(e):e instanceof GT?i.H_.Ze(e):i.H_.je(e),!n.isEqual(Ne.min()))try{const s=await iw(i.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.H_.ot(f);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.K_.get(g);E&&u.K_.set(g,E.withResumeToken(p.resumeToken,f))}}),m.targetMismatches.forEach((p,g)=>{const E=u.K_.get(p);if(!E)return;u.K_.set(p,E.withResumeToken(en.EMPTY_BYTE_STRING,E.snapshotVersion)),ow(u,p);const b=new ss(E.target,p,g,E.sequenceNumber);kp(u,b)}),u.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){ce(la,"Failed to raise snapshot:",s),await Ih(i,s)}}async function Ih(i,e,n){if(!Do(e))throw e;i.W_.add(1),await Eu(i),i.j_.set("Offline"),n||(n=()=>iw(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ce(la,"Retrying IndexedDB access"),await n(),i.W_.delete(1),await Zh(i)})}function uw(i,e){return e().catch(n=>Ih(i,n,e))}async function Jh(i){const e=xe(i),n=ys(e);let s=e.U_.length>0?e.U_[e.U_.length-1].batchId:Ep;for(;VC(e);)try{const o=await pC(e.localStore,s);if(o===null){e.U_.length===0&&n.P_();break}s=o.batchId,PC(e,o)}catch(o){await Ih(e,o)}cw(e)&&hw(e)}function VC(i){return ga(i)&&i.U_.length<10}function PC(i,e){i.U_.push(e);const n=ys(i);n.c_()&&n.S_&&n.b_(e.mutations)}function cw(i){return ga(i)&&!ys(i).u_()&&i.U_.length>0}function hw(i){ys(i).start()}async function kC(i){ys(i).C_()}async function LC(i){const e=ys(i);for(const n of i.U_)e.b_(n.mutations)}async function UC(i,e,n){const s=i.U_.shift(),o=Cp.from(s,e,n);await uw(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await Jh(i)}async function jC(i,e){e&&ys(i).S_&&await async function(s,o){if(function(f){return T1(f)&&f!==ne.ABORTED}(o.code)){const u=s.U_.shift();ys(s).h_(),await uw(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Jh(s)}}(i,e),cw(i)&&hw(i)}async function B0(i,e){const n=xe(i);n.asyncQueue.verifyOperationInProgress(),ce(la,"RemoteStore received new credentials");const s=ga(n);n.W_.add(3),await Eu(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Zh(n)}async function zC(i,e){const n=xe(i);e?(n.W_.delete(2),await Zh(n)):e||(n.W_.add(2),await Eu(n),n.j_.set("Unknown"))}function Oo(i){return i.J_||(i.J_=function(n,s,o){const u=xe(n);return u.M_(),new SC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:DC.bind(null,i),No:xC.bind(null,i),Lo:OC.bind(null,i),p_:MC.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),Up(i)?Lp(i):i.j_.set("Unknown")):(await i.J_.stop(),lw(i))})),i.J_}function ys(i){return i.Y_||(i.Y_=function(n,s,o){const u=xe(n);return u.M_(),new AC(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:kC.bind(null,i),Lo:jC.bind(null,i),D_:LC.bind(null,i),v_:UC.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await Jh(i)):(await i.Y_.stop(),i.U_.length>0&&(ce(la,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new jp(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(i,e){if(Er("AsyncQueue",`${e}: ${i}`),Do(i))return new fe(ne.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static emptySet(e){return new go(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||we.comparator(n.key,s.key):(n,s)=>we.comparator(n.key,s.key),this.keyedMap=Ql(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.Z_=new yt(we.comparator)}track(e){const n=e.doc.key,s=this.Z_.get(n);s?e.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Z_=this.Z_.remove(n):e.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ce():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ao{constructor(e,n,s,o,u,f,m,p,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Ao(e,n,go.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class qC{constructor(){this.queries=H0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const o=xe(n),u=o.queries;o.queries=H0(),u.forEach((f,m)=>{for(const p of m.ta)p.onError(s)})})(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function H0(){return new pa(i=>DT(i),$h)}async function fw(i,e){const n=xe(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.na()&&e.ra()&&(s=2):(u=new BC,s=e.ra()?0:1);try{switch(s){case 0:u.ea=await n.onListen(o,!0);break;case 1:u.ea=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=zp(f,`Initialization of query '${co(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ta.push(e),e.sa(n.onlineState),u.ea&&e.oa(u.ea)&&Bp(n)}async function dw(i,e){const n=xe(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ta.indexOf(e);f>=0&&(u.ta.splice(f,1),u.ta.length===0?o=e.ra()?0:1:!u.na()&&e.ra()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function HC(i,e){const n=xe(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ta)m.oa(o)&&(s=!0);f.ea=o}}s&&Bp(n)}function FC(i,e,n){const s=xe(i),o=s.queries.get(e);if(o)for(const u of o.ta)u.onError(n);s.queries.delete(e)}function Bp(i){i.ia.forEach(e=>{e.next()})}var np,F0;(F0=np||(np={}))._a="default",F0.Cache="cache";class mw{constructor(e,n,s){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ao(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.key=e}}class gw{constructor(e){this.key=e}}class GC{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Be(),this.mutatedKeys=Be(),this.ya=xT(e),this.wa=new go(this.ya)}get Sa(){return this.fa}ba(e,n){const s=n?n.Da:new q0,o=n?n.wa:this.wa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,b)=>{const A=o.get(E),P=Kh(this.query,b)?b:null,V=!!A&&this.mutatedKeys.has(A.key),Q=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let H=!1;A&&P?A.data.isEqual(P.data)?V!==Q&&(s.track({type:3,doc:P}),H=!0):this.va(A,P)||(s.track({type:2,doc:P}),H=!0,(p&&this.ya(P,p)>0||g&&this.ya(P,g)<0)&&(m=!0)):!A&&P?(s.track({type:0,doc:P}),H=!0):A&&!P&&(s.track({type:1,doc:A}),H=!0,(p||g)&&(m=!0)),H&&(P?(f=f.add(P),u=Q?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{wa:f,Da:s,ls:m,mutatedKeys:u}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const f=e.Da.X_();f.sort((E,b)=>function(P,V){const Q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return Q(P)-Q(V)}(E.type,b.type)||this.ya(E.doc,b.doc)),this.Ca(s),o=o!=null&&o;const m=n&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,g=p!==this.ga;return this.ga=p,f.length!==0||g?{snapshot:new Ao(this.query,e.wa,u,f,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new q0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Be(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return e.forEach(s=>{this.pa.has(s)||n.push(new gw(s))}),this.pa.forEach(s=>{e.has(s)||n.push(new pw(s))}),n}Oa(e){this.fa=e.gs,this.pa=Be();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Ao.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const qp="SyncEngine";class $C{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class KC{constructor(e){this.key=e,this.Ba=!1}}class QC{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.La={},this.ka=new pa(m=>DT(m),$h),this.qa=new Map,this.Qa=new Set,this.$a=new yt(we.comparator),this.Ua=new Map,this.Ka=new xp,this.Wa={},this.Ga=new Map,this.za=So.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function YC(i,e,n=!0){const s=ww(i);let o;const u=s.ka.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await yw(s,e,n,!0),o}async function XC(i,e){const n=ww(i);await yw(n,e,!0,!1)}async function yw(i,e,n,s){const o=await gC(i.localStore,Mi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await WC(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&aw(i.remoteStore,o),m}async function WC(i,e,n,s,o){i.Ha=(b,A,P)=>async function(Q,H,Y,se){let ie=H.view.ba(Y);ie.ls&&(ie=await k0(Q.localStore,H.query,!1).then(({documents:x})=>H.view.ba(x,ie)));const pe=se&&se.targetChanges.get(H.targetId),de=se&&se.targetMismatches.get(H.targetId)!=null,be=H.view.applyChanges(ie,Q.isPrimaryClient,pe,de);return $0(Q,H.targetId,be.Ma),be.snapshot}(i,b,A,P);const u=await k0(i.localStore,e,!0),f=new GC(e,u.gs),m=f.ba(u.documents),p=_u.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,p);$0(i,n,g.Ma);const E=new $C(e,n,f);return i.ka.set(e,E),i.qa.has(n)?i.qa.get(n).push(e):i.qa.set(n,[e]),g.snapshot}async function ZC(i,e,n){const s=xe(i),o=s.ka.get(e),u=s.qa.get(o.targetId);if(u.length>1)return s.qa.set(o.targetId,u.filter(f=>!$h(f,e))),void s.ka.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ep(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Pp(s.remoteStore,o.targetId),ip(s,o.targetId)}).catch(No)):(ip(s,o.targetId),await ep(s.localStore,o.targetId,!0))}async function JC(i,e){const n=xe(i),s=n.ka.get(e),o=n.qa.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Pp(n.remoteStore,s.targetId))}async function e2(i,e,n){const s=o2(i);try{const o=await function(f,m){const p=xe(f),g=Pt.now(),E=m.reduce((P,V)=>P.add(V.key),Be());let b,A;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=Tr(),Q=Be();return p.ds.getEntries(P,E).next(H=>{V=H,V.forEach((Y,se)=>{se.isValidDocument()||(Q=Q.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,V)).next(H=>{b=H;const Y=[];for(const se of m){const ie=g1(se,b.get(se.key).overlayedDocument);ie!=null&&Y.push(new Ts(se.key,ie,wT(ie.value.mapValue),Xn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,g,Y,m)}).next(H=>{A=H;const Y=H.applyToLocalDocumentSet(b,Q);return p.documentOverlayCache.saveOverlays(P,H.batchId,Y)})}).then(()=>({batchId:A.batchId,changes:MT(b)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,p){let g=f.Wa[f.currentUser.toKey()];g||(g=new yt(Ve)),g=g.insert(m,p),f.Wa[f.currentUser.toKey()]=g}(s,o.batchId,n),await Tu(s,o.changes),await Jh(s.remoteStore)}catch(o){const u=zp(o,"Failed to persist write");n.reject(u)}}async function vw(i,e){const n=xe(i);try{const s=await dC(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Ua.get(u);f&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.Ba=!0:o.modifiedDocuments.size>0?Je(f.Ba):o.removedDocuments.size>0&&(Je(f.Ba),f.Ba=!1))}),await Tu(n,s,e)}catch(s){await No(s)}}function G0(i,e,n){const s=xe(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.ka.forEach((u,f)=>{const m=f.view.sa(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const p=xe(f);p.onlineState=m;let g=!1;p.queries.forEach((E,b)=>{for(const A of b.ta)A.sa(m)&&(g=!0)}),g&&Bp(p)}(s.eventManager,e),o.length&&s.La.p_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function t2(i,e,n){const s=xe(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Ua.get(e),u=o&&o.key;if(u){let f=new yt(we.comparator);f=f.insert(u,an.newNoDocument(u,Ne.min()));const m=Be().add(u),p=new Xh(Ne.min(),new Map,new yt(Ve),f,m);await vw(s,p),s.$a=s.$a.remove(u),s.Ua.delete(e),Hp(s)}else await ep(s.localStore,e,!1).then(()=>ip(s,e,n)).catch(No)}async function n2(i,e){const n=xe(i),s=e.batch.batchId;try{const o=await fC(n.localStore,e);Ew(n,s,null),_w(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Tu(n,o)}catch(o){await No(o)}}async function i2(i,e,n){const s=xe(i);try{const o=await function(f,m){const p=xe(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let E;return p.mutationQueue.lookupMutationBatch(g,m).next(b=>(Je(b!==null),E=b.keys(),p.mutationQueue.removeMutationBatch(g,b))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,E)).next(()=>p.localDocuments.getDocuments(g,E))})}(s.localStore,e);Ew(s,e,n),_w(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Tu(s,o)}catch(o){await No(o)}}function _w(i,e){(i.Ga.get(e)||[]).forEach(n=>{n.resolve()}),i.Ga.delete(e)}function Ew(i,e,n){const s=xe(i);let o=s.Wa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Wa[s.currentUser.toKey()]=o}}function ip(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.qa.get(e))i.ka.delete(s),n&&i.La.Ja(s,n);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(s=>{i.Ka.containsKey(s)||Tw(i,s)})}function Tw(i,e){i.Qa.delete(e.path.canonicalString());const n=i.$a.get(e);n!==null&&(Pp(i.remoteStore,n),i.$a=i.$a.remove(e),i.Ua.delete(n),Hp(i))}function $0(i,e,n){for(const s of n)s instanceof pw?(i.Ka.addReference(s.key,e),r2(i,s)):s instanceof gw?(ce(qp,"Document no longer in limbo: "+s.key),i.Ka.removeReference(s.key,e),i.Ka.containsKey(s.key)||Tw(i,s.key)):Ce()}function r2(i,e){const n=e.key,s=n.path.canonicalString();i.$a.get(n)||i.Qa.has(s)||(ce(qp,"New document in limbo: "+n),i.Qa.add(s),Hp(i))}function Hp(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const n=new we(ht.fromString(e)),s=i.za.next();i.Ua.set(s,new KC(n)),i.$a=i.$a.insert(n,s),aw(i.remoteStore,new ss(Mi(Ap(n.path)),s,"TargetPurposeLimboResolution",Hh.ae))}}async function Tu(i,e,n){const s=xe(i),o=[],u=[],f=[];s.ka.isEmpty()||(s.ka.forEach((m,p)=>{f.push(s.Ha(p,e,n).then(g=>{var E;if((g||n)&&s.isPrimaryClient){const b=g?!g.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Mp.Yi(p.targetId,g);u.push(b)}}))}),await Promise.all(f),s.La.p_(o),await async function(p,g){const E=xe(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>ee.forEach(g,A=>ee.forEach(A.Hi,P=>E.persistence.referenceDelegate.addReference(b,A.targetId,P)).next(()=>ee.forEach(A.Ji,P=>E.persistence.referenceDelegate.removeReference(b,A.targetId,P)))))}catch(b){if(!Do(b))throw b;ce(Vp,"Failed to update sequence numbers: "+b)}for(const b of g){const A=b.targetId;if(!b.fromCache){const P=E.Ts.get(A),V=P.snapshotVersion,Q=P.withLastLimboFreeSnapshotVersion(V);E.Ts=E.Ts.insert(A,Q)}}}(s.localStore,u))}async function s2(i,e){const n=xe(i);if(!n.currentUser.isEqual(e)){ce(qp,"User change. New user:",e.toKey());const s=await nw(n.localStore,e);n.currentUser=e,function(u,f){u.Ga.forEach(m=>{m.forEach(p=>{p.reject(new fe(ne.CANCELLED,f))})}),u.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Tu(n,s.Rs)}}function a2(i,e){const n=xe(i),s=n.Ua.get(e);if(s&&s.Ba)return Be().add(s.key);{let o=Be();const u=n.qa.get(e);if(!u)return o;for(const f of u){const m=n.ka.get(f);o=o.unionWith(m.view.Sa)}return o}}function ww(i){const e=xe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t2.bind(null,e),e.La.p_=HC.bind(null,e.eventManager),e.La.Ja=FC.bind(null,e.eventManager),e}function o2(i){const e=xe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i2.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return hC(this.persistence,new lC,e.initialUser,this.serializer)}Xa(e){return new tw(Op.ri,this.serializer)}Za(e){return new vC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class l2 extends Ch{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Je(this.persistence.referenceDelegate instanceof Rh);const s=this.persistence.referenceDelegate.garbageCollector;return new K1(s,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new tw(s=>Rh.ri(s,n),this.serializer)}}class rp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>G0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=s2.bind(null,this.syncEngine),await zC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qC}()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),s=function(u){return new bC(u)}(e.databaseInfo);return function(u,f,m,p){return new IC(u,f,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,m){return new NC(s,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>G0(this.syncEngine,n,0),function(){return j0.D()?new j0:new _C}())}createSyncEngine(e,n){return function(o,u,f,m,p,g,E){const b=new QC(o,u,f,m,p,g);return E&&(b.ja=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=xe(o);ce(la,"RemoteStore shutting down."),u.W_.add(5),await Eu(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}rp.provider={build:()=>new rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class u2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=fT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{ce(vs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ce(vs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=zp(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Im(i,e){i.asyncQueue.verifyOperationInProgress(),ce(vs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await nw(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function K0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await c2(i);ce(vs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>B0(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>B0(e.remoteStore,o)),i._onlineComponents=e}async function c2(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(vs,"Using user provided OfflineComponentProvider");try{await Im(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Eo("Error using user provided cache. Falling back to memory cache: "+n),await Im(i,new Ch)}}else ce(vs,"Using default OfflineComponentProvider"),await Im(i,new l2(void 0));return i._offlineComponents}async function Sw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(vs,"Using user provided OnlineComponentProvider"),await K0(i,i._uninitializedComponentsProvider._online)):(ce(vs,"Using default OnlineComponentProvider"),await K0(i,new rp))),i._onlineComponents}function h2(i){return Sw(i).then(e=>e.syncEngine)}async function sp(i){const e=await Sw(i),n=e.eventManager;return n.onListen=YC.bind(null,e.syncEngine),n.onUnlisten=ZC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JC.bind(null,e.syncEngine),n}function f2(i,e,n={}){const s=new cs;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,m,p,g){const E=new bw({next:A=>{E.su(),f.enqueueAndForget(()=>dw(u,b)),A.fromCache&&p.source==="server"?g.reject(new fe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),b=new mw(m,E,{includeMetadataChanges:!0,Ta:!0});return fw(u,b)}(await sp(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(i,e,n){if(!n)throw new fe(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function d2(i,e,n,s){if(e===!0&&s===!0)throw new fe(ne.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Y0(i){if(!we.isDocumentKey(i))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function X0(i){if(we.isDocumentKey(i))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ef(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce()}function Wn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ef(i);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="firestore.googleapis.com",W0=!0;class Z0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iw,this.ssl=W0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:W0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ew;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<G1)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Aw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new bI;switch(s.type){case"firstParty":return new II(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Q0.get(n);s&&(ce("ComponentProvider","Removing Datastore"),Q0.delete(n),s.terminate())}(this),Promise.resolve()}}function m2(i,e,n,s={}){var o;const u=(i=Wn(i,tf))._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${n}`;u.host!==Iw&&u.host!==m&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:!1,emulatorOptions:s});if(!fs(p,f)&&(i._setSettings(p),s.mockUserToken)){let g,E;if(typeof s.mockUserToken=="string")g=s.mockUserToken,E=sn.MOCK_USER;else{g=YA(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new sn(b)}i._authCredentials=new SI(new cT(g,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class mn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class hs extends ws{constructor(e,n,s){super(e,n,Ap(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new we(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function mr(i,e,...n){if(i=St(i),Rw("collection","path",e),i instanceof tf){const s=ht.fromString(e,...n);return X0(s),new hs(i,null,s)}{if(!(i instanceof mn||i instanceof hs))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ht.fromString(e,...n));return X0(s),new hs(i.firestore,null,s)}}function Oi(i,e,...n){if(i=St(i),arguments.length===1&&(e=fT.newId()),Rw("doc","path",e),i instanceof tf){const s=ht.fromString(e,...n);return Y0(s),new mn(i,null,new we(s))}{if(!(i instanceof mn||i instanceof hs))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(ht.fromString(e,...n));return Y0(s),new mn(i.firestore,i instanceof hs?i.converter:null,new we(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="AsyncQueue";class eE{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new rw(this,"async_queue_retry"),this.Su=()=>{const s=Rm();s&&ce(J0,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=e;const n=Rm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new cs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Do(e))throw e;ce(J0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(s=>{this.gu=s,this.pu=!1;const o=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw Er("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(e,n,s){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const o=jp.createAndSchedule(this,e,n,s,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&Ce()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function tE(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(i,["next","error","complete"])}class _s extends tf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new eE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eE(e),this._firestoreClient=void 0,await e}}}function p2(i,e){const n=typeof i=="object"?i:vp(),s=typeof i=="string"?i:wh,o=ma(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=KA("firestore");u&&m2(o,...u)}return o}function Fp(i){if(i._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||g2(i),i._firestoreClient}function g2(i){var e,n,s;const o=i._freezeSettings(),u=function(m,p,g,E){return new qI(m,p,g,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Aw(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new u2(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ro(en.fromBase64String(e))}catch(n){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ro(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=/^__.*__$/;class v2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms):new vu(e,this.data,n,this.fieldTransforms)}}class Cw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ts(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class Kp{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Kp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.$u(e),o}Uu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.ku({path:s,Qu:!1});return o.Bu(),o}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Nh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Nw(this.Lu)&&y2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class _2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Wh(e)}ju(e,n,s,o=!1){return new Kp({Lu:e,methodName:n,zu:s,path:Jt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rf(i){const e=i._freezeSettings(),n=Wh(i._databaseId);return new _2(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Dw(i,e,n,s,o,u={}){const f=i.ju(u.merge||u.mergeFields?2:0,e,n,o);Xp("Data must be an object, but it was:",f,s);const m=xw(s,f);let p,g;if(u.merge)p=new Mn(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const b of u.mergeFields){const A=ap(e,b,n);if(!f.contains(A))throw new fe(ne.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Mw(E,A)||E.push(A)}p=new Mn(E),g=f.fieldTransforms.filter(b=>p.covers(b.field))}else p=null,g=f.fieldTransforms;return new v2(new wn(m),p,g)}class sf extends wu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sf}}class Qp extends wu{_toFieldTransform(e){return new BT(e.path,new cu)}isEqual(e){return e instanceof Qp}}class Yp extends wu{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new du(e.serializer,kT(e.serializer,this.Ju));return new BT(e.path,n)}isEqual(e){return e instanceof Yp&&this.Ju===e.Ju}}function E2(i,e,n,s){const o=i.ju(1,e,n);Xp("Data must be an object, but it was:",o,s);const u=[],f=wn.empty();Es(s,(p,g)=>{const E=Wp(e,p,n);g=St(g);const b=o.Uu(E);if(g instanceof sf)u.push(E);else{const A=bu(g,b);A!=null&&(u.push(E),f.set(E,A))}});const m=new Mn(u);return new Cw(f,m,o.fieldTransforms)}function T2(i,e,n,s,o,u){const f=i.ju(1,e,n),m=[ap(e,s,n)],p=[o];if(u.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(ap(e,u[A])),p.push(u[A+1]);const g=[],E=wn.empty();for(let A=m.length-1;A>=0;--A)if(!Mw(g,m[A])){const P=m[A];let V=p[A];V=St(V);const Q=f.Uu(P);if(V instanceof sf)g.push(P);else{const H=bu(V,Q);H!=null&&(g.push(P),E.set(P,H))}}const b=new Mn(g);return new Cw(E,b,f.fieldTransforms)}function w2(i,e,n,s=!1){return bu(n,i.ju(s?4:3,e))}function bu(i,e){if(Ow(i=St(i)))return Xp("Unsupported field value:",e,i),xw(i,e);if(i instanceof wu)return function(s,o){if(!Nw(o.Lu))throw o.Wu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let p=bu(m,o.Ku(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kT(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Pt.fromDate(s);return{timestampValue:Ah(o.serializer,u)}}if(s instanceof Pt){const u=new Pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ah(o.serializer,u)}}if(s instanceof Gp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ro)return{bytesValue:KT(o.serializer,s._byteString)};if(s instanceof mn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Wu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Dp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof $p)return function(f,m){return{mapValue:{fields:{[ET]:{stringValue:TT},[bh]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw m.Wu("VectorValues must only contain numeric values.");return Rp(m.serializer,g)})}}}}}}(s,o);throw o.Wu(`Unsupported field value: ${ef(s)}`)}(i,e)}function xw(i,e){const n={};return mT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(i,(s,o)=>{const u=bu(o,e.qu(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function Ow(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Pt||i instanceof Gp||i instanceof Ro||i instanceof mn||i instanceof wu||i instanceof $p)}function Xp(i,e,n){if(!Ow(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=ef(n);throw s==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+s)}}function ap(i,e,n){if((e=St(e))instanceof nf)return e._internalPath;if(typeof e=="string")return Wp(i,e);throw Nh("Field path arguments must be of type string or ",i,!1,void 0,n)}const b2=new RegExp("[~\\*/\\[\\]]");function Wp(i,e,n){if(e.search(b2)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new nf(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Nh(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${o}`),p+=")"),new fe(ne.INVALID_ARGUMENT,m+i+p)}function Mw(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new S2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(af("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class S2 extends Vw{data(){return super.data()}}function af(i,e){return typeof e=="string"?Wp(i,e):e instanceof nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zp{}class kw extends Zp{}function hh(i,e,...n){let s=[];e instanceof Zp&&s.push(e),s=s.concat(n),function(u){const f=u.filter(p=>p instanceof Jp).length,m=u.filter(p=>p instanceof of).length;if(f>1||f>0&&m>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class of extends kw{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new of(e,n,s)}_apply(e){const n=this._parse(e);return Lw(e._query,n),new ws(e.firestore,e.converter,Qm(e._query,n))}_parse(e){const n=rf(e.firestore);return function(u,f,m,p,g,E,b){let A;if(g.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){iE(b,E);const V=[];for(const Q of b)V.push(nE(p,u,Q));A={arrayValue:{values:V}}}else A=nE(p,u,b)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||iE(b,E),A=w2(m,f,b,E==="in"||E==="not-in");return Dt.create(g,E,A)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Cm(i,e,n){const s=e,o=af("where",i);return of._create(o,s,n)}class Jp extends Zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jp(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:oi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const p of m)Lw(f,p),f=Qm(f,p)}(e._query,n),new ws(e.firestore,e.converter,Qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class eg extends kw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new eg(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uu(u,f)}(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new xo(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function A2(i,e="asc"){const n=e,s=af("orderBy",i);return eg._create(s,n)}function nE(i,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NT(e)&&n.indexOf("/")!==-1)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ht.fromString(n));if(!we.isDocumentKey(s))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return y0(i,new we(s))}if(n instanceof mn)return y0(i,n._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(n)}.`)}function iE(i,e){if(!Array.isArray(i)||i.length===0)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lw(i,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class R2{convertValue(e,n="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Es(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[bh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>bt(f.doubleValue));return new $p(u)}convertGeoPoint(e){return new Gp(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Gh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const n=ms(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ht.fromString(e);Je(JT(s));const o=new ou(s.get(1),s.get(3)),u=new we(s.popFirst(5));return o.isEqual(n)||Er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jw extends Vw{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(af("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class fh extends jw{data(e={}){return super.data(e)}}class zw{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Xl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new fh(this._firestore,this._userDataWriter,s.key,s,new Xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const p=new fh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new fh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,E=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:I2(m.type),doc:p,oldIndex:g,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function I2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}class tg extends R2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function tu(i){i=Wn(i,ws);const e=Wn(i.firestore,_s),n=Fp(e),s=new tg(e);return Pw(i._query),f2(n,i._query).then(o=>new zw(e,s,i,o))}function C2(i,e,n){i=Wn(i,mn);const s=Wn(i.firestore,_s),o=Uw(i.converter,e,n);return lf(s,[Dw(rf(s),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Xn.none())])}function op(i,e,n,...s){i=Wn(i,mn);const o=Wn(i.firestore,_s),u=rf(o);let f;return f=typeof(e=St(e))=="string"||e instanceof nf?T2(u,"updateDoc",i._key,e,n,s):E2(u,"updateDoc",i._key,e),lf(o,[f.toMutation(i._key,Xn.exists(!0))])}function ng(i){return lf(Wn(i.firestore,_s),[new Ip(i._key,Xn.none())])}function lp(i,e){const n=Wn(i.firestore,_s),s=Oi(i),o=Uw(i.converter,e);return lf(n,[Dw(rf(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Xn.exists(!1))]).then(()=>s)}function N2(i,...e){var n,s,o;i=St(i);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||tE(e[f])||(u=e[f],f++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(tE(e[f])){const b=e[f];e[f]=(n=b.next)===null||n===void 0?void 0:n.bind(b),e[f+1]=(s=b.error)===null||s===void 0?void 0:s.bind(b),e[f+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let p,g,E;if(i instanceof mn)g=Wn(i.firestore,_s),E=Ap(i._key.path),p={next:b=>{e[f]&&e[f](D2(g,i,b))},error:e[f+1],complete:e[f+2]};else{const b=Wn(i,ws);g=Wn(b.firestore,_s),E=b._query;const A=new tg(g);p={next:P=>{e[f]&&e[f](new zw(g,A,b,P))},error:e[f+1],complete:e[f+2]},Pw(i._query)}return function(A,P,V,Q){const H=new bw(Q),Y=new mw(P,H,V);return A.asyncQueue.enqueueAndForget(async()=>fw(await sp(A),Y)),()=>{H.su(),A.asyncQueue.enqueueAndForget(async()=>dw(await sp(A),Y))}}(Fp(g),E,m,p)}function lf(i,e){return function(s,o){const u=new cs;return s.asyncQueue.enqueueAndForget(async()=>e2(await h2(s),o,u)),u.promise}(Fp(i),e)}function D2(i,e,n){const s=n.docs.get(e._key),o=new tg(i);return new jw(i,o,e._key,s,new Xl(n.hasPendingWrites,n.fromCache),e.converter)}function rE(){return new Qp("serverTimestamp")}function ih(i){return new Yp("increment",i)}(function(e,n=!0){(function(o){Co=o})(Io),Li(new ai("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new _s(new AI(s.getProvider("auth-internal")),new CI(f,s.getProvider("app-check-internal")),function(g,E){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(g.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Yn(s0,a0,e),Yn(s0,a0,"esm2017")})();const Bw="@firebase/installations",ig="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=1e4,Hw=`w:${ig}`,Fw="FIS_v2",x2="https://firebaseinstallations.googleapis.com/v1",O2=60*60*1e3,M2="installations",V2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ua=new da(M2,V2,P2);function Gw(i){return i instanceof ci&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w({projectId:i}){return`${x2}/projects/${i}/installations`}function Kw(i){return{token:i.token,requestStatus:2,expiresIn:L2(i.expiresIn),creationTime:Date.now()}}async function Qw(i,e){const s=(await e.json()).error;return ua.create("request-failed",{requestName:i,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Yw({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function k2(i,{refreshToken:e}){const n=Yw(i);return n.append("Authorization",U2(e)),n}async function Xw(i){const e=await i();return e.status>=500&&e.status<600?i():e}function L2(i){return Number(i.replace("s","000"))}function U2(i){return`${Fw} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const s=$w(i),o=Yw(i),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={fid:n,authVersion:Fw,appId:i.appId,sdkVersion:Hw},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await Xw(()=>fetch(s,m));if(p.ok){const g=await p.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:Kw(g.authToken)}}else throw await Qw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=/^[cdef][\w-]{21}$/,up="";function q2(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=H2(i);return B2.test(n)?n:up}catch{return up}}function H2(i){return z2(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=new Map;function Jw(i,e){const n=uf(i);eb(n,e),F2(n,e)}function eb(i,e){const n=Zw.get(i);if(n)for(const s of n)s(e)}function F2(i,e){const n=G2();n&&n.postMessage({key:i,fid:e}),$2()}let aa=null;function G2(){return!aa&&"BroadcastChannel"in self&&(aa=new BroadcastChannel("[Firebase] FID Change"),aa.onmessage=i=>{eb(i.data.key,i.data.fid)}),aa}function $2(){Zw.size===0&&aa&&(aa.close(),aa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="firebase-installations-database",Q2=1,ca="firebase-installations-store";let Nm=null;function rg(){return Nm||(Nm=eT(K2,Q2,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(ca)}}})),Nm}async function Dh(i,e){const n=uf(i),o=(await rg()).transaction(ca,"readwrite"),u=o.objectStore(ca),f=await u.get(n);return await u.put(e,n),await o.done,(!f||f.fid!==e.fid)&&Jw(i,e.fid),e}async function tb(i){const e=uf(i),s=(await rg()).transaction(ca,"readwrite");await s.objectStore(ca).delete(e),await s.done}async function cf(i,e){const n=uf(i),o=(await rg()).transaction(ca,"readwrite"),u=o.objectStore(ca),f=await u.get(n),m=e(f);return m===void 0?await u.delete(n):await u.put(m,n),await o.done,m&&(!f||f.fid!==m.fid)&&Jw(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sg(i){let e;const n=await cf(i.appConfig,s=>{const o=Y2(s),u=X2(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===up?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Y2(i){const e=i||{fid:q2(),registrationStatus:0};return nb(e)}function X2(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ua.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=W2(i,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z2(i)}:{installationEntry:e}}async function W2(i,e){try{const n=await j2(i,e);return Dh(i.appConfig,n)}catch(n){throw Gw(n)&&n.customData.serverCode===409?await tb(i.appConfig):await Dh(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Z2(i){let e=await sE(i.appConfig);for(;e.registrationStatus===1;)await Ww(100),e=await sE(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await sg(i);return s||n}return e}function sE(i){return cf(i,e=>{if(!e)throw ua.create("installation-not-found");return nb(e)})}function nb(i){return J2(i)?{fid:i.fid,registrationStatus:0}:i}function J2(i){return i.registrationStatus===1&&i.registrationTime+qw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN({appConfig:i,heartbeatServiceProvider:e},n){const s=tN(i,n),o=k2(i,n),u=e.getImmediate({optional:!0});if(u){const g=await u.getHeartbeatsHeader();g&&o.append("x-firebase-client",g)}const f={installation:{sdkVersion:Hw,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(f)},p=await Xw(()=>fetch(s,m));if(p.ok){const g=await p.json();return Kw(g)}else throw await Qw("Generate Auth Token",p)}function tN(i,{fid:e}){return`${$w(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ag(i,e=!1){let n;const s=await cf(i.appConfig,u=>{if(!ib(u))throw ua.create("not-registered");const f=u.authToken;if(!e&&rN(f))return u;if(f.requestStatus===1)return n=nN(i,e),u;{if(!navigator.onLine)throw ua.create("app-offline");const m=aN(u);return n=iN(i,m),m}});return n?await n:s.authToken}async function nN(i,e){let n=await aE(i.appConfig);for(;n.authToken.requestStatus===1;)await Ww(100),n=await aE(i.appConfig);const s=n.authToken;return s.requestStatus===0?ag(i,e):s}function aE(i){return cf(i,e=>{if(!ib(e))throw ua.create("not-registered");const n=e.authToken;return oN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function iN(i,e){try{const n=await eN(i,e),s=Object.assign(Object.assign({},e),{authToken:n});return await Dh(i.appConfig,s),n}catch(n){if(Gw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tb(i.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Dh(i.appConfig,s)}throw n}}function ib(i){return i!==void 0&&i.registrationStatus===2}function rN(i){return i.requestStatus===2&&!sN(i)}function sN(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+O2}function aN(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function oN(i){return i.requestStatus===1&&i.requestTime+qw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(i){const e=i,{installationEntry:n,registrationPromise:s}=await sg(e);return s?s.catch(console.error):ag(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(i,e=!1){const n=i;return await cN(n),(await ag(n,e)).token}async function cN(i){const{registrationPromise:e}=await sg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(i){if(!i||!i.options)throw Dm("App Configuration");if(!i.name)throw Dm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw Dm(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Dm(i){return ua.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="installations",fN="installations-internal",dN=i=>{const e=i.getProvider("app").getImmediate(),n=hN(e),s=ma(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},mN=i=>{const e=i.getProvider("app").getImmediate(),n=ma(e,rb).getImmediate();return{getId:()=>lN(n),getToken:o=>uN(n,o)}};function pN(){Li(new ai(rb,dN,"PUBLIC")),Li(new ai(fN,mN,"PRIVATE"))}pN();Yn(Bw,ig);Yn(Bw,ig,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="analytics",gN="firebase_id",yN="origin",vN=60*1e3,_N="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",og="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new qh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new da("analytics","Analytics",EN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(i){if(!i.startsWith(og)){const e=Vn.create("invalid-gtag-resource",{gtagURL:i});return bn.warn(e.message),""}return i}function sb(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function wN(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function bN(i,e){const n=wN("firebase-js-sdk-policy",{createScriptURL:TN}),s=document.createElement("script"),o=`${og}?l=${i}&id=${e}`;s.src=n?n==null?void 0:n.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function SN(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function AN(i,e,n,s,o,u){const f=s[o];try{if(f)await e[f];else{const p=(await sb(n)).find(g=>g.measurementId===o);p&&await e[p.appId]}}catch(m){bn.error(m)}i("config",o,u)}async function RN(i,e,n,s,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const m=await sb(n);for(const p of f){const g=m.find(b=>b.measurementId===p),E=g&&e[g.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",s,o||{})}catch(u){bn.error(u)}}function IN(i,e,n,s){async function o(u,...f){try{if(u==="event"){const[m,p]=f;await RN(i,e,n,m,p)}else if(u==="config"){const[m,p]=f;await AN(i,e,n,s,m,p)}else if(u==="consent"){const[m,p]=f;i("consent",m,p)}else if(u==="get"){const[m,p,g]=f;i("get",m,p,g)}else if(u==="set"){const[m]=f;i("set",m)}else i(u,...f)}catch(m){bn.error(m)}}return o}function CN(i,e,n,s,o){let u=function(...f){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=IN(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function NN(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(og)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=30,xN=1e3;class ON{constructor(e={},n=xN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ab=new ON;function MN(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function VN(i){var e;const{appId:n,apiKey:s}=i,o={method:"GET",headers:MN(s)},u=_N.replace("{app-id}",n),f=await fetch(u,o);if(f.status!==200&&f.status!==304){let m="";try{const p=await f.json();!((e=p.error)===null||e===void 0)&&e.message&&(m=p.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:f.status,responseMessage:m})}return f.json()}async function PN(i,e=ab,n){const{appId:s,apiKey:o,measurementId:u}=i.options;if(!s)throw Vn.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw Vn.create("no-api-key")}const f=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new UN;return setTimeout(async()=>{m.abort()},vN),ob({appId:s,apiKey:o,measurementId:u},f,m,e)}async function ob(i,{throttleEndTimeMillis:e,backoffCount:n},s,o=ab){var u;const{appId:f,measurementId:m}=i;try{await kN(s,e)}catch(p){if(m)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:f,measurementId:m};throw p}try{const p=await VN(i);return o.deleteThrottleMetadata(f),p}catch(p){const g=p;if(!LN(g)){if(o.deleteThrottleMetadata(f),m)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:f,measurementId:m};throw p}const E=Number((u=g==null?void 0:g.customData)===null||u===void 0?void 0:u.httpStatus)===503?Y_(n,o.intervalMillis,DN):Y_(n,o.intervalMillis),b={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(f,b),bn.debug(`Calling attemptFetch again in ${E} millis`),ob(i,b,s,o)}}function kN(i,e){return new Promise((n,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),s(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LN(i){if(!(i instanceof ci)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class UN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function jN(i,e,n,s,o){if(o&&o.global){i("event",n,s);return}else{const u=await e,f=Object.assign(Object.assign({},s),{send_to:u});i("event",n,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(){if(XE())try{await WE()}catch(i){return bn.warn(Vn.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return bn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function BN(i,e,n,s,o,u,f){var m;const p=PN(i);p.then(P=>{n[P.measurementId]=P.appId,i.options.measurementId&&P.measurementId!==i.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${P.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(P=>bn.error(P)),e.push(p);const g=zN().then(P=>{if(P)return s.getId()}),[E,b]=await Promise.all([p,g]);NN(u)||bN(u,E.measurementId),o("js",new Date);const A=(m=f==null?void 0:f.config)!==null&&m!==void 0?m:{};return A[yN]="firebase",A.update=!0,b!=null&&(A[gN]=b),o("config",E.measurementId,A),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.app=e}_delete(){return delete nu[this.app.options.appId],Promise.resolve()}}let nu={},oE=[];const lE={};let xm="dataLayer",HN="gtag",uE,lb,cE=!1;function FN(){const i=[];if(YE()&&i.push("This is a browser extension environment."),nR()||i.push("Cookies are not available."),i.length>0){const e=i.map((s,o)=>`(${o+1}) ${s}`).join(" "),n=Vn.create("invalid-analytics-context",{errorInfo:e});bn.warn(n.message)}}function GN(i,e,n){FN();const s=i.options.appId;if(!s)throw Vn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(nu[s]!=null)throw Vn.create("already-exists",{id:s});if(!cE){SN(xm);const{wrappedGtag:u,gtagCore:f}=CN(nu,oE,lE,xm,HN);lb=u,uE=f,cE=!0}return nu[s]=BN(i,oE,lE,e,uE,xm,n),new qN(i)}function $N(i=vp()){i=St(i);const e=ma(i,xh);return e.isInitialized()?e.getImmediate():KN(i)}function KN(i,e={}){const n=ma(i,xh);if(n.isInitialized()){const o=n.getImmediate();if(fs(e,n.getOptions()))return o;throw Vn.create("already-initialized")}return n.initialize({options:e})}function QN(i,e,n,s){i=St(i),jN(lb,nu[i.app.options.appId],e,n,s).catch(o=>bn.error(o))}const hE="@firebase/analytics",fE="0.10.12";function YN(){Li(new ai(xh,(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return GN(s,o,n)},"PUBLIC")),Li(new ai("analytics-internal",i,"PRIVATE")),Yn(hE,fE),Yn(hE,fE,"esm2017");function i(e){try{const n=e.getProvider(xh).getImmediate();return{logEvent:(s,o,u)=>QN(n,s,o,u)}}catch(n){throw Vn.create("interop-component-reg-failed",{reason:n})}}}YN();const XN={apiKey:"AIzaSyCcU19CezeaWVKy_av4QHTBFNiPngIcRRA",authDomain:"showswatched2.firebaseapp.com",projectId:"showswatched2",storageBucket:"showswatched2.appspot.com",messagingSenderId:"936739771540",appId:"1:936739771540:web:2fcfeee905ff3f6fdd9081",measurementId:"G-DLKLNE1VQL"},lg=tT(XN),Ft=p2(lg);$N(lg);var ql={},dE;function WN(){if(dE)return ql;dE=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.parse=f,ql.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function f(A,P){const V=new u,Q=A.length;if(Q<2)return V;const H=(P==null?void 0:P.decode)||E;let Y=0;do{const se=A.indexOf("=",Y);if(se===-1)break;const ie=A.indexOf(";",Y),pe=ie===-1?Q:ie;if(se>pe){Y=A.lastIndexOf(";",se-1)+1;continue}const de=m(A,Y,se),be=p(A,se,de),x=A.slice(de,be);if(V[x]===void 0){let R=m(A,se+1,pe),I=p(A,pe,R);const N=H(A.slice(R,I));V[x]=N}Y=pe+1}while(Y<Q);return V}function m(A,P,V){do{const Q=A.charCodeAt(P);if(Q!==32&&Q!==9)return P}while(++P<V);return V}function p(A,P,V){for(;P>V;){const Q=A.charCodeAt(--P);if(Q!==32&&Q!==9)return P+1}return V}function g(A,P,V){const Q=(V==null?void 0:V.encode)||encodeURIComponent;if(!i.test(A))throw new TypeError(`argument name is invalid: ${A}`);const H=Q(P);if(!e.test(H))throw new TypeError(`argument val is invalid: ${P}`);let Y=A+"="+H;if(!V)return Y;if(V.maxAge!==void 0){if(!Number.isInteger(V.maxAge))throw new TypeError(`option maxAge is invalid: ${V.maxAge}`);Y+="; Max-Age="+V.maxAge}if(V.domain){if(!n.test(V.domain))throw new TypeError(`option domain is invalid: ${V.domain}`);Y+="; Domain="+V.domain}if(V.path){if(!s.test(V.path))throw new TypeError(`option path is invalid: ${V.path}`);Y+="; Path="+V.path}if(V.expires){if(!b(V.expires)||!Number.isFinite(V.expires.valueOf()))throw new TypeError(`option expires is invalid: ${V.expires}`);Y+="; Expires="+V.expires.toUTCString()}if(V.httpOnly&&(Y+="; HttpOnly"),V.secure&&(Y+="; Secure"),V.partitioned&&(Y+="; Partitioned"),V.priority)switch(typeof V.priority=="string"?V.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${V.priority}`)}if(V.sameSite)switch(typeof V.sameSite=="string"?V.sameSite.toLowerCase():V.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${V.sameSite}`)}return Y}function E(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function b(A){return o.call(A)==="[object Date]"}return ql}WN();/**
 * react-router v7.5.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mE="popstate";function ZN(i={}){function e(s,o){let{pathname:u,search:f,hash:m}=s.location;return cp("",{pathname:u,search:f,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:mu(o)}return eD(e,n,null,i)}function mt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function li(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JN(){return Math.random().toString(36).substring(2,10)}function pE(i,e){return{usr:i.state,key:i.key,idx:e}}function cp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Mo(e):e,state:n,key:e&&e.key||s||JN()}}function mu({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Mo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function eD(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",p=null,g=E();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function E(){return(f.state||{idx:null}).idx}function b(){m="POP";let H=E(),Y=H==null?null:H-g;g=H,p&&p({action:m,location:Q.location,delta:Y})}function A(H,Y){m="PUSH";let se=cp(Q.location,H,Y);g=E()+1;let ie=pE(se,g),pe=Q.createHref(se);try{f.pushState(ie,"",pe)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(pe)}u&&p&&p({action:m,location:Q.location,delta:1})}function P(H,Y){m="REPLACE";let se=cp(Q.location,H,Y);g=E();let ie=pE(se,g),pe=Q.createHref(se);f.replaceState(ie,"",pe),u&&p&&p({action:m,location:Q.location,delta:0})}function V(H){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof H=="string"?H:mu(H);return se=se.replace(/ $/,"%20"),mt(Y,`No window.location.(origin|href) available to create URL for href: ${se}`),new URL(se,Y)}let Q={get action(){return m},get location(){return i(o,f)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(mE,b),p=H,()=>{o.removeEventListener(mE,b),p=null}},createHref(H){return e(o,H)},createURL:V,encodeLocation(H){let Y=V(H);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:A,replace:P,go(H){return f.go(H)}};return Q}function ub(i,e,n="/"){return tD(i,e,n,!1)}function tD(i,e,n,s){let o=typeof e=="string"?Mo(e):e,u=wr(o.pathname||"/",n);if(u==null)return null;let f=cb(i);nD(f);let m=null;for(let p=0;m==null&&p<f.length;++p){let g=dD(u);m=hD(f[p],g,s)}return m}function cb(i,e=[],n=[],s=""){let o=(u,f,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(mt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let g=yr([s,p.relativePath]),E=n.concat(p);u.children&&u.children.length>0&&(mt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),cb(u.children,e,E,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:uD(g,u.index),routesMeta:E})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,f);else for(let p of hb(u.path))o(u,f,p)}),e}function hb(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=hb(s.join("/")),m=[];return m.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...f),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function nD(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:cD(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var iD=/^:[\w-]+$/,rD=3,sD=2,aD=1,oD=10,lD=-2,gE=i=>i==="*";function uD(i,e){let n=i.split("/"),s=n.length;return n.some(gE)&&(s+=lD),e&&(s+=sD),n.filter(o=>!gE(o)).reduce((o,u)=>o+(iD.test(u)?rD:u===""?aD:oD),s)}function cD(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function hD(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",b=Oh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},E),A=p.route;if(!b&&g&&n&&!s[s.length-1].route.index&&(b=Oh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!b)return null;Object.assign(o,b.params),f.push({params:o,pathname:yr([u,b.pathname]),pathnameBase:yD(yr([u,b.pathnameBase])),route:A}),b.pathnameBase!=="/"&&(u=yr([u,b.pathnameBase]))}return f}function Oh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=fD(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:E,isOptional:b},A)=>{if(E==="*"){let V=m[A]||"";f=u.slice(0,u.length-V.length).replace(/(.)\/+$/,"$1")}const P=m[A];return b&&!P?g[E]=void 0:g[E]=(P||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function fD(i,e=!1,n=!0){li(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function dD(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return li(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function wr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}function mD(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Mo(i):i;return{pathname:n?n.startsWith("/")?n:pD(n,e):e,search:vD(s),hash:_D(o)}}function pD(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Om(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gD(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ug(i){let e=gD(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function cg(i,e,n,s=!1){let o;typeof i=="string"?o=Mo(i):(o={...i},mt(!o.pathname||!o.pathname.includes("?"),Om("?","pathname","search",o)),mt(!o.pathname||!o.pathname.includes("#"),Om("#","pathname","hash",o)),mt(!o.search||!o.search.includes("#"),Om("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let b=e.length-1;if(!s&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),b-=1;o.pathname=A.join("/")}m=b>=0?e[b]:"/"}let p=mD(o,m),g=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||E)&&(p.pathname+="/"),p}var yr=i=>i.join("/").replace(/\/\/+/g,"/"),yD=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),vD=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,_D=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ED(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var fb=["POST","PUT","PATCH","DELETE"];new Set(fb);var TD=["GET",...fb];new Set(TD);var Vo=U.createContext(null);Vo.displayName="DataRouter";var hf=U.createContext(null);hf.displayName="DataRouterState";var db=U.createContext({isTransitioning:!1});db.displayName="ViewTransition";var wD=U.createContext(new Map);wD.displayName="Fetchers";var bD=U.createContext(null);bD.displayName="Await";var hi=U.createContext(null);hi.displayName="Navigation";var Su=U.createContext(null);Su.displayName="Location";var ji=U.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var hg=U.createContext(null);hg.displayName="RouteError";function SD(i,{relative:e}={}){mt(Po(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=U.useContext(hi),{hash:o,pathname:u,search:f}=Ru(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:yr([n,u])),s.createHref({pathname:m,search:f,hash:o})}function Po(){return U.useContext(Su)!=null}function bs(){return mt(Po(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Su).location}var mb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pb(i){U.useContext(hi).static||U.useLayoutEffect(i)}function Au(){let{isDataRoute:i}=U.useContext(ji);return i?LD():AD()}function AD(){mt(Po(),"useNavigate() may be used only in the context of a <Router> component.");let i=U.useContext(Vo),{basename:e,navigator:n}=U.useContext(hi),{matches:s}=U.useContext(ji),{pathname:o}=bs(),u=JSON.stringify(ug(s)),f=U.useRef(!1);return pb(()=>{f.current=!0}),U.useCallback((p,g={})=>{if(li(f.current,mb),!f.current)return;if(typeof p=="number"){n.go(p);return}let E=cg(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:yr([e,E.pathname])),(g.replace?n.replace:n.push)(E,g.state,g)},[e,n,u,o,i])}U.createContext(null);function Ru(i,{relative:e}={}){let{matches:n}=U.useContext(ji),{pathname:s}=bs(),o=JSON.stringify(ug(n));return U.useMemo(()=>cg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function RD(i,e){return gb(i,e)}function gb(i,e,n,s){var se;mt(Po(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:u}=U.useContext(hi),{matches:f}=U.useContext(ji),m=f[f.length-1],p=m?m.params:{},g=m?m.pathname:"/",E=m?m.pathnameBase:"/",b=m&&m.route;{let ie=b&&b.path||"";yb(g,!b||ie.endsWith("*")||ie.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ie}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ie}"> to <Route path="${ie==="/"?"*":`${ie}/*`}">.`)}let A=bs(),P;if(e){let ie=typeof e=="string"?Mo(e):e;mt(E==="/"||((se=ie.pathname)==null?void 0:se.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${ie.pathname}" was given in the \`location\` prop.`),P=ie}else P=A;let V=P.pathname||"/",Q=V;if(E!=="/"){let ie=E.replace(/^\//,"").split("/");Q="/"+V.replace(/^\//,"").split("/").slice(ie.length).join("/")}let H=!u&&n&&n.matches&&n.matches.length>0?n.matches:ub(i,{pathname:Q});li(b||H!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),li(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=xD(H&&H.map(ie=>Object.assign({},ie,{params:Object.assign({},p,ie.params),pathname:yr([E,o.encodeLocation?o.encodeLocation(ie.pathname).pathname:ie.pathname]),pathnameBase:ie.pathnameBase==="/"?E:yr([E,o.encodeLocation?o.encodeLocation(ie.pathnameBase).pathname:ie.pathnameBase])})),f,n,s);return e&&Y?U.createElement(Su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},Y):Y}function ID(){let i=kD(),e=ED(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:u},"ErrorBoundary")," or"," ",U.createElement("code",{style:u},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:o},n):null,f)}var CD=U.createElement(ID,null),ND=class extends U.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?U.createElement(ji.Provider,{value:this.props.routeContext},U.createElement(hg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DD({routeContext:i,match:e,children:n}){let s=U.useContext(Vo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(ji.Provider,{value:i},n)}function xD(i,e=[],n=null,s=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let o=i,u=n==null?void 0:n.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);mt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,m=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:E,errors:b}=n,A=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||A){f=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,E)=>{let b,A=!1,P=null,V=null;n&&(b=u&&g.route.id?u[g.route.id]:void 0,P=g.route.errorElement||CD,f&&(m<0&&E===0?(yb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,V=null):m===E&&(A=!0,V=g.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,E+1)),H=()=>{let Y;return b?Y=P:A?Y=V:g.route.Component?Y=U.createElement(g.route.Component,null):g.route.element?Y=g.route.element:Y=p,U.createElement(DD,{match:g,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:Y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?U.createElement(ND,{location:n.location,revalidation:n.revalidation,component:P,error:b,children:H(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):H()},null)}function fg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OD(i){let e=U.useContext(Vo);return mt(e,fg(i)),e}function MD(i){let e=U.useContext(hf);return mt(e,fg(i)),e}function VD(i){let e=U.useContext(ji);return mt(e,fg(i)),e}function dg(i){let e=VD(i),n=e.matches[e.matches.length-1];return mt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function PD(){return dg("useRouteId")}function kD(){var s;let i=U.useContext(hg),e=MD("useRouteError"),n=dg("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[n]}function LD(){let{router:i}=OD("useNavigate"),e=dg("useNavigate"),n=U.useRef(!1);return pb(()=>{n.current=!0}),U.useCallback(async(o,u={})=>{li(n.current,mb),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var yE={};function yb(i,e,n){!e&&!yE[i]&&(yE[i]=!0,li(!1,n))}U.memo(UD);function UD({routes:i,future:e,state:n}){return gb(i,void 0,n,e)}function mg({to:i,replace:e,state:n,relative:s}){mt(Po(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=U.useContext(hi);li(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=U.useContext(ji),{pathname:f}=bs(),m=Au(),p=cg(i,ug(u),f,s==="path"),g=JSON.stringify(p);return U.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function mo(i){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jD({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1}){mt(!Po(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=U.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=Mo(n));let{pathname:p="/",search:g="",hash:E="",state:b=null,key:A="default"}=n,P=U.useMemo(()=>{let V=wr(p,f);return V==null?null:{location:{pathname:V,search:g,hash:E,state:b,key:A},navigationType:s}},[f,p,g,E,b,A,s]);return li(P!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${E}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:U.createElement(hi.Provider,{value:m},U.createElement(Su.Provider,{children:e,value:P}))}function zD({children:i,location:e}){return RD(hp(i),e)}function hp(i,e=[]){let n=[];return U.Children.forEach(i,(s,o)=>{if(!U.isValidElement(s))return;let u=[...e,o];if(s.type===U.Fragment){n.push.apply(n,hp(s.props.children,u));return}mt(s.type===mo,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=hp(s.props.children,u)),n.push(f)}),n}var dh="get",mh="application/x-www-form-urlencoded";function ff(i){return i!=null&&typeof i.tagName=="string"}function BD(i){return ff(i)&&i.tagName.toLowerCase()==="button"}function qD(i){return ff(i)&&i.tagName.toLowerCase()==="form"}function HD(i){return ff(i)&&i.tagName.toLowerCase()==="input"}function FD(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function GD(i,e){return i.button===0&&(!e||e==="_self")&&!FD(i)}var rh=null;function $D(){if(rh===null)try{new FormData(document.createElement("form"),0),rh=!1}catch{rh=!0}return rh}var KD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mm(i){return i!=null&&!KD.has(i)?(li(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mh}"`),null):i}function QD(i,e){let n,s,o,u,f;if(qD(i)){let m=i.getAttribute("action");s=m?wr(m,e):null,n=i.getAttribute("method")||dh,o=Mm(i.getAttribute("enctype"))||mh,u=new FormData(i)}else if(BD(i)||HD(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?wr(p,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||dh,o=Mm(i.getAttribute("formenctype"))||Mm(m.getAttribute("enctype"))||mh,u=new FormData(m,i),!$D()){let{name:g,type:E,value:b}=i;if(E==="image"){let A=g?`${g}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else g&&u.append(g,b)}}else{if(ff(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=dh,s=null,o=mh,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}function pg(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function YD(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function WD(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await YD(u,n);return f.links?f.links():[]}return[]}));return tx(s.flat(1).filter(XD).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function vE(i,e,n,s,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>{var E;return n[g].pathname!==p.pathname||((E=n[g].route.path)==null?void 0:E.endsWith("*"))&&n[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>f(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var b;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(f(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function ZD(i,e,{includeHydrateFallback:n}={}){return JD(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function JD(i){return[...new Set(i)]}function ex(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function tx(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(ex(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}var nx=new Set([100,101,204,205]);function ix(i,e){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname="_root.data":e&&wr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function vb(){let i=U.useContext(Vo);return pg(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function rx(){let i=U.useContext(hf);return pg(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var gg=U.createContext(void 0);gg.displayName="FrameworkContext";function _b(){let i=U.useContext(gg);return pg(i,"You must render this element inside a <HydratedRouter> element"),i}function sx(i,e){let n=U.useContext(gg),[s,o]=U.useState(!1),[u,f]=U.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:E,onTouchStart:b}=e,A=U.useRef(null);U.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let Q=Y=>{Y.forEach(se=>{f(se.isIntersecting)})},H=new IntersectionObserver(Q,{threshold:.5});return A.current&&H.observe(A.current),()=>{H.disconnect()}}},[i]),U.useEffect(()=>{if(s){let Q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let P=()=>{o(!0)},V=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,A,{}]:[u,A,{onFocus:Hl(m,P),onBlur:Hl(p,V),onMouseEnter:Hl(g,P),onMouseLeave:Hl(E,V),onTouchStart:Hl(b,P)}]:[!1,A,{}]}function Hl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function ax({page:i,...e}){let{router:n}=vb(),s=U.useMemo(()=>ub(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?U.createElement(lx,{page:i,matches:s,...e}):null}function ox(i){let{manifest:e,routeModules:n}=_b(),[s,o]=U.useState([]);return U.useEffect(()=>{let u=!1;return WD(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function lx({page:i,matches:e,...n}){let s=bs(),{manifest:o,routeModules:u}=_b(),{basename:f}=vb(),{loaderData:m,matches:p}=rx(),g=U.useMemo(()=>vE(i,e,p,o,s,"data"),[i,e,p,o,s]),E=U.useMemo(()=>vE(i,e,p,o,s,"assets"),[i,e,p,o,s]),b=U.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let V=new Set,Q=!1;if(e.forEach(Y=>{var ie;let se=o.routes[Y.route.id];!se||!se.hasLoader||(!g.some(pe=>pe.route.id===Y.route.id)&&Y.route.id in m&&((ie=u[Y.route.id])!=null&&ie.shouldRevalidate)||se.hasClientLoader?Q=!0:V.add(Y.route.id))}),V.size===0)return[];let H=ix(i,f);return Q&&V.size>0&&H.searchParams.set("_routes",e.filter(Y=>V.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[H.pathname+H.search]},[f,m,s,o,g,e,i,u]),A=U.useMemo(()=>ZD(E,o),[E,o]),P=ox(E);return U.createElement(U.Fragment,null,b.map(V=>U.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),A.map(V=>U.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),P.map(({key:V,link:Q})=>U.createElement("link",{key:V,...Q})))}function ux(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Eb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Eb&&(window.__reactRouterVersion="7.5.1")}catch{}function cx({basename:i,children:e,window:n}){let s=U.useRef();s.current==null&&(s.current=ZN({window:n,v5Compat:!0}));let o=s.current,[u,f]=U.useState({action:o.action,location:o.location}),m=U.useCallback(p=>{U.startTransition(()=>f(p))},[f]);return U.useLayoutEffect(()=>o.listen(m),[o,m]),U.createElement(jD,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Tb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yg=U.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:p,to:g,preventScrollReset:E,viewTransition:b,...A},P){let{basename:V}=U.useContext(hi),Q=typeof g=="string"&&Tb.test(g),H,Y=!1;if(typeof g=="string"&&Q&&(H=g,Eb))try{let I=new URL(window.location.href),N=g.startsWith("//")?new URL(I.protocol+g):new URL(g),M=wr(N.pathname,V);N.origin===I.origin&&M!=null?g=M+N.search+N.hash:Y=!0}catch{li(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let se=SD(g,{relative:o}),[ie,pe,de]=sx(s,A),be=mx(g,{replace:f,state:m,target:p,preventScrollReset:E,relative:o,viewTransition:b});function x(I){e&&e(I),I.defaultPrevented||be(I)}let R=U.createElement("a",{...A,...de,href:H||se,onClick:Y||u?e:x,ref:ux(P,pe),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return ie&&!Q?U.createElement(U.Fragment,null,R,U.createElement(ax,{page:se})):R});yg.displayName="Link";var hx=U.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:p,...g},E){let b=Ru(f,{relative:g.relative}),A=bs(),P=U.useContext(hf),{navigator:V,basename:Q}=U.useContext(hi),H=P!=null&&_x(b)&&m===!0,Y=V.encodeLocation?V.encodeLocation(b).pathname:b.pathname,se=A.pathname,ie=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(se=se.toLowerCase(),ie=ie?ie.toLowerCase():null,Y=Y.toLowerCase()),ie&&Q&&(ie=wr(ie,Q)||ie);const pe=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let de=se===Y||!o&&se.startsWith(Y)&&se.charAt(pe)==="/",be=ie!=null&&(ie===Y||!o&&ie.startsWith(Y)&&ie.charAt(Y.length)==="/"),x={isActive:de,isPending:be,isTransitioning:H},R=de?e:void 0,I;typeof s=="function"?I=s(x):I=[s,de?"active":null,be?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let N=typeof u=="function"?u(x):u;return U.createElement(yg,{...g,"aria-current":R,className:I,ref:E,style:N,to:f,viewTransition:m},typeof p=="function"?p(x):p)});hx.displayName="NavLink";var fx=U.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=dh,action:m,onSubmit:p,relative:g,preventScrollReset:E,viewTransition:b,...A},P)=>{let V=yx(),Q=vx(m,{relative:g}),H=f.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&Tb.test(m),se=ie=>{if(p&&p(ie),ie.defaultPrevented)return;ie.preventDefault();let pe=ie.nativeEvent.submitter,de=(pe==null?void 0:pe.getAttribute("formmethod"))||f;V(pe||ie.currentTarget,{fetcherKey:e,method:de,navigate:n,replace:o,state:u,relative:g,preventScrollReset:E,viewTransition:b})};return U.createElement("form",{ref:P,method:H,action:Q,onSubmit:s?p:se,...A,"data-discover":!Y&&i==="render"?"true":void 0})});fx.displayName="Form";function dx(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wb(i){let e=U.useContext(Vo);return mt(e,dx(i)),e}function mx(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let m=Au(),p=bs(),g=Ru(i,{relative:u});return U.useCallback(E=>{if(GD(E,e)){E.preventDefault();let b=n!==void 0?n:mu(p)===mu(g);m(i,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[p,m,g,n,s,e,i,o,u,f])}var px=0,gx=()=>`__${String(++px)}__`;function yx(){let{router:i}=wb("useSubmit"),{basename:e}=U.useContext(hi),n=PD();return U.useCallback(async(s,o={})=>{let{action:u,method:f,encType:m,formData:p,body:g}=QD(s,e);if(o.navigate===!1){let E=o.fetcherKey||gx();await i.fetch(E,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function vx(i,{relative:e}={}){let{basename:n}=U.useContext(hi),s=U.useContext(ji);mt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Ru(i||".",{relative:e})},f=bs();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(E=>E==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let E=m.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:yr([n,u.pathname])),mu(u)}function _x(i,e={}){let n=U.useContext(db);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=wb("useViewTransitionState"),o=Ru(i,{relative:e.relative});if(!n.isTransitioning)return!1;let u=wr(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=wr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Oh(o.pathname,f)!=null||Oh(o.pathname,u)!=null}new TextEncoder;[...nx];var Ex=qE();const _E=BE(Ex);function vg(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function bb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tx=bb,Sb=new da("auth","Firebase",bb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new qh("@firebase/auth");function wx(i,...e){Mh.logLevel<=ze.WARN&&Mh.warn(`Auth (${Io}): ${i}`,...e)}function ph(i,...e){Mh.logLevel<=ze.ERROR&&Mh.error(`Auth (${Io}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(i,...e){throw _g(i,...e)}function Pi(i,...e){return _g(i,...e)}function Ab(i,e,n){const s=Object.assign(Object.assign({},Tx()),{[e]:n});return new da("auth","Firebase",s).create(e,{appName:i.name})}function vr(i){return Ab(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _g(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Sb.create(i,...e)}function Re(i,e,...n){if(!i)throw _g(e,...n)}function pr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ph(e),new Error(e)}function br(i,e){i||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function bx(){return EE()==="http:"||EE()==="https:"}function EE(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bx()||YE()||"connection"in navigator)?navigator.onLine:!0}function Ax(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.shortDelay=e,this.longDelay=n,br(n>e,"Short delay should be less than long delay!"),this.isMobile=XA()||JA()}get(){return Sx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(i,e){br(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cx=new Iu(3e4,6e4);function Ss(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function As(i,e,n,s,o={}){return Ib(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=yu(Object.assign({key:i.config.apiKey},f)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return ZA()||(g.referrerPolicy="no-referrer"),Rb.fetch()(await Cb(i,i.config.apiHost,n,m),g)})}async function Ib(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},Rx),e);try{const o=new Dx(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw sh(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(i,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw sh(i,"email-already-in-use",f);if(p==="USER_DISABLED")throw sh(i,"user-disabled",f);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ab(i,E,g);ui(i,E)}}catch(o){if(o instanceof ci)throw o;ui(i,"network-request-failed",{message:String(o)})}}async function Cu(i,e,n,s,o={}){const u=await As(i,e,n,s,o);return"mfaPendingCredential"in u&&ui(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function Cb(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Eg(i.config,o):`${i.config.apiScheme}://${o}`;return Ix.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function Nx(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Pi(this.auth,"network-request-failed")),Cx.get())})}}function sh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Pi(i,e,s);return o.customData._tokenResponse=n,o}function TE(i){return i!==void 0&&i.enterprise!==void 0}class xx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Nx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ox(i,e){return As(i,"GET","/v2/recaptchaConfig",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(i,e){return As(i,"POST","/v1/accounts:delete",e)}async function Vh(i,e){return As(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vx(i,e=!1){const n=St(i),s=await n.getIdToken(e),o=Tg(s);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:iu(Vm(o.auth_time)),issuedAtTime:iu(Vm(o.iat)),expirationTime:iu(Vm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Vm(i){return Number(i)*1e3}function Tg(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return ph("JWT malformed, contained fewer than 3 sections"),null;try{const o=GE(n);return o?JSON.parse(o):(ph("Failed to decode base64 JWT payload"),null)}catch(o){return ph("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function wE(i){const e=Tg(i);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ci&&Px(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function Px({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(i){var e;const n=i.auth,s=await i.getIdToken(),o=await pu(i,Vh(n,{idToken:s}));Re(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Nb(u.providerUserInfo):[],m=Ux(i.providerData,f),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?g:!1,b={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new dp(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,b)}async function Lx(i){const e=St(i);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ux(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Nb(i){return i.map(e=>{var{providerId:n}=e,s=vg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(i,e){const n=await Ib(i,{},async()=>{const s=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await Cb(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Rb.fetch()(f,{method:"POST",headers:m,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zx(i,e){return As(i,"POST","/v2/accounts:revokeToken",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=wE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await jx(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new yo;return s&&(Re(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Re(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(i,e){Re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class si{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=vg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new dp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await pu(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vx(this,e)}reload(){return Lx(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await pu(this,Mx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,m,p,g,E;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,P=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,V=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Q=(m=n.tenantId)!==null&&m!==void 0?m:void 0,H=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(g=n.createdAt)!==null&&g!==void 0?g:void 0,se=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ie,emailVerified:pe,isAnonymous:de,providerData:be,stsTokenManager:x}=n;Re(ie&&x,e,"internal-error");const R=yo.fromJSON(this.name,x);Re(typeof ie=="string",e,"internal-error"),es(b,e.name),es(A,e.name),Re(typeof pe=="boolean",e,"internal-error"),Re(typeof de=="boolean",e,"internal-error"),es(P,e.name),es(V,e.name),es(Q,e.name),es(H,e.name),es(Y,e.name),es(se,e.name);const I=new si({uid:ie,auth:e,email:A,emailVerified:pe,displayName:b,isAnonymous:de,photoURL:V,phoneNumber:P,tenantId:Q,stsTokenManager:R,createdAt:Y,lastLoginAt:se});return be&&Array.isArray(be)&&(I.providerData=be.map(N=>Object.assign({},N))),H&&(I._redirectEventId=H),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new yo;o.updateFromServerResponse(n);const u=new si({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ph(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Nb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new yo;m.updateFromIdToken(s);const p=new si({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new dp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=new Map;function gr(i){br(i instanceof Function,"Expected a class definition");let e=bE.get(i);return e?(br(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,bE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Db.type="NONE";const SE=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(i,e,n){return`firebase:${i}:${e}:${n}`}class vo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=gh(this.userKey,o.apiKey,u),this.fullPersistenceKey=gh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vh(this.auth,{idToken:e}).catch(()=>{});return n?si._fromGetAccountInfoResponse(this.auth,n,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new vo(gr(SE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||gr(SE);const f=gh(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const E=await g._get(f);if(E){let b;if(typeof E=="string"){const A=await Vh(e,{idToken:E}).catch(()=>{});if(!A)break;b=await si._fromGetAccountInfoResponse(e,A,E)}else b=si._fromJSON(e,E);g!==u&&(m=b),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new vo(u,e,s):(u=p[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new vo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Lb(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Mb(e))&&!e.includes("edge/"))return"Chrome";if(Pb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xb(i=on()){return/firefox\//i.test(i)}function Ob(i=on()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mb(i=on()){return/crios\//i.test(i)}function Vb(i=on()){return/iemobile/i.test(i)}function Pb(i=on()){return/android/i.test(i)}function kb(i=on()){return/blackberry/i.test(i)}function Lb(i=on()){return/webos/i.test(i)}function wg(i=on()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function Bx(i=on()){var e;return wg(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qx(){return eR()&&document.documentMode===10}function Ub(i=on()){return wg(i)||Pb(i)||Lb(i)||kb(i)||/windows phone/i.test(i)||Vb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(i,e=[]){let n;switch(i){case"Browser":n=AE(on());break;case"Worker":n=`${AE(on())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const p=e(u);f(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(i,e={}){return As(i,"GET","/v2/passwordPolicy",Ss(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=6;class $x{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:Gx,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RE(this),this.idTokenSubscription=new RE(this),this.beforeStateQueue=new Hx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vh(this,{idToken:e}),s=await si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ax()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(vr(this));const n=e?St(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Fx(this),n=new $x(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new da("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await zx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ya(i){return St(i)}class RE{constructor(e){this.auth=e,this.observer=null,this.addObserver=oR(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qx(i){df=i}function zb(i){return df.loadJS(i)}function Yx(){return df.recaptchaEnterpriseScript}function Xx(){return df.gapiScript}function Wx(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class Zx{constructor(){this.enterprise=new Jx}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Jx{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const eO="recaptcha-enterprise",Bb="NO_RECAPTCHA";class tO{constructor(e){this.type=eO,this.auth=ya(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{Ox(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new xx(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,f,m){const p=window.grecaptcha;TE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(Bb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zx().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&TE(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Yx();p.length!==0&&(p+=m),zb(p).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function IE(i,e,n,s=!1,o=!1){const u=new tO(i);let f;if(o)f=Bb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function mp(i,e,n,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await IE(i,e,n,n==="getOobCode");return s(i,f)}else return s(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await IE(i,e,n,n==="getOobCode");return s(i,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(i,e){const n=ma(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(fs(u,e??{}))return o;ui(o,"already-initialized")}return n.initialize({options:e})}function iO(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function rO(i,e,n){const s=ya(i);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=qb(e),{host:f,port:m}=sO(e),p=m===null?"":`:${m}`,g={url:`${u}//${f}${p}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(fs(g,s.config.emulator)&&fs(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,aO()}function qb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function sO(i){const e=qb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:CE(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:CE(f)}}}function CE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function aO(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function oO(i,e){return As(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(i,e){return Cu(i,"POST","/v1/accounts:signInWithPassword",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(i,e){return Cu(i,"POST","/v1/accounts:signInWithEmailLink",Ss(i,e))}async function cO(i,e){return Cu(i,"POST","/v1/accounts:signInWithEmailLink",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends bg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new gu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new gu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,n,"signInWithPassword",lO);case"emailLink":return uO(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mp(e,s,"signUpPassword",oO);case"emailLink":return cO(e,{idToken:n,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(i,e){return Cu(i,"POST","/v1/accounts:signInWithIdp",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="http://localhost";class ha extends bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ui("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=vg(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new ha(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,_o(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:hO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dO(i){const e=Gl($l(i)).link,n=e?Gl($l(e)).deep_link_id:null,s=Gl($l(i)).deep_link_id;return(s?Gl($l(s)).link:null)||s||n||e||i}class Sg{constructor(e){var n,s,o,u,f,m;const p=Gl($l(e)),g=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,b=fO((o=p.mode)!==null&&o!==void 0?o:null);Re(g&&E&&b,"argument-error"),this.apiKey=g,this.operation=b,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=p.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=dO(e);try{return new Sg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,n){return gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Sg.parseLink(n);return Re(s,"argument-error"),gu._fromEmailAndCode(e,s.code,s.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Hb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Nu{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ha._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ns.credential(n,s)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Nu{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Nu{constructor(){super("twitter.com")}static credential(e,n){return ha._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return rs.credential(n,s)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(i,e){return Cu(i,"POST","/v1/accounts:signUp",Ss(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await si._fromIdTokenResponse(e,s,o),f=NE(s);return new fa({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=NE(s);return new fa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function NE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends ci{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new kh(e,n,s,o)}}function Fb(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(i,u,e,s):u})}async function pO(i,e,n=!1){const s=await pu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return fa._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(i,e,n=!1){const{auth:s}=i;if(Qn(s.app))return Promise.reject(vr(s));const o="reauthenticate";try{const u=await pu(i,Fb(s,o,e,i),n);Re(u.idToken,s,"internal-error");const f=Tg(u.idToken);Re(f,s,"internal-error");const{sub:m}=f;return Re(i.uid===m,s,"user-mismatch"),fa._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&ui(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(i,e,n=!1){if(Qn(i.app))return Promise.reject(vr(i));const s="signIn",o=await Fb(i,s,e),u=await fa._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function yO(i,e){return Gb(ya(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $b(i){const e=ya(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vO(i,e,n){if(Qn(i.app))return Promise.reject(vr(i));const s=ya(i),f=await mp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&$b(i),p}),m=await fa._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function _O(i,e,n){return Qn(i.app)?Promise.reject(vr(i)):yO(St(i),ko.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&$b(i),s})}function EO(i,e,n,s){return St(i).onIdTokenChanged(e,n,s)}function TO(i,e,n){return St(i).beforeAuthStateChanged(e,n)}function wO(i,e,n,s){return St(i).onAuthStateChanged(e,n,s)}function bO(i){return St(i).signOut()}const Lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lh,"1"),this.storage.removeItem(Lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=1e3,AO=10;class Qb extends Kb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ub(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,p)=>{this.notifyListeners(f,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);qx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,AO):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},SO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qb.type="LOCAL";const RO=Qb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb extends Kb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Yb.type="SESSION";const Xb=Yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new mf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),p=await IO(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,p)=>{const g=Ag("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function NO(i){ki().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function DO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xO(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function OO(){return Wb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="firebaseLocalStorageDb",MO=1,Uh="firebaseLocalStorage",Jb="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pf(i,e){return i.transaction([Uh],e?"readwrite":"readonly").objectStore(Uh)}function VO(){const i=indexedDB.deleteDatabase(Zb);return new Du(i).toPromise()}function pp(){const i=indexedDB.open(Zb,MO);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Uh,{keyPath:Jb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Uh)?e(s):(s.close(),await VO(),e(await pp()))})})}async function DE(i,e,n){const s=pf(i,!0).put({[Jb]:e,value:n});return new Du(s).toPromise()}async function PO(i,e){const n=pf(i,!1).get(e),s=await new Du(n).toPromise();return s===void 0?null:s.value}function xE(i,e){const n=pf(i,!0).delete(e);return new Du(n).toPromise()}const kO=800,LO=3;class eS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>LO)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mf._getInstance(OO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DO(),!this.activeServiceWorker)return;this.sender=new CO(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await DE(e,Lh,"1"),await xE(e,Lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>DE(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>PO(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=pf(o,!1).getAll();return new Du(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eS.type="LOCAL";const UO=eS;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(i,e){return e?gr(e):(Re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zO(i){return Gb(i.auth,new Rg(i),i.bypassAuthState)}function BO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),gO(n,new Rg(i),i.bypassAuthState)}async function qO(i){const{auth:e,user:n}=i;return Re(n,e,"internal-error"),pO(n,new Rg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zO;case"linkViaPopup":case"linkViaRedirect":return qO;case"reauthViaPopup":case"reauthViaRedirect":return BO;default:ui(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new Iu(2e3,1e4);class po extends tS{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HO.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="pendingRedirect",yh=new Map;class GO extends tS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const s=await $O(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $O(i,e){const n=YO(e),s=QO(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function KO(i,e){yh.set(i._key(),e)}function QO(i){return gr(i._redirectPersistence)}function YO(i){return gh(FO,i.config.apiKey,i.name)}async function XO(i,e,n=!1){if(Qn(i.app))return Promise.reject(vr(i));const s=ya(i),o=jO(s,e),f=await new GO(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=10*60*1e3;class ZO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!nS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WO&&this.cachedEventUids.clear(),this.cachedEventUids.has(OE(e))}saveEventToCache(e){this.cachedEventUids.add(OE(e)),this.lastProcessedEventTime=Date.now()}}function OE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function nS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JO(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(i,e={}){return As(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nM=/^https?/;async function iM(i){if(i.config.emulator)return;const{authorizedDomains:e}=await eM(i);for(const n of e)try{if(rM(n))return}catch{}ui(i,"unauthorized-domain")}function rM(i){const e=fp(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!nM.test(n))return!1;if(tM.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new Iu(3e4,6e4);function ME(){const i=ki().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function aM(i){return new Promise((e,n)=>{var s,o,u;function f(){ME(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ME(),n(Pi(i,"network-request-failed"))},timeout:sM.get()})}if(!((o=(s=ki().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=ki().gapi)===null||u===void 0)&&u.load)f();else{const m=Wx("iframefcb");return ki()[m]=()=>{gapi.load?f():n(Pi(i,"network-request-failed"))},zb(`${Xx()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw vh=null,e})}let vh=null;function oM(i){return vh=vh||aM(i),vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new Iu(5e3,15e3),uM="__/auth/iframe",cM="emulator/auth/iframe",hM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dM(i){const e=i.config;Re(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Eg(e,cM):`https://${i.config.authDomain}/${uM}`,s={apiKey:e.apiKey,appName:i.name,v:Io},o=fM.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${yu(s).slice(1)}`}async function mM(i){const e=await oM(i),n=ki().gapi;return Re(n,i,"internal-error"),e.open({where:document.body,url:dM(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hM,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Pi(i,"network-request-failed"),m=ki().setTimeout(()=>{u(f)},lM.get());function p(){ki().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gM=500,yM=600,vM="_blank",_M="http://localhost";class VE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EM(i,e,n,s=gM,o=yM){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},pM),{width:s.toString(),height:o.toString(),top:u,left:f}),g=on().toLowerCase();n&&(m=Mb(g)?vM:n),xb(g)&&(e=e||_M,p.scrollbars="yes");const E=Object.entries(p).reduce((A,[P,V])=>`${A}${P}=${V},`,"");if(Bx(g)&&m!=="_self")return TM(e||"",m),new VE(null);const b=window.open(e||"",m,E);Re(b,i,"popup-blocked");try{b.focus()}catch{}return new VE(b)}function TM(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="__/auth/handler",bM="emulator/auth/handler",SM=encodeURIComponent("fac");async function PE(i,e,n,s,o,u){Re(i.config.authDomain,i,"auth-domain-config-required"),Re(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Io,eventId:o};if(e instanceof Hb){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",aR(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,b]of Object.entries({}))f[E]=b}if(e instanceof Nu){const E=e.getScopes().filter(b=>b!=="");E.length>0&&(f.scopes=E.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await i._getAppCheckToken(),g=p?`#${SM}=${encodeURIComponent(p)}`:"";return`${AM(i)}?${yu(m).slice(1)}${g}`}function AM({config:i}){return i.emulator?Eg(i,bM):`https://${i.authDomain}/${wM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="webStorageSupport";class RM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xb,this._completeRedirectFn=XO,this._overrideRedirectResult=KO}async _openPopup(e,n,s,o){var u;br((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await PE(e,n,s,fp(),o);return EM(e,f,Ag())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await PE(e,n,s,fp(),o);return NO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(br(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await mM(e),s=new ZO(e);return n.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pm,{type:Pm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Pm];f!==void 0&&n(!!f),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ub()||Ob()||wg()}}const IM=RM;var kE="@firebase/auth",LE="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DM(i){Li(new ai("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Re(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jb(i)},g=new Kx(s,o,u,p);return iO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Li(new ai("auth-internal",e=>{const n=ya(e.getProvider("auth").getImmediate());return(s=>new CM(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(kE,LE,NM(i)),Yn(kE,LE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=5*60,OM=QE("authIdTokenMaxAge")||xM;let UE=null;const MM=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>OM)return;const o=n==null?void 0:n.token;UE!==o&&(UE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function VM(i=vp()){const e=ma(i,"auth");if(e.isInitialized())return e.getImmediate();const n=nO(i,{popupRedirectResolver:IM,persistence:[UO,RO,Xb]}),s=QE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=MM(u.toString());TO(n,f,()=>f(n.currentUser)),EO(n,m=>f(m))}}const o=$E("auth");return o&&rO(n,`http://${o}`),n}function PM(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}Qx({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Pi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",PM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DM("Browser");const iS=U.createContext();function Rs(){return U.useContext(iS)}function kM({children:i}){const[e,n]=U.useState(null),[s,o]=U.useState(!0),u=VM(lg);U.useEffect(()=>wO(u,b=>{n(b),o(!1)}),[u]);const g={currentUser:e,signup:(E,b)=>vO(u,E,b),login:(E,b)=>_O(u,E,b),logout:()=>bO(u)};return S.jsx(iS.Provider,{value:g,children:!s&&i})}function LM(){const i=U.useRef(),e=U.useRef(),{login:n}=Rs(),[s,o]=U.useState(""),[u,f]=U.useState(!1),m=Au();async function p(g){g.preventDefault(),o(""),f(!0);try{await n(i.current.value,e.current.value),m("/dashboard")}catch(E){o(E.message||"Failed to log in")}f(!1)}return S.jsx("div",{className:"auth-bg",children:S.jsxs("div",{className:"auth-container",children:[S.jsx("div",{className:"auth-logo-row",children:S.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),S.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),S.jsx("h2",{className:"auth-title",children:"Sign In"}),s&&S.jsx("div",{className:"auth-error",children:s}),S.jsxs("form",{className:"auth-form",onSubmit:p,children:[S.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),S.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),S.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),S.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),S.jsx("button",{disabled:u,type:"submit",className:"auth-btn",children:"SIGN IN"})]}),S.jsx("div",{className:"auth-link-row",children:S.jsxs("span",{children:["Don't have an account? ",S.jsx("a",{href:"/showswatched2/signup",className:"auth-link",children:"Sign up"})]})})]})})}function UM(){const i=U.useRef(),e=U.useRef(),n=U.useRef(),{signup:s}=Rs(),[o,u]=U.useState(""),[f,m]=U.useState(!1),p=Au();async function g(E){if(E.preventDefault(),e.current.value!==n.current.value){u("Passwords do not match");return}u(""),m(!0);try{await s(i.current.value,e.current.value),p("/dashboard",{replace:!0})}catch(b){u(b.message||"Failed to create an account")}m(!1)}return S.jsx("div",{className:"auth-bg",children:S.jsxs("div",{className:"auth-container",children:[S.jsx("div",{className:"auth-logo-row",children:S.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Logo",className:"auth-logo"})}),S.jsx("div",{className:"auth-subtitle",children:"Track your favorite shows and movies"}),S.jsx("h2",{className:"auth-title",children:"Sign Up"}),o&&S.jsx("div",{className:"auth-error",children:o}),S.jsxs("form",{className:"auth-form",onSubmit:g,children:[S.jsx("label",{htmlFor:"email",className:"auth-label",children:"Email *"}),S.jsx("input",{id:"email",type:"email",ref:i,placeholder:"Email",required:!0,className:"auth-input"}),S.jsx("label",{htmlFor:"password",className:"auth-label",children:"Password *"}),S.jsx("input",{id:"password",type:"password",ref:e,placeholder:"Password",required:!0,className:"auth-input"}),S.jsx("label",{htmlFor:"passwordConfirm",className:"auth-label",children:"Confirm Password *"}),S.jsx("input",{id:"passwordConfirm",type:"password",ref:n,placeholder:"Confirm Password",required:!0,className:"auth-input"}),S.jsx("button",{disabled:f,type:"submit",className:"auth-btn",children:"Sign Up"})]}),S.jsx("div",{className:"auth-link-row",children:S.jsxs("span",{children:["Already have an account? ",S.jsx("a",{href:"/showswatched2/login",className:"auth-link",children:"Sign In"})]})})]})})}function jM({children:i}){const{currentUser:e}=Rs();return e?i:S.jsx(mg,{to:"/login"})}function zM({show:i}){const[e,n]=U.useState(!1),[s,o]=U.useState([]),[u,f]=U.useState(null),[m,p]=U.useState([]),[g,E]=U.useState(!1),[b,A]=U.useState(""),P=async()=>{if(!e&&i.tmdbId){E(!0),A("");try{const Q=`https://api.themoviedb.org/3/tv/${i.tmdbId}?api_key=ca9a91468bb700f84faf986252bc3fe6`,Y=await(await fetch(Q)).json();o(Y.seasons||[]),Y.seasons&&Y.seasons.length>0&&f(Y.seasons[0].season_number)}catch{A("Failed to load seasons.")}E(!1)}n(V=>!V)};return U.useEffect(()=>{(async()=>{if(i.tmdbId&&u!=null){E(!0),A("");try{const H=`https://api.themoviedb.org/3/tv/${i.tmdbId}/season/${u}?api_key=ca9a91468bb700f84faf986252bc3fe6`,se=await(await fetch(H)).json();p(se.episodes||[])}catch{A("Failed to load episodes.")}E(!1)}})()},[i.tmdbId,u]),S.jsxs("div",{style:{marginTop:"0.7em",marginBottom:"0.3em",textAlign:"left"},children:[S.jsx("button",{onClick:P,className:"dashboard-diary-collapse-btn",style:{minWidth:140,fontWeight:"bold",background:"#ffe066",color:"#205a7a",border:"2px solid #205a7a",fontSize:"1.08rem",boxShadow:"0 2px 8px #0005",marginBottom:6},children:e?"Hide Episodes":" Show Episodes"}),e&&S.jsx("div",{className:"episodes-list",style:{marginTop:10,marginBottom:8,background:"#f8f9fa",borderRadius:8,padding:"10px 16px",boxShadow:"0 1px 6px #0002"},children:g?S.jsx("div",{children:"Loading..."}):b?S.jsx("div",{style:{color:"red"},children:b}):S.jsxs(S.Fragment,{children:[s.length>0&&S.jsxs("div",{style:{marginBottom:10},children:[S.jsx("label",{htmlFor:"season-select",style:{fontWeight:600,color:"#205a7a",marginRight:8},children:"Season:"}),S.jsx("select",{id:"season-select",value:u||"",onChange:V=>f(Number(V.target.value)),style:{fontWeight:600,fontSize:"1rem",padding:"0.3em 0.7em",borderRadius:5,border:"1px solid #205a7a",color:"#205a7a",background:"#fff"},children:s.map(V=>S.jsx("option",{value:V.season_number,children:V.name||`Season ${V.season_number}`},V.id||V.season_number))})]}),m.length>0?S.jsx("ul",{style:{paddingLeft:18,marginBottom:0},children:m.map(V=>S.jsxs("li",{style:{marginBottom:3,color:"#205a7a",fontWeight:500},children:[S.jsxs("strong",{children:["Ep ",V.episode_number,":"]})," ",V.name," ",V.air_date?S.jsxs("span",{style:{color:"#888",fontWeight:400},children:["(",V.air_date,")"]}):""]},V.id||V.episode_number))}):S.jsx("div",{children:"No episodes found."})]})})]})}function BM(){const{currentUser:i}=Rs(),[e,n]=U.useState([]),[s,o]=U.useState([]),[u,f]=U.useState(!0),[m,p]=U.useState("");U.useEffect(()=>{async function E(){f(!0),p("");try{const b=await tu(mr(Ft,"users")),A=await tu(mr(Ft,"shows"));n(b.docs.map(P=>({id:P.id,...P.data()}))),o(A.docs.map(P=>({id:P.id,...P.data()})))}catch{p("Failed to load admin data.")}f(!1)}E()},[]);async function g(E){p("");try{await ng(Oi(Ft,"shows",E)),o(s.filter(b=>b.id!==E))}catch{p("Failed to delete show.")}}return S.jsxs("div",{className:"admin-dashboard",children:[S.jsx("h2",{children:"Admin Dashboard"}),m&&S.jsx("div",{className:"error",children:m}),u?S.jsx("p",{children:"Loading..."}):S.jsxs(S.Fragment,{children:[S.jsx("h3",{children:"All Users"}),S.jsx("ul",{children:e.length===0?S.jsx("li",{children:"No users found."}):e.map(E=>S.jsx("li",{children:E.email||E.id},E.id))}),S.jsx("h3",{children:"All Shows"}),S.jsx("ul",{children:s.length===0?S.jsx("li",{children:"No shows found."}):s.map(E=>S.jsxs("li",{children:[S.jsx("strong",{children:E.title})," (User: ",E.uid,")",S.jsx("button",{onClick:()=>g(E.id),style:{marginLeft:"1em"},children:"Delete"})]},E.id))})]})]})}const qM=[{icon:S.jsx("span",{style:{fontSize:"2.4rem",color:"#fff",display:"flex",justifyContent:"center"},children:S.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/tv.png",alt:"Track Shows",style:{height:"44px",marginBottom:"8px"}})}),title:"Track Your Shows & Movies",desc:"Log every movie and TV show you've watched or want to see."},{icon:S.jsx("span",{style:{fontSize:"2.4rem",color:"#5fe05f",display:"flex",justifyContent:"center"},children:S.jsx("img",{src:"https://img.icons8.com/ios-filled/60/5fe05f/bookmark-ribbon.png",alt:"Diary",style:{height:"44px",marginBottom:"8px"}})}),title:"Personal Diary",desc:"Keep a private journal of your viewing journey."},{icon:S.jsx("span",{style:{fontSize:"2.4rem",color:"#ff7ab2",display:"flex",justifyContent:"center"},children:S.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ff7ab2/search--v1.png",alt:"Search",style:{height:"44px",marginBottom:"8px"}})}),title:"Discover & Search",desc:"Find new favorites using real-time TMDb search."},{icon:S.jsx("span",{style:{fontSize:"2.4rem",color:"#ffc43d",display:"flex",justifyContent:"center"},children:S.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffc43d/clapperboard.png",alt:"Streaming Info",style:{height:"44px",marginBottom:"8px"}})}),title:"Streaming Info",desc:"See where to watch, with up-to-date streaming info."}],HM=[{icon:S.jsx("img",{src:"https://img.icons8.com/ios-filled/60/ffffff/search--v1.png",alt:"Search",style:{height:"38px",marginBottom:"8px"}}),title:"1. Search",desc:"Find any movie or TV show instantly."},{icon:S.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/plus-math.png",alt:"Add to Diary",style:{height:"38px",marginBottom:"8px"}}),title:"2. Add to Diary",desc:"Save to your personal diary with one click."},{icon:S.jsx("img",{src:"https://img.icons8.com/ios-filled/60/7ed6ff/checked-checkbox.png",alt:"Mark as Watched",style:{height:"38px",marginBottom:"8px"}}),title:"3. Mark as Watched",desc:"Toggle watched/unwatched as you go."}],FM="https://image.tmdb.org/t/p/w500";function GM(){const{currentUser:i}=Rs(),[e,n]=U.useState([]),[s,o]=U.useState(!0),[u,f]=U.useState("");return U.useEffect(()=>{async function m(){o(!0),f("");try{const p=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ca9a91468bb700f84faf986252bc3fe6");if(!p.ok)throw new Error("Failed to fetch trending movies");const g=await p.json();n(g.results.slice(0,10))}catch{f("Could not load trending movies.")}o(!1)}m()},[]),i?S.jsx(mg,{to:"/dashboard"}):S.jsx("div",{className:"sw-bg",children:S.jsxs("div",{className:"sw-container",children:[S.jsxs("div",{className:"sw-header-box sw-header-custom",children:[S.jsx("div",{className:"sw-logo-row",children:S.jsx("div",{className:"sw-header-logo-bg",children:S.jsx("img",{src:"https://img.icons8.com/ios-filled/100/000000/movie-projector.png",alt:"logo",className:"sw-header-logo"})})}),S.jsx("h1",{className:"sw-main-title sw-header-title-custom",children:"ShowsWatched.com"}),S.jsx("p",{className:"sw-main-sub sw-header-sub-custom",children:"Track What You Watch. Discover Whats Next."}),S.jsx(yg,{to:"/login",children:S.jsx("button",{className:"sw-main-btn sw-header-btn-custom",children:"Get Started"})})]}),S.jsxs("div",{className:"sw-section",children:[S.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Features"}),S.jsx("div",{className:"sw-feature-grid sw-feature-custom-grid",children:qM.map((m,p)=>S.jsxs("div",{className:"sw-feature-card sw-feature-custom-card",children:[S.jsx("div",{className:"sw-feature-icon sw-feature-custom-icon",children:m.icon}),S.jsx("div",{className:"sw-feature-title sw-feature-custom-title",children:m.title}),S.jsx("div",{className:"sw-feature-desc sw-feature-custom-desc",children:m.desc})]},p))})]}),S.jsxs("div",{className:"sw-section",children:[S.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"How It Works"}),S.jsx("div",{className:"sw-hiw-grid sw-hiw-custom-grid",children:HM.map((m,p)=>S.jsxs("div",{className:"sw-hiw-card sw-hiw-custom-card",children:[S.jsx("div",{className:"sw-hiw-icon sw-hiw-custom-icon",children:m.icon}),S.jsx("div",{className:"sw-hiw-title sw-hiw-custom-title",children:m.title}),S.jsx("div",{className:"sw-hiw-desc sw-hiw-custom-desc",children:m.desc})]},p))})]}),S.jsxs("div",{className:"sw-section",children:[S.jsx("h2",{className:"sw-section-title",style:{textAlign:"center"},children:"Trending Now"}),S.jsx("div",{className:"sw-trending-grid sw-trending-custom-grid",children:s?S.jsx("div",{className:"sw-trending-placeholder",children:"Loading trending movies..."}):u?S.jsx("div",{className:"sw-trending-placeholder",children:u}):e.length===0?S.jsx("div",{className:"sw-trending-placeholder",children:"No trending movies found."}):e.slice(0,6).map(m=>S.jsxs("div",{className:"sw-trending-card sw-trending-custom-card",children:[S.jsx("img",{src:m.poster_path?`${FM}${m.poster_path}`:"https://placehold.co/120x160?text=No+Image",alt:m.title,className:"sw-trending-img sw-trending-custom-img"}),S.jsx("div",{className:"sw-trending-title sw-trending-custom-title",children:m.title}),S.jsx("div",{className:"sw-trending-year sw-trending-custom-year",children:m.release_date?m.release_date.slice(0,4):""})]},m.id))})]})]})})}function $M({entryId:i}){console.log("entryId:",i);const{currentUser:e}=Rs(),[n,s]=U.useState([]),[o,u]=U.useState(!0),[f,m]=U.useState(""),[p,g]=U.useState(null),[E,b]=U.useState(""),[A,P]=U.useState({}),[V,Q]=U.useState(!0),H=U.useRef(null);U.useEffect(()=>{const x=hh(mr(Ft,`discussions/${i}/comments`),A2("timestamp","asc")),R=N2(x,I=>{const N=I.docs.map(M=>({id:M.id,...M.data()}));if(console.log("Fetched comments:",N),s(N),e){const M={};N.forEach(L=>{L.votes&&L.votes[e.uid]&&(M[L.id]=L.votes[e.uid])}),P(M)}u(!1)});return()=>R()},[i,e]);const Y=async x=>{x.preventDefault(),f.trim()&&(await lp(mr(Ft,`discussions/${i}/comments`),{text:f,author:e?e.email:"Anonymous",authorUid:e?e.uid:null,timestamp:rE(),parentId:null,upvotes:0,downvotes:0,votes:{},replies:[]}),m(""),H.current&&H.current.focus())},se=async x=>{E.trim()&&(await lp(mr(Ft,`discussions/${i}/comments`),{text:E,author:e?e.email:"Anonymous",authorUid:e?e.uid:null,timestamp:rE(),parentId:x,upvotes:0,downvotes:0,votes:{},replies:[]}),g(null),b(""))},ie=async(x,R)=>{if(!e)return;const I=Oi(Ft,`discussions/${i}/comments`,x),N=n.find(C=>C.id===x);if(!N)return;const M=N.votes?N.votes[e.uid]:void 0;if(M===R)return;let L={};R==="up"?L={upvotes:ih(1),...M==="down"?{downvotes:ih(-1)}:{},[`votes.${e.uid}`]:"up"}:R==="down"&&(L={downvotes:ih(1),...M==="up"?{upvotes:ih(-1)}:{},[`votes.${e.uid}`]:"down"}),await op(I,L)},pe=async x=>{if(!e)return;const R=n.find(N=>N.id===x);if(!R||R.authorUid!==e.uid)return;const I=async N=>{const M=n.filter(C=>C.parentId===N);for(const C of M)C.authorUid===e.uid&&await I(C.id);const L=n.find(C=>C.id===N);L&&L.authorUid===e.uid&&await ng(Oi(Ft,`discussions/${i}/comments`,N))};await I(x)};function de({commentId:x,level:R,childrenCount:I,render:N,showCount:M=1}){const[L,C]=U.useState(!1),et=N(x,R+1);return!et||et.length===0?null:L?S.jsxs("div",{children:[et,I>M&&S.jsx("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>C(!1),children:"Hide Replies"})]}):S.jsxs("div",{children:[et.slice(0,M),I>M&&S.jsxs("button",{style:{margin:"0.25em 0 0.5em 1em",fontSize:"0.95em"},onClick:()=>C(!0),children:["View ",I-M+1," more repl",I-M+1===1?"y":"ies"]})]})}const be=(x=null,R=0)=>n.filter(N=>N.parentId===x).map(N=>{var L,C,et,it;const M=n.filter(X=>X.parentId===N.id);return S.jsxs("div",{className:`discussion-comment${R>0?" discussion-reply":""}`,style:{marginLeft:R*18},children:[S.jsxs("div",{className:"discussion-header",children:[S.jsx("span",{className:"discussion-author",children:N.author}),S.jsx("span",{className:"discussion-date",children:((it=(C=(L=N.timestamp)==null?void 0:L.toDate)==null?void 0:(et=C.call(L)).toLocaleString)==null?void 0:it.call(et))||""})]}),S.jsx("div",{className:"discussion-body",children:N.text}),S.jsxs("div",{className:"discussion-actions",children:[S.jsxs("button",{className:`discussion-vote${A[N.id]==="up"?" voted":""}`,onClick:()=>ie(N.id,"up"),title:"Thumbs up",disabled:A[N.id]==="up",children:[" ",N.upvotes||0]}),S.jsxs("button",{className:`discussion-vote${A[N.id]==="down"?" voted":""}`,onClick:()=>ie(N.id,"down"),title:"Thumbs down",disabled:A[N.id]==="down",children:[" ",N.downvotes||0]}),S.jsx("button",{className:"discussion-reply-btn",onClick:()=>g(N.id),children:"Reply"}),N.authorUid===(e==null?void 0:e.uid)&&S.jsx("button",{className:"discussion-delete-btn",onClick:()=>pe(N.id),title:"Delete",children:""})]}),p===N.id&&S.jsxs("div",{className:"discussion-reply-form",children:[S.jsx("input",{type:"text",value:E,onChange:X=>b(X.target.value),placeholder:"Write a reply...",autoFocus:!0}),S.jsx("button",{onClick:()=>se(N.id),children:"Send"}),S.jsx("button",{onClick:()=>g(null),children:"Cancel"})]}),S.jsx(de,{commentId:N.id,level:R,childrenCount:M.length,render:be,showCount:1})]},N.id)});return S.jsxs("div",{className:"discussion-section",children:[S.jsx("button",{className:"discussion-collapse-btn",onClick:()=>Q(x=>!x),style:{marginBottom:V?0:10},children:V?"Show Discussion":"Hide Discussion"}),!V&&S.jsxs(S.Fragment,{children:[S.jsx("h4",{children:"Discussion"}),S.jsxs("form",{onSubmit:Y,className:"discussion-form",children:[S.jsx("input",{type:"text",ref:H,value:f,onChange:x=>m(x.target.value),placeholder:"Add a comment..."}),S.jsx("button",{type:"submit",children:"Send"})]}),S.jsx("div",{className:"discussion-comments",children:o?S.jsx("div",{children:"Loading..."}):be()})]})]})}var rS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jE=as.createContext&&as.createContext(rS),KM=["attr","size","title"];function QM(i,e){if(i==null)return{};var n=YM(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function YM(i,e){if(i==null)return{};var n={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;n[s]=i[s]}return n}function jh(){return jh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},jh.apply(this,arguments)}function zE(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),n.push.apply(n,s)}return n}function zh(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zE(Object(n),!0).forEach(function(s){XM(i,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(n,s))})}return i}function XM(i,e,n){return e=WM(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function WM(i){var e=ZM(i,"string");return typeof e=="symbol"?e:e+""}function ZM(i,e){if(typeof i!="object"||!i)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function sS(i){return i&&i.map((e,n)=>as.createElement(e.tag,zh({key:n},e.attr),sS(e.child)))}function xu(i){return e=>as.createElement(JM,jh({attr:zh({},i.attr)},e),sS(i.child))}function JM(i){var e=n=>{var{attr:s,size:o,title:u}=i,f=QM(i,KM),m=o||n.size||"1em",p;return n.className&&(p=n.className),i.className&&(p=(p?p+" ":"")+i.className),as.createElement("svg",jh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,f,{className:p,style:zh(zh({color:i.color||n.color},n.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&as.createElement("title",null,u),i.children)};return jE!==void 0?as.createElement(jE.Consumer,null,n=>e(n)):e(rS)}function eV(i){return xu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(i)}function tV(i){return xu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(i)}function nV(i){return xu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function iV(i){return xu({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(i)}function rV(i){return xu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(i)}const lo="ca9a91468bb700f84faf986252bc3fe6",Fl="https://api.themoviedb.org/3",km="US";function sV(){const{currentUser:i,logout:e}=Rs(),n=Au(),[s,o]=U.useState("movie"),[u,f]=U.useState(""),[m,p]=U.useState([]),[g,E]=U.useState(!1),[b,A]=U.useState(""),[P,V]=U.useState("all"),[Q,H]=U.useState([]),[Y,se]=U.useState({}),ie=U.useRef(null),pe=U.useRef(""),[de,be]=U.useState(null),[x,R]=U.useState(""),I=U.useRef({}),[N,M]=U.useState(!1),[L,C]=U.useState(null),[et,it]=U.useState(!1),[X,oe]=U.useState(""),[ve,qe]=U.useState(!1),[O,te]=U.useState(""),[le,re]=U.useState(!1),[Te,De]=U.useState(""),[_e,At]=U.useState("movie"),[Qe,pn]=U.useState([]),[fi,Sn]=U.useState(!0),[di,Zn]=U.useState(""),[mi,Sr]=U.useState(1);U.useEffect(()=>{pn([]),Sr(1),Sn(!0),Zn("")},[_e]),U.useEffect(()=>{let q=!0;async function ue(ye=1){Sn(!0),Zn("");try{const he=await fetch(`https://api.themoviedb.org/3/trending/${_e}/week?api_key=${lo}&page=${ye}`);if(!he.ok)throw new Error("Failed to fetch trending");const ge=await he.json();q&&pn(ye===1?ge.results:We=>{const pt=new Set(We.map(Pn=>Pn.id));return[...We,...ge.results.filter(Pn=>!pt.has(Pn.id))]})}catch{q&&Zn("Could not load trending.")}q&&Sn(!1)}return ue(mi),()=>{q=!1}},[_e,mi]),U.useEffect(()=>{Qe.filter(ue=>!Q.some(ye=>ye.id===ue.id&&ye.media_type===_e)).length<12&&Qe.length<100&&Sr(ue=>ue+1)},[Qe,Q,_e]),U.useEffect(()=>{if(!i)return;async function q(){const ue=hh(mr(Ft,"diary"),Cm("uid","==",i.uid));let he=(await tu(ue)).docs.map(ge=>({...ge.data(),docId:ge.id}));he=he.sort((ge,We)=>new Date(We.createdAt)-new Date(ge.createdAt)),H(he);for(const ge of he)Is(ge)}q()},[i]),U.useEffect(()=>{if(!i){oe(""),te("");return}let q=!1;async function ue(){const ye=await getDoc(Oi(Ft,"users",i.uid));let he="";ye.exists()?he=ye.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid):he=i.displayName||(i.email?i.email.split("@")[0]:i.uid),q||(oe(he),te(he))}return ue(),()=>{q=!0}},[i&&i.uid]);async function Is(q){var ye;if(Y[q.id])return;let ue="";q.media_type==="movie"?ue=`${Fl}/movie/${q.id}/watch/providers?api_key=${lo}`:ue=`${Fl}/tv/${q.id}/watch/providers?api_key=${lo}`;try{const he=await fetch(ue);if(he.status===404){se(pt=>({...pt,[q.id]:{}}));return}const We=((ye=(await he.json()).results)==null?void 0:ye[km])||{};se(pt=>({...pt,[q.id]:We}))}catch{se(ge=>({...ge,[q.id]:{}}))}}async function ln(q,ue){if(!q.trim()){p([]),A(""),E(!1);return}E(!0),A(""),p([]);try{const he=`${Fl}${ue==="movie"?"/search/movie":"/search/tv"}?api_key=${lo}&query=${encodeURIComponent(q)}`,We=await(await fetch(he)).json();We.results?p(We.results):(p([]),A("No results found."))}catch{A("Failed to fetch results.")}E(!1)}U.useEffect(()=>{if(!(u.trim()===""||u===pe.current))return ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{ln(u,s)},400),()=>clearTimeout(ie.current)},[u,s]);async function Lo(q){q.preventDefault(),pe.current=u,await ln(u,s)}async function Ar(q){if(!i||Q.some(We=>We.id===q.id&&We.media_type===(q.media_type||s)))return;const ue={uid:i.uid,id:q.id,title:q.title||q.name,date:(q.release_date||q.first_air_date||"").slice(0,10),poster:q.poster_path?`https://image.tmdb.org/t/p/w200${q.poster_path}`:"https://placehold.co/120x170?text=No+Image",desc:q.overview||"No description.",watched:!1,archived:!1,media_type:q.media_type||s,createdAt:new Date().toISOString()};await lp(mr(Ft,"diary"),ue);const ye=hh(mr(Ft,"diary"),Cm("uid","==",i.uid));let ge=(await tu(ye)).docs.map(We=>({...We.data(),docId:We.id}));ge=ge.sort((We,pt)=>new Date(pt.createdAt)-new Date(We.createdAt)),H(ge),Is(ue),p([]),f("")}async function Rr(q){H(ue=>ue.filter(ye=>ye.docId!==q)),be(null);try{await ng(Oi(Ft,"diary",q));const ue=hh(mr(Ft,"diary"),Cm("uid","==",i.uid));let he=(await tu(ue)).docs.map(ge=>({...ge.data(),docId:ge.id}));he=he.sort((ge,We)=>new Date(We.createdAt)-new Date(ge.createdAt)),H(he)}catch{window.alert("Failed to remove entry. Please try again.")}}async function zi(q,ue){H(ye=>ye.map(he=>he.docId===q?{...he,watched:!ue}:he)),be(ye=>ye&&ye.docId===q?{...ye,watched:!ue}:ye);try{await op(Oi(Ft,"diary",q),{watched:!ue})}catch{H(he=>he.map(ge=>ge.docId===q?{...ge,watched:ue}:ge)),be(he=>he&&he.docId===q?{...he,watched:ue}:he),window.alert("Failed to update watched status. Please try again.")}}async function Uo(q,ue){H(ye=>ye.map(he=>he.docId===q?{...he,archived:!ue}:he)),be(ye=>ye&&ye.docId===q?{...ye,archived:!ue}:ye);try{await op(Oi(Ft,"diary",q),{archived:!ue})}catch{H(he=>he.map(ge=>ge.docId===q?{...ge,archived:ue}:ge)),be(he=>he&&he.docId===q?{...he,archived:ue}:he),window.alert("Failed to update archive status. Please try again.")}}function Ir(q){window.alert(`Share this: ${q.title}`)}async function Cs(){try{await e(),n("/")}catch{alert("Failed to sign out")}}async function va(){if(!O.trim()){De("Display name cannot be empty.");return}re(!0),De("");try{await C2(Oi(Ft,"users",i.uid),{displayName:O.trim()},{merge:!0}),oe(O.trim()),qe(!1);const q=await getDoc(Oi(Ft,"users",i.uid));if(q.exists()){const ue=q.data().displayName||i.displayName||(i.email?i.email.split("@")[0]:i.uid);oe(ue),te(ue)}}catch{De("Failed to update display name.")}re(!1)}function ft(){te(X),qe(!0),De("")}function Ye(){qe(!1),De("")}async function un(q){var ue,ye,he,ge,We,pt;if(!q)return"";try{if(q.media_type==="movie"){const $t=await(await fetch(`${Fl}/movie/${q.id}/release_dates?api_key=${lo}`)).json(),Ut=((ue=$t.results)==null?void 0:ue.find(Jn=>Jn.iso_3166_1===km))||((ye=$t.results)==null?void 0:ye[0]);return((ge=(he=Ut==null?void 0:Ut.release_dates)==null?void 0:he.find(Jn=>Jn.certification))==null?void 0:ge.certification)||""}else if(q.media_type==="tv"){const $t=await(await fetch(`${Fl}/tv/${q.id}/content_ratings?api_key=${lo}`)).json(),Ut=((We=$t.results)==null?void 0:We.find(yn=>yn.iso_3166_1===km))||((pt=$t.results)==null?void 0:pt[0]);return(Ut==null?void 0:Ut.rating)||""}}catch{return""}return""}function Lt(q){be(q),R(""),un(q).then(ue=>R(ue||""))}function _a({entry:q,providersMap:ue,onClose:ye,onShare:he,onToggleWatched:ge,onRemove:We,onArchiveToggle:pt,diary:Pn,contentRating:$t}){if(!q)return null;const Ut=ue[q.id]||{},yn=Ut.flatrate||[],Jn=Ut.rent||[],lt=Ut.buy||[],ke=q;return _E.createPortal(S.jsx("div",{className:"dashboard-modal-overlay",onClick:ye,children:S.jsxs("div",{className:"dashboard-modal-content",onClick:Le=>Le.stopPropagation(),children:[S.jsx("button",{className:"dashboard-modal-close",onClick:ye,"aria-label":"Close modal",type:"button",children:""}),S.jsxs("div",{className:"dashboard-modal-body",children:[S.jsx("img",{className:"dashboard-diary-poster",src:ke.poster_path?`https://image.tmdb.org/t/p/w300${ke.poster_path}`:ke.poster||"https://placehold.co/120x170?text=No+Image",alt:ke.title,style:{marginBottom:"1rem"}}),S.jsx("div",{className:"dashboard-diary-movie-title",children:ke.title}),S.jsxs("div",{className:"dashboard-diary-date",children:[ke.release_date?ke.release_date.slice(0,4):ke.date||"",$t&&S.jsx("span",{style:{marginLeft:8,color:"#ffe066",fontWeight:600},children:$t})]}),S.jsx("div",{className:"dashboard-diary-desc",children:ke.overview||ke.desc||""}),S.jsxs("div",{className:"dashboard-diary-providers-modal",children:[S.jsxs("div",{className:"dashboard-diary-providers-group",children:[S.jsx("div",{className:"dashboard-diary-providers-label",children:"Streaming:"}),S.jsx("div",{className:"dashboard-diary-providers-icons",children:yn.length===0?S.jsx("span",{style:{color:"#888"},children:"N/A"}):yn.map(Le=>S.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Le.logo_path}`,alt:Le.provider_name,title:Le.provider_name,className:"dashboard-provider-icon-sm"},Le.provider_id))})]}),S.jsxs("div",{className:"dashboard-diary-providers-group",children:[S.jsx("div",{className:"dashboard-diary-providers-label",children:"Rent:"}),S.jsx("div",{className:"dashboard-diary-providers-icons",children:Jn.length===0?S.jsx("span",{style:{color:"#888"},children:"N/A"}):Jn.map(Le=>S.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Le.logo_path}`,alt:Le.provider_name,title:Le.provider_name,className:"dashboard-provider-icon-sm"},Le.provider_id))})]}),S.jsxs("div",{className:"dashboard-diary-providers-group",children:[S.jsx("div",{className:"dashboard-diary-providers-label",children:"Buy:"}),S.jsx("div",{className:"dashboard-diary-providers-icons",children:lt.length===0?S.jsx("span",{style:{color:"#888"},children:"N/A"}):lt.map(Le=>S.jsx("img",{src:`https://image.tmdb.org/t/p/w45${Le.logo_path}`,alt:Le.provider_name,title:Le.provider_name,className:"dashboard-provider-icon-sm"},Le.provider_id))})]})]}),q.media_type==="tv"&&(q.tmdbId||q.id)&&S.jsx("div",{style:{margin:"1.2rem 0 0.8rem 0",display:"flex",justifyContent:"center"},children:S.jsx(zM,{show:{...q,tmdbId:q.tmdbId||q.id}})}),S.jsxs("div",{className:"dashboard-diary-btn-row dashboard-diary-btn-row--modal",style:{flexDirection:"column",alignItems:"stretch",gap:"0.7rem",paddingLeft:0,paddingRight:0,marginTop:"1.2rem",marginBottom:"0.5rem"},children:[S.jsx("button",{className:"dashboard-diary-share",onClick:()=>he(ke),children:"SHARE"}),S.jsx("button",{className:ke.watched?"dashboard-diary-watched":"dashboard-diary-unwatched",onClick:()=>ge(ke.docId,ke.watched),children:ke.watched?"WATCHED":"UNWATCHED"}),S.jsx("button",{className:"dashboard-diary-archive",style:{background:q.archived?"#b2b2b2":"#25609c",color:q.archived?"#333":"#fff",borderRadius:"7px",padding:"0.7rem 2.2rem",fontWeight:700,fontFamily:"Orbitron, Arial, sans-serif",fontSize:"1rem"},onClick:()=>pt(q.docId,q.archived),children:q.archived?"Unarchive":"Archive"}),S.jsx("button",{className:"dashboard-diary-remove",onClick:()=>We(ke.docId),children:"REMOVE"})]}),S.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",borderRadius:"10px",background:"rgba(30,32,38,0.85)",boxShadow:"0 1px 8px #0002",border:"1px solid #2f3138",width:"calc(100% + 80px)",maxWidth:"none",marginLeft:"-40px",marginRight:"-40px"},children:[S.jsx("h3",{style:{marginTop:0,marginBottom:"1rem"},children:"Discussion"}),S.jsx($M,{entryId:ke.id})]})]})]})}),document.getElementById("modal-root"))}const jo=as.memo(_a);function Bi(){const q={};return Q.filter(ue=>ue.media_type===s).forEach(ue=>{const ye=Y[ue.id];ye&&[...ye.flatrate||[],...ye.rent||[],...ye.buy||[]].forEach(he=>{q[he.provider_id]=he})}),Object.values(q)}const pi=L?Q.filter(q=>{if(q.media_type!==s)return!1;const ue=Y[q.id];return ue?[...ue.flatrate||[],...ue.rent||[],...ue.buy||[]].some(ye=>ye.provider_id===L.provider_id):!1}):Q.filter(q=>q.media_type===s);function qi({open:q,onClose:ue,providers:ye,onSelect:he}){return q?_E.createPortal(S.jsx("div",{className:"dashboard-modal-overlay",onClick:ue,children:S.jsxs("div",{className:"dashboard-modal-content",onClick:ge=>ge.stopPropagation(),style:{maxWidth:440,padding:24},children:[S.jsx("button",{className:"dashboard-modal-close",onClick:ue,"aria-label":"Close modal",type:"button",children:""}),S.jsx("h2",{style:{color:"#fff",textAlign:"center",marginBottom:18},children:"All Providers"}),S.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:14,justifyContent:"center"},children:ye.map(ge=>S.jsx("img",{src:`https://image.tmdb.org/t/p/w45${ge.logo_path}`,alt:ge.provider_name,title:ge.provider_name,className:"dashboard-provider-icon-sm",style:{cursor:"pointer",border:L&&L.provider_id===ge.provider_id?"2px solid #8fc7ff":"2px solid transparent"},onClick:()=>he(ge)},ge.provider_id))}),L&&S.jsx("button",{style:{margin:"18px auto 0",display:"block"},onClick:()=>C(null),children:"Show All Entries"}),S.jsx("div",{style:{marginTop:24},children:pi.length===0?S.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:"No entries for this provider."}):S.jsx("div",{className:"provider-modal-cards-row",style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"1rem",width:"100%",overflowX:"auto",boxSizing:"border-box"},children:pi.map(ge=>S.jsxs("section",{className:"dashboard-diary-card collapsed",style:{width:"100%",maxWidth:"120px",minHeight:"210px",background:"#23242a",borderRadius:"10px",boxShadow:"0 2px 8px #0003",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0.2rem 0.9rem 0.2rem",margin:0,boxSizing:"border-box",justifySelf:"center"},children:[S.jsx("div",{className:"dashboard-diary-poster-col collapsed",style:{width:"100%",display:"flex",justifyContent:"center"},children:S.jsx("img",{src:ge.poster,alt:ge.title,className:"dashboard-diary-poster collapsed",style:{width:"100px",height:"145px",objectFit:"cover",borderRadius:"7px",marginBottom:"0.5rem"}})}),S.jsx("div",{className:"dashboard-diary-movie-title collapsed",style:{textAlign:"center",color:"#fff",fontSize:"1.02rem",fontWeight:600,marginTop:"0.2rem",marginBottom:"0.1rem",wordBreak:"break-word",width:"100%"},children:ge.title})]},ge.docId))})})]})}),document.getElementById("modal-root")):null}const gn=Q.filter(q=>et?q.archived:!q.archived).filter(q=>P==="all"?q.media_type===s:P==="watched"?q.media_type===s&&q.watched:P==="unwatched"?q.media_type===s&&!q.watched:!1);function Hi(q){At(q)}function Fi(q){Ar({id:q.id,title:q.title||q.name,poster_path:q.poster_path,release_date:q.release_date||q.first_air_date,overview:q.overview,media_type:_e}),pn(ue=>ue.filter(ye=>ye.id!==q.id))}return S.jsxs("div",{className:"dashboard-bg",children:[S.jsx("style",{children:`
          .dashboard-trending-movie-title {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 2.7em;
            max-height: 2.7em;
            line-height: 1.35em;
            font-size: 1.07rem;
            font-weight: 600;
            color: #fff;
            margin: 0.7em 0 0.2em 0;
            text-align: center;
          }
          .dashboard-trending-desc {
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 6.75em;
            max-height: 6.75em;
            line-height: 1.35em;
            font-size: 0.98rem;
            color: #c7d0e0;
            margin-bottom: 1em;
            text-align: center;
          }
        `}),S.jsxs("div",{className:"dashboard-content-wrapper",children:[S.jsx("div",{className:"dashboard-banner",children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[S.jsx(rV,{size:48,style:{color:"#fff",marginBottom:12}}),S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[S.jsx("span",{style:{color:"#fff",fontWeight:500,fontSize:"1.13rem",marginRight:6},children:"Display Name:"}),ve?S.jsxs(S.Fragment,{children:[S.jsx("input",{type:"text",value:O,onChange:q=>te(q.target.value),style:{fontWeight:700,color:"#25609c",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",fontSize:"1.13rem",outline:"none",width:140},disabled:le,autoFocus:!0}),S.jsx("button",{onClick:va,disabled:le,style:{background:"none",border:"none",color:"#35b36b",cursor:"pointer",fontSize:20,marginLeft:6},title:"Save",children:S.jsx(eV,{})}),S.jsx("button",{onClick:Ye,disabled:le,style:{background:"none",border:"none",color:"#ff5a5a",cursor:"pointer",fontSize:20,marginLeft:2},title:"Cancel",children:S.jsx(iV,{})})]}):S.jsxs(S.Fragment,{children:[S.jsx("span",{style:{fontWeight:700,color:"#35b36b",fontSize:"1.13rem",background:"#23242a",border:"1px solid #2f3138",borderRadius:6,padding:"5px 10px",minWidth:80,display:"inline-block"},children:X}),S.jsx("button",{onClick:ft,style:{background:"none",border:"none",color:"#8fc7ff",cursor:"pointer",fontSize:18,marginLeft:6},title:"Edit",children:S.jsx(nV,{})})]})]}),Te&&S.jsx("div",{style:{color:"#ff5a5a",marginTop:4},children:Te}),S.jsx("button",{onClick:Cs,style:{marginTop:12,background:"#fff",color:"#18191d",fontWeight:700,fontSize:"1.1rem",borderRadius:8,border:"none",padding:"10px 32px",boxShadow:"0 2px 10px #205a7a33",cursor:"pointer",transition:"background 0.18s, color 0.18s"},children:"LOG OUT"})]})}),S.jsxs("div",{className:"dashboard-search-section",children:[S.jsx("img",{src:"https://img.icons8.com/ios-filled/100/ffffff/movie-projector.png",alt:"App Icon",className:"dashboard-logo"}),S.jsx("div",{className:"dashboard-search-title",children:"Search for Movies / Tv Shows"}),S.jsx("div",{className:"dashboard-search-instructions",children:"NEED INSTRUCTIONS?"}),S.jsxs("div",{className:"dashboard-search-toggle-row",children:[S.jsx("button",{className:s==="movie"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("movie"),children:"MOVIE"}),S.jsx("button",{className:s==="tv"?"dashboard-toggle active":"dashboard-toggle",onClick:()=>o("tv"),children:"TV SHOW"})]}),S.jsxs("form",{className:"dashboard-search-bar-row",onSubmit:Lo,children:[S.jsx("input",{className:"dashboard-search-bar",placeholder:"Type to search for movies or shows*",value:u,onChange:q=>f(q.target.value)}),S.jsx("button",{className:"dashboard-search-btn",type:"submit",disabled:g||!u.trim(),children:g?"SEARCHING...":"SEARCH"})]}),S.jsxs("div",{className:"dashboard-search-results",children:[b&&S.jsx("div",{className:"auth-error",style:{marginTop:"1rem"},children:b}),!b&&m.length>0&&S.jsx("div",{className:"dashboard-trending-row",style:{marginTop:"1.4rem"},children:m.map(q=>S.jsxs("div",{className:"dashboard-trending-card",children:[S.jsx("img",{src:q.poster_path?`https://image.tmdb.org/t/p/w200${q.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:q.title||q.name,className:"dashboard-trending-poster"}),S.jsx("div",{className:"dashboard-trending-movie-title",children:q.title||q.name}),S.jsx("div",{className:"dashboard-trending-year",children:(q.release_date||q.first_air_date||"").slice(0,4)}),S.jsx("div",{className:"dashboard-trending-desc",children:q.overview?q.overview.slice(0,90)+(q.overview.length>90?"":""):"No description."}),S.jsx("button",{className:"dashboard-trending-add",onClick:()=>Ar(q),children:Q.some(ue=>ue.id===q.id)?"IN DIARY":"ADD TO DIARY"})]},q.id))})]})]}),S.jsxs("div",{className:"dashboard-diary-section",children:[S.jsx("div",{className:"dashboard-diary-title",children:"My Diary"}),S.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"1.5rem 0 2rem 0",gap:"1.2rem"},children:[S.jsx("button",{className:`dashboard-toggle${et?"":" active"}`,onClick:()=>it(!1),children:"My Diary"}),S.jsx("button",{className:`dashboard-toggle${et?" active":""}`,onClick:()=>it(!0),children:"Archived"})]}),S.jsxs("div",{className:"dashboard-diary-filter-row",children:[S.jsxs("div",{className:"dashboard-diary-filter-group",children:[S.jsx("button",{className:P==="all"?"dashboard-diary-filter active":"dashboard-diary-filter",onClick:()=>V("all"),children:"ALL"}),S.jsx("button",{className:P==="watched"?"dashboard-diary-filter active":"dashboard-diary-filter",onClick:()=>V("watched"),children:"WATCHED"})]}),S.jsx("div",{className:"dashboard-diary-filter-group dashboard-diary-filter-group--unwatched",children:S.jsx("button",{className:P==="unwatched"?"dashboard-diary-filter active":"dashboard-diary-filter",onClick:()=>V("unwatched"),children:"UNWATCHED"})})]}),S.jsx("div",{className:"dashboard-diary-providers-row",children:S.jsx("button",{className:"dashboard-providers-btn",onClick:()=>M(!0),children:"ALL PROVIDERS"})}),gn.length===0?S.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center"},children:"No entries in your diary."}):S.jsx("div",{className:"dashboard-diary-cards-row",children:gn.map(q=>(I.current[q.docId]||(I.current[q.docId]=U.createRef()),S.jsxs("section",{ref:ue=>I.current[q.docId]=ue,className:"dashboard-diary-card collapsed",children:[S.jsx("div",{className:"dashboard-diary-poster-col collapsed",children:S.jsx("img",{src:q.poster,alt:q.title,className:"dashboard-diary-poster collapsed"})}),S.jsx("div",{className:"dashboard-diary-movie-title collapsed",children:q.title}),S.jsxs("button",{className:"dashboard-diary-showmore",onClick:()=>Lt(q),children:["Show More ",S.jsx(tV,{})]})]},q.docId)))})]}),S.jsx("div",{style:{width:"100%",height:"10px",background:"#fff",borderRadius:"2px",margin:"2.5rem 0 2.2rem 0",boxShadow:"0 1px 8px #0002"}}),S.jsxs("div",{className:"dashboard-trending-section",children:[S.jsxs("div",{className:"dashboard-trending-title",style:{textAlign:"center",fontSize:"1.7rem",fontWeight:700,marginBottom:"1.2rem",color:"#fff"},children:["Trending ",_e==="movie"?"Movies":"TV Shows"]}),S.jsxs("div",{className:"dashboard-trending-toggle-row",style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:"1.2rem"},children:[S.jsx("button",{className:_e==="movie"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Hi("movie"),children:"Movies"}),S.jsx("button",{className:_e==="tv"?"dashboard-toggle active":"dashboard-toggle",style:{fontSize:"0.97rem",padding:"0.4em 1.2em"},onClick:()=>Hi("tv"),children:"TV Shows"})]}),S.jsx("div",{className:"dashboard-trending-row",style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"1.2rem",justifyItems:"center",alignItems:"stretch",marginTop:"0.5rem"},children:fi?S.jsx("div",{style:{color:"#aaa",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:"Loading"}):di?S.jsx("div",{style:{color:"#ff5a5a",margin:"2rem 0",textAlign:"center",gridColumn:"1 / -1"},children:di}):Qe.filter(q=>!Q.some(ue=>ue.id===q.id&&ue.media_type===_e)).slice(0,10).map(q=>S.jsxs("div",{className:"dashboard-trending-card",children:[S.jsx("img",{src:q.poster_path?`https://image.tmdb.org/t/p/w200${q.poster_path}`:"https://placehold.co/120x170?text=No+Image",alt:q.title||q.name,className:"dashboard-trending-poster"}),S.jsx("div",{className:"dashboard-trending-movie-title",children:q.title||q.name}),S.jsx("div",{className:"dashboard-trending-year",children:(q.release_date||q.first_air_date||"").slice(0,4)}),S.jsx("div",{className:"dashboard-trending-desc",children:q.overview?q.overview.slice(0,90)+(q.overview.length>90?"":""):"No description."}),S.jsx("button",{className:"dashboard-trending-add",onClick:()=>Fi(q),children:"ADD TO DIARY"})]},q.id))})]})]}),de&&S.jsx(jo,{entry:de,providersMap:Y,onClose:()=>be(null),onShare:Ir,onToggleWatched:zi,onRemove:Rr,onArchiveToggle:Uo,diary:Q,contentRating:x}),S.jsx(qi,{open:N,onClose:()=>{M(!1),C(null)},providers:Bi(),onSelect:q=>C(q)})]})}function aV(){const{currentUser:i}=Rs();return S.jsxs(zD,{children:[S.jsx(mo,{path:"/login",element:S.jsx(LM,{})}),S.jsx(mo,{path:"/signup",element:S.jsx(UM,{})}),S.jsx(mo,{path:"/admin",element:S.jsx(jM,{children:S.jsx(BM,{})})}),S.jsx(mo,{path:"/dashboard",element:S.jsx(sV,{})}),S.jsx(mo,{path:"/",element:i?S.jsx(mg,{to:"/dashboard"}):S.jsx(GM,{})})]})}UA.createRoot(document.getElementById("root")).render(S.jsx(U.StrictMode,{children:S.jsx(cx,{basename:"/showswatched2",children:S.jsx(kM,{children:S.jsx(aV,{})})})}));
